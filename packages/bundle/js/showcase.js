/*! For license information please see showcase.js.LICENSE.txt */
(()=>{var e,t,n,i,s,r,o={87207:(e,t,n)=>{"use strict";e.exports=n.p+"images/chrome.png"},75673:(e,t,n)=>{"use strict";e.exports=n.p+"images/edge.png"},68472:(e,t,n)=>{"use strict";e.exports=n.p+"images/firefox.png"},81826:(e,t,n)=>{"use strict";e.exports=n.p+"images/safari.png"},24877:(e,t,n)=>{"use strict";e.exports=n.p+"images/showcase-password-background.jpg"},90831:(e,t,n)=>{"use strict";e.exports=n.p+"images/matterport-logo-light.svg"},89992:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyMzAuMDUgNDkuNzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6I2Y1ZjRmM30uc3Qye2ZpbGw6I2ZmZn0uc3Qze2ZpbGw6Izk5OX08L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02MS4yOCAzNi4xNHYtOC44MmwtLjI0LTUuMDkuMTktLjA0IDIuMDUgNC41NCA0LjgyIDguODYgNC44Mi04Ljg2IDIuMDYtNC41NC4xOC4wNC0uMjQgNS4wOXY4LjgyaDUuMTRWMTQuNGgtNS44MWwtNi4xMSAxMS43N2gtLjA3TDYxLjk1IDE0LjRoLTUuODF2MjEuNzR6TTIxMi42OSAzMC42M2MwIDMuNiAxLjk0IDUuNSA1LjYxIDUuNWgzLjE3di00LjQ1aC0zLjQ1di05LjQ5aDMuNzR2LTQuMzZoLTQuMTV2LTQuMjFoLTQuOTF2MTcuMDF6TTIxMS4yNiAxNy44M2gtLjg3Yy0zLjAxIDAtNC40NCAyLjAzLTQuODkgMy40M2gtLjE4di0zLjQzSDIwMHYxOC4zMWg1LjMyVjI1LjcyYzAtMS4wOC40MS0xLjg0LjkzLTIuMzMuODktLjg2IDIuNzktMS4xMSA1LjAxLTEuMTF2LTQuNDV6TTE1OC42MyAxNy44M2gtLjg3Yy0zLjAxIDAtNC40NCAyLjAzLTQuODkgMy40M2gtLjE4di0zLjQzaC01LjMydjE4LjMxaDUuMzJWMjUuNzJjMC0xLjA4LjQxLTEuODQuOTMtMi4zMy44OS0uODYgMi43OS0xLjExIDUuMDEtMS4xMXYtNC40NXpNMTI3LjQ4IDI3LjI1YzAtNS45NyAzLjE3LTkuODYgOC44NS05Ljg2IDYuMjYgMCA4Ljc4IDQuNTMgOC43OCA5LjY0djEuNThoLTEyLjEydi4xOGMwIDIuMTIgMS4xNCAzLjYgNC4xNyAzLjYgMi4yMyAwIDMuNDUtMS4wNCA0LjY0LTIuMjdsMi42NiAzLjMxYy0xLjY5IDEuOTQtNC40NiAzLjEzLTcuOTEgMy4xMy01LjguMDEtOS4wNy0zLjI3LTkuMDctOS4zMXptNS41LTIuMDV2LjI5aDYuNjJ2LS4zMmMwLTIuMy0xLjA0LTMuODUtMy4xNy0zLjg1cy0zLjQ1IDEuNTQtMy40NSAzLjg4ek0xODAuMDQgMjcuMjVjMC02LjA4IDMuMzEtOS44NiA4Ljg1LTkuODYgNS41NCAwIDguODUgMy43OCA4Ljg1IDkuODZzLTMuMzEgOS4zMi04Ljg1IDkuMzJjLTUuNTUgMC04Ljg1LTMuMjQtOC44NS05LjMyem0xMi4xNSAxLjM3di0zLjI3YzAtMi4zNy0xLjIyLTMuNzQtMy4zMS0zLjc0cy0zLjMxIDEuMzctMy4zMSAzLjc0djMuMjdjMCAyLjM3IDEuMjIgMy43NCAzLjMxIDMuNzRzMy4zMS0xLjM3IDMuMzEtMy43NHpNMTIyLjQyIDEzLjYyaC00Ljc4djIuMTljMCAxLjMtLjQzIDIuMDEtMS44NyAyLjAxaC0xLjMzdjQuMzZoMi42NnY4LjQ0YzAgMy42IDEuOTQgNS41IDUuNjEgNS41aDMuMTd2LTQuNDVoLTMuNDV2LTkuNDloMy43NHYtNC4zNmgtMy43NHYtNC4yek0xMDkuMTcgMTMuNjJoLTQuNzh2Mi4xOWMwIDEuMy0uNDMgMi4wMS0xLjg3IDIuMDFoLTEuMzN2NC4zNmgyLjY2djguNDRjMCAzLjYgMS45NCA1LjUgNS42MSA1LjVoMy4xN3YtNC40NWgtMy40NXYtOS40OWgzLjc0di00LjM2aC0zLjc0di00LjJ6TTE3MC45IDE3LjM5Yy0yLjQ1IDAtNC41MyAxLjUxLTUuMDcgMy42aC0uMTh2LTMuMTdoLTUuMzJ2MjMuODJoNS4zMnYtOC42N2guMThjLjU0IDIuMDUgMi42MyAzLjYgNS4wNyAzLjYgNC43OCAwIDcuMjctMi45MSA3LjI3LTkuMzItLjAxLTYuNC0yLjQ5LTkuODYtNy4yNy05Ljg2em0xLjcyIDExLjUyYzAgMi4zNy0xLjQ4IDMuMzUtMy40OSAzLjM1LTIuMDEgMC0zLjQ5LTEuMDQtMy40OS0yLjc3di01YzAtMS43MyAxLjQ4LTIuNzcgMy40OS0yLjc3IDIuMDEgMCAzLjQ5IDEuNTUgMy40OSAzLjkydjMuMjd6TTk3LjgzIDM2LjE0Yy0xLjkxIDAtMy4yNy0xLjMtMy42LTMuMzFoLS4yMmMtLjU4IDIuNDUtMi42NiAzLjc0LTUuNTQgMy43NC0zLjc4IDAtNS44Ni0yLjIzLTUuODYtNS41IDAtMy45OSAzLjA5LTUuOSA4LjA5LTUuOWgyLjk5di0uNjFjMC0xLjgzLS45LTIuOTktMy4xMy0yLjk5LTIuMTIgMC0zLjI0IDEuMDgtNC4wNiAyLjIzbC0zLjE3LTIuODFjMS41MS0yLjIzIDMuNjctMy42IDcuNjMtMy42IDUuMzIgMCA4LjA2IDIuNDUgOC4wNiA2LjkxdjcuMzhoMS43NnY0LjQ1aC0yLjk1em0tNC4xMy01Ljcydi0yLjIzaC0yLjU5Yy0yLjA1IDAtMy4xMy43Ni0zLjEzIDIuMTJ2LjU0YzAgMS4zNy45IDIuMDEgMi40OCAyLjAxIDEuNzYgMCAzLjI0LS43MiAzLjI0LTIuNDR6Ii8+PGc+PHBhdGggZD0iTTM5LjA1IDYuOTFMMjYuMjQgMTAuNSAxMy40MiA2LjkxIDguMyA4LjM1djMzLjA2bDUuMTMgMS40NCAxMi44Mi0zLjU5IDEyLjgyIDMuNTkgNS4xMy0xLjQ0VjguMzVsLTUuMTUtMS40NHptLTUuMTIgMjQuNjdsLTcuNjktMi4xNS03LjY5IDIuMTV2LTEzLjRsNy42OSAyLjE1IDcuNjktMi4xNXYxMy40eiIgZmlsbD0iI2I3YmFiYiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0yNi4yNCAxMy4zN3Y2Ljk2bC0xMi44Mi0zLjU5djI2LjFMOC4zIDQxLjQxVjguMzV6TTMzLjkzIDM0LjQ1bC03LjY5LTIuMTZ2Ni45NmwxMi44MSAzLjU5di0yNi4xbC01LjEyIDEuNDR6Ii8+PGc+PHBhdGggY2xhc3M9InN0MyIgZD0iTTM5LjA1IDYuOTFsNS4xMyAxLjQ0LTE3Ljk0IDUuMDJMOC4zIDguMzVsNS4xMi0xLjQ0IDEyLjgyIDMuNTl6TTI2LjI0IDI5LjQybDcuNjkgMi4xNnYyLjg3bC03LjY5LTIuMTYtNy42OSAyLjE2di0yLjg3eiIvPjwvZz48L2c+PC9zdmc+"},31896:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODQiIGhlaWdodD0iODQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNDIgMEMxOC43OSAwIDAgMTguNzkgMCA0MnMxOC43OSA0MiA0MiA0MiA0Mi0xOC43OSA0Mi00MlM2NS4yMSAwIDQyIDB6IiBmaWxsLW9wYWNpdHk9Ii4yNSIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTUxLjUgNTdoLTJhLjUuNSAwIDAxLS41LS41di0yOGEuNS41IDAgMDEuNS0uNWgyYS41LjUgMCAwMS41LjV2MjhhLjUuNSAwIDAxLS41LjV6TTM0LjUgNTdoLTJhLjUuNSAwIDAxLS41LS41di0yOGEuNS41IDAgMDEuNS0uNWgyYS41LjUgMCAwMS41LjV2MjhhLjUuNSAwIDAxLS41LjV6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},78899:(e,t,n)=>{"use strict";e.exports=n.p+"images/escape.png"},49529:(e,t,n)=>{"use strict";e.exports=n.p+"images/headset-quest-2.png"},57494:(e,t,n)=>{"use strict";e.exports=n.p+"images/MP-logo_H_lock-RGB_color-black.svg"},17111:(e,t,n)=>{"use strict";e.exports=n.p+"images/matterport-app-icon.svg"},31891:(e,t,n)=>{"use strict";e.exports=n.p+"images/Desktop-help-play-button.svg"},71002:(e,t,n)=>{"use strict";e.exports=n.p+"images/Desktop-help-spacebar.png"},14653:(e,t,n)=>{"use strict";e.exports=n.p+"images/mattertag-disc-128-free.v1.png"},94874:(e,t,n)=>{"use strict";e.exports=n.p+"images/mobile-help-play-button.svg"},86533:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_360.png"},70626:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_click_inside.png"},72145:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_gesture_drag.png"},12742:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_gesture_drag_two_finger.png"},5435:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_gesture_pinch.png"},67649:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_gesture_position.png"},2433:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_gesture_position_two_finger.png"},24367:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_gesture_tap.png"},64549:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_inside_key.png"},76064:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_keyboard_all.png"},81202:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_keyboard_left_right.png"},42135:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_keyboard_up_down.png"},41891:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_mouse_click.png"},73993:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_mouse_drag_left.png"},26668:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_mouse_drag_right.png"},82906:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_mouse_position_left.png"},64991:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_mouse_position_right.png"},12136:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_mouse_zoom.png"},90619:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_tap_inside.png"},26407:(e,t,n)=>{"use strict";e.exports=n.p+"images/nav_help_zoom_keys.png"},22016:e=>{"use strict";e.exports=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 1.0.0","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":60,"w":876,"h":744,"nm":"Rating Modal","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Vector 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0]},{"t":4,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":0,"s":[437.969,578.877,0],"to":[0,-8.167,0],"ti":[0,8.167,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":18,"s":[437.969,529.877,0],"to":[0,0,0],"ti":[0,0,0]},{"t":25,"s":[437.969,529.877,0]}],"ix":2},"a":{"a":0,"k":[0,51.205,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.83,0.808,0.833],"y":[1.233,0.833,0.35]},"o":{"x":[0.283,0.284,0],"y":[-0.056,-0.064,0]},"t":0,"s":[176.81,195.773,100]},{"i":{"x":[0.564,0.562,0.794],"y":[3.244,0.849,2.131]},"o":{"x":[0.466,0.473,0.167],"y":[-4.295,-0.161,0.141]},"t":23,"s":[207.791,222.842,100]},{"t":28,"s":[207.791,207.791,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.52,0.008],[0,0],[0,0],[0.001,-0.183],[-8.335,-0.035],[-1.024,7.367],[-0.728,2.537],[0,0],[2.38,0.806],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.516,0.006],[0,0],[0,0],[0.432,0.025],[0,0],[2.518,0.008],[0,0],[0,0],[0.409,-0.037],[0,0],[2.516,0.006],[0,0],[0,0],[0.401,-0.185],[0,0]],"o":[[-2.516,-0.006],[0,0],[0,0],[-0.027,8.335],[7.643,0.021],[0.358,-2.606],[0,0],[0,0],[-2.387,-0.816],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-2.514,-0.01],[0,0],[-0.415,-0.039],[0,0],[0,0],[-2.518,-0.01],[0,0],[-0.423,0.021],[0,0],[0,0],[-2.514,-0.008],[0,0],[-0.44,0.144],[0,0],[0,0]],"v":[[-33.701,-15.143],[-36.223,-12.631],[-36.281,6.241],[-36.285,7.503],[-21.234,22.652],[-6.23,9.641],[-4.465,1.945],[-2.629,-4.438],[-4.202,-7.63],[-7.4,-6.064],[-11.102,2.545],[-12.356,1.279],[-12.356,0.023],[-12.35,-1.377],[-12.3,-18.852],[-14.806,-21.374],[-17.328,-18.866],[-17.38,-2.341],[-18.642,-2.448],[-18.584,-20.126],[-21.092,-22.652],[-23.616,-20.144],[-23.674,-2.463],[-24.928,-2.376],[-24.885,-17.628],[-27.394,-20.155],[-29.917,-17.645],[-29.968,-1.429],[-31.228,-0.933],[-31.189,-12.617]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-2.52,0.008],[0,0],[0,0],[-0.001,-0.183],[8.335,-0.035],[1.024,7.367],[0.728,2.537],[0,0],[-2.378,0.806],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-2.516,0.006],[0,0],[0,0],[-0.432,0.025],[0,0],[-2.518,0.008],[0,0],[0,0],[-0.407,-0.037],[0,0],[-2.518,0.006],[0,0],[0,0],[-0.399,-0.185],[0,0]],"o":[[2.516,-0.006],[0,0],[0,0],[0.029,8.335],[-7.645,0.021],[-0.358,-2.606],[0,0],[0,0],[2.389,-0.816],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.514,-0.01],[0,0],[0.415,-0.039],[0,0],[0,0],[2.518,-0.01],[0,0],[0.426,0.021],[0,0],[0,0],[2.514,-0.008],[0,0],[0.438,0.144],[0,0],[0,0]],"v":[[33.701,-15.143],[36.223,-12.631],[36.281,6.241],[36.285,7.503],[21.234,22.652],[6.23,9.641],[4.465,1.945],[2.629,-4.438],[4.202,-7.63],[7.4,-6.064],[11.102,2.545],[12.354,1.279],[12.354,0.023],[12.348,-1.377],[12.298,-18.852],[14.804,-21.374],[17.328,-18.866],[17.38,-2.341],[18.642,-2.448],[18.584,-20.126],[21.092,-22.652],[23.618,-20.144],[23.674,-2.463],[24.928,-2.376],[24.882,-17.628],[27.394,-20.155],[29.917,-17.645],[29.968,-1.429],[31.226,-0.933],[31.187,-12.617]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ind":2,"ty":"sh","ix":3,"ks":{"a":0,"k":{"i":[[0,0],[3.333,-0.333]],"o":[[-1.2,-5.2],[0,0]],"v":[[22.51,8.041],[11.01,2.541]],"c":false},"ix":2},"nm":"Path 3","mn":"ADBE Vector Shape - Group","hd":false},{"ind":3,"ty":"sh","ix":4,"ks":{"a":0,"k":{"i":[[0,0],[-3.333,-0.333]],"o":[[1.2,-5.2],[0,0]],"v":[[-21.99,7.614],[-10.49,2.114]],"c":false},"ix":2},"nm":"Path 4","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,0.192156862745,0.345098039216,1]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":19,"s":[1,0.192156862745,0.345098039216,1]},{"t":26,"s":[0.133333333333,0.133333333333,0.133333333333,1]}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Vector","np":6,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Vector","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":23,"s":[0]},{"t":27,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[435.195,196.412,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":23,"s":[209.366,209.366,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":31,"s":[257.214,257.214,100]},{"t":35,"s":[209.366,209.366,100]}],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[{"i":[[33.137,0],[0,-33.137],[-33.137,0],[0,33.137]],"o":[[-33.137,0],[0,33.137],[33.137,0],[0,-33.137]],"v":[[-0.955,14.988],[-60.955,74.988],[-0.955,134.988],[59.045,74.988]],"c":true}]},{"t":31,"s":[{"i":[[47.354,0],[0,-47.354],[-47.354,0],[0,47.354]],"o":[[-47.354,0],[0,47.354],[47.354,0],[0,-47.354]],"v":[[0.906,-36.975],[-84.837,48.768],[0.906,134.511],[86.648,48.768]],"c":true}]}],"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 1"}],"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.9,-0.695],[-0.438,0],[-0.403,0.524],[0,0],[0.9,0.695],[0.689,-0.896],[0,0]],"o":[[0.372,0.288],[0.617,0],[0,0],[0.695,-0.898],[-0.898,-0.699],[0,0],[-0.695,0.898]],"v":[[10.071,7.71],[11.325,8.137],[12.953,7.34],[19.076,-0.584],[18.706,-3.468],[15.825,-3.098],[9.701,4.826]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[-0.615,0],[-0.376,0.29],[0.693,0.898],[0,0],[0.898,-0.693],[-0.693,-0.898]],"o":[[0.405,0.524],[0.44,0],[0.898,-0.695],[0,0],[-0.697,-0.898],[-0.898,0.695],[0,0]],"v":[[-12.955,7.338],[-11.327,8.137],[-10.069,7.71],[-9.699,4.826],[-15.823,-3.098],[-18.707,-3.468],[-19.079,-0.584]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ind":2,"ty":"sh","ix":3,"ks":{"a":0,"k":{"i":[[0,0],[-1.135,0],[0,1.135],[0,0],[1.137,0],[0,-1.135]],"o":[[0,1.135],[1.137,0],[0,0],[0,-1.135],[-1.135,0],[0,0]],"v":[[-2.12,2.14],[-0.065,4.196],[1.991,2.14],[1.991,-6.082],[-0.065,-8.137],[-2.12,-6.082]],"c":true},"ix":2},"nm":"Path 3","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[0.131453797221,0.131453797221,0.131453797221,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Vector","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":23,"op":253,"st":-47,"bm":0}],"markers":[]}')},10105:e=>{"use strict";e.exports=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 1.0.0","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":120,"w":250,"h":250,"nm":"Comp 1","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":3,"nm":"▽ phone","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[125,106.5,0],"ix":2},"a":{"a":0,"k":[55.5,106.5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":3,"nm":"▽ Group 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[55.5,20.039,0],"ix":2},"a":{"a":0,"k":[10.091,2.506,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Vector","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[10.091,2.506,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.462,0],[0,0],[0,0.459],[0.462,0],[0,0],[0,-0.459]],"o":[[0,0],[0.462,0],[0,-0.459],[0,0],[-0.462,0],[0,0.459]],"v":[[-2.523,0.835],[2.523,0.835],[3.364,0],[2.523,-0.835],[-2.523,-0.835],[-3.364,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Vector","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":3,"nm":"▽ Group 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[55.5,192.952,0],"ix":2},"a":{"a":0,"k":[22.705,2.506,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Vector","parent":4,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[22.705,2.506,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.462,0],[0,0],[0,0.459],[0.462,0],[0,0],[0,-0.459]],"o":[[0,0],[0.462,0],[0,-0.459],[0,0],[-0.462,0],[0,0.459]],"v":[[-6.727,0.835],[6.727,0.835],[7.568,0],[6.727,-0.835],[-6.727,-0.835],[-7.568,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Vector","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":3,"nm":"▽ Group","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[55.5,106.5,0],"ix":2},"a":{"a":0,"k":[55.5,106.5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Vector","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[55.5,106.5,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-3.246,0],[0,0],[0,3.224],[0,0],[3.246,0],[0,0],[0,-3.224],[0,0]],"o":[[0,0],[3.246,0],[0,0],[0,-3.224],[0,0],[-3.246,0],[0,0],[0,3.224]],"v":[[-12.614,35.5],[12.614,35.5],[18.5,29.653],[18.5,-29.653],[12.614,-35.5],[-12.614,-35.5],[-18.5,-29.653],[-18.5,29.653]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[-2.321,0],[0,0],[0,-2.305],[0,0],[2.321,0],[0,0],[0,2.305]],"o":[[0,-2.305],[0,0],[2.321,0],[0,0],[0,2.305],[0,0],[-2.321,0],[0,0]],"v":[[-16.818,-29.653],[-12.614,-33.829],[12.614,-33.829],[16.818,-29.653],[16.818,29.653],[12.614,33.829],[-12.614,33.829],[-16.818,29.653]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Vector","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"bm":0}]},{"id":"comp_1","layers":[{"ddd":0,"ind":3,"ty":4,"nm":"Ellipse 19 (Stroke) 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":1,"s":[0]},{"t":4,"s":[100]}],"ix":11},"r":{"a":0,"k":270,"ix":10},"p":{"a":0,"k":[40.962,100.923,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-3.155,0.911],[-3.096,-1.097],[-1.899,-2.704],[-0.392,-2.375],[0,0],[0.391,-0.391],[-0.391,-0.391],[0,0],[-0.391,0.391],[0,0],[0.391,0.391],[0.391,-0.391],[0,0],[1.7,2.42],[3.49,1.237],[3.557,-1.027],[2.311,-2.91],[-0.432,-0.344],[-0.344,0.432]],"o":[[3.155,-0.911],[3.097,1.097],[1.392,1.982],[0,0],[-0.391,-0.391],[-0.391,0.391],[0,0],[0.391,0.391],[0,0],[0.391,-0.391],[-0.391,-0.391],[0,0],[-0.368,-2.918],[-2.137,-3.042],[-3.49,-1.237],[-3.557,1.027],[-0.344,0.432],[0.432,0.344],[2.054,-2.586]],"v":[[-9.391,-6.883],[0.218,-6.597],[7.898,-0.754],[10.602,5.87],[6.161,1.429],[4.747,1.429],[4.747,2.843],[11.111,9.207],[12.525,9.207],[18.889,2.843],[18.889,1.429],[17.475,1.429],[12.675,6.228],[9.534,-1.904],[0.886,-8.482],[-9.946,-8.805],[-18.965,-2.753],[-18.804,-1.348],[-17.399,-1.509]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":-15,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 19 (Stroke)","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Ellipse 19 (Stroke)","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":1,"s":[0]},{"t":4,"s":[100]}],"ix":11},"r":{"a":0,"k":90,"ix":10},"p":{"a":0,"k":[213.962,108.423,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-3.155,0.911],[-3.096,-1.097],[-1.899,-2.704],[-0.392,-2.375],[0,0],[0.391,-0.391],[-0.391,-0.391],[0,0],[-0.391,0.391],[0,0],[0.391,0.391],[0.391,-0.391],[0,0],[1.7,2.42],[3.49,1.237],[3.557,-1.027],[2.311,-2.91],[-0.432,-0.344],[-0.344,0.432]],"o":[[3.155,-0.911],[3.097,1.097],[1.392,1.982],[0,0],[-0.391,-0.391],[-0.391,0.391],[0,0],[0.391,0.391],[0,0],[0.391,-0.391],[-0.391,-0.391],[0,0],[-0.368,-2.918],[-2.137,-3.042],[-3.49,-1.237],[-3.557,1.027],[-0.344,0.432],[0.432,0.344],[2.054,-2.586]],"v":[[-9.391,-6.883],[0.218,-6.597],[7.898,-0.754],[10.602,5.87],[6.161,1.429],[4.747,1.429],[4.747,2.843],[11.111,9.207],[12.525,9.207],[18.889,2.843],[18.889,1.429],[17.475,1.429],[12.675,6.228],[9.534,-1.904],[0.886,-8.482],[-9.946,-8.805],[-18.965,-2.753],[-18.804,-1.348],[-17.399,-1.509]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[300,300],"ix":3},"r":{"a":0,"k":-15,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 19 (Stroke)","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"Phone","refId":"comp_0","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[5]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":3,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":74,"s":[100]},{"t":79,"s":[0]}],"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":7,"s":[-90]},{"t":46,"s":[0]}],"ix":10},"p":{"a":0,"k":[127.49999999999999,131,0],"ix":2},"a":{"a":0,"k":[125,106.5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":250,"h":213,"ip":0,"op":80,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"Rotate","refId":"comp_1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":3,"s":[5]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":7,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":51,"s":[100]},{"t":57,"s":[0]}],"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":7,"s":[-90]},{"t":46,"s":[0]}],"ix":10},"p":{"a":0,"k":[127.49999999999999,131,0],"ix":2},"a":{"a":0,"k":[125,106.5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":250,"h":213,"ip":0,"op":80,"st":0,"bm":0}],"markers":[]}')},63064:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQyIiBoZWlnaHQ9IjE0MiIgdmlld0JveD0iMCAwIDE0MiAxNDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik04MiA4Mi41MDAxQzg1LjMzMzMgODIuMTY2NyA5Mi4zIDgyLjgwMDEgOTMuNSA4OC4wMDAxTTYwLjUgODIuMDczM0M1Ny4xNjY3IDgxLjc0IDUwLjIgODIuMzczMyA0OSA4Ny41NzMzTTM0Ljc2NjggNjcuMzI3NUMzNC43NjY4IDY3LjMyNzUgMzQuNzczIDY0LjgwOTQgMzcuMjg5IDY0LjgxNTZDMzkuODA5MSA2NC44MjM4IDM5LjgwMDkgNjcuMzQxOSAzOS44MDA5IDY3LjM0MTlMMzkuNzYxOCA3OS4wMjU3QzQwLjE2MjcgNzguODQwNyA0MC41ODIgNzguNjc0MiA0MS4wMjE5IDc4LjUzMDNMNDEuMDczMyA2Mi4zMTRDNDEuMDczMyA2Mi4zMTQgNDEuMDgxNSA1OS43OTYgNDMuNTk1NCA1OS44MDQyQzQ2LjExMTQgNTkuODEwMyA0Ni4xMDUzIDYyLjMzMDUgNDYuMTA1MyA2Mi4zMzA1TDQ2LjA2MjEgNzcuNTgyN0M0Ni40NzEyIDc3LjU0NTcgNDYuODkyNSA3Ny41MTY5IDQ3LjMxNiA3Ny40OTYzTDQ3LjM3MzUgNTkuODE0NUM0Ny4zNzM1IDU5LjgxNDUgNDcuMzc5NyA1Ny4yOTY0IDQ5Ljg5NzggNTcuMzA2N0M1Mi40MTU4IDU3LjMxNDkgNTIuNDA1NSA1OS44MzI5IDUyLjQwNTUgNTkuODMyOUw1Mi4zNDggNzcuNTEwN0M1Mi43Nzk3IDc3LjUzNTQgNTMuMTk0OSA3Ny41Nzg2IDUzLjYxMDEgNzcuNjE3Nkw1My42NjE1IDYxLjA5M0M1My42NjE1IDYxLjA5MyA1My42Njk3IDU4LjU3NDkgNTYuMTgzNyA1OC41ODUyQzU4LjY5OTcgNTguNTkxNCA1OC42ODk0IDYxLjEwNzQgNTguNjg5NCA2MS4xMDc0TDU4LjY0IDc4LjU4MTdMNTguNjMzOSA3OS45ODE1VjgxLjIzNzRMNTkuODg3OCA4Mi41MDM3TDYzLjU4OTggNzMuODk1QzYzLjU4OTggNzMuODk1IDY0LjQwMTggNzEuNTEyNiA2Ni43ODgzIDcyLjMyODdDNjkuMTY4NiA3My4xMzQ0IDY4LjM2MDggNzUuNTIxIDY4LjM2MDggNzUuNTIxTDY2LjUyNTIgODEuOTAzNUM2NS43OTc1IDg0LjQ0IDY1LjExNzEgODYuOTkzIDY0Ljc1OTQgODkuNTk5NEM2My43MzU4IDk2Ljk2NjYgNTcuMzk4NSAxMDIuNjMyIDQ5Ljc1NTkgMTAyLjYxMUM0MS40MjA3IDEwMi41NzYgMzQuNjc4NCA5NS43OTY5IDM0LjcwNTIgODcuNDYxN0MzNC43MDYgODcuMjc4NyAzNC43MDkzIDg2LjE5OTYgMzQuNzA5MyA4Ni4xOTk2TDM0Ljc2NjggNjcuMzI3NVpNMTA3LjIxMyA2Ny4zMjc1QzEwNy4yMTMgNjcuMzI3NSAxMDcuMjA3IDY0LjgwOTQgMTA0LjY5MSA2NC44MTU2QzEwMi4xNzEgNjQuODIzOCAxMDIuMTc3IDY3LjM0MTkgMTAyLjE3NyA2Ny4zNDE5TDEwMi4yMTYgNzkuMDI1N0MxMDEuODE3IDc4Ljg0MDcgMTAxLjM5NiA3OC42NzQyIDEwMC45NTggNzguNTMwM0wxMDAuOTA2IDYyLjMxNEMxMDAuOTA2IDYyLjMxNCAxMDAuODk4IDU5Ljc5NiA5OC4zODQyIDU5LjgwNDJDOTUuODY2MSA1OS44MTAzIDk1Ljg3MjMgNjIuMzMwNSA5NS44NzIzIDYyLjMzMDVMOTUuOTE3NSA3Ny41ODI3Qzk1LjUxMDUgNzcuNTQ1NyA5NS4wODkxIDc3LjUxNjkgOTQuNjYzNiA3Ny40OTYzTDk0LjYwODIgNTkuODE0NUM5NC42MDgyIDU5LjgxNDUgOTQuNTk5OSA1Ny4yOTY0IDkyLjA4MTkgNTcuMzA2N0M4OS41NjM4IDU3LjMxNDkgODkuNTc0MSA1OS44MzI5IDg5LjU3NDEgNTkuODMyOUw4OS42MzE2IDc3LjUxMDdDODkuMiA3Ny41MzU0IDg4Ljc4NDggNzcuNTc4NiA4OC4zNjk1IDc3LjYxNzZMODguMzE4MSA2MS4wOTNDODguMzE4MSA2MS4wOTMgODguMzA3OSA1OC41NzQ5IDg1Ljc5MzkgNTguNTg1MkM4My4yNzc5IDU4LjU5MTQgODMuMjg4MiA2MS4xMDc0IDgzLjI4ODIgNjEuMTA3NEw4My4zMzc1IDc4LjU4MTdMODMuMzQzNyA3OS45ODE1VjgxLjIzNzRMODIuMDkxOSA4Mi41MDM3TDc4LjM4OTggNzMuODk1Qzc4LjM4OTggNzMuODk1IDc3LjU3OTkgNzEuNTEyNiA3NS4xOTE0IDcyLjMyODdDNzIuODEzMSA3My4xMzQ0IDczLjYxODkgNzUuNTIxIDczLjYxODkgNzUuNTIxTDc1LjQ1NDUgODEuOTAzNUM3Ni4xODIxIDg0LjQ0IDc2Ljg2MjUgODYuOTkzIDc3LjIyMDIgODkuNTk5NEM3OC4yNDM5IDk2Ljk2NjYgODQuNTc5MSAxMDIuNjMyIDkyLjIyMzcgMTAyLjYxMUMxMDAuNTU5IDEwMi41NzYgMTA3LjMwMyA5NS43OTY5IDEwNy4yNzQgODcuNDYxN0MxMDcuMjc0IDg3LjI3ODcgMTA3LjI3IDg2LjE5OTYgMTA3LjI3IDg2LjE5OTZMMTA3LjIxMyA2Ny4zMjc1WiIgc3Ryb2tlPSIjMjIyMjIyIiBzdHJva2Utd2lkdGg9IjIiLz4KPHBhdGggZD0iTTgyLjM4OTkgNTYuMjc0OEM4MS45NTIxIDU2LjI3NDggODEuNTA4MSA1Ni4xMzUgODEuMTM2IDU1Ljg0NzJDODAuMjM1NyA1NS4xNTI0IDgwLjA3MTMgNTMuODYxNiA4MC43NjYgNTIuOTYzM0w4Ni44ODk1IDQ1LjAzOTFDODcuNTc4MSA0NC4xNDI5IDg4Ljg3MzEgNDMuOTcwMiA4OS43NzE0IDQ0LjY2OTFDOTAuNjcxOCA0NS4zNjM5IDkwLjgzNjIgNDYuNjU0OCA5MC4xNDE0IDQ3LjU1MzFMODQuMDE3OSA1NS40NzcyQzgzLjYxNSA1Ni4wMDE0IDgzLjAwNjYgNTYuMjc0OCA4Mi4zODk5IDU2LjI3NDhaTTU5LjczNzcgNTYuMjc0OEM1OS4xMjMxIDU2LjI3NDggNTguNTE0NyA1NS45OTkzIDU4LjEwOTcgNTUuNDc1Mkw1MS45ODYyIDQ3LjU1MzFDNTEuMjkzNSA0Ni42NTQ4IDUxLjQ2IDQ1LjM2MzkgNTIuMzU4MyA0NC42NjkxQzUzLjI1NjUgNDMuOTc2NCA1NC41NDU0IDQ0LjE0MDggNTUuMjQyMiA0NS4wMzkxTDYxLjM2NTcgNTIuOTYzM0M2Mi4wNTg0IDUzLjg2MTYgNjEuODk0IDU1LjE1MjQgNjAuOTk1NyA1NS44NDcyQzYwLjYxOTUgNTYuMTM3MSA2MC4xNzc2IDU2LjI3NDggNTkuNzM3NyA1Ni4yNzQ4Wk03MS4wMDAxIDUyLjMzMzNDNjkuODY1NCA1Mi4zMzMzIDY4Ljk0NDUgNTEuNDEyNCA2OC45NDQ1IDUwLjI3NzhWNDIuMDU1NkM2OC45NDQ1IDQwLjkyMDkgNjkuODY1NCA0MCA3MS4wMDAxIDQwQzcyLjEzNjggNDAgNzMuMDU1NiA0MC45MjA5IDczLjA1NTYgNDIuMDU1NlY1MC4yNzc4QzczLjA1NTYgNTEuNDEyNCA3Mi4xMzY4IDUyLjMzMzMgNzEuMDAwMSA1Mi4zMzMzWiIgZmlsbD0iIzIyMjIyMiIvPgo8L3N2Zz4K"},34458:e=>{"use strict";e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMTI3Ljk4MzI1bW0iCiAgIGhlaWdodD0iMTI1Ljg3MDg0bW0iCiAgIHZpZXdCb3g9IjAgMCAxMjcuOTgzMjUgMTI1Ljg3MDg0IgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmczOSIKICAgc29kaXBvZGk6ZG9jbmFtZT0icm90YXRlLXBob25lLWZhbGxiYWNrLnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS4xLjIgKGI4ZTI1YmU4LCAyMDIyLTAyLTA1KSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzQxIgogICAgIHBhZ2Vjb2xvcj0iIzUwNTA1MCIKICAgICBib3JkZXJjb2xvcj0iI2VlZWVlZSIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMCIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0ibW0iCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnNuYXAtcGFnZT0iZmFsc2UiCiAgICAgaW5rc2NhcGU6em9vbT0iMC4zMTUxMjI4MSIKICAgICBpbmtzY2FwZTpjeD0iMTc5LjI5NTE4IgogICAgIGlua3NjYXBlOmN5PSI4MDcuNjIxNjMiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxODY0IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEzODciCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjI1IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMzNiIgLz4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC4yOTI2NzM1LC00LjM5MzAzMTgpIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjI2NDU4MyIKICAgICAgIGQ9Im0gNzIuODIwNTc2LDEyOC4yOTE4IGMgMTEuNzczNzksLTEuMDg5ODggMjEuODgzMTQsLTIuMDUzIDIyLjQ2NTIyLC0yLjE0MDI4IDIuNzI3MzIsLTAuNDA4OTEgNS41ODUwNTQsLTIuNDkxMTIgNi45MzU4NDQsLTUuMDUzNjIgMS42NTQ0MiwtMy4xMzg1MyAxLjkwMTYxLDAuOTY5MTcgLTMuMzYyNTI0LC01NS44NzY4NCAtMi42MjI4MSwtMjguMzIzMTM0IC00Ljg4OTU0LC01Mi4wODEwODggLTUuMDM3MTYsLTUyLjc5NTQ1MyAtMC40MjQwNiwtMi4wNTIwNjEgLTEuMTc3NjcsLTMuNDgzMTc4IC0yLjY1ODk4LC01LjA0OTQ0MyAtMS44Nzk1OCwtMS45ODczNzMgLTMuNzI1MjUsLTIuODM4OTAyIC02LjQ2MDUxLC0yLjk4MDY1NSAtMi4xODE4MiwtMC4xMTMwNyAtNDQuMzU4MzA4LDMuNjc5NjUyIC00Ni42ODc4ODgsNC4xOTg0MTMgLTMuNjY2OSwwLjgxNjU1NCAtNi42MTY4MSw0LjAxNTg5MyAtNy40Mjk1LDguMDU3NjkyIC0wLjI4NjMsMS40MjM4NzEgMC4xMzMwOSw2LjQwNzcwMiA0LjQ4NDkzLDUzLjI5Njc4NiAyLjc3MDM3LDI5Ljg0OTQ4IDQuOTYzNzUsNTIuMjg1NTUgNS4xODYxNCw1My4wNDg5NiAxLjI2OTk5LDQuMzU5NzEgNS4wMDQzNCw3LjI0MjM3IDkuNDEzMzksNy4yNjY0OSAwLjk1OTI4LDAuMDA1IDExLjM3NzI0OCwtMC44ODIxNyAyMy4xNTEwMzgsLTEuOTcyMDUgeiBtIC0yMy43MDQ1NjgsLTAuOTYwNTMgYyAtMC44MDAzNywtMC4wOTQgLTEuNzY5NCwtMC4yOTU5NSAtMi4xNTM0MiwtMC40NDg3NiAtMS42NjUxMiwtMC42NjI1OCAtMy42ODM1LC0zLjEzNTk2IC00LjAzNDA3LC00Ljk0MzQ4IC0wLjA4NDcsLTAuNDM2NTcgLTIuMzA2NDgsLTI0LjA0NCAtNC45MzczNywtNTIuNDYwOTcgLTQuNjUxMjQsLTUwLjIzOTQwNiAtNC43NzIwNCwtNTEuNzA2MzkzIC00LjM3MTI4LC01My4wODQ5NTcgMC41MzgyMSwtMS44NTEzOTUgMi4zMTU1MywtMy44NTE5NDQgNC4xMDY2NywtNC42MjI0NzIgMS4xNTI0MiwtMC40OTU3NTggNC4xNTk3MSwtMC44MzE3MSAyMi45NjAzODgsLTIuNTY0OTY5IDExLjkzMzE4LC0xLjEwMDEzNCAyMi41MzM0MiwtMS45NTc4ODIgMjMuNjM5NDMsLTEuOTEyODUgMS42ODU5NSwwLjA2ODY0IDIuMjEyNDIsMC4yMDkyMjIgMy4zMDcyOSwwLjg4MzEgMS40MjIzMSwwLjg3NTQxNiAyLjg2MzMsMi43NzY4NDQgMy4yNzEwNyw0LjMxNjI4NSAwLjM0Mzk4LDEuMjk4NTg5IDkuNTQwNDY0LDEwMS4yODQzMDMgOS41NDA0NjQsMTAzLjcyNTUwMyAwLDMuMjUwMzcgLTEuMzQxODg0LDUuMzM3MDggLTQuMjYyOTk0LDYuNjI5MjIgLTAuOTk3MjksMC40NDExNSAtNC42OTc5NiwwLjg1MTA3IC0yMi43Mzk2LDIuNTE4ODYgLTExLjg1MTY1LDEuMDk1NTggLTIxLjg0NjEwOCwyLjAyNDQ3IC0yMi4yMDk5MDgsMi4wNjQxOSAtMC4zNjM4MSwwLjAzOTcgLTEuMzE2MzEsLTAuMDA1IC0yLjExNjY3LC0wLjA5ODcgeiBtIDIzLjU0NzkxOCwtOS4xMDY2OSBjIDUuNzQ4MDcsLTAuNTE1OTQgMTAuNzE1NjUsLTEuMDQ4MDcgMTEuMDM5MDUsLTEuMTgyNTEgMC44NzI2MywtMC4zNjI3MyAxLjA2OTAxLC0xLjUwMTExIDAuMzc4MTQsLTIuMTkxOTkgbCAtMC41NTg1LC0wLjU1ODUgLTExLjkxMzY3LDEuMTAzNTIgYyAtNi41NTI1MiwwLjYwNjk0IC0xMi4xNTA4OCwxLjIzMDQ3IC0xMi40NDA4LDEuMzg1NjQgLTAuMzI5ODYsMC4xNzY1MyAtMC41MjU2MiwwLjU1MDkzIC0wLjUyMzA5LDEuMDAwNDEgMC4wMDcsMS4zMjg2NSAwLjU2NDk5LDEuNjgwNDMgMi4zNzcyLDEuNTAwMDQgMC42NTQ4NCwtMC4wNjUyIDUuODkzNTksLTAuNTQwNjYgMTEuNjQxNjcsLTEuMDU2NjEgeiBtIC04Ljc0ODQ5LC05OS4xOTMyMjIgYyAyLjg0NjU2LC0wLjI4NDQ4NyAzLjYyMzk1LC0wLjQ1MDA0NSAzLjkwMjYsLTAuODMxMTI3IDAuNDkzMywtMC42NzQ2MzIgMC40MzE5OCwtMS4yNzUwMzMgLTAuMTg3NSwtMS44MzU2NSAtMC41MDQxMywtMC40NTYyMzIgLTAuNzcxMjMsLTAuNDY1NTY5IC00LjU2NDA2LC0wLjE1OTU0NyAtMi4yMTU3MywwLjE3ODc3NCAtNC40MjIzMiwwLjM5MjkwNyAtNC45MDM1NCwwLjQ3NTg1NCAtMS41OTkzOCwwLjI3NTY3NyAtMi4xMzE1MiwyLjE5MjgxMyAtMC43NTU0MywyLjcyMTYxOCAwLjMxNDYyLDAuMTIwOSAxLjEwNzgyLDAuMTY2NzggMS43NjI2NywwLjEwMTk2IDAuNjU0ODQsLTAuMDY0OCAyLjc5MDIxLC0wLjI3NzcxOCA0Ljc0NTI2LC0wLjQ3MzEwOCB6IE0gMjcuMzI1NjQ4LDEwMC4yMjI2OSBjIDAuNTYyNDUsLTAuODU4NDEgMC4yNDY0LC0xLjkzNzk1IC0wLjcwMjcyLC0yLjQwMDMzIEMgMjYuMjYxMDQ4LDk3LjY0NjA3IDI0LjU5NTc0OCw5Ni44NDc2IDIyLjkyMjI1OCw5Ni4wNDggMTUuMDI1NDQ4LDkyLjI3NDg0IDkuODgwOTc4Miw4NS41NTcyOCA4LjIwMjc2ODIsNzYuODI3NTcgYyAtMC41MDMwOSwtMi42MTY5NyAtMC40ODYzMSwtNy44ODYwMiAwLjAzMzEsLTEwLjQwMDczIDEuMzM1MTUsLTYuNDYzODUgNC45Njk3ODk4LC0xMi4zMzI3ODUgOS45ODc4Mzk4LC0xNi4xMjc1NjUgMy42OTUyNiwtMi43OTQ0NSAzLjYwNDczLC0yLjg3NDE1IDEuNjIzNzgsMS40Mjk1MSAtMi43OTc4Nyw2LjA3ODQ4IC0zLjA2MDU4LDYuNzg0MDcgLTIuNzQ1MjUsNy4zNzMyNiAwLjU3MDI4LDEuMDY1NTg1IDIuMDA4NTMsMS4zODAzMzUgMi43MTMyMSwwLjU5Mzc1NSAwLjU1MTg1LC0wLjYxNTk4NSA3LjA3NTU0LC0xNC44MzcwMTUgNy4wNzU1NCwtMTUuNDI0MDA1IDAsLTAuMjUyMTggLTAuMjA4MzYsLTAuNzAxNzIgLTAuNDYzMDIsLTAuOTk4OTggLTAuNDc1OTcsLTAuNTU1NTY5IC0xNC43MjQ2MywtNy4xOTEwNjkgLTE1LjQ0MTY2LC03LjE5MTA2OSAtMS4yMDEwNTk4LDAgLTIuMDU4NTg5OCwyLjE2NTQzIC0xLjE1NDYyOTgsMi45MTU2NSAwLjIyMTc0OTgsMC4xODQwNCAyLjc5MTUwOTgsMS40MzQ4MiA1LjcxMDU3OTgsMi43Nzk1MSA0LjE3Mzk0LDEuOTIyNzQ5IDUuMjMyMDUsMi41MTAxNzkgNC45NTQ2MiwyLjc1MDYxOSAtMC4xOTQwMiwwLjE2ODE2IC0xLjI1OTUzLDAuODkyODUgLTIuMzY3OCwxLjYxMDQyIC02LjczOTI0LDQuMzYzNDMgLTExLjY0NTcxOTgsMTEuNjUyMjggLTEzLjM2NDg0OTgsMTkuODU0MjU1IC0wLjU3MjkxLDIuNzMzMzggLTAuNjM0OTUsOC4yNTQwNCAtMC4xMjQ3NCwxMS4wOTk5NSAxLjY3Mjg0LDkuMzMwODEgNy43NzI3ODk4LDE3LjYwMDM5IDE2LjEwNTE4OTgsMjEuODMzNDcgNC4yMjAzNywyLjE0NDA1IDUuODE5NDcsMi40NTkyMiA2LjU4MDk1LDEuMjk3MDcgeiBtIDk5LjMxMzI4MiwtNC42MDk3MSBjIDAuNzIwMTIsLTAuNzIwMTEgMC42NjkwNywtMS43NTIwOSAtMC4xMjE2OCwtMi40NjAwMiAtMC4zNTc5NiwtMC4zMjA0OCAtMi44NTgyNywtMS41ODUzMiAtNS41NTYyNSwtMi44MTA3OCAtMi42OTc5NywtMS4yMjU0NSAtNC45MDU0MSwtMi4zMTgzMiAtNC45MDU0MSwtMi40Mjg2IDAsLTAuMTEwMjcgMC45MjI3NCwtMC43NzI0OCAyLjA1MDUzLC0xLjQ3MTU2IDIuNDEyNTQsLTEuNDk1NDYgNy4zOTk2NiwtNi4zMzg2MiA4LjkxMjg3LC04LjY1NTU3IDIuMzI0NTIsLTMuNTU5MiAzLjkxNDQ2LC03LjQxNjc4IDQuODExNzUsLTExLjY3NDUxIDAuNTM4NTcsLTIuNTU1NTUgMC42MDAwMiwtNy45MjM5NTUgMC4xMjExNCwtMTAuNTgzMzI1IC0xLjgwNDAyLC0xMC4wMTgzOSAtNy44NDI5NSwtMTguMDk4ODk5IC0xNi44OTM3NiwtMjIuNjA1MDY5IC0zLjY0Mzg4LC0xLjgxNDIgLTUuMTYwNzcsLTIuMDE5NzEgLTUuODQ3MzksLTAuNzkyMjIgLTAuNzMxNCwxLjMwNzU2IC0wLjI4MDQ4LDEuOTA2OTQgMi4yNzQ2NSwzLjAyMzU1IDYuMTI1NzQsMi42NzY5OCAxMC4wMDMzNCw1LjkwNDc1IDEzLjIxMTM5LDEwLjk5NzMzOSAyLjYwOTc2LDQuMTQyODQgMy43OTcyMyw4LjEyNDU1IDMuOTg3NjYsMTMuMzcxMDcgMC4xOTUxMiw1LjM3NTY2NSAtMC41NzcyLDguODY3NDE1IC0zLjAxNjE2LDEzLjYzNjM4NSAtMS4yMTkzNCwyLjM4NDIxIC00LjYzOTU0LDYuNzQ0OTkgLTYuMjU4OSw3Ljk4MDEzIC0wLjUwOTcsMC4zODg3NiAtMS4wODU4NSwwLjg1NzY4IC0xLjI4MDM1LDEuMDQyMDQgLTAuNjc2NjksMC42NDE0MiAtMi42NTIxMSwxLjgyODE1IC0yLjc5ODg2LDEuNjgxNDEgLTAuMDgxMiwtMC4wODEyIDAuODgxOTEsLTIuMzY2NDcgMi4xNDAzNCwtNS4wNzgyOSAyLjA5Nzg3LC00LjUyMDc1IDIuMjYwNTYsLTQuOTg3OTMgMS45NTczMSwtNS42MjA2NCAtMC40ODk2MywtMS4wMjE1OSAtMS42MTA5MSwtMS4zMzQ1NyAtMi40NjI5OSwtMC42ODc0OSAtMC43NjM0NSwwLjU3OTc4IC03LjI1OTIzLDE0LjUwNDE1IC03LjI1OTIzLDE1LjU2MDkxIDAsMC4zMzc3NCAwLjIyNjIxLDAuODE4NzggMC41MDI2OSwxLjA2ODk4IDAuNzA2NzMsMC42Mzk1OSAxNC41ODE5OCw3LjAwNDc1IDE1LjMwNjE3LDcuMDIxNTkgMC4zMjc0MiwwLjAwOCAwLjgzMzQ0LC0wLjIyNDI4IDEuMTI0NDgsLTAuNTE1MzMgeiIKICAgICAgIGlkPSJwYXRoMTA5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJzc3Nzc3Nzc3NzY2NzY3Nzc3Nzc3Nzc3Nzc3Njc3NzY3NzY3Nzc3Nzc3Nzc3Nzc2NzY3Nzc3Nzc3Nzc3Nzc2Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NzY3MiIC8+CiAgPC9nPgo8L3N2Zz4K"},92759:(e,t,n)=>{"use strict";e.exports=n.p+"images/login-screen-background.jpg"},35367:()=>{},29474:(e,t,n)=>{"use strict";n.d(t,{fe:()=>ut,cA:()=>N,h4:()=>tt,createHttpLink:()=>p,Ps:()=>dn});var i=n(23564),s=n(5419),r=n(81707),o=n(80496),a=n(84913),l=Object.prototype.hasOwnProperty;var c=function(e,t){var n;try{n=JSON.stringify(e)}catch(e){var i=new s.ej(23);throw i.parseError=e,i}return n},d=n(90778),u={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},h=n(80285);var p=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,p=e.fetch,m=e.includeExtensions,g=e.useGETForQueries,f=e.includeUnusedVariables,v=void 0!==f&&f,b=(0,i._T)(e,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);!function(e){if(!e&&"undefined"==typeof fetch)throw new s.ej(22)}(p),p||(p=fetch);var y={http:{includeExtensions:m},options:b.fetchOptions,credentials:b.credentials,headers:b.headers};return new r.i0((function(e){var t=function(e,t){return e.getContext().uri||("function"==typeof t?t(e):t||"/graphql")}(e,n),s=e.getContext(),r={};if(s.clientAwareness){var m=s.clientAwareness,f=m.name,b=m.version;f&&(r["apollographql-client-name"]=f),b&&(r["apollographql-client-version"]=b)}var S,E=(0,i.pi)((0,i.pi)({},r),s.headers),T={http:s.http,options:s.fetchOptions,credentials:s.credentials,headers:E},O=function(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var r=(0,i.pi)((0,i.pi)({},t.options),{headers:t.headers,credentials:t.credentials}),o=t.http||{};n.forEach((function(e){r=(0,i.pi)((0,i.pi)((0,i.pi)({},r),e.options),{headers:(0,i.pi)((0,i.pi)({},r.headers),e.headers)}),e.credentials&&(r.credentials=e.credentials),o=(0,i.pi)((0,i.pi)({},o),e.http)}));var a=e.operationName,l=e.extensions,c=e.variables,u=e.query,h={operationName:a,variables:c};return o.includeExtensions&&(h.extensions=l),o.includeQuery&&(h.query=(0,d.S)(u)),{options:r,body:h}}(e,u,y,T),_=O.options,A=O.body;if(A.variables&&!v){var w=new Set(Object.keys(A.variables));(0,h.Vn)(e.query,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&w.delete(e.name.value)}}),w.size&&(A.variables=(0,i.pi)({},A.variables),w.forEach((function(e){delete A.variables[e]})))}if(!_.signal){var N=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),P=N.controller,I=N.signal;(S=P)&&(_.signal=I)}if(g&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(_.method="GET"),"GET"===_.method){var k=function(e,t){var n=[],i=function(e,t){n.push(e+"="+encodeURIComponent(t))};if("query"in t&&i("query",t.query),t.operationName&&i("operationName",t.operationName),t.variables){var s=void 0;try{s=c(t.variables)}catch(e){return{parseError:e}}i("variables",s)}if(t.extensions){var r=void 0;try{r=c(t.extensions)}catch(e){return{parseError:e}}i("extensions",r)}var o="",a=e,l=e.indexOf("#");-1!==l&&(o=e.substr(l),a=e.substr(0,l));var d=-1===a.indexOf("?")?"?":"&";return{newURI:a+d+n.join("&")+o}}(t,A),C=k.newURI,L=k.parseError;if(L)return(0,a.Qc)(L);t=C}else try{_.body=c(A)}catch(L){return(0,a.Qc)(L)}return new o.y$((function(n){var i;return p(t,_).then((function(t){return e.setContext({response:t}),t})).then((i=e,function(e){return e.text().then((function(t){try{return JSON.parse(t)}catch(i){var n=i;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}})).then((function(t){return e.status>=300&&(0,a.PW)(e,t,"Response not successful: Received status code "+e.status),Array.isArray(t)||l.call(t,"data")||l.call(t,"errors")||(0,a.PW)(e,t,"Server response was missing for query '"+(Array.isArray(i)?i.map((function(e){return e.operationName})):i.operationName)+"'."),t}))})).then((function(e){return n.next(e),n.complete(),e})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&n.next(e.result),n.error(e))})),function(){S&&S.abort()}}))}))},m=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,p(t).request)||this;return n.options=t,n}return(0,i.ZT)(t,e),t}(r.i0),g=Object.prototype,f=g.toString,v=g.hasOwnProperty,b=Function.prototype.toString,y=new Map;function S(e,t){try{return E(e,t)}finally{y.clear()}}function E(e,t){if(e===t)return!0;var n,i,s,r=f.call(e);if(r!==f.call(t))return!1;switch(r){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(A(e,t))return!0;var o=T(e),a=T(t),l=o.length;if(l!==a.length)return!1;for(var c=0;c<l;++c)if(!v.call(t,o[c]))return!1;for(c=0;c<l;++c){var d=o[c];if(!E(e[d],t[d]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(A(e,t))return!0;for(var u=e.entries(),h="[object Map]"===r;;){var p=u.next();if(p.done)break;var m=p.value,g=m[0],y=m[1];if(!t.has(g))return!1;if(h&&!E(y,t.get(g)))return!1}return!0;case"[object Function]":var S=b.call(e);return S===b.call(t)&&(i=_,!((s=(n=S).length-i.length)>=0&&n.indexOf(i,s)===s))}return!1}function T(e){return Object.keys(e).filter(O,e)}function O(e){return void 0!==this[e]}var _="{ [native code] }";function A(e,t){var n=y.get(e);if(n){if(n.has(t))return!0}else y.set(e,n=new Set);return n.add(t),!1}var w,N=function(e){function t(n){var i,s,r=n.graphQLErrors,a=n.networkError,l=n.errorMessage,c=n.extraInfo,d=e.call(this,l)||this;return d.graphQLErrors=r||[],d.networkError=a||null,d.message=l||(i=d,s="",(0,o.Of)(i.graphQLErrors)&&i.graphQLErrors.forEach((function(e){var t=e?e.message:"Error message not found.";s+=t+"\n"})),i.networkError&&(s+=i.networkError.message+"\n"),s=s.replace(/\n$/,"")),d.extraInfo=c,d.__proto__=t.prototype,d}return(0,i.ZT)(t,e),t}(Error);function P(e){return!!e&&e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(w||(w={}));var I=function(){function e(e,t,n,i){this.observer=e,this.options=t,this.fetch=n,this.shouldFetch=i}return e.prototype.reobserve=function(e,t){e?this.updateOptions(e):this.updatePolling();var n=this.fetch(this.options,t);return this.concast&&this.concast.removeObserver(this.observer,!0),n.addObserver(this.observer),(this.concast=n).promise},e.prototype.updateOptions=function(e){return Object.assign(this.options,(0,o.oA)(e)),this.updatePolling(),this},e.prototype.stop=function(){this.concast&&(this.concast.removeObserver(this.observer),delete this.concast),this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),this.options.pollInterval=0,this.updatePolling())},e.prototype.updatePolling=function(){var e=this,t=this.pollingInfo,n=this.options.pollInterval;if(n){if((!t||t.interval!==n)&&((0,s.kG)(n,20),!1!==this.shouldFetch)){(t||(this.pollingInfo={})).interval=n;var i=function(){e.pollingInfo&&(e.shouldFetch&&e.shouldFetch()?e.reobserve({fetchPolicy:"network-only",nextFetchPolicy:e.options.fetchPolicy||"cache-first"},w.poll).then(r,r):r())},r=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(i,t.interval))};r()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)},e}(),k=function(e){function t(t){var n=t.queryManager,s=t.queryInfo,r=t.options,a=e.call(this,(function(e){return a.onSubscribe(e)}))||this;a.observers=new Set,a.subscriptions=new Set,a.observer={next:function(e){(a.lastError||a.isDifferentFromLastResult(e))&&(a.updateLastResult(e),(0,o.pM)(a.observers,"next",e))},error:function(e){a.updateLastResult((0,i.pi)((0,i.pi)({},a.lastResult),{error:e,errors:e.graphQLErrors,networkStatus:w.error,loading:!1})),(0,o.pM)(a.observers,"error",a.lastError=e)}},a.isTornDown=!1,a.options=r,a.queryId=n.generateQueryId();var l=(0,o.$H)(r.query);return a.queryName=l&&l.name&&l.name.value,a.queryManager=n,a.queryInfo=s,a}return(0,i.ZT)(t,e),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var i={next:function(n){t(n),e.observers.delete(i),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){s.unsubscribe()}),0)},error:n},s=e.subscribe(i)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.lastResult,n=this.queryInfo.networkStatus||t&&t.networkStatus||w.ready,s=(0,i.pi)((0,i.pi)({},t),{loading:P(n),networkStatus:n});if(this.isTornDown)return s;var r=this.options.fetchPolicy,o=void 0===r?"cache-first":r;if("no-cache"===o||"network-only"===o)delete s.partial;else if(!s.data||!this.queryManager.transform(this.options.query).hasForcedResolvers){var a=this.queryInfo.getDiff();s.data=a.complete||this.options.returnPartialData?a.result:void 0,a.complete?(s.networkStatus!==w.loading||"cache-first"!==o&&"cache-only"!==o||(s.networkStatus=w.ready,s.loading=!1),delete s.partial):s.partial=!0}return e&&this.updateLastResult(s),s},t.prototype.isDifferentFromLastResult=function(e){return!S(this.lastResultSnapshot,e)},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t={pollInterval:0},n=this.options.fetchPolicy;return"no-cache"!==n&&"cache-and-network"!==n&&(t.fetchPolicy="network-only",t.nextFetchPolicy=n||"cache-first"),e&&!S(this.options.variables,e)&&(t.variables=this.options.variables=(0,i.pi)((0,i.pi)({},this.options.variables),e)),this.newReobserver(!1).reobserve(t,w.refetch)},t.prototype.fetchMore=function(e){var t=this,n=(0,i.pi)((0,i.pi)({},e.query?e:(0,i.pi)((0,i.pi)((0,i.pi)({},this.options),e),{variables:(0,i.pi)((0,i.pi)({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),s=this.queryManager.generateQueryId();return n.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=w.fetchMore,this.observe()),this.queryManager.fetchQuery(s,n,w.fetchMore).then((function(i){var s=i.data,r=e.updateQuery;return r?t.updateQuery((function(e){return r(e,{fetchMoreResult:s,variables:n.variables})})):t.queryManager.cache.writeQuery({query:n.query,variables:n.variables,data:s}),i})).finally((function(){t.queryManager.stopQuery(s),t.reobserve()}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var i=e.updateQuery;i&&t.updateQuery((function(e,t){var s=t.variables;return i(e,{subscriptionData:n,variables:s})}))},error:function(t){e.onError&&e.onError(t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){if(S(this.variables,e))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=e,!this.observers.size)return Promise.resolve();var t=this.options.fetchPolicy,n=void 0===t?"cache-first":t,i={fetchPolicy:n,variables:e};return"cache-first"!==n&&"no-cache"!==n&&"network-only"!==n&&(i.fetchPolicy="cache-and-network",i.nextFetchPolicy=n),this.reobserve(i,w.setVariables)},t.prototype.updateQuery=function(e){var t,n=this.queryManager,i=e(n.cache.diff({query:this.options.query,variables:this.variables,previousResult:null===(t=this.lastResult)||void 0===t?void 0:t.data,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});i&&(n.cache.writeQuery({query:this.options.query,data:i,variables:this.variables}),n.broadcastQueries())},t.prototype.startPolling=function(e){this.getReobserver().updateOptions({pollInterval:e})},t.prototype.stopPolling=function(){this.reobserver&&this.reobserver.updateOptions({pollInterval:0})},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:(0,o.Xh)(e),(0,o.Of)(e.errors)||delete this.lastError,t},t.prototype.onSubscribe=function(e){var t=this;if(e===this.observer)return function(){};try{var n=e._subscription._observer;n&&!n.error&&(n.error=C)}catch(e){}var i=!this.observers.size;return this.observers.add(e),this.lastError?e.error&&e.error(this.lastError):this.lastResult&&e.next&&e.next(this.lastResult),i&&this.reobserve().catch((function(e){})),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.getReobserver=function(){return this.reobserver||(this.reobserver=this.newReobserver(!0))},t.prototype.newReobserver=function(e){var t=this,n=this.queryManager,s=this.queryId;return n.setObservableQuery(this),new I(this.observer,e?this.options:(0,i.pi)({},this.options),(function(e,i){return n.setObservableQuery(t),n.fetchQueryObservable(s,e,i)}),!n.ssrMode&&function(){return!P(t.queryInfo.networkStatus)})},t.prototype.reobserve=function(e,t){return this.isTornDown=!1,this.getReobserver().reobserve(e,t)},t.prototype.observe=function(){this.observer.next(this.getCurrentResult(!1))},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.reobserver&&(this.reobserver.stop(),delete this.reobserver),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(o.y$);function C(e){}(0,o.Dy)(k);var L=n(27636),M=function(){return Object.create(null)},D=Array.prototype,R=D.forEach,x=D.slice,j=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=M),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return R.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(x.call(e)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=n.get(t);return i||n.set(t,i=new e(this.weakness,this.makeData)),i},e}();var U=null,H={},F=1,B="@wry/context:Slot",V=Array,G=V[B]||function(){var e=function(){function e(){this.id=["slot",F++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=U;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===H)break;return e!==U&&(U.slots[this.id]=t),!0}return U&&(U.slots[this.id]=H),!1},e.prototype.getValue=function(){if(this.hasValue())return U.slots[this.id]},e.prototype.withValue=function(e,t,n,i){var s,r=((s={__proto__:null})[this.id]=e,s),o=U;U={parent:o,slots:r};try{return t.apply(i,n)}finally{U=o}},e.bind=function(e){var t=U;return function(){var n=U;try{return U=t,e.apply(this,arguments)}finally{U=n}}},e.noContext=function(e,t,n){if(!U)return e.apply(n,t);var i=U;try{return U=null,e.apply(n,t)}finally{U=i}},e}();try{Object.defineProperty(V,B,{value:V[B]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();G.bind,G.noContext;function W(){}var z=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=W),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getEntry(e);return t&&t.value},e.prototype.getEntry=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,i=t.newer;i&&(i.older=n),n&&(n.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t},e.prototype.set=function(e,t){var n=this.getEntry(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),K=new G;function Y(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var q=[];function $(e,t){if(!e)throw new Error(t||"assertion failure")}function Z(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var Q=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!J(this))return this.value[0]},e.prototype.recompute=function(e){return $(!this.recomputing,"already recomputing"),function(e){var t=K.getValue();if(t)e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),J(e)?ne(t,e):ie(t,e)}(this),J(this)?function(e,t){re(e),K.withValue(e,X,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{Y(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(e,t)&&function(e){if(e.dirty=!1,J(e))return;te(e)}(e);return Z(e.value)}(this,e):Z(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,ee(this),re(this),Y(this))},e.prototype.dispose=function(){var e=this;re(this),Y(this),this.parents.forEach((function(t){t.setDirty(),oe(t,e)}))},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=q.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(this.deps.forEach((function(t){return t.delete(e)})),this.deps.clear(),q.push(this.deps),this.deps=null)},e.count=0,e}();function X(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(t){e.value[1]=t}e.recomputing=!1}function J(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function ee(e){e.parents.forEach((function(t){return ne(t,e)}))}function te(e){e.parents.forEach((function(t){return ie(t,e)}))}function ne(e,t){if($(e.childValues.has(t)),$(J(t)),e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=q.pop()||new Set;e.dirtyChildren.add(t),ee(e)}function ie(e,t){$(e.childValues.has(t)),$(!J(t));var n,i,s,r=e.childValues.get(t);0===r.length?e.childValues.set(t,t.value.slice(0)):(n=r,i=t.value,(s=n.length)>0&&s===i.length&&n[s-1]===i[s-1]||e.setDirty()),se(e,t),J(e)||te(e)}function se(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(q.length<100&&q.push(n),e.dirtyChildren=null))}function re(e){e.childValues.size>0&&e.childValues.forEach((function(t,n){oe(e,n)})),e.forgetDeps(),$(null===e.dirtyChildren)}function oe(e,t){t.parents.delete(e),e.childValues.delete(t),se(e,t)}function ae(e){var t=new Map,n=e&&e.subscribe;function i(e){var i=K.getValue();if(i){var s=t.get(e);s||t.set(e,s=new Set),i.dependOn(s),"function"==typeof n&&(Y(s),s.unsubscribe=n(e))}}return i.dirty=function(e){var n=t.get(e);n&&(n.forEach((function(e){return e.setDirty()})),t.delete(e),Y(n))},i}var le=new j("function"==typeof WeakMap);function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return le.lookupArray(e)}var de=new Set;function ue(e,t){void 0===t&&(t=Object.create(null));var n=new z(t.max||Math.pow(2,16),(function(e){return e.dispose()})),i=t.keyArgs||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},s=t.makeCacheKey||ce;function r(){var r=s.apply(null,i.apply(null,arguments));if(void 0===r)return e.apply(null,arguments);var o=n.get(r);o||(n.set(r,o=new Q(e)),o.subscribe=t.subscribe);var a=o.recompute(Array.prototype.slice.call(arguments));return n.set(r,o),de.add(n),K.hasValue()||(de.forEach((function(e){return e.clean()})),de.clear()),a}function o(){var e=s.apply(null,arguments);if(void 0!==e)return n.get(e)}return r.dirty=function(){var e=o.apply(null,arguments);e&&e.setDirty()},r.peek=function(){var e=o.apply(null,arguments);if(e)return e.peek()},r.forget=function(){var e=s.apply(null,arguments);return void 0!==e&&n.delete(e)},r}var he,pe=function(){function e(){this.getFragmentDoc=ue(o.Yk)}return e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({query:this.getFragmentDoc(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.writeQuery=function(e){return this.write({dataId:e.id||"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables,broadcast:e.broadcast})},e.prototype.writeFragment=function(e){return this.write({dataId:e.id,result:e.data,variables:e.variables,query:this.getFragmentDoc(e.fragment,e.fragmentName),broadcast:e.broadcast})},e}();he||(he={});var me=function(e,t,n,i,s){this.message=e,this.path=t,this.query=n,this.clientOnly=i,this.variables=s},ge=Object.prototype.hasOwnProperty;var fe=/^[_a-z][_0-9a-z]*/i;function ve(e){var t=e.match(fe);return t?t[0]:e}function be(e,t,n){return!(!t||"object"!=typeof t)&&(Array.isArray(t)?t.every((function(t){return be(e,t,n)})):e.selections.every((function(e){if((0,o.My)(e)&&(0,o.LZ)(e,n)){var i=(0,o.u2)(e);return ge.call(t,i)&&(!e.selectionSet||be(e.selectionSet,t[i],n))}return!0})))}function ye(e){return null!==e&&"object"==typeof e&&!(0,o.hh)(e)&&!Array.isArray(e)}var Se=Object.create(null),Ee=function(){return Se},Te=Object.create(null),Oe=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return(0,o.Jv)((0,o.hh)(e)?n.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return(0,o.hh)(e)?n.has(e.__ref):"object"==typeof e},this.toReference=function(e,t){if("string"==typeof e)return(0,o.kQ)(e);if((0,o.hh)(e))return e;var i=n.policies.identify(e)[0];if(i){var s=(0,o.kQ)(i);return t&&n.merge(i,e),s}}}return e.prototype.toObject=function(){return(0,i.pi)({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),ge.call(this.data,e)){var n=this.data[e];if(n&&ge.call(n,t))return n[t]}return"__typename"===t&&ge.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof we?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),ge.call(this.data,e)?this.data[e]:this instanceof we?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n=this,i=this.lookup(e),s=new o.w0(Ne).merge(i,t);if(this.data[e]=s,s!==i&&(delete this.refs[e],this.group.caching)){var r=Object.create(null);i||(r.__exists=1),Object.keys(t).forEach((function(e){if(!i||i[e]!==s[e]){r[e]=1;var t=ve(e);t===e||n.policies.hasKeyArgs(s.__typename,t)||(r[t]=1),void 0!==s[e]||n instanceof we||delete s[e]}})),Object.keys(r).forEach((function(t){return n.group.dirty(e,t)}))}},e.prototype.modify=function(e,t){var n=this,s=this.lookup(e);if(s){var r=Object.create(null),a=!1,l=!0,c={DELETE:Se,INVALIDATE:Te,isReference:o.hh,toReference:this.toReference,canRead:this.canRead,readField:function(t,i){return n.policies.readField("string"==typeof t?{fieldName:t,from:i||(0,o.kQ)(e)}:t,{store:n})}};if(Object.keys(s).forEach((function(d){var u=ve(d),h=s[d];if(void 0!==h){var p="function"==typeof t?t:t[d]||t[u];if(p){var m=p===Ee?Se:p((0,o.Jv)(h),(0,i.pi)((0,i.pi)({},c),{fieldName:u,storeFieldName:d,storage:n.getStorage(e,d)}));m===Te?n.group.dirty(e,d):(m===Se&&(m=void 0),m!==h&&(r[d]=m,a=!0,h=m))}void 0!==h&&(l=!1)}})),a)return this.merge(e,r),l&&(this instanceof we?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var i,s=this.lookup(e);if(s){var r=this.getFieldValue(s,"__typename"),o=t&&n?this.policies.getStoreFieldName({typename:r,fieldName:t,args:n}):t;return this.modify(e,o?((i={})[o]=Ee,i):Ee)}return!1},e.prototype.evict=function(e){var t=!1;return e.id&&(ge.call(this.data,e.id)&&(t=this.delete(e.id,e.fieldName,e.args)),this instanceof we&&(t=this.parent.evict(e)||t),(e.fieldName||t)&&this.group.dirty(e.id,e.fieldName||"__exists")),t},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){ge.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&ge.call(e,n)||t.delete(n)})),e){var n=e.__META,s=(0,i._T)(e,["__META"]);Object.keys(s).forEach((function(e){t.merge(e,s[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof we?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(i){ge.call(n,i)&&(Object.keys(e.findChildRefIds(i)).forEach(t.add,t),delete n[i])}));var i=Object.keys(n);if(i.length){for(var s=this;s instanceof we;)s=s.parent;i.forEach((function(e){return s.delete(e)}))}return i},e.prototype.findChildRefIds=function(e){if(!ge.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=new Set([this.data[e]]),i=function(e){return null!==e&&"object"==typeof e};n.forEach((function(e){(0,o.hh)(e)?t[e.__ref]=!0:i(e)&&Object.values(e).filter(i).forEach(n.add,n)}))}return this.refs[e]},e.prototype.makeCacheKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.group.keyMaker.lookupArray(e)},e}(),_e=function(){function e(e){this.caching=e,this.d=null,this.keyMaker=new j(o.mr),this.d=e?ae():null}return e.prototype.depend=function(e,t){if(this.d){this.d(Ae(e,t));var n=ve(t);n!==t&&this.d(Ae(e,n))}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(Ae(e,t))},e}();function Ae(e,t){return t+"#"+e}!function(e){var t=function(e){function t(t){var n=t.policies,i=t.resultCaching,s=void 0===i||i,r=t.seed,a=e.call(this,n,new _e(s))||this;return a.storageTrie=new j(o.mr),a.sharedLayerGroup=new _e(s),r&&a.replace(r),a}return(0,i.ZT)(t,e),t.prototype.addLayer=function(e,t){return new we(e,this,t,this.sharedLayerGroup)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t}(Oe||(Oe={}));var we=function(e){function t(t,n,i,s){var r=e.call(this,n.policies,s)||this;return r.id=t,r.parent=n,r.replay=i,r.group=s,i(r),r}return(0,i.ZT)(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){t.data[e]!==n.lookup(e)&&t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return(0,i.pi)((0,i.pi)({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return ge.call(this.data,t)?(0,i.pi)((0,i.pi)({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(Oe);function Ne(e,t,n){var i=e[n],s=t[n];return S(i,s)?i:s}function Pe(e){return!!(e instanceof Oe&&e.group.caching)}function Ie(e,t){return new me(e.message,t.path.slice(),t.query,t.clientOnly,t.variables)}var ke=function(){function e(e){var t=this;this.config=e,this.executeSelectionSet=ue((function(e){return t.execSelectionSetImpl(e)}),{keyArgs:function(e){return[e.selectionSet,e.objectOrReference,e.context]},makeCacheKey:function(e,t,n){if(Pe(n.store))return n.store.makeCacheKey(e,(0,o.hh)(t)?t.__ref:t,n.varString)}}),this.knownResults=new WeakMap,this.executeSubSelectedArray=ue((function(e){return t.execSubSelectedArrayImpl(e)}),{makeCacheKey:function(e){var t=e.field,n=e.array,i=e.context;if(Pe(i.store))return i.store.makeCacheKey(t,n,i.varString)}}),this.config=(0,i.pi)({addTypename:!0},e)}return e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,s=e.rootId,r=void 0===s?"ROOT_QUERY":s,a=e.variables,l=e.returnPartialData,c=void 0===l||l,d=this.config.cache.policies;a=(0,i.pi)((0,i.pi)({},(0,o.O4)((0,o.iW)(n))),a);var u=this.executeSelectionSet({selectionSet:(0,o.p$)(n).selectionSet,objectOrReference:(0,o.kQ)(r),context:{store:t,query:n,policies:d,variables:a,varString:JSON.stringify(a),fragmentMap:(0,o.F)((0,o.kU)(n)),path:[],clientOnly:!1}}),h=u.missing&&u.missing.length>0;if(h&&!c)throw u.missing[0];return{result:u.result,missing:u.missing,complete:!h}},e.prototype.isFresh=function(e,t,n,i){if(Pe(i.store)&&this.knownResults.get(e)===n){var s=this.executeSelectionSet.peek(n,t,i);if(s&&e===s.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,i=e.objectOrReference,r=e.context;if((0,o.hh)(i)&&!r.policies.rootTypenamesById[i.__ref]&&!r.store.has(i.__ref))return{result:{},missing:[Ie(new s.ej(4),r)]};var a=r.variables,l=r.policies,c=r.store,d=[],u={result:null},h=c.getFieldValue(i,"__typename");function p(){return u.missing||(u.missing=[])}function m(e){var t;return e.missing&&(t=p()).push.apply(t,e.missing),e.result}this.config.addTypename&&"string"==typeof h&&!l.rootIdsByTypename[h]&&d.push({__typename:h});var g=new Set(n.selections);return g.forEach((function(e){var n;if((0,o.LZ)(e,a))if((0,o.My)(e)){var c=l.readField({fieldName:e.name.value,field:e,variables:r.variables,from:i},r),u=(0,o.u2)(e);r.path.push(u);var f=r.clientOnly;r.clientOnly=f||!(!e.directives||!e.directives.some((function(e){return"client"===e.name.value}))),void 0===c?o.Gw.added(e)||p().push(Ie(new s.ej(5),r)):Array.isArray(c)?c=m(t.executeSubSelectedArray({field:e,array:c,context:r})):e.selectionSet&&null!=c&&(c=m(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:c,context:r}))),void 0!==c&&d.push(((n={})[u]=c,n)),r.clientOnly=f,(0,s.kG)(r.path.pop()===u)}else{var v=(0,o.hi)(e,r.fragmentMap);v&&l.fragmentMatches(v,h)&&v.selectionSet.selections.forEach(g.add,g)}})),u.result=(0,o.bw)(d),this.knownResults.set(u.result,n),u},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,i=e.field,r=e.array,o=e.context;function a(e,n){return e.missing&&(t=t||[]).push.apply(t,e.missing),(0,s.kG)(o.path.pop()===n),e.result}return i.selectionSet&&(r=r.filter(o.store.canRead)),{result:r=r.map((function(e,t){return null===e?null:(o.path.push(t),Array.isArray(e)?a(n.executeSubSelectedArray({field:i,array:e,context:o}),t):i.selectionSet?a(n.executeSelectionSet({selectionSet:i.selectionSet,objectOrReference:e,context:o}),t):((0,s.kG)(o.path.pop()===t),e))})),missing:t}},e}();var Ce=function(){function e(e,t){this.cache=e,this.reader=t}return e.prototype.writeToStore=function(e){var t=e.query,n=e.result,r=e.dataId,a=e.store,l=e.variables,c=(0,o.$H)(t),d=new o.w0;l=(0,i.pi)((0,i.pi)({},(0,o.O4)(c)),l);var u=this.processSelectionSet({result:n||Object.create(null),dataId:r,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:{store:a,written:Object.create(null),merge:function(e,t){return d.merge(e,t)},variables:l,varString:JSON.stringify(l),fragmentMap:(0,o.F)((0,o.kU)(t))}});if(!(0,o.hh)(u))throw new s.ej(7);return a.retain(u.__ref),u},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,i=e.result,r=e.selectionSet,a=e.context,l=e.mergeTree,c=this.cache.policies,d=c.identify(i,r,a.fragmentMap),u=d[0],h=d[1];if("string"==typeof(n=n||u)){var p=a.written[n]||(a.written[n]=[]),m=(0,o.kQ)(n);if(p.indexOf(r)>=0)return m;if(p.push(r),this.reader&&this.reader.isFresh(i,m,r,a))return m}var g=Object.create(null);h&&(g=a.merge(g,h));var f=n&&c.rootTypenamesById[n]||(0,o.qw)(i,r,a.fragmentMap)||n&&a.store.get(n,"__typename");"string"==typeof f&&(g.__typename=f);var v=new Set(r.selections);if(v.forEach((function(e){var n;if((0,o.LZ)(e,a.variables))if((0,o.My)(e)){var r=(0,o.u2)(e),d=i[r];if(void 0!==d){var u=c.getStoreFieldName({typename:f,fieldName:e.name.value,field:e,variables:a.variables}),h=Me(l,u),p=t.processFieldValue(d,e,a,h),m=e.selectionSet&&a.store.getFieldValue(p,"__typename")||void 0,b=c.getMergeFunction(f,e.name.value,m);b?h.info={field:e,typename:f,merge:b}:De(l,u),g=a.merge(g,((n={})[u]=p,n))}else if(c.usingPossibleTypes&&!(0,o.FS)(["defer","client"],e))throw new s.ej(8)}else{var y=(0,o.hi)(e,a.fragmentMap);y&&c.fragmentMatches(y,f,i,a.variables)&&y.selectionSet.selections.forEach(v.add,v)}})),"string"==typeof n){var b=(0,o.kQ)(n);return l.map.size&&(g=this.applyMerges(l,b,g,a)),a.store.merge(n,g),b}return g},e.prototype.processFieldValue=function(e,t,n,i){var s=this;return t.selectionSet&&null!==e?Array.isArray(e)?e.map((function(e,r){var o=s.processFieldValue(e,t,n,Me(i,r));return De(i,r),o})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:i}):e},e.prototype.applyMerges=function(e,t,n,r,a){var l,c=this;if(e.map.size&&!(0,o.hh)(n)){var d,u=Array.isArray(n)||!(0,o.hh)(t)&&!ye(t)?void 0:t,h=n;u&&!a&&(a=[(0,o.hh)(u)?u.__ref:u]);var p=function(e,t){return Array.isArray(e)?"number"==typeof t?e[t]:void 0:r.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){a&&a.push(t);var n=p(u,t),i=p(h,t),o=c.applyMerges(e,n,i,r,a);o!==i&&(d=d||new Map).set(t,o),a&&(0,s.kG)(a.pop()===t)})),d&&(n=Array.isArray(h)?h.slice(0):(0,i.pi)({},h),d.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,r,a&&(l=r.store).getStorage.apply(l,a)):n},e}(),Le=[];function Me(e,t){var n=e.map;return n.has(t)||n.set(t,Le.pop()||{map:new Map}),n.get(t)}function De(e,t){var n=e.map,i=n.get(t);!i||i.info||i.map.size||(Le.push(i),n.delete(t))}new Set;var Re=new G;function xe(e,t){if(e.size){var n=[];e.forEach((function(e){return n.push(e)})),e.clear(),n.forEach(t)}}var je=new WeakMap;function Ue(e){var t=je.get(e);return t||je.set(e,t={vars:new Set,dep:ae()}),t}function He(e){var t=new Set,n=new Set,i=function(r){if(arguments.length>0)e!==r&&(e=r,t.forEach((function(e){Ue(e).dep.dirty(i),Fe(e)})),xe(n,(function(t){return t(e)})));else{var o=Re.getValue();o&&(s(o),Ue(o).dep(i))}return e};i.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var s=i.attachCache=function(e){return t.add(e),Ue(e).vars.add(i),i};return i.forgetCache=function(e){return t.delete(e)},i}function Fe(e){e.broadcastWatches&&e.broadcastWatches()}function Be(e){return void 0!==e.args?e.args:e.field?(0,o.NC)(e.field,e.variables):null}var Ve=function(e,t){var n=e.__typename,i=e.id,s=e._id;if("string"==typeof n&&(t&&(t.keyObject=void 0!==i?{id:i}:void 0!==s?{_id:s}:void 0),void 0===i&&(i=s),void 0!==i))return n+":"+("number"==typeof i||"string"==typeof i?i:JSON.stringify(i))},Ge=function(){},We=function(e,t){return t.fieldName},ze=function(e,t,n){return(0,n.mergeObjects)(e,t)},Ke=function(e,t){return t},Ye=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,i.pi)({dataIdFromObject:Ve},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t,n){var i=t&&n?(0,o.qw)(e,t,n):e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s,r={typename:i,selectionSet:t,fragmentMap:n},a=i&&this.getTypePolicy(i),l=a&&a.keyFn||this.config.dataIdFromObject;l;){var c=l(e,r);if(!Array.isArray(c)){s=c;break}l=Qe(c)}return s=s&&String(s),r.keyObject?[s,r.keyObject]:[s]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var s=e[n],r=s.queryType,o=s.mutationType,a=s.subscriptionType,l=(0,i._T)(s,["queryType","mutationType","subscriptionType"]);r&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),a&&t.setRootTypename("Subscription",n),ge.call(t.toBeAdded,n)?t.toBeAdded[n].push(l):t.toBeAdded[n]=[l]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,i=this.getTypePolicy(e),s=t.keyFields,r=t.fields;function o(e,t){e.merge="function"==typeof t?t:!0===t?ze:!1===t?Ke:e.merge}o(i,t.merge),i.keyFn=!1===s?Ge:Array.isArray(s)?Qe(s):"function"==typeof s?s:i.keyFn,r&&Object.keys(r).forEach((function(t){var i=n.getFieldPolicy(e,t,!0),s=r[t];if("function"==typeof s)i.read=s;else{var a=s.keyArgs,l=s.read,c=s.merge;i.keyFn=!1===a?We:Array.isArray(a)?Ze(a):"function"==typeof a?a:i.keyFn,"function"==typeof l&&(i.read=l),o(i,c)}i.read&&i.merge&&(i.keyFn=i.keyFn||We)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[n];t!==i&&((0,s.kG)(!i||i===e,1),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var i=e.match(fe);i&&i[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!ge.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var s=this.supertypeMap.get(e);s&&s.size&&s.forEach((function(e){var s=t.getTypePolicy(e),r=s.fields,o=(0,i._T)(s,["fields"]);Object.assign(n,o),Object.assign(n.fields,r)}))}var r=this.toBeAdded[e];return r&&r.length&&this.updateTypePolicy(e,o.oA.apply(void 0,r.splice(0))),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var i=this.getTypePolicy(e).fields;return i[t]||n&&(i[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,i){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var r=e.typeCondition.name.value;if(t===r)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(r))for(var o=this.getSupertypeSet(t,!0),a=[o],l=function(e){var t=s.getSupertypeSet(e,!1);t&&t.size&&a.indexOf(t)<0&&a.push(t)},c=!(!n||!this.fuzzySubtypes.size),d=0;d<a.length;++d){var u=a[d];if(u.has(r))return o.has(r)||o.add(r),!0;u.forEach(l),c&&d===a.length-1&&be(e.selectionSet,n,i)&&(c=!1,!0,this.fuzzySubtypes.forEach((function(e,n){var i=t.match(e);i&&i[0]===t&&l(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,i=e.fieldName,s=this.getFieldPolicy(n,i,!1),r=s&&s.keyFn;if(r&&n)for(var a={typename:n,fieldName:i,field:e.field||null,variables:e.variables},l=Be(e);r;){var c=r(l,a);if(!Array.isArray(c)){t=c||i;break}r=Ze(c)}return void 0===t&&(t=e.field?(0,o.vf)(e.field,e.variables):(0,o.PT)(i,Be(e))),i===ve(t)?t:i+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n&&(e.field||e.fieldName)){if(void 0===e.typename){var i=t.store.getFieldValue(n,"__typename");i&&(e.typename=i)}var s=this.getStoreFieldName(e),r=ve(s),a=t.store.getFieldValue(n,s),l=this.getFieldPolicy(e.typename,r,!1),c=l&&l.read;if(c){var d=qe(this,n,e,t,t.store.getStorage((0,o.hh)(n)?n.__ref:n,s));return Re.withValue(this.cache,c,[a,d])}return a}},e.prototype.getMergeFunction=function(e,t,n){var i=this.getFieldPolicy(e,t,!1),s=i&&i.merge;return!s&&n&&(s=(i=this.getTypePolicy(n))&&i.merge),s},e.prototype.runMergeFunction=function(e,t,n,i,s){var r=n.field,o=n.typename,a=n.merge;return a===ze?$e(i.store.getFieldValue)(e,t):a===Ke?t:a(e,t,qe(this,void 0,{typename:o,fieldName:r.name.value,field:r,variables:i.variables},i,s||Object.create(null)))},e}();function qe(e,t,n,s,r){var a=e.getStoreFieldName(n),l=ve(a),c=n.variables||s.variables,d=s.store,u=d.getFieldValue,h=d.toReference,p=d.canRead;return{args:Be(n),field:n.field||null,fieldName:l,storeFieldName:a,variables:c,isReference:o.hh,toReference:h,storage:r,cache:e.cache,canRead:p,readField:function(n,r){var o="string"==typeof n?{fieldName:n,from:r}:(0,i.pi)({},n);return void 0===o.from&&(o.from=t),void 0===o.variables&&(o.variables=c),e.readField(o,s)},mergeObjects:$e(u)}}function $e(e){return function(t,n){if(Array.isArray(t)||Array.isArray(n))throw new s.ej(2);if(t&&"object"==typeof t&&n&&"object"==typeof n){var r=e(t,"__typename"),o=e(n,"__typename");return!(r&&o&&r!==o)&&ye(t)&&ye(n)?(0,i.pi)((0,i.pi)({},t),n):n}return n}}function Ze(e){return function(t,n){return t?n.fieldName+":"+JSON.stringify(Je(t,e,!1)):n.fieldName}}function Qe(e){var t=new j(o.mr);return function(n,i){var s;if(i.selectionSet&&i.fragmentMap){var r=t.lookupArray([i.selectionSet,i.fragmentMap]);s=r.aliasMap||(r.aliasMap=Xe(i.selectionSet,i.fragmentMap))}var o=i.keyObject=Je(n,e,!0,s);return i.typename+":"+JSON.stringify(o)}}function Xe(e,t){var n=Object.create(null),i=new Set([e]);return i.forEach((function(e){e.selections.forEach((function(e){if((0,o.My)(e)){if(e.alias){var s=e.alias.value,r=e.name.value;if(r!==s)(n.aliases||(n.aliases=Object.create(null)))[r]=s}if(e.selectionSet)(n.subsets||(n.subsets=Object.create(null)))[e.name.value]=Xe(e.selectionSet,t)}else{var a=(0,o.hi)(e,t);a&&i.add(a.selectionSet)}}))})),n}function Je(e,t,n,i){var r,o=Object.create(null);return t.forEach((function(t){if(Array.isArray(t)){if("string"==typeof r){var a=i&&i.subsets,l=a&&a[r];o[r]=Je(e[r],t,n,l)}}else{var c=i&&i.aliases,d=c&&c[t]||t;ge.call(e,d)?o[r=t]=e[d]:((0,s.kG)(!n,3),r=void 0)}})),o}var et={dataIdFromObject:Ve,addTypename:!0,resultCaching:!0,typePolicies:{}},tt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=He,n.txCount=0,n.maybeBroadcastWatch=ue((function(e,t){return n.broadcastWatch.call(n,e,!!t)}),{makeCacheKey:function(e){var t=e.optimistic?n.optimisticData:n.data;if(Pe(t)){var i=e.optimistic,s=e.rootId,r=e.variables;return t.makeCacheKey(e.query,e.callback,JSON.stringify({optimistic:i,rootId:s,variables:r}))}}}),n.watchDep=ae(),n.config=(0,i.pi)((0,i.pi)({},et),t),n.addTypename=!!n.config.addTypename,n.policies=new Ye({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.data=new Oe.Root({policies:n.policies,resultCaching:n.config.resultCaching}),n.optimisticData=n.data,n.storeWriter=new Ce(n,n.storeReader=new ke({cache:n,addTypename:n.addTypename})),n}return(0,i.ZT)(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,query:e.query,variables:e.variables,rootId:e.rootId,config:this.config,returnPartialData:n}).result||null}catch(e){if(e instanceof me)return null;throw e}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore({store:this.data,query:e.query,result:e.result,dataId:e.dataId,variables:e.variables})}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(ge.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,config:this.config})},t.prototype.watch=function(e){var t,n=this;return this.watches.size||Ue(t=this).vars.forEach((function(e){return e.attachCache(t)})),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){n.watches.delete(e)&&!n.watches.size&&function(e){Ue(e).vars.forEach((function(t){return t.forgetCache(e)}))}(n),n.watchDep.dirty(e),n.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(){return this.optimisticData.gc()},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){return(0,o.hh)(e)?e.__ref:this.policies.identify(e)[0]},t.prototype.evict=function(e){if(!e.id){if(ge.call(e,"id"))return!1;e=(0,i.pi)((0,i.pi)({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(){return this.data.clear(),this.optimisticData=this.data,this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.performTransaction=function(e,t){var n=this,i=function(t){var i=n,s=i.data,r=i.optimisticData;++n.txCount,t&&(n.data=n.optimisticData=t);try{e(n)}finally{--n.txCount,n.data=s,n.optimisticData=r}},s=!1;"string"==typeof t?(this.optimisticData=this.optimisticData.addLayer(t,i),s=!0):null===t?i(this.data):i(),this.broadcastWatches(s)},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=(0,o.Gw)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.broadcastWatch=function(e,t){this.watchDep.dirty(e),this.watchDep(e);var n=this.diff({query:e.query,variables:e.variables,optimistic:e.optimistic});e.optimistic&&t&&(n.fromOptimisticTransaction=!0),e.callback(n)},t}(pe),nt=function(){function e(e){var t=e.cache,n=e.client,i=e.resolvers,s=e.fragmentMatcher;this.cache=t,n&&(this.client=n),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=(0,o.Ee)(t.resolvers,e)})):this.resolvers=(0,o.Ee)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,s=e.context,r=e.variables,o=e.onlyRunForcedResolvers,a=void 0!==o&&o;return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t?[2,this.resolveDocument(t,n.data,s,r,this.fragmentMatcher,a).then((function(e){return(0,i.pi)((0,i.pi)({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return(0,o.FS)(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return(0,o.ob)(e)},e.prototype.prepareContext=function(e){var t=this.cache;return(0,i.pi)((0,i.pi)({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(s){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return(0,i.pi)((0,i.pi)({},t),e.exportedVariables)}))]:[2,(0,i.pi)({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return(0,L.Vn)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return L.$_}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:(0,o.aL)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,s,r,a){return void 0===n&&(n={}),void 0===s&&(s={}),void 0===r&&(r=function(){return!0}),void 0===a&&(a=!1),(0,i.mG)(this,void 0,void 0,(function(){var l,c,d,u,h,p,m,g,f;return(0,i.Jh)(this,(function(v){return l=(0,o.p$)(e),c=(0,o.kU)(e),d=(0,o.F)(c),u=l.operation,h=u?u.charAt(0).toUpperCase()+u.slice(1):"Query",m=(p=this).cache,g=p.client,f={fragmentMap:d,context:(0,i.pi)((0,i.pi)({},n),{cache:m,client:g}),variables:s,fragmentMatcher:r,defaultOperationType:h,exportedVariables:{},onlyRunForcedResolvers:a},[2,this.resolveSelectionSet(l.selectionSet,t,f).then((function(e){return{result:e,exportedVariables:f.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,a,l,c,d,u=this;return(0,i.Jh)(this,(function(h){return r=n.fragmentMap,a=n.context,l=n.variables,c=[t],d=function(e){return(0,i.mG)(u,void 0,void 0,(function(){var d,u;return(0,i.Jh)(this,(function(i){return(0,o.LZ)(e,l)?(0,o.My)(e)?[2,this.resolveField(e,t,n).then((function(t){var n;void 0!==t&&c.push(((n={})[(0,o.u2)(e)]=t,n))}))]:((0,o.Ao)(e)?d=e:(d=r[e.name.value],(0,s.kG)(d,11)),d&&d.typeCondition&&(u=d.typeCondition.name.value,n.fragmentMatcher(t,u,a))?[2,this.resolveSelectionSet(d.selectionSet,t,n).then((function(e){c.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(d)).then((function(){return(0,o.bw)(c)}))]}))}))},e.prototype.resolveField=function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var s,r,a,l,c,d,u,h,p,m=this;return(0,i.Jh)(this,(function(i){return s=n.variables,r=e.name.value,a=(0,o.u2)(e),l=r!==a,c=t[a]||t[r],d=Promise.resolve(c),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(u=t.__typename||n.defaultOperationType,(h=this.resolvers&&this.resolvers[u])&&(p=h[l?r:a])&&(d=Promise.resolve(Re.withValue(this.cache,p,[t,(0,o.NC)(e,s),n.context,{field:e,fragmentMap:n.fragmentMap}])))),[2,d.then((function(t){return void 0===t&&(t=c),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(n.exportedVariables[e.value.value]=t)}))})),e.selectionSet?null==t?t:Array.isArray(t)?m.resolveSubSelectedArray(e,t,n):e.selectionSet?m.resolveSelectionSet(e.selectionSet,t,n):void 0:t}))]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n){var i=this;return Promise.all(t.map((function(t){return null===t?null:Array.isArray(t)?i.resolveSubSelectedArray(e,t,n):e.selectionSet?i.resolveSelectionSet(e.selectionSet,t,n):void 0})))},e}(),it=new(o.mr?WeakMap:Map);function st(e,t){var n=e[t];"function"==typeof n&&(e[t]=function(){return it.set(e,(it.get(e)+1)%1e15),n.apply(this,arguments)})}function rt(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var ot=function(){function e(e){this.cache=e,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.diff=null,this.observableQuery=null,it.has(e)||(it.set(e,0),st(e,"evict"),st(e,"modify"),st(e,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||w.loading;return this.variables&&this.networkStatus!==w.loading&&!S(this.variables,e.variables)&&(t=w.setVariables),S(e.variables,this.variables)||(this.diff=null),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){rt(this),this.diff=null,this.dirty=!1},e.prototype.getDiff=function(e){return void 0===e&&(e=this.variables),this.diff&&S(e,this.variables)?this.diff:(this.updateWatch(this.variables=e),this.diff=this.cache.diff({query:this.document,variables:e,returnPartialData:!0,optimistic:!0}))},e.prototype.setDiff=function(e){var t=this,n=this.diff;this.diff=e,this.dirty||(e&&e.result)===(n&&n.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():e.reobserve()})):delete this.oqListener)},e.prototype.notify=function(){var e=this;rt(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(P(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.cancel(),delete this.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var e=this.observableQuery;e&&e.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;n&&"no-cache"===n.options.fetchPolicy||this.lastWatch&&this.lastWatch.query===this.document&&S(e,this.lastWatch.variables)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch={query:this.document,variables:e,optimistic:!0,callback:function(e){return t.setDiff(e)}}))},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===it.get(this.cache)&&S(t,n.variables)&&S(e.data,n.result.data))},e.prototype.markResult=function(e,t,n){var i=this;this.graphQLErrors=(0,o.Of)(e.errors)?e.errors:[],this.reset(),"no-cache"===t.fetchPolicy?this.diff={result:e.data,complete:!0}:!this.stopped&&n&&(at(e,t.errorPolicy)?this.cache.performTransaction((function(n){if(i.shouldWrite(e,t.variables))n.writeQuery({query:i.document,data:e.data,variables:t.variables}),i.lastWrite={result:e,variables:t.variables,dmCount:it.get(i.cache)};else if(i.diff&&i.diff.complete)return void(e.data=i.diff.result);var s=n.diff({query:i.document,variables:t.variables,returnPartialData:!0,optimistic:!0});i.stopped||i.updateWatch(t.variables),i.diff=s,s.complete&&(e.data=s.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=w.ready},e.prototype.markError=function(e){return this.networkStatus=w.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function at(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,i=!(0,o.d2)(e);return!i&&n&&e.data&&(i=!0),i}var lt=Object.prototype.hasOwnProperty,ct=function(){function e(e){var t=e.cache,n=e.link,i=e.queryDeduplication,s=void 0!==i&&i,r=e.onBroadcast,a=e.ssrMode,l=void 0!==a&&a,c=e.clientAwareness,d=void 0===c?{}:c,u=e.localState,h=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(o.mr?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.queryDeduplication=s,this.clientAwareness=d,this.localState=u||new nt({cache:t}),this.ssrMode=l,this.assumeImmutableResults=!!h,(this.onBroadcast=r)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(new s.ej(12))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t=e.mutation,n=e.variables,r=e.optimisticResponse,a=e.updateQueries,l=e.refetchQueries,c=void 0===l?[]:l,d=e.awaitRefetchQueries,u=void 0!==d&&d,h=e.update,p=e.errorPolicy,m=void 0===p?"none":p,g=e.fetchPolicy,f=e.context,v=void 0===f?{}:f;return(0,i.mG)(this,void 0,void 0,(function(){var e,l,d;return(0,i.Jh)(this,(function(p){switch(p.label){case 0:return(0,s.kG)(t,13),(0,s.kG)(!g||"no-cache"===g,14),e=this.generateMutationId(),t=this.transform(t).document,n=this.getVariables(t,n),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,n,v)]:[3,2];case 1:n=p.sent(),p.label=2;case 2:return l=this.mutationStore&&(this.mutationStore[e]={mutation:t,variables:n,loading:!0,error:null}),r&&this.markMutationOptimistic(r,{mutationId:e,document:t,variables:n,errorPolicy:m,updateQueries:a,update:h}),this.broadcastQueries(),d=this,[2,new Promise((function(s,p){var f,b;d.getObservableFromLink(t,(0,i.pi)((0,i.pi)({},v),{optimisticResponse:r}),n,!1).subscribe({next:function(i){if((0,o.d2)(i)&&"none"===m)b=new N({graphQLErrors:i.errors});else{if(l&&(l.loading=!1,l.error=null),"no-cache"!==g)try{d.markMutationResult({mutationId:e,result:i,document:t,variables:n,errorPolicy:m,updateQueries:a,update:h})}catch(e){return void(b=new N({networkError:e}))}f=i}},error:function(t){l&&(l.loading=!1,l.error=t),r&&d.cache.removeOptimistic(e),d.broadcastQueries(),p(new N({networkError:t}))},complete:function(){if(b&&l&&(l.loading=!1,l.error=b),r&&d.cache.removeOptimistic(e),d.broadcastQueries(),b)p(b);else{"function"==typeof c&&(c=c(f));var t=[];(0,o.Of)(c)&&c.forEach((function(e){if("string"==typeof e)d.queries.forEach((function(n){var i=n.observableQuery;i&&i.queryName===e&&t.push(i.refetch())}));else{var n={query:e.query,variables:e.variables,fetchPolicy:"network-only"};e.context&&(n.context=e.context),t.push(d.query(n))}})),Promise.all(u?t:[]).then((function(){"ignore"===m&&f&&(0,o.d2)(f)&&delete f.errors,s(f)}),p)}}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;if(void 0===t&&(t=this.cache),at(e.result,e.errorPolicy)){var i=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],s=e.updateQueries;s&&this.queries.forEach((function(r,a){var l=r.observableQuery,c=l&&l.queryName;if(c&&lt.call(s,c)){var d=s[c],u=n.queries.get(a),h=u.document,p=u.variables,m=t.diff({query:h,variables:p,returnPartialData:!0,optimistic:!1}),g=m.result;if(m.complete&&g){var f=d(g,{mutationResult:e.result,queryName:h&&(0,o.rY)(h)||void 0,queryVariables:p});f&&i.push({result:f,dataId:"ROOT_QUERY",query:h,variables:p})}}})),t.performTransaction((function(t){i.forEach((function(e){return t.write(e)}));var n=e.update;n&&n(t,e.result)}),null)}},e.prototype.markMutationOptimistic=function(e,t){var n=this,s="function"==typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult((0,i.pi)((0,i.pi)({},t),{result:{data:s}}),e)}catch(e){}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.cache.transformDocument(e),i=(0,o.Fo)(this.cache.transformForLink(n)),s=this.localState.clientQuery(n),r=i&&this.localState.serverQuery(i),a={document:n,hasClientExports:(0,o.mj)(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:s,serverQuery:r,defaultVars:(0,o.O4)((0,o.$H)(n))},l=function(e){e&&!t.has(e)&&t.set(e,a)};l(e),l(n),l(s),l(r)}return t.get(e)},e.prototype.getVariables=function(e,t){return(0,i.pi)((0,i.pi)({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){void 0===(e=(0,i.pi)((0,i.pi)({},e),{variables:this.getVariables(e.query,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new ot(this.cache),n=new k({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:e.query,observableQuery:n,variables:e.variables}),n},e.prototype.query=function(e){var t=this;(0,s.kG)(e.query,15),(0,s.kG)("Document"===e.query.kind,16),(0,s.kG)(!e.returnPartialData,17),(0,s.kG)(!e.pollInterval,18);var n=this.generateQueryId();return this.fetchQuery(n,e).finally((function(){return t.stopQuery(n)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(){return this.cancelPendingFetches(new s.ej(19)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=w.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset()},e.prototype.resetStore=function(){var e=this;return this.clearStore().then((function(){return e.reFetchObservableQueries()}))},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.queries.forEach((function(i,s){var r=i.observableQuery;if(r&&r.hasObservers()){var o=r.options.fetchPolicy;r.resetLastResults(),"cache-only"===o||!e&&"standby"===o||n.push(r.refetch()),t.getQuery(s).setDiff(null)}})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,i=e.fetchPolicy,s=e.errorPolicy,r=e.variables,a=e.context,l=void 0===a?{}:a;n=this.transform(n).document,r=this.getVariables(n,r);var c=function(e){return t.getObservableFromLink(n,l,e,!1).map((function(r){if("no-cache"!==i&&(at(r,s)&&t.cache.write({query:n,result:r.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries()),(0,o.d2)(r))throw new N({graphQLErrors:r.errors});return r}))};if(this.transform(n).hasClientExports){var d=this.localState.addExportedVariables(n,r,l).then(c);return new o.y$((function(e){var t=null;return d.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return c(r)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.getQuery(e).stop(),this.queries.delete(e)},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,s){var a,l,c=this;void 0===s&&(s=null!==(a=null==t?void 0:t.queryDeduplication)&&void 0!==a?a:this.queryDeduplication);var d=this.transform(e).serverQuery;if(d){var u=this.inFlightLinkObservables,h=this.link,p={query:d,variables:n,operationName:(0,o.rY)(d)||void 0,context:this.prepareContext((0,i.pi)((0,i.pi)({},t),{forceFetch:!s}))};if(t=p.context,s){var m=u.get(d)||new Map;u.set(d,m);var g=JSON.stringify(n);if(!(l=m.get(g))){var f=new o.X_([(0,r.ht)(h,p)]);m.set(g,l=f),f.cleanup((function(){m.delete(g)&&m.size<1&&u.delete(d)}))}}else l=new o.X_([(0,r.ht)(h,p)])}else l=new o.X_([o.y$.of({data:{}})]),t=this.prepareContext(t);var v=this.transform(e).clientQuery;return v&&(l=(0,o.sz)(l,(function(e){return c.localState.runResolvers({document:v,remoteResult:e,context:t,variables:n})}))),l},e.prototype.getResultsFromLink=function(e,t,n){var i=e.lastRequestId;return(0,o.sz)(this.getObservableFromLink(e.document,n.context,n.variables),(function(s){var r=(0,o.Of)(s.errors);if(i>=e.lastRequestId){if(r&&"none"===n.errorPolicy)throw e.markError(new N({graphQLErrors:s.errors}));e.markResult(s,n,t),e.markReady()}var a={data:s.data,loading:!1,networkStatus:e.networkStatus||w.ready};return r&&"ignore"!==n.errorPolicy&&(a.errors=s.errors),a}),(function(t){var n=t.hasOwnProperty("graphQLErrors")?t:new N({networkError:t});throw i>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchQueryObservable=function(e,t,n){var i=this;void 0===n&&(n=w.loading);var s=this.transform(t.query).document,r=this.getVariables(s,t.variables),a=this.getQuery(e),l=a.networkStatus,c=t.fetchPolicy,d=void 0===c?"cache-first":c,u=t.errorPolicy,h=void 0===u?"none":u,p=t.returnPartialData,m=void 0!==p&&p,g=t.notifyOnNetworkStatusChange,f=void 0!==g&&g,v=t.context,b=void 0===v?{}:v;("cache-first"===d||"cache-and-network"===d||"network-only"===d||"no-cache"===d)&&f&&"number"==typeof l&&l!==n&&P(n)&&("cache-first"!==d&&(d="cache-and-network"),m=!0);var y=Object.assign({},t,{query:s,variables:r,fetchPolicy:d,errorPolicy:h,returnPartialData:m,notifyOnNetworkStatusChange:f,context:b}),S=function(e){return y.variables=e,i.fetchQueryByPolicy(a,y,n)};this.fetchCancelFns.set(e,(function(e){Promise.resolve().then((function(){return E.cancel(e)}))}));var E=new o.X_(this.transform(y.query).hasClientExports?this.localState.addExportedVariables(y.query,y.variables,y.context).then(S):S(y.variables));return E.cleanup((function(){i.fetchCancelFns.delete(e);var n=t.nextFetchPolicy;n&&(t.nextFetchPolicy=void 0,t.fetchPolicy="function"==typeof n?n.call(t,t.fetchPolicy||"cache-first"):n)})),E},e.prototype.fetchQueryByPolicy=function(e,t,n){var s=this,r=t.query,a=t.variables,l=t.fetchPolicy,c=t.errorPolicy,d=t.returnPartialData,u=t.context;e.init({document:r,variables:a,lastRequestId:this.generateRequestId(),networkStatus:n});var h=function(){return e.getDiff(a)},p=function(t,n){void 0===n&&(n=e.networkStatus||w.loading);var l=t.result;var c=function(e){return o.y$.of((0,i.pi)({data:e,loading:P(n),networkStatus:n},t.complete?null:{partial:!0}))};return s.transform(r).hasForcedResolvers?s.localState.runResolvers({document:r,remoteResult:{data:l},context:u,variables:a,onlyRunForcedResolvers:!0}).then((function(e){return c(e.data)})):c(l)},m=function(t){return s.getResultsFromLink(e,t,{variables:a,context:u,fetchPolicy:l,errorPolicy:c})};switch(l){default:case"cache-first":return(g=h()).complete?[p(g,e.markReady())]:d?[p(g),m(!0)]:[m(!0)];case"cache-and-network":var g;return(g=h()).complete||d?[p(g),m(!0)]:[m(!0)];case"cache-only":return[p(h(),e.markReady())];case"network-only":return[m(!0)];case"no-cache":return[m(!1)];case"standby":return[]}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new ot(this.cache)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,i.pi)((0,i.pi)({},t),{clientAwareness:this.clientAwareness})},e}();function dt(e,t){return(0,o.oA)(e,t,t.variables&&{variables:(0,i.pi)((0,i.pi)({},e.variables),t.variables)})}var ut=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,i=e.credentials,o=e.headers,a=e.cache,l=e.ssrMode,c=void 0!==l&&l,d=e.ssrForceFetchDelay,u=void 0===d?0:d,h=e.connectToDevTools,p=void 0===h?"object"==typeof window&&!window.__APOLLO_CLIENT__&&!1:h,g=e.queryDeduplication,f=void 0===g||g,v=e.defaultOptions,b=e.assumeImmutableResults,y=void 0!==b&&b,S=e.resolvers,E=e.typeDefs,T=e.fragmentMatcher,O=e.name,_=e.version,A=e.link;if(A||(A=n?new m({uri:n,credentials:i,headers:o}):r.i0.empty()),!a)throw new s.ej(9);this.link=A,this.cache=a,this.disableNetworkFetches=c||u>0,this.queryDeduplication=f,this.defaultOptions=v||{},this.typeDefs=E,u&&setTimeout((function(){return t.disableNetworkFetches=!1}),u),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),p&&"object"==typeof window&&(window.__APOLLO_CLIENT__=this),this.version="3.3.11",this.localState=new nt({cache:a,client:this,resolvers:S,fragmentMatcher:T}),this.queryManager=new ct({cache:this.cache,link:this.link,queryDeduplication:f,ssrMode:c,clientAwareness:{name:O,version:_},localState:this.localState,assumeImmutableResults:y,onBroadcast:p?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=dt(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=dt(this.defaultOptions.query,e)),(0,s.kG)("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=dt(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return(0,r.ht)(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}();n(72191),n(35367);var ht=function(){return(ht=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var mt="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function gt(e,t){for(var n,i=/\r\n|[\n\r]/g,s=1,r=t+1;(n=i.exec(e.body))&&n.index<t;)s+=1,r=t+1-(n.index+n[0].length);return{line:s,column:r}}function ft(e){return vt(e.source,gt(e.source,e.start))}function vt(e,t){var n=e.locationOffset.column-1,i=yt(n)+e.body,s=t.line-1,r=e.locationOffset.line-1,o=t.line+r,a=1===t.line?n:0,l=t.column+a,c="".concat(e.name,":").concat(o,":").concat(l,"\n"),d=i.split(/\r\n|[\n\r]/g),u=d[s];if(u.length>120){for(var h=Math.floor(l/80),p=l%80,m=[],g=0;g<u.length;g+=80)m.push(u.slice(g,g+80));return c+bt([["".concat(o),m[0]]].concat(m.slice(1,h+1).map((function(e){return["",e]})),[[" ",yt(p-1)+"^"],["",m[h+1]]]))}return c+bt([["".concat(o-1),d[s-1]],["".concat(o),u],["",yt(l-1)+"^"],["".concat(o+1),d[s+1]]])}function bt(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,i=e[0],s=e[1];return yt(n-(t=i).length)+t+(s?" | "+s:" |")})).join("\n")}function yt(e){return Array(e+1).join(" ")}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tt(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?Ot(e):t}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){var t="function"==typeof Map?new Map:void 0;return(_t=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return At(e,arguments,Pt(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Nt(i,e)})(e)}function At(e,t,n){return(At=wt()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var s=new(Function.bind.apply(e,i));return n&&Nt(s,n.prototype),s}).apply(null,arguments)}function wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(a,e);var t,n,i,s,r,o=(t=a,n=wt(),function(){var e,i=Pt(t);if(n){var s=Pt(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return Tt(this,e)});function a(e,t,n,i,s,r,l){var c,d,u,h,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),p=o.call(this,e);var m,g=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,f=n;!f&&g&&(f=null===(m=g[0].loc)||void 0===m?void 0:m.source);var v,b=i;!b&&g&&(b=g.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),b&&0===b.length&&(b=void 0),i&&n?v=i.map((function(e){return gt(n,e)})):g&&(v=g.reduce((function(e,t){return t.loc&&e.push(gt(t.loc.source,t.loc.start)),e}),[]));var y,S=l;if(null==S&&null!=r){var E=r.extensions;"object"==pt(y=E)&&null!==y&&(S=E)}return Object.defineProperties(Ot(p),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(c=v)&&void 0!==c?c:void 0,enumerable:null!=v},path:{value:null!=s?s:void 0,enumerable:null!=s},nodes:{value:null!=g?g:void 0},source:{value:null!==(d=f)&&void 0!==d?d:void 0},positions:{value:null!==(u=b)&&void 0!==u?u:void 0},originalError:{value:r},extensions:{value:null!==(h=S)&&void 0!==h?h:void 0,enumerable:null!=S}}),null!=r&&r.stack?(Object.defineProperty(Ot(p),"stack",{value:r.stack,writable:!0,configurable:!0}),Tt(p)):(Error.captureStackTrace?Error.captureStackTrace(Ot(p),a):Object.defineProperty(Ot(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return i=a,(s=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,i=e.nodes;n<i.length;n++){var s=i[n];s.loc&&(t+="\n\n"+ft(s.loc))}else if(e.source&&e.locations)for(var r=0,o=e.locations;r<o.length;r++){var a=o[r];t+="\n\n"+vt(e.source,a)}return t}(this)}},{key:mt,get:function(){return"Object"}}])&&Et(i.prototype,s),r&&Et(i,r),a}(_t(Error));function kt(e,t,n){return new It("Syntax Error: ".concat(n),void 0,e,[t])}var Ct=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Lt=n(83059),Mt=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),Dt=n(6589);function Rt(e,t){if(!Boolean(e))throw new Error(t)}const xt=function(e,t){return e instanceof t};function jt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ut=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Rt(0,"Body must be a string. Received: ".concat((0,Dt.Z)(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Rt(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Rt(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,i;return t=e,(n=[{key:mt,get:function(){return"Source"}}])&&jt(t.prototype,n),i&&jt(t,i),e}();var Ht=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),Ft=n(7420),Bt=function(){function e(e){var t=new Lt.WU(Mt.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==Mt.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=Gt(this,e)}while(e.kind===Mt.COMMENT);return e},e}();function Vt(e){return isNaN(e)?Mt.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Gt(e,t){for(var n=e.source,i=n.body,s=i.length,r=t.end;r<s;){var o=i.charCodeAt(r),a=e.line,l=1+r-e.lineStart;switch(o){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++e.line,e.lineStart=r;continue;case 13:10===i.charCodeAt(r+1)?r+=2:++r,++e.line,e.lineStart=r;continue;case 33:return new Lt.WU(Mt.BANG,r,r+1,a,l,t);case 35:return zt(n,r,a,l,t);case 36:return new Lt.WU(Mt.DOLLAR,r,r+1,a,l,t);case 38:return new Lt.WU(Mt.AMP,r,r+1,a,l,t);case 40:return new Lt.WU(Mt.PAREN_L,r,r+1,a,l,t);case 41:return new Lt.WU(Mt.PAREN_R,r,r+1,a,l,t);case 46:if(46===i.charCodeAt(r+1)&&46===i.charCodeAt(r+2))return new Lt.WU(Mt.SPREAD,r,r+3,a,l,t);break;case 58:return new Lt.WU(Mt.COLON,r,r+1,a,l,t);case 61:return new Lt.WU(Mt.EQUALS,r,r+1,a,l,t);case 64:return new Lt.WU(Mt.AT,r,r+1,a,l,t);case 91:return new Lt.WU(Mt.BRACKET_L,r,r+1,a,l,t);case 93:return new Lt.WU(Mt.BRACKET_R,r,r+1,a,l,t);case 123:return new Lt.WU(Mt.BRACE_L,r,r+1,a,l,t);case 124:return new Lt.WU(Mt.PIPE,r,r+1,a,l,t);case 125:return new Lt.WU(Mt.BRACE_R,r,r+1,a,l,t);case 34:return 34===i.charCodeAt(r+1)&&34===i.charCodeAt(r+2)?$t(n,r,a,l,t,e):qt(n,r,a,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Kt(n,r,o,a,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Qt(n,r,a,l,t)}throw kt(n,r,Wt(o))}var c=e.line,d=1+r-e.lineStart;return new Lt.WU(Mt.EOF,s,s,c,d,t)}function Wt(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(Vt(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(Vt(e),".")}function zt(e,t,n,i,s){var r,o=e.body,a=t;do{r=o.charCodeAt(++a)}while(!isNaN(r)&&(r>31||9===r));return new Lt.WU(Mt.COMMENT,t,a,n,i,s,o.slice(t+1,a))}function Kt(e,t,n,i,s,r){var o=e.body,a=n,l=t,c=!1;if(45===a&&(a=o.charCodeAt(++l)),48===a){if((a=o.charCodeAt(++l))>=48&&a<=57)throw kt(e,l,"Invalid number, unexpected digit after 0: ".concat(Vt(a),"."))}else l=Yt(e,l,a),a=o.charCodeAt(l);if(46===a&&(c=!0,a=o.charCodeAt(++l),l=Yt(e,l,a),a=o.charCodeAt(l)),69!==a&&101!==a||(c=!0,43!==(a=o.charCodeAt(++l))&&45!==a||(a=o.charCodeAt(++l)),l=Yt(e,l,a),a=o.charCodeAt(l)),46===a||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(a))throw kt(e,l,"Invalid number, expected digit but got: ".concat(Vt(a),"."));return new Lt.WU(c?Mt.FLOAT:Mt.INT,t,l,i,s,r,o.slice(t,l))}function Yt(e,t,n){var i=e.body,s=t,r=n;if(r>=48&&r<=57){do{r=i.charCodeAt(++s)}while(r>=48&&r<=57);return s}throw kt(e,s,"Invalid number, expected digit but got: ".concat(Vt(r),"."))}function qt(e,t,n,i,s){for(var r,o,a,l,c=e.body,d=t+1,u=d,h=0,p="";d<c.length&&!isNaN(h=c.charCodeAt(d))&&10!==h&&13!==h;){if(34===h)return p+=c.slice(u,d),new Lt.WU(Mt.STRING,t,d+1,n,i,s,p);if(h<32&&9!==h)throw kt(e,d,"Invalid character within String: ".concat(Vt(h),"."));if(++d,92===h){switch(p+=c.slice(u,d-1),h=c.charCodeAt(d)){case 34:p+='"';break;case 47:p+="/";break;case 92:p+="\\";break;case 98:p+="\b";break;case 102:p+="\f";break;case 110:p+="\n";break;case 114:p+="\r";break;case 116:p+="\t";break;case 117:var m=(r=c.charCodeAt(d+1),o=c.charCodeAt(d+2),a=c.charCodeAt(d+3),l=c.charCodeAt(d+4),Zt(r)<<12|Zt(o)<<8|Zt(a)<<4|Zt(l));if(m<0){var g=c.slice(d+1,d+5);throw kt(e,d,"Invalid character escape sequence: \\u".concat(g,"."))}p+=String.fromCharCode(m),d+=4;break;default:throw kt(e,d,"Invalid character escape sequence: \\".concat(String.fromCharCode(h),"."))}u=++d}}throw kt(e,d,"Unterminated string.")}function $t(e,t,n,i,s,r){for(var o=e.body,a=t+3,l=a,c=0,d="";a<o.length&&!isNaN(c=o.charCodeAt(a));){if(34===c&&34===o.charCodeAt(a+1)&&34===o.charCodeAt(a+2))return d+=o.slice(l,a),new Lt.WU(Mt.BLOCK_STRING,t,a+3,n,i,s,(0,Ft.W7)(d));if(c<32&&9!==c&&10!==c&&13!==c)throw kt(e,a,"Invalid character within String: ".concat(Vt(c),"."));10===c?(++a,++r.line,r.lineStart=a):13===c?(10===o.charCodeAt(a+1)?a+=2:++a,++r.line,r.lineStart=a):92===c&&34===o.charCodeAt(a+1)&&34===o.charCodeAt(a+2)&&34===o.charCodeAt(a+3)?(d+=o.slice(l,a)+'"""',l=a+=4):++a}throw kt(e,a,"Unterminated string.")}function Zt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Qt(e,t,n,i,s){for(var r=e.body,o=r.length,a=t+1,l=0;a!==o&&!isNaN(l=r.charCodeAt(a))&&(95===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++a;return new Lt.WU(Mt.NAME,t,a,n,i,s,r.slice(t,a))}var Xt=function(){function e(e,t){var n=function(e){return xt(e,Ut)}(e)?e:new Ut(e);this._lexer=new Bt(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(Mt.NAME);return{kind:Ct.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:Ct.DOCUMENT,definitions:this.many(Mt.SOF,this.parseDefinition,Mt.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(Mt.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(Mt.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(Mt.BRACE_L))return{kind:Ct.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(Mt.NAME)&&(t=this.parseName()),{kind:Ct.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(Mt.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(Mt.PAREN_L,this.parseVariableDefinition,Mt.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:Ct.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(Mt.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(Mt.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(Mt.DOLLAR),{kind:Ct.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:Ct.SELECTION_SET,selections:this.many(Mt.BRACE_L,this.parseSelection,Mt.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(Mt.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,i=this.parseName();return this.expectOptionalToken(Mt.COLON)?(e=i,t=this.parseName()):t=i,{kind:Ct.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(Mt.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(Mt.PAREN_L,t,Mt.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(Mt.COLON),{kind:Ct.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:Ct.ARGUMENT,name:this.parseName(),value:(this.expectToken(Mt.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(Mt.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(Mt.NAME)?{kind:Ct.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:Ct.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:Ct.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:Ct.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case Mt.BRACKET_L:return this.parseList(e);case Mt.BRACE_L:return this.parseObject(e);case Mt.INT:return this._lexer.advance(),{kind:Ct.INT,value:t.value,loc:this.loc(t)};case Mt.FLOAT:return this._lexer.advance(),{kind:Ct.FLOAT,value:t.value,loc:this.loc(t)};case Mt.STRING:case Mt.BLOCK_STRING:return this.parseStringLiteral();case Mt.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:Ct.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:Ct.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:Ct.NULL,loc:this.loc(t)};default:return{kind:Ct.ENUM,value:t.value,loc:this.loc(t)}}case Mt.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:Ct.STRING,value:e.value,block:e.kind===Mt.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:Ct.LIST,values:this.any(Mt.BRACKET_L,(function(){return t.parseValueLiteral(e)}),Mt.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:Ct.OBJECT,fields:this.any(Mt.BRACE_L,(function(){return t.parseObjectField(e)}),Mt.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(Mt.COLON),{kind:Ct.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(Mt.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(Mt.AT),{kind:Ct.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(Mt.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(Mt.BRACKET_R),e={kind:Ct.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(Mt.BANG)?{kind:Ct.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:Ct.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===Mt.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(Mt.STRING)||this.peek(Mt.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),i=this.many(Mt.BRACE_L,this.parseOperationTypeDefinition,Mt.BRACE_R);return{kind:Ct.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(Mt.COLON);var n=this.parseNamedType();return{kind:Ct.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),i=this.parseDirectives(!0);return{kind:Ct.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),r=this.parseFieldsDefinition();return{kind:Ct.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:r,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(Mt.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(Mt.AMP)||this.peek(Mt.NAME));return t}return this.delimitedMany(Mt.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(Mt.BRACE_L)&&this._lexer.lookahead().kind===Mt.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(Mt.BRACE_L,this.parseFieldDefinition,Mt.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(Mt.COLON);var s=this.parseTypeReference(),r=this.parseDirectives(!0);return{kind:Ct.FIELD_DEFINITION,description:t,name:n,arguments:i,type:s,directives:r,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(Mt.PAREN_L,this.parseInputValueDef,Mt.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(Mt.COLON);var i,s=this.parseTypeReference();this.expectOptionalToken(Mt.EQUALS)&&(i=this.parseValueLiteral(!0));var r=this.parseDirectives(!0);return{kind:Ct.INPUT_VALUE_DEFINITION,description:t,name:n,type:s,defaultValue:i,directives:r,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),r=this.parseFieldsDefinition();return{kind:Ct.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:r,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),i=this.parseDirectives(!0),s=this.parseUnionMemberTypes();return{kind:Ct.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:s,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(Mt.EQUALS)?this.delimitedMany(Mt.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),i=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();return{kind:Ct.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:s,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(Mt.BRACE_L,this.parseEnumValueDefinition,Mt.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseDirectives(!0);return{kind:Ct.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),i=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();return{kind:Ct.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:s,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(Mt.BRACE_L,this.parseInputValueDef,Mt.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===Mt.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(Mt.BRACE_L,this.parseOperationTypeDefinition,Mt.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:Ct.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:Ct.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===s.length)throw this.unexpected();return{kind:Ct.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===s.length)throw this.unexpected();return{kind:Ct.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseUnionMemberTypes();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:Ct.UNION_TYPE_EXTENSION,name:t,directives:n,types:i,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:Ct.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:Ct.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(Mt.AT);var n=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var r=this.parseDirectiveLocations();return{kind:Ct.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:s,locations:r,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(Mt.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==Ht[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new Lt.Ye(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw kt(this._lexer.source,t.start,"Expected ".concat(en(e),", found ").concat(Jt(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==Mt.NAME||t.value!==e)throw kt(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(Jt(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===Mt.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return kt(this._lexer.source,t.start,"Unexpected ".concat(Jt(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var i=[];!this.expectOptionalToken(n);)i.push(t.call(this));return i},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i}return[]},t.many=function(e,t,n){this.expectToken(e);var i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function Jt(e){var t=e.value;return en(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function en(e){return function(e){return e===Mt.BANG||e===Mt.DOLLAR||e===Mt.AMP||e===Mt.PAREN_L||e===Mt.PAREN_R||e===Mt.SPREAD||e===Mt.COLON||e===Mt.EQUALS||e===Mt.AT||e===Mt.BRACKET_L||e===Mt.BRACKET_R||e===Mt.BRACE_L||e===Mt.PIPE||e===Mt.BRACE_R}(e)?'"'.concat(e,'"'):e}var tn=new Map,nn=new Map,sn=!0,rn=!1;function on(e){return e.replace(/[\s,]+/g," ").trim()}function an(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var i=e.name.value,s=on((o=e.loc).source.body.substring(o.start,o.end)),r=nn.get(i);r&&!r.has(s)?sn&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):r||nn.set(i,r=new Set),r.add(s),t.has(s)||(t.add(s),n.push(e))}else n.push(e);var o})),ht(ht({},e),{definitions:n})}function ln(e){var t=on(e);if(!tn.has(t)){var n=function(e,t){return new Xt(e,t).parseDocument()}(e,{experimentalFragmentVariables:rn});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");tn.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var i=e[n];i&&"object"==typeof i&&t.add(i)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}(an(n)))}return tn.get(t)}function cn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var i=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?i+=t.loc.source.body:i+=t,i+=e[n+1]})),ln(i)}const dn=Object.assign(cn,{gql:cn,default:cn,resetCaches:function(){tn.clear(),nn.clear()},disableFragmentWarnings:function(){sn=!1},enableExperimentalFragmentVariables:function(){rn=!0},disableExperimentalFragmentVariables:function(){rn=!1}});(0,s.U6)("log");dn.resetCaches,dn.disableFragmentWarnings,dn.enableExperimentalFragmentVariables,dn.disableExperimentalFragmentVariables},72191:()=>{},97222:(e,t,n)=>{"use strict";n.d(t,{i:()=>d});var i=n(23564),s=n(5419),r=n(80496),o=n(84913);function a(e,t){return t?t(e):r.y$.of()}function l(e){return"function"==typeof e?new d(e):e}function c(e){return e.request.length<=1}!function(e){function t(t,n){var i=e.call(this,t)||this;return i.link=n,i}(0,i.ZT)(t,e)}(Error);var d=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return r.y$.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(l).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,i){var s=l(n),o=l(i||new e(a));return c(s)&&c(o)?new e((function(e){return t(e)?s.request(e)||r.y$.of():o.request(e)||r.y$.of()})):new e((function(e,n){return t(e)?s.request(e,n)||r.y$.of():o.request(e,n)||r.y$.of()}))},e.execute=function(e,t){return e.request((0,o.zi)(t.context,(0,o.DQ)((0,o.Ak)(t))))||r.y$.of()},e.concat=function(t,n){var i=l(t);if(c(i))return i;var s=l(n);return c(s)?new e((function(e){return i.request(e,(function(e){return s.request(e)||r.y$.of()}))||r.y$.of()})):new e((function(e,t){return i.request(e,(function(e){return s.request(e,t)||r.y$.of()}))||r.y$.of()}))},e.prototype.split=function(t,n,i){return this.concat(e.split(t,n,i||new e(a)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw new s.ej(21)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}()},24957:(e,t,n)=>{"use strict";n(97222).i.concat},67325:(e,t,n)=>{"use strict";n(97222).i.empty},2550:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var i=n(97222).i.execute},34674:(e,t,n)=>{"use strict";n(97222).i.from},81707:(e,t,n)=>{"use strict";n.d(t,{ht:()=>i.h,i0:()=>s.i});n(67325),n(34674),n(64738),n(24957);var i=n(2550),s=n(97222),r=n(79875);n.o(r,"createHttpLink")&&n.d(t,{createHttpLink:function(){return r.createHttpLink}})},64738:(e,t,n)=>{"use strict";n(97222).i.split},79875:()=>{},84913:(e,t,n)=>{"use strict";n.d(t,{zi:()=>c,Qc:()=>s,PW:()=>o,DQ:()=>d,Ak:()=>a});var i=n(80496);function s(e){return new i.y$((function(t){t.error(e)}))}var r=n(5419);var o=function(e,t,n){var i=new Error(n);throw i.name="ServerError",i.response=e,i.statusCode=e.status,i.result=t,i};function a(e){for(var t=["query","operationName","variables","extensions","context"],n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];if(t.indexOf(s)<0)throw new r.ej(26)}return e}var l=n(23564);function c(e,t){var n=(0,l.pi)({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n="function"==typeof e?(0,l.pi)((0,l.pi)({},n),e(n)):(0,l.pi)((0,l.pi)({},n),e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return(0,l.pi)({},n)}}),t}function d(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?(0,i.rY)(t.query)||void 0:""),t}},23564:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>s,pi:()=>r,_T:()=>o,mG:()=>a,Jh:()=>l,pr:()=>c});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}function a(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))}function l(e,t){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)i[s]=r[o];return i}},80496:(e,t,n)=>{"use strict";n.d(t,{X_:()=>oe,w0:()=>$,y$:()=>Q(),Gw:()=>U,NC:()=>S,sz:()=>ie,aL:()=>V,mr:()=>ce,Xh:()=>J,oA:()=>de,F:()=>d,Dy:()=>se,O4:()=>C,kU:()=>P,hi:()=>u,Yk:()=>c,p$:()=>k,$H:()=>w,rY:()=>N,iW:()=>I,PT:()=>y,qw:()=>T,d2:()=>le,mj:()=>a,FS:()=>o,My:()=>O,Ao:()=>_,Of:()=>ae,hh:()=>g,pM:()=>ne,kQ:()=>m,Jv:()=>te,Ee:()=>z,bw:()=>K,ob:()=>G,Fo:()=>F,u2:()=>E,LZ:()=>r,vf:()=>v});var i=n(27636),s=n(5419);function r(e,t){var n=e.directives;return!n||!n.length||function(e){var t=[];e&&e.length&&e.forEach((function(e){if(function(e){var t=e.name.value;return"skip"===t||"include"===t}(e)){var n=e.arguments;e.name.value;(0,s.kG)(n&&1===n.length,39);var i=n[0];(0,s.kG)(i.name&&"if"===i.name.value,40);var r=i.value;(0,s.kG)(r&&("Variable"===r.kind||"BooleanValue"===r.kind),41),t.push({directive:e,ifArgument:i})}}));return t}(n).every((function(e){var n=e.directive,i=e.ifArgument,r=!1;return"Variable"===i.value.kind?(r=t&&t[i.value.name.value],(0,s.kG)(void 0!==r,38)):r=i.value.value,"skip"===n.name.value?!r:r}))}function o(e,t){return function(e){var t=[];return(0,i.Vn)(e,{Directive:function(e){t.push(e.name.value)}}),t}(t).some((function(t){return e.indexOf(t)>-1}))}function a(e){return e&&o(["client"],e)&&o(["export"],e)}var l=n(23564);function c(e,t){var n=t,i=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw new s.ej(42);"FragmentDefinition"===e.kind&&i.push(e)})),void 0===n&&((0,s.kG)(1===i.length,43),n=i[0].name.value),(0,l.pi)((0,l.pi)({},e),{definitions:(0,l.pr)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions)})}function d(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function u(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=t&&t[e.name.value];return(0,s.kG)(n,44),n;default:return null}}var h=n(35035),p=n.n(h);function m(e){return{__ref:String(e)}}function g(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}function f(e,t,n,i){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var r={};n.fields.map((function(e){return f(r,e.name,e.value,i)})),e[t.value]=r}else if(function(e){return"Variable"===e.kind}(n)){var o=(i||{})[n.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return f(n,t,e,i),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw new s.ej(53);e[t.value]=null}}function v(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(i){var s=i.name,r=i.value;return f(n[e.name.value],s,r,t)}))})));var i=null;return e.arguments&&e.arguments.length&&(i={},e.arguments.forEach((function(e){var n=e.name,s=e.value;return f(i,n,s,t)}))),y(e.name.value,i,n)}var b=["connection","include","skip","client","rest","export"];function y(e,t,n){if(t&&n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var i=n.connection.filter?n.connection.filter:[];i.sort();var s={};return i.forEach((function(e){s[e]=t[e]})),n.connection.key+"("+JSON.stringify(s)+")"}return n.connection.key}var r=e;if(t){var o=p()(t);r+="("+o+")"}return n&&Object.keys(n).forEach((function(e){-1===b.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?r+="@"+e+"("+JSON.stringify(n[e])+")":r+="@"+e)})),r}function S(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var i=e.name,s=e.value;return f(n,i,s,t)})),n}return null}function E(e){return e.alias?e.alias.value:e.name.value}function T(e,t,n){if("string"==typeof e.__typename)return e.__typename;for(var i=0,s=t.selections;i<s.length;i++){var r=s[i];if(O(r)){if("__typename"===r.name.value)return e[E(r)]}else{var o=T(e,u(r,n).selectionSet,n);if("string"==typeof o)return o}}}function O(e){return"Field"===e.kind}function _(e){return"InlineFragment"===e.kind}function A(e){(0,s.kG)(e&&"Document"===e.kind,45);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw new s.ej(46);return e}));return(0,s.kG)(t.length<=1,47),e}function w(e){return A(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function N(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||null}function P(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function I(e){var t=w(e);return(0,s.kG)(t&&"query"===t.operation,48),t}function k(e){var t;A(e);for(var n=0,i=e.definitions;n<i.length;n++){var r=i[n];if("OperationDefinition"===r.kind){var o=r.operation;if("query"===o||"mutation"===o||"subscription"===o)return r}"FragmentDefinition"!==r.kind||t||(t=r)}if(t)return t;throw new s.ej(52)}function C(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&f(t,e.variable.name,e.defaultValue)})),t}function L(e,t,n){var i=0;return e.forEach((function(n,s){t.call(this,n,s,e)&&(e[i++]=n)}),n),e.length=i,e}var M={kind:"Field",name:{kind:"Name",value:"__typename"}};function D(e,t){return e.selectionSet.selections.every((function(e){return"FragmentSpread"===e.kind&&D(t[e.name.value],t)}))}function R(e){return D(w(e)||function(e){(0,s.kG)("Document"===e.kind,49),(0,s.kG)(e.definitions.length<=1,50);var t=e.definitions[0];return(0,s.kG)("FragmentDefinition"===t.kind,51),t}(e),d(P(e)))?null:e}function x(e){return function(t){return e.some((function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)}))}}function j(e,t){var n=Object.create(null),s=[],r=Object.create(null),o=[],a=R((0,i.Vn)(t,{Variable:{enter:function(e,t,i){"VariableDefinition"!==i.kind&&(n[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some((function(e){return e.remove}))&&t.directives&&t.directives.some(x(e))))return t.arguments&&t.arguments.forEach((function(e){"Variable"===e.value.kind&&s.push({name:e.value.name.value})})),t.selectionSet&&B(t.selectionSet).forEach((function(e){o.push({name:e.name.value})})),null}},FragmentSpread:{enter:function(e){r[e.name.value]=!0}},Directive:{enter:function(t){if(x(e)(t))return null}}}));return a&&L(s,(function(e){return!!e.name&&!n[e.name]})).length&&(a=function(e,t){var n=function(e){return function(t){return e.some((function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))}))}}(e);return R((0,i.Vn)(t,{OperationDefinition:{enter:function(t){return(0,l.pi)((0,l.pi)({},t),{variableDefinitions:t.variableDefinitions?t.variableDefinitions.filter((function(t){return!e.some((function(e){return e.name===t.variable.name.value}))})):[]})}},Field:{enter:function(t){if(e.some((function(e){return e.remove}))){var i=0;if(t.arguments&&t.arguments.forEach((function(e){n(e)&&(i+=1)})),1===i)return null}}},Argument:{enter:function(e){if(n(e))return null}}}))}(s,a)),a&&L(o,(function(e){return!!e.name&&!r[e.name]})).length&&(a=function(e,t){function n(t){if(e.some((function(e){return e.name===t.name.value})))return null}return R((0,i.Vn)(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}(o,a)),a}function U(e){return(0,i.Vn)(A(e),{SelectionSet:{enter:function(e,t,n){if(!n||"OperationDefinition"!==n.kind){var i=e.selections;if(i)if(!i.some((function(e){return O(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var s=n;if(!(O(s)&&s.directives&&s.directives.some((function(e){return"export"===e.name.value}))))return(0,l.pi)((0,l.pi)({},e),{selections:(0,l.pr)(i,[M])})}}}}})}U.added=function(e){return e===M};var H={test:function(e){var t="connection"===e.name.value;return t&&(!e.arguments||e.arguments.some((function(e){return"key"===e.name.value}))),t}};function F(e){return j([H],A(e))}function B(e){var t=[];return e.selections.forEach((function(e){(O(e)||_(e))&&e.selectionSet?B(e.selectionSet).forEach((function(e){return t.push(e)})):"FragmentSpread"===e.kind&&t.push(e)})),t}function V(e){return"query"===k(e).operation?e:(0,i.Vn)(e,{OperationDefinition:{enter:function(e){return(0,l.pi)((0,l.pi)({},e),{operation:"query"})}}})}function G(e){A(e);var t=j([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=(0,i.Vn)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every((function(e){return O(e)&&"__typename"===e.name.value})))return null}}})),t}var W=Object.prototype.hasOwnProperty;function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return K(e)}function K(e){var t=e[0]||{},n=e.length;if(n>1)for(var i=new $,s=1;s<n;++s)t=i.merge(t,e[s]);return t}function Y(e){return null!==e&&"object"==typeof e}var q=function(e,t,n){return this.merge(e[n],t[n])},$=function(){function e(e){void 0===e&&(e=q),this.reconciler=e,this.isObject=Y,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return Y(t)&&Y(e)?(Object.keys(t).forEach((function(s){if(W.call(e,s)){var r=e[s];if(t[s]!==r){var o=n.reconciler.apply(n,(0,l.pr)([e,t,s],i));o!==r&&((e=n.shallowCopyForMerge(e))[s]=o)}}else(e=n.shallowCopyForMerge(e))[s]=t[s]})),e):t},e.prototype.shallowCopyForMerge=function(e){return Y(e)&&!this.pastCopies.has(e)&&(e=Array.isArray(e)?e.slice(0):(0,l.pi)({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)),e},e}();var Z=n(49329),Q=n.n(Z);n(67121);Q().prototype["@@observable"]=function(){return this};var X=Object.prototype.toString;function J(e){return ee(e)}function ee(e,t){switch(X.call(e)){case"[object Array]":if((t=t||new Map).has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach((function(e,i){n[i]=ee(e,t)})),n;case"[object Object]":if((t=t||new Map).has(e))return t.get(e);var i=Object.create(Object.getPrototypeOf(e));return t.set(e,i),Object.keys(e).forEach((function(n){i[n]=ee(e[n],t)})),i;default:return e}}function te(e){return e}function ne(e,t,n){var i=[];e.forEach((function(e){return e[t]&&i.push(e)})),i.forEach((function(e){return e[t](n)}))}function ie(e,t,n){return new(Q())((function(i){var s=i.next,r=i.error,o=i.complete,a=0,l=!1;function c(e,t){return e?function(t){++a,new Promise((function(n){return n(e(t))})).then((function(e){--a,s&&s.call(i,e),l&&d.complete()}),(function(e){--a,r&&r.call(i,e)}))}:function(e){return t&&t.call(i,e)}}var d={next:c(t,s),error:c(n,r),complete:function(){l=!0,a||o&&o.call(i)}},u=e.subscribe(d);return function(){return u.unsubscribe()}}))}function se(e){function t(t){Object.defineProperty(e,t,{value:Q()})}return"function"==typeof Symbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}function re(e){return e&&"function"==typeof e.then}var oe=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.addCount=0,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],ne(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&Promise.resolve().then((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),ne(n.observers,"error",e))},complete:function(){if(null!==n.sub){var e=n.sources.shift();e?re(e)?e.then((function(e){return n.sub=e.subscribe(n.handlers)})):n.sub=e.subscribe(n.handlers):(n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),ne(n.observers,"complete"))}}},n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"==typeof t&&(t=[new(Q())(t)]),re(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return(0,l.ZT)(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e),++this.addCount)},t.prototype.removeObserver=function(e,t){this.observers.delete(e)&&--this.addCount<1&&!t&&this.handlers.error(new Error("Observable cancelled prematurely"))},t.prototype.cleanup=function(e){var t=this,n=!1,i=function(){n||(n=!0,t.observers.delete(s),e())},s={next:i,error:i,complete:i},r=this.addCount;this.addObserver(s),this.addCount=r},t}(Q());function ae(e){return Array.isArray(e)&&e.length>0}function le(e){return e.errors&&e.errors.length>0||!1}se(oe);var ce="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product);function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var i=e[t];void 0!==i&&(n[t]=i)}))})),n}},85925:(e,t,n)=>{"use strict";n(29469)},57340:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m,A:()=>g});var i=n(67294),s=n(54929);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var s=p(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(!e.prototype||!e.prototype.render)return e.__scuWrap||(e.__scuWrap=f(e,S));e.prototype.shouldComponentUpdate=b}function g(e){if(!e.prototype||!e.prototype.render)return e.__scuWrap||(e.__scuWrap=f(e,s.NK));e.prototype.shouldComponentUpdate=y}function f(e,t){var n=function(e){c(n,e);var t=u(n);function n(){return l(this,n),t.apply(this,arguments)}return a(n)}(v);return n.prototype.renderChild=e,n.prototype.diffFunc=t,n}var v=function(e){c(n,e);var t=u(n);function n(){return l(this,n),t.apply(this,arguments)}return a(n,[{key:"shouldComponentUpdate",value:function(e){return this.diffFunc(e,this.props)}},{key:"render",value:function(){return this.renderChild(this.props,this.context)}}]),n}(i.Component);function b(e,t){return S(e,this.props)||S(t,this.state)}function y(e,t){return S(e,this.props)||(0,s.NK)(t,this.state)}function S(e,t){for(var n in e)if(e[n]!==t[n])return!0;for(var i in t)if(!(i in e))return!0;return!1}},17403:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,s,r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.RequestQueue=t.RequestStatus=t.RequestPriority=void 0,function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.HIGHEST=3]="HIGHEST"}(i=t.RequestPriority||(t.RequestPriority={})),function(e){e[e.PENDING=0]="PENDING",e[e.SENDING=1]="SENDING",e[e.FAILED=2]="FAILED",e[e.DONE=3]="DONE"}(s=t.RequestStatus||(t.RequestStatus={}));var o=new WeakMap;var a=function(){function e(e){var t=void 0===e?{}:e,n=t.retries,i=void 0===n?0:n,s=t.concurrency,r=void 0===s?6:s;this.totalBytesDownloaded=0,this.queue=[],this.retries=i,this.concurrency=r}return e.prototype.get=function(e,t){return this.request("GET",e,t)},e.prototype.head=function(e,t){return this.request("HEAD",e,t)},e.prototype.options=function(e,t){return this.request("OPTIONS",e,t)},e.prototype.post=function(e,t){return this.request("POST",e,t)},e.prototype.put=function(e,t){return this.request("PUT",e,t)},e.prototype.patch=function(e,t){return this.request("PATCH",e,t)},e.prototype.delete=function(e,t){return this.request("DELETE",e,t)},e.prototype.request=function(e,t,n){var i=this,r=new l(e,t,n);if(null==n?void 0:n.signal){var a=function(){i.queue.includes(r)&&(r.status===s.SENDING&&r.abort(),i.dequeue(r),r.onFail(new DOMException("Aborted","AbortError")))};n.signal.addEventListener("abort",a),o.set(r,(function(){n.signal.removeEventListener("abort",a),o.delete(r)}))}return this.enqueue(r),r.promise},e.prototype.update=function(){for(var e;e=this.getNextPendingRequest();)this.sendRequest(e);for(;e=this.getNextOverflowingGet();)e.abort(),e.status=s.PENDING;this.updateTimeout=null},e.prototype.enqueue=function(e){var t=this,n=0;for(n=0;n<this.queue.length;n++){if(this.queue[n].priority<e.priority)break}this.queue.splice(n,0,e),this.updateTimeout||(this.updateTimeout=window.setTimeout((function(){t.update()}),1))},e.prototype.dequeue=function(e){var t;null===(t=o.get(e))||void 0===t||t();var n=this.queue.indexOf(e);if(-1===n)throw new Error("Can't dequeue request not in queue");this.queue.splice(n,1),this.update()},e.prototype.getNextPendingRequest=function(){for(var e=0;e<this.queue.length&&e<this.concurrency;e++){var t=this.queue[e];if(t.status===s.PENDING)return t}return null},e.prototype.getNextOverflowingGet=function(){for(var e=this.concurrency;e<this.queue.length;e++){var t=this.queue[e];if(t.status===s.SENDING&&t.priority!==i.HIGHEST&&"GET"===t.method)return t}return null},e.prototype.shouldRetryStatusCode=function(t){return!e.doNotRetryStatusCodes[t]},e.prototype.sendRequest=function(e){var t=this;e.status=s.SENDING,e.send().then((function(n){e.status=s.DONE,t.dequeue(e),e.contentLength&&e.contentLength>0&&(t.totalBytesDownloaded+=Number(e.contentLength)),e.onDone(n)})).catch((function(i){var r=null!==e.maxRetries?e.maxRetries:t.retries,o=e.sendAttempts<r;if("object"===n(i)){var a=i.status_code||0;o=o&&t.shouldRetryStatusCode(a)}o?(e.status=s.PENDING,t.update(),console.warn("Retried ".concat(e.url)),console.warn(i)):(e.status=s.FAILED,t.dequeue(e),console.warn("Failed ".concat(e.url)),e.onFail(i))}))},e.doNotRetryStatusCodes={400:!0,401:!0,403:!0,404:!0,405:!0,406:!0,410:!0,411:!0,414:!0,415:!0,421:!0,431:!0,451:!0},e}();t.RequestQueue=a;var l=function(){function e(e,t,n){void 0===n&&(n={});var r=this;this.sendAttempts=0,this.status=s.PENDING,this.contentLength=0,this.url=t,this.method=e,this.auth=n.auth||null,this.withCredentials=n.withCredentials||!1,this.priority=n.priority||i.MEDIUM,this.responseType=n.responseType||null,this.body=n.body||null,this.headers=n.headers||{},this.maxRetries=n.maxRetries||null,this.onProgress=n.onProgress,this.promise=new Promise((function(e,t){r.onDone=e,r.onFail=t}))}return e.prototype.send=function(){var e=this,t=this.xhr=function(e,t,n){var i;if("undefined"!=typeof XMLHttpRequest)(i=new XMLHttpRequest).withCredentials=n;else{if("undefined"==typeof XDomainRequest)throw new Error("No XMLHTTPRequest or XDomainRequest... are you trying to run me in node? :(");i=new XDomainRequest}return i.open(e,t,!0),i}(this.method,this.url,this.withCredentials);if(this.responseType)if("arraybuffer"===this.responseType||"text"===this.responseType||"json"===this.responseType||"blob"===this.responseType)t.responseType=this.responseType;else{if("image"!==this.responseType)throw new Error('reponseType can only be one of "arraybuffer", "text", "json", "blob", "image"');t.responseType="blob"}for(var i in"json"===this.responseType&&t.setRequestHeader("Accept","application/json"),this.auth&&"string"==typeof this.auth&&t.setRequestHeader("Authorization",this.auth),this.headers)t.setRequestHeader(i,this.headers[i]);return this.body&&"object"===n(this.body)&&(this.body instanceof FormData||(this.body=JSON.stringify(this.body),t.setRequestHeader("Content-Type","application/json"))),this.onProgress&&(t.onprogress=this.onProgress),new Promise((function(n,i){t.onreadystatechange=function(s){if(4===t.readyState){if(200===t.status||201===t.status||204===t.status)return e.parseResponse(e.xhr).then((function(e){n(e)}));if(0!==t.status)return e.parseResponse(e.xhr).then((function(e){i(r({status_code:t.status},e))})).catch((function(){i({status_code:t.status})}))}},t.onerror=function(e){i(e)},t.send(e.body),e.sendAttempts++}))},e.prototype.parseResponse=function(e){var t=this;return new Promise((function(i,s){try{var r=e.response;if(t.contentLength=e.getResponseHeader("Content-Length"),"json"===t.responseType&&"object"!==n(r))i(JSON.parse(e.responseText));else if(200!==e.status&&201!==e.status&&204!==e.status||"image"!==t.responseType)i(r);else{var o=URL.createObjectURL(r);(r=new Image).src=o,r.crossOrigin="Anonymous",r.onload=function(){URL.revokeObjectURL(o),i(r)}}}catch(e){s({error:"Payload was not valid JSON"})}}))},e.prototype.abort=function(){if(null===this.xhr)throw new Error("Cannot abort unsent Request");this.xhr.abort()},e}();t.Request=l},21924:(e,t,n)=>{"use strict";var i=n(10492),s=n(55559),r=s(i("String.prototype.indexOf"));e.exports=function(e,t){var n=i(e,!!t);return"function"==typeof n&&r(e,".prototype.")>-1?s(n):n}},55559:(e,t,n)=>{"use strict";var i=n(58612),s=n(10492),r=s("%Function.prototype.apply%"),o=s("%Function.prototype.call%"),a=s("%Reflect.apply%",!0)||i.call(o,r),l=s("%Object.getOwnPropertyDescriptor%",!0),c=s("%Object.defineProperty%",!0),d=s("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=a(i,o,arguments);if(l&&c){var n=l(t,"length");n.configurable&&c(t,"length",{value:1+d(0,e.length-(arguments.length-1))})}return t};var u=function(){return a(i,r,arguments)};c?c(e.exports,"apply",{value:u}):e.exports.apply=u},10492:(e,t,n)=>{"use strict";var i,s=SyntaxError,r=Function,o=TypeError,a=function(e){try{return Function('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new o},d=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,u=n(41405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},p=a("async function* () {}"),m=p?p.prototype:i,g=m?m.prototype:i,f="undefined"==typeof Uint8Array?i:h(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":u?h([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":a("async function () {}"),"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":g?h(g):i,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":a("function* () {}"),"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?h(h([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?h((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?h((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?h(""[Symbol.iterator]()):i,"%Symbol%":u?Symbol:i,"%SyntaxError%":s,"%ThrowTypeError%":d,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(58612),S=n(17642),E=y.call(Function.call,Array.prototype.concat),T=y.call(Function.apply,Array.prototype.splice),O=y.call(Function.call,String.prototype.replace),_=y.call(Function.call,String.prototype.slice),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,N=function(e){var t=_(e,0,1),n=_(e,-1);if("%"===t&&"%"!==n)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var i=[];return O(e,A,(function(e,t,n,s){i[i.length]=n?O(s,w,"$1"):t||e})),i},P=function(e,t){var n,i=e;if(S(b,i)&&(i="%"+(n=b[i])[0]+"%"),S(v,i)){var r=v[i];if(void 0===r&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:r}}throw new s("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n=N(e),i=n.length>0?n[0]:"",r=P("%"+i+"%",t),a=r.name,c=r.value,d=!1,u=r.alias;u&&(i=u[0],T(n,E([0,1],u)));for(var h=1,p=!0;h<n.length;h+=1){var m=n[h],g=_(m,0,1),f=_(m,-1);if(('"'===g||"'"===g||"`"===g||'"'===f||"'"===f||"`"===f)&&g!==f)throw new s("property names with quotes must have matching quotes");if("constructor"!==m&&p||(d=!0),S(v,a="%"+(i+="."+m)+"%"))c=v[a];else if(null!=c){if(!(m in c)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&h+1>=n.length){var b=l(c,m);c=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:c[m]}else p=S(c,m),c=c[m];p&&!d&&(v[a]=c)}}return c}},94184:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var o=s.apply(null,n);o&&e.push(o)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var a in n)i.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},5220:(e,t,n)=>{var i=n(8492);e.exports=i},1939:(e,t,n)=>{var i=n(5220);e.exports=i},19662:(e,t,n)=>{var i=n(17854),s=n(60614),r=n(66330),o=i.TypeError;e.exports=function(e){if(s(e))return e;throw o(r(e)+" is not a function")}},96077:(e,t,n)=>{var i=n(17854),s=n(60614),r=i.String,o=i.TypeError;e.exports=function(e){if("object"==typeof e||s(e))return e;throw o("Can't set "+r(e)+" as a prototype")}},51223:(e,t,n)=>{var i=n(5112),s=n(70030),r=n(3070),o=i("unscopables"),a=Array.prototype;null==a[o]&&r.f(a,o,{configurable:!0,value:s(null)}),e.exports=function(e){a[o][e]=!0}},25787:(e,t,n)=>{var i=n(17854),s=n(47976),r=i.TypeError;e.exports=function(e,t){if(s(t,e))return e;throw r("Incorrect invocation")}},19670:(e,t,n)=>{var i=n(17854),s=n(70111),r=i.String,o=i.TypeError;e.exports=function(e){if(s(e))return e;throw o(r(e)+" is not an object")}},41318:(e,t,n)=>{var i=n(45656),s=n(51400),r=n(26244),o=function(e){return function(t,n,o){var a,l=i(t),c=r(l),d=s(o,c);if(e&&n!=n){for(;c>d;)if((a=l[d++])!=a)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},41589:(e,t,n)=>{var i=n(17854),s=n(51400),r=n(26244),o=n(86135),a=i.Array,l=Math.max;e.exports=function(e,t,n){for(var i=r(e),c=s(t,i),d=s(void 0===n?i:n,i),u=a(l(d-c,0)),h=0;c<d;c++,h++)o(u,h,e[c]);return u.length=h,u}},94362:(e,t,n)=>{var i=n(41589),s=Math.floor,r=function(e,t){var n=e.length,l=s(n/2);return n<8?o(e,t):a(e,r(i(e,0,l),t),r(i(e,l),t),t)},o=function(e,t){for(var n,i,s=e.length,r=1;r<s;){for(i=r,n=e[r];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==r++&&(e[i]=n)}return e},a=function(e,t,n,i){for(var s=t.length,r=n.length,o=0,a=0;o<s||a<r;)e[o+a]=o<s&&a<r?i(t[o],n[a])<=0?t[o++]:n[a++]:o<s?t[o++]:n[a++];return e};e.exports=r},84326:(e,t,n)=>{var i=n(1702),s=i({}.toString),r=i("".slice);e.exports=function(e){return r(s(e),8,-1)}},70648:(e,t,n)=>{var i=n(17854),s=n(51694),r=n(60614),o=n(84326),a=n(5112)("toStringTag"),l=i.Object,c="Arguments"==o(function(){return arguments}());e.exports=s?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=l(e),a))?n:c?o(t):"Object"==(i=o(t))&&r(t.callee)?"Arguments":i}},99920:(e,t,n)=>{var i=n(92597),s=n(53887),r=n(31236),o=n(3070);e.exports=function(e,t,n){for(var a=s(t),l=o.f,c=r.f,d=0;d<a.length;d++){var u=a[d];i(e,u)||n&&i(n,u)||l(e,u,c(t,u))}}},49920:(e,t,n)=>{var i=n(47293);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},24994:(e,t,n)=>{"use strict";var i=n(13383).IteratorPrototype,s=n(70030),r=n(79114),o=n(58003),a=n(97497),l=function(){return this};e.exports=function(e,t,n,c){var d=t+" Iterator";return e.prototype=s(i,{next:r(+!c,n)}),o(e,d,!1,!0),a[d]=l,e}},68880:(e,t,n)=>{var i=n(19781),s=n(3070),r=n(79114);e.exports=i?function(e,t,n){return s.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86135:(e,t,n)=>{"use strict";var i=n(34948),s=n(3070),r=n(79114);e.exports=function(e,t,n){var o=i(t);o in e?s.f(e,o,r(0,n)):e[o]=n}},70654:(e,t,n)=>{"use strict";var i=n(82109),s=n(46916),r=n(31913),o=n(76530),a=n(60614),l=n(24994),c=n(79518),d=n(27674),u=n(58003),h=n(68880),p=n(31320),m=n(5112),g=n(97497),f=n(13383),v=o.PROPER,b=o.CONFIGURABLE,y=f.IteratorPrototype,S=f.BUGGY_SAFARI_ITERATORS,E=m("iterator"),T="keys",O="values",_="entries",A=function(){return this};e.exports=function(e,t,n,o,m,f,w){l(n,t,o);var N,P,I,k=function(e){if(e===m&&R)return R;if(!S&&e in M)return M[e];switch(e){case T:case O:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",L=!1,M=e.prototype,D=M[E]||M["@@iterator"]||m&&M[m],R=!S&&D||k(m),x="Array"==t&&M.entries||D;if(x&&(N=c(x.call(new e)))!==Object.prototype&&N.next&&(r||c(N)===y||(d?d(N,y):a(N[E])||p(N,E,A)),u(N,C,!0,!0),r&&(g[C]=A)),v&&m==O&&D&&D.name!==O&&(!r&&b?h(M,"name",O):(L=!0,R=function(){return s(D,this)})),m)if(P={values:k(O),keys:f?R:k(T),entries:k(_)},w)for(I in P)(S||L||!(I in M))&&p(M,I,P[I]);else i({target:t,proto:!0,forced:S||L},P);return r&&!w||M[E]===R||p(M,E,R,{name:m}),g[t]=R,P}},19781:(e,t,n)=>{var i=n(47293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:(e,t,n)=>{var i=n(17854),s=n(70111),r=i.document,o=s(r)&&s(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},48324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(e,t,n)=>{var i=n(80317)("span").classList,s=i&&i.constructor&&i.constructor.prototype;e.exports=s===Object.prototype?void 0:s},88113:(e,t,n)=>{var i=n(35005);e.exports=i("navigator","userAgent")||""},7392:(e,t,n)=>{var i,s,r=n(17854),o=n(88113),a=r.process,l=r.Deno,c=a&&a.versions||l&&l.version,d=c&&c.v8;d&&(s=(i=d.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(s=+i[1]),e.exports=s},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:(e,t,n)=>{var i=n(17854),s=n(31236).f,r=n(68880),o=n(31320),a=n(83505),l=n(99920),c=n(54705);e.exports=function(e,t){var n,d,u,h,p,m=e.target,g=e.global,f=e.stat;if(n=g?i:f?i[m]||a(m,{}):(i[m]||{}).prototype)for(d in t){if(h=t[d],u=e.noTargetGet?(p=s(n,d))&&p.value:n[d],!c(g?d:m+(f?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&r(h,"sham",!0),o(n,d,h,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},49974:(e,t,n)=>{var i=n(1702),s=n(19662),r=i(i.bind);e.exports=function(e,t){return s(e),void 0===t?e:r?r(e,t):function(){return e.apply(t,arguments)}}},46916:e=>{var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},76530:(e,t,n)=>{var i=n(19781),s=n(92597),r=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=s(r,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&o(r,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},1702:e=>{var t=Function.prototype,n=t.bind,i=t.call,s=n&&n.bind(i,i);e.exports=n?function(e){return e&&s(e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},35005:(e,t,n)=>{var i=n(17854),s=n(60614),r=function(e){return s(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e]):i[e]&&i[e][t]}},71246:(e,t,n)=>{var i=n(70648),s=n(58173),r=n(97497),o=n(5112)("iterator");e.exports=function(e){if(null!=e)return s(e,o)||s(e,"@@iterator")||r[i(e)]}},18554:(e,t,n)=>{var i=n(17854),s=n(46916),r=n(19662),o=n(19670),a=n(66330),l=n(71246),c=i.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(r(n))return o(s(n,e));throw c(a(e)+" is not iterable")}},58173:(e,t,n)=>{var i=n(19662);e.exports=function(e,t){var n=e[t];return null==n?void 0:i(n)}},17854:(e,t,n)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},92597:(e,t,n)=>{var i=n(1702),s=n(47908),r=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(s(e),t)}},3501:e=>{e.exports={}},60490:(e,t,n)=>{var i=n(35005);e.exports=i("document","documentElement")},64664:(e,t,n)=>{var i=n(19781),s=n(47293),r=n(80317);e.exports=!i&&!s((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},68361:(e,t,n)=>{var i=n(17854),s=n(1702),r=n(47293),o=n(84326),a=i.Object,l=s("".split);e.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?l(e,""):a(e)}:a},42788:(e,t,n)=>{var i=n(1702),s=n(60614),r=n(5465),o=i(Function.toString);s(r.inspectSource)||(r.inspectSource=function(e){return o(e)}),e.exports=r.inspectSource},29909:(e,t,n)=>{var i,s,r,o=n(68536),a=n(17854),l=n(1702),c=n(70111),d=n(68880),u=n(92597),h=n(5465),p=n(6200),m=n(3501),g="Object already initialized",f=a.TypeError,v=a.WeakMap;if(o||h.state){var b=h.state||(h.state=new v),y=l(b.get),S=l(b.has),E=l(b.set);i=function(e,t){if(S(b,e))throw new f(g);return t.facade=e,E(b,e,t),t},s=function(e){return y(b,e)||{}},r=function(e){return S(b,e)}}else{var T=p("state");m[T]=!0,i=function(e,t){if(u(e,T))throw new f(g);return t.facade=e,d(e,T,t),t},s=function(e){return u(e,T)?e[T]:{}},r=function(e){return u(e,T)}}e.exports={set:i,get:s,has:r,enforce:function(e){return r(e)?s(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=s(t)).type!==e)throw f("Incompatible receiver, "+e+" required");return n}}}},60614:e=>{e.exports=function(e){return"function"==typeof e}},54705:(e,t,n)=>{var i=n(47293),s=n(60614),r=/#|\.prototype\./,o=function(e,t){var n=l[a(e)];return n==d||n!=c&&(s(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",d=o.POLYFILL="P";e.exports=o},70111:(e,t,n)=>{var i=n(60614);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},31913:e=>{e.exports=!1},52190:(e,t,n)=>{var i=n(17854),s=n(35005),r=n(60614),o=n(47976),a=n(43307),l=i.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=s("Symbol");return r(t)&&o(t.prototype,l(e))}},13383:(e,t,n)=>{"use strict";var i,s,r,o=n(47293),a=n(60614),l=n(70030),c=n(79518),d=n(31320),u=n(5112),h=n(31913),p=u("iterator"),m=!1;[].keys&&("next"in(r=[].keys())?(s=c(c(r)))!==Object.prototype&&(i=s):m=!0),null==i||o((function(){var e={};return i[p].call(e)!==e}))?i={}:h&&(i=l(i)),a(i[p])||d(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},97497:e=>{e.exports={}},26244:(e,t,n)=>{var i=n(17466);e.exports=function(e){return i(e.length)}},30133:(e,t,n)=>{var i=n(7392),s=n(47293);e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},590:(e,t,n)=>{var i=n(47293),s=n(5112),r=n(31913),o=s("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),r&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},68536:(e,t,n)=>{var i=n(17854),s=n(60614),r=n(42788),o=i.WeakMap;e.exports=s(o)&&/native code/.test(r(o))},70030:(e,t,n)=>{var i,s=n(19670),r=n(36048),o=n(80748),a=n(3501),l=n(60490),c=n(80317),d=n(6200),u=d("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"</"+"script>"},m=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t;g="undefined"!=typeof document?document.domain&&i?m(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):m(i);for(var n=o.length;n--;)delete g.prototype[o[n]];return g()};a[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=s(e),n=new h,h.prototype=null,n[u]=e):n=g(),void 0===t?n:r.f(n,t)}},36048:(e,t,n)=>{var i=n(19781),s=n(3353),r=n(3070),o=n(19670),a=n(45656),l=n(81956);t.f=i&&!s?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=l(t),c=s.length,d=0;c>d;)r.f(e,n=s[d++],i[n]);return e}},3070:(e,t,n)=>{var i=n(17854),s=n(19781),r=n(64664),o=n(3353),a=n(19670),l=n(34948),c=i.TypeError,d=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",m="writable";t.f=s?o?function(e,t,n){if(a(e),t=l(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&m in n&&!n.writable){var i=u(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:p in n?n.configurable:i.configurable,enumerable:h in n?n.enumerable:i.enumerable,writable:!1})}return d(e,t,n)}:d:function(e,t,n){if(a(e),t=l(t),a(n),r)try{return d(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},31236:(e,t,n)=>{var i=n(19781),s=n(46916),r=n(55296),o=n(79114),a=n(45656),l=n(34948),c=n(92597),d=n(64664),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=a(e),t=l(t),d)try{return u(e,t)}catch(e){}if(c(e,t))return o(!s(r.f,e,t),e[t])}},8006:(e,t,n)=>{var i=n(16324),s=n(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},79518:(e,t,n)=>{var i=n(17854),s=n(92597),r=n(60614),o=n(47908),a=n(6200),l=n(49920),c=a("IE_PROTO"),d=i.Object,u=d.prototype;e.exports=l?d.getPrototypeOf:function(e){var t=o(e);if(s(t,c))return t[c];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof d?u:null}},47976:(e,t,n)=>{var i=n(1702);e.exports=i({}.isPrototypeOf)},16324:(e,t,n)=>{var i=n(1702),s=n(92597),r=n(45656),o=n(41318).indexOf,a=n(3501),l=i([].push);e.exports=function(e,t){var n,i=r(e),c=0,d=[];for(n in i)!s(a,n)&&s(i,n)&&l(d,n);for(;t.length>c;)s(i,n=t[c++])&&(~o(d,n)||l(d,n));return d}},81956:(e,t,n)=>{var i=n(16324),s=n(80748);e.exports=Object.keys||function(e){return i(e,s)}},55296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},27674:(e,t,n)=>{var i=n(1702),s=n(19670),r=n(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return s(n),r(i),t?e(n,i):n.__proto__=i,n}}():void 0)},92140:(e,t,n)=>{var i=n(17854),s=n(46916),r=n(60614),o=n(70111),a=i.TypeError;e.exports=function(e,t){var n,i;if("string"===t&&r(n=e.toString)&&!o(i=s(n,e)))return i;if(r(n=e.valueOf)&&!o(i=s(n,e)))return i;if("string"!==t&&r(n=e.toString)&&!o(i=s(n,e)))return i;throw a("Can't convert object to primitive value")}},53887:(e,t,n)=>{var i=n(35005),s=n(1702),r=n(8006),o=n(25181),a=n(19670),l=s([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(a(e)),n=o.f;return n?l(t,n(e)):t}},40857:(e,t,n)=>{var i=n(17854);e.exports=i},12248:(e,t,n)=>{var i=n(31320);e.exports=function(e,t,n){for(var s in t)i(e,s,t[s],n);return e}},31320:(e,t,n)=>{var i=n(17854),s=n(60614),r=n(92597),o=n(68880),a=n(83505),l=n(42788),c=n(29909),d=n(76530).CONFIGURABLE,u=c.get,h=c.enforce,p=String(String).split("String");(e.exports=function(e,t,n,l){var c,u=!!l&&!!l.unsafe,m=!!l&&!!l.enumerable,g=!!l&&!!l.noTargetGet,f=l&&void 0!==l.name?l.name:t;s(n)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!r(n,"name")||d&&n.name!==f)&&o(n,"name",f),(c=h(n)).source||(c.source=p.join("string"==typeof f?f:""))),e!==i?(u?!g&&e[t]&&(m=!0):delete e[t],m?e[t]=n:o(e,t,n)):m?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return s(this)&&u(this).source||l(this)}))},84488:(e,t,n)=>{var i=n(17854).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},83505:(e,t,n)=>{var i=n(17854),s=Object.defineProperty;e.exports=function(e,t){try{s(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},58003:(e,t,n)=>{var i=n(3070).f,s=n(92597),r=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!s(e,r)&&i(e,r,{configurable:!0,value:t})}},6200:(e,t,n)=>{var i=n(72309),s=n(69711),r=i("keys");e.exports=function(e){return r[e]||(r[e]=s(e))}},5465:(e,t,n)=>{var i=n(17854),s=n(83505),r="__core-js_shared__",o=i[r]||s(r,{});e.exports=o},72309:(e,t,n)=>{var i=n(31913),s=n(5465);(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.2",mode:i?"pure":"global",copyright:"© 2022 Denis Pushkarev (zloirock.ru)"})},51400:(e,t,n)=>{var i=n(19303),s=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?s(n+t,0):r(n,t)}},45656:(e,t,n)=>{var i=n(68361),s=n(84488);e.exports=function(e){return i(s(e))}},19303:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?n:t)(i)}},17466:(e,t,n)=>{var i=n(19303),s=Math.min;e.exports=function(e){return e>0?s(i(e),9007199254740991):0}},47908:(e,t,n)=>{var i=n(17854),s=n(84488),r=i.Object;e.exports=function(e){return r(s(e))}},57593:(e,t,n)=>{var i=n(17854),s=n(46916),r=n(70111),o=n(52190),a=n(58173),l=n(92140),c=n(5112),d=i.TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!r(e)||o(e))return e;var n,i=a(e,u);if(i){if(void 0===t&&(t="default"),n=s(i,e,t),!r(n)||o(n))return n;throw d("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},34948:(e,t,n)=>{var i=n(57593),s=n(52190);e.exports=function(e){var t=i(e,"string");return s(t)?t:t+""}},51694:(e,t,n)=>{var i={};i[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(i)},41340:(e,t,n)=>{var i=n(17854),s=n(70648),r=i.String;e.exports=function(e){if("Symbol"===s(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},66330:(e,t,n)=>{var i=n(17854).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},69711:(e,t,n)=>{var i=n(1702),s=0,r=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++s+r,36)}},43307:(e,t,n)=>{var i=n(30133);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,n)=>{var i=n(19781),s=n(47293);e.exports=i&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:(e,t,n)=>{var i=n(17854),s=n(72309),r=n(92597),o=n(69711),a=n(30133),l=n(43307),c=s("wks"),d=i.Symbol,u=d&&d.for,h=l?d:d&&d.withoutSetter||o;e.exports=function(e){if(!r(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&r(d,e)?c[e]=d[e]:c[e]=l&&u?u(t):h(t)}return c[e]}},66992:(e,t,n)=>{"use strict";var i=n(45656),s=n(51223),r=n(97497),o=n(29909),a=n(3070).f,l=n(70654),c=n(31913),d=n(19781),u="Array Iterator",h=o.set,p=o.getterFor(u);e.exports=l(Array,"Array",(function(e,t){h(this,{type:u,target:i(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");var m=r.Arguments=r.Array;if(s("keys"),s("values"),s("entries"),!c&&d&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},33948:(e,t,n)=>{var i=n(17854),s=n(48324),r=n(98509),o=n(66992),a=n(68880),l=n(5112),c=l("iterator"),d=l("toStringTag"),u=o.values,h=function(e,t){if(e){if(e[c]!==u)try{a(e,c,u)}catch(t){e[c]=u}if(e[d]||a(e,d,t),s[t])for(var n in o)if(e[n]!==o[n])try{a(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var p in s)h(i[p]&&i[p].prototype,p);h(r,"DOMTokenList")},41637:(e,t,n)=>{"use strict";n(66992);var i=n(82109),s=n(17854),r=n(35005),o=n(46916),a=n(1702),l=n(590),c=n(31320),d=n(12248),u=n(58003),h=n(24994),p=n(29909),m=n(25787),g=n(60614),f=n(92597),v=n(49974),b=n(70648),y=n(19670),S=n(70111),E=n(41340),T=n(70030),O=n(79114),_=n(18554),A=n(71246),w=n(5112),N=n(94362),P=w("iterator"),I="URLSearchParams",k="URLSearchParamsIterator",C=p.set,L=p.getterFor(I),M=p.getterFor(k),D=r("fetch"),R=r("Request"),x=r("Headers"),j=R&&R.prototype,U=x&&x.prototype,H=s.RegExp,F=s.TypeError,B=s.decodeURIComponent,V=s.encodeURIComponent,G=a("".charAt),W=a([].join),z=a([].push),K=a("".replace),Y=a([].shift),q=a([].splice),$=a("".split),Z=a("".slice),Q=/\+/g,X=Array(4),J=function(e){return X[e-1]||(X[e-1]=H("((?:%[\\da-f]{2}){"+e+"})","gi"))},ee=function(e){try{return B(e)}catch(t){return e}},te=function(e){var t=K(e,Q," "),n=4;try{return B(t)}catch(e){for(;n;)t=K(t,J(n--),ee);return t}},ne=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},se=function(e){return ie[e]},re=function(e){return K(V(e),ne,se)},oe=function(e,t){if(e<t)throw F("Not enough arguments")},ae=h((function(e,t){C(this,{type:k,iterator:_(L(e).entries),kind:t})}),"Iterator",(function(){var e=M(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),!0),le=function(e){this.entries=[],this.url=null,void 0!==e&&(S(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===G(e,0)?Z(e,1):e:E(e)))};le.prototype={type:I,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,s,r,a,l,c=A(e);if(c)for(n=(t=_(e,c)).next;!(i=o(n,t)).done;){if(r=(s=_(y(i.value))).next,(a=o(r,s)).done||(l=o(r,s)).done||!o(r,s).done)throw F("Expected sequence with length 2");z(this.entries,{key:E(a.value),value:E(l.value)})}else for(var d in e)f(e,d)&&z(this.entries,{key:d,value:E(e[d])})},parseQuery:function(e){if(e)for(var t,n,i=$(e,"&"),s=0;s<i.length;)(t=i[s++]).length&&(n=$(t,"="),z(this.entries,{key:te(Y(n)),value:te(W(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],z(n,re(e.key)+"="+re(e.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ce=function(){m(this,de);var e=arguments.length>0?arguments[0]:void 0;C(this,new le(e))},de=ce.prototype;if(d(de,{append:function(e,t){oe(arguments.length,2);var n=L(this);z(n.entries,{key:E(e),value:E(t)}),n.updateURL()},delete:function(e){oe(arguments.length,1);for(var t=L(this),n=t.entries,i=E(e),s=0;s<n.length;)n[s].key===i?q(n,s,1):s++;t.updateURL()},get:function(e){oe(arguments.length,1);for(var t=L(this).entries,n=E(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){oe(arguments.length,1);for(var t=L(this).entries,n=E(e),i=[],s=0;s<t.length;s++)t[s].key===n&&z(i,t[s].value);return i},has:function(e){oe(arguments.length,1);for(var t=L(this).entries,n=E(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){oe(arguments.length,1);for(var n,i=L(this),s=i.entries,r=!1,o=E(e),a=E(t),l=0;l<s.length;l++)(n=s[l]).key===o&&(r?q(s,l--,1):(r=!0,n.value=a));r||z(s,{key:o,value:a}),i.updateURL()},sort:function(){var e=L(this);N(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=L(this).entries,i=v(e,arguments.length>1?arguments[1]:void 0),s=0;s<n.length;)i((t=n[s++]).value,t.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),c(de,P,de.entries,{name:"entries"}),c(de,"toString",(function(){return L(this).serialize()}),{enumerable:!0}),u(ce,I),i({global:!0,forced:!l},{URLSearchParams:ce}),!l&&g(x)){var ue=a(U.has),he=a(U.set),pe=function(e){if(S(e)){var t,n=e.body;if(b(n)===I)return t=e.headers?new x(e.headers):new x,ue(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(e,{body:O(0,E(n)),headers:O(0,t)})}return e};if(g(D)&&i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return D(e,arguments.length>1?pe(arguments[1]):{})}}),g(R)){var me=function(e){return m(this,j),new R(e,arguments.length>1?pe(arguments[1]):{})};j.constructor=me,me.prototype=j,i({global:!0,forced:!0},{Request:me})}}e.exports={URLSearchParams:ce,getState:L}},8492:(e,t,n)=>{var i=n(98504);n(33948),e.exports=i},98504:(e,t,n)=>{n(41637);var i=n(40857);e.exports=i.URLSearchParams},4289:(e,t,n)=>{"use strict";var i=n(82215),s="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,o=Array.prototype.concat,a=Object.defineProperty,l=a&&function(){var e={};try{for(var t in a(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),c=function(e,t,n,i){var s;(!(t in e)||"function"==typeof(s=i)&&"[object Function]"===r.call(s)&&i())&&(l?a(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},d=function(e,t){var n=arguments.length>2?arguments[2]:{},r=i(t);s&&(r=o.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)c(e,r[a],t[r[a]],n[r[a]])};d.supportsDescriptors=!!l,e.exports=d},35035:e=>{"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,i="boolean"==typeof t.cycles&&t.cycles,s=t.cmp&&(n=t.cmp,function(e){return function(t,i){var s={key:t,value:e[t]},r={key:i,value:e[i]};return n(s,r)}}),r=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==r.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=r.push(t)-1,l=Object.keys(t).sort(s&&s(t));for(o="",n=0;n<l.length;n++){var c=l[n],d=e(t[c]);d&&(o&&(o+=","),o+=JSON.stringify(c)+":"+d)}return r.splice(a,1),"{"+o+"}"}}(e)}},94029:(e,t,n)=>{"use strict";var i=n(95320),s=Object.prototype.toString,r=Object.prototype.hasOwnProperty,o=function(e,t,n){for(var i=0,s=e.length;i<s;i++)r.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},a=function(e,t,n){for(var i=0,s=e.length;i<s;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},l=function(e,t,n){for(var i in e)r.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))};e.exports=function(e,t,n){if(!i(t))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=n),"[object Array]"===s.call(e)?o(e,t,r):"string"==typeof e?a(e,t,r):l(e,t,r)}},17648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,i=Object.prototype.toString,s="[object Function]";e.exports=function(e){var r=this;if("function"!=typeof r||i.call(r)!==s)throw new TypeError(t+r);for(var o,a=n.call(arguments,1),l=function(){if(this instanceof o){var t=r.apply(this,a.concat(n.call(arguments)));return Object(t)===t?t:this}return r.apply(e,a.concat(n.call(arguments)))},c=Math.max(0,r.length-a.length),d=[],u=0;u<c;u++)d.push("$"+u);if(o=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(l),r.prototype){var h=function(){};h.prototype=r.prototype,o.prototype=new h,h.prototype=null}return o}},58612:(e,t,n)=>{"use strict";var i=n(17648);e.exports=Function.prototype.bind||i},50972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prototype.toJSON;"function"==typeof t||(0,i.default)(0),e.prototype.inspect=t,s.default&&(e.prototype[s.default]=t)};var i=r(n(7706)),s=r(n(79466));function r(e){return e&&e.__esModule?e:{default:e}}},8002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o(e,[])};var i,s=(i=n(79466))&&i.__esModule?i:{default:i};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){switch(r(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),i=function(e){var t=e[String(s.default)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==i){var r=i.call(e);if(r!==e)return"string"==typeof r?r:o(r,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),i=e.length-n,s=[],r=0;r<n;++r)s.push(o(e[r],t));1===i?s.push("... 1 more item"):i>1&&s.push("... ".concat(i," more items"));return"["+s.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+o(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},6589:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(97986);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return o(e,[])}function o(e,t){switch(s(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),s=function(e){var t=e[String(i.Z)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==s){var r=s.call(e);if(r!==e)return"string"==typeof r?r:o(r,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),i=e.length-n,s=[],r=0;r<n;++r)s.push(o(e[r],t));1===i?s.push("... 1 more item"):i>1&&s.push("... ".concat(i," more items"));return"["+s.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+o(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},7706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}},79466:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.default=n},97986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0},91807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=function(e){return null!=e&&"string"==typeof e.kind},t.Token=t.Location=void 0;var i,s=(i=n(50972))&&i.__esModule?i:{default:i};var r=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();t.Location=r,(0,s.default)(r);var o=function(){function e(e,t,n,i,s,r,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=r,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();t.Token=o,(0,s.default)(o)},83059:(e,t,n)=>{"use strict";n.d(t,{Ye:()=>r,WU:()=>o,UG:()=>a});var i=n(97986);function s(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,i.Z&&(e.prototype[i.Z]=t)}var r=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();s(r);var o=function(){function e(e,t,n,i,s,r,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=r,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function a(e){return null!=e&&"string"==typeof e.kind}s(o)},7420:(e,t,n)=>{"use strict";function i(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,i=!0,s=0,r=null,o=0;o<e.length;++o)switch(e.charCodeAt(o)){case 13:10===e.charCodeAt(o+1)&&++o;case 10:n=!1,i=!0,s=0;break;case 9:case 32:++s;break;default:i&&!n&&(null===r||s<r)&&(r=s),i=!1}return null!==(t=r)&&void 0!==t?t:0}(e);if(0!==n)for(var i=1;i<t.length;i++)t[i]=t[i].slice(n);for(var r=0;r<t.length&&s(t[r]);)++r;for(var o=t.length;o>r&&s(t[o-1]);)--o;return t.slice(r,o).join("\n")}function s(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===e.indexOf("\n"),s=" "===e[0]||"\t"===e[0],r='"'===e[e.length-1],o="\\"===e[e.length-1],a=!i||r||o||n,l="";return!a||i&&s||(l+="\n"+t),l+=t?e.replace(/\n/g,"\n"+t):e,a&&(l+="\n"),'"""'+l.replace(/"""/g,'\\"""')+'"""'}n.d(t,{W7:()=>i,LZ:()=>r})},90778:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var i=n(27636),s=n(7420);function r(e){return(0,i.Vn)(e,{leave:o})}var o={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return l(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,i=d("(",l(e.variableDefinitions,", "),")"),s=l(e.directives," "),r=e.selectionSet;return n||s||i||"query"!==t?l([t,l([n,i]),s,r]," "):r},VariableDefinition:function(e){var t=e.variable,n=e.type,i=e.defaultValue,s=e.directives;return t+": "+n+d(" = ",i)+d(" ",l(s," "))},SelectionSet:function(e){return c(e.selections)},Field:function(e){var t=e.alias,n=e.name,i=e.arguments,s=e.directives,r=e.selectionSet,o=d("",t,": ")+n,a=o+d("(",l(i,", "),")");return a.length>80&&(a=o+d("(\n",u(l(i,"\n")),"\n)")),l([a,l(s," "),r]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+d(" ",l(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,i=e.selectionSet;return l(["...",d("on ",t),l(n," "),i]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,i=e.variableDefinitions,s=e.directives,r=e.selectionSet;return"fragment ".concat(t).concat(d("(",l(i,", "),")")," ")+"on ".concat(n," ").concat(d("",l(s," ")," "))+r},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?(0,s.LZ)(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+l(e.values,", ")+"]"},ObjectValue:function(e){return"{"+l(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+d("(",l(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:a((function(e){var t=e.directives,n=e.operationTypes;return l(["schema",l(t," "),c(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:a((function(e){return l(["scalar",e.name,l(e.directives," ")]," ")})),ObjectTypeDefinition:a((function(e){var t=e.name,n=e.interfaces,i=e.directives,s=e.fields;return l(["type",t,d("implements ",l(n," & ")),l(i," "),c(s)]," ")})),FieldDefinition:a((function(e){var t=e.name,n=e.arguments,i=e.type,s=e.directives;return t+(p(n)?d("(\n",u(l(n,"\n")),"\n)"):d("(",l(n,", "),")"))+": "+i+d(" ",l(s," "))})),InputValueDefinition:a((function(e){var t=e.name,n=e.type,i=e.defaultValue,s=e.directives;return l([t+": "+n,d("= ",i),l(s," ")]," ")})),InterfaceTypeDefinition:a((function(e){var t=e.name,n=e.interfaces,i=e.directives,s=e.fields;return l(["interface",t,d("implements ",l(n," & ")),l(i," "),c(s)]," ")})),UnionTypeDefinition:a((function(e){var t=e.name,n=e.directives,i=e.types;return l(["union",t,l(n," "),i&&0!==i.length?"= "+l(i," | "):""]," ")})),EnumTypeDefinition:a((function(e){var t=e.name,n=e.directives,i=e.values;return l(["enum",t,l(n," "),c(i)]," ")})),EnumValueDefinition:a((function(e){return l([e.name,l(e.directives," ")]," ")})),InputObjectTypeDefinition:a((function(e){var t=e.name,n=e.directives,i=e.fields;return l(["input",t,l(n," "),c(i)]," ")})),DirectiveDefinition:a((function(e){var t=e.name,n=e.arguments,i=e.repeatable,s=e.locations;return"directive @"+t+(p(n)?d("(\n",u(l(n,"\n")),"\n)"):d("(",l(n,", "),")"))+(i?" repeatable":"")+" on "+l(s," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return l(["extend schema",l(t," "),c(n)]," ")},ScalarTypeExtension:function(e){return l(["extend scalar",e.name,l(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,s=e.fields;return l(["extend type",t,d("implements ",l(n," & ")),l(i," "),c(s)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,s=e.fields;return l(["extend interface",t,d("implements ",l(n," & ")),l(i," "),c(s)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,i=e.types;return l(["extend union",t,l(n," "),i&&0!==i.length?"= "+l(i," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,i=e.values;return l(["extend enum",t,l(n," "),c(i)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,i=e.fields;return l(["extend input",t,l(n," "),c(i)]," ")}};function a(e){return function(t){return l([t.description,e(t)],"\n")}}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function c(e){return d("{\n",u(l(e,"\n")),"\n}")}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function u(e){return d("  ",e.replace(/\n/g,"\n  "))}function h(e){return-1!==e.indexOf("\n")}function p(e){return null!=e&&e.some(h)}},80285:(e,t,n)=>{"use strict";t.Vn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=void 0,c=Array.isArray(e),d=[e],u=-1,h=[],p=void 0,m=void 0,g=void 0,f=[],v=[],b=e;do{var y=++u===d.length,S=y&&0!==h.length;if(y){if(m=0===v.length?void 0:f[f.length-1],p=g,g=v.pop(),S){if(c)p=p.slice();else{for(var E={},T=0,O=Object.keys(p);T<O.length;T++){var _=O[T];E[_]=p[_]}p=E}for(var A=0,w=0;w<h.length;w++){var N=h[w][0],P=h[w][1];c&&(N-=A),c&&null===P?(p.splice(N,1),A++):p[N]=P}}u=i.index,d=i.keys,h=i.edits,c=i.inArray,i=i.prev}else{if(m=g?c?u:d[u]:void 0,null==(p=g?g[m]:b))continue;g&&f.push(m)}var I,k=void 0;if(!Array.isArray(p)){if(!(0,r.isNode)(p))throw new Error("Invalid AST Node: ".concat((0,s.default)(p),"."));var C=l(t,p.kind,y);if(C){if((k=C.call(t,p,m,g,f,v))===a)break;if(!1===k){if(!y){f.pop();continue}}else if(void 0!==k&&(h.push([m,k]),!y)){if(!(0,r.isNode)(k)){f.pop();continue}p=k}}}if(void 0===k&&S&&h.push([m,p]),y)f.pop();else i={inArray:c,index:u,keys:d,edits:h,prev:i},c=Array.isArray(p),d=c?p:null!==(I=n[p.kind])&&void 0!==I?I:[],u=-1,h=[],g&&v.push(g),g=p}while(void 0!==i);0!==h.length&&(b=h[h.length-1][1]);return b};var i,s=(i=n(8002))&&i.__esModule?i:{default:i},r=n(91807);var o={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};var a=Object.freeze({});function l(e,t,n){var i=e[t];if(i){if(!n&&"function"==typeof i)return i;var s=n?i.leave:i.enter;if("function"==typeof s)return s}else{var r=n?e.leave:e.enter;if(r){if("function"==typeof r)return r;var o=r[t];if("function"==typeof o)return o}}}},27636:(e,t,n)=>{"use strict";n.d(t,{$_:()=>o,Vn:()=>a});var i=n(6589),s=n(83059),r={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o=Object.freeze({});function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=void 0,c=Array.isArray(e),d=[e],u=-1,h=[],p=void 0,m=void 0,g=void 0,f=[],v=[],b=e;do{var y=++u===d.length,S=y&&0!==h.length;if(y){if(m=0===v.length?void 0:f[f.length-1],p=g,g=v.pop(),S){if(c)p=p.slice();else{for(var E={},T=0,O=Object.keys(p);T<O.length;T++){var _=O[T];E[_]=p[_]}p=E}for(var A=0,w=0;w<h.length;w++){var N=h[w][0],P=h[w][1];c&&(N-=A),c&&null===P?(p.splice(N,1),A++):p[N]=P}}u=a.index,d=a.keys,h=a.edits,c=a.inArray,a=a.prev}else{if(m=g?c?u:d[u]:void 0,null==(p=g?g[m]:b))continue;g&&f.push(m)}var I,k=void 0;if(!Array.isArray(p)){if(!(0,s.UG)(p))throw new Error("Invalid AST Node: ".concat((0,i.Z)(p),"."));var C=l(t,p.kind,y);if(C){if((k=C.call(t,p,m,g,f,v))===o)break;if(!1===k){if(!y){f.pop();continue}}else if(void 0!==k&&(h.push([m,k]),!y)){if(!(0,s.UG)(k)){f.pop();continue}p=k}}}if(void 0===k&&S&&h.push([m,p]),y)f.pop();else a={inArray:c,index:u,keys:d,edits:h,prev:a},d=(c=Array.isArray(p))?p:null!==(I=n[p.kind])&&void 0!==I?I:[],u=-1,h=[],g&&v.push(g),g=p}while(void 0!==a);return 0!==h.length&&(b=h[h.length-1][1]),b}function l(e,t,n){var i=e[t];if(i){if(!n&&"function"==typeof i)return i;var s=n?i.leave:i.enter;if("function"==typeof s)return s}else{var r=n?e.leave:e.enter;if(r){if("function"==typeof r)return r;var o=r[t];if("function"==typeof o)return o}}}},41405:(e,t,n)=>{"use strict";var i=n.g.Symbol,s=n(55419);e.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&s())))}},55419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},17642:(e,t,n)=>{"use strict";var i=n(58612);e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},95320:e=>{"use strict";var t,n,i=Function.prototype.toString,s="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof s&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},s((function(){throw 42}),null,t)}catch(e){e!==n&&(s=null)}else s=null;var r=/^\s*class\b/,o=function(e){try{var t=i.call(e);return r.test(t)}catch(e){return!1}},a=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=s?function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{s(e,null,t)}catch(e){if(e!==n)return!1}return!o(e)}:function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return!o(e)&&(i.call(e),!0)}catch(e){return!1}}(e);if(o(e))return!1;var t=a.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},29469:(e,t,n)=>{"use strict";n.r(t)},54078:(e,t,n)=>{"use strict";var i=n(94029),s=n(42473),r=n(17642),o=n(46057),a=function(e){s(!1,e)},l=String.prototype.replace,c=String.prototype.split,d="||||",u=function(e){var t=e%100,n=t%10;return 11!==t&&1===n?0:2<=n&&n<=4&&!(t>=12&&t<=14)?1:2},h={pluralTypes:{arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:u,chinese:function(){return 0},croatian:u,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:u,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function p(e,t){var n,s,r=(n=e.pluralTypeToLanguages,s={},i(n,(function(e,t){i(e,(function(e){s[e]=t}))})),s);return r[t]||r[c.call(t,/-/,1)[0]]||r.en}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var g=/%\{(.*?)\}/g;function f(e,t,n,i,s){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var a=e,u=i||g,m=s||h,f="number"==typeof t?{smart_count:t}:t;if(null!=f.smart_count&&a){var v=c.call(a,d);a=o(v[function(e,t,n){return e.pluralTypes[p(e,t)](n)}(m,n||"en",f.smart_count)]||v[0])}return a=l.call(a,u,(function(e,t){return r(f,t)&&null!=f[t]?f[t]:e}))}function v(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?f:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||a,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if(t===d||n===d)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(m(t)+"(.*?)"+m(n),"g")}(t.interpolation),this.pluralRules=t.pluralRules||h}v.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},v.prototype.extend=function(e,t){i(e,(function(e,n){var i=t?t+"."+n:n;"object"==typeof e?this.extend(e,i):this.phrases[i]=e}),this)},v.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:i(e,(function(e,n){var i=t?t+"."+n:n;"object"==typeof e?this.unset(e,i):delete this.phrases[i]}),this)},v.prototype.clear=function(){this.phrases={}},v.prototype.replace=function(e){this.clear(),this.extend(e)},v.prototype.t=function(e,t){var n,i,s=null==t?{}:t;if("string"==typeof this.phrases[e])n=this.phrases[e];else if("string"==typeof s._)n=s._;else if(this.onMissingKey){i=(0,this.onMissingKey)(e,s,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+e+'"'),i=e;return"string"==typeof n&&(i=f(n,s,this.currentLocale,this.tokenRegex,this.pluralRules)),i},v.prototype.has=function(e){return r(this.phrases,e)},v.transformPhrase=function(e,t,n){return f(e,t,n)},e.exports=v},18987:(e,t,n)=>{"use strict";var i;if(!Object.keys){var s=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=n(21414),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&s.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{u(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===r.call(e),i=o(e),a=t&&"[object String]"===r.call(e),h=[];if(!t&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var m=c&&n;if(a&&e.length>0&&!s.call(e,0))for(var g=0;g<e.length;++g)h.push(String(g));if(i&&e.length>0)for(var f=0;f<e.length;++f)h.push(String(f));else for(var v in e)m&&"prototype"===v||!s.call(e,v)||h.push(String(v));if(l)for(var b=function(e){if("undefined"==typeof window||!p)return u(e);try{return u(e)}catch(e){return!1}}(e),y=0;y<d.length;++y)b&&"constructor"===d[y]||!s.call(e,d[y])||h.push(d[y]);return h}}e.exports=i},82215:(e,t,n)=>{"use strict";var i=Array.prototype.slice,s=n(21414),r=Object.keys,o=r?function(e){return r(e)}:n(18987),a=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return s(e)?a(i.call(e)):a(e)}):Object.keys=o;return Object.keys||o},e.exports=o},21414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),i}},17141:(e,t,n)=>{var i;!function(s,r){var o={};function a(e){return function(){var t={method:e},n=Array.prototype.slice.call(arguments);/^get/.test(e)?(o.assert(n.length>0,"Get methods require a callback."),n.unshift(t)):(/^set/.test(e)&&(o.assert(0!==n.length,"Set methods require a value."),t.value=n[0]),n=[t]),this.send.apply(this,n)}}o.DEBUG=!1,o.VERSION="0.0.11",o.CONTEXT="player.js",o.POST_MESSAGE=!!s.postMessage,o.origin=function(e){return"//"===e.substr(0,2)&&(e=s.location.protocol+e),e.split("/").slice(0,3).join("/")},o.addEvent=function(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)},o.log=function(){o.log.history=o.log.history||[],o.log.history.push(arguments),s.console&&o.DEBUG&&s.console.log(Array.prototype.slice.call(arguments))},o.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},o.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},o.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.isNone=function(e){return null==e},o.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.indexOf=function(e,t){if(null==e)return-1;var n=0,i=e.length;if(Array.prototype.IndexOf&&e.indexOf===Array.prototype.IndexOf)return e.indexOf(t);for(;n<i;n++)if(e[n]===t)return n;return-1},o.assert=function(e,t){if(!e)throw t||"Player.js Assert Failed"},o.Keeper=function(){this.init()},o.Keeper.prototype.init=function(){this.data={}},o.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},o.Keeper.prototype.has=function(e,t){if(!this.data.hasOwnProperty(e))return!1;if(o.isNone(t))return!0;for(var n=this.data[e],i=0;i<n.length;i++)if(n[i].id===t)return!0;return!1},o.Keeper.prototype.add=function(e,t,n,i,s){var r={id:e,event:t,cb:n,ctx:i,one:s};this.has(t)?this.data[t].push(r):this.data[t]=[r]},o.Keeper.prototype.execute=function(e,t,n,i){if(!this.has(e,t))return!1;for(var s=[],r=[],a=0;a<this.data[e].length;a++){var l=this.data[e][a];o.isNone(t)||!o.isNone(t)&&l.id===t?(r.push({cb:l.cb,ctx:l.ctx?l.ctx:i,data:n}),!1===l.one&&s.push(l)):s.push(l)}0===s.length?delete this.data[e]:this.data[e]=s;for(var c=0;c<r.length;c++){var d=r[c];d.cb.call(d.ctx,d.data)}},o.Keeper.prototype.on=function(e,t,n,i){this.add(e,t,n,i,!1)},o.Keeper.prototype.one=function(e,t,n,i){this.add(e,t,n,i,!0)},o.Keeper.prototype.off=function(e,t){var n=[];if(!this.data.hasOwnProperty(e))return n;for(var i=[],s=0;s<this.data[e].length;s++){var r=this.data[e][s];o.isNone(t)||r.cb===t?o.isNone(r.id)||n.push(r.id):i.push(r)}return 0===i.length?delete this.data[e]:this.data[e]=i,n},o.Player=function(e,t){if(!(this instanceof o.Player))return new o.Player(e,t);this.init(e,t)},o.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},o.EVENTS.all=function(){var e=[];for(var t in o.EVENTS)o.has(o.EVENTS,t)&&o.isString(o.EVENTS[t])&&e.push(o.EVENTS[t]);return e},o.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},o.METHODS.all=function(){var e=[];for(var t in o.METHODS)o.has(o.METHODS,t)&&o.isString(o.METHODS[t])&&e.push(o.METHODS[t]);return e},o.READIED=[],o.Player.prototype.init=function(e,t){var n=this;o.isString(e)&&(e=r.getElementById(e)),this.elem=e,o.assert("IFRAME"===e.nodeName,'playerjs.Player constructor requires an Iframe, got "'+e.nodeName+'"'),o.assert(e.src,"playerjs.Player constructor requires a Iframe with a 'src' attribute."),this.origin=o.origin(e.src),this.keeper=new o.Keeper,this.isReady=!1,this.queue=[],this.events=o.EVENTS.all(),this.methods=o.METHODS.all(),o.POST_MESSAGE?o.addEvent(s,"message",(function(e){n.receive(e)})):o.log("Post Message is not Available."),o.indexOf(o.READIED,e.src)>-1?n.loaded=!0:this.elem.onload=function(){n.loaded=!0}},o.Player.prototype.send=function(e,t,n){if(e.context=o.CONTEXT,e.version=o.VERSION,t){var i=this.keeper.getUUID();e.listener=i,this.keeper.one(i,e.method,t,n)}return this.isReady||"ready"===e.value?(o.log("Player.send",e,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(e),this.origin),!0):(o.log("Player.queue",e),this.queue.push(e),!1)},o.Player.prototype.receive=function(e){if(o.log("Player.receive",e),e.origin!==this.origin)return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}if(t.context!==o.CONTEXT)return!1;"ready"===t.event&&t.value&&t.value.src===this.elem.src&&this.ready(t),this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this)},o.Player.prototype.ready=function(e){if(!0===this.isReady)return!1;e.value.events&&(this.events=e.value.events),e.value.methods&&(this.methods=e.value.methods),this.isReady=!0,this.loaded=!0;for(var t=0;t<this.queue.length;t++){var n=this.queue[t];o.log("Player.dequeue",n),"ready"===e.event&&this.keeper.execute(n.event,n.listener,!0,this),this.send(n)}this.queue=[]},o.Player.prototype.on=function(e,t,n){var i=this.keeper.getUUID();return"ready"===e?this.keeper.one(i,e,t,n):this.keeper.on(i,e,t,n),this.send({method:"addEventListener",value:e,listener:i}),!0},o.Player.prototype.off=function(e,t){var n=this.keeper.off(e,t);if(o.log("Player.off",n),n.length>0)for(var i in n)return this.send({method:"removeEventListener",value:e,listener:n[i]}),!0;return!1},o.Player.prototype.supports=function(e,t){o.assert(o.indexOf(["method","event"],e)>-1,'evtOrMethod needs to be either "event" or "method" got '+e),t=o.isArray(t)?t:[t];for(var n="event"===e?this.events:this.methods,i=0;i<t.length;i++)if(-1===o.indexOf(n,t[i]))return!1;return!0};for(var l=0,c=o.METHODS.all().length;l<c;l++){var d=o.METHODS.all()[l];o.Player.prototype.hasOwnProperty(d)||(o.Player.prototype[d]=a(d))}o.addEvent(s,"message",(function(e){var t;try{t=JSON.parse(e.data)}catch(e){return!1}if(t.context!==o.CONTEXT)return!1;"ready"===t.event&&t.value&&t.value.src&&o.READIED.push(t.value.src)})),o.Receiver=function(e,t){this.init(e,t)},o.Receiver.prototype.init=function(e,t){var n=this;this.isReady=!1,this.origin=o.origin(r.referrer),this.methods={},this.supported={events:e||o.EVENTS.all(),methods:t||o.METHODS.all()},this.eventListeners={},this.reject=!(s.self!==s.top&&o.POST_MESSAGE),this.reject||o.addEvent(s,"message",(function(e){n.receive(e)}))},o.Receiver.prototype.receive=function(e){if(e.origin!==this.origin)return!1;var t={};if(o.isObject(e.data))t=e.data;else try{t=s.JSON.parse(e.data)}catch(e){o.log("JSON Parse Error",e)}if(o.log("Receiver.receive",e,t),!t.method)return!1;if(t.context!==o.CONTEXT)return!1;if(-1===o.indexOf(o.METHODS.all(),t.method))return this.emit("error",{code:2,msg:'Invalid Method "'+t.method+'"'}),!1;var n=o.isNone(t.listener)?null:t.listener;if("addEventListener"===t.method)this.eventListeners.hasOwnProperty(t.value)?-1===o.indexOf(this.eventListeners[t.value],n)&&this.eventListeners[t.value].push(n):this.eventListeners[t.value]=[n],"ready"===t.value&&this.isReady&&this.ready();else if("removeEventListener"===t.method){if(this.eventListeners.hasOwnProperty(t.value)){var i=o.indexOf(this.eventListeners[t.value],n);i>-1&&this.eventListeners[t.value].splice(i,1),0===this.eventListeners[t.value].length&&delete this.eventListeners[t.value]}}else this.get(t.method,t.value,n)},o.Receiver.prototype.get=function(e,t,n){var i=this;if(!this.methods.hasOwnProperty(e))return this.emit("error",{code:3,msg:'Method Not Supported"'+e+'"'}),!1;var s=this.methods[e];if("get"===e.substr(0,3)){s.call(this,(function(t){i.send(e,t,n)}))}else s.call(this,t)},o.Receiver.prototype.on=function(e,t){this.methods[e]=t},o.Receiver.prototype.send=function(e,t,n){if(o.log("Receiver.send",e,t,n),this.reject)return o.log("Receiver.send.reject",e,t,n),!1;var i={context:o.CONTEXT,version:o.VERSION,event:e};o.isNone(t)||(i.value=t),o.isNone(n)||(i.listener=n);var r=JSON.stringify(i);s.parent.postMessage(r,""===this.origin?"*":this.origin)},o.Receiver.prototype.emit=function(e,t){if(!this.eventListeners.hasOwnProperty(e))return!1;o.log("Instance.emit",e,t,this.eventListeners[e]);for(var n=0;n<this.eventListeners[e].length;n++){var i=this.eventListeners[e][n];this.send(e,t,i)}return!0},o.Receiver.prototype.ready=function(){o.log("Receiver.ready"),this.isReady=!0;var e={src:s.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)},o.HTML5Adapter=function(e){if(!(this instanceof o.HTML5Adapter))return new o.HTML5Adapter(e);this.init(e)},o.HTML5Adapter.prototype.init=function(e){o.assert(e,"playerjs.HTML5Adapter requires a video element");var t=this.receiver=new o.Receiver;e.addEventListener("playing",(function(){t.emit("play")})),e.addEventListener("pause",(function(){t.emit("pause")})),e.addEventListener("ended",(function(){t.emit("ended")})),e.addEventListener("timeupdate",(function(){t.emit("timeupdate",{seconds:e.currentTime,duration:e.duration})})),e.addEventListener("progress",(function(){t.emit("buffered",{percent:e.buffered.length})})),t.on("play",(function(){e.play()})),t.on("pause",(function(){e.pause()})),t.on("getPaused",(function(t){t(e.paused)})),t.on("getCurrentTime",(function(t){t(e.currentTime)})),t.on("setCurrentTime",(function(t){e.currentTime=t})),t.on("getDuration",(function(t){t(e.duration)})),t.on("getVolume",(function(t){t(100*e.volume)})),t.on("setVolume",(function(t){e.volume=t/100})),t.on("mute",(function(){e.muted=!0})),t.on("unmute",(function(){e.muted=!1})),t.on("getMuted",(function(t){t(e.muted)})),t.on("getLoop",(function(t){t(e.loop)})),t.on("setLoop",(function(t){e.loop=t}))},o.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},o.JWPlayerAdapter=function(e){if(!(this instanceof o.JWPlayerAdapter))return new o.JWPlayerAdapter(e);this.init(e)},o.JWPlayerAdapter.prototype.init=function(e){o.assert(e,"playerjs.JWPlayerAdapter requires a player object");var t=this.receiver=new o.Receiver;this.looped=!1,e.on("pause",(function(){t.emit("pause")})),e.on("play",(function(){t.emit("play")})),e.on("time",(function(e){var n=e.position,i=e.duration;if(!n||!i)return!1;var s={seconds:n,duration:i};t.emit("timeupdate",s)}));var n=this;e.on("complete",(function(){!0===n.looped?e.seek(0):t.emit("ended")})),e.on("error",(function(){t.emit("error")})),t.on("play",(function(){e.play(!0)})),t.on("pause",(function(){e.pause(!0)})),t.on("getPaused",(function(t){t(e.getState().toLowerCase()!=="PLAYING".toLowerCase())})),t.on("getCurrentTime",(function(t){t(e.getPosition())})),t.on("setCurrentTime",(function(t){e.seek(t)})),t.on("getDuration",(function(t){t(e.getDuration())})),t.on("getVolume",(function(t){t(e.getVolume())})),t.on("setVolume",(function(t){e.setVolume(t)})),t.on("mute",(function(){e.setMute(!0)})),t.on("unmute",(function(){e.setMute(!1)})),t.on("getMuted",(function(t){t(!0===e.getMute())})),t.on("getLoop",(function(e){e(this.looped)}),this),t.on("setLoop",(function(e){this.looped=e}),this)},o.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},o.MockAdapter=function(){if(!(this instanceof o.MockAdapter))return new o.MockAdapter;this.init()},o.MockAdapter.prototype.init=function(){var e={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){e.interval=setInterval((function(){e.currentTime+=.25,e.timeupdate({seconds:e.currentTime,duration:e.duration})}),250),e.playing=!0},pause:function(){clearInterval(e.interval),e.playing=!1}},t=this.receiver=new o.Receiver;t.on("play",(function(){var t=this;e.play(),this.emit("play"),e.timeupdate=function(e){t.emit("timeupdate",e)}})),t.on("pause",(function(){e.pause(),this.emit("pause")})),t.on("getPaused",(function(t){t(!e.playing)})),t.on("getCurrentTime",(function(t){t(e.currentTime)})),t.on("setCurrentTime",(function(t){e.currentTime=t})),t.on("getDuration",(function(t){t(e.duration)})),t.on("getVolume",(function(t){t(e.volume)})),t.on("setVolume",(function(t){e.volume=t})),t.on("mute",(function(){e.mute=!0})),t.on("unmute",(function(){e.mute=!1})),t.on("getMuted",(function(t){t(e.mute)})),t.on("getLoop",(function(t){t(e.loop)})),t.on("setLoop",(function(t){e.loop=t}))},o.MockAdapter.prototype.ready=function(){this.receiver.ready()},o.VideoJSAdapter=function(e){if(!(this instanceof o.VideoJSAdapter))return new o.VideoJSAdapter(e);this.init(e)},o.VideoJSAdapter.prototype.init=function(e){o.assert(e,"playerjs.VideoJSReceiver requires a player object");var t=this.receiver=new o.Receiver;e.on("pause",(function(){t.emit("pause")})),e.on("play",(function(){t.emit("play")})),e.on("timeupdate",(function(n){var i=e.currentTime(),s=e.duration();if(!i||!s)return!1;var r={seconds:i,duration:s};t.emit("timeupdate",r)})),e.on("ended",(function(){t.emit("ended")})),e.on("error",(function(){t.emit("error")})),t.on("play",(function(){e.play()})),t.on("pause",(function(){e.pause()})),t.on("getPaused",(function(t){t(e.paused())})),t.on("getCurrentTime",(function(t){t(e.currentTime())})),t.on("setCurrentTime",(function(t){e.currentTime(t)})),t.on("getDuration",(function(t){t(e.duration())})),t.on("getVolume",(function(t){t(100*e.volume())})),t.on("setVolume",(function(t){e.volume(t/100)})),t.on("mute",(function(){e.volume(0)})),t.on("unmute",(function(){e.volume(1)})),t.on("getMuted",(function(t){t(0===e.volume())})),t.on("getLoop",(function(t){t(e.loop())})),t.on("setLoop",(function(t){e.loop(t)}))},o.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()},void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}(window,document)},64448:(e,t,n)=>{"use strict";var i=n(67294),s=n(63840);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function g(e,t,n,i,s,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,i){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,i)&&(n=null),i||null===s?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,i=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);f[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);f[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);f[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),T=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var x,j=Object.assign;function U(e){if(void 0===x)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return"\n"+x+e}var H=!1;function F(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var i=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){i=e}e.call(t.prototype)}else{try{throw Error()}catch(e){i=e}e()}}catch(t){if(t&&i&&"string"==typeof t.stack){for(var s=t.stack.split("\n"),r=i.stack.split("\n"),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==r[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case O:return"Fragment";case T:return"Portal";case A:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=z(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function re(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function fe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Oe=null,_e=null;function Ae(e){if(e=ps(e)){if("function"!=typeof Te)throw Error(r(280));var t=e.stateNode;t&&(t=gs(t),Te(e.stateNode,e.type,t))}}function we(e){Oe?_e?_e.push(e):_e=[e]:Oe=e}function Ne(){if(Oe){var e=Oe,t=_e;if(_e=Oe=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function Ie(){}var ke=!1;function Ce(e,t,n){if(ke)return e(t,n);ke=!0;try{return Pe(e,t,n)}finally{ke=!1,(null!==Oe||null!==_e)&&(Ie(),Ne())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var i=gs(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Me=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Me=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Me=!1}function Re(e,t,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var xe=!1,je=null,Ue=!1,He=null,Fe={onError:function(e){xe=!0,je=e}};function Be(e,t,n,i,s,r,o,a,l){xe=!1,je=null,Re.apply(Fe,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(r(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(i=s.return)){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return We(s),e;if(o===i)return We(s),t;o=o.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=o;break}if(l===i){a=!0,i=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=s;break}if(l===i){a=!0,i=o,n=s;break}l=l.sibling}if(!a)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,qe=s.unstable_cancelCallback,$e=s.unstable_shouldYield,Ze=s.unstable_requestPaint,Qe=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Je=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,rt=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?i=ut(a):0!==(r&=o)&&(i=ut(r))}else 0!==(o=n&~s)?i=ut(o):0!==r&&(i=ut(r));if(0===i)return 0;if(0!==t&&t!==i&&0==(t&s)&&((s=i&-i)>=(r=t&-t)||16===s&&0!=(4194240&r)))return t;if(0!=(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(n=31-ot(t)),i|=e[n],t&=~s;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ft(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var St,Et,Tt,Ot,_t,At=!1,wt=[],Nt=null,Pt=null,It=null,kt=new Map,Ct=new Map,Lt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function Rt(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=ps(t))&&Et(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function xt(e){var t=hs(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void _t(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ps(n))&&Et(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Se=i,n.target.dispatchEvent(i),Se=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Ht(){At=!1,null!==Nt&&jt(Nt)&&(Nt=null),null!==Pt&&jt(Pt)&&(Pt=null),null!==It&&jt(It)&&(It=null),kt.forEach(Ut),Ct.forEach(Ut)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ht)))}function Bt(e){function t(t){return Ft(t,e)}if(0<wt.length){Ft(wt[0],e);for(var n=1;n<wt.length;n++){var i=wt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Nt&&Ft(Nt,e),null!==Pt&&Ft(Pt,e),null!==It&&Ft(It,e),kt.forEach(t),Ct.forEach(t),n=0;n<Lt.length;n++)(i=Lt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)xt(n),null===n.blockedOn&&Lt.shift()}var Vt=S.ReactCurrentBatchConfig;function Gt(e,t,n,i){var s=bt,r=Vt.transition;Vt.transition=null;try{bt=1,zt(e,t,n,i)}finally{bt=s,Vt.transition=r}}function Wt(e,t,n,i){var s=bt,r=Vt.transition;Vt.transition=null;try{bt=4,zt(e,t,n,i)}finally{bt=s,Vt.transition=r}}function zt(e,t,n,i){var s=Yt(e,t,n,i);if(null===s)Hi(e,t,i,Kt,n),Dt(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return Nt=Rt(Nt,e,t,n,i,s),!0;case"dragenter":return Pt=Rt(Pt,e,t,n,i,s),!0;case"mouseover":return It=Rt(It,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return kt.set(r,Rt(kt.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Ct.set(r,Rt(Ct.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Mt.indexOf(e)){for(;null!==s;){var r=ps(s);if(null!==r&&St(r),null===(r=Yt(e,t,n,i))&&Hi(e,t,i,Kt,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else Hi(e,t,i,null,n)}var Kt=null;function Yt(e,t,n,i){if(Kt=null,null!==(e=hs(e=Ee(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Qt=null;function Xt(){if(Qt)return Qt;var e,t,n=Zt,i=n.length,s="value"in $t?$t.value:$t.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===s[r-t];t++);return Qt=s.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,i,s,r){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?en:tn,this.isPropagationStopped=tn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var sn,rn,on,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=nn(an),cn=j({},an,{view:0,detail:0}),dn=nn(cn),un=j({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(sn=e.screenX-on.screenX,rn=e.screenY-on.screenY):rn=sn=0,on=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),hn=nn(un),pn=nn(j({},un,{dataTransfer:0})),mn=nn(j({},cn,{relatedTarget:0})),gn=nn(j({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),fn=nn(j({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vn=nn(j({},an,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return En}var On=nn(j({},cn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_n=nn(j({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=nn(j({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),wn=nn(j({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=nn(j({},un,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Pn=[9,13,27,32],In=d&&"CompositionEvent"in window,kn=null;d&&"documentMode"in document&&(kn=document.documentMode);var Cn=d&&"TextEvent"in window&&!kn,Ln=d&&(!In||kn&&8<kn&&11>=kn),Mn=String.fromCharCode(32),Dn=!1;function Rn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Fn(e,t,n,i){we(i),0<(t=Bi(t,"onChange")).length&&(n=new ln("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Bn=null,Vn=null;function Gn(e){Mi(e,0)}function Wn(e){if(Y(ms(e)))return e}function zn(e,t){if("change"===e)return t}var Kn=!1;if(d){var Yn;if(d){var qn="oninput"in document;if(!qn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),qn="function"==typeof $n.oninput}Yn=qn}else Yn=!1;Kn=Yn&&(!document.documentMode||9<document.documentMode)}function Zn(){Bn&&(Bn.detachEvent("onpropertychange",Qn),Vn=Bn=null)}function Qn(e){if("value"===e.propertyName&&Wn(Vn)){var t=[];Fn(t,Vn,e,Ee(e)),Ce(Gn,t)}}function Xn(e,t,n){"focusin"===e?(Zn(),Vn=n,(Bn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Zn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wn(Vn)}function ei(e,t){if("click"===e)return Wn(t)}function ti(e,t){if("input"===e||"change"===e)return Wn(t)}var ni="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ii(e,t){if(ni(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!u.call(t,s)||!ni(e[s],t[s]))return!1}return!0}function si(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ri(e,t){var n,i=si(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=si(i)}}function oi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?oi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ai(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ci(e){var t=ai(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oi(n.ownerDocument.documentElement,n)){if(null!==i&&li(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=ri(n,r);var o=ri(n,i);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var di=d&&"documentMode"in document&&11>=document.documentMode,ui=null,hi=null,pi=null,mi=!1;function gi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mi||null==ui||ui!==q(i)||("selectionStart"in(i=ui)&&li(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},pi&&ii(pi,i)||(pi=i,0<(i=Bi(hi,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ui)))}function fi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vi={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},bi={},yi={};function Si(e){if(bi[e])return bi[e];if(!vi[e])return e;var t,n=vi[e];for(t in n)if(n.hasOwnProperty(t)&&t in yi)return bi[e]=n[t];return e}d&&(yi=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);var Ei=Si("animationend"),Ti=Si("animationiteration"),Oi=Si("animationstart"),_i=Si("transitionend"),Ai=new Map,wi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,t){Ai.set(e,t),l(t,[e])}for(var Pi=0;Pi<wi.length;Pi++){var Ii=wi[Pi];Ni(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Ni(Ei,"onAnimationEnd"),Ni(Ti,"onAnimationIteration"),Ni(Oi,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(_i,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ci=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,o,a,l,c){if(Be.apply(this,arguments),xe){if(!xe)throw Error(r(198));var d=je;xe=!1,je=null,Ue||(Ue=!0,He=d)}}(i,t,void 0,e),e.currentTarget=null}function Mi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Li(s,a,c),r=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Li(s,a,c),r=l}}}if(Ue)throw e=He,Ue=!1,He=null,e}function Di(e,t){var n=t[cs];void 0===n&&(n=t[cs]=new Set);var i=e+"__bubble";n.has(i)||(Ui(t,e,2,!1),n.add(i))}function Ri(e,t,n){var i=0;t&&(i|=4),Ui(n,e,i,t)}var xi="_reactListening"+Math.random().toString(36).slice(2);function ji(e){if(!e[xi]){e[xi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ci.has(t)||Ri(t,!1,e),Ri(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[xi]||(t[xi]=!0,Ri("selectionchange",!1,t))}}function Ui(e,t,n,i){switch(qt(t)){case 1:var s=Gt;break;case 4:s=Wt;break;default:s=zt}n=s.bind(null,t,n,e),s=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,s){var r=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=hs(a)))return;if(5===(l=o.tag)||6===l){i=r=o;continue e}a=a.parentNode}}i=i.return}Ce((function(){var i=r,s=Ee(n),o=[];e:{var a=Ai.get(e);if(void 0!==a){var l=ln,c=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":l=On;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ei:case Ti:case Oi:l=gn;break;case _i:l=wn;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=fn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var d=0!=(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=i;null!==m;){var g=(p=m).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=Le(m,h))&&d.push(Fi(m,g,p)))),u)break;m=m.return}0<d.length&&(a=new l(a,c,null,n,s),o.push({event:a,listeners:d}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Se||!(c=n.relatedTarget||n.fromElement)||!hs(c)&&!c[ls])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?hs(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(d=hn,g="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=_n,g="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?a:ms(l),p=null==c?a:ms(c),(a=new d(g,m+"leave",l,n,s)).target=u,a.relatedTarget=p,g=null,hs(s)===i&&((d=new d(h,m+"enter",c,n,s)).target=p,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Vi(p))m++;for(p=0,g=h;g;g=Vi(g))p++;for(;0<m-p;)d=Vi(d),m--;for(;0<p-m;)h=Vi(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Vi(d),h=Vi(h)}d=null}else d=null;null!==l&&Gi(o,a,l,d,!1),null!==c&&null!==u&&Gi(o,u,c,d,!0)}if("select"===(l=(a=i?ms(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=zn;else if(Hn(a))if(Kn)f=ti;else{f=Jn;var v=Xn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(f=ei);switch(f&&(f=f(e,i))?Fn(o,f,n,s):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?ms(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(ui=v,hi=i,pi=null);break;case"focusout":pi=hi=ui=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,gi(o,n,s);break;case"selectionchange":if(di)break;case"keydown":case"keyup":gi(o,n,s)}var b;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else jn?Rn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(jn||"onCompositionStart"!==y?"onCompositionEnd"===y&&jn&&(b=Xt()):(Zt="value"in($t=s)?$t.value:$t.textContent,jn=!0)),0<(v=Bi(i,y)).length&&(y=new vn(y,e,null,n,s),o.push({event:y,listeners:v}),b?y.data=b:null!==(b=xn(n))&&(y.data=b))),(b=Cn?function(e,t){switch(e){case"compositionend":return xn(t);case"keypress":return 32!==t.which?null:(Dn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!In&&Rn(e,t)?(e=Xt(),Qt=Zt=$t=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(i=Bi(i,"onBeforeInput")).length&&(s=new vn("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:i}),s.data=b))}Mi(o,t)}))}function Fi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bi(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Le(e,n))&&i.unshift(Fi(e,r,s)),null!=(r=Le(e,t))&&i.push(Fi(e,r,s))),e=e.return}return i}function Vi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,s){for(var r=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Le(n,r))&&o.unshift(Fi(n,l,a)):s||null!=(l=Le(n,r))&&o.push(Fi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Wi=/\r\n?/g,zi=/\u0000|\uFFFD/g;function Ki(e){return("string"==typeof e?e:""+e).replace(Wi,"\n").replace(zi,"")}function Yi(e,t,n){if(t=Ki(t),Ki(e)!==t&&n)throw Error(r(425))}function qi(){}var $i=null;function Zi(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Qi="function"==typeof setTimeout?setTimeout:void 0,Xi="function"==typeof clearTimeout?clearTimeout:void 0,Ji="function"==typeof Promise?Promise:void 0,es="function"==typeof queueMicrotask?queueMicrotask:void 0!==Ji?function(e){return Ji.resolve(null).then(e).catch(ts)}:Qi;function ts(e){setTimeout((function(){throw e}))}function ns(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Bt(t)}function is(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ss(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var rs=Math.random().toString(36).slice(2),os="__reactFiber$"+rs,as="__reactProps$"+rs,ls="__reactContainer$"+rs,cs="__reactEvents$"+rs,ds="__reactListeners$"+rs,us="__reactHandles$"+rs;function hs(e){var t=e[os];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ls]||n[os]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ss(e);null!==e;){if(n=e[os])return n;e=ss(e)}return t}n=(e=n).parentNode}return null}function ps(e){return!(e=e[os]||e[ls])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ms(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function gs(e){return e[as]||null}var fs=[],vs=-1;function bs(e){return{current:e}}function ys(e){0>vs||(e.current=fs[vs],fs[vs]=null,vs--)}function Ss(e,t){vs++,fs[vs]=e.current,e.current=t}var Es={},Ts=bs(Es),Os=bs(!1),_s=Es;function As(e,t){var n=e.type.contextTypes;if(!n)return Es;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ws(e){return null!=(e=e.childContextTypes)}function Ns(){ys(Os),ys(Ts)}function Ps(e,t,n){if(Ts.current!==Es)throw Error(r(168));Ss(Ts,t),Ss(Os,n)}function Is(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(r(108,G(e)||"Unknown",s));return j({},n,i)}function ks(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,_s=Ts.current,Ss(Ts,e),Ss(Os,Os.current),!0}function Cs(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=Is(e,t,_s),i.__reactInternalMemoizedMergedChildContext=e,ys(Os),ys(Ts),Ss(Ts,e)):ys(Os),Ss(Os,n)}var Ls=null,Ms=!1,Ds=!1;function Rs(e){null===Ls?Ls=[e]:Ls.push(e)}function xs(){if(!Ds&&null!==Ls){Ds=!0;var e=0,t=bt;try{var n=Ls;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Ls=null,Ms=!1}catch(t){throw null!==Ls&&(Ls=Ls.slice(e+1)),Ye(Je,xs),t}finally{bt=t,Ds=!1}}return null}var js=S.ReactCurrentBatchConfig;function Us(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Hs=bs(null),Fs=null,Bs=null,Vs=null;function Gs(){Vs=Bs=Fs=null}function Ws(e){var t=Hs.current;ys(Hs),e._currentValue=t}function zs(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ks(e,t){Fs=e,Vs=Bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ma=!0),e.firstContext=null)}function Ys(e){var t=e._currentValue;if(Vs!==e)if(e={context:e,memoizedValue:t,next:null},null===Bs){if(null===Fs)throw Error(r(308));Bs=e,Fs.dependencies={lanes:0,firstContext:e}}else Bs=Bs.next=e;return t}var qs=null,$s=!1;function Zs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Js(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gl&&0!=(1&e.mode)&&0==(2&ml)?(null===(e=n.interleaved)?(t.next=t,null===qs?qs=[n]:qs.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function er(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function tr(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function nr(e,t,n,i){var s=e.updateQueue;$s=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===a?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(o=0,d=c=l=null,a=r;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,g=a;switch(h=t,p=n,g.tag){case 1:if("function"==typeof(m=g.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=g.payload)?m.call(p,u,h):m))break e;u=j({},u,h);break e;case 2:$s=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,o|=h;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(h=a).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Tl|=o,e.lanes=o,e.memoizedState=u}}function ir(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!=typeof s)throw Error(r(191,s));s.call(i)}}}var sr=(new i.Component).refs;function rr(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var or={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Hl(),s=Fl(e),r=Xs(i,s);r.payload=t,null!=n&&(r.callback=n),Js(e,r),null!==(t=Bl(e,s,i))&&er(t,e,s)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Hl(),s=Fl(e),r=Xs(i,s);r.tag=1,r.payload=t,null!=n&&(r.callback=n),Js(e,r),null!==(t=Bl(e,s,i))&&er(t,e,s)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hl(),i=Fl(e),s=Xs(n,i);s.tag=2,null!=t&&(s.callback=t),Js(e,s),null!==(t=Bl(e,i,n))&&er(t,e,i)}};function ar(e,t,n,i,s,r,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!ii(n,i)||!ii(s,r))}function lr(e,t,n){var i=!1,s=Es,r=t.contextType;return"object"==typeof r&&null!==r?r=Ys(r):(s=ws(t)?_s:Ts.current,r=(i=null!=(i=t.contextTypes))?As(e,s):Es),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=or,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function cr(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&or.enqueueReplaceState(t,t.state,null)}function dr(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=sr,Zs(e);var r=t.contextType;"object"==typeof r&&null!==r?s.context=Ys(r):(r=ws(t)?_s:Ts.current,s.context=As(e,r)),s.state=e.memoizedState,"function"==typeof(r=t.getDerivedStateFromProps)&&(rr(e,t,r,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&or.enqueueReplaceState(s,s.state,null),nr(e,n,s,i),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}var ur=[],hr=0,pr=null,mr=0,gr=[],fr=0,vr=null,br=1,yr="";function Sr(e,t){ur[hr++]=mr,ur[hr++]=pr,pr=e,mr=t}function Er(e,t,n){gr[fr++]=br,gr[fr++]=yr,gr[fr++]=vr,vr=e;var i=br;e=yr;var s=32-ot(i)-1;i&=~(1<<s),n+=1;var r=32-ot(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,br=1<<32-ot(t)+s|n<<s|i,yr=r+e}else br=1<<r|n<<s|i,yr=e}function Tr(e){null!==e.return&&(Sr(e,1),Er(e,1,0))}function Or(e){for(;e===pr;)pr=ur[--hr],ur[hr]=null,mr=ur[--hr],ur[hr]=null;for(;e===vr;)vr=gr[--fr],gr[fr]=null,yr=gr[--fr],gr[fr]=null,br=gr[--fr],gr[fr]=null}var _r=null,Ar=null,wr=!1,Nr=null;function Pr(e,t){var n=vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ir(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,_r=e,Ar=is(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,_r=e,Ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==vr?{id:br,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=vc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,_r=e,Ar=null,!0);default:return!1}}function kr(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Cr(e){if(wr){var t=Ar;if(t){var n=t;if(!Ir(e,t)){if(kr(e))throw Error(r(418));t=is(n.nextSibling);var i=_r;t&&Ir(e,t)?Pr(i,n):(e.flags=-4097&e.flags|2,wr=!1,_r=e)}}else{if(kr(e))throw Error(r(418));e.flags=-4097&e.flags|2,wr=!1,_r=e}}}function Lr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;_r=e}function Mr(e){if(e!==_r)return!1;if(!wr)return Lr(e),wr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zi(e.type,e.memoizedProps)),t&&(t=Ar)){if(kr(e)){for(e=Ar;e;)e=is(e.nextSibling);throw Error(r(418))}for(;t;)Pr(e,t),t=is(t.nextSibling)}if(Lr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ar=is(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ar=null}}else Ar=_r?is(e.stateNode.nextSibling):null;return!0}function Dr(){Ar=_r=null,wr=!1}function Rr(e){null===Nr?Nr=[e]:Nr.push(e)}function xr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var s=i,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=s.refs;t===sr&&(t=s.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function jr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ur(e){return(0,e._init)(e._payload)}function Hr(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=yc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Oc(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===O?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===L&&Ur(r)===t.type)?((i=s(t,n.props)).ref=xr(e,t,n),i.return=e,i):((i=Sc(n.type,n.key,n.props,null,e.mode,i)).ref=xr(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=_c(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,i,r){return null===t||7!==t.tag?((t=Ec(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Sc(t.type,t.key,t.props,null,e.mode,n)).ref=xr(e,null,t),n.return=e,n;case T:return(t=_c(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ec(t,e.mode,n,null)).return=e,t;jr(e,t)}return null}function p(e,t,n,i){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===s?c(e,t,n,i):null;case T:return n.key===s?d(e,t,n,i):null;case L:return p(e,t,(s=n._init)(n._payload),i)}if(te(n)||R(n))return null!==s?null:u(e,t,n,i,null);jr(e,n)}return null}function m(e,t,n,i,s){if("string"==typeof i&&""!==i||"number"==typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case E:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case T:return d(t,e=e.get(null===i.key?n:i.key)||null,i,s);case L:return m(e,t,n,(0,i._init)(i._payload),s)}if(te(i)||R(i))return u(t,e=e.get(n)||null,i,s,null);jr(t,i)}return null}function g(s,r,a,l){for(var c=null,d=null,u=r,g=r=0,f=null;null!==u&&g<a.length;g++){u.index>g?(f=u,u=null):f=u.sibling;var v=p(s,u,a[g],l);if(null===v){null===u&&(u=f);break}e&&u&&null===v.alternate&&t(s,u),r=o(v,r,g),null===d?c=v:d.sibling=v,d=v,u=f}if(g===a.length)return n(s,u),wr&&Sr(s,g),c;if(null===u){for(;g<a.length;g++)null!==(u=h(s,a[g],l))&&(r=o(u,r,g),null===d?c=u:d.sibling=u,d=u);return wr&&Sr(s,g),c}for(u=i(s,u);g<a.length;g++)null!==(f=m(u,s,g,a[g],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?g:f.key),r=o(f,r,g),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach((function(e){return t(s,e)})),wr&&Sr(s,g),c}function f(s,a,l,c){var d=R(l);if("function"!=typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,g=a,f=a=0,v=null,b=l.next();null!==g&&!b.done;f++,b=l.next()){g.index>f?(v=g,g=null):v=g.sibling;var y=p(s,g,b.value,c);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(s,g),a=o(y,a,f),null===u?d=y:u.sibling=y,u=y,g=v}if(b.done)return n(s,g),wr&&Sr(s,f),d;if(null===g){for(;!b.done;f++,b=l.next())null!==(b=h(s,b.value,c))&&(a=o(b,a,f),null===u?d=b:u.sibling=b,u=b);return wr&&Sr(s,f),d}for(g=i(s,g);!b.done;f++,b=l.next())null!==(b=m(g,s,f,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?f:b.key),a=o(b,a,f),null===u?d=b:u.sibling=b,u=b);return e&&g.forEach((function(e){return t(s,e)})),wr&&Sr(s,f),d}return function e(i,r,o,l){if("object"==typeof o&&null!==o&&o.type===O&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var c=o.key,d=r;null!==d;){if(d.key===c){if((c=o.type)===O){if(7===d.tag){n(i,d.sibling),(r=s(d,o.props.children)).return=i,i=r;break e}}else if(d.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===L&&Ur(c)===d.type){n(i,d.sibling),(r=s(d,o.props)).ref=xr(i,d,o),r.return=i,i=r;break e}n(i,d);break}t(i,d),d=d.sibling}o.type===O?((r=Ec(o.props.children,i.mode,l,o.key)).return=i,i=r):((l=Sc(o.type,o.key,o.props,null,i.mode,l)).ref=xr(i,r,o),l.return=i,i=l)}return a(i);case T:e:{for(d=o.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(i,r.sibling),(r=s(r,o.children||[])).return=i,i=r;break e}n(i,r);break}t(i,r),r=r.sibling}(r=_c(o,i.mode,l)).return=i,i=r}return a(i);case L:return e(i,r,(d=o._init)(o._payload),l)}if(te(o))return g(i,r,o,l);if(R(o))return f(i,r,o,l);jr(i,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==r&&6===r.tag?(n(i,r.sibling),(r=s(r,o)).return=i,i=r):(n(i,r),(r=Oc(o,i.mode,l)).return=i,i=r),a(i)):n(i,r)}}var Fr=Hr(!0),Br=Hr(!1),Vr={},Gr=bs(Vr),Wr=bs(Vr),zr=bs(Vr);function Kr(e){if(e===Vr)throw Error(r(174));return e}function Yr(e,t){switch(Ss(zr,t),Ss(Wr,e),Ss(Gr,Vr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ys(Gr),Ss(Gr,t)}function qr(){ys(Gr),ys(Wr),ys(zr)}function $r(e){Kr(zr.current);var t=Kr(Gr.current),n=le(t,e.type);t!==n&&(Ss(Wr,e),Ss(Gr,n))}function Zr(e){Wr.current===e&&(ys(Gr),ys(Wr))}var Qr=bs(0);function Xr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jr=[];function eo(){for(var e=0;e<Jr.length;e++)Jr[e]._workInProgressVersionPrimary=null;Jr.length=0}var to=S.ReactCurrentDispatcher,no=S.ReactCurrentBatchConfig,io=0,so=null,ro=null,oo=null,ao=!1,lo=!1,co=0,uo=0;function ho(){throw Error(r(321))}function po(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ni(e[n],t[n]))return!1;return!0}function mo(e,t,n,i,s,o){if(io=o,so=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,to.current=null===e||null===e.memoizedState?Zo:Qo,e=n(i,s),lo){o=0;do{if(lo=!1,co=0,25<=o)throw Error(r(301));o+=1,oo=ro=null,t.updateQueue=null,to.current=Xo,e=n(i,s)}while(lo)}if(to.current=$o,t=null!==ro&&null!==ro.next,io=0,oo=ro=so=null,ao=!1,t)throw Error(r(300));return e}function go(){var e=0!==co;return co=0,e}function fo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oo?so.memoizedState=oo=e:oo=oo.next=e,oo}function vo(){if(null===ro){var e=so.alternate;e=null!==e?e.memoizedState:null}else e=ro.next;var t=null===oo?so.memoizedState:oo.next;if(null!==t)oo=t,ro=e;else{if(null===e)throw Error(r(310));e={memoizedState:(ro=e).memoizedState,baseState:ro.baseState,baseQueue:ro.baseQueue,queue:ro.queue,next:null},null===oo?so.memoizedState=oo=e:oo=oo.next=e}return oo}function bo(e,t){return"function"==typeof t?t(e):t}function yo(e){var t=vo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=ro,s=i.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,n.pending=null}if(null!==s){o=s.next,i=i.baseState;var l=a=null,c=null,d=o;do{var u=d.lane;if((io&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,so.lanes|=u,Tl|=u}d=d.next}while(null!==d&&d!==o);null===c?a=i:c.next=l,ni(i,t.memoizedState)||(ma=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{o=s.lane,so.lanes|=o,Tl|=o,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=vo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);ni(o,t.memoizedState)||(ma=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Eo(){}function To(e,t){var n=so,i=vo(),s=t(),o=!ni(i.memoizedState,s);if(o&&(i.memoizedState=s,ma=!0),i=i.queue,Mo(Ao.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==oo&&1&oo.memoizedState.tag){if(n.flags|=2048,Po(9,_o.bind(null,n,i,s,t),void 0,null),null===gl)throw Error(r(349));0!=(30&io)||Oo(n,t,s)}return s}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=so.updateQueue)?(t={lastEffect:null,stores:null},so.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,i){t.value=n,t.getSnapshot=i,wo(t)&&Bl(e,1,-1)}function Ao(e,t,n){return n((function(){wo(t)&&Bl(e,1,-1)}))}function wo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ni(e,n)}catch(e){return!0}}function No(e){var t=fo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Wo.bind(null,so,e),[t.memoizedState,e]}function Po(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=so.updateQueue)?(t={lastEffect:null,stores:null},so.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Io(){return vo().memoizedState}function ko(e,t,n,i){var s=fo();so.flags|=e,s.memoizedState=Po(1|t,n,void 0,void 0===i?null:i)}function Co(e,t,n,i){var s=vo();i=void 0===i?null:i;var r=void 0;if(null!==ro){var o=ro.memoizedState;if(r=o.destroy,null!==i&&po(i,o.deps))return void(s.memoizedState=Po(t,n,r,i))}so.flags|=e,s.memoizedState=Po(1|t,n,r,i)}function Lo(e,t){return ko(8390656,8,e,t)}function Mo(e,t){return Co(2048,8,e,t)}function Do(e,t){return Co(4,2,e,t)}function Ro(e,t){return Co(4,4,e,t)}function xo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!=n?n.concat([e]):null,Co(4,4,xo.bind(null,t,e),n)}function Uo(){}function Ho(e,t){var n=vo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&po(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Fo(e,t){var n=vo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&po(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Bo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=no.transition;no.transition={};try{e(!1),t()}finally{bt=n,no.transition=i}}function Vo(){return vo().memoizedState}function Go(e,t,n){var i=Fl(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},zo(e)?Ko(t,n):(Yo(e,t,n),null!==(e=Bl(e,i,n=Hl()))&&qo(e,t,i))}function Wo(e,t,n){var i=Fl(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(zo(e))Ko(t,s);else{Yo(e,t,s);var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,ni(a,o))return}catch(e){}null!==(e=Bl(e,i,n=Hl()))&&qo(e,t,i)}}function zo(e){var t=e.alternate;return e===so||null!==t&&t===so}function Ko(e,t){lo=ao=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){null!==gl&&0!=(1&e.mode)&&0==(2&ml)?(null===(e=t.interleaved)?(n.next=n,null===qs?qs=[t]:qs.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function qo(e,t,n){if(0!=(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $o={readContext:Ys,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Zo={readContext:Ys,useCallback:function(e,t){return fo().memoizedState=[e,void 0===t?null:t],e},useContext:Ys,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ko(4194308,4,xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=fo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=fo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Go.bind(null,so,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},fo().memoizedState=e},useState:No,useDebugValue:Uo,useDeferredValue:function(e){var t=No(e),n=t[0],i=t[1];return Lo((function(){var t=no.transition;no.transition={};try{i(e)}finally{no.transition=t}}),[e]),n},useTransition:function(){var e=No(!1),t=e[0];return e=Bo.bind(null,e[1]),fo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=so,s=fo();if(wr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===gl)throw Error(r(349));0!=(30&io)||Oo(i,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Lo(Ao.bind(null,i,o,e),[e]),i.flags|=2048,Po(9,_o.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=fo(),t=gl.identifierPrefix;if(wr){var n=yr;t=":"+t+"R"+(n=(br&~(1<<32-ot(br)-1)).toString(32)+n),0<(n=co++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=uo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qo={readContext:Ys,useCallback:Ho,useContext:Ys,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Do,useLayoutEffect:Ro,useMemo:Fo,useReducer:yo,useRef:Io,useState:function(){return yo(bo)},useDebugValue:Uo,useDeferredValue:function(e){var t=yo(bo),n=t[0],i=t[1];return Mo((function(){var t=no.transition;no.transition={};try{i(e)}finally{no.transition=t}}),[e]),n},useTransition:function(){return[yo(bo)[0],vo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Vo,unstable_isNewReconciler:!1},Xo={readContext:Ys,useCallback:Ho,useContext:Ys,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Do,useLayoutEffect:Ro,useMemo:Fo,useReducer:So,useRef:Io,useState:function(){return So(bo)},useDebugValue:Uo,useDeferredValue:function(e){var t=So(bo),n=t[0],i=t[1];return Mo((function(){var t=no.transition;no.transition={};try{i(e)}finally{no.transition=t}}),[e]),n},useTransition:function(){return[So(bo)[0],vo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Vo,unstable_isNewReconciler:!1};function Jo(e,t){try{var n="",i=t;do{n+=B(i),i=i.return}while(i);var s=n}catch(e){s="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:s}}function ea(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ta,na,ia,sa="function"==typeof WeakMap?WeakMap:Map;function ra(e,t,n){(n=Xs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Il||(Il=!0,kl=i),ea(0,t)},n}function oa(e,t,n){(n=Xs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){ea(0,t)}}var r=e.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){ea(0,t),"function"!=typeof i&&(null===Cl?Cl=new Set([this]):Cl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function aa(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new sa;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=uc.bind(null,e,t,n),t.then(e,e))}function la(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ca(e,t,n,i,s){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Xs(-1,1)).tag=2,Js(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}function da(e,t){if(!wr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ua(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ha(e,t,n){var i=t.pendingProps;switch(Or(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ua(t),null;case 1:return ws(t.type)&&Ns(),ua(t),null;case 3:return i=t.stateNode,qr(),ys(Os),ys(Ts),eo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Mr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Nr&&(Kl(Nr),Nr=null))),ua(t),null;case 5:Zr(t);var s=Kr(zr.current);if(n=t.type,null!==e&&null!=t.stateNode)na(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return ua(t),null}if(e=Kr(Gr.current),Mr(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[os]=t,i[as]=o,e=0!=(1&t.mode),n){case"dialog":Di("cancel",i),Di("close",i);break;case"iframe":case"object":case"embed":Di("load",i);break;case"video":case"audio":for(s=0;s<ki.length;s++)Di(ki[s],i);break;case"source":Di("error",i);break;case"img":case"image":case"link":Di("error",i),Di("load",i);break;case"details":Di("toggle",i);break;case"input":Z(i,o),Di("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Di("invalid",i);break;case"textarea":se(i,o),Di("invalid",i)}for(var l in be(n,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?i.textContent!==c&&(Yi(i.textContent,c,e),s=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(Yi(i.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Di("scroll",i)}switch(n){case"input":K(i),J(i,o,!0);break;case"textarea":K(i),oe(i);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(i.onclick=qi)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[os]=t,e[as]=i,ta(e,t),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Di("cancel",e),Di("close",e),s=i;break;case"iframe":case"object":case"embed":Di("load",e),s=i;break;case"video":case"audio":for(s=0;s<ki.length;s++)Di(ki[s],e);s=i;break;case"source":Di("error",e),s=i;break;case"img":case"image":case"link":Di("error",e),Di("load",e),s=i;break;case"details":Di("toggle",e),s=i;break;case"input":Z(e,i),s=$(e,i),Di("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=j({},i,{value:void 0}),Di("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Di("invalid",e);break;default:s=i}for(o in be(n,s),c=s)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?fe(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"==typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"==typeof d&&he(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Di("scroll",e):null!=d&&y(e,o,d,l))}switch(n){case"input":K(e),J(e,i,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=qi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ua(t),null;case 6:if(e&&null!=t.stateNode)ia(0,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(n=Kr(zr.current),Kr(Gr.current),Mr(t)){if(i=t.stateNode,n=t.memoizedProps,i[os]=t,(o=i.nodeValue!==n)&&null!==(e=_r))switch(l=0!=(1&e.mode),e.tag){case 3:Yi(i.nodeValue,n,l);break;case 5:!0!==e.memoizedProps[void 0]&&Yi(i.nodeValue,n,l)}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[os]=t,t.stateNode=i}return ua(t),null;case 13:if(ys(Qr),i=t.memoizedState,wr&&null!==Ar&&0!=(1&t.mode)&&0==(128&t.flags)){for(i=Ar;i;)i=is(i.nextSibling);return Dr(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Mr(t),null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[os]=t}else Dr(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ua(t),null}return null!==Nr&&(Kl(Nr),Nr=null),0!=(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Mr(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&Qr.current)?0===Sl&&(Sl=3):tc())),null!==t.updateQueue&&(t.flags|=4),ua(t),null);case 4:return qr(),null===e&&ji(t.stateNode.containerInfo),ua(t),null;case 10:return Ws(t.type._context),ua(t),null;case 17:return ws(t.type)&&Ns(),ua(t),null;case 19:if(ys(Qr),null===(o=t.memoizedState))return ua(t),null;if(i=0!=(128&t.flags),null===(l=o.rendering))if(i)da(o,!1);else{if(0!==Sl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Xr(e))){for(t.flags|=128,da(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ss(Qr,1&Qr.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Pl&&(t.flags|=128,i=!0,da(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Xr(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),da(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!wr)return ua(t),null}else 2*Qe()-o.renderingStartTime>Pl&&1073741824!==n&&(t.flags|=128,i=!0,da(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=Qr.current,Ss(Qr,i?1&n|2:1&n),t):(ua(t),null);case 22:case 23:return Ql(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!=(1&t.mode)?0!=(1073741824&bl)&&(ua(t),6&t.subtreeFlags&&(t.flags|=8192)):ua(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}ta=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},na=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Kr(Gr.current);var r,o=null;switch(n){case"input":s=$(e,s),i=$(e,i),o=[];break;case"select":s=j({},s,{value:void 0}),i=j({},i,{value:void 0}),o=[];break;case"textarea":s=ie(e,s),i=ie(e,i),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof i.onClick&&(e.onclick=qi)}for(d in be(n,i),n=null,s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in i){var c=i[d];if(l=null!=s?s[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(o||(o=[]),o.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Di("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},ia=function(e,t,n,i){n!==i&&(t.flags|=4)};var pa=S.ReactCurrentOwner,ma=!1;function ga(e,t,n,i){t.child=null===e?Br(t,null,n,i):Fr(t,e.child,n,i)}function fa(e,t,n,i,s){n=n.render;var r=t.ref;return Ks(t,s),i=mo(e,t,n,i,r,s),n=go(),null===e||ma?(wr&&n&&Tr(t),t.flags|=1,ga(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xa(e,t,s))}function va(e,t,n,i,s){if(null===e){var r=n.type;return"function"!=typeof r||bc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Sc(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,ba(e,t,r,i,s))}if(r=e.child,0==(e.lanes&s)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:ii)(o,i)&&e.ref===t.ref)return xa(e,t,s)}return t.flags|=1,(e=yc(r,i)).ref=t.ref,e.return=t,t.child=e}function ba(e,t,n,i,s){if(null!==e&&ii(e.memoizedProps,i)&&e.ref===t.ref){if(ma=!1,0==(e.lanes&s))return t.lanes=e.lanes,xa(e,t,s);0!=(131072&e.flags)&&(ma=!0)}return Ea(e,t,n,i,s)}function ya(e,t,n){var i=t.pendingProps,s=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},Ss(yl,bl),bl|=n;else{if(0==(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Ss(yl,bl),bl|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==r?r.baseLanes:n,Ss(yl,bl),bl|=i}else null!==r?(i=r.baseLanes|n,t.memoizedState=null):i=n,Ss(yl,bl),bl|=i;return ga(e,t,s,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,n,i,s){var r=ws(n)?_s:Ts.current;return r=As(t,r),Ks(t,s),n=mo(e,t,n,i,r,s),i=go(),null===e||ma?(wr&&i&&Tr(t),t.flags|=1,ga(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xa(e,t,s))}function Ta(e,t,n,i,s){if(ws(n)){var r=!0;ks(t)}else r=!1;if(Ks(t,s),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),lr(t,n,i),dr(t,n,i,s),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ys(c):c=As(t,c=ws(n)?_s:Ts.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate;u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==i||l!==c)&&cr(t,o,i,c),$s=!1;var h=t.memoizedState;o.state=h,nr(t,i,o,s),l=t.memoizedState,a!==i||h!==l||Os.current||$s?("function"==typeof d&&(rr(t,n,d,i),l=t.memoizedState),(a=$s||ar(t,n,a,i,h,l,c))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Qs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Us(t.type,a),o.props=c,u=t.pendingProps,h=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ys(l):l=As(t,l=ws(n)?_s:Ts.current);var p=n.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==u||h!==l)&&cr(t,o,i,l),$s=!1,h=t.memoizedState,o.state=h,nr(t,i,o,s);var m=t.memoizedState;a!==u||h!==m||Os.current||$s?("function"==typeof p&&(rr(t,n,p,i),m=t.memoizedState),(c=$s||ar(t,n,c,i,h,m,l)||!1)?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,m,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,m,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Oa(e,t,n,i,r,s)}function Oa(e,t,n,i,s,r){Sa(e,t);var o=0!=(128&t.flags);if(!i&&!o)return s&&Cs(t,n,!1),xa(e,t,r);i=t.stateNode,pa.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Fr(t,e.child,null,r),t.child=Fr(t,null,a,r)):ga(e,t,a,r),t.memoizedState=i.state,s&&Cs(t,n,!0),t.child}function _a(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Yr(e,t.containerInfo)}function Aa(e,t,n,i,s){return Dr(),Rr(s),t.flags|=256,ga(e,t,n,i),t.child}var wa={dehydrated:null,treeContext:null,retryLane:0};function Na(e){return{baseLanes:e,cachePool:null}}function Pa(e,t,n){var i,s=t.pendingProps,o=Qr.current,a=!1,l=0!=(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!=(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ss(Qr,1&o),null===e)return Cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},0==(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Tc(o,s,0,null),e=Ec(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Na(n),t.memoizedState=wa,e):Ia(t,o));if(null!==(o=e.memoizedState)){if(null!==(i=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,La(e,t,n,Error(r(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=s.fallback,o=t.mode,s=Tc({mode:"visible",children:s.children},o,0,null),(a=Ec(a,o,n,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,0!=(1&t.mode)&&Fr(t,e.child,null,n),t.child.memoizedState=Na(n),t.memoizedState=wa,a);if(0==(1&t.mode))t=La(e,t,n,null);else if("$!"===i.data)t=La(e,t,n,Error(r(419)));else if(s=0!=(n&e.childLanes),ma||s){if(null!==(s=gl)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(s=0!=(a&(s.suspendedLanes|n))?0:a)&&s!==o.retryLane&&(o.retryLane=s,Bl(e,s,-1))}tc(),t=La(e,t,n,Error(r(421)))}else"$?"===i.data?(t.flags|=128,t.child=e.child,t=pc.bind(null,e),i._reactRetry=t,t=null):(n=o.treeContext,Ar=is(i.nextSibling),_r=t,wr=!0,Nr=null,null!==n&&(gr[fr++]=br,gr[fr++]=yr,gr[fr++]=vr,br=n.id,yr=n.overflow,vr=t),(t=Ia(t,t.pendingProps.children)).flags|=4096);return t}return a?(s=Ca(e,t,s.children,s.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?Na(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=wa,s):(n=ka(e,t,s.children,n),t.memoizedState=null,n)}return a?(s=Ca(e,t,s.children,s.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?Na(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=wa,s):(n=ka(e,t,s.children,n),t.memoizedState=null,n)}function Ia(e,t){return(t=Tc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ka(e,t,n,i){var s=e.child;return e=s.sibling,n=yc(s,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function Ca(e,t,n,i,s){var r=t.mode,o=(e=e.child).sibling,a={mode:"hidden",children:n};return 0==(1&r)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=a,t.deletions=null):(n=yc(e,a)).subtreeFlags=14680064&e.subtreeFlags,null!==o?i=yc(o,i):(i=Ec(i,r,s,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function La(e,t,n,i){return null!==i&&Rr(i),Fr(t,e.child,null,n),(e=Ia(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ma(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),zs(e.return,t,n)}function Da(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function Ra(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(ga(e,t,i.children,n),0!=(2&(i=Qr.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ma(e,n,t);else if(19===e.tag)Ma(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ss(Qr,i),0==(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Xr(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Da(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Xr(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Da(t,!0,n,null,r);break;case"together":Da(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=yc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=yc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ja(e,t){switch(Or(t),t.tag){case 1:return ws(t.type)&&Ns(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return qr(),ys(Os),ys(Ts),eo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zr(t),null;case 13:if(ys(Qr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));Dr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ys(Qr),null;case 4:return qr(),null;case 10:return Ws(t.type._context),null;case 22:case 23:return Ql(),null;case 24:default:return null}}var Ua=!1,Ha=!1,Fa="function"==typeof WeakSet?WeakSet:Set,Ba=null;function Va(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){dc(e,t,n)}else n.current=null}function Ga(e,t,n){try{n()}catch(n){dc(e,t,n)}}var Wa=!1;function za(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&Ga(t,n,r)}s=s.next}while(s!==i)}}function Ka(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Ya(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}"function"==typeof t?t(e):t.current=e}}function qa(e,t,n){if(rt&&"function"==typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var s=i,r=s.destroy;s=s.tag,void 0!==r&&(0!=(2&s)||0!=(4&s))&&Ga(t,n,r),i=i.next}while(i!==e)}break;case 1:if(Va(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){dc(t,n,e)}break;case 5:Va(t,n);break;case 4:tl(e,t,n)}}function $a(e){var t=e.alternate;null!==t&&(e.alternate=null,$a(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[os],delete t[as],delete t[cs],delete t[ds],delete t[us])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Za(e){return 5===e.tag||3===e.tag||4===e.tag}function Qa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Za(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Xa(e){e:{for(var t=e.return;null!==t;){if(Za(t))break e;t=t.return}throw Error(r(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),el(e,n=Qa(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,Ja(e,n=Qa(e),t);break;default:throw Error(r(161))}}function Ja(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=qi));else if(4!==i&&null!==(e=e.child))for(Ja(e,t,n),e=e.sibling;null!==e;)Ja(e,t,n),e=e.sibling}function el(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(el(e,t,n),e=e.sibling;null!==e;)el(e,t,n),e=e.sibling}function tl(e,t,n){for(var i,s,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(r(160));switch(i=a.stateNode,a.tag){case 5:s=!1;break e;case 3:case 4:i=i.containerInfo,s=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,d=n,u=c;;)if(qa(l,u,d),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}s?(l=i,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):i.removeChild(o.stateNode)}else if(18===o.tag)s?(l=i,c=o.stateNode,8===l.nodeType?ns(l.parentNode,c):1===l.nodeType&&ns(l,c),Bt(l)):ns(i,o.stateNode);else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,s=!0,o.child.return=o,o=o.child;continue}}else if(qa(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function nl(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return za(3,t,t.return),Ka(3,t),void za(5,t,t.return);case 1:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,s=null!==e?e.memoizedProps:i;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===i.type&&null!=i.name&&Q(n,i),ye(e,s),t=ye(e,i),s=0;s<o.length;s+=2){var a=o[s],l=o[s+1];"style"===a?fe(n,l):"dangerouslySetInnerHTML"===a?ue(n,l):"children"===a?he(n,l):y(n,a,l,t)}switch(e){case"input":X(n,i);break;case"textarea":re(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(o=i.value)?ne(n,!!i.multiple,o,!1):e!==!!i.multiple&&(null!=i.defaultValue?ne(n,!!i.multiple,i.defaultValue,!0):ne(n,!!i.multiple,i.multiple?[]:"",!1))}n[as]=i}}return;case 6:if(null===t.stateNode)throw Error(r(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&Bt(t.stateNode.containerInfo));case 12:return;case 13:case 19:return void il(t);case 17:return}throw Error(r(163))}function il(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Fa),t.forEach((function(t){var i=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function sl(e,t,n){Ba=e,rl(e,t,n)}function rl(e,t,n){for(var i=0!=(1&e.mode);null!==Ba;){var s=Ba,r=s.child;if(22===s.tag&&i){var o=null!==s.memoizedState||Ua;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Ha;a=Ua;var c=Ha;if(Ua=o,(Ha=l)&&!c)for(Ba=s;null!==Ba;)l=(o=Ba).child,22===o.tag&&null!==o.memoizedState?ll(s):null!==l?(l.return=o,Ba=l):ll(s);for(;null!==r;)Ba=r,rl(r,t,n),r=r.sibling;Ba=s,Ua=a,Ha=c}ol(e)}else 0!=(8772&s.subtreeFlags)&&null!==r?(r.return=s,Ba=r):ol(e)}}function ol(e){for(;null!==Ba;){var t=Ba;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ha||Ka(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ha)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Us(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ir(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ir(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Bt(h)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(r(163))}Ha||512&t.flags&&Ya(t)}catch(e){dc(t,t.return,e)}}if(t===e){Ba=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ba=n;break}Ba=t.return}}function al(e){for(;null!==Ba;){var t=Ba;if(t===e){Ba=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ba=n;break}Ba=t.return}}function ll(e){for(;null!==Ba;){var t=Ba;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ka(4,t)}catch(e){dc(t,n,e)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(e){dc(t,s,e)}}var r=t.return;try{Ya(t)}catch(e){dc(t,r,e)}break;case 5:var o=t.return;try{Ya(t)}catch(e){dc(t,o,e)}}}catch(e){dc(t,t.return,e)}if(t===e){Ba=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ba=a;break}Ba=t.return}}var cl,dl=Math.ceil,ul=S.ReactCurrentDispatcher,hl=S.ReactCurrentOwner,pl=S.ReactCurrentBatchConfig,ml=0,gl=null,fl=null,vl=0,bl=0,yl=bs(0),Sl=0,El=null,Tl=0,Ol=0,_l=0,Al=null,wl=null,Nl=0,Pl=1/0,Il=!1,kl=null,Cl=null,Ll=!1,Ml=null,Dl=0,Rl=0,xl=null,jl=-1,Ul=0;function Hl(){return 0!=(6&ml)?Qe():-1!==jl?jl:jl=Qe()}function Fl(e){return 0==(1&e.mode)?1:0!=(2&ml)&&0!==vl?vl&-vl:null!==js.transition?(0===Ul&&(e=ct,0==(4194240&(ct<<=1))&&(ct=64),Ul=e),Ul):0!==(e=bt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function Bl(e,t,n){if(50<Rl)throw Rl=0,xl=null,Error(r(185));var i=Vl(e,t);return null===i?null:(ft(i,t,n),0!=(2&ml)&&i===gl||(i===gl&&(0==(2&ml)&&(Ol|=t),4===Sl&&Yl(i,vl)),Gl(i,n),1===t&&0===ml&&0==(1&e.mode)&&(Pl=Qe()+500,Ms&&xs())),i)}function Vl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Gl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-ot(r),a=1<<o,l=s[o];-1===l?0!=(a&n)&&0==(a&i)||(s[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}(e,t);var i=ht(e,e===gl?vl:0);if(0===i)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Ms=!0,Rs(e)}(ql.bind(null,e)):Rs(ql.bind(null,e)),es((function(){0===ml&&xs()})),n=null;else{switch(yt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:n=tt;break;case 536870912:n=it;break;default:n=tt}n=gc(n,Wl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wl(e,t){if(jl=-1,Ul=0,0!=(6&ml))throw Error(r(327));var n=e.callbackNode;if(lc()&&e.callbackNode!==n)return null;var i=ht(e,e===gl?vl:0);if(0===i)return null;if(0!=(30&i)||0!=(i&e.expiredLanes)||t)t=nc(e,i);else{t=i;var s=ml;ml|=2;var o=ec();for(gl===e&&vl===t||(Pl=Qe()+500,Xl(e,t));;)try{sc();break}catch(t){Jl(e,t)}Gs(),ul.current=o,ml=s,null!==fl?t=0:(gl=null,vl=0,t=Sl)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(i=s,t=zl(e,s))),1===t)throw n=El,Xl(e,0),Yl(e,i),Gl(e,Qe()),n;if(6===t)Yl(e,i);else{if(s=e.current.alternate,0==(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!ni(r(),s))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=nc(e,i))&&(0!==(o=mt(e))&&(i=o,t=zl(e,o))),1===t))throw n=El,Xl(e,0),Yl(e,i),Gl(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:ac(e,wl);break;case 3:if(Yl(e,i),(130023424&i)===i&&10<(t=Nl+500-Qe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&i)!==i){Hl(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Qi(ac.bind(null,e,wl),t);break}ac(e,wl);break;case 4:if(Yl(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>s&&(s=a),i&=~o}if(i=s,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dl(i/1960))-i)){e.timeoutHandle=Qi(ac.bind(null,e,wl),i);break}ac(e,wl);break;case 5:ac(e,wl);break;default:throw Error(r(329))}}}return Gl(e,Qe()),e.callbackNode===n?Wl.bind(null,e):null}function zl(e,t){var n=Al;return e.current.memoizedState.isDehydrated&&(Xl(e,t).flags|=256),2!==(e=nc(e,t))&&(t=wl,wl=n,null!==t&&Kl(t)),e}function Kl(e){null===wl?wl=e:wl.push.apply(wl,e)}function Yl(e,t){for(t&=~_l,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function ql(e){if(0!=(6&ml))throw Error(r(327));lc();var t=ht(e,0);if(0==(1&t))return Gl(e,Qe()),null;var n=nc(e,t);if(0!==e.tag&&2===n){var i=mt(e);0!==i&&(t=i,n=zl(e,i))}if(1===n)throw n=El,Xl(e,0),Yl(e,t),Gl(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ac(e,wl),Gl(e,Qe()),null}function $l(e,t){var n=ml;ml|=1;try{return e(t)}finally{0===(ml=n)&&(Pl=Qe()+500,Ms&&xs())}}function Zl(e){null!==Ml&&0===Ml.tag&&0==(6&ml)&&lc();var t=ml;ml|=1;var n=pl.transition,i=bt;try{if(pl.transition=null,bt=1,e)return e()}finally{bt=i,pl.transition=n,0==(6&(ml=t))&&xs()}}function Ql(){bl=yl.current,ys(yl)}function Xl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Xi(n)),null!==fl)for(n=fl.return;null!==n;){var i=n;switch(Or(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&Ns();break;case 3:qr(),ys(Os),ys(Ts),eo();break;case 5:Zr(i);break;case 4:qr();break;case 13:case 19:ys(Qr);break;case 10:Ws(i.type._context);break;case 22:case 23:Ql()}n=n.return}if(gl=e,fl=e=yc(e.current,null),vl=bl=t,Sl=0,El=null,_l=Ol=Tl=0,wl=Al=null,null!==qs){for(t=0;t<qs.length;t++)if(null!==(i=(n=qs[t]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var o=r.next;r.next=s,i.next=o}n.pending=i}qs=null}return e}function Jl(e,t){for(;;){var n=fl;try{if(Gs(),to.current=$o,ao){for(var i=so.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ao=!1}if(io=0,oo=ro=so=null,lo=!1,co=0,hl.current=null,null===n||null===n.return){Sl=1,El=t,fl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=vl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var d=c,u=l,h=u.tag;if(0==(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=la(a);if(null!==m){m.flags&=-257,ca(m,a,l,0,t),1&m.mode&&aa(o,d,t),c=d;var g=(t=m).updateQueue;if(null===g){var f=new Set;f.add(c),t.updateQueue=f}else g.add(c);break e}if(0==(1&t)){aa(o,d,t),tc();break e}c=Error(r(426))}else if(wr&&1&l.mode){var v=la(a);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),ca(v,a,l,0,t),Rr(c);break e}}o=c,4!==Sl&&(Sl=2),null===Al?Al=[o]:Al.push(o),c=Jo(c,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,tr(l,ra(0,c,t));break e;case 1:o=c;var b=l.type,y=l.stateNode;if(0==(128&l.flags)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Cl||!Cl.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,tr(l,oa(l,o,t));break e}}l=l.return}while(null!==l)}oc(n)}catch(e){t=e,fl===n&&null!==n&&(fl=n=n.return);continue}break}}function ec(){var e=ul.current;return ul.current=$o,null===e?$o:e}function tc(){0!==Sl&&3!==Sl&&2!==Sl||(Sl=4),null===gl||0==(268435455&Tl)&&0==(268435455&Ol)||Yl(gl,vl)}function nc(e,t){var n=ml;ml|=2;var i=ec();for(gl===e&&vl===t||Xl(e,t);;)try{ic();break}catch(t){Jl(e,t)}if(Gs(),ml=n,ul.current=i,null!==fl)throw Error(r(261));return gl=null,vl=0,Sl}function ic(){for(;null!==fl;)rc(fl)}function sc(){for(;null!==fl&&!$e();)rc(fl)}function rc(e){var t=cl(e.alternate,e,bl);e.memoizedProps=e.pendingProps,null===t?oc(e):fl=t,hl.current=null}function oc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=ha(n,t,bl)))return void(fl=n)}else{if(null!==(n=ja(n,t)))return n.flags&=32767,void(fl=n);if(null===e)return Sl=6,void(fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(fl=t);fl=t=e}while(null!==t);0===Sl&&(Sl=5)}function ac(e,t){var n=bt,i=pl.transition;try{pl.transition=null,bt=1,function(e,t,n){do{lc()}while(null!==Ml);if(0!=(6&ml))throw Error(r(327));var i=e.finishedWork,s=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}(e,o),e===gl&&(fl=gl=null,vl=0),0==(2064&i.subtreeFlags)&&0==(2064&i.flags)||Ll||(Ll=!0,gc(tt,(function(){return lc(),null}))),o=0!=(15990&i.flags),0!=(15990&i.subtreeFlags)||o){o=pl.transition,pl.transition=null;var a=bt;bt=1;var l=ml;ml|=4,hl.current=null,function(e,t){if(li(e=ai())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==o||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===s&&(l=a),p===o&&++u===i&&(c=a),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for($i={focusedElem:e,selectionRange:n},Ba=t;null!==Ba;)if(e=(t=Ba).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ba=e;else for(;null!==Ba;){t=Ba;try{var g=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:break;case 1:if(null!==g){var f=g.memoizedProps,v=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:Us(t.type,f),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;if(1===S.nodeType)S.textContent="";else if(9===S.nodeType){var E=S.body;null!=E&&(E.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(e){dc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ba=e;break}Ba=t.return}g=Wa,Wa=!1}(e,i),function(e,t){for(Ba=t;null!==Ba;){var n=(t=Ba).deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{tl(e,s,t);var r=s.alternate;null!==r&&(r.return=null),s.return=null}catch(e){dc(s,t,e)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,Ba=n;else for(;null!==Ba;){t=Ba;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var a=t.alternate;if(null!==a){var l=a.ref;null!==l&&("function"==typeof l?l(null):l.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(Nl=Qe())}break;case 22:var d=null!==t.memoizedState,u=t.alternate,h=null!==u&&null!==u.memoizedState;e:{s=d;for(var p=null,m=i=n=t;;){if(5===m.tag){if(null===p){p=m;var g=m.stateNode;if(s){var f=g.style;"function"==typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"}else{var v=m.stateNode,b=m.memoizedProps.style,y=null!=b&&b.hasOwnProperty("display")?b.display:null;v.style.display=ge("display",y)}}}else if(6===m.tag)null===p&&(m.stateNode.nodeValue=s?"":m.memoizedProps);else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===i)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===i)break;for(;null===m.sibling;){if(null===m.return||m.return===i)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}if(d&&!h&&0!=(1&n.mode)){Ba=n;for(var S=n.child;null!==S;){for(n=Ba=S;null!==Ba;){var E=(i=Ba).child;switch(i.tag){case 0:case 11:case 14:case 15:za(4,i,i.return);break;case 1:Va(i,i.return);var T=i.stateNode;if("function"==typeof T.componentWillUnmount){var O=i.return;try{T.props=i.memoizedProps,T.state=i.memoizedState,T.componentWillUnmount()}catch(e){dc(i,O,e)}}break;case 5:Va(i,i.return);break;case 22:if(null!==i.memoizedState){al(n);continue}}null!==E?(E.return=i,Ba=E):al(n)}S=S.sibling}}}switch(4102&o){case 2:Xa(t),t.flags&=-3;break;case 6:Xa(t),t.flags&=-3,nl(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,nl(t.alternate,t);break;case 4:nl(t.alternate,t)}}catch(e){dc(t,t.return,e)}if(null!==(n=t.sibling)){n.return=t.return,Ba=n;break}Ba=t.return}}}(e,i),ci($i),$i=null,e.current=i,sl(i,e,s),Ze(),ml=l,bt=a,pl.transition=o}else e.current=i;if(Ll&&(Ll=!1,Ml=e,Dl=s),0===(o=e.pendingLanes)&&(Cl=null),function(e){if(rt&&"function"==typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128==(128&e.current.flags))}catch(e){}}(i.stateNode),Gl(e,Qe()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(Il)throw Il=!1,e=kl,kl=null,e;0!=(1&Dl)&&0!==e.tag&&lc(),0!=(1&(o=e.pendingLanes))?e===xl?Rl++:(Rl=0,xl=e):Rl=0,xs()}(e,t,n)}finally{pl.transition=i,bt=n}return null}function lc(){if(null!==Ml){var e=yt(Dl),t=pl.transition,n=bt;try{if(pl.transition=null,bt=16>e?16:e,null===Ml)var i=!1;else{if(e=Ml,Ml=null,Dl=0,0!=(6&ml))throw Error(r(331));var s=ml;for(ml|=4,Ba=e.current;null!==Ba;){var o=Ba,a=o.child;if(0!=(16&Ba.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Ba=d;null!==Ba;){var u=Ba;switch(u.tag){case 0:case 11:case 15:za(8,u,o)}var h=u.child;if(null!==h)h.return=u,Ba=h;else for(;null!==Ba;){var p=(u=Ba).sibling,m=u.return;if($a(u),u===d){Ba=null;break}if(null!==p){p.return=m,Ba=p;break}Ba=m}}}var g=o.alternate;if(null!==g){var f=g.child;if(null!==f){g.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}Ba=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Ba=a;else e:for(;null!==Ba;){if(0!=(2048&(o=Ba).flags))switch(o.tag){case 0:case 11:case 15:za(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Ba=b;break e}Ba=o.return}}var y=e.current;for(Ba=y;null!==Ba;){var S=(a=Ba).child;if(0!=(2064&a.subtreeFlags)&&null!==S)S.return=a,Ba=S;else e:for(a=y;null!==Ba;){if(0!=(2048&(l=Ba).flags))try{switch(l.tag){case 0:case 11:case 15:Ka(9,l)}}catch(e){dc(l,l.return,e)}if(l===a){Ba=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Ba=E;break e}Ba=l.return}}if(ml=s,xs(),rt&&"function"==typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(e){}i=!0}return i}finally{bt=n,pl.transition=t}}return!1}function cc(e,t,n){Js(e,t=ra(0,t=Jo(n,t),1)),t=Hl(),null!==(e=Vl(e,1))&&(ft(e,1,t),Gl(e,t))}function dc(e,t,n){if(3===e.tag)cc(e,e,n);else for(;null!==t;){if(3===t.tag){cc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Cl||!Cl.has(i))){Js(t,e=oa(t,e=Jo(n,e),1)),e=Hl(),null!==(t=Vl(t,1))&&(ft(t,1,e),Gl(t,e));break}}t=t.return}}function uc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Hl(),e.pingedLanes|=e.suspendedLanes&n,gl===e&&(vl&n)===n&&(4===Sl||3===Sl&&(130023424&vl)===vl&&500>Qe()-Nl?Xl(e,0):_l|=n),Gl(e,t)}function hc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=dt,0==(130023424&(dt<<=1))&&(dt=4194304)));var n=Hl();null!==(e=Vl(e,t))&&(ft(e,t,n),Gl(e,n))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),hc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),hc(e,n)}function gc(e,t){return Ye(e,t)}function fc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vc(e,t,n,i){return new fc(e,t,n,i)}function bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function yc(e,t){var n=e.alternate;return null===n?((n=vc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Sc(e,t,n,i,s,o){var a=2;if(i=e,"function"==typeof e)bc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case O:return Ec(n.children,s,o,t);case _:a=8,s|=8;break;case A:return(e=vc(12,n,t,2|s)).elementType=A,e.lanes=o,e;case I:return(e=vc(13,n,t,s)).elementType=I,e.lanes=o,e;case k:return(e=vc(19,n,t,s)).elementType=k,e.lanes=o,e;case M:return Tc(n,s,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case N:a=9;break e;case P:a=11;break e;case C:a=14;break e;case L:a=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=vc(a,n,t,s)).elementType=e,t.type=i,t.lanes=o,t}function Ec(e,t,n,i){return(e=vc(7,e,i,t)).lanes=n,e}function Tc(e,t,n,i){return(e=vc(22,e,i,t)).elementType=M,e.lanes=n,e.stateNode={},e}function Oc(e,t,n){return(e=vc(6,e,null,t)).lanes=n,e}function _c(e,t,n){return(t=vc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ac(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wc(e,t,n,i,s,r,o,a,l){return e=new Ac(e,t,n,a,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=vc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},Zs(r),e}function Nc(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Pc(e){if(!e)return Es;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ws(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(ws(n))return Is(e,n,t)}return t}function Ic(e,t,n,i,s,r,o,a,l){return(e=wc(n,i,!0,e,0,r,0,a,l)).context=Pc(null),n=e.current,(r=Xs(i=Hl(),s=Fl(n))).callback=null!=t?t:null,Js(n,r),e.current.lanes=s,ft(e,s,i),Gl(e,i),e}function kc(e,t,n,i){var s=t.current,r=Hl(),o=Fl(s);return n=Pc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Xs(r,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),Js(s,t),null!==(e=Bl(s,o,r))&&er(e,s,o),o}function Cc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Os.current)ma=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return ma=!1,function(e,t,n){switch(t.tag){case 3:_a(t),Dr();break;case 5:$r(t);break;case 1:ws(t.type)&&ks(t);break;case 4:Yr(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Ss(Hs,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Ss(Qr,1&Qr.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Pa(e,t,n):(Ss(Qr,1&Qr.current),null!==(e=xa(e,t,n))?e.sibling:null);Ss(Qr,1&Qr.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(128&e.flags)){if(i)return Ra(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(Qr,Qr.current),i)break;return null;case 22:case 23:return t.lanes=0,ya(e,t,n)}return xa(e,t,n)}(e,t,n);ma=0!=(131072&e.flags)}else ma=!1,wr&&0!=(1048576&t.flags)&&Er(t,mr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var s=As(t,Ts.current);Ks(t,n),s=mo(null,t,i,e,s,n);var o=go();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ws(i)?(o=!0,ks(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Zs(t),s.updater=or,t.stateNode=s,s._reactInternals=t,dr(t,i,e,n),t=Oa(null,t,i,!0,o,n)):(t.tag=0,wr&&o&&Tr(t),ga(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return bc(e)?1:0;if(null!=e){if((e=e.$$typeof)===P)return 11;if(e===C)return 14}return 2}(i),e=Us(i,e),s){case 0:t=Ea(null,t,i,e,n);break e;case 1:t=Ta(null,t,i,e,n);break e;case 11:t=fa(null,t,i,e,n);break e;case 14:t=va(null,t,i,Us(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,Ea(e,t,i,s=t.elementType===i?s:Us(i,s),n);case 1:return i=t.type,s=t.pendingProps,Ta(e,t,i,s=t.elementType===i?s:Us(i,s),n);case 3:e:{if(_a(t),null===e)throw Error(r(387));i=t.pendingProps,s=(o=t.memoizedState).element,Qs(e,t),nr(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,i,n,s=Error(r(423)));break e}if(i!==s){t=Aa(e,t,i,n,s=Error(r(424)));break e}for(Ar=is(t.stateNode.containerInfo.firstChild),_r=t,wr=!0,Nr=null,n=Br(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Dr(),i===s){t=xa(e,t,n);break e}ga(e,t,i,n)}t=t.child}return t;case 5:return $r(t),null===e&&Cr(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,Zi(i,s)?a=null:null!==o&&Zi(i,o)&&(t.flags|=32),Sa(e,t),ga(e,t,a,n),t.child;case 6:return null===e&&Cr(t),null;case 13:return Pa(e,t,n);case 4:return Yr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Fr(t,null,i,n):ga(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,fa(e,t,i,s=t.elementType===i?s:Us(i,s),n);case 7:return ga(e,t,t.pendingProps,n),t.child;case 8:case 12:return ga(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ss(Hs,i._currentValue),i._currentValue=a,null!==o)if(ni(o.value,a)){if(o.children===s.children&&!Os.current){t=xa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Xs(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),zs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),zs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ga(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Ks(t,n),i=i(s=Ys(s)),t.flags|=1,ga(e,t,i,n),t.child;case 14:return s=Us(i=t.type,t.pendingProps),va(e,t,i,s=Us(i.type,s),n);case 15:return ba(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Us(i,s),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ws(i)?(e=!0,ks(t)):e=!1,Ks(t,n),lr(t,i,s),dr(t,i,s,n),Oa(null,t,i,!0,e,n);case 19:return Ra(e,t,n);case 22:return ya(e,t,n)}throw Error(r(156,t.tag))};var Dc="function"==typeof reportError?reportError:function(e){console.error(e)};function Rc(e){this._internalRoot=e}function xc(e){this._internalRoot=e}function jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Uc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Hc(){}function Fc(e,t,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if("function"==typeof s){var a=s;s=function(){var e=Cc(o);a.call(e)}}kc(t,o,e,s)}else o=function(e,t,n,i,s){if(s){if("function"==typeof i){var r=i;i=function(){var e=Cc(o);r.call(e)}}var o=Ic(t,i,e,0,null,!1,0,"",Hc);return e._reactRootContainer=o,e[ls]=o.current,ji(8===e.nodeType?e.parentNode:e),Zl(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof i){var a=i;i=function(){var e=Cc(l);a.call(e)}}var l=wc(e,0,!1,null,0,!1,0,"",Hc);return e._reactRootContainer=l,e[ls]=l.current,ji(8===e.nodeType?e.parentNode:e),Zl((function(){kc(t,l,n,i)})),l}(n,t,e,s,i);return Cc(o)}xc.prototype.render=Rc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));kc(e,t,null,null)},xc.prototype.unmount=Rc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zl((function(){kc(null,e,null,null)})),t[ls]=null}},xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ot();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&xt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),Gl(t,Qe()),0==(6&ml)&&(Pl=Qe()+500,xs()))}break;case 13:var i=Hl();Zl((function(){return Bl(e,1,i)})),Mc(e,1)}},Et=function(e){13===e.tag&&(Bl(e,134217728,Hl()),Mc(e,134217728))},Tt=function(e){if(13===e.tag){var t=Hl(),n=Fl(e);Bl(e,n,t),Mc(e,n)}},Ot=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Te=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=gs(i);if(!s)throw Error(r(90));Y(i),X(i,s)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=$l,Ie=Zl;var Bc={usingClientEntryPoint:!1,Events:[ps,ms,gs,we,Ne,$l]},Vc={findFiberByHostInstance:hs,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Gc={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{st=Wc.inject(Gc),rt=Wc}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!jc(t))throw Error(r(200));return Nc(e,t,null,n)},t.createRoot=function(e,t){if(!jc(e))throw Error(r(299));var n=!1,i="",s=Dc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=wc(e,1,!1,null,0,n,0,i,s),e[ls]=t.current,ji(8===e.nodeType?e.parentNode:e),new Rc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=ze(t))?null:e.stateNode},t.flushSync=function(e){return Zl(e)},t.hydrate=function(e,t,n){if(!Uc(t))throw Error(r(200));return Fc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,o="",a=Dc;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Ic(t,null,e,1,null!=n?n:null,s,0,o,a),e[ls]=t.current,ji(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new xc(t)},t.render=function(e,t,n){if(!Uc(t))throw Error(r(200));return Fc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Uc(e))throw Error(r(40));return!!e._reactRootContainer&&(Zl((function(){Fc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ls]=null}))})),!0)},t.unstable_batchedUpdates=$l,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Uc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Fc(e,t,n,!1,i)},t.version="18.0.0-fc46dba67-20220329"},20745:(e,t,n)=>{"use strict";var i=n(73935);t.s=i.createRoot,i.hydrateRoot},73935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},69590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,i="function"==typeof Set,s="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,l,c,d;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(!r(e[l],o[l]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(d=e.entries();!(l=d.next()).done;)if(!o.has(l.value[0]))return!1;for(d=e.entries();!(l=d.next()).done;)if(!r(l.value[1],o.get(l.value[0])))return!1;return!0}if(i&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(d=e.entries();!(l=d.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=a;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!r(e[c[l]],o[c[l]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return r(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},75251:(e,t,n)=>{"use strict";var i=n(67294),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,r={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:s,type:e,key:c,ref:d,props:r,_owner:a.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},72408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function v(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||m}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var S=y.prototype=new b;S.constructor=y,g(S,v.prototype),S.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,O={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var s,r={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,s)&&!_.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:e,key:o,ref:a,props:r,_owner:O.current}}function w(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,s,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===r?"."+P(l,0):r,E(o)?(s="",null!=e&&(s=e.replace(N,"$&/")+"/"),I(o,t,s,"",(function(e){return e}))):null!=o&&(w(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",E(e))for(var c=0;c<e.length;c++){var d=r+P(a=e[c],c);l+=I(a,t,s,d,o)}else if("function"==typeof(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e)))for(e=d.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,s,d=r+P(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var i=[],s=0;return I(e,i,"","",(function(e){return t.call(n,e,s++)})),i}function C(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},M={transition:null},D={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:M,ReactCurrentOwner:O};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=o,t.PureComponent=y,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,i){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),r=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=O.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T.call(t,c)&&!_.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:r,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},85893:(e,t,n)=>{"use strict";e.exports=n(75251)},60053:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,o=s>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,d=e[c];if(0>r(l,n))c<s&&0>r(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<s&&0>r(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,g=!1,f=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var t=i(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function E(e){if(f=!1,S(e),!g)if(null!==i(c))g=!0,M(T);else{var t=i(d);null!==t&&D(E,t.startTime-e)}}function T(e,n){g=!1,f&&(f=!1,b(w),w=-1),m=!0;var r=p;try{for(S(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"==typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?h.callback=a:h===i(c)&&s(c),S(n)}else s(c);h=i(c)}if(null!==h)var l=!0;else{var u=i(d);null!==u&&D(E,u.startTime-n),l=!1}return l}finally{h=null,p=r,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var O,_=!1,A=null,w=-1,N=5,P=-1;function I(){return!(t.unstable_now()-P<N)}function k(){if(null!==A){var e=t.unstable_now();P=e;var n=!0;try{n=A(!0,e)}finally{n?O():(_=!1,A=null)}}else _=!1}if("function"==typeof y)O=function(){y(k)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,L=C.port2;C.port1.onmessage=k,O=function(){L.postMessage(null)}}else O=function(){v(k,0)};function M(e){A=e,_||(_=!0,O())}function D(e,n){w=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,M(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,r){var o=t.unstable_now();switch("object"==typeof r&&null!==r?r="number"==typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(e.sortIndex=r,n(d,e),null===i(c)&&e===i(d)&&(f?(b(w),w=-1):f=!0,D(E,r-o))):(e.sortIndex=a,n(c,e),g||m||(g=!0,M(T))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},63840:(e,t,n)=>{"use strict";e.exports=n(60053)},61040:(e,t,n)=>{"use strict";var i=n(11132),s=n(22566),r=n(21924)("String.prototype.replace"),o=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){var e=s(i(this));return r(r(e,o,""),a,"")}},46057:(e,t,n)=>{"use strict";var i=n(55559),s=n(4289),r=n(61040),o=n(30254),a=n(60029),l=i(o());s(l,{getPolyfill:o,implementation:r,shim:a}),e.exports=l},11132:(e,t,n)=>{"use strict";e.exports=n(37981)},22566:(e,t,n)=>{"use strict";var i=n(18989),s=i("%String%"),r=i("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new r("Cannot convert a Symbol value to a string");return s(e)}},37981:(e,t,n)=>{"use strict";var i=n(18989)("%TypeError%");e.exports=function(e,t){if(null==e)throw new i(t||"Cannot call method on "+e);return e}},18989:(e,t,n)=>{"use strict";var i,s=SyntaxError,r=Function,o=TypeError,a=function(e){try{return Function('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new o},d=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,u=n(41405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},p=a("async function* () {}"),m=p?p.prototype:i,g=m?m.prototype:i,f="undefined"==typeof Uint8Array?i:h(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":u?h([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":a("async function () {}"),"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":g?h(g):i,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":a("function* () {}"),"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?h(h([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?h((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?h((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?h(""[Symbol.iterator]()):i,"%Symbol%":u?Symbol:i,"%SyntaxError%":s,"%ThrowTypeError%":d,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(58612),S=n(17642),E=y.call(Function.call,Array.prototype.concat),T=y.call(Function.apply,Array.prototype.splice),O=y.call(Function.call,String.prototype.replace),_=y.call(Function.call,String.prototype.slice),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,N=function(e){var t=_(e,0,1),n=_(e,-1);if("%"===t&&"%"!==n)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var i=[];return O(e,A,(function(e,t,n,s){i[i.length]=n?O(s,w,"$1"):t||e})),i},P=function(e,t){var n,i=e;if(S(b,i)&&(i="%"+(n=b[i])[0]+"%"),S(v,i)){var r=v[i];if(void 0===r&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:r}}throw new s("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n=N(e),i=n.length>0?n[0]:"",r=P("%"+i+"%",t),a=r.name,c=r.value,d=!1,u=r.alias;u&&(i=u[0],T(n,E([0,1],u)));for(var h=1,p=!0;h<n.length;h+=1){var m=n[h],g=_(m,0,1),f=_(m,-1);if(('"'===g||"'"===g||"`"===g||'"'===f||"'"===f||"`"===f)&&g!==f)throw new s("property names with quotes must have matching quotes");if("constructor"!==m&&p||(d=!0),S(v,a="%"+(i+="."+m)+"%"))c=v[a];else if(null!=c){if(!(m in c)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&h+1>=n.length){var b=l(c,m);c=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:c[m]}else p=S(c,m),c=c[m];p&&!d&&(v[a]=c)}}return c}},30254:(e,t,n)=>{"use strict";var i=n(61040);e.exports=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:i}},60029:(e,t,n)=>{"use strict";var i=n(4289),s=n(30254);e.exports=function(){var e=s();return i(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},67121:(e,t,n)=>{"use strict";e=n.hmd(e);!function(e){var t,n=e.Symbol;if("function"==typeof n)if(n.observable)t=n.observable;else{t=n.for("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch(e){}}else t="@@observable"}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},5419:(e,t,n)=>{"use strict";n.d(t,{ej:()=>l,kG:()=>c,U6:()=>p});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};!function(e){function t(){var t=this||self;t.globalThis=t,delete e.prototype._T_}"object"!=typeof globalThis&&(this?t():(e.defineProperty(e.prototype,"_T_",{configurable:!0,get:t}),_T_))}(Object);const s=globalThis;var r="Invariant Violation",o=Object.setPrototypeOf,a=void 0===o?function(e,t){return e.__proto__=t,e}:o,l=function(e){function t(n){void 0===n&&(n=r);var i=e.call(this,"number"==typeof n?r+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return i.framesToPop=1,i.name=r,a(i,t.prototype),i}return function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);function c(e,t){if(!e)throw new l(t)}var d=["log","warn","error","silent"],u=d.indexOf("log");function h(e){return function(){if(d.indexOf(e)>=u)return console[e].apply(console,arguments)}}function p(e){var t=d[u];return u=Math.max(0,d.indexOf(e)),t}!function(e){e.log=h("log"),e.warn=h("warn"),e.error=h("error")}(c||(c={}));var m=s.process||{env:{}};if(!s.process)try{Object.defineProperty(s,"process",{value:m})}catch(e){}},96542:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LazyLoader:()=>LazyLoader,loadInterface:()=>pt});var i,s,r,o,a,l,c,d=n(70446),u=n(14877);!function(e){e.FORWARD="FORWARD",e.LEFT="LEFT",e.RIGHT="RIGHT",e.BACK="BACK",e.UP="UP",e.DOWN="DOWN"}(i||(i={}));!function(e){e.INSIDE="mode.inside",e.OUTSIDE="mode.outside",e.DOLLHOUSE="mode.dollhouse",e.FLOORPLAN="mode.floorplan",e.TRANSITIONING="mode.transitioning"}(s||(s={}));!function(e){e.INSTANT="transition.instant",e.FLY="transition.fly",e.FADEOUT="transition.fade",e.MOVEFADE="transition.movefade"}(r||(r={}));class convertRotation_Conversion{constructor(e){this.THREE=e,this.tempEuler=new e.Euler}quaternionToRotation(e,t){const n=this.tempEuler.setFromQuaternion(e,convertRotation_Conversion.eulerOrder),i=t||{};return i.x=this.THREE.MathUtils.radToDeg(n.x),i.y=this.THREE.MathUtils.radToDeg(n.y),i.z=this.THREE.MathUtils.radToDeg(n.z),i}rotationToQuaternion(e,t){const n=t||new this.THREE.Quaternion;return this.tempEuler.x=this.THREE.MathUtils.degToRad(e.x),this.tempEuler.y=this.THREE.MathUtils.degToRad(e.y),this.tempEuler.z=this.THREE.MathUtils.degToRad(e.z||0),this.tempEuler.order=convertRotation_Conversion.eulerOrder,n.setFromEuler(this.tempEuler)}}convertRotation_Conversion.eulerOrder="YXZ",function(e){e.LEGACY="legacy",e.API="api"}(o||(o={})),function(e){e.PHASE_CHANGE="application.phasechange",e.APP_CHANGE="application.appchange"}(a||(a={})),function(e){e.UNKNOWN="application.unknown",e.WEBVR="application.webvr",e.SHOWCASE="application.showcase",e.WORKSHOP="application.workshop"}(l||(l={})),function(e){e.UNINITIALIZED="appphase.uninitialized",e.WAITING="appphase.waiting",e.LOADING="appphase.loading",e.STARTING="appphase.starting",e.PLAYING="appphase.playing",e.ERROR="appphase.error"}(c||(c={}));n(17403);var h=n(5477);const p=new h.Z("asset.registerTexture");class SvgLoader{constructor(e){this.queue=e}async load(e){const t=await this.queue.get(e,{responseType:"text"}),n=document.createElement("div");n.innerHTML=t;const i=n.querySelector("svg");if(!i)throw Error("Failed trying to load "+e+"as an svg.");const s=i.getAttribute("width"),r=i.getAttribute("height");return s||r?(r&&!s&&(p.warn(e,"does not have a defined width. Defaulting width equal to height"),i.setAttribute("width",r)),s&&!r&&(p.warn(e,"does not have a defined height. Defaulting height equal to width"),i.setAttribute("height",s))):(p.warn(e,"does not have a defined size. Defaulting to a 128x128 resolution"),i.setAttribute("width",SvgLoader.defaultResolution),i.setAttribute("height",SvgLoader.defaultResolution)),new Promise((e=>{const t=new Image;t.onload=()=>e(t),t.src=URL.createObjectURL(new Blob([i.outerHTML],{type:"image/svg+xml"}))}))}}SvgLoader.defaultResolution="128";Math.PI;var m;!function(e){e.MOVE="camera.move"}(m||(m={}));new h.Z("broadcast.move");new h.Z("command.zoom");var g,f;!function(e){e.CHANGE_START="floors.changestart",e.CHANGE_END="floors.changeend"}(g||(g={})),function(e){e.POSITION_UPDATED="label.positionupdated"}(f||(f={}));var v,b,y,S,E=n(31511);!function(e){e.HOVER="tag.hover",e.CLICK="tag.click",e.LINK_OPEN="tag.linkopen"}(v||(v={})),function(e){e.NONE="mattertag.media.none",e.PHOTO="mattertag.media.photo",e.VIDEO="mattertag.media.video",e.RICH="mattertag.media.rich"}(b||(b={})),function(e){e.NONE="tag.chunk.none",e.TEXT="tag.chunk.text",e.LINK="tag.chunk.link"}(y||(y={})),function(e){e.NAVIGATION="tag.link.nav",e.MODEL="tag.link.model",e.EXT_LINK="tag.link.ext"}(S||(S={}));new h.Z("mattertag-util");new h.Z("mattertag.add");new h.Z("mattertag.edit");var T;!function(e){e.LABEL="label",e.DESCRIPTION="description",e.MEDIA="media"}(T||(T={}));new h.Z("command.editOpacity");n(66745),n(6157);var O=n(14832);E.Uv.Transition.FLY,O.n.Interpolate,E.Uv.Transition.FADEOUT,O.n.FadeToBlack,E.Uv.Transition.INSTANT,O.n.Instant;var _;!function(e){e.CHANGE_START="viewmode.changestart",e.CHANGE_END="viewmode.changeend"}(_||(_={}));new h.Z("move-to-mode-command");var A;!function(e){e.MODEL_LOADED="model.loaded"}(A||(A={}));new h.Z("Plugin.load");var w;!function(e){e.NONE="intersectedobject.none",e.MODEL="intersectedobject.model",e.TAG="intersectedobject.tag",e.SWEEP="intersectedobject.sweep",e.UNKNOWN="intersectedobject.unknown"}(w||(w={}));new h.Z("command.takeScreenshot");var N,P;!function(e){e.Base64JPG="screenshot.base64.jpg",e.ArrayBufferJPG="screenshot.arraybuffer.jpg"}(N||(N={}));class EquirectangularExecutor{constructor(e,t,n,i,s,r,o,a){this.renderer=i,this.renderToTexture=s,this.viewmodeData=r,this.sweepData=o,this.sweepTextureLoader=a,this.Viewmode=t.Viewmode,this.requestTarget=n.requestTarget,this.encodeRenderTarget=n.encodeRenderTarget,this.jpegAsBase64=n.jpegAsBase64,this.getXmp=n.getXmp,this.getOrientedAngleTo=n.getOrientedAngleTo,this.forward=new e.Vector3(0,0,-1),this.sweepForward=new e.Vector3,this.viewForward=new e.Vector3}validateInput(e){return e}async exec(e,t,n){if(!this.sweepData.currentSweep||this.viewmodeData.currentMode!==this.Viewmode.Panorama)throw new Error("Can only capture equirectangular projections while stationary in a sweep");const i=this.renderer.getScene().camera,s=this.sweepData.getSweep(this.sweepData.currentSweep),r=await this.sweepTextureLoader.load(s);this.sweepForward.copy(this.forward),this.sweepForward.copy(this.forward).applyQuaternion(s.rotation).setY(0);const o=this.getOrientedAngleTo(this.sweepForward,i.getWorldDirection(this.viewForward).setY(0))+Math.PI,a=await this.requestTarget();a.setSize(EquirectangularExecutor.equirectangularRes.width,EquirectangularExecutor.equirectangularRes.height),this.renderToTexture.renderEquirectangular(r,a.target,o);const l=await this.encodeRenderTarget(a,this.getXmp(a.width,a.height,0,0));t.return(this.jpegAsBase64(l))}}EquirectangularExecutor.equirectangularRes={width:4096,height:2048},function(e){e.CLICK="INTERACTION.CLICK",e.HOVER="INTERACTION.HOVER",e.DRAG="INTERACTION.DRAG",e.DRAG_BEGIN="INTERACTION.DRAG_BEGIN",e.DRAG_END="INTERACTION.DRAG_END",e.POINTER_MOVE="INTERACTION.POINTER_MOVE",e.POINTER_BUTTON="INTERACTION.POINTER_BUTTON",e.SCROLL="INTERACTION.SCROLL",e.KEY="INTERACTION.KEY",e.LONG_PRESS_START="INTERACTION.LONG_PRESS_START",e.LONG_PRESS_END="INTERACTION.LONG_PRESS_END",e.MULTI_SWIPE="INTERACTION.MULTI_SWIPE",e.MULTI_SWIPE_END="INTERACTION.MULTI_SWIPE_END",e.PINCH="INTERACTION.PINCH",e.PINCH_END="INTERACTION.PINCH_END",e.ROTATE="INTERACTION.ROTATE",e.ROTATE_END="INTERACTION.ROTATE_END"}(P||(P={}));class SensorReadingCollection{constructor(e){this.sensor=e,this.sourceMap=new Map,this.reverseSourceLookup=new Map,this.sourceId=0,this._data={}}get data(){return this._data}isItemEqual(e,t){return e.data[t].inRange===this.data[t].inRange&&e.data[t].inView===this.data[t].inView}update(){for(const[i,s]of this.sensor.readings){const r=this.addOrGetSourceId(i),o=this._data[r]||{};o.inRange=s.inRange,o.inView=s.inView,o.distanceSquared=s.distanceSq,o.direction=(e=s,t="direction",(n=(n=o.direction)||{}).x=e[t].x,n.y=e[t].y,n.z=e[t].z,n),this._data[r]=o}var e,t,n;for(const e in this.data){const t=this.reverseSourceLookup.get(e);t&&!this.sensor.readings.get(t)&&(this.sourceMap.delete(t),this.reverseSourceLookup.delete(e),delete this._data[e])}}clear(){this._data={}}addOrGetSourceId(e){const t=this.sourceMap.get(e);if(t)return t;const n="source-"+ ++this.sourceId;return this.sourceMap.set(e,n),this.reverseSourceLookup.set(n,e),n}}class DependencyFetcher_DependencyFetcher{constructor(...e){this.dependencies=e}async getDependencies(){return Promise.all(this.dependencies)}static extend(e,...t){return new DependencyFetcher_DependencyFetcher(...e.dependencies,...t)}static combine(e,t){return new DependencyFetcher_DependencyFetcher(...e.dependencies,...t.dependencies)}}class ClassFactory_ClassFactory{constructor(e,...t){this.ctor=e,this.args=t}create(...e){return new this.ctor(...this.args,...e)}}class SdkCollection_SdkCollection{constructor(e,t,n){this.dependencies=e,this.subscriptionFactory=t,this.dataFactory=n,this.dirty=!0,this.observers=new Set,this.currentData=n.create(...e);this.changeSubscription=this.subscriptionFactory.create(new class DirtinessObserver{constructor(e){this.collection=e}onChanged(){this.collection.dirty=!0;for(const e of this.collection.observers)e.onChanged()}}(this),...this.dependencies),this.changeSubscription.cancel()}static async create(e,t,n){const i=await e.getDependencies();return new SdkCollection_SdkCollection(i,t,n)}getData(){return this.currentData.data}subscribe(e){const t=this.dependencies;const n=new class CollectionChangeObserver{constructor(e){this.sdkCollection=e,this.needsUpdate=!0,this.diffRecord={added:new Map,removed:new Map,updated:new Map},this.dataView=e.dataFactory.create(...t)}get dirty(){return this.needsUpdate}readDiff(){const{added:e,removed:t,updated:n}=this.diffRecord;if(e.clear(),t.clear(),n.clear(),!this.dirty)return this.diffRecord;this.sdkCollection.update();const i=this.sdkCollection.currentData;for(const t in i.data)this.dataView.data.hasOwnProperty(t)?this.dataView.isItemEqual(i,t)||n.set(t,i.data[t]):e.set(t,i.data[t]);for(const e in this.dataView.data)i.data.hasOwnProperty(e)||t.set(e,this.dataView.data[e]);return this.dataView.update(),this.needsUpdate=!1,this.diffRecord}onChanged(){this.needsUpdate=!0}renew(){this.sdkCollection.addObserver(this)}cancel(){this.sdkCollection.removeObserver(this)}}(this);return this.addObserver(n),n}update(){this.dirty&&(this.currentData.update(),this.dirty=!1)}addObserver(e){0===this.observers.size&&(this.changeSubscription.renew(),this.dirty=!0),this.observers.add(e)}removeObserver(e){this.observers.delete(e),0===this.observers.size&&(this.changeSubscription.cancel(),this.currentData.clear())}}var I=n(90614),k=n(46686);function C(e,t){!function(e,t){e.x=t.x,e.y=t.y}(e,t),e.z=t.z}var L=n(74566);class SensorStateObservable{constructor(){this._data={origin:{x:0,y:0,z:0},forward:{x:0,y:0,z:-1}}}get data(){return this._data}equals(e){const t=1e-5;return(0,L.wo)(this.data.origin,e.data.origin,t)&&(0,L.wo)(this.data.forward,e.data.forward,t)}copy(e){C(this._data.origin,e.data.origin),C(this._data.forward,e.data.forward)}update(e){C(this._data.origin,e.frustum.origin),C(this._data.forward,e.frustum.forward)}}var M=n(13855);class executor_createSensor_CreateSensorExecutor{constructor(e,t,n,i,s){this.sdkModule=e,this.sensorFactories=t,this.sensors=n,this.sensorMap=i,this.removerMap=s}validateInput(e){if(!(0,M.p)(I.dE,e.type))throw Error(e.type+" is not a valid sensor type");return this.sensorFactories[e.type].validateInput(e)}async exec(e,t,n){const i=this.sensorFactories[e.type].create(e,this.sensors),s="sensor-"+ ++executor_createSensor_CreateSensorExecutor.nextSensorId;this.sensorMap.set(s,i);const r=k.l.create(new DependencyFetcher_DependencyFetcher(i),new SensorStateSubscriptionFactory,new ClassFactory_ClassFactory(SensorStateObservable)),o=this.sdkModule.addObservable(s,r),a=SdkCollection_SdkCollection.create(new DependencyFetcher_DependencyFetcher(i),new SensorReadingSubscriptionFactory,new ClassFactory_ClassFactory(SensorReadingCollection)),l=this.sdkModule.addCollection(s,a);this.removerMap.set(s,{dispose(){o.dispose(),l.dispose()}}),t.return({sensorId:s})}}executor_createSensor_CreateSensorExecutor.nextSensorId=0;class SensorStateSubscriptionFactory{create(e,t){return t.frustum.observe(new DependencyObserverAdaptor(e))}}class SensorReadingSubscriptionFactory{create(e,t){return t.onReadingsUpdated(new DependencyObserverAdaptor(e))}}class DependencyObserverAdaptor{constructor(e){this.dependencyObserver=e}notify(){this.dependencyObserver.onChanged()}}var D=n(44155);Math.PI;class executor_createSource_CreateSourceExecutor{constructor(e,t){this.sourceFactories=e,this.sourceMap=t}validateInput(e){if(!(0,M.p)(D.PO,e.type))throw Error(e.type+" is not a valid source type");return this.sourceFactories[e.type].validateInput(e)}exec(e,t,n){const i=this.sourceFactories[e.type].create(e),s="source-"+ ++executor_createSource_CreateSourceExecutor.nextSourceId;this.sourceMap.set(s,i),t.return({sourceId:s,type:e.type,volume:i.describeVolume()})}}executor_createSource_CreateSourceExecutor.nextSourceId=0;var R,x,j;!function(e){e.FPS="stat.fps"}(R||(R={}));!function(e){e.ALIGNED="aligned",e.UNALIGNED="unaligned"}(x||(x={})),function(e){e.UNPLACED="unplaced",e.AUTO="auto",e.MANUAL="manual"}(j||(j={}));var U,H,F,B=n(85111);class CurrentSweepObservable{constructor(e,t){this.currentSweep=Object.assign(Object.assign({},CurrentSweepObservable.empty),{floorInfo:Object.assign({},CurrentSweepObservable.empty.floorInfo),neighbors:[],position:Object.assign({},CurrentSweepObservable.empty.position),rotation:Object.assign({},CurrentSweepObservable.empty.rotation)}),this.Viewmode=e.Viewmode,this.sweepPlacementConverter=t.sweepPlacementConverter}get data(){return this.currentSweep}equals(e){const t=B.Z.epsilon;return this.currentSweep.id===e.data.id&&this.currentSweep.enabled===e.data.enabled&&this.currentSweep.alignmentType===e.data.alignmentType&&this.currentSweep.placementType===e.data.placementType&&this.currentSweep.floorInfo.id===e.data.floorInfo.id&&this.currentSweep.floorInfo.sequence===e.data.floorInfo.sequence&&this.compareNeighbors(e.currentSweep)&&(0,L.wo)(this.currentSweep.position,e.data.position,t)&&(0,L.wo)(this.currentSweep.rotation,e.data.rotation,t)}copy(e){this.copySweep(e.data)}update(e,t,n,i,s){const r=e.currentSweepObject;if(!r||e.transition.active||t.transition.active||!t.isInside()&&t.currentMode!==this.Viewmode.Outdoor)return void this.copySweep(CurrentSweepObservable.empty);let o;try{o=n.getFloor(r.floorId||"")}catch(e){o={id:void 0,index:void 0}}const a=i.getIdForSweep(r);this.currentSweep.uuid=r.uuid,this.currentSweep.sid=a,this.currentSweep.id=a,this.currentSweep.enabled=r.enabled,this.currentSweep.alignmentType=this.sweepPlacementConverter.toSdkAlignment(r.alignmentType),this.currentSweep.placementType=this.sweepPlacementConverter.toSdkPlacement(r.placementType),this.currentSweep.neighbors=[...r.neighbours],C(this.currentSweep.position,r.position),C(this.currentSweep.rotation,r.rotation),this.currentSweep.alignmentType===x.UNALIGNED&&this.currentSweep.placementType===j.UNPLACED?(this.currentSweep.floorInfo.id=void 0,this.currentSweep.floorInfo.sequence=void 0):(this.currentSweep.floorInfo.id=o.id?s.getIdFromCwfId(o.id):o.id,this.currentSweep.floorInfo.sequence=o.index)}copySweep(e){this.currentSweep.uuid=e.uuid,this.currentSweep.sid=e.sid,this.currentSweep.id=e.id,this.currentSweep.enabled=e.enabled,this.currentSweep.alignmentType=e.alignmentType,this.currentSweep.placementType=e.placementType,this.currentSweep.floorInfo.id=e.floorInfo.id,this.currentSweep.floorInfo.sequence=e.floorInfo.sequence,this.currentSweep.neighbors=[...e.neighbors],C(this.currentSweep.position,e.position),C(this.currentSweep.rotation,e.rotation)}compareNeighbors(e){const t=this.currentSweep.neighbors.length;for(let n=0;n<t;++n)if(this.currentSweep.neighbors[n]!==e.neighbors[n])return!1;return t===e.neighbors.length}}CurrentSweepObservable.empty={uuid:"",sid:"",id:"",enabled:!1,alignmentType:x.ALIGNED,placementType:j.UNPLACED,floorInfo:{id:void 0,sequence:void 0},neighbors:[],position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},function(e){e.ENTER="sweep.enter",e.EXIT="sweep.exit"}(U||(U={}));!function(e){e.ENUM1="test.enum1",e.ENUM2="test.enum2"}(H||(H={})),function(e){e.STARTED="tour.started",e.STOPPED="tour.stopped",e.ENDED="tour.ended",e.STEPPED="tour.stepped"}(F||(F={}));new h.Z("sdk: tours");var V;n(71981);!function(e){e.IMAGE="tag.attachment.image",e.RICH="tag.attachment.rich",e.VIDEO="tag.attachment.video"}(V||(V={}));Symbol.iterator;var G=n(1154),W=n(89034),z=n(93093),K=n(87393),Y=n(26517),q=n(7692),$=n(81052),Z=n(33299),Q=n(8428),X=n(41907),J=n(47076),ee=n(64038),te=n(32548),ne=n(37632),ie=n(23400),se=n(11679),re=n(25551),oe=n(76641),ae=n(90525),le=n(31991),ce=n(75977),de=n(48730),ue=n(57183),he=n(13773),pe=n(65143),me=n(99380),ge=n(40825),fe=n(15019),ve=n(93037);class SettingGetCommand extends ve.m{constructor(e){super(),this.payload={key:e}}}SettingGetCommand.id="SETTING_GET";class SettingUpdateCommand extends ve.m{constructor(e,t){super(),this.payload={key:e,value:t}}}SettingUpdateCommand.id="SETTING_UPDATE";var be=n(26583),ye=n(94772),Se=n(65171),Ee=n(38950),Te=n(34612),Oe=n(23676),_e=n(84586),Ae=n(77364),we=n(77280),Ne=n(22878),Pe=n(12622),Ie=n(92214),ke=n(50084),Ce=n(9986),Le=n(15099),Me=n(82722),De=n(39823),Re=n(56044),xe=n(88507),je=n(61709),Ue=n(81111),He=n(64792),Fe=n(57073),Be=n(97966),Ve=n(368),Ge=n(29755),We=n(61903),ze=n(53549),Ke=n(60649),Ye=n(72699),qe=n(37363),$e=n(49807),Ze=n(19282),Qe=n(17566),Xe=n(28528),Je=n(7471),et=n(39440),tt=n(99160),nt=n(8259),it=n(48452),st=n(18236),rt=n(49315),ot=n(69826),at=n(84428),lt=n(39808),ct=n(51678),dt=n(31013),ut=n(34118),ht=n(64069);class LazyLoader{constructor(){this.module=null,this.loaderReady=new dt.Q,this.loader=null}setLoader(e){this.loader||(this.loader=e,this.loaderReady.resolve())}async getModule(){if(this.module)return this.module;if(await this.loaderReady,this.loader&&(this.module=await this.loader()),this.module)return this.module;throw new Error("There was an error setting up the factory")}}async function pt(e,t,n,i,s){const r=new URLSearchParams(window.location.search);let a=r.get("sdkInterfaceVersion");a||(a=n.interface);const l=new G.M;let c;try{c=await l.load(a)}catch(e){throw Error("Unable to fetch the sdk interface. The sdk will be disabled. "+e)}const d={THREE:at,oEmbed:s},h={MpSdkAuthentication:$.w,RenderLayers:Z.o,OptionsKey:Q.gx,Application:Ce.Mx,AppPhase:Ce.nh,AppPhaseChangeMessage:X.LZ,CameraTransitionType:O.n,GetFloorIntersectCommand:J.Z,StartMoveToFloorMessage:ee.S,EndMoveToFloorMessage:te.P,MoveToFloorIndexCommand:ne.h9,ShowAllFloorsCommand:ne.EU,MattertagMediaType:ht.L0,RemoveMattertagCommand:ie.Gn,CloseAnnotationCommand:st.Aj,TagDescriptionChunkType:se.z,TagLinkType:re.U,AddMattertagCommand:ie.Fz,EditMattertagCommand:ie.Ek,MattertagLinkOpenedMessage:oe.Ik,NavigateToMattertagCommand:ae.Y,ModelDataLoadedMessage:le.Z,ModelColliderTarget:ce.S,NavigateToSweepCommand:de.ju,MeasuringPhase:He.au,SettingGetCommand:SettingGetCommand,SettingUpdateCommand:SettingUpdateCommand,PuckCollider:be.YY,PinClickedMessage:ue.F7,PinHoverChangeMessage:ue.tP,PinHeadMesh:he.$,InstancedPinHeads:fe.z,PinType:pe.Er,ChangePinOpacityCommand:me._Y,MovePinCommand:me.I$,UpdatePinCommand:me.tE,RemovePinCommand:me.OL,FocusOnPinInsideCommand:de.OR,SelectAnnotationCommand:st.oM,SweepAlignmentType:ye.z9,SweepPlacementType:ye.hU,BeginMoveToSweepMessage:Se.Z,EndMoveToSweepMessage:Ee.Z,ToggleToolCommand:Te.tT,Tools:Oe.w1,TourStartedMessage:_e.oR,TourStoppedMessage:_e.NR,TourEndedMessage:_e.Mt,TourSteppedMessage:_e.Vx,Color:Ae.I,Vectors:we.f,Viewmode:Ne.Ey,CommandViewmode:Pe.BD,ChangeViewmodeCommand:Pe._i,BeginSwitchViewmodeMessage:Ie.Z,EndSwitchViewmodeMessage:ke.Z,GetScreenPositionCommand:$e.b,ZoomInCommand:Ze.bj,ZoomResetCommand:Ze.ob,ZoomSetCommand:Ze.ts,SourceType:Xe.SourceType,sensorVolumes:{sphere:Je.b,box:et.k,cylinder:tt.X},TourState:nt.Vs,MediaType:it.DD},p=mt(t),m=function(e,t){const n=(async()=>{const t=(await e.getModuleBySymbol(u.y.MODEL_DATA)).getSignedUrls();return new K.Z(t)})();return{applicationData:e.market.waitForData(Ce.pu),cameraData:e.market.waitForData(Le.M_),canvasData:e.market.waitForData(Me.W),cursorController:e.getModuleBySymbol(u.y.CURSOR_CONTROLLER),deepLinks:e.getModuleBySymbol(u.y.DEEP_LINKS),floorData:e.market.waitForData(De.i),floorViewData:e.market.waitForData(Re.c),labelData:e.market.waitForData(xe.D),mattertagData:e.market.waitForData(je.n),mattertagViewData:e.market.waitForData(Ue.P5),measurementModeData:e.market.waitForData(Fe.X),modelData:e.market.waitForData(Be.T),pinViewData:e.market.waitForData(ge.B),annotationsViewData:e.market.waitForData(rt.A),tagsViewData:e.market.waitForData(ot.n),plugin:e.getModuleBySymbol(u.y.PLUGIN),raycasterData:e.market.waitForData(Ve.P),roomData:e.market.waitForData(Ge.Z),settingsData:e.market.waitForData(We.e),sweepData:e.market.waitForData(ze.Z),sweepViewData:e.market.waitForData(Ke.D),tourData:e.market.waitForData(Ye.k),viewmodeData:e.market.waitForData(qe.O),appPhaseModule:e.getModuleBySymbol(u.y.APP_PHASE),commonControlsModule:e.getModuleBySymbol(u.y.CONTROLS_COMMON),floorCasterModule:e.getModuleBySymbol(u.y.FLOOR_RAYCAST),mattertagDataModule:e.getModuleBySymbol(u.y.MATTERTAG_DATA),mattertagMeshModule:e.getModuleBySymbol(u.y.MATTERTAG_MESH),mattertagViewDataModule:e.getModuleBySymbol(u.y.MATTERTAG_VIEWDATA),meshQuery:e.getModuleBySymbol(u.y.MESH_QUERY),modelDataModule:e.getModuleBySymbol(u.y.MODEL_DATA),modelMeshModule:e.getModuleBySymbol(u.y.MODEL_MESH),meshData:e.market.waitForData(lt._),navigationModule:e.getModuleBySymbol(u.y.NAVIGATION),renderToTextureModule:e.getModuleBySymbol(u.y.RENDER_TO_TEXTURE),sceneModule:t.scene.getModule(),sensorModule:e.getModuleBySymbol(u.y.SENSORS),settingsModule:e.getModuleBySymbol(u.y.SETTINGS),tourControlsModule:e.getModuleBySymbol(u.y.TOUR_CONTROLS),webglRendererModule:e.getModuleBySymbol(u.y.WEBGL_RENDERER),zoomControlModule:e.getModuleBySymbol(u.y.CONTROLS_ZOOM),sweepTextureLoader:n,pluginData:e.market.waitForData(ct.x),ses:t.ses.getModule()}}(t,i),g=r.get("useLegacyIds"),f=null===g||parseInt(g,10)?o.LEGACY:o.API,v=!!(await t.market.waitForData(We.e)).tryGetProperty(ut.RY,!1);c.setup(e,d,h,p,m,{idOption:f,useNewTags:v,sandboxPath:n.sandbox})}function mt(e){return{loadImage:W.p,waitForUpdate:()=>e.after(d.A.End),subscribe:(t,n)=>e.subscribe(t,n),addBinding:(t,n)=>e.commandBinder.addBinding(t,n),issueCommand:t=>e.commandBinder.issueCommand(t),requestTarget:()=>e.commandBinder.issueCommand(new z.oM),getRenderLayer:t=>e.getRenderLayer(t),jpegAsBase64:Qe.jJ,encodeRenderTarget:Qe.vP,getXmp:Qe.fY,getOrientedAngleTo:Y.k2,screenPositionToNDC:q.z5,ndcToWorldPosition:q.st,worldToScreenPosition:q.q9}}},40529:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ErrorType:()=>v,default:()=>ErrorGui});var i=n(57227),s=n(14877),r=n(10854),o=n(2252),a=n(87207),l=n(68472),c=n(75673),d=n(81826);const u=e=>({problem:"",solution:e.t(r.Z.ERROR_BROWSER_SOLUTION),explanation:e.t(r.Z.ERROR_BROWSER_EXPLANATION),actions:(0,o.tq)()?"":["<div id='browser-tiles'>","<a href='https://www.google.com/chrome/browser/' target='_blank'>","<div class='tile'>",`<img src=${a}>`,"</div>","</a>","<a href='https://www.mozilla.org/en-US/firefox/new/' target='_blank'>","<div class='tile'>",`<img src=${l}>`,"</div>","</a>","<a href='https://www.microsoft.com/en-us/edge' target='_blank'>","<div class='tile'>",`<img src=${c}>`,"</div>","</a>","<a href='https://support.apple.com/en-us/HT204416' target='_blank'>","<div class='tile'>",`<img src=${d}>`,"</div>","</a>","</div>"].join("")}),h="https://support.matterport.com/",p=e=>{const t=e.t(r.Z.ERROR_CONTEXT_LOST_ACTIONS,{"support-url":"https://support.matterport.com/"});return{problem:e.t(r.Z.ERROR_CONTEXT_LOST_PROBLEM),solution:"",explanation:"",actions:t}},m=e=>Object.assign(Object.assign({},u(e)),{problem:`${e.t(r.Z.ERROR_WEBGL_UNSUPPORTED_PROBLEM)}`}),g=e=>{const t=h,n=(0,o.tq)()?e.t(r.Z.ERROR_GENERIC_ACTIONS_MOBILE,{"support-url":t}):e.t(r.Z.ERROR_GENERIC_ACTIONS,{"browsers-url":"#install-browser","support-url":t});return{problem:e.t(r.Z.ERROR_GENERIC_PROBLEM),solution:e.t(r.Z.ERROR_GENERIC_SOLUTION),explanation:"",actions:n}},f=e=>{const t=e.t(r.Z.ERROR_LOADING_FAILED_ACTIONS,{"support-url":"https://support.matterport.com/s/article/Oops-Model-Not-Available"});return{problem:e.t(r.Z.ERROR_LOADING_FAILED_PROBLEM),solution:"",explanation:"",actions:t}};var v;!function(e){e[e.UNSUPPORTED=1]="UNSUPPORTED",e[e.WEBGL=2]="WEBGL",e[e.WEBGL_CONTEXT_LOST=3]="WEBGL_CONTEXT_LOST",e[e.GENERIC=4]="GENERIC"}(v||(v={}));class ErrorGui extends i.Y{constructor(){super(...arguments),this.name="error-gui",this.errorType=null}async init(e,t){this.container=document.querySelector("#error-container"),this.problem=document.querySelector("#error-problem"),this.solution=document.querySelector("#error-solution"),this.explanation=document.querySelector("#error-explanation"),this.actions=document.querySelector("#error-actions"),this.localeModule=await t.getModuleBySymbol(s.y.LOCALE)}get currentErrorType(){return this.errorType}showError(e){switch(this.errorType=e,e){case v.UNSUPPORTED:this.populateErrorScreen(m);break;case v.WEBGL:this.populateErrorScreen(g);break;case v.WEBGL_CONTEXT_LOST:this.populateErrorScreen(p);break;case v.GENERIC:default:this.populateErrorScreen(f)}const t=this.actions.querySelector('[href="#install-browser"]');t&&t.addEventListener("click",(e=>{e.preventDefault(),this.populateErrorScreen(u)}))}hideError(){this.errorType=null,this.container.classList.add("hidden");for(const e of[this.problem,this.solution,this.explanation,this.actions])e.innerHTML=""}populateErrorScreen(e){const t=e(this.localeModule);this.container.classList.remove("hidden"),this.problem.innerText=t.problem,this.solution.innerText=t.solution,this.explanation.innerText=t.explanation,this.actions.innerHTML=t.actions}}},88705:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ShowcaseGui});var i,s,r=n(67294),o=n(20745),a=n(57227),l=n(85893),c=n(94184),d=n.n(c),u=n(41907),h=n(9986),p=n(23676),m=n(60405),g=n(10854),f=n(81402),v=n(87100),b=n(13855),y=n(37363),S=n(56044),E=n(12622),T=n(61116),O=n(5477);function _(){const{locale:e}=(0,r.useContext)(m.I);return e}!function(e){e.Inside="panorama",e.InsideMesh="mesh",e.Dollhouse="dollhouse",e.Floorplan="floorplan",e.None="none"}(i||(i={})),function(e){e.Inside="click_inside_mode_button",e.InsideMesh="click_mesh_mode_button",e.Dollhouse="click_dollhouse_mode_button",e.Floorplan="click_dollhouse_mode_button"}(s||(s={}));var A=n(77677);function w(e){return()=>N(e)}function N(e){const{market:t}=(0,r.useContext)(m.I),[n,i]=(0,r.useState)(t.tryGetData(e));return(0,r.useEffect)((()=>{let n=!1;return t.waitForData(e).then((e=>{n||i(e)})),()=>{n=!0}}),[t,e]),n}function P(e,t){return n=>(0,r.forwardRef)(((i,s)=>{const r=t(),o=Object.assign(Object.assign({},i),{[e]:r});return(0,l.jsx)(n,Object.assign({},o,{ref:s}))}))}const I=w(A.t),k=P("toolsData",I);function C(){const e=I(),[t,n]=(0,r.useState)((null==e?void 0:e.toolPanelLayout)||A.t.defaultToolPanelLayout);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onToolPanelLayoutChanged(n);return()=>t.cancel()}),[e]),t}function L(){const e=C();return e===p.wS.NARROW||e===p.wS.BOTTOM_PANEL}(0,r.createContext)({intersectionRef:null,GroupRenderer:()=>null,ItemRenderer:()=>null,itemRendererProps:{},toggleGroup:()=>{},isCollapsed:()=>!1});const M=(0,r.forwardRef)((({name:e,style:t,size:n,className:i,onClick:s},r)=>{const o=d()("nova-icon",`icon-${e}`,i,{[`nova-icon-${n}`]:void 0!==n});return(0,l.jsx)("span",{className:o,style:t,onClick:s,ref:r})}));var D;!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(D||(D={}));var R=n(73935);function x(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function j(e){return e instanceof x(e).Element||e instanceof Element}function U(e){return e instanceof x(e).HTMLElement||e instanceof HTMLElement}function H(e){return"undefined"!=typeof ShadowRoot&&(e instanceof x(e).ShadowRoot||e instanceof ShadowRoot)}var F=Math.max,B=Math.min,V=Math.round;function G(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),i=1,s=1;if(U(e)&&t){var r=e.offsetHeight,o=e.offsetWidth;o>0&&(i=V(n.width)/o||1),r>0&&(s=V(n.height)/r||1)}return{width:n.width/i,height:n.height/s,top:n.top/s,right:n.right/i,bottom:n.bottom/s,left:n.left/i,x:n.left/i,y:n.top/s}}function W(e){var t=x(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function z(e){return e?(e.nodeName||"").toLowerCase():null}function K(e){return((j(e)?e.ownerDocument:e.document)||window.document).documentElement}function Y(e){return G(K(e)).left+W(e).scrollLeft}function q(e){return x(e).getComputedStyle(e)}function $(e){var t=q(e),n=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function Z(e,t,n){void 0===n&&(n=!1);var i,s,r=U(t),o=U(t)&&function(e){var t=e.getBoundingClientRect(),n=V(t.width)/e.offsetWidth||1,i=V(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),a=K(t),l=G(e,o),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&(("body"!==z(t)||$(a))&&(c=(i=t)!==x(i)&&U(i)?{scrollLeft:(s=i).scrollLeft,scrollTop:s.scrollTop}:W(i)),U(t)?((d=G(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=Y(a))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Q(e){var t=G(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function X(e){return"html"===z(e)?e:e.assignedSlot||e.parentNode||(H(e)?e.host:null)||K(e)}function J(e){return["html","body","#document"].indexOf(z(e))>=0?e.ownerDocument.body:U(e)&&$(e)?e:J(X(e))}function ee(e,t){var n;void 0===t&&(t=[]);var i=J(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),r=x(i),o=s?[r].concat(r.visualViewport||[],$(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(ee(X(o)))}function te(e){return["table","td","th"].indexOf(z(e))>=0}function ne(e){return U(e)&&"fixed"!==q(e).position?e.offsetParent:null}function ie(e){for(var t=x(e),n=ne(e);n&&te(n)&&"static"===q(n).position;)n=ne(n);return n&&("html"===z(n)||"body"===z(n)&&"static"===q(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&U(e)&&"fixed"===q(e).position)return null;for(var n=X(e);U(n)&&["html","body"].indexOf(z(n))<0;){var i=q(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var se="top",re="bottom",oe="right",ae="left",le="auto",ce=[se,re,oe,ae],de="start",ue="end",he="viewport",pe="popper",me=ce.reduce((function(e,t){return e.concat([t+"-"+de,t+"-"+ue])}),[]),ge=[].concat(ce,[le]).reduce((function(e,t){return e.concat([t,t+"-"+de,t+"-"+ue])}),[]),fe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ve(e){var t=new Map,n=new Set,i=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&s(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||s(e)})),i}var be={placement:"bottom",modifiers:[],strategy:"absolute"};function ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Se(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,s=t.defaultOptions,r=void 0===s?be:s;return function(e,t,n){void 0===n&&(n=r);var s,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},be,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:a,setOptions:function(n){var s="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},r,a.options,s),a.scrollParents={reference:j(e)?ee(e):e.contextElement?ee(e.contextElement):[],popper:ee(t)};var o=function(e){var t=ve(e);return fe.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,a.options.modifiers)));return a.orderedModifiers=o.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var r=s({state:a,name:t,instance:d,options:i}),o=function(){};l.push(r||o)}})),d.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(ye(t,n)){a.rects={reference:Z(t,ie(n),"fixed"===a.options.strategy),popper:Q(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var s=a.orderedModifiers[i],r=s.fn,o=s.options,l=void 0===o?{}:o,u=s.name;"function"==typeof r&&(a=r({state:a,options:l,name:u,instance:d})||a)}else a.reset=!1,i=-1}}},update:(s=function(){return new Promise((function(e){d.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(s())}))}))),o}),destroy:function(){u(),c=!0}};if(!ye(e,t))return d;function u(){l.forEach((function(e){return e()})),l=[]}return d.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var Ee={passive:!0};function Te(e){return e.split("-")[0]}function Oe(e){return e.split("-")[1]}function _e(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ae(e){var t,n=e.reference,i=e.element,s=e.placement,r=s?Te(s):null,o=s?Oe(s):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(r){case se:t={x:a,y:n.y-i.height};break;case re:t={x:a,y:n.y+n.height};break;case oe:t={x:n.x+n.width,y:l};break;case ae:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=r?_e(r):null;if(null!=c){var d="y"===c?"height":"width";switch(o){case de:t[c]=t[c]-(n[d]/2-i[d]/2);break;case ue:t[c]=t[c]+(n[d]/2-i[d]/2)}}return t}var we={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ne(e){var t,n=e.popper,i=e.popperRect,s=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=o.x,p=void 0===h?0:h,m=o.y,g=void 0===m?0:m,f="function"==typeof d?d({x:p,y:g}):{x:p,y:g};p=f.x,g=f.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=ae,S=se,E=window;if(c){var T=ie(n),O="clientHeight",_="clientWidth";if(T===x(n)&&"static"!==q(T=K(n)).position&&"absolute"===a&&(O="scrollHeight",_="scrollWidth"),T=T,s===se||(s===ae||s===oe)&&r===ue)S=re,g-=(u&&E.visualViewport?E.visualViewport.height:T[O])-i.height,g*=l?1:-1;if(s===ae||(s===se||s===re)&&r===ue)y=oe,p-=(u&&E.visualViewport?E.visualViewport.width:T[_])-i.width,p*=l?1:-1}var A,w=Object.assign({position:a},c&&we),N=!0===d?function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:V(t*i)/i||0,y:V(n*i)/i||0}}({x:p,y:g}):{x:p,y:g};return p=N.x,g=N.y,l?Object.assign({},w,((A={})[S]=b?"0":"",A[y]=v?"0":"",A.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",A)):Object.assign({},w,((t={})[S]=b?g+"px":"",t[y]=v?p+"px":"",t.transform="",t))}var Pe={left:"right",right:"left",bottom:"top",top:"bottom"};function Ie(e){return e.replace(/left|right|bottom|top/g,(function(e){return Pe[e]}))}var ke={start:"end",end:"start"};function Ce(e){return e.replace(/start|end/g,(function(e){return ke[e]}))}function Le(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&H(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Me(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function De(e,t){return t===he?Me(function(e){var t=x(e),n=K(e),i=t.visualViewport,s=n.clientWidth,r=n.clientHeight,o=0,a=0;return i&&(s=i.width,r=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:s,height:r,x:o+Y(e),y:a}}(e)):j(t)?function(e){var t=G(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Me(function(e){var t,n=K(e),i=W(e),s=null==(t=e.ownerDocument)?void 0:t.body,r=F(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=F(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+Y(e),l=-i.scrollTop;return"rtl"===q(s||n).direction&&(a+=F(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}(K(e)))}function Re(e,t,n){var i="clippingParents"===t?function(e){var t=ee(X(e)),n=["absolute","fixed"].indexOf(q(e).position)>=0&&U(e)?ie(e):e;return j(n)?t.filter((function(e){return j(e)&&Le(e,n)&&"body"!==z(e)})):[]}(e):[].concat(t),s=[].concat(i,[n]),r=s[0],o=s.reduce((function(t,n){var i=De(e,n);return t.top=F(i.top,t.top),t.right=B(i.right,t.right),t.bottom=B(i.bottom,t.bottom),t.left=F(i.left,t.left),t}),De(e,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function xe(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function je(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Ue(e,t){void 0===t&&(t={});var n=t,i=n.placement,s=void 0===i?e.placement:i,r=n.boundary,o=void 0===r?"clippingParents":r,a=n.rootBoundary,l=void 0===a?he:a,c=n.elementContext,d=void 0===c?pe:c,u=n.altBoundary,h=void 0!==u&&u,p=n.padding,m=void 0===p?0:p,g=xe("number"!=typeof m?m:je(m,ce)),f=d===pe?"reference":pe,v=e.rects.popper,b=e.elements[h?f:d],y=Re(j(b)?b:b.contextElement||K(e.elements.popper),o,l),S=G(e.elements.reference),E=Ae({reference:S,element:v,strategy:"absolute",placement:s}),T=Me(Object.assign({},v,E)),O=d===pe?T:S,_={top:y.top-O.top+g.top,bottom:O.bottom-y.bottom+g.bottom,left:y.left-O.left+g.left,right:O.right-y.right+g.right},A=e.modifiersData.offset;if(d===pe&&A){var w=A[s];Object.keys(_).forEach((function(e){var t=[oe,re].indexOf(e)>=0?1:-1,n=[se,re].indexOf(e)>=0?"y":"x";_[e]+=w[n]*t}))}return _}function He(e,t,n){return F(e,B(t,n))}function Fe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Be(e){return[se,oe,re,ae].some((function(t){return e[t]>=0}))}var Ve=Se({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,s=i.scroll,r=void 0===s||s,o=i.resize,a=void 0===o||o,l=x(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach((function(e){e.addEventListener("scroll",n.update,Ee)})),a&&l.addEventListener("resize",n.update,Ee),function(){r&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Ee)})),a&&l.removeEventListener("resize",n.update,Ee)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Ae({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,s=void 0===i||i,r=n.adaptive,o=void 0===r||r,a=n.roundOffsets,l=void 0===a||a,c={placement:Te(t.placement),variation:Oe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ne(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ne(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},s=t.elements[e];U(s)&&z(s)&&(Object.assign(s.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],s=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});U(i)&&z(i)&&(Object.assign(i.style,r),Object.keys(s).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,s=n.offset,r=void 0===s?[0,0]:s,o=ge.reduce((function(e,n){return e[n]=function(e,t,n){var i=Te(e),s=[ae,se].indexOf(i)>=0?-1:1,r="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[ae,oe].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,r),e}),{}),a=o[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=n.mainAxis,r=void 0===s||s,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,m=void 0===p||p,g=n.allowedAutoPlacements,f=t.options.placement,v=Te(f),b=l||(v===f||!m?[Ie(f)]:function(e){if(Te(e)===le)return[];var t=Ie(e);return[Ce(e),t,Ce(t)]}(f)),y=[f].concat(b).reduce((function(e,n){return e.concat(Te(n)===le?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?ge:l,d=Oe(i),u=d?a?me:me.filter((function(e){return Oe(e)===d})):ce,h=u.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=Ue(e,{placement:n,boundary:s,rootBoundary:r,padding:o})[Te(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:g}):n)}),[]),S=t.rects.reference,E=t.rects.popper,T=new Map,O=!0,_=y[0],A=0;A<y.length;A++){var w=y[A],N=Te(w),P=Oe(w)===de,I=[se,re].indexOf(N)>=0,k=I?"width":"height",C=Ue(t,{placement:w,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),L=I?P?oe:ae:P?re:se;S[k]>E[k]&&(L=Ie(L));var M=Ie(L),D=[];if(r&&D.push(C[N]<=0),a&&D.push(C[L]<=0,C[M]<=0),D.every((function(e){return e}))){_=w,O=!1;break}T.set(w,D)}if(O)for(var R=function(e){var t=y.find((function(t){var n=T.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},x=m?3:1;x>0;x--){if("break"===R(x))break}t.placement!==_&&(t.modifiersData[i]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,s=n.mainAxis,r=void 0===s||s,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,m=n.tetherOffset,g=void 0===m?0:m,f=Ue(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=Te(t.placement),b=Oe(t.placement),y=!b,S=_e(v),E="x"===S?"y":"x",T=t.modifiersData.popperOffsets,O=t.rects.reference,_=t.rects.popper,A="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,w="number"==typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(T){if(r){var I,k="y"===S?se:ae,C="y"===S?re:oe,L="y"===S?"height":"width",M=T[S],D=M+f[k],R=M-f[C],x=p?-_[L]/2:0,j=b===de?O[L]:_[L],U=b===de?-_[L]:-O[L],H=t.elements.arrow,V=p&&H?Q(H):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=G[k],z=G[C],K=He(0,O[L],V[L]),Y=y?O[L]/2-x-K-W-w.mainAxis:j-K-W-w.mainAxis,q=y?-O[L]/2+x+K+z+w.mainAxis:U+K+z+w.mainAxis,$=t.elements.arrow&&ie(t.elements.arrow),Z=$?"y"===S?$.clientTop||0:$.clientLeft||0:0,X=null!=(I=null==N?void 0:N[S])?I:0,J=M+q-X,ee=He(p?B(D,M+Y-X-Z):D,M,p?F(R,J):R);T[S]=ee,P[S]=ee-M}if(a){var te,ne="x"===S?se:ae,le="x"===S?re:oe,ce=T[E],ue="y"===E?"height":"width",he=ce+f[ne],pe=ce-f[le],me=-1!==[se,ae].indexOf(v),ge=null!=(te=null==N?void 0:N[E])?te:0,fe=me?he:ce-O[ue]-_[ue]-ge+w.altAxis,ve=me?ce+O[ue]+_[ue]-ge-w.altAxis:pe,be=p&&me?function(e,t,n){var i=He(e,t,n);return i>n?n:i}(fe,ce,ve):He(p?fe:he,ce,p?ve:pe);T[E]=be,P[E]=be-ce}t.modifiersData[i]=P}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,s=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Te(n.placement),l=_e(a),c=[ae,oe].indexOf(a)>=0?"height":"width";if(r&&o){var d=function(e,t){return xe("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:je(e,ce))}(s.padding,n),u=Q(r),h="y"===l?se:ae,p="y"===l?re:oe,m=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],g=o[l]-n.rects.reference[l],f=ie(r),v=f?"y"===l?f.clientHeight||0:f.clientWidth||0:0,b=m/2-g/2,y=d[h],S=v-u[c]-d[p],E=v/2-u[c]/2+b,T=He(y,E,S),O=l;n.modifiersData[i]=((t={})[O]=T,t.centerOffset=T-E,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&Le(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=Ue(t,{elementContext:"reference"}),a=Ue(t,{altBoundary:!0}),l=Fe(o,i),c=Fe(a,s,r),d=Be(l),u=Be(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]}),Ge=n(69590),We=n.n(Ge),ze=function(e){return e.reduce((function(e,t){var n=t[0],i=t[1];return e[n]=i,e}),{})},Ke="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,Ye=[],qe=function(e,t,n){void 0===n&&(n={});var i=r.useRef(null),s={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Ye},o=r.useState({styles:{popper:{position:s.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=o[0],l=o[1],c=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);l({styles:ze(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:ze(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),d=r.useMemo((function(){var e={onFirstUpdate:s.onFirstUpdate,placement:s.placement,strategy:s.strategy,modifiers:[].concat(s.modifiers,[c,{name:"applyStyles",enabled:!1}])};return We()(i.current,e)?i.current||e:(i.current=e,e)}),[s.onFirstUpdate,s.placement,s.strategy,s.modifiers,c]),u=r.useRef();return Ke((function(){u.current&&u.current.setOptions(d)}),[d]),Ke((function(){if(null!=e&&null!=t){var i=(n.createPopper||Ve)(e,t,d);return u.current=i,function(){i.destroy(),u.current=null}}}),[e,t,n.createPopper]),{state:u.current?u.current.state:null,styles:a.styles,attributes:a.attributes,update:u.current?u.current.update:null,forceUpdate:u.current?u.current.forceUpdate:null}};const $e=document.getElementById("react-overlay-root")||document.body,Ze="PointerEvent"in window,Qe=Ze?"pointerenter":"mouseenter",Xe=Ze?"pointerleave":"mouseleave",Je=({children:e,offset:t,placement:n="top",strategy:i="fixed",target:s,title:o,className:a,trigger:c="hover",size:u="small",theme:h,onToggle:p,disabled:m})=>{const[g,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[y,S]=(0,r.useState)("static"===c),E=t||("small"===u?[0,8]:[0,14]),{styles:T,attributes:O}=qe(s,g,{placement:n,strategy:i,modifiers:[{name:"arrow",options:{element:v,padding:"small"===u?4:6}},{name:"flip"},{name:"hide"},{name:"offset",options:{offset:E}}]}),_=(0,r.useCallback)((()=>{S(!0),p&&p(!0)}),[p]),A=(0,r.useCallback)((()=>{S(!1),p&&p(!1)}),[p]),w=(0,r.useCallback)((e=>{e.stopPropagation(),A()}),[A]);if((0,r.useEffect)((()=>{S("static"===c)}),[c]),(0,r.useEffect)((()=>{if(s&&"hover"===c)return m||s.addEventListener(Qe,_),s.addEventListener(Xe,A),()=>{m||s.removeEventListener(Qe,_),s.removeEventListener(Xe,A)}}),[s,m,c,_,A]),(0,r.useEffect)((()=>{const e=e=>{if(s&&g){const t=e.composedPath(),n=!t.includes(s),i=!t.includes(g);n&&i&&A()}};return y&&c?window.addEventListener("click",e,{capture:!0}):window.removeEventListener("click",e,{capture:!0}),()=>{window.removeEventListener("click",e,{capture:!0})}}),[s,g,y,c,A]),!y)return null;const N=d()("nova-tooltip",a,{[`nova-tooltip-${h}`]:void 0!==h,[`nova-tooltip-${u}`]:void 0!==u});return(0,l.jsx)(l.Fragment,{children:(0,R.createPortal)((0,l.jsxs)("div",Object.assign({className:N,ref:f,role:"tooltip",style:T.popper},O.popper,{onClick:"static"===c?w:void 0},{children:[o||e,(0,l.jsx)("div",{className:"nova-tooltip-arrow",ref:b,style:T.arrow})]})),$e)})};var et,tt;function nt({ariaLabel:e,children:t,className:n,dataAttribute:i,id:s,disabled:o=!1,dimmed:a=!1,active:c=!1,icon:u,reverse:h,label:p,onClick:m,onClickArgs:g,onKeyDown:f,size:v,style:b,theme:y="light",tooltip:S,tooltipOptions:E={},variant:T}){const[O,_]=(0,r.useState)(null),A=void 0===p&&void 0===t,w=u&&(p||t),N=d()(n,"mp-nova-btn",{[`mp-nova-btn-${T}`]:void 0!==T},{[`mp-nova-btn-${y}`]:void 0!==y},{[`mp-nova-btn-${v}`]:void 0!==v},{"mp-nova-btn-icon":A},{"mp-nova-btn-multi":w},{"mp-nova-btn-reverse":h},{"mp-nova-btn-disabled":o},{"mp-nova-btn-dimmed":a},{"mp-nova-btn-active":c}),P=(0,r.useCallback)((e=>{e.stopPropagation(),f&&f(e)}),[f]),I=(0,r.useCallback)((e=>{const t=g&&Array.isArray(g)?g:[];m&&m.apply(this,[e,...t])}),[m,g]),k=e||p||("string"==typeof S?S:void 0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",Object.assign({"aria-label":k,className:N,onClick:I,disabled:o,"aria-disabled":o,ref:S?_:null,style:b,onKeyDown:P,tabIndex:-1,id:s,"data-attribute":i},{children:[u&&(0,l.jsx)(M,{name:u}),p&&(0,l.jsx)("span",Object.assign({className:"mp-nova-btn-label"},{children:p})),!p&&t]})),S&&(0,l.jsx)(Je,Object.assign({target:O,title:S,disabled:o},E))]})}function it({children:e,actions:t,header:n,layout:i="vertical",style:s,text:r,title:o,className:a}){const c=d()("mp-nova-banner",`mp-nova-banner-${i}`,a);return(0,l.jsxs)("div",Object.assign({className:c,style:s},{children:[n&&(0,l.jsx)("div",Object.assign({className:"mp-nova-banner-header"},{children:n})),o&&(0,l.jsx)("div",Object.assign({className:"mp-nova-banner-title"},{children:o})),r&&(0,l.jsx)("div",Object.assign({className:"mp-nova-banner-text"},{children:r})),t&&(0,l.jsx)("div",Object.assign({className:"mp-nova-banner-actions"},{children:t})),e]}))}function st({children:e,spacing:t,className:n}){const i=d()("mp-nova-btn-group",n,{[`mp-nova-btn-group-${t}`]:void 0!==t});return(0,l.jsx)("div",Object.assign({className:i},{children:e}))}!function(e){e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e.FAB="fab"}(et||(et={})),function(e){e.SMALL="small",e.LARGE="large"}(tt||(tt={}));const rt=document.getElementById("react-overlay-root")||document.body;function ot({target:e,isOpen:t,className:n,onClose:i,yOffset:s,placement:o="bottom-start",theme:a,children:c}){const[u,h]=(0,r.useState)(null),{styles:p,attributes:m}=qe(e,u,{placement:o,strategy:"absolute",modifiers:[{name:"flip"},{name:"hide"},{name:"offset",options:{offset:s?[0,s]:[0,4]}}]});(0,r.useEffect)((()=>{const n=t=>{if(e&&u){const n=t.composedPath(),s=!n.includes(e),r=!n.includes(u);s&&r&&i()}};return t&&u?window.addEventListener("click",n,{capture:!0}):window.removeEventListener("click",n,{capture:!0}),()=>{window.removeEventListener("click",n,{capture:!0})}}),[u,e,t,i]);const g=(0,r.useCallback)((e=>e?(0,l.jsx)("div",Object.assign({className:"mp-nova-menu-item"},{children:e})):null),[]),f=d()("mp-nova-menu",n,{[`mp-nova-menu-${a}`]:void 0!==a});return(0,l.jsx)(l.Fragment,{children:(0,R.createPortal)(t&&c&&(0,l.jsx)("div",Object.assign({style:Object.assign({},p.popper)},m.popper,{ref:h,className:f,onClick:i},{children:r.Children.map(c,g)})),rt)})}var at=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const lt=(0,r.forwardRef)(((e,t)=>{var{className:n,buttonClassName:i,buttonDataAttribute:s,children:o,menuClassName:a,onClick:c,onMenuToggled:u,menuYOffset:h,menuTheme:p,menuPlacement:m,label:g,icon:f,tooltip:v,caret:b}=e,y=at(e,["className","buttonClassName","buttonDataAttribute","children","menuClassName","onClick","onMenuToggled","menuYOffset","menuTheme","menuPlacement","label","icon","tooltip","caret"]);const S=(0,r.useRef)(null),[E,T]=(0,r.useState)(!1);(0,r.useImperativeHandle)(t,(()=>({closeMenu:()=>{T(!1),u&&u(!1)}})),[u]);const O=(0,r.useCallback)((e=>{null==e||e.stopPropagation(),T(!1),u&&u(!1)}),[u]),_=(0,r.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),c&&c(e),T(!E),u&&u(!E)}),[E,c,u]),A=b?E?"dpad-up":"dpad-down":void 0;return(0,l.jsxs)("div",Object.assign({className:d()("mp-nova-button-menu",n),ref:S},{children:[(0,l.jsxs)(nt,Object.assign({},y,{onClick:_,className:d()("mp-button-menu-button",i,{"is-open":E}),dataAttribute:s,tooltip:E?void 0:v,active:E},{children:[f&&(0,l.jsx)(M,{name:f}),g&&(0,l.jsx)("span",Object.assign({className:"mp-nova-btn-label"},{children:g})),A&&(0,l.jsx)(M,{name:A})]})),(0,l.jsx)(ot,Object.assign({target:S.current,isOpen:E,yOffset:h,placement:m,theme:p,className:a,onClose:O},{children:o}))]}))}));var ct=n(73996);const dt=Object.keys(ct.f).sort(((e,t)=>e.localeCompare(t)));function ut({className:e="",children:t}){const n=d()("mp-nova-list-controls",e);return(0,l.jsx)("div",Object.assign({className:n},{children:t}))}"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;function ht(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function pt(e){return"nodeType"in e}function mt(e){var t,n;return e?ht(e)?e:pt(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function gt(e){return e?ht(e)?e.document:pt(e)?function(e){const{Document:t}=mt(e);return e instanceof t}(e)?e:!ht(t=e)&&t instanceof mt(t).HTMLElement?e.ownerDocument:document:document:document;var t}function ft(e){return(t,...n)=>n.reduce(((t,n)=>{const i=Object.entries(n);for(const[n,s]of i){const i=t[n];null!=i&&(t[n]=i+e*s)}return t}),{...t})}const vt=ft(1),bt=ft(-1);function yt(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=mt(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}var St;!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(St||(St={}));Map;const Et=Object.freeze({x:0,y:0});const Tt={ignoreTransform:!1};function Ot(e,t=Tt){let n=e.getBoundingClientRect();if(t.ignoreTransform){const{getComputedStyle:t}=mt(e),{transform:i,transformOrigin:s}=t(e);i&&(n=function(e,t,n){let i,s,r,o,a;if(t.startsWith("matrix3d("))i=t.slice(9,-1).split(/, /),s=+i[0],r=+i[5],o=+i[12],a=+i[13];else{if(!t.startsWith("matrix("))return e;i=t.slice(7,-1).split(/, /),s=+i[0],r=+i[3],o=+i[4],a=+i[5]}const l=e.left-o-(1-s)*parseFloat(n),c=e.top-a-(1-r)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,u=r?e.height/r:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,i,s))}const{top:i,left:s,width:r,height:o,bottom:a,right:l}=n;return{top:i,left:s,width:r,height:o,bottom:a,right:l}}function _t(e){return Ot(e,{ignoreTransform:!0})}var At;function wt(e){const t={x:0,y:0},n={x:e.scrollWidth-e.clientWidth,y:e.scrollHeight-e.clientHeight};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(At||(At={}));function Nt(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:i,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:s,width:e.clientWidth,height:e.clientHeight}}var Pt,It,kt,Ct;!function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Pt||(Pt={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(It||(It={})),function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(kt||(kt={})),function(e){e.Optimized="optimized"}(Ct||(Ct={}));kt.WhileDragging,Ct.Optimized;class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var i;null==(i=this.target)||i.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Lt(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t&&i>t.y}var Mt,Dt;function Rt(e){e.preventDefault()}function xt(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Mt||(Mt={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(Dt||(Dt={}));const jt={start:[Dt.Space,Dt.Enter],cancel:[Dt.Esc],end:[Dt.Space,Dt.Enter]},Ut=(e,{currentCoordinates:t})=>{switch(e.code){case Dt.Right:return{...t,x:t.x+25};case Dt.Left:return{...t,x:t.x-25};case Dt.Down:return{...t,y:t.y+25};case Dt.Up:return{...t,y:t.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.coordinates=Et,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Listeners(gt(t)),this.windowListeners=new Listeners(mt(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mt.Resize,this.handleCancel),this.windowListeners.add(Mt.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(Mt.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props;if(!e.node.current)throw new Error("Active draggable node is undefined");const n=_t(e.node.current),i={x:n.left,y:n.top};this.coordinates=i,t(i)}handleKeyDown(e){if(function(e){if(!e)return!1;const{KeyboardEvent:t}=mt(e.target);return t&&e instanceof t}(e)){const{coordinates:t}=this,{active:n,context:i,options:s}=this.props,{keyboardCodes:r=jt,coordinateGetter:o=Ut,scrollBehavior:a="smooth"}=s,{code:l}=e;if(r.end.includes(l))return void this.handleEnd(e);if(r.cancel.includes(l))return void this.handleCancel(e);const c=o(e,{active:n,context:i.current,currentCoordinates:t});if(c){const n={x:0,y:0},{scrollableAncestors:s}=i.current;for(const i of s){const s=e.code,r=bt(c,t),{isTop:o,isRight:l,isLeft:d,isBottom:u,maxScroll:h,minScroll:p}=wt(i),m=Nt(i),g={x:Math.min(s===Dt.Right?m.right-m.width/2:m.right,Math.max(s===Dt.Right?m.left:m.left+m.width/2,c.x)),y:Math.min(s===Dt.Down?m.bottom-m.height/2:m.bottom,Math.max(s===Dt.Down?m.top:m.top+m.height/2,c.y))},f=s===Dt.Right&&!l||s===Dt.Left&&!d,v=s===Dt.Down&&!u||s===Dt.Up&&!o;if(f&&g.x!==c.x){if(s===Dt.Right&&i.scrollLeft+r.x<=h.x||s===Dt.Left&&i.scrollLeft+r.x>=p.x)return void i.scrollBy({left:r.x,behavior:a});n.x=s===Dt.Right?i.scrollLeft-h.x:i.scrollLeft-p.x,i.scrollBy({left:-n.x,behavior:a});break}if(v&&g.y!==c.y){if(s===Dt.Down&&i.scrollTop+r.y<=h.y||s===Dt.Up&&i.scrollTop+r.y>=p.y)return void i.scrollBy({top:r.y,behavior:a});n.y=s===Dt.Down?i.scrollTop-h.y:i.scrollTop-p.y,i.scrollBy({top:-n.y,behavior:a});break}}this.handleMove(e,vt(c,n))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t),this.coordinates=t}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Ht(e){return Boolean(e&&"distance"in e)}function Ft(e){return Boolean(e&&"delay"in e)}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=jt,onActivation:n})=>{const{code:i}=e.nativeEvent;return!!t.start.includes(i)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}}];class AbstractPointerSensor{constructor(e,t,n=function(e){const{EventTarget:t}=mt(e);return e instanceof t?e:gt(e)}(e.event.target)){var i;this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:r}=s;this.props=e,this.events=t,this.document=gt(r),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(n),this.windowListeners=new Listeners(mt(r)),this.initialCoordinates=null!=(i=yt(s))?i:Et,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Mt.Resize,this.handleCancel),this.windowListeners.add(Mt.DragStart,Rt),this.windowListeners.add(Mt.VisibilityChange,this.handleCancel),this.windowListeners.add(Mt.ContextMenu,Rt),this.documentListeners.add(Mt.Keydown,this.handleKeydown),t){if(Ht(t))return;if(Ft(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay))}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Mt.Click,xt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mt.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:i,props:s}=this,{onMove:r,options:{activationConstraint:o}}=s;if(!i)return;const a=null!=(t=yt(e))?t:Et,l=bt(i,a);if(!n&&o){if(Ft(o))return Lt(l,o.tolerance)?this.handleCancel():void 0;if(Ht(o))return null!=o.tolerance&&Lt(l,o.tolerance)?this.handleCancel():Lt(l,o.distance)?this.handleStart():void 0}e.cancelable&&e.preventDefault(),r(a)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Dt.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Bt={move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:t}=e,n=gt(t.target);super(e,Bt,n)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:({nativeEvent:e},{onActivation:t})=>!(!e.isPrimary||0!==e.button)&&(null==t||t({event:e}),!0)}];const Vt={move:{name:"mousemove"},end:{name:"mouseup"}};var Gt;!function(e){e[e.RightClick=2]="RightClick"}(Gt||(Gt={}));(class core_esm_MouseSensor extends AbstractPointerSensor{constructor(e){super(e,Vt,gt(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:({nativeEvent:e},{onActivation:t})=>e.button!==Gt.RightClick&&(null==t||t({event:e}),!0)}];const Wt={move:{name:"touchmove"},end:{name:"touchend"}};(class core_esm_TouchSensor extends AbstractPointerSensor{constructor(e){super(e,Wt)}static setup(){return window.addEventListener(Wt.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Wt.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:({nativeEvent:e},{onActivation:t})=>{const{touches:n}=e;return!(n.length>1)&&(null==t||t({event:e}),!0)}}];Dt.Down,Dt.Right,Dt.Up,Dt.Left;const zt=9,Kt=13,Yt=27,qt=(0,r.forwardRef)((({text:e,name:t,label:n,type:i="text",readonly:s,autofocus:o,placeholder:a,className:c,maxLength:u,onInput:h,onBlur:p,onFocus:m,onKeyDown:g,onKeyUp:f,onReturn:v,onCancel:b,onPaste:y},S)=>{const E=(0,r.useRef)(null),[T,O]=(0,r.useState)(e),[_,A]=(0,r.useState)(!!o),[w,N]=(0,r.useState)(!1),P=(0,r.useId)(),I=t||P;(0,r.useImperativeHandle)(S,(()=>({focus:()=>{var e,t;E.current===document.activeElement&&(null===(e=E.current)||void 0===e||e.blur()),null===(t=E.current)||void 0===t||t.focus()},blur:()=>{var e;null===(e=E.current)||void 0===e||e.blur()}})),[E]),(0,r.useEffect)((()=>(O(e),N(!1),()=>{})),[e]),(0,r.useEffect)((()=>(E.current&&o&&E.current.focus(),()=>{})),[o,E]),(0,r.useEffect)((()=>(w&&v&&E.current&&E.current.blur(),()=>{})),[w,E,v]);const k=(0,r.useCallback)((e=>{const t=e.target;O(t.value),h(t.value)}),[h,O]),C=(0,r.useCallback)((e=>{const t=e.target.value;w&&v?(N(!1),v(t)):p&&p(t),A(!1)}),[p,v,w]),L=(0,r.useCallback)((e=>{m&&m(e),A(!0)}),[m]),M=(0,r.useCallback)((e=>{e.stopPropagation();const t=e.which||e.keyCode;t===Kt&&N(!0);const n=[zt,Kt,Yt];if("keydown"===e.type&&!n.includes(t))return!1;const i=e.target.value;switch(u&&i.length>u&&e.preventDefault(),t){case Yt:b&&b()}return!1}),[b,u]),D=(0,r.useCallback)((e=>{let t=!1;g&&(t=g(e)),t||M(e)}),[M,g]),R=(0,r.useCallback)((e=>{let t=e.clipboardData.getData("text/plain").trim();u&&(t=t.substring(0,Math.min(u,t.length))),y&&y(t)}),[y,u]),x=d()("mp-text-input",c,{focused:_}),j=n&&(_||!(""===T)),U=_?"":a;return(0,l.jsxs)("div",Object.assign({className:x},{children:[j&&(0,l.jsx)("label",Object.assign({className:"mp-text-input-label",htmlFor:I},{children:n})),(0,l.jsx)("input",{ref:E,className:"mp-input",name:I,type:i,value:T,placeholder:U,maxLength:u,onInput:k,onBlur:C,onFocus:L,onKeyPress:M,onKeyDown:D,onKeyUp:f,onPaste:R,readOnly:s})]}))}));function $t({isSelected:e,isActive:t,option:n,onSelect:i,onHover:s,tooltip:o}){const[a,c]=(0,r.useState)(null),u=(0,r.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),i(n,e)}),[i,n]),h=(0,r.useCallback)((()=>{s(n)}),[s,n]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",Object.assign({ref:o?c:null,className:d()("nova-select-option",n.className,{"is-selected":e,"is-active":t,disabled:!!n.disabled}),onClick:u,onMouseEnter:h},{children:[n.icon&&(0,l.jsx)(M,{className:"select-menu-icon",name:n.icon,style:n.iconStyle}),(0,l.jsx)("span",Object.assign({className:"nova-select-option-text"},{children:n.text}))]})),o&&(0,l.jsx)(Je,{target:a,title:o})]})}const Zt=Object.freeze({white:"#FFF",moonrock:"#F5F4F3",mirror:"#DADADA",sine:"#B5B4B3",cosine:"#999",tangent:"#6D6D6D",lens:"#444",portal:"#222",laser:"#FF3158"}),Qt=Object.freeze({neutron:"#5C7FFF",naiad:"#8BBBFF",neptune:"#385DFF",triton:"#0000EA",proton:"#00A170",sputnik:"#00CC8C",earth:"#007D57",iss:"#006644",electron:"#FFBB00",ring:"#FFDD55",saturn:"#C99100",titan:"#906900",gamma:"#FA5300",deimos:"#FF9955",mars:"#C74200",phobos:"#AA3300"}),Xt=(Object.freeze({heliosphere:"#CA003D",mesosphere:"#990033",exosphere:"#660022",thermosphere:"#D22288",troposphere:"#A727D7",noosphere:"#7733F3",atmosphere:"#1A298C",stratosphere:"#1333CC",hydrosphere:"#1444FF",biosphere:"#006EE1",geosphere:"#0090C0",ecosphere:"#00AFAA",lithosphere:"#00705D",athenosphere:"#004844"}),Object.freeze({primary:Zt,semantic:Qt}),(0,r.forwardRef)((({className:e,children:t},n)=>{const i=(0,r.useRef)(null);return(0,r.useImperativeHandle)(n,(()=>({scrollToSelector:e=>{if(i.current){const t=i.current.querySelector(e);t?t.scrollIntoView():i.current.scrollTop=0}},getScroller:()=>(null==i?void 0:i.current)||void 0})),[i]),(0,l.jsx)("div",Object.assign({ref:i,className:e},{children:t}))}))),Jt=({group:e,options:t,renderOption:n,observer:i})=>{const[s,o]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(s)return null==i||i.observe(s),()=>{null==i||i.unobserve(s)}}),[i,s,e.id]),(0,l.jsxs)("div",Object.assign({className:"nova-select-menu-group","data-group-container-id":e.id},{children:[(0,l.jsx)("div",Object.assign({className:"nova-select-menu-group-header"},{children:e.displayText})),(0,l.jsx)("div",Object.assign({ref:o,className:"nova-select-menu-grouped-options","data-group-id":e.id},{children:t.map(n)}))]}),e.id)};var en;!function(e){e.JUSTIFY="justify",e.LEFT="left",e.RIGHT="right"}(en||(en={}));const tn=document.getElementById("react-overlay-root")||document.body,nn=(0,r.forwardRef)((({children:e,target:t,className:n,isOpen:i,onClose:s,onChange:o,options:a=[],selectedOptionId:c="",focusedOptionId:u="",setFocusedOptionId:h,autoFocus:p,filterText:m,onKeyDown:g,align:f=en.JUSTIFY,groups:v,includeUngrouped:b=!1,getNoResultsText:y,scrollbarComponent:S=Xt,onGroupIntersected:E},T)=>{const[O,_]=(0,r.useState)(),[A,w]=(0,r.useState)(null),[N,P]=(0,r.useState)(),[I,k]=(0,r.useState)(0),C=(0,r.useDeferredValue)(a),L=(0,r.useDeferredValue)(m),{styles:M,attributes:D}=qe(t,A,{placement:f===en.RIGHT?"bottom-end":"bottom-start",strategy:"fixed",modifiers:[{name:"flip"},{name:"hide"},{name:"offset",options:{offset:[0,4]}}]}),[x,j]=(0,r.useState)(!1);(0,r.useImperativeHandle)(T,(()=>({scrollToGroupId:e=>{O&&(null==O?void 0:O.scrollToSelector)&&(null==O||O.scrollToSelector(`[data-group-container-id="${e}"]`,"top",!0))}})),[O]);const U=f===en.JUSTIFY,H=(0,r.useCallback)(((e,t)=>{o(e,t)}),[o]),F=(0,r.useCallback)((e=>{h&&h(e.id)}),[h]),B=(0,r.useCallback)((()=>{j(!0)}),[j]),V=(0,r.useCallback)((()=>{j(!1)}),[j]);(0,r.useLayoutEffect)((()=>{if(U&&i&&t){const{width:e}=t.getBoundingClientRect();k(e)}return()=>{}}),[i,U,t]),(0,r.useEffect)((()=>{const e=e=>{if(t&&A){const n=e.composedPath(),i=!n.includes(t),r=!n.includes(A);i&&r&&s()}};return i&&A?window.addEventListener("click",e,{capture:!0}):window.removeEventListener("click",e,{capture:!0}),()=>{window.removeEventListener("click",e,{capture:!0})}}),[A,t,i,s]),(0,r.useEffect)((()=>(i&&p&&A&&A.focus(),()=>{})),[p,i,A]);const G=(0,r.useMemo)((()=>L?C.filter((e=>-1!==e.text.toLowerCase().indexOf(L.toLowerCase()))):C),[C,L]),W=U?Math.min(I,380):void 0,z=(0,r.useMemo)((()=>{if(v){const e=v.map((e=>e.id));return G.reduce(((t,n)=>{let i=n.group&&e.includes(n.group)&&n.group;return!i&&b&&(i="_ungrouped"),i&&(t[i]||(t[i]=[]),t[i].push(n)),t}),{})}return null}),[v,G,b]);(0,r.useEffect)((()=>{if(!O||!E)return;const e=O.getScroller();if(!e)return;const t=new IntersectionObserver((e=>{if((e=e.filter((e=>e.isIntersecting)).sort(((e,t)=>t.intersectionRatio-e.intersectionRatio))).length>0){const t=e[0].target,{groupId:n}=t.dataset;E(n)}}),{root:e,threshold:[.1,.9]});return P(t),()=>{t.disconnect()}}),[O,P,E]);const K=S,Y=e=>(0,l.jsx)($t,{option:e,isSelected:e.id===c,isActive:e.id===u,onSelect:H,onHover:F,tooltip:e.tooltip},e.id),q=G.length,$=i&&(q||""!==m);return(0,l.jsx)(l.Fragment,{children:(0,R.createPortal)($&&(0,l.jsx)("div",Object.assign({style:Object.assign(Object.assign({},M.popper),{width:W})},D.popper,{ref:w,tabIndex:-1,onKeyDown:g,className:d()("nova-select-menu",n,{"has-focus":x}),onFocus:B,onBlur:V},{children:(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(K,Object.assign({className:"nova-select-items-wrap",ref:_},{children:(0,l.jsxs)(r.Suspense,Object.assign({fallback:"Loading..."},{children:[0===q&&""!==m&&y&&(0,l.jsx)("span",Object.assign({className:"nova-select-no-results"},{children:y(m||"")})),v&&z?v.map(((e,t)=>z[e.id]?(0,l.jsx)(Jt,{group:e,renderOption:Y,options:z[e.id],observer:N},e.id):null)):G.map(Y)]}))}))]})})),tn)})})),sn=({items:e=[],focusedItemId:t,selectedItemId:n,onItemFocused:i,onItemSelected:s,onCancel:o})=>{const a=(0,r.useMemo)((()=>e.map((e=>e.id))),[e]),l=e.length;(0,r.useEffect)((()=>{i(e.length>0?e[0].id:"")}),[e,i]);const c=(0,r.useCallback)(((e=!1)=>{let s=(a.indexOf(t||n||"")+(e?1:-1))%l;s<0&&(s=l-1),i(a[s])}),[t,n,i,a,l]);return(0,r.useCallback)((e=>{let n=!1;switch(e.code){case"ArrowDown":c(!0),n=!0;break;case"ArrowUp":c(!1),n=!0;break;case"Escape":o(),n=!0;break;case"Enter":t&&(s(t),n=!0)}return n&&e.preventDefault(),n}),[t,c,s,o])};var rn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const on=(0,r.forwardRef)(((e,t)=>{var{options:n=[],onChange:i,clearOnSelect:s=!1,insertOnSelect:o=!1,onBlur:a,onFocus:c,onKeyDown:u,onKeyUp:h,onPaste:p}=e,m=rn(e,["options","onChange","clearOnSelect","insertOnSelect","onBlur","onFocus","onKeyDown","onKeyUp","onPaste"]);const[g,f]=(0,r.useState)(null),v=(0,r.useRef)(null),b=(0,r.useRef)(null),[y,S]=(0,r.useState)(""),[E,T]=(0,r.useState)(""),[O,_]=(0,r.useState)(!1);(0,r.useImperativeHandle)(t,(()=>({focus:()=>{var e;null===(e=v.current)||void 0===e||e.focus()},blur:()=>{var e;null===(e=v.current)||void 0===e||e.blur()},clear:()=>{S("")}})),[v,S]);const A=(0,r.useMemo)((()=>y?n.filter((e=>-1!==e.text.toLowerCase().indexOf(y.toLowerCase()))):n),[n,y]),w=(0,r.useCallback)((e=>{const t="string"==typeof e;t&&0===e.trim().length||(i(e),_(!1),s?S(""):!t&&o&&S(e.text),cancelAnimationFrame(b.current||0),b.current=requestAnimationFrame((()=>{var e;null===(e=v.current)||void 0===e||e.focus()})))}),[i,s,o]),N=(0,r.useCallback)((e=>{if(e){const t=A.find((t=>t.id===e));t&&w(t)}}),[w,A]),P=(0,r.useCallback)((()=>{var e;_(!1),null===(e=v.current)||void 0===e||e.blur()}),[v]),I=sn({items:A,focusedItemId:E,onItemFocused:T,onItemSelected:N,onCancel:P}),k=(0,r.useCallback)((e=>{let t=!1;return u&&(t=u(e)),t||(t=I(e)),t}),[u,I]),C=(0,r.useCallback)((e=>{_(!0),c&&c(e)}),[c]),L=(0,r.useCallback)((e=>{a&&a(e),P()}),[a,P]),M=(0,r.useCallback)((e=>{p&&p(e),S(e)}),[p,S]),D=(0,r.useCallback)((e=>{N(e.id)}),[N]);return(0,l.jsxs)("div",Object.assign({className:d()("nova-typeahead-input"),ref:f},{children:[(0,l.jsx)(qt,Object.assign({},m,{ref:v,text:y,onInput:S,onReturn:w,onCancel:P,onFocus:C,onBlur:L,onKeyDown:k,onKeyUp:h,onPaste:M})),(0,l.jsx)(nn,{options:A,target:g,isOpen:O,onClose:P,onChange:D,filterText:y,focusedOptionId:E,setFocusedOptionId:T,autoFocus:!1})]}))}));var an=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const ln=(0,r.forwardRef)(((e,t)=>{var{className:n,buttonClassName:i="button-select-anchor",onChange:s,selectedOptionId:o="",options:a=[],children:c,placeholder:u,placeholderIcon:h,selectMenuClassName:p,onClick:m,align:g=en.LEFT,groups:f,filterText:v,allowClear:b,onClear:y,getNoResultsText:S,scrollbarComponent:E,selectMenuRef:T,onGroupIntersected:O}=e,_=an(e,["className","buttonClassName","onChange","selectedOptionId","options","children","placeholder","placeholderIcon","selectMenuClassName","onClick","align","groups","filterText","allowClear","onClear","getNoResultsText","scrollbarComponent","selectMenuRef","onGroupIntersected"]);const A=(0,r.useRef)(null),[w,N]=(0,r.useState)(!1),[P,I]=(0,r.useState)("");(0,r.useImperativeHandle)(t,(()=>({closeMenu:()=>{N(!1)}})),[]);const k=(0,r.useCallback)((e=>{null==e||e.stopPropagation(),N(!1),I("")}),[]),C=(0,r.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),m&&m(e),N(!w)}),[w,m]),L=(0,r.useCallback)(((e,t)=>{s(e,t),k()}),[k,s]),D=(0,r.useCallback)((e=>{const t=a.find((t=>t.id===e));t&&L(t,void 0)}),[a,L]),R=sn({items:a,focusedItemId:P,selectedItemId:o,onItemFocused:I,onItemSelected:D,onCancel:k}),x=(0,r.useMemo)((()=>o&&a.find((e=>e.id===o))),[o,a]),j=(0,r.useCallback)((e=>{e.stopPropagation(),y&&y()}),[y]);return(0,l.jsxs)("div",Object.assign({className:d()("nova-button-select",n),ref:A},{children:[(0,l.jsxs)(nt,Object.assign({},_,{onClick:C,className:d()(i,{"is-open":w}),onKeyDown:R},{children:[x&&(0,l.jsxs)(l.Fragment,{children:[x.icon&&(0,l.jsx)(M,{className:"select-menu-icon",name:x.icon,style:x.iconStyle}),(0,l.jsx)("span",Object.assign({className:"selection-text"},{children:x.text}))]}),!x&&u&&(0,l.jsxs)(l.Fragment,{children:[h&&(0,l.jsx)(M,{className:"select-menu-icon",name:h}),(0,l.jsx)("span",Object.assign({className:"select-placeholder"},{children:u}))]}),b&&o&&(0,l.jsx)(M,{name:"close",className:"select-button-clear mp-nova-btn mp-nova-btn-light mp-nova-btn-icon",onClick:j}),(0,l.jsx)(M,{className:"select-caret",name:"dpad-down"})]})),(0,l.jsx)(nn,Object.assign({ref:T,target:A.current,isOpen:w,className:p,onClose:k,onChange:L,onKeyDown:R,selectedOptionId:o,focusedOptionId:P,setFocusedOptionId:I,align:g,options:a,autoFocus:!1,groups:f,filterText:v,getNoResultsText:S,scrollbarComponent:E,onGroupIntersected:O},{children:c}))]}))}));var cn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const dn=e=>{var{selectedColor:t,options:n,onChange:i,noSelectionText:s="Choose a color...",selectMenuClassName:o}=e,a=cn(e,["selectedColor","options","onChange","noSelectionText","selectMenuClassName"]);const c=(0,r.useMemo)((()=>n.map((e=>Object.assign(Object.assign({},e),{icon:"simple-tag",iconStyle:{color:`${e.value}`}})))),[n]),u=(0,r.useCallback)((e=>{i(e.id)}),[i]);return(0,l.jsx)(ln,Object.assign({className:"nova-color-select",options:c,onChange:u,selectMenuClassName:d()("color-select-menu",o),selectedOptionId:t},a))};var un=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const hn=e=>e.stopPropagation(),pn=e=>{var{selectedIcon:t,options:n,onChange:i,noSelectionText:s="Choose an icon...",recentIconIds:o,groups:a,searchPlaceholder:c,selectMenuClassName:u}=e,h=un(e,["selectedIcon","options","onChange","noSelectionText","recentIconIds","groups","searchPlaceholder","selectMenuClassName"]);const p=(0,r.useRef)(null),[m,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(a.length>0?a[0].id:void 0),b=(0,r.useRef)(null),y=(0,r.useMemo)((()=>n.map((e=>Object.assign(Object.assign({},e),{icon:e.id})))),[n]),S=(0,r.useCallback)((e=>{i(e.id)}),[i]),E=(0,r.useCallback)(((e,t)=>{var n;null===(n=b.current)||void 0===n||n.scrollToGroupId(t)}),[]),T=(0,r.useCallback)((e=>{var t;e.stopPropagation(),g(""),null===(t=p.current)||void 0===t||t.focus()}),[]),O=(0,r.useCallback)((e=>{v(e)}),[v]),_=(0,r.useMemo)((()=>a.map((e=>e.id))),[a]),A=100/Math.max(a.length,1);return(0,l.jsx)(ln,Object.assign({className:"nova-icon-select",options:y,onChange:S,selectMenuClassName:d()("icon-select-menu",u),selectedOptionId:t,align:en.JUSTIFY,filterText:m,showGroupings:!0,groups:a,selectMenuRef:b,onGroupIntersected:O},h,{children:(0,l.jsxs)("header",Object.assign({onClick:hn},{children:[a&&(0,l.jsxs)("div",Object.assign({className:"nova-button-tabs"},{children:[a.map((e=>(0,l.jsx)(nt,{icon:e.icon,tooltip:e.displayText,onClick:E,onClickArgs:[e.id],className:f===e.id?"nova-button-tabs-selected":""},e.id))),f&&(0,l.jsx)("div",{className:"nova-button-tabs-indicator",style:{width:`${A}%`,transform:`translateX(${100*_.indexOf(f)}%)`}})]})),(0,l.jsxs)("div",Object.assign({className:"search-input-wrap"},{children:[(0,l.jsx)(M,{name:"magnifying-glass"}),(0,l.jsx)(qt,{ref:p,text:m,onInput:g,placeholder:c,autofocus:!0}),!!m&&(0,l.jsx)(M,{name:"close",onClick:T})]}))]}))}))};var mn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const gn=(0,r.forwardRef)(((e,t)=>{var{allowSelect:n,isSelected:i,isFocused:s,onClick:o,onFocus:a,onRemoveClick:c,className:u,size:h="standard",theme:p="light"}=e,m=mn(e,["allowSelect","isSelected","isFocused","onClick","onFocus","onRemoveClick","className","size","theme"]);const g=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>({focus:()=>{var e;null===(e=g.current)||void 0===e||e.focus()}})),[g]);const f=(0,r.useCallback)((()=>{c&&c(m)}),[c,m]),v=(0,r.useCallback)((e=>{var t;null===(t=g.current)||void 0===t||t.focus(),o&&o(m,e)}),[o,m]),b=(0,r.useCallback)((e=>{a&&a(m)}),[a,m]),y=void 0!==m.count;return(0,l.jsxs)("div",Object.assign({className:d()("nova-token",`token-size-${h}`,`token-theme-${p}`,u,{"is-selected":i,"is-focused":s,"has-count":y,"can-select":n,"can-remove":!!c}),title:m.text,onClick:v,onFocus:b,tabIndex:0,ref:g,"data-token-id":m.id},{children:[n&&i&&(0,l.jsx)(M,{size:D.SMALL,name:"checkmark"}),(0,l.jsx)("div",Object.assign({className:"token-text"},{children:m.text})),y&&(0,l.jsx)("div",Object.assign({className:"token-count"},{children:m.count})),!!c&&(0,l.jsx)(nt,{onClick:f,icon:"close",size:"small"})]}))})),fn=({tokens:e,className:t,allowSelect:n,maxVisibleTruncated:i,selectedTokenIds:s=[],onTokenClick:o,tokenSize:a,tokenTheme:c})=>{const[u,h]=(0,r.useState)(!1),p=(0,r.useCallback)(((e,t)=>{h(!u)}),[h,u]),m=!!i,g=(0,r.useMemo)((()=>m&&e.length-i),[e,i,m]),f=(0,r.useMemo)((()=>u?e:e.slice(0,i)),[e,i,u]);return f.length>0?(0,l.jsxs)("div",Object.assign({className:d()("nova-token-list",t,{"is-viewing-all":u})},{children:[f.map((e=>(0,r.createElement)(gn,Object.assign({},e,{isSelected:e.isSelected||s.includes(e.id),key:e.id,onClick:o,allowSelect:n,size:a,theme:c})))),m&&e.length>i&&(0,l.jsx)(gn,{className:"view-more-btn",onClick:p,size:a,theme:c,id:"_token_list_view_more_btn",text:u?`Hide ${g}...`:`View ${g} more...`})]})):null};var vn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const bn=function*(){let e=0;for(;;)yield e++}(),yn=["Backspace","Delete","ArrowLeft","ArrowRight"],Sn=()=>{},En=(0,r.forwardRef)(((e,t)=>{var{initialTokens:n=[],options:i=[],placeholder:s="+ Add",onChange:o,maxTokens:a,maxTokensValidationMsg:c="Maximum tokens added",helpMessage:u,tokenDisplayName:h="Token",validateNewToken:p=Sn}=e,m=vn(e,["initialTokens","options","placeholder","onChange","maxTokens","maxTokensValidationMsg","helpMessage","tokenDisplayName","validateNewToken"]);const g=(0,r.useRef)(null),f=(0,r.useRef)(null),[v,b]=(0,r.useState)(),[y,S]=(0,r.useState)(n),[E,T]=(0,r.useState)(),[O,_]=(0,r.useState)(!1),A=(0,r.useMemo)((()=>y.findIndex((e=>e.id===v))),[v,y]);(0,r.useImperativeHandle)(t,(()=>({focus:()=>{var e;null===(e=f.current)||void 0===e||e.focus()},blur:()=>{var e;null===(e=f.current)||void 0===e||e.blur()}})),[f]);const w=(0,r.useCallback)((()=>{var e;null===(e=f.current)||void 0===e||e.focus()}),[f]),N=(0,r.useCallback)((e=>y.some((t=>e===t.text))?`${h} "${e}" would duplicate an existing value.`:void 0),[y,h]),P=(0,r.useCallback)((e=>{const t=N(e)||p(e);return T(t),!t}),[p,N,T]),I=(0,r.useCallback)((e=>{var t;let n=!1;"string"==typeof e?(n=P(e),n&&S([...y,{text:e,id:`new_token_${bn.next().value}`}])):(n=!0,S([...y,e])),n&&(null===(t=f.current)||void 0===t||t.clear())}),[y,P]),k=(0,r.useCallback)((e=>{S(y.filter((t=>t.id!==e)))}),[y]),C=(0,r.useCallback)((e=>{if(g.current){g.current.querySelector(`[data-token-id="${e}"]`).focus()}}),[g]),L=(0,r.useCallback)((e=>{var t,n,i;e.stopPropagation();const s=y.length-1,r=e.code,o="Backspace"===r||"Delete"===r,a="ArrowLeft"===r,l="ArrowRight"===r;if(v){if(o){k(v),b("");const e=A-1;e>-1&&C(y[e].id)}else if(l)if(A===s)w();else{C(y[A+1].id)}else if(a){const e=A-1;-1===e?null===(n=(t=document.activeElement).blur)||void 0===n||n.call(t):C(y[e].id)}}else y.length>0&&(o||a)&&C(y[y.length-1].id);"Escape"===r&&(null===(i=g.current)||void 0===i||i.blur())}),[k,v,y,A,w,C]),M=(0,r.useCallback)((e=>{const{selectionStart:t,selectionEnd:n}=e.target,i=0===t&&t===n;return e.stopPropagation(),yn.includes(e.code)&&i&&L(e),!1}),[L]),D=(0,r.useCallback)((e=>{const{value:t}=e.target;P(t)}),[P]),R=(0,r.useCallback)((e=>{P(e)}),[P]),x=(0,r.useCallback)((e=>{k(e.id)}),[k]),j=(0,r.useCallback)((e=>{const{id:t}=e;b(t),_(!0)}),[]),U=(0,r.useCallback)((()=>{b(""),_(!0)}),[]),H=(0,r.useCallback)((()=>{_(!1),b("")}),[]);(0,r.useEffect)((()=>(o&&o(y),()=>{})),[y,o]);const F=(0,r.useMemo)((()=>{const e=y.map((e=>e.id));return i.filter((t=>!e.includes(t.id)))}),[i,y]),B=void 0!==a&&y.length>=a,V=B&&c?c:E||u;return(0,l.jsxs)("div",Object.assign({className:d()("nova-token-input",{"has-focus":O,"has-warning":B,"has-error":!!E}),onKeyDown:L,onBlur:H,tabIndex:2,ref:g},{children:[(0,l.jsxs)("div",Object.assign({className:"nova-token-input-container"},{children:[y.map((e=>(0,l.jsx)(gn,Object.assign({isFocused:e.id===v,onFocus:j,onRemoveClick:x},e),e.id))),!B&&(0,l.jsx)(on,Object.assign({},m,{ref:f,options:F,onChange:I,placeholder:s,onFocus:U,onBlur:H,onKeyDown:M,onKeyUp:D,onPaste:R}))]})),(0,l.jsxs)("div",Object.assign({className:"nova-input-help"},{children:[(0,l.jsxs)("span",Object.assign({className:"nova-input-counter"},{children:[y.length,void 0!==a&&a>0&&(0,l.jsxs)(l.Fragment,{children:["/",a]})]})),V&&(0,l.jsx)("span",Object.assign({className:"nova-helper-text"},{children:V}))]}))]}))}));var Tn,On,_n=n(57340),An=n(70329),wn=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.NONE="no-arrow",e.TOP_LEFT="position-top-left",e.TOP_RIGHT="position-top-right",e.TOP_CENTER="position-top-center",e.BOTTOM_RIGHT="position-bottom-right",e.BOTTOM_LEFT="position-bottom-left",e.BOTTOM_CENTER="position-bottom-center",e.RIGHT_BOTTOM="position-right-bottom"}(On||(On={}));let Nn=Tn=class Tooltip extends r.Component{constructor(e){super(e),this.tooltipWrapperRef=(0,r.createRef)(),this.tooltipContentRef=(0,r.createRef)(),this.maxDurationTimeout=0,this.addClickListenerTimeout=0,this.closeTooltip=()=>{this.setState({showing:!1}),window.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("touchstart",this.handleOutsideClick)},this.timeoutTooltip=()=>{this.closeTooltip(),this.props.onTimeout&&this.props.onTimeout()},this.openTooltip=e=>{this.setState({showing:!0}),this.addClickListenerTimeout=window.setTimeout((()=>{window.addEventListener("click",this.handleOutsideClick),window.addEventListener("touchstart",this.handleOutsideClick),void 0!==e&&(this.maxDurationTimeout=window.setTimeout(this.timeoutTooltip,e))}),0)},this.getContentPosition=()=>{if(!this.tooltipWrapperRef.current||!this.tooltipContentRef.current)return{};const e=this.tooltipWrapperRef.current.parentElement,t=this.tooltipContentRef.current;switch(this.props.arrowPos){case On.BOTTOM_RIGHT:return{transform:`translate(${15-t.offsetWidth}px, ${-t.offsetHeight-e.getBoundingClientRect().height-22}px)`};case On.BOTTOM_LEFT:return{transform:`translate(${-15}px, ${-t.offsetHeight-e.getBoundingClientRect().height-33}px)`};case On.RIGHT_BOTTOM:return{transform:`translate(${-t.offsetWidth-7}px, ${9-t.offsetHeight}px)`};default:return{}}},this.handleOutsideClick=e=>{this.props.onClose&&this.props.onClose(e)},this.state={showing:e.open};const t=Tn.count++;this.wrapperId=`tooltip-wrapper-${e.name||t}`,this.id=`${e.tooltipId||`tooltip-${t}`}`}static clearCount(){this.count=0}componentDidMount(){this.props.open&&this.openTooltip(this.props.maxMsOpen)}componentWillUnmount(){window.clearTimeout(this.maxDurationTimeout),window.clearTimeout(this.addClickListenerTimeout),window.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("touchstart",this.handleOutsideClick)}UNSAFE_componentWillReceiveProps(e){e.open&&!this.props.open?this.openTooltip(e.maxMsOpen):!e.open&&this.props.open&&this.closeTooltip()}render(){const{arrowPos:e,title:t,message:n,onClose:i,closeButton:s,darkTheme:r,appendHTML:o,bodyClassName:a,className:c}=this.props,{showing:u}=this.state,h={emulatedDialog:!0,open:u,dark:r,[void 0===e?On.TOP_CENTER:e]:!0};return(0,l.jsx)("div",Object.assign({id:this.wrapperId,className:d()(h,c),ref:this.tooltipWrapperRef},{children:(0,l.jsxs)("div",Object.assign({id:this.id,className:d()("tooltip",a),style:this.getContentPosition(),ref:this.tooltipContentRef},{children:[t&&(0,l.jsx)("div",Object.assign({className:"title"},{children:t})),s&&i&&(0,l.jsx)(An.P,{onClose:i}),n,o]}))}))}};Nn.POPUP_OFFSET=28,Nn.count=0,Nn=Tn=wn([_n.Z],Nn);var Pn=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let In=class Nudge extends r.Component{constructor(e,t){super(e),this.nudgeTimeout=0,this.initNudge=()=>{const e=this.context.settings.tryGetProperty(this.props.appSettingsKey,!1),t=this.context.settings.tryGetProperty(this.props.localStorageSettingsKey,!1);!e||t||this.nudgeTimeout||(this.nudgeTimeout=window.setTimeout((()=>{this.setState({show:!0}),window.setTimeout((()=>{this.dismissNudge()}),this.props.dismissTimeout)}),this.props.showTimeout))},this.dismissNudge=()=>{if(this.state.show){const{tool:e,guiAction:t}=this.props.analyticsKeys;this.context.analytics.trackToolGuiEvent(e,t),this.context.settings.setLocalStorageProperty(this.props.localStorageSettingsKey,!0),this.setState({show:!1})}},this.localized={title:t.locale.t(this.props.title),message:t.locale.t(this.props.message)},this.state={show:!1}}componentDidMount(){this.initNudge()}componentWillUnmount(){this.nudgeTimeout&&window.clearTimeout(this.nudgeTimeout)}render(){const{show:e}=this.state,{title:t,message:n}=this.localized,i=this.props.arrowPosition?this.props.arrowPosition:On.BOTTOM_CENTER;return(0,l.jsx)(Nn,{className:d()("tooltip-title-large","nudge-tooltip"),open:e,closeButton:!0,onClose:this.dismissNudge,title:t,message:(0,l.jsx)("div",Object.assign({className:"nudge-message"},{children:(0,l.jsx)("span",Object.assign({className:"message"},{children:n}))})),arrowPos:i})}};In.contextType=m.I,In=Pn([_n.Z],In);const kn=In;function Cn(e){const{disabled:t,active:n,buttonId:i,nudgeProps:s,onClick:o,analyticsName:a,tooltipPhraseKey:c}=e,d=_(),u=L(),{editMode:h}=(0,r.useContext)(m.I),p=d.t(c),g=u&&h,f={placement:g?"bottom":"top",offset:g?[0,10]:void 0},v=g&&n?et.FAB:et.TERTIARY,b=g&&n?"light":"overlay",y=i,S=g?tt.LARGE:void 0,E=(0,r.useCallback)((()=>{o(i,a)}),[o,i,a]);return(0,l.jsxs)("div",Object.assign({className:`mode-button mode-${i}`},{children:[(0,l.jsx)(nt,{onClick:E,icon:y,variant:v,theme:b,size:S,active:n,disabled:t,tooltip:p,tooltipOptions:f,ariaLabel:p}),s&&(0,l.jsx)(kn,{title:s.title,message:s.message,showTimeout:s.showTimeout,dismissTimeout:s.dismissTimeout,appSettingsKey:s.appSettingsKey,localStorageSettingsKey:s.localStorageSettingsKey,analyticsKeys:s.analyticsKeys,arrowPosition:s.arrowPosition})]}))}var Ln=n(8428);const Mn=["dh",Ln.gx.Dollhouse],Dn=["fp",Ln.gx.FloorPlan];function Rn(e,t){if(t)return!1;const n=e.checkUrlParam("dh",0,1),i=!e.tryGetProperty(Ln.gx.Dollhouse,!1);return n||i}function xn(e,t){if(t)return!1;const n=e.checkUrlParam("fp",0,1),i=!e.tryGetProperty(Ln.gx.FloorPlan,!1);return n||i}function jn(e,t){return!t&&!e}function Un(e,t,n){const s=e===t;switch(e){case i.Dollhouse:case i.Floorplan:return n||!s;case i.Inside:return n?t!==i.InsideMesh:!s;case i.InsideMesh:return n?s:t===i.Inside}return!1}var Hn=n(17423),Fn=n(39468);const Bn=new O.Z("mode-buttons");class ModeButtons extends r.Component{constructor(e){super(e),this.onClick=async(e,t)=>{const{transitioning:n}=this.props;if(n)return;const s=function(e){switch(e){case i.Dollhouse:return E.BD.DOLLHOUSE;case i.Floorplan:return E.BD.FLOORPLAN;case i.Inside:return E.BD.INSIDE;case i.InsideMesh:return E.BD.MESH;default:throw new Error(`cannot get viewmode for mode buttonId ${e}`)}}(e),{analytics:r,commandBinder:o}=this.context;r.trackGuiEvent(t);try{await o.issueCommand(new T.vy),await o.issueCommand(new E._i(s))}catch(e){Bn.warn(e)}}}render(){const{activeButtonId:e,activeStateDisplay:t,className:n,dollhousePrevented:r,floorplanPrevented:o,insidePrevented:a,meshPrevented:c,transitioning:u,viewmodeChangeEnabled:h}=this.props,p=t?On.TOP_CENTER:On.BOTTOM_LEFT,m=!h||u,f=!c&&Un(i.InsideMesh,e,!!t),v=!a&&Un(i.Inside,e,!!t),b=!r&&Un(i.Dollhouse,e,!!t),y=!o&&Un(i.Floorplan,e,!!t);return(0,l.jsxs)("div",Object.assign({className:d()("mode-buttons",n)},{children:[f&&(0,l.jsx)(Cn,{tooltipPhraseKey:g.Z.VIEW_INSIDE_MESH,analyticsName:s.InsideMesh,buttonId:i.InsideMesh,active:e===i.InsideMesh,onClick:this.onClick,disabled:m}),v&&(0,l.jsx)(Cn,{tooltipPhraseKey:g.Z.VIEW_INSIDE,analyticsName:s.Inside,buttonId:i.Inside,active:e===i.Inside,onClick:this.onClick,disabled:m}),b&&(0,l.jsx)(Cn,{tooltipPhraseKey:g.Z.VIEW_DOLLHOUSE,analyticsName:s.Dollhouse,buttonId:i.Dollhouse,active:e===i.Dollhouse,onClick:this.onClick,disabled:m,nudgeProps:{title:g.Z.DOLLHOUSE_NUDGE_TITLE,message:g.Z.DOLLHOUSE_NUDGE_MESSAGE,showTimeout:5e3,dismissTimeout:1e4,appSettingsKey:Fn.I,localStorageSettingsKey:Hn.F.DollhouseUserNudgeSeen,analyticsKeys:{tool:"view_mode",guiAction:"dollhouse_nudge"},arrowPosition:p}}),y&&(0,l.jsx)(Cn,{tooltipPhraseKey:g.Z.VIEW_FLOORPLAN,analyticsName:s.Floorplan,buttonId:i.Floorplan,active:e===i.Floorplan,onClick:this.onClick,disabled:m})]}))}}ModeButtons.contextType=m.I;class ModeControls extends r.Component{constructor(e){super(e),this.bindings=[],this.isUnmounting=!1,this.updateDollhouseState=()=>{const{editMode:e,settings:t}=this.context;this.setState({dollhousePrevented:Rn(t,e)})},this.updateFloorplanState=()=>{const{editMode:e,settings:t}=this.context;this.setState({floorplanPrevented:xn(t,e)})},this.onCurrentFloorChanged=()=>{const{editMode:e}=this.context,t=this.floorsViewData.currentFloor,n=this.floorsViewData.hasEnabledAlignedSweeps(t&&t.id);this.setState({insidePrevented:jn(n,e)})},this.onViewmodeChangeLockUpdate=()=>{const{market:e}=this.context,t=e.tryGetData(y.O);if(!t)return;const n=t.viewmodeChangeEnabled;this.setState({viewmodeChangeEnabled:n})},this.state={dollhousePrevented:!1,floorplanPrevented:!1,insidePrevented:!1,viewmodeChangeEnabled:!0}}componentDidMount(){const{market:e,settings:t}=this.context;Promise.all([e.waitForData(y.O),e.waitForData(S.c)]).then((([e,n])=>{this.isUnmounting||(this.floorsViewData=n,this.bindings.push(e.onPropertyChanged("viewmodeChangeEnabled",this.onViewmodeChangeLockUpdate),n.makeFloorChangeSubscription(this.onCurrentFloorChanged)),Mn.forEach((e=>{this.bindings.push(t.onPropertyChanged(e,this.updateDollhouseState))})),Dn.forEach((e=>{this.bindings.push(t.onPropertyChanged(e,this.updateFloorplanState))})),this.onCurrentFloorChanged(),this.updateDollhouseState(),this.updateFloorplanState(),this.onViewmodeChangeLockUpdate())}))}componentWillUnmount(){this.isUnmounting=!0;for(const e of this.bindings)e.cancel();this.bindings=[]}render(){const{editMode:e}=this.context,{className:t,unaligned:n,viewmode:s,activeStateDisplay:r}=this.props,{viewmodeChangeEnabled:o,dollhousePrevented:a,floorplanPrevented:c,insidePrevented:u}=this.state,h=s===E.BD.TRANSITIONING;h||(this.activeButtonId=function(e,t){if(e)return i.None;switch(t){case E.BD.DOLLHOUSE:return i.Dollhouse;case E.BD.FLOORPLAN:return i.Floorplan;case E.BD.INSIDE:return i.Inside;case E.BD.MESH:return i.InsideMesh}return i.None}(n,s));const p=function(e){return!e}(e);return(0,l.jsx)(ModeButtons,{className:d()("viewmode-controls",t),activeStateDisplay:r,activeButtonId:this.activeButtonId,transitioning:h,dollhousePrevented:a,floorplanPrevented:c,insidePrevented:u,meshPrevented:p,viewmodeChangeEnabled:o})}}ModeControls.contextType=m.I;var Vn=n(8259);function Gn(e,t){const{messageBus:n}=(0,r.useContext)(m.I);(0,r.useEffect)((()=>{const i=n.subscribe(e,t);return()=>i.cancel()}),[n,e,t])}var Wn=n(84347);function zn(e,t,n){return()=>Kn(e,t,n)}function Kn(e,t,n){const i=N(e),[s,o]=(0,r.useState)(i?i[t]:n);return(0,r.useEffect)((()=>{if(!i)return()=>{};const e=i.onPropertyChanged(t,o);return o(i[t]),()=>e.cancel()}),[i,t]),s}var Yn=n(72699);const qn=zn(Yn.k,"tourCurrentSnapshot",-1);function $n(e){const[t,n]=(0,r.useState)(e.value);return(0,r.useEffect)((()=>{const t=e.onChanged(n);return n(e.value),()=>t.cancel()}),[e]),t}var Zn=n(67779);const Qn=w(Yn.k),Xn=(0,Zn.Y)(Yn.b);function Jn(){const e=Qn();return $n(e?e.transitionObservable:Xn)}function ei(){const e=Jn(),t=(0,r.useRef)(e);return e.type===Wn.Aq.FloorChange?t.current:(t.current=e,e)}function ti(e){const[t,n]=(0,r.useState)(e.values());return(0,r.useEffect)((()=>{const t=()=>{n(e.values())},i=e.onChanged(t);return t(),()=>i.cancel()}),[e]),t}var ni=n(29984);const ii=(0,ni.C)([]);function si(){return function(){const e=Qn();return ti(e?e.enabledTourStops:ii)}().length}var ri;!function(e){e.FastForwarding="fast-forwarding",e.Idle="idle",e.Completed="completed",e.Paused="paused",e.Playing="playing",e.Rewinding="rewinding",e.Skipping="skipping"}(ri||(ri={}));const oi=[ri.FastForwarding,ri.Playing,ri.Rewinding];function ai(){var e;const t=(0,r.useRef)(null),n=si(),i=qn(),s=ei(),o=s.toIndex,a=-1!==o&&o!==i;let l=ri.Idle;a?l=0===o&&i===n-1?ri.FastForwarding:Math.abs(o-i)>1?ri.Skipping:o<i?ri.Rewinding:ri.FastForwarding:Wn.c5.includes(s.type)?l=s.active?ri.Playing:ri.Paused:s.type===Wn.Aq.Move&&s.active&&(l=ri.Rewinding);let c=!1;if((null===(e=t.current)||void 0===e?void 0:e.index)!==i&&(t.current=null),(l===ri.Rewinding||l===ri.FastForwarding)&&t.current){const{animation:e,transition:n}=t.current;if(n!==s){const{started:t,stopped:i,duration:s}=n;(i-t)/s>=.99&&(c=!0,e===ri.Rewinding&&(l=ri.Idle),e!==ri.Playing&&e!==ri.FastForwarding||(l=ri.Completed))}}return oi.includes(l)?t.current={transition:s,animation:l,index:i}:c||(t.current=null),l}var li,ci=n(84586),di=n(36616),ui=n(71843),hi=n(34612),pi=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.OPEN="open",e.UNLOADING="unloading",e.CLOSED="closed"}(li||(li={}));let mi=class TransitionedUnload extends r.Component{constructor(e){super(e),this.ref=(0,r.createRef)(),this.onTransitionCancel=e=>{e.target===e.currentTarget&&this.state.phase===li.UNLOADING&&this.setState({phase:li.CLOSED,activeChild:null})},this.onTransitionEnd=e=>{e.target===e.currentTarget&&this.state.phase===li.UNLOADING&&this.setState({phase:li.CLOSED,activeChild:null})},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)},this.onPointerDown=e=>{this.props.onPointerDown&&this.props.onPointerDown(e)},this.onPointerUp=e=>{this.props.onPointerUp&&this.props.onPointerUp(e)},this.state={phase:e.open?li.OPEN:li.CLOSED,activeChild:e.selectChild&&e.childKey||null}}componentDidMount(){this.ref.current&&this.ref.current.addEventListener("transitioncancel",this.onTransitionCancel)}componentWillUnmount(){this.ref.current&&this.ref.current.removeEventListener("transitioncancel",this.onTransitionCancel)}UNSAFE_componentWillReceiveProps(e){const{open:t,childKey:n}=this.props;t&&!e.open?this.setState({phase:li.UNLOADING}):!t&&e.open?this.setState({phase:li.OPEN,activeChild:e.selectChild&&e.childKey||null}):n!==e.childKey&&this.setState({activeChild:e.selectChild&&e.childKey||null})}renderChildren(){const{children:e,selectChild:t}=this.props,{phase:n,activeChild:i}=this.state;return n===li.CLOSED||t&&!i?null:t?e&&Array.isArray(e)&&e.length&&e.find((e=>e&&e.key===i))||null:e}render(){const{className:e,firstChild:t,style:n}=this.props,{phase:i}=this.state,s=d()({unloading:i===li.UNLOADING},e);return(0,l.jsxs)("div",Object.assign({ref:this.ref,className:s,style:n,onTransitionEnd:this.onTransitionEnd,onClick:this.onClick,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp},{children:[t||null,this.renderChildren()]}))}};mi=pi([_n.Z],mi);var gi=n(65171);function fi(){const[e,t]=(0,r.useState)(!1),n=(0,r.useCallback)((()=>{t(!0)}),[]),i=(0,r.useCallback)((()=>{t(!1)}),[]);return Gn(ci.Vx,n),Gn(gi.Z,i),e}function vi(e,t){const{settings:n}=(0,r.useContext)(m.I),[i,s]=(0,r.useState)(n.tryGetProperty(e,t));return(0,r.useEffect)((()=>{if(!e)return s(t),()=>{};const i=()=>{s(n.tryGetProperty(e,t))},r=n.onPropertyChanged(e,i);return i(),()=>r.cancel()}),[n,e,t]),i}const{HLR:bi}=g.Z.WORKSHOP;function yi(e){const t=!vi(Hn.F.TourTextNudgeDismissed,!1),n=fi(),{highlights:i,currentStep:s,activeStep:o,tourPlaying:a}=e,{locale:c,commandBinder:u,settings:h,editMode:g}=(0,r.useContext)(m.I),f=(0,r.useCallback)(((e,t=!0)=>{h.setLocalStorageProperty(Hn.F.TourTextNudgeDismissed,!0),t&&e.stopPropagation()}),[h]),v=(0,r.useCallback)((async e=>{await u.issueCommand(new hi.tT(p.w1.HLR,!0)),u.issueCommand(new ui.Bz(di.P.HIGHLIGHT_EDITOR,!0)),u.issueCommand(new hi.Fg(!1)),f(e,!1)}),[u,f]),b=i[s],y=(null==b?void 0:b.title)||(null==b?void 0:b.description),S=g&&!y&&t,E=(null==b?void 0:b.title)||(S?c.t(bi.HIGHLIGHT_TITLE_PLACEHOLDER):""),T=(null==b?void 0:b.description)||(S?c.t(bi.HIGHLIGHT_DESCRIPTION_PLACEHOLDER):""),O=n&&!(o!==s)&&a,_=d()("tour-story",{active:O,prompt:S});return(0,l.jsxs)(mi,Object.assign({open:n&&a,className:_,onClick:O?v:void 0},{children:[S&&(0,l.jsx)(nt,{className:"tour-story-dismiss",theme:"dark",variant:et.TERTIARY,icon:"close",onClick:f}),(0,l.jsx)("div",Object.assign({className:"tour-story-title"},{children:E})),(0,l.jsx)("div",Object.assign({className:"tour-story-description"},{children:T}))]}))}const{TOURS:Si}=g.Z.SHOWCASE,Ei=[ri.FastForwarding,ri.Rewinding,ri.Skipping];function Ti(e){const{activeStep:t,currentStep:n,handlePlayPause:i,highlights:s,tourPlaying:o,toolPanelLayout:a}=e,[c,u]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),v=ai(),{commandBinder:b,locale:y,analytics:S}=(0,r.useContext)(m.I),E=(0,r.useCallback)((()=>{u(!0)}),[]),O=(0,r.useCallback)((()=>{t===n&&u(!1)}),[t,n]);Gn(ci.Vx,E),Gn(gi.Z,O);const _=0===s.length,A=a===p.wS.NARROW||a===p.wS.BOTTOM_PANEL,w=o?y.t(g.Z.PAUSE):y.t(g.Z.PLAY),N=y.t(g.Z.PREVIOUS),P=y.t(g.Z.NEXT),I=_||!o?"play-unicode":"pause",k=_||Ei.includes(v),C=s[t];let L=(null==C?void 0:C.snapshot.name)||"";c||(L=o||h?"":y.t(Si.TOUR_BUTTON_LABEL));const M=(0,r.useCallback)((()=>{f(!0),i()}),[i]),D=(0,r.useCallback)((async e=>{_||(e.stopPropagation(),f(!0),S.trackGuiEvent("skip_foward_highlights"),await b.issueCommand(new T.r2))}),[S,_,b]),R=(0,r.useCallback)((async e=>{_||(e.stopPropagation(),f(!0),S.trackGuiEvent("skip_backward_highlights"),await b.issueCommand(new T.Ri))}),[S,_,b]);return(0,l.jsxs)("div",Object.assign({className:"tour-story-controls"},{children:[(0,l.jsx)(yi,{tourPlaying:o,currentStep:n,activeStep:t,highlights:s}),(0,l.jsx)(nt,{icon:"dpad-left",className:"story-tour-previous-cta",variant:et.TERTIARY,size:tt.SMALL,disabled:k,ariaLabel:N,tooltip:N,onClick:R}),(0,l.jsx)(nt,{className:"tour-story-play-pause",icon:I,variant:et.TERTIARY,size:tt.SMALL,disabled:k,ariaLabel:w,tooltip:w,onClick:_?void 0:M}),(0,l.jsx)(nt,{icon:"dpad-right",className:"story-tour-next-cta",variant:et.TERTIARY,size:tt.SMALL,disabled:k,ariaLabel:P,tooltip:P,onClick:D}),L&&o&&!A&&(0,l.jsx)("span",Object.assign({className:d()("tour-control-label",{active:o})},{children:L}))]}))}var Oi=n(77148),_i=n(3819);const Ai=zn(_i.T,"reelOpen",!1);function wi(e){const{reelEnabled:t,activeTool:n,tourMode:i}=e,s=_(),{analytics:o,commandBinder:a}=(0,r.useContext)(m.I),c=Ai(),u=(0,r.useCallback)((()=>{const e=c?"hide_":"show_";o.trackToolGuiEvent("hlr",e+"highlight_reel"),a.issueCommand(new Oi.Av(!c))}),[c,o,a]),h=i===Vn.zz.STORIES;if(!t||h&&n!==p.w1.HLR)return null;const f=c?s.t(g.Z.CLOSE_HIGHLIGHTS):s.t(g.Z.OPEN_HIGHLIGHTS),v=c?"dpad-down":"dpad-up",b=d()("highlight-button",{"hlr-expanded":c});return(0,l.jsx)(nt,{className:b,onClick:u,tooltip:f,ariaLabel:f,"aria-expanded":c?"true":"false",icon:v,theme:"overlay",variant:et.TERTIARY})}var Ni=n(49598);function Pi(){const e=vi(Ln.gx.HighlightReel,!0),t=vi(Ni.rU,Ni.iL);return e&&t!==Ni.Nu}P("reelEnabled",Pi);function Ii(){const e=vi(Ln.gx.TourButtons,!0),t=vi(Ni.o9,Ni.qe),n=vi(Ni.PR,Ni.l4);return e&&t!==Ni.Wf&&n!==Ni.pQ}P("tourEnabled",Ii);function ki(e){const{activeTool:t,handlePlayPause:n,highlights:i,hideReel:s,tourPlaying:o}=e,{locale:a,editMode:c}=(0,r.useContext)(m.I),d=Pi()&&!s||c,u=Ii()||c;if(!d&&!u)return null;const h=0===i.length,p=o?a.t(g.Z.PAUSE):a.t(g.Z.PLAY),f=o?"pause-outline":"play";return(0,l.jsxs)("div",Object.assign({className:"highlight-tour-controls"},{children:[d&&(0,l.jsx)(wi,{activeTool:t,reelEnabled:d,tourMode:Vn.zz.LEGACY}),u&&(0,l.jsx)(nt,{disabled:h,active:o,onClick:n,variant:et.TERTIARY,theme:"overlay",className:"tour-controls",ariaLabel:p,icon:f,tooltip:p})]}))}const Ci=new O.Z("preview-tour"),{HLR:Li}=g.Z.WORKSHOP;function Mi(){const{commandBinder:e}=(0,r.useContext)(m.I),t=_(),n=L(),i=0===si(),s=(0,r.useCallback)((async()=>{if(!i)try{await e.issueCommand(new T.TH)}catch(e){Ci.debug(e)}}),[e,i]),o=t.t(Li.PREVIEW_SETTINGS_CTA),a=n?void 0:o,c=n?o:void 0;return(0,l.jsx)(nt,{icon:"play-unicode",label:a,tooltip:c,disabled:i,size:tt.LARGE,theme:"dark",className:"preview-tour-button",variant:et.FAB,onClick:s})}const Di=new O.Z("tour-controls");class TourControls extends r.Component{constructor(){super(...arguments),this.handlePlayPause=async()=>{const{analytics:e,commandBinder:t}=this.context,{highlights:n,tourPlaying:i}=this.props;if(0===n.length)return;const s=i?"pause_highlights":"play_highlights";e.trackGuiEvent(s);try{i?await t.issueCommand(new T.vy):await t.issueCommand(new T.TH)}catch(e){Di.debug(e)}}}render(){const{activeStep:e,activeTool:t,currentStep:n,highlights:i,hideReel:s,toolPanelLayout:r,tourMode:o,tourPlaying:a}=this.props,c=t===p.w1.HLR;if(c&&!a)return(0,l.jsx)(Mi,{});const{editMode:d}=this.context,u=o===Vn.zz.NONE;if(d){const e=!!t&&!c,n=r===p.wS.BOTTOM_PANEL||r===p.wS.NARROW;if(t===p.w1.MESH_TRIM)return null;if(n&&e)return null}else{if(0===i.length||u||t)return null}return o===Vn.zz.STORIES?(0,l.jsx)(Ti,{activeStep:e,currentStep:n,highlights:i,toolPanelLayout:r,tourPlaying:a,handlePlayPause:this.handlePlayPause}):(0,l.jsx)(ki,{activeTool:t,handlePlayPause:this.handlePlayPause,highlights:i,hideReel:s,tourPlaying:a})}}TourControls.contextType=m.I;const Ri=w(y.O);function xi(){const e=Ri(),[t,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.currentModeObservable.onChanged(n);return n(e.currentMode),()=>t.cancel()}),[e]),t}var ji=n(22878),Ui=n(37632);const Hi=new O.Z("floor-controls-switch-floor");async function Fi(e,t){const{analytics:n,commandBinder:i}=t;try{await i.issueCommand(new T.vy);const t=null===e?"click_toggle_all_floors_button":"click_floor_select_button";n.trackGuiEvent(t);const s=new Ui.Vw(e);await i.issueCommand(s)}catch(e){Hi.debug(e)}}function Bi({name:e,id:t,active:n}){const i=(0,r.useContext)(m.I),{analytics:s}=i,o=(0,r.useCallback)((async()=>{s.trackGuiEvent("floor_clicked"),Fi(t||null,i)}),[s,t]);return(0,l.jsx)(nt,{className:"floor-button",label:e,variant:et.TERTIARY,size:tt.SMALL,theme:"dark",onClick:o,active:n})}function Vi(e){const{currentFloor:t,currentFloorIndicator:n,floors:i}=e,s=_(),{analytics:o}=(0,r.useContext)(m.I),a=xi()!==ji.Ey.Panorama,c=(0,r.useCallback)((()=>{o.trackGuiEvent("floor_controls")}),[o]),u=n&&t&&t.index+1,h=s.t(g.Z.HELP_MORE_FLOORS_A),p=d()("floor-controls",{"two-digit":void 0!==u&&u>=10}),f=u?"floor-controls":"floor-controls-all",v=i.map((e=>{const{id:i,name:s}=e,r=n&&(null==t?void 0:t.id)===i;return(0,l.jsx)(Bi,{id:i,name:s,active:r},i)}));return a&&v.push((0,l.jsx)(Bi,{name:s.t(g.Z.FLOOR_ALL),active:!t},"all")),v.reverse(),(0,l.jsx)(lt,Object.assign({buttonClassName:p,buttonDataAttribute:u,onClick:c,variant:et.TERTIARY,ariaLabel:h,tooltip:h,icon:f,theme:"overlay",menuClassName:"floor-controls-menu",menuTheme:"dark",menuPlacement:"top"},{children:v}))}class SelectMenu_SelectMenu extends r.Component{constructor(e){super(e),this.onSelectOption=e=>{const{onChange:t}=this.props,n=e.target.getAttribute("data-value");this.closeMenu(),t(n)},this.onClick=e=>{const{open:t}=this.state;return t?this.closeMenu():this.openMenu()},this.onTooltipClose=()=>{this.closeMenu()},this.state={open:!1}}getSelectedOption(){return this.props.options.find((e=>e.selected))||null}openMenu(){this.setState({open:!0})}closeMenu(){this.setState({open:!1})}renderPopupContents(){const e=[];return this.props.options.forEach(((t,n)=>{const i=t.className||"";e.push((0,l.jsx)("div",Object.assign({"data-value":t.value,className:d()({tpMsg:!0,disabled:!!t.disabled,[i]:!!i}),onClick:this.onSelectOption},{children:t.text}),`${n}-${t.value}`))})),(0,l.jsx)("div",Object.assign({className:"tooltip-menu"},{children:e}))}render(){const{arrowPos:e,className:t,id:n,label:i,menuStyle:s,placeholder:r}=this.props,{open:o}=this.state,a=this.getSelectedOption(),c=s===Gi.BUTTON,u=s===Gi.DROPDOWN,h=d()("select-popup",{"select-button":c,"select-dropdown":u},t),p=a?a.selectedText||a.text:r||"";return(0,l.jsxs)("div",Object.assign({className:h,id:n},{children:[i&&(0,l.jsx)("label",Object.assign({className:"select-label"},{children:i})),(0,l.jsxs)("div",Object.assign({className:"select-trigger",onClick:this.onClick},{children:[(0,l.jsx)("span",Object.assign({className:"select-menu-text"},{children:p})),(0,l.jsx)("span",{className:"icon icon-dpad-down"}),(0,l.jsx)(Nn,{open:!!o,onClose:this.onTooltipClose,message:this.renderPopupContents(),arrowPos:e||On.NONE,bodyClassName:"item-tooltip"})]}))]}))}}var Gi;!function(e){e[e.DROPDOWN=0]="DROPDOWN",e[e.BUTTON=1]="BUTTON"}(Gi||(Gi={}));var Wi=n(36032);const zi=w(S.c),Ki=P("floorsViewData",zi);function Yi(e){return e?e.getNavigableFloorIds().map(e.getViewData):[]}function qi(){const e=zi(),[t,n]=(0,r.useState)(e?e.currentFloorId:null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=()=>{const t=e.currentFloorId;n(t)},i=e.makeFloorChangeSubscription(t);return t(),()=>i.cancel()}),[e]),t}const $i=P("currentFloorId",qi);function Zi(e){const t=zi(),[n,i]=(0,r.useState)(t&&null!==e?t.getViewData(e):null);return(0,r.useEffect)((()=>{if(!t)return()=>{};if(e){const n=t.getViewData(e);i(n)}else i(null);return()=>{}}),[t,e]),n}function Qi(){return Zi(qi())}function Xi(e){const t=function(){const e=zi(),[t,n]=(0,r.useState)(Yi(e));return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=()=>n(Yi(e)),i=new Wi.V(e.floors.onNameChange(t),e.onNavigableFloorIdsChanged(t));return t(),()=>i.cancel()}),[e]),t}(),n=xi(),i=Qi(),s=(0,r.useContext)(m.I),{analytics:o}=s,a=_(),c=(0,r.useCallback)((e=>{Fi(e||null,s),o.trackGuiEvent("floor_clicked")}),[s]),u=t.map((e=>({text:e.name,value:e.id,selected:(null==i?void 0:i.id)===e.id}))).reverse();n!==ji.Ey.Panorama&&u.unshift({text:a.t(g.Z.FLOOR_ALL),value:"",selected:!i});const h=d()("floor-menu-selector",e.className);return(0,l.jsx)(SelectMenu_SelectMenu,{menuStyle:Gi.DROPDOWN,onChange:c,options:u,className:h})}var Ji=n(32683);class FloorControls extends r.Component{constructor(e){super(e),this.bindings=[],this.isUnmounting=!1,this.onCurrentFloorChanged=()=>{var e,t;const n=(null===(e=this.floorsViewData)||void 0===e?void 0:e.currentFloor)||void 0,i=n&&(null===(t=this.floorsViewData)||void 0===t?void 0:t.getViewData(n.id));this.setState({currentFloor:i})},this.onFloorsChanged=()=>{var e,t;const n=(null===(e=this.floorsViewData)||void 0===e?void 0:e.getNavigableFloorIds()).map(null===(t=this.floorsViewData)||void 0===t?void 0:t.getViewData);this.setState({floors:n})},this.state={currentFloorIndicator:!0,floors:[]}}onSettingsChanged(){const{settings:e}=this.context,t=e.tryGetProperty(Ji.u_,!0);this.setState({currentFloorIndicator:t})}componentDidMount(){const{settings:e,market:t}=this.context;e&&(this.bindings.push(e.onPropertyChanged(Ji.u_,(()=>this.onSettingsChanged()))),this.onSettingsChanged()),t&&t.waitForData(S.c).then((e=>{this.isUnmounting||(this.floorsViewData=e,this.bindings.push(this.floorsViewData.makeFloorChangeSubscription(this.onCurrentFloorChanged),this.floorsViewData.floors.onNameChange(this.onFloorsChanged),this.floorsViewData.onNavigableFloorIdsChanged(this.onFloorsChanged)),this.onCurrentFloorChanged(),this.onFloorsChanged())}))}componentWillUnmount(){this.isUnmounting=!0,this.bindings.forEach((e=>{e.cancel()}))}render(){const{className:e,viewmode:t,iconStyle:n}=this.props,{currentFloor:i,currentFloorIndicator:s,floors:r}=this.state;return r.length>1&&t!==E.BD.OUTSIDE?(0,l.jsxs)("div",Object.assign({className:d()("floor-selector",e)},{children:[n&&(0,l.jsx)(Vi,{floors:r,currentFloor:i,currentFloorIndicator:s}),!n&&(0,l.jsx)("span",{className:"divider"}),!n&&(0,l.jsx)(Xi,{})]})):null}}function es(){const e=_(),{commandBinder:t}=(0,r.useContext)(m.I),n=(0,r.useCallback)((()=>{t.issueCommand(new ui.Bz(di.P.VR_SELECT,!0))}),[t]),i=e.t(g.Z.VIEW_IN_VR);return(0,l.jsx)(nt,{className:"view-in-vr",onClick:n,ariaLabel:i,tooltip:i,tooltipOptions:{placement:"top"},icon:"vr",theme:"overlay",variant:et.TERTIARY})}FloorControls.contextType=m.I;var ts=n(2252);class FullscreenControls extends r.Component{constructor(e){super(e),this.handleButtonClick=()=>{const{analytics:e}=this.context;ts.rm()?(e.trackGuiEvent("click_exit_fullscreen",{interactionSource:"gui"}),ts.Qg()):(e.trackGuiEvent("click_enter_fullscreen",{interactionSource:"gui"}),ts.Zx(document.body))},this.onFullScreenChange=e=>{const{mainDiv:t}=this.context,n=ts.rm();n?t.classList.add("full-screen"):t.classList.remove("full-screen"),this.setState({fullscreen:n})},this.state={fullscreen:ts.rm()},document.addEventListener("fullscreenchange",this.onFullScreenChange),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange),document.addEventListener("MSFullscreenChange",this.onFullScreenChange),document.addEventListener("mozfullscreenchange",this.onFullScreenChange)}componentWillUnmount(){document.removeEventListener("fullscreenchange",this.onFullScreenChange),document.removeEventListener("webkitfullscreenchange",this.onFullScreenChange),document.removeEventListener("MSFullscreenChange",this.onFullScreenChange),document.removeEventListener("mozfullscreenchange",this.onFullScreenChange)}render(){const{fullscreen:e}=this.state,t=e?this.context.locale.t(g.Z.EXIT_FULLSCREEN):this.context.locale.t(g.Z.VIEW_FULLSCREEN),n=e?"fullscreen-exit":"fullscreen";return(0,l.jsx)("div",Object.assign({className:"fullscreen-mode"},{children:(0,l.jsx)(nt,{onClick:this.handleButtonClick,ariaLabel:t,tooltip:t,tooltipOptions:{placement:"top"},icon:n,theme:"overlay",variant:et.TERTIARY})}))}}FullscreenControls.contextType=m.I;var ns=n(36669),is=n(68168);var ss;!function(e){e[e.flash=0]="flash",e[e.expanded=1]="expanded",e[e.collapsed=2]="collapsed"}(ss||(ss={}));var rs=n(4323);const os=e=>e.innerWidth<487||e.innerHeight<487;var as=n(44450),ls=n(74170);const cs=(e,t)=>{for(const n in t)if(e[n]!==t[n])return!0;return!1},ds=250;var us,hs;!function(e){e.horizontal="horizontal",e.vertical="vertical"}(us||(us={})),function(e){e.x="x",e.y="y"}(hs||(hs={}));const ps=e=>{switch(e){case us.horizontal:return hs.x;case us.vertical:return hs.y}throw Error()},ms=e=>{switch(e){case hs.x:return us.horizontal;case hs.y:return us.vertical}throw Error()},gs={[us.horizontal]:{scrollOffset:"scrollLeft",offsetLength:"offsetWidth",clientLength:"clientWidth",positionOffset:"offsetLeft",lengthName:"width",offsetName:"left",eventPosition:"clientX",delta:hs.x},[us.vertical]:{scrollOffset:"scrollTop",offsetLength:"offsetHeight",clientLength:"clientHeight",positionOffset:"offsetTop",lengthName:"height",offsetName:"top",eventPosition:"clientY",delta:hs.y}};var fs;!function(e){e.Beginning="Beginning",e.Middle="Middle",e.End="End",e.None="None"}(fs||(fs={}));var vs=n(5314),bs=n(87727);class InputFilter{constructor(e){this.couldBeDrag=!1,this.isDragging=!1,this.shouldHandleEvents=!0,this.handleEvent=e=>{if(this.shouldHandleEvents)switch(e.stopPropagation(),e.type){case"mousedown":case"touchstart":case"pointerdown":this.onPressStart(e);break;case"mousemove":case"pointermove":case"touchmove":this.onPressMove(e);break;case"mouseup":case"pointerup":case"mouseleave":case"touchend":case"touchcancel":case"pointercancel":case"pointerleave":this.onPressEnd(e)}},this.callbacks=e}setEnabled(e){this.shouldHandleEvents=e,this.couldBeDrag=this.couldBeDrag&&e}getPosition(e){return(0,vs.z6)(e)?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}}onPressStart(e){this.couldBeDrag=!0,this.dragEvents=[],this.dragStart=this.getPosition(e),this.callbacks.handlePressStart&&this.callbacks.handlePressStart(this.getPosition(e))}onPressMove(e){if(!this.couldBeDrag)return;const t=this.getPosition(e);this.addDragEvent(t),this.isDragging||Math.sqrt(Math.pow(t.x-this.dragStart.x,2)+Math.pow(t.y-this.dragStart.y,2))>bs.JU&&(this.isDragging=!0,this.callbacks.handleDragStart&&this.callbacks.handleDragStart()),this.callbacks.handlePressMove&&this.callbacks.handlePressMove({x:this.dragStart.x-t.x,y:this.dragStart.y-t.y})}onPressEnd(e){if(this.couldBeDrag){if(this.couldBeDrag=!1,this.isDragging){if(!this.dragEvents||!this.dragEvents[0])return;const e=this.dragEvents[0],t=this.dragEvents[this.dragEvents.length-1];if(this.callbacks.handleDragEnd){const n={x:0,y:0};Date.now()-t.timestamp<InputFilter.dragMoveTimeout&&(n.x=e.position.x-t.position.x,n.y=e.position.y-t.position.y),this.callbacks.handleDragEnd(n,t.timestamp-e.timestamp)}}else this.callbacks.handleClick&&this.callbacks.handleClick(e);this.isDragging=!1}}addDragEvent(e){this.dragEvents.push({position:e,timestamp:Date.now()}),this.dragEvents.length>10&&this.dragEvents.shift()}}InputFilter.dragMoveTimeout=100;class Scrollbar extends r.Component{constructor(e){super(e),this.state={visible:!1,trackLength:1,thumbLength:1,thumbOffset:0},this.direction=gs[e.direction],this.handlePressStart=this.handlePressStart.bind(this),this.handlePressMove=this.handlePressMove.bind(this),this.handleTrackClick=this.handleTrackClick.bind(this),this.inputFilter=new InputFilter({handlePressStart:this.handlePressStart,handlePressMove:this.handlePressMove}),window.PointerEvent||(window.addEventListener("mousemove",this.inputFilter.handleEvent),window.addEventListener("mouseleave",this.inputFilter.handleEvent),window.addEventListener("mouseup",this.inputFilter.handleEvent)),window.addEventListener("pointermove",this.inputFilter.handleEvent),window.addEventListener("pointerup",this.inputFilter.handleEvent)}componentWillUnmount(){window.PointerEvent||(window.removeEventListener("mousemove",this.inputFilter.handleEvent),window.removeEventListener("mouseleave",this.inputFilter.handleEvent),window.removeEventListener("mouseup",this.inputFilter.handleEvent)),window.removeEventListener("pointermove",this.inputFilter.handleEvent),window.removeEventListener("pointerup",this.inputFilter.handleEvent)}getTrackLength(){return Number(this.thumbTrack&&this.thumbTrack[this.direction.clientLength]||window.innerWidth)}handleTrackClick(e){if(e.target!==this.thumbTrack)return;const t=this.direction.eventPosition,n=this.thumbTrack.getBoundingClientRect()[this.direction.offsetName],i=e[t]<n+this.state.thumbOffset,s=this.getTrackLength();let r=0;r=i?Math.max(0,(this.state.thumbOffset-this.state.thumbLength)/s):Math.min(s,(this.state.thumbOffset+this.state.thumbLength)/s),this.props.scrollTo({[ps(this.props.direction)]:r})}handlePressStart(e){this.dragStartThumbOffset=this.state.thumbOffset}handlePressMove(e){const t=this.getTrackLength(),n=(this.dragStartThumbOffset-e[this.direction.delta])/t;this.props.scrollTo({[ps(this.props.direction)]:n}),this.props.onThumbDrag&&this.props.onThumbDrag()}componentDidUpdate(){const{wrapperLength:e,childLength:t,scrollOffset:n}=this.props;if(e>0&&t>0){const s=this.getTrackLength(),r=e/t*s,o={thumbLength:r,visible:t>e,thumbOffset:Math.min(n/t*s,s-r)};if(cs(this.state,o)){const e=this.state.visible!==o.visible;e&&this.props.onVisibilityChange&&this.props.onVisibilityChange(o.visible);const t=(i=o.thumbOffset/(s-r),o.visible?i<.01?fs.Beginning:1-i<.01?fs.End:fs.Middle:fs.None);(t!==this.scrollPosition||e)&&(this.scrollPosition=t,this.props.onScrollPositionChange&&this.props.onScrollPositionChange(t)),this.setState(o)}}var i}render(){const e={[`${this.direction.lengthName}`]:this.state.thumbLength+"px",[`${this.direction.offsetName}`]:this.state.thumbOffset+"px"},t=this.inputFilter.handleEvent,n=window.PointerEvent,i=n?t:void 0,s=n?void 0:t,r=n?void 0:t;return(0,l.jsx)("div",{children:this.state.visible&&!this.props.forceHidden&&(0,l.jsx)("div",Object.assign({className:"scrollbarTrack "+this.props.direction,onClick:this.handleTrackClick,ref:e=>{this.thumbTrack=e}},{children:(0,l.jsx)("div",{className:"scrollbarThumb",style:e,onPointerDown:i,onMouseDown:r,onTouchStart:s})}))})}}var ys=n(98878),Ss=n(65270),Es=n(87982),Ts=n(61445);class SingleScrollbar extends r.Component{constructor(e){super(e),this.outerWrapperRef=(0,r.createRef)(),this.innerWrapperRef=(0,r.createRef)(),this.contentContainerRef=(0,r.createRef)(),this.dragStartScroll=0,this.listening=!1,this.animation=null,this.handlingPaused=!1,this.isDragging=!1,this.isUnmounting=!1,this.handleEvent=e=>{"mousedown"!==e.type&&"pointerdown"!==e.type&&"touchstart"!==e.type||(this.handlingPaused=!1),this.props.suppressDrag||this.handlingPaused||this.inputFilter.handleEvent(e)},this.getScrolledOffset=()=>{if(!this.innerWrapperRef.current||0===this.state.contentSize)return 0;const e=this.props.direction===us.vertical?"scrollTop":"scrollLeft";return this.innerWrapperRef.current[e]/this.state.contentSize},this.getScrollableContainer=()=>this.innerWrapperRef.current||void 0,this.pauseScrollHandling=()=>{this.handlingPaused=!0,this.toggleDownEventListening(!1)},this.scrollWithScrollBar=e=>{if(!this.props.suppressDrag){const t=this.getAxis();e.hasOwnProperty(t)&&this.scrollTo(e[t])}},this.scrollTo=e=>{void 0===e||isNaN(e)||(this.setScrollPosition(Math.max(Math.min(1,e)*this.state.contentSize,0)),this.setState({scrollOffset:this.getScrollPosition()}))},this.handleDragStart=()=>{this.setState({scrollCenter:null}),this.isDragging=!0},this.handlePressStart=()=>{this.dragStartScroll=this.getScrollPosition()},this.handlePressMove=e=>{if(!this.props.suppressDrag){const t=(e[this.getAxis()]+this.dragStartScroll)/this.state.contentSize;this.scrollTo(t)}},this.handleWheelEvent=e=>{if(this.props.suppressDrag)return void e.preventDefault();this.props.direction===us.horizontal&&0===e.deltaX&&0!==e.deltaY?(this.handlePressStart(),this.handlePressMove({x:e.deltaY,y:0})):(this.setState({scrollCenter:null}),this.handleExternalChange())},this.handleClick=e=>{this.props.handleClick&&this.props.handleClick(e)},this.handleDragEnd=(e,t)=>{this.isDragging=!1;const n=e[this.getAxis()]/t,i=Math.min(ds,Math.abs(ds*n)),s=this.getScrollPosition(),r=n*i/2;this.animation=new ys.Z({duration:i,startValue:s/this.state.contentSize,endValue:Math.max(0,Math.min((s+r)/this.state.contentSize,1)),easingFunction:Ss.hl})},this.debouncedSetState=e=>{new URL(`${document.location}`).searchParams.get("temp-disable-debounce-scroll")?this.setState(e):(cancelAnimationFrame(this.rAFHandle),this.rAFHandle=requestAnimationFrame((()=>{this.isUnmounting||this.setState(e)})))},this.onManualScroll=()=>{this.props.onScrolled&&this.props.onScrolled()},this.onButtonScroll=e=>{if(this.contentContainerRef.current&&this.props.steps){const t=this.props.direction===us.vertical?"offsetHeight":"offsetWidth",n=this.contentContainerRef.current[t]/this.props.steps,i=this.getScrollPosition();let s;s=e?(i+n)/this.state.contentSize:(i-n)/this.state.contentSize,this.scrollTo((0,ls.uZ)(s,0,1))}},this.onScrollBack=()=>{this.onButtonScroll(!1)},this.onScrollForward=()=>{this.onButtonScroll(!0)},this.onHoldScrollBack=()=>{this.mouseInterval=window.setInterval(this.onScrollBack,300)},this.onHoldScrollForward=()=>{this.mouseInterval=window.setInterval(this.onScrollForward,300)},this.onScrollButtonUp=()=>{window.clearInterval(this.mouseInterval)},this.renderScrollBackButton=()=>{const e=this.getScrollPosition(),t=this.props.direction===us.vertical?"icon-dpad-up":"icon-dpad-left",n=0===e?Ts.BN.DISABLED:Ts.BN.ENABLED;return(0,l.jsx)(Es.hU,{className:d()("scroll-button","scroll-back"),iconClass:t,buttonStyle:Es.Dd.CLEAR,buttonState:n,onClick:this.onScrollBack,onMouseDown:this.onHoldScrollBack,onMouseUp:this.onScrollButtonUp})},this.renderScrollForwardButton=()=>{const e=this.contentContainerRef.current,t=this.innerWrapperRef.current;if(!e||!t)return null;const n=this.getScrollPosition(),i=this.props.direction===us.vertical?"offsetHeight":"offsetWidth",s=this.props.direction===us.vertical?"icon-dpad-down":"icon-dpad-right",r=e[i]-t[i]-n>0?Ts.BN.ENABLED:Ts.BN.DISABLED;return(0,l.jsx)(Es.hU,{className:d()("scroll-button","scroll-forward"),iconClass:s,buttonStyle:Es.Dd.CLEAR,buttonState:r,onClick:this.onScrollForward,onMouseDown:this.onHoldScrollForward,onMouseUp:this.onScrollButtonUp})},this.state={scrollCenter:null,scrollOffset:0,innerSize:0,contentSize:0},this.resizeSubscription=(0,as.kp)(as.g_.RESIZE,(()=>this.handleExternalChange(as.g_.RESIZE))),this.inputFilter=new InputFilter({handlePressStart:this.handlePressStart,handlePressMove:this.handlePressMove,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,handleClick:this.handleClick})}componentDidMount(){this.resizeSubscription.renew(),this.props.thumbScrollingOnly?this.innerWrapperRef.current&&this.innerWrapperRef.current.addEventListener("click",this.handleClick):this.toggleDownEventListening(!0),this.toggleDragHandling(!0),this.innerWrapperRef.current&&this.innerWrapperRef.current.addEventListener("wheel",this.handleWheelEvent),this.inputFilter.setEnabled(!this.props.suppressDrag),this.handleExternalChange(void 0,!0)}componentWillUnmount(){this.isUnmounting=!0,this.resizeSubscription.cancel(),this.innerWrapperRef.current&&this.innerWrapperRef.current.removeEventListener("wheel",this.handleWheelEvent),this.toggleDragHandling(!1),this.props.thumbScrollingOnly?this.innerWrapperRef.current&&this.innerWrapperRef.current.removeEventListener("click",this.handleClick):this.toggleDownEventListening(!1)}UNSAFE_componentWillReceiveProps(e){e.thumbScrollingOnly&&!this.props.thumbScrollingOnly?(this.innerWrapperRef.current&&this.innerWrapperRef.current.addEventListener("click",this.handleClick),this.toggleDownEventListening(!1)):!e.thumbScrollingOnly&&this.props.thumbScrollingOnly&&(this.toggleDownEventListening(!0),this.innerWrapperRef.current&&this.innerWrapperRef.current.removeEventListener("click",this.handleClick)),e.suppressDrag!==this.props.suppressDrag&&this.inputFilter.setEnabled(!e.suppressDrag)}componentDidUpdate(e,t){this.props.waitToUpdate||this.handleExternalChange();const n=this.animation;if(n)if(n.isAnimating){const e=n.getUpdatedValue();window.requestAnimationFrame((()=>{this.innerWrapperRef.current&&this.scrollTo(e)}))}else this.animation=null;t.scrollOffset!==this.state.scrollOffset&&this.props.onScrolled&&this.props.onScrolled()}toggleDownEventListening(e){const t=this.handleEvent;this.innerWrapperRef.current&&(e?window.PointerEvent?this.innerWrapperRef.current.addEventListener("pointerdown",t):(this.innerWrapperRef.current.addEventListener("mousedown",t),this.innerWrapperRef.current.addEventListener("touchstart",t)):window.PointerEvent?this.innerWrapperRef.current.removeEventListener("pointerdown",t):(this.innerWrapperRef.current.removeEventListener("mousedown",t),this.innerWrapperRef.current.removeEventListener("touchstart",t)))}toggleDragHandling(e){const t=this.handleEvent;!this.listening&&e?(this.listening=!0,window.PointerEvent?(window.addEventListener("pointermove",t),window.addEventListener("pointerup",t)):(window.addEventListener("mousemove",t),window.addEventListener("mouseleave",t),window.addEventListener("mouseup",t),window.addEventListener("touchmove",t),window.addEventListener("touchend",t),window.addEventListener("touchcancel",t))):this.listening&&!e&&(this.listening=!1,window.PointerEvent?(window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",t)):(window.removeEventListener("mousemove",t),window.removeEventListener("mouseleave",t),window.removeEventListener("mouseup",t),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",t),window.removeEventListener("touchcancel",t)))}getScrollPosition(){if(!this.innerWrapperRef.current)return 0;const e=this.props.direction===us.vertical?"scrollTop":"scrollLeft";return this.innerWrapperRef.current[e]}setScrollPosition(e){if(!this.innerWrapperRef.current)return;const t=this.props.direction===us.vertical?"scrollTop":"scrollLeft";this.innerWrapperRef.current[t]=e}getAxis(){return this.props.direction===us.vertical?"y":"x"}scrollToPercentage(e,t){this.animation=new ys.Z({duration:t,startValue:this.getScrolledOffset(),endValue:Math.max(0,Math.min(1,e))})}scrollToElement(e){const t=this.innerWrapperRef.current,n=this.outerWrapperRef.current;if(!e||!t||!n)return;if(!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS))return;const i=this.props.direction===us.vertical;this.setState({scrollCenter:e});const s=i?"offsetTop":"offsetLeft",r=i?"offsetHeight":"offsetWidth";let o=e[s]+e[r]/2,a=e;for(;a.parentElement&&a!==t;)a=a.parentElement,o+=a[s];const l=(o-n.parentElement[r]/2)/this.state.contentSize;this.animation=new ys.Z({duration:ds,startValue:this.getScrollPosition()/this.state.contentSize,endValue:Math.max(0,Math.min(1,l))})}handleExternalChange(e,t){if(this.isUnmounting||!this.innerWrapperRef.current||!this.contentContainerRef.current)return;this.state.scrollCenter&&e&&e===as.g_.RESIZE&&this.scrollToElement(this.state.scrollCenter);const n=this.props.direction===us.vertical?"clientHeight":"clientWidth",i={innerSize:Number(this.innerWrapperRef.current&&this.innerWrapperRef.current[n])||1,contentSize:Number(this.contentContainerRef.current&&this.contentContainerRef.current[n])||1,scrollOffset:this.innerWrapperRef.current&&this.getScrollPosition()};cs(this.state,i)&&(t?this.setState(i):this.debouncedSetState(i))}needScrolling(){if(!this.contentContainerRef.current||!this.outerWrapperRef.current)return!1;const e=this.props.direction===us.vertical?"offsetHeight":"offsetWidth";return this.contentContainerRef.current[e]>this.outerWrapperRef.current[e]}render(){const{hideScrollbar:e,children:t,onScrollableChanged:n,scrollButtons:i,steps:s,onScrollPositionChange:r,direction:o,className:a}=this.props,{innerSize:c,contentSize:u,scrollOffset:h}=this.state,p=i&&!!s&&this.needScrolling();return(0,l.jsxs)("div",Object.assign({className:d()("outerScrollbarWrapper",[o],[a],{"button-scrolling":p}),ref:this.outerWrapperRef},{children:[p&&this.renderScrollBackButton(),(0,l.jsx)("div",Object.assign({className:"innerScrollbarWrapper",ref:this.innerWrapperRef},{children:(0,l.jsx)("div",Object.assign({className:"paddingScrollbarWrapper",ref:this.contentContainerRef},{children:t}))})),(0,l.jsx)(Scrollbar,{direction:o,wrapperLength:c,childLength:u,scrollOffset:h,scrollTo:this.scrollWithScrollBar,forceHidden:!!e,onVisibilityChange:n,onScrollPositionChange:r,onThumbDrag:this.onManualScroll}),p&&this.renderScrollForwardButton()]}))}}class ReelScrollContainer extends r.Component{constructor(e){super(e),this.scrollbarRef=(0,r.createRef)(),this.elementRef=(0,r.createRef)(),this.onWindowResize=()=>{const e=os(window);this.state.hideScrollbar!==e&&this.setState({hideScrollbar:e})},this.onScrollableChanged=e=>{this.setState({scrollable:e})},this.onScrollPositionChange=e=>{this.setState({scrollPosition:e})},this.getScrollableContainer=()=>{const e=this.scrollbarRef.current;return(null==e?void 0:e.getScrollableContainer())||void 0},this.handleHighlightClickable=()=>{this.props.highlightClickable(!0)},this.state={scrollLeft:0,hideScrollbar:os(window),scrollPosition:fs.None,scrollable:!1},this.resizeSubscription=(0,as.kp)(as.g_.RESIZE,this.onWindowResize)}componentDidMount(){this.resizeSubscription.renew(),this.onScrollableChanged(!0),this.onScrollPositionChange(fs.Beginning)}componentWillUnmount(){this.resizeSubscription.cancel()}componentDidUpdate(e){const{activeElement:t}=this.props;if(null!==t&&e.activeElement!==t){const e=this.scrollbarRef.current;e&&e.scrollToElement(t)}}setSorting(e){const t=this.elementRef.current;if(t)if(e){if(t.classList.add("sorting"),this.props.mobile){const e=this.scrollbarRef.current;e&&e.pauseScrollHandling()}}else t.classList.remove("sorting")}render(){const{thumbScrollingOnly:e,children:t,totalSteps:n}=this.props,{hideScrollbar:i,scrollPosition:s,scrollable:r}=this.state,o=d()({scrollable:r,[s]:!0});return(0,l.jsx)("div",Object.assign({id:"reel",className:o,ref:this.elementRef},{children:(0,l.jsx)(SingleScrollbar,Object.assign({direction:us.horizontal,ref:this.scrollbarRef,hideScrollbar:i,thumbScrollingOnly:e,waitToUpdate:0===n,handleClick:this.handleHighlightClickable,onScrollableChanged:this.onScrollableChanged,onScrollPositionChange:this.onScrollPositionChange},{children:t}))}))}}var Os=n(14832);function _s(e){const{snapshot:t}=e,[n]=function(e){var t;const[n,i]=(0,r.useState)(e.getCurrentValue()),[s,o]=(0,r.useState)(null===(t=e.validUntil)||void 0===t?void 0:t.getTime()),a=!!s&&s-Date.now()<=0;return(0,r.useEffect)((()=>{if(void 0===s)return()=>{};let t=!1;const n=s-Date.now(),r=()=>{e.get().then((n=>{var s;t||(i(n),o(null===(s=e.validUntil)||void 0===s?void 0:s.getTime()))}))};if(n<=0)return r(),()=>t=!0;const a=window.setTimeout(r,n);return()=>{t=!0,window.clearTimeout(a)}}),[e,s]),(0,r.useEffect)((()=>{i(e.getCurrentValue())}),[e]),[n,a]}(t.thumbnailUrl),i=n?{backgroundImage:`url('${n}')`}:{};return(0,l.jsx)("div",{className:"highlight-image",style:i})}const{HLR:As}=g.Z.WORKSHOP;class Highlight extends r.Component{constructor(){super(...arguments),this.editHighlight=e=>{e.stopPropagation(),this.props.onClickHighlight(this.props.index,!0)},this.removeHighlight=e=>{e.stopPropagation(),this.props.onRemoveHighlight&&this.props.onRemoveHighlight(this.props.highlight.snapshot.sid)},this.onClickHighlight=e=>{e.preventDefault(),this.props.onClickHighlight(this.props.index,!1)},this.setContainerRef=e=>{const{index:t,getRef:n}=this.props;this.element=e,n&&n(t,this.element)}}renderTransitionSettings(){const{locale:e}=this.context,{transitionType:t,panDirection:n,transitionCondition:i,index:s}=this.props,r=n!==Wn.kw.Auto;let o="pan-auto",a=e.t(As.PAN_DIRECTION_SETTING_AUTO);n===Wn.kw.Left?(o="icon icon-rotate-left",a=e.t(As.PAN_DIRECTION_SETTING_LEFT)):n===Wn.kw.Right&&(o="icon icon-rotate-right",a=e.t(As.PAN_DIRECTION_SETTING_RIGHT));let c="";return t===Os.n.FadeToBlack?c=e.t(As.TRANSITION_SETTING_SLIDESHOW):t===Os.n.Interpolate&&(c=e.t(As.TRANSITION_SETTING_WALKTHROUGH)),(0,l.jsxs)("div",Object.assign({className:"transition-settings"},{children:[(0,l.jsxs)("span",Object.assign({className:"transition-type"},{children:[s+1," - ",c,i&&(0,l.jsx)("span",{children:"*"})]})),(0,l.jsx)("span",Object.assign({className:"pan-direction-type"},{children:a})),r&&(0,l.jsx)("span",{className:`pan-icon ${o}`})]}))}renderImageBar(){var e;const{locale:t}=this.context,{highlight:n,editable:i}=this.props,s=n.snapshot.is360,r=n.snapshot.metadata.cameraMode,o=null!==(e=this.getMarker(r,s))&&void 0!==e?e:"",a=t.t(As.REMOVE_HIGHLIGHT_TOOLTIP_MESSAGE),c=t.t(As.EDIT_HIGHLIGHT_TOOLTIP_MESSAGE);return(0,l.jsxs)("div",Object.assign({className:"image-bar"},{children:[(0,l.jsx)("span",{className:d()("highlight-marker",{[o]:!i})}),i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(nt,{className:"highlight-remove",onClick:this.removeHighlight,tooltip:a,ariaLabel:a,icon:"delete",theme:"overlay",variant:et.FAB}),(0,l.jsx)(nt,{className:"highlight-edit",onClick:this.editHighlight,tooltip:c,ariaLabel:c,icon:"toggle-pencil",theme:"overlay",variant:et.FAB})]})]}))}getMarker(e,t){return e===ji.Ey.Dollhouse||e===ji.Ey.Floorplan?null:t?"icon-360":"icon-panorama"}render(){const{highlight:e,active:t,editable:n}=this.props,{name:i}=e.snapshot,s=!!i||n;return(0,l.jsxs)("div",Object.assign({className:d()("highlight-box",{active:t,editable:n}),onClick:this.onClickHighlight,ref:this.setContainerRef},{children:[(0,l.jsx)(_s,{snapshot:e.snapshot}),this.renderImageBar(),n&&this.renderTransitionSettings(),(0,l.jsx)("div",Object.assign({className:d()("image-name",{shadowed:s})},{children:(0,l.jsx)("span",Object.assign({className:"static-text",role:"listitem","aria-label":i||"highlight"},{children:i}))}))]}))}}Highlight.contextType=m.I;class ReelContents extends r.Component{constructor(e){super(e),this.highlights=[],this.highlightList=e=>{const{currentStep:t,onHighlightClicked:n}=this.props;return(0,l.jsx)("div",Object.assign({className:"hlr-container"},{children:(0,l.jsx)("div",Object.assign({className:"highlights",role:"list"},{children:e.items.map(((e,i)=>(0,l.jsx)(Highlight,{highlight:e,index:i,active:i===t,editable:!1,onClickHighlight:n,getRef:this.addHighlightRef},`${e.id}_${i}`)))}))}))},this.addHighlightRef=(e,t)=>{this.highlights[e]=t,e===this.props.currentStep&&this.props.setActiveElement&&this.props.setActiveElement(t)}}componentDidUpdate(e){e.currentStep!==this.props.currentStep&&this.props.setActiveElement(this.highlights[this.props.currentStep])}render(){const{highlights:e}=this.props;return e&&e.length?(0,l.jsx)(this.highlightList,{items:e}):null}}var ws=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const Ns=new O.Z("highlight-reel");let Ps=class ReelReadOnly extends r.Component{constructor(e){super(e),this.bindings=[],this.mobile=(0,ts.tq)(),this.setActiveElement=e=>{this.setState({activeElement:e})},this.setHighlightClickable=(e=>this.highlightClickable=e).bind(this),this.onHighlightClicked=async e=>{const{commandBinder:t,analytics:n}=this.context;if(this.highlightClickable)try{this.props.tourPlaying&&await t.issueCommand(new T.vy),this.props.transition.active||(n.trackToolGuiEvent("hlr","click_highlight"),await t.issueCommand(new T.rU(e)).catch((e=>{if(!(e instanceof rs.z))throw e;Ns.warn(e.message)})),this.setHighlightClickable(!1))}catch(e){Ns.debug(e)}},this.state={activeElement:null}}componentWillUnmount(){this.bindings.forEach((e=>{e.cancel()}))}render(){const{activeStep:e,highlights:t,totalSteps:n}=this.props;return(0,l.jsx)("div",Object.assign({id:"reel-container"},{children:(0,l.jsx)(ReelScrollContainer,Object.assign({totalSteps:n,activeElement:this.state.activeElement,mobile:this.mobile,highlightClickable:this.setHighlightClickable,thumbScrollingOnly:!1},{children:(0,l.jsx)(ReelContents,{highlights:t,currentStep:e,onHighlightClicked:this.onHighlightClicked,setActiveElement:this.setActiveElement})}))}))}};Ps.contextType=m.I,Ps=ws([_n.Z],Ps);const{HLR:Is}=g.Z.SHOWCASE;class EmptyReel extends r.Component{render(){const{locale:e}=this.context,t=e.t(Is.EMPTY_REEL_LEARN_MORE),n=e.t(Is.EMPTY_REEL_TITLE),i=e.t(Is.EMPTY_REEL_MESSAGE);return(0,l.jsx)("div",Object.assign({className:"empty-reel"},{children:(0,l.jsxs)("div",Object.assign({className:"no-highlights-message"},{children:[(0,l.jsx)("p",{children:n}),(0,l.jsxs)("p",{children:[i,(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",href:"https://support.matterport.com/hc/en-us/articles/360019401733"},{children:t}))]})]}))}))}}function ks(){const e=Jn(),t=ai(),n=t===ri.Paused,i=t===ri.Idle,s=(0,r.useRef)(null),o=(0,r.useRef)(0);if(i)return o.current=0,o.current;if(!n)return o.current;if(e===s.current)return o.current;if(!Wn.c5.includes(e.type))return o.current;const{started:a,stopped:l,duration:c}=e,d=(l-a)/c,u=o.current+d*(1-o.current);return s.current=e,o.current=u,u}function Cs({index:e}){const t=si(),n=ks(),i=ai(),s=qn(),o=ei(),a=function(){var e,t;const n=Jn(),i=(0,r.useRef)(null);return Wn.c5.includes(n.type)?n.toIndex===(null===(t=i.current)||void 0===t?void 0:t.toIndex)?i.current.duration:(i.current=n,n.duration):(null===(e=i.current)||void 0===e?void 0:e.duration)||0}(),c=o.duration,u=o.toIndex,h=u===e,p=s===e,m=["story-tour-progress-bar"];if(i===ri.Skipping)e>=u?m.push("story-tour-progress-bar--incomplete"):m.push("story-tour-progress-bar--complete");else if(p)switch(i){case ri.Completed:m.push("story-tour-progress-bar--complete");break;case ri.Playing:m.push("story-tour-progress-bar--playing");break;case ri.Paused:m.push("story-tour-progress-bar--paused");break;case ri.Rewinding:m.push("story-tour-progress-bar--rewinding");break;case ri.FastForwarding:m.push("story-tour-progress-bar--fast-forwarding");break;case ri.Idle:m.push("story-tour-progress-bar--incomplete")}else s===t-1&&0===u?m.push("story-tour-progress-bar--complete"):h&&i===ri.Rewinding?m.push("story-tour-progress-bar--full-rewinding"):e<s?m.push("story-tour-progress-bar--complete"):e>s&&m.push("story-tour-progress-bar--incomplete");const g={};if(p&&(i===ri.Playing||i===ri.Paused?g.animationDuration=`${a}ms`:i===ri.FastForwarding&&(g.animationDuration=`${c}ms`)),i===ri.Rewinding){const e=n/(n+1);p&&h?g.animationDuration=`${c}ms`:p?g.animationDuration=e*c+"ms":h&&(g.animationDuration=(1-e)*c+"ms",g.animationDelay=e*c+"ms")}return(0,l.jsx)("div",{className:d()(...m),style:g})}function Ls(){const e=ks();return(0,r.useEffect)((()=>{document.documentElement.style.setProperty("--currentTourScenePosition",100*e+"%")}),[e]),null}function Ms(e){const{snapshot:t,numberOfHighlights:n,currentIndex:i,xOffset:s}=e,{name:r}=t,o=i===n-1,a={};0===i?(a.left="15px",a.transform="none"):o?(a.right="10px",a.transform="none"):a.left=`${s}px`;const c=d()("highlight-box","active"),u=d()("image-name",{shadowed:!!r});return(0,l.jsxs)("div",Object.assign({style:a,className:c},{children:[(0,l.jsx)(_s,{snapshot:t}),(0,l.jsx)("div",Object.assign({className:u},{children:(0,l.jsx)("span",Object.assign({className:"static-text"},{children:r}))}))]}))}EmptyReel.contextType=m.I;class SimpleReel extends r.Component{constructor(e){super(e),this.scrollbarRef=(0,r.createRef)(),this.onClickSceneBar=async e=>{e.preventDefault();const t=e.target.getAttribute("data-index");if(t){const e=parseInt(t,10),{tourPlaying:n,transition:i}=this.props,{commandBinder:s,analytics:r}=this.context;try{n&&await s.issueCommand(new T.vy({willResume:!0})),i.active||(r.track("showcase_gui",{gui_action:"click_scene_bar"}),await s.issueCommand(new T.rU(e)),n&&await s.issueCommand(new T.TH({index:e})))}catch(e){}}},this.onEnterSceneBar=e=>{const t=e.target.getAttribute("data-index");if(t){const n=parseInt(t,10);this.setState({focusedIndex:n,xOffset:e.clientX})}},this.onLeaveSceneBar=e=>{const t=e.target.getAttribute("data-index");if(t){parseInt(t,10)===this.state.focusedIndex&&this.setState({focusedIndex:-1})}},this.onScrollableChanged=e=>{this.setState({scrollable:e})},this.onScrollPositionChange=e=>{this.setState({scrollPosition:e})},this.state={focusedIndex:-1,xOffset:0,scrollLeft:0,scrollPosition:fs.None,scrollable:!1}}componentDidUpdate(){const{activeStep:e,tourPlaying:t}=this.props,n=this.scrollbarRef.current;if(n&&!n.isDragging&&t){const t=document.getElementById(`highlightbar_${e}`);t&&n.scrollToElement(t)}}renderSceneBar(e,t){const{focusedIndex:n}=this.state,i=d()("highlight-bar",{"highlight-bar-hover":t<=n});return(0,l.jsx)("div",Object.assign({id:`highlightbar_${t}`,className:"highlight-compacted","data-index":t,onClick:this.onClickSceneBar,onMouseEnter:this.onEnterSceneBar,onMouseLeave:this.onLeaveSceneBar,onMouseMove:this.onEnterSceneBar},{children:(0,l.jsx)("div",Object.assign({className:i},{children:(0,l.jsx)(Cs,{index:t})}))}),`${e.id}_bar_${t}`)}renderHighlightBox(){const{focusedIndex:e,xOffset:t}=this.state;if(-1===e)return null;const{highlights:n}=this.props,i=n[e];return(0,l.jsx)(Ms,{snapshot:i.snapshot,numberOfHighlights:n.length,currentIndex:e,xOffset:t})}render(){const{highlights:e,tourPlaying:t}=this.props;return(0,l.jsxs)("div",Object.assign({className:d()("tour-story-reel",{"tour-playing":t})},{children:[(0,l.jsx)(Ls,{}),(0,l.jsx)(SingleScrollbar,Object.assign({direction:us.horizontal,ref:this.scrollbarRef,hideScrollbar:!0,thumbScrollingOnly:!1,waitToUpdate:0===e.length,handleClick:this.onClickSceneBar,onScrollableChanged:this.onScrollableChanged,onScrollPositionChange:this.onScrollPositionChange},{children:(0,l.jsx)("div",Object.assign({className:"highlights"},{children:e.map(((e,t)=>this.renderSceneBar(e,t)))}))})),this.renderHighlightBox()]}))}}SimpleReel.contextType=m.I;var Ds=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Rs=class TourProgress extends r.Component{constructor(){super(...arguments),this.handleClick=()=>{this.context.analytics.trackToolGuiEvent("hlr","tour_progress");const{reelOpen:e}=this.props;e||this.context.commandBinder.issueCommand(new Oi.Av(!0))}}getTourSteps(){const{totalSteps:e,activeStep:t}=this.props,n=[];for(let i=0;i<e;i++)n.push((0,l.jsx)("div",{className:d()({active:i===t})},i.toString()));return n}render(){const{reelOpen:e,tourPlaying:t,activeStep:n,totalSteps:i}=this.props,s=n+1+"/"+i,r=-1!==n&&!e&&s,o=-1!==n&&e&&t;return i>0?(0,l.jsxs)("div",Object.assign({id:"tour-progress",className:d()({"faded-in":t,"full-width":e}),onClick:this.handleClick,"data-balloon":r,"data-balloon-pos":"right","data-balloon-size":"xs"},{children:[o&&(0,l.jsx)("div",Object.assign({className:"progress-number"},{children:s})),-1!==n&&(0,l.jsx)("div",Object.assign({className:"progress-bar"},{children:this.getTourSteps()}))]})):null}};function xs(e){const{activeStep:t,highlights:n,openTool:i,tourMode:s,tourPlaying:r,transition:o}=e,a=Ai(),c=i===p.w1.HLR;if(s===Vn.zz.STORIES)return c&&!r?null:(0,l.jsx)(SimpleReel,{highlights:n,tourPlaying:r,activeStep:t,transition:o});{const e=a&&(!c||r),i=(null==n?void 0:n.length)||0,s=0===i;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(mi,Object.assign({className:d()("highlight-reel",{"reel-empty":s,closed:!e}),open:e},{children:s?(0,l.jsx)(EmptyReel,{}):(0,l.jsx)(Ps,{highlights:n,tourPlaying:r,activeStep:t,totalSteps:i,transition:o})})),r&&(0,l.jsx)(Rs,{activeStep:t,tourPlaying:r,totalSteps:i,reelOpen:a})]})}}Rs.contextType=m.I,Rs=Ds([_n.Z],Rs);const js=new O.Z("pause-button");class PauseButton extends r.Component{constructor(e){super(e),this.justEnded=!1,this.stopTour=async e=>{this.context.analytics.trackGuiEvent("tour_stopped");try{this.context.commandBinder.issueCommand(new T.vy)}catch(e){js.debug(e)}},this.state={justPaused:!1}}componentDidUpdate(){this.state.justPaused&&this.setState({justPaused:!1}),this.justEnded=!1}UNSAFE_componentWillReceiveProps(e){!this.props.tourPlaying||e.tourPlaying||this.justEnded||this.setState({justPaused:!0}),this.props.tourEnded&&(this.justEnded=!0)}render(){const{tourPlaying:e}=this.props,{justPaused:t}=this.state;return(0,l.jsx)("div",Object.assign({id:"pause-button",onClick:this.stopTour,onTouchMove:this.stopTour,onTouchStart:this.stopTour,"data-cy":"pause-button"},{children:!e&&(0,l.jsx)("img",{src:n(31896),className:d()({justPaused:t}),alt:"","aria-hidden":"true"})}))}}PauseButton.contextType=m.I;var Us,Hs=n(83233),Fs=n(73156),Bs=n(56829),Vs=n(51073),Gs=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Ws=Us=class NotesModeButton extends r.Component{constructor(e,t){super(e),this.nudgeTimeout=0,this.bindings=[],this.onModalToggled=e=>{e.modal!==di.P.NOTES_INTRO||e.open||this.toggleNotesMode(!0)},this.dismissNudge=()=>{this.state.showNudge&&(this.context.analytics.trackGuiEvent("notes_nudge_dismissed"),this.context.settings.setLocalStorageProperty(Hn.F.NotesModeNudgeSeen,!0),this.setState({showNudge:!1}))},this.modeButtonClicked=()=>{const e=this.props.openTool!==p.w1.NOTES;if(e){const{commandBinder:e,settings:t}=this.context;this.context.analytics.trackGuiEvent("notes_mode_click_open");if(!t.tryGetProperty(Hn.F.NotesIntroModalSeen,!1))return void e.issueCommand(new ui.Bz(di.P.NOTES_INTRO,!0))}this.toggleNotesMode(e)},this.localized={notesModeString:t.locale.t(g.Z.NOTES_MODE),nudgeTitleString:t.locale.t(g.Z.NOTES_NUDGE_TITLE),nudgeMessageString:t.locale.t(g.Z.NOTES_NUDGE_MESSAGE)},this.state={showNudge:!1}}componentDidMount(){this.updateNudge(),this.bindings.push(this.context.messageBus.subscribe(Bs.nV,this.onModalToggled))}componentWillUnmount(){for(const e of this.bindings)e.cancel()}updateNudge(){const e=this.context.settings.tryGetProperty(Fs.pE,!1),t=this.context.settings.tryGetProperty(Hn.F.NotesModeNudgeSeen,!1);!e||t||this.nudgeTimeout||(this.nudgeTimeout=window.setTimeout((()=>{this.setState({showNudge:!0}),window.setTimeout((()=>{this.dismissNudge()}),Us.DISMISS_NUDGE_TIMEOUT)}),Us.SHOW_NUDGE_TIMEOUT))}toggleNotesMode(e){const{commandBinder:t,messageBus:n}=this.context;e&&n.broadcast(new Vs.Ey),t.issueCommand(new hi.tT(p.w1.NOTES,e))}render(){const{className:e,openTool:t}=this.props,{showNudge:n}=this.state,{nudgeTitleString:i,nudgeMessageString:s}=this.localized,r=this.localized.notesModeString;return(0,l.jsxs)("div",Object.assign({className:d()("notes-mode-button",e)},{children:[(0,l.jsx)(nt,{onClick:this.modeButtonClicked,variant:et.TERTIARY,active:t===p.w1.NOTES,ariaLabel:r,tooltip:r,icon:"comment-outline",theme:"overlay"}),(0,l.jsx)(Nn,{className:d()("tooltip-title-large","nudge-tooltip"),open:n,closeButton:!0,onClose:this.dismissNudge,title:i,message:(0,l.jsx)("div",Object.assign({className:"nudge-message"},{children:(0,l.jsx)("span",Object.assign({className:"message"},{children:s}))})),arrowPos:On.BOTTOM_CENTER})]}))}};Ws.contextType=m.I,Ws.SHOW_NUDGE_TIMEOUT=15e3,Ws.DISMISS_NUDGE_TIMEOUT=1e4,Ws=Us=Gs([_n.Z],Ws);var zs,Ks=n(54068),Ys=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let qs=zs=class MeasurementModeButton extends r.Component{constructor(e,t){super(e),this.modeButtonClicked=()=>{const e=this.props.openTool!==p.w1.MEASUREMENTS;e&&this.context.analytics.trackToolGuiEvent("measurements","measure_mode"),this.context.commandBinder.issueCommand(new hi.tT(p.w1.MEASUREMENTS,e))},this.localized={measurementMode:t.locale.t(g.Z.MEASUREMENT_MODE)}}render(){const{className:e,openTool:t}=this.props,n=this.localized.measurementMode;return(0,l.jsxs)("div",Object.assign({className:d()("measure-mode-button",e)},{children:[(0,l.jsx)(nt,{onClick:this.modeButtonClicked,variant:et.TERTIARY,active:t===p.w1.MEASUREMENTS,ariaLabel:n,tooltip:n,icon:"tape-measure",theme:"overlay"}),(0,l.jsx)(kn,{title:g.Z.MEASUREMENT_NUDGE_TITLE,message:g.Z.MEASUREMENT_NUDGE_MESSAGE,showTimeout:zs.SHOW_NUDGE_TIMEOUT,dismissTimeout:zs.DISMISS_NUDGE_TIMEOUT,appSettingsKey:Ks.b,localStorageSettingsKey:Hn.F.MeasurementUserNudgeSeen,analyticsKeys:{tool:"measurements",guiAction:"measure_nudge"}})]}))}};qs.contextType=m.I,qs.SHOW_NUDGE_TIMEOUT=6e4,qs.DISMISS_NUDGE_TIMEOUT=1e4,qs=zs=Ys([_n.Z],qs);var $s=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var s=i[n];e.call(t,s[1],s[0])}},t}()}(),Zs="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Qs=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Xs="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Qs):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Js=["top","right","bottom","left","width","height","size","weight"],er="undefined"!=typeof MutationObserver,tr=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,s=0;function r(){n&&(n=!1,e()),i&&a()}function o(){Xs(r)}function a(){var e=Date.now();if(n){if(e-s<2)return;i=!0}else n=!0,i=!1,setTimeout(o,t);s=e}return a}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Zs&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),er?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Zs&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Js.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),nr=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var s=i[n];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},ir=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Qs},sr=dr(0,0,0,0);function rr(e){return parseFloat(e)||0}function or(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+rr(e["border-"+n+"-width"])}),0)}function ar(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return sr;var i=ir(e).getComputedStyle(e),s=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var s=i[n],r=e["padding-"+s];t[s]=rr(r)}return t}(i),r=s.left+s.right,o=s.top+s.bottom,a=rr(i.width),l=rr(i.height);if("border-box"===i.boxSizing&&(Math.round(a+r)!==t&&(a-=or(i,"left","right")+r),Math.round(l+o)!==n&&(l-=or(i,"top","bottom")+o)),!function(e){return e===ir(e).document.documentElement}(e)){var c=Math.round(a+r)-t,d=Math.round(l+o)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(d)&&(l-=d)}return dr(s.left,s.top,a,l)}var lr="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof ir(e).SVGGraphicsElement}:function(e){return e instanceof ir(e).SVGElement&&"function"==typeof e.getBBox};function cr(e){return Zs?lr(e)?function(e){var t=e.getBBox();return dr(0,0,t.width,t.height)}(e):ar(e):sr}function dr(e,t,n,i){return{x:e,y:t,width:n,height:i}}var ur=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=dr(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=cr(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),hr=function(e,t){var n,i,s,r,o,a,l,c=(i=(n=t).x,s=n.y,r=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),nr(l,{x:i,y:s,width:r,height:o,top:s,right:i+r,bottom:o+s,left:i}),l);nr(this,{target:e,contentRect:c})},pr=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new $s,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof ir(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ur(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof ir(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new hr(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),mr="undefined"!=typeof WeakMap?new WeakMap:new $s,gr=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=tr.getInstance(),i=new pr(t,n,this);mr.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){gr.prototype[e]=function(){var t;return(t=mr.get(this))[e].apply(t,arguments)}}));const fr=void 0!==Qs.ResizeObserver?Qs.ResizeObserver:gr;var vr=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},br=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};var yr;!function(e){e.UP="up",e.DOWN="down"}(yr||(yr={}));let Sr=class Dropdown extends r.Component{constructor(e){super(e),this.elementRef=(0,r.createRef)(),this.onOutsideClick=e=>{this.toggleDropdown(!1)},this.onToggleClick=e=>{e.stopPropagation(),this.toggleDropdown()},this.onTransitionEnd=e=>{e&&e.target!==e.currentTarget||(window.clearTimeout(this.transitionTimeout),this.setState({transitioning:!1}))},this.toggleDropdown=e=>{const{open:t}=this.state,n=void 0!==e?e:!t;n?window.addEventListener("click",this.onOutsideClick):window.removeEventListener("click",this.onOutsideClick),this.transitionTimeout=window.setTimeout(this.onTransitionEnd,1e3),this.setState({open:n,transitioning:!0})},this.state={open:!1,transitioning:!1}}componentWillUnmount(){window.removeEventListener("click",this.onOutsideClick)}render(){const{open:e,transitioning:t}=this.state,n=this.props,{children:i,className:s,direction:r}=n,o=br(n,["children","className","direction"]),a={up:r===yr.UP,open:e,transitioning:t};return(0,l.jsxs)("div",Object.assign({ref:this.elementRef,className:d()("dropdown",a,s)},o,{children:[(0,l.jsx)("div",Object.assign({className:"dropdown-mask"},{children:(0,l.jsx)("div",Object.assign({className:"dropdown-menu",onTransitionEnd:this.onTransitionEnd},{children:i}))})),(0,l.jsx)("div",Object.assign({className:"dropdown-toggle"},{children:(0,l.jsx)(Es.hU,{iconClass:"icon-toolbar-more-horiz",onClick:this.onToggleClick,className:"dropdown-toggle"})}))]}))}};Sr.defaultProps={direction:yr.DOWN},Sr=vr([_n.Z],Sr);var Er=n(37796),Tr=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Or=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const _r="collapsed";let Ar=class CollapsibleList extends r.Component{constructor(e){super(e),this.contentRef=(0,r.createRef)(),this.collapsedRef=(0,r.createRef)(),this.toggleRef=(0,r.createRef)(),this.onResize=()=>{this.update()},this.update=(0,Er.P)((()=>{var e;const t=null===(e=this.toggleRef.current)||void 0===e?void 0:e.elementRef.current,n=this.contentRef.current,i=this.collapsedRef.current;if(!n||!i||!t)return;const s=n.children,r=i.children;if(!s||s.length!==r.length)return;const{collapsed:o}=this.state,a=n.offsetWidth,l=t.offsetWidth||0;let c=0,d=0;for(let e=0;e<s.length;e++){let t=s[e].offsetWidth||0;d||e!==s.length-1||(t-=l),c+=t,c<=a?(s[e].classList.remove(_r),r[e].classList.add(_r)):(d++,s[e].classList.add(_r),r[e].classList.remove(_r))}!!d!==o&&this.setState({collapsed:!o})}),50),this.state={collapsed:!1},this.observer=new fr(this.onResize)}componentDidMount(){this.connectObserver(),this.update()}componentDidUpdate(){this.update()}componentWillUnmount(){this.disconnectObserver(),this.reset()}connectObserver(){const e=this.contentRef.current;e&&this.observer.observe(e)}disconnectObserver(){this.observer&&this.observer.disconnect()}reset(){const e=this.contentRef.current;if(!e)return;const t=e.querySelectorAll(".collapsed");Array.from(t).forEach((e=>e.classList.remove(_r)))}render(){const e=this.props,{children:t,className:n}=e,i=Or(e,["children","className"]),{collapsed:s}=this.state,r=`collapsible-list ${n}`,o={hidden:!s};return t&&Array.isArray(t)?(0,l.jsxs)("div",Object.assign({className:d()(r)},i,{children:[(0,l.jsx)("div",Object.assign({ref:this.contentRef,className:"collapsible-list-items"},{children:t})),(0,l.jsx)(Sr,Object.assign({ref:this.toggleRef,direction:yr.UP,className:d()(o)},{children:(0,l.jsx)("div",Object.assign({ref:this.collapsedRef,className:"collapsible-list-menu"},{children:t}))}))]})):t}};Ar.defaultProps={},Ar=Tr([_n.Z],Ar);var wr=n(7765);function Nr(){const e=I(),[t,n]=(0,r.useState)((null==e?void 0:e.activeToolName)||null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onToolChanged(n);return()=>t.cancel()}),[e]),t}P("activeTool",Nr);function Pr(){const e=I(),[t,n]=(0,r.useState)((null==e?void 0:e.openModal)||null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onOpenModalChanged(n);return()=>t.cancel()}),[e]),t}const Ir=P("openModal",Pr),kr=zn(_i.T,"currentTourMode",Vn.zz.NONE);var Cr=n(17116),Lr=n(16534),Mr=n(97966);const Dr=w(Mr.T);var Rr=n(89992);const xr=()=>{const e=_(),t=!vi(Lr.sX,!1),n=(()=>{const e=Dr(),t=vi(Lr.r4,"");return t&&(null==e?void 0:e.hasDiscoverUrl())?`${t}${e.model.sid}`:null})(),i=e.t(g.Z.ALT_MATTERPORT_LOGO),s=(0,l.jsx)("img",{className:"footer-logo",alt:i,src:Rr});return t?(0,l.jsx)("a",Object.assign({className:"link logo-link",href:n||"https://matterport.com",target:"_blank"},{children:s})):s};var jr=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const Ur="gui";let Hr=class Footer extends r.Component{constructor(e){super(e),this.handleTermsClick=()=>{const e=this.props.openModal===di.P.TERMS;this.context.commandBinder.issueCommand(new ui.Bz(di.P.TERMS,!e)),this.context.analytics.trackGuiEvent("click_terms_button",{interactionSource:Ur})},this.handleHelpClick=()=>{const e=this.props.openModal===di.P.HELP;this.context.commandBinder.issueCommand(new ui.Bz(di.P.HELP,!e)),this.context.analytics.trackGuiEvent("click_help_button",{interactionSource:Ur})},this.handleFeedbackClick=()=>{const{analytics:e,commandBinder:t}=this.context;t.issueCommand(new Cr.m),e.trackGuiEvent("click_feedback_button",{interactionSource:Ur})}}render(){const{isWorkshop:e=!1,modelRatingEnabled:t}=this.props;return e&&!t?null:(0,l.jsxs)("div",Object.assign({id:"footer"},{children:[t&&(0,l.jsx)("span",Object.assign({onClick:this.handleFeedbackClick,className:"link model-feedback-link",role:"link"},{children:this.context.locale.t(g.Z.FEEDBACK)})),!e&&t&&(0,l.jsx)("span",{children:" | "}),!e&&(0,l.jsx)("span",Object.assign({onClick:this.handleHelpClick,className:"link",role:"link"},{children:this.context.locale.t(g.Z.HELP)})),!e&&(0,l.jsx)("span",{children:" | "}),!e&&(0,l.jsx)("span",Object.assign({onClick:this.handleTermsClick,className:"link",role:"link"},{children:this.context.locale.t(g.Z.TERMS)})),!e&&(0,l.jsx)(xr,{})]}))}};Hr.contextType=m.I,Hr=jr([_n.Z],Hr);const Fr=Hr;function Br(){const e=Nr(),t=Pr(),n=vi(wr.i,!1),i=Ai(),s=kr(),r=i&&!e&&s===Vn.zz.LEGACY,o=!e;return(0,l.jsx)("div",Object.assign({className:d()("footer-ui",{"footer-ui-shaded":r})},{children:o&&(0,l.jsx)(Fr,{openModal:t,modelRatingEnabled:n})}))}var Vr,Gr=n(31055),Wr=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.FILTER=1]="FILTER"}(Vr||(Vr={}));let zr=class Checkbox extends r.Component{constructor(e){super(e),this.onChange=e=>{this.props.stopPropagation&&e.stopPropagation(),this.setState((e=>({checkedValue:!e.checkedValue})),(()=>{this.props.onChange&&this.props.onChange(this.checkboxElement,...this.props.onChangeArgs||[])}))},this.setCheckboxRef=e=>{this.checkboxElement=e},this.state={checkedValue:e.checked}}UNSAFE_componentWillReceiveProps(e){this.setState({checkedValue:e.checked})}render(){const{checkboxStyle:e=Vr.DEFAULT,className:t,dataValue:n,enabled:i,error:s,helpText:r,id:o,label:a}=this.props,{checkedValue:c}=this.state,u=!i;return(0,l.jsxs)("div",Object.assign({ref:this.setCheckboxRef,id:o,role:"checkbox","aria-checked":c?"true":"false","aria-disabled":u,"data-value":n,className:d()("checkbox-element",`checkbox-style-${Vr[e].toLowerCase()}`,{checked:c,disabled:u,error:s},t),onClick:this.onChange},{children:[e!==Vr.FILTER&&(0,l.jsx)("div",{className:"checkbox icon-checkmark"}),(0,l.jsx)("div",Object.assign({className:"checkbox-text"},{children:a})),r&&(0,l.jsx)("span",Object.assign({className:"help-text"},{children:r}))]}))}};zr.defaultProps={enabled:!0,error:!1},zr=Wr([_n.Z],zr);var Kr,Yr=n(43985),qr=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e[e.OUTLINED=0]="OUTLINED",e[e.ADJUSTABLE=1]="ADJUSTABLE"}(Kr||(Kr={}));const $r=function*(){let e=0;for(;;)yield e++}();let Zr=class Textarea extends r.Component{constructor(e){super(e),this.elementRef=(0,r.createRef)(),this.onInput=e=>{if(this.props.onInput){const t=e.target;this.props.onInput(t.value)}},this.onKeyPress=e=>{e.stopPropagation();const t=e.which||e.keyCode,n=[Yr.R.RETURN];if("keydown"===e.type&&!n.includes(t))return!1;const i=e.target;switch(this.props.maxLength&&i.value.length>this.props.maxLength&&e.preventDefault(),t){case Yr.R.RETURN:e.shiftKey||(e.preventDefault(),this.blur(),this.props.onDone(i.value))}return!1},this.stopPropagation=e=>e.stopPropagation(),this.onChange=e=>{this.updateHeight()},this.onFocus=e=>{this.context.messageBus.broadcast(new Bs.SN(this.input,!0)),this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0})},this.onBlur=e=>{this.context.messageBus.broadcast(new Bs.SN(this.input,!1)),this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1})},this.setRef=e=>this.input=e,this.instanceId=`textarea-${$r.next().value}`,this.state={currentText:e.text,isFocused:!1}}componentDidMount(){this.props.focusOnMount&&this.input&&this.input.focus(),this.props.scrollIntoViewOnMount&&this.input&&this.input.scrollIntoView(),this.updateHeight()}componentWillUnmount(){this.input&&this.input.blur()}UNSAFE_componentWillReceiveProps(e){e.text!==this.props.text&&this.setState({currentText:e.text})}componentDidUpdate(e,t){t.currentText!==this.state.currentText&&this.updateHeight()}getText(){return this.input?this.input.value:""}focus(){this.input.focus()}blur(){this.input.blur()}updateHeight(){if(this.props.inputStyle===Kr.ADJUSTABLE){const e=this.elementRef.current;if(!this.input||!e)return;e.style.height="",this.input.style.overflowY="";const t=this.input.scrollHeight;e.style.height=`${t}px`,t>e.scrollHeight&&(this.input.style.overflowY="auto")}}render(){const{placeholder:e,tabIndex:t,maxLength:n,inputStyle:i=Kr.OUTLINED,label:s,name:r,readOnly:o,rows:a}=this.props,{currentText:c,isFocused:u}=this.state,h=r||this.instanceId,p=""===c,m=s&&(i!==Kr.ADJUSTABLE||u||!p),g=i===Kr.ADJUSTABLE?1:a;return(0,l.jsxs)("div",Object.assign({className:d()("textarea-container",`textarea-style-${Kr[i].toLowerCase()}`,{focused:u,readonly:o,placeholder:p}),ref:this.elementRef},{children:[m&&(0,l.jsx)("label",Object.assign({className:"label",htmlFor:h},{children:s})),(0,l.jsx)("textarea",{className:"textarea",value:c,ref:this.setRef,name:h,placeholder:e,maxLength:n,onInput:this.onInput,onChange:this.onChange,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyPress,onKeyUp:this.stopPropagation,onBlur:this.onBlur,onFocus:this.onFocus,rows:g,tabIndex:t,readOnly:o})]}))}};Zr.contextType=m.I,Zr=qr([_n.Z],Zr);const Qr=Zr;var Xr;!function(e){e[e.Disappointed=0]="Disappointed",e[e.Unsatisfied=1]="Unsatisfied",e[e.Neutral=2]="Neutral",e[e.Satisfied=3]="Satisfied",e[e.Happy=4]="Happy"}(Xr||(Xr={}));const{MODEL_RATING:Jr}=g.Z.WORKSHOP,eo={HAPPINESS:"happiness",QUALITY:"quality",NAVIGATION:"navigation",FEEDBACK:"feedback"},to=eo.HAPPINESS,no={[eo.HAPPINESS]:Jr.HAPPINESS_TITLE,[eo.QUALITY]:Jr.QUALITY_ISSUES_TITLE,[eo.NAVIGATION]:Jr.NAVIGATION_ISSUES_TITLE,[eo.FEEDBACK]:Jr.FEEDBACK_TITLE},io={[eo.HAPPINESS]:Jr.HAPPINESS_BODY},so={[eo.QUALITY]:[{text:Jr.QUALITY_ISSUES_LIGHTING,value:"lighting"},{text:Jr.QUALITY_ISSUES_3D_MESH,value:"3d_mesh"},{text:Jr.QUALITY_ISSUES_COLORING,value:"coloring"},{text:Jr.QUALITY_ISSUES_IMAGE_QUALITY,value:"image_quality"}],[eo.NAVIGATION]:[{text:Jr.NAVIGATION_ISSUES_BLOCKED_DOORWAYS,value:"blocked_doorways"},{text:Jr.NAVIGATION_ISSUES_OBSTRUCTIONS,value:"obstructions"},{text:Jr.NAVIGATION_ISSUES_MISALIGNED_SCANS,value:"misaligned_scans"},{text:Jr.NAVIGATION_ISSUES_FLOOR_SEPARATION,value:"floor_separation"},{text:Jr.NAVIGATION_ISSUES_DISAPPEARING_FLOORS,value:"disappearing_floors"}]},ro=[{value:1,altText:g.Z.REUSABLES.EMOJI_ALT_DISAPPOINTED,icon:Xr.Disappointed},{value:2,altText:g.Z.REUSABLES.EMOJI_ALT_UNSATISFIED,icon:Xr.Unsatisfied},{value:3,altText:g.Z.REUSABLES.EMOJI_ALT_NEUTRAL,icon:Xr.Neutral},{value:4,altText:g.Z.REUSABLES.EMOJI_ALT_SATISFIED,icon:Xr.Satisfied},{value:5,altText:g.Z.REUSABLES.EMOJI_ALT_HAPPY,icon:Xr.Happy}];var oo=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let ao=class RatingIcon extends r.Component{render(){switch(this.props.icon){case Xr.Disappointed:return(0,l.jsxs)("svg",Object.assign({width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 28C21.9557 28 28 21.9557 28 14.5C28 7.04503 21.9557 1 14.5 1C7.04506 1 1 7.04506 1 14.5C1 21.9557 7.04503 28 14.5 28ZM14.5 29C22.508 29 29 22.508 29 14.5C29 6.49278 22.508 0 14.5 0C6.49278 0 0 6.49278 0 14.5C0 22.508 6.49278 29 14.5 29Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M9.26389 16.1111C10.3761 16.1111 11.2778 14.8488 11.2778 13.2917C11.2778 11.7345 10.3761 10.4722 9.26389 10.4722C8.15165 10.4722 7.25 11.7345 7.25 13.2917C7.25 14.8488 8.15165 16.1111 9.26389 16.1111Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M19.7361 16.1111C20.8484 16.1111 21.75 14.8488 21.75 13.2917C21.75 11.7345 20.8484 10.4722 19.7361 10.4722C18.6239 10.4722 17.7222 11.7345 17.7222 13.2917C17.7222 14.8488 18.6239 16.1111 19.7361 16.1111Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M4.83253 9.66666C4.66497 9.66666 4.495 9.6143 4.35 9.50555C3.99394 9.23891 3.92225 8.73383 4.18889 8.37777C6.81661 4.87361 10.324 4.83333 10.4722 4.83333C10.9169 4.83333 11.2778 5.19422 11.2778 5.63888C11.2778 6.08274 10.9193 6.44283 10.4754 6.44444C10.3506 6.44605 7.60122 6.51372 5.47778 9.34444C5.31989 9.5555 5.07742 9.66666 4.83253 9.66666ZM24.1675 9.66666C23.9218 9.66666 23.6809 9.5555 23.5222 9.34444C21.3956 6.50808 18.6397 6.44605 18.5229 6.44444C18.0799 6.43961 17.7222 6.07711 17.7246 5.63486C17.7271 5.19099 18.0847 4.83333 18.5278 4.83333C18.676 4.83333 22.1826 4.87361 24.8111 8.37777C25.0786 8.73383 25.0061 9.23891 24.65 9.50555C24.505 9.6143 24.3358 9.66666 24.1675 9.66666V9.66666ZM18.9185 22.4581C18.9096 22.4226 17.9961 18.9306 14.5 18.9306C11.0039 18.9306 10.0904 22.4226 10.0815 22.4581C10.0388 22.6297 10.117 22.8053 10.2684 22.8963C10.4199 22.9865 10.6172 22.9656 10.7485 22.848C10.7558 22.8415 11.5646 22.1528 14.5 22.1528C17.3919 22.1528 18.2192 22.8214 18.2507 22.848C18.3272 22.9205 18.4271 22.9583 18.5278 22.9583C18.5954 22.9583 18.6639 22.9414 18.7259 22.9068C18.8838 22.8166 18.9628 22.6337 18.9185 22.4581V22.4581Z",fill:"#222222"})]}));case Xr.Unsatisfied:return(0,l.jsxs)("svg",Object.assign({width:"30",height:"29",viewBox:"0 0 30 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.125 28C22.5808 28 28.625 21.9558 28.625 14.5C28.625 7.04416 22.5808 1 15.125 1C7.66916 1 1.625 7.04416 1.625 14.5C1.625 21.9558 7.66916 28 15.125 28ZM29.625 14.5C29.625 22.5081 23.1331 29 15.125 29C7.11687 29 0.625 22.5081 0.625 14.5C0.625 6.49187 7.11687 0 15.125 0C23.1331 0 29.625 6.49187 29.625 14.5Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M21.1546 22.0553C21.1183 21.9111 20.2137 18.5278 15.125 18.5278C10.0355 18.5278 9.13167 21.9111 9.09542 22.0553C9.05111 22.2301 9.13006 22.4114 9.28633 22.5016C9.44342 22.591 9.63997 22.5644 9.76967 22.4395C9.78497 22.4242 11.3437 20.9444 15.125 20.9444C18.9063 20.9444 20.4658 22.4242 20.4803 22.4387C20.5577 22.5153 20.6608 22.5555 20.7639 22.5555C20.8316 22.5555 20.9 22.5386 20.9621 22.504C21.1199 22.4138 21.1989 22.2309 21.1546 22.0553Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M10.2917 13.6944C11.4039 13.6944 12.3055 12.4321 12.3055 10.875C12.3055 9.31787 11.4039 8.05556 10.2917 8.05556C9.17942 8.05556 8.27777 9.31787 8.27777 10.875C8.27777 12.4321 9.17942 13.6944 10.2917 13.6944Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M19.9583 13.6944C21.0706 13.6944 21.9722 12.4321 21.9722 10.875C21.9722 9.31787 21.0706 8.05556 19.9583 8.05556C18.8461 8.05556 17.9444 9.31787 17.9444 10.875C17.9444 12.4321 18.8461 13.6944 19.9583 13.6944Z",fill:"#222222"})]}));case Xr.Neutral:return(0,l.jsxs)("svg",Object.assign({width:"30",height:"29",viewBox:"0 0 30 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.75 28C22.2057 28 28.25 21.9557 28.25 14.5C28.25 7.04503 22.2057 1 14.75 1C7.29506 1 1.25 7.04506 1.25 14.5C1.25 21.9557 7.29503 28 14.75 28ZM14.75 29C22.758 29 29.25 22.508 29.25 14.5C29.25 6.49278 22.758 0 14.75 0C6.74278 0 0.25 6.49278 0.25 14.5C0.25 22.508 6.74278 29 14.75 29Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M9.51389 16.1111C10.6261 16.1111 11.5278 14.8488 11.5278 13.2917C11.5278 11.7345 10.6261 10.4722 9.51389 10.4722C8.40165 10.4722 7.5 11.7345 7.5 13.2917C7.5 14.8488 8.40165 16.1111 9.51389 16.1111Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M19.9861 16.1111C21.0984 16.1111 22 14.8488 22 13.2917C22 11.7345 21.0984 10.4722 19.9861 10.4722C18.8739 10.4722 17.9722 11.7345 17.9722 13.2917C17.9722 14.8488 18.8739 16.1111 19.9861 16.1111Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M20.3889 20.9444H9.11111C8.66645 20.9444 8.30556 20.5844 8.30556 20.1389C8.30556 19.6934 8.66645 19.3333 9.11111 19.3333H20.3889C20.8344 19.3333 21.1944 19.6934 21.1944 20.1389C21.1944 20.5844 20.8344 20.9444 20.3889 20.9444Z",fill:"#222222"})]}));case Xr.Satisfied:return(0,l.jsxs)("svg",Object.assign({width:"30",height:"29",viewBox:"0 0 30 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.375 28C22.8308 28 28.875 21.9558 28.875 14.5C28.875 7.04416 22.8308 1 15.375 1C7.91916 1 1.875 7.04416 1.875 14.5C1.875 21.9558 7.91916 28 15.375 28ZM29.875 14.5C29.875 22.5081 23.3831 29 15.375 29C7.36687 29 0.875 22.5081 0.875 14.5C0.875 6.49187 7.36687 0 15.375 0C23.3831 0 29.875 6.49187 29.875 14.5Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M9.34541 19.028C9.38166 19.1722 10.2863 22.5555 15.375 22.5555C20.4645 22.5555 21.3683 19.1722 21.4046 19.028C21.4489 18.8532 21.3699 18.672 21.2137 18.5817C21.0566 18.4923 20.86 18.5189 20.7303 18.6438C20.715 18.6591 19.1563 20.1389 15.375 20.1389C11.5937 20.1389 10.0342 18.6591 10.0197 18.6446C9.94233 18.568 9.83922 18.5278 9.73611 18.5278C9.66844 18.5278 9.59997 18.5447 9.53794 18.5793C9.38005 18.6695 9.30111 18.8524 9.34541 19.028V19.028Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M10.5417 13.6944C11.6539 13.6944 12.5556 12.4321 12.5556 10.875C12.5556 9.31787 11.6539 8.05556 10.5417 8.05556C9.42943 8.05556 8.52778 9.31787 8.52778 10.875C8.52778 12.4321 9.42943 13.6944 10.5417 13.6944Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M20.2083 13.6944C21.3206 13.6944 22.2222 12.4321 22.2222 10.875C22.2222 9.31787 21.3206 8.05556 20.2083 8.05556C19.0961 8.05556 18.1944 9.31787 18.1944 10.875C18.1944 12.4321 19.0961 13.6944 20.2083 13.6944Z",fill:"#222222"})]}));case Xr.Happy:return(0,l.jsxs)("svg",Object.assign({width:"30",height:"29",viewBox:"0 0 30 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 28C22.4558 28 28.5 21.9558 28.5 14.5C28.5 7.04416 22.4558 1 15 1C7.54416 1 1.5 7.04416 1.5 14.5C1.5 21.9558 7.54416 28 15 28ZM29.5 14.5C29.5 22.5081 23.0081 29 15 29C6.99187 29 0.5 22.5081 0.5 14.5C0.5 6.49187 6.99187 0 15 0C23.0081 0 29.5 6.49187 29.5 14.5Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M8.97042 19.028C9.00667 19.1722 9.9113 22.5555 15 22.5555C20.0895 22.5555 20.9933 19.1722 21.0296 19.028C21.0739 18.8532 20.9949 18.672 20.8387 18.5817C20.6816 18.4923 20.485 18.5189 20.3553 18.6438C20.34 18.6591 18.7813 20.1389 15 20.1389C11.2187 20.1389 9.65917 18.6591 9.64467 18.6446C9.56733 18.568 9.46422 18.5278 9.36111 18.5278C9.29344 18.5278 9.22497 18.5447 9.16294 18.5793C9.00505 18.6695 8.92611 18.8524 8.97042 19.028V19.028Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M15 17.6006C12.6107 17.6006 11.0246 17.3218 9.06388 16.9408C8.61519 16.8554 7.74438 16.9408 7.74438 18.2603C7.74438 20.8985 10.7757 24.1965 15 24.1965C19.2244 24.1965 22.2557 20.8985 22.2557 18.2603C22.2557 16.9408 21.3841 16.8546 20.9362 16.9408C18.9754 17.3218 17.3901 17.6006 15 17.6006Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M10.1667 13.6944C11.2789 13.6944 12.1806 12.4321 12.1806 10.875C12.1806 9.31787 11.2789 8.05556 10.1667 8.05556C9.05443 8.05556 8.15278 9.31787 8.15278 10.875C8.15278 12.4321 9.05443 13.6944 10.1667 13.6944Z",fill:"#222222"}),(0,l.jsx)("path",{d:"M19.8333 13.6944C20.9456 13.6944 21.8472 12.4321 21.8472 10.875C21.8472 9.31787 20.9456 8.05556 19.8333 8.05556C18.7211 8.05556 17.8194 9.31787 17.8194 10.875C17.8194 12.4321 18.7211 13.6944 19.8333 13.6944Z",fill:"#222222"})]}))}}};ao=oo([_n.Z],ao);const{MODEL_RATING:lo}=g.Z.WORKSHOP,co=Object.values(eo);class ModelRatingForm extends r.Component{constructor(e){super(e),this.submitCurrentRating=(e=!1)=>{const{currentQuestionId:t}=this.state;let n={};switch(t){case eo.QUALITY:n={quality:this.state.quality};break;case eo.NAVIGATION:n={navigation:this.state.navigation};break;case eo.FEEDBACK:n={feedback:this.state.feedback},this.resetValues()}n&&this.context.commandBinder.issueCommand(new Cr.M(n,e))},this.resetValues=()=>{this.setState({happiness:void 0,quality:void 0,navigation:void 0,feedback:void 0})},this.hasPerfectHappinessRating=()=>5===this.state.happiness,this.handleButtonClick=()=>{const{currentQuestionId:e}=this.state;let t;switch(this.submitCurrentRating(e===eo.FEEDBACK),e){case eo.QUALITY:t=eo.NAVIGATION;break;case eo.NAVIGATION:t=eo.FEEDBACK}t&&this.setState({currentQuestionId:t})},this.handleHappinessClick=(e,t)=>{this.context.commandBinder.issueCommand(new Cr.M({happiness:t.value})),5!==t.value?this.setState({happiness:t.value,currentQuestionId:eo.QUALITY}):this.submitCurrentRating(!0)},this.handleCheckboxChange=(e,t,n)=>{const i=n.value,s={},r=(this.state[t]||[]).slice();r.includes(i)?r.splice(r.indexOf(i),1):r.push(i),s[t]=r,this.setState(s)},this.handleFeedbackChange=e=>{this.setState({feedback:e})},this.handleClose=()=>{this.context.commandBinder.issueCommand(new Cr.m(!1))},this.renderProgress=()=>{const{locale:e}=this.context,{currentQuestionId:t}=this.state;if(!t)return null;if(t===eo.HAPPINESS||this.hasPerfectHappinessRating())return;const n=co.indexOf(t);return(0,l.jsx)("span",Object.assign({className:"model-rating-progress"},{children:e.t(lo.PROGRESS,{"current-question-number":n,"max-question-number":co.length-1})}))},this.state={currentQuestionId:to}}componentWillUnmount(){this.submitCurrentRating(),this.context.commandBinder.issueCommand(new Cr.m(!1))}renderCurrentQuestion(){const{locale:e}=this.context,{currentQuestionId:t}=this.state;if(t===eo.FEEDBACK)return(0,l.jsx)("div",Object.assign({className:"question-type text-entry"},{children:(0,l.jsx)(Qr,{text:this.state.feedback||"",label:e.t(lo.FEEDBACK_LABEL),onInput:this.handleFeedbackChange,onDone:this.handleFeedbackChange,maxLength:200,rows:3,focusOnMount:!0,scrollIntoViewOnMount:!0})}));if(t===eo.HAPPINESS)return(0,l.jsx)("div",Object.assign({className:"question-type emoji-select"},{children:(0,l.jsx)(st,{children:ro.map((e=>(0,l.jsx)(Ts.zx,Object.assign({buttonState:this.state.happiness===e.value?Ts.BN.ACTIVE:Ts.BN.ENABLED,buttonStyle:Ts.ZJ.PLAIN,buttonSize:Ts.qE.SMALL,onClick:this.handleHappinessClick,onClickArgs:[e]},{children:(0,l.jsx)(ao,{icon:e.icon})}),e.value)))})}));if(t===eo.QUALITY||t===eo.NAVIGATION){const n=(t===eo.QUALITY?this.state.quality:this.state.navigation)||[],i=so[t];return(0,l.jsx)("div",Object.assign({className:"question-type multi-select"},{children:i.map((i=>(0,l.jsx)(zr,{enabled:!0,checkboxStyle:Vr.FILTER,onChange:this.handleCheckboxChange,onChangeArgs:[t,i],checked:n.includes(i.value),label:e.t(i.text)},i.text)))}))}return null}render(){const{locale:e}=this.context,{currentQuestionId:t}=this.state,n=t===to,i=no[t],s=io[t],r=t===eo.FEEDBACK?lo.SAVE:lo.NEXT;return(0,l.jsxs)("div",Object.assign({className:d()("model-rating-dialog",{"in-progress":!n})},{children:[(0,l.jsx)(An.P,{onClose:this.handleClose,closeOnMouseDown:!0}),(0,l.jsxs)("div",Object.assign({className:"model-rating-form"},{children:[(0,l.jsxs)("div",Object.assign({className:"model-rating-question"},{children:[(0,l.jsx)("h3",Object.assign({className:"question-title"},{children:e.t(i)})),s&&(0,l.jsx)("p",Object.assign({className:"question-body"},{children:e.t(s)})),this.renderCurrentQuestion()]})),(0,l.jsxs)("footer",Object.assign({className:"model-rating-footer"},{children:[(0,l.jsx)("div",{children:t!==eo.HAPPINESS&&(0,l.jsx)(Ts.zx,Object.assign({buttonStyle:Ts.ZJ.SECONDARY,buttonState:Ts.BN.ENABLED,onClick:this.handleButtonClick,onClickArgs:[t]},{children:e.t(r)}))}),this.renderProgress()]}))]}))]}))}}ModelRatingForm.contextType=m.I;var uo=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let ho=class ModelRatingDialog extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.bindings=[],this.handleDialogVisibilityChange=e=>{this.setState({isVisible:e})},this.state={initializing:!0,isVisible:!1}}componentDidMount(){const{market:e}=this.context.engine;e.waitForData(Gr.P).then((e=>{this.isUnmounting||(this.bindings.push(e.onDialogVisibleChanged(this.handleDialogVisibilityChange)),this.setState({initializing:!1}))}))}componentWillUnmount(){this.isUnmounting=!0,this.bindings.forEach((e=>e.cancel()))}render(){const{initializing:e,isVisible:t}=this.state;return t&&!e?(0,l.jsx)(ModelRatingForm,{}):null}};ho.contextType=m.I,ho=uo([_n.Z],ho);const po="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const mo=function(e,t,n){var i=(0,r.useRef)(t);po((function(){i.current=t}),[t]),(0,r.useEffect)((function(){var t=(null==n?void 0:n.current)||window;if(t&&t.addEventListener){var s=function(e){return i.current(e)};return t.addEventListener(e,s),function(){t.removeEventListener(e,s)}}}),[e,n])};function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,s,r=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const vo=function(e,t){var n=(0,r.useCallback)((function(){if("undefined"==typeof window)return t;try{var n=window.localStorage.getItem(e);return n?function(e){try{return"undefined"===e?void 0:JSON.parse(null!=e?e:"")}catch(t){return void console.log("parsing error on",{value:e})}}(n):t}catch(n){return console.warn("Error reading localStorage key “".concat(e,"”:"),n),t}}),[t,e]),i=go((0,r.useState)(n),2),s=i[0],o=i[1],a=(0,r.useCallback)((function(t){"undefined"==typeof window&&console.warn("Tried setting localStorage key “".concat(e,"” even though environment is not a client"));try{var n=t instanceof Function?t(s):t;window.localStorage.setItem(e,JSON.stringify(n)),o(n),window.dispatchEvent(new Event("local-storage"))}catch(t){console.warn("Error setting localStorage key “".concat(e,"”:"),t)}}),[e,s]);(0,r.useEffect)((function(){o(n())}),[]);var l=(0,r.useCallback)((function(){o(n())}),[n]);return mo("storage",l),mo("local-storage",l),[s,a]};const bo=function(){var e=(0,r.useRef)(!0);return e.current?(e.current=!1,!0):e.current};const yo=function(e,t){var n=bo();(0,r.useEffect)((function(){if(!n)return e()}),t)};function So(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,s,r=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const To=function(){var e=So((0,r.useState)(null),2),t=e[0],n=e[1],i=So((0,r.useState)({width:0,height:0}),2),s=i[0],o=i[1],a=(0,r.useCallback)((function(){o({width:(null==t?void 0:t.offsetWidth)||0,height:(null==t?void 0:t.offsetHeight)||0})}),[null==t?void 0:t.offsetHeight,null==t?void 0:t.offsetWidth]);return mo("resize",a),po((function(){a()}),[null==t?void 0:t.offsetHeight,null==t?void 0:t.offsetWidth]),[n,s]};function Oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,s,r=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const Ao=function(e){var t=(0,r.useCallback)((function(){if("undefined"==typeof window)return null;try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Error reading localStorage key “".concat(e,"”:"),t),null}}),[e]),n=Oo((0,r.useState)(t),2),i=n[0],s=n[1];(0,r.useEffect)((function(){s(t())}),[]);var o=(0,r.useCallback)((function(){s(t())}),[t]);return mo("storage",o),mo("local-storage",o),i};function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,s,r=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return No(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const Po=function(){var e=wo((0,r.useState)({width:0,height:0}),2),t=e[0],n=e[1],i=function(){n({width:window.innerWidth,height:window.innerHeight})};return mo("resize",i),po((function(){i()}),[]),t};function Io(){const e=kr(),t=Jn(),n=(0,r.useRef)(0),[i,s]=(0,r.useState)(!1),o=t.active,a=e===Vn.zz.STORIES;return yo((()=>(s(!0),window.clearTimeout(n.current),o?()=>{}:(n.current=window.setTimeout((()=>{s(!1)}),3e3),()=>window.clearTimeout(n.current)))),[o]),a&&(o||i)}const ko=P("showStoryTour",Io);class BottomUiComponent extends r.Component{constructor(e,t){super(e,t),this.isUnmounting=!1,this.bindings=[],this.viewmodeToClass={[E.BD.INSIDE]:"inside",[E.BD.OUTSIDE]:"outside",[E.BD.DOLLHOUSE]:"dollhouse",[E.BD.FLOORPLAN]:"floorplan",[E.BD.TRANSITIONING]:"transitioning"},this.checkShowReel=()=>{const{tourState:e}=this.props,{settings:t}=this.context,n=t.tryGetProperty(Ln.gx.HighlightReel,!0);if(e.totalSteps>0&&n){const e=this.getHlStartupValue();switch(e){case ss.expanded:case ss.flash:(0,f.gw)(100).then((()=>this.showReel(e)))}}},this.showReel=e=>{this.isUnmounting||(this.context.commandBinder.issueCommand(new Oi.Av(!0)),e===ss.flash&&(0,f.gw)(3e3).then(this.dismissReel))},this.dismissReel=()=>{this.isUnmounting||this.context.commandBinder.issueCommand(new Oi.Av(!1))},this.onViewingControlsToggle=({show:e})=>{this.setState({autohide:!e})},this.updateViewportSize=()=>{this.isUnmounting||this.setState({viewportHeight:this.context.mainDiv.offsetHeight})},this.isReelEnabled=()=>{if(this.props.tourMode===Vn.zz.STORIES)return!0;return this.state.viewportHeight>=400&&(0,ns.ug)(this.context.settings)},this.isFloorsEnabled=()=>{const{settings:e}=this.context,t=e.tryGetProperty(Ji.ws,!0),n=e.tryGetProperty(Ln.gx.FloorSelect,!0);return t&&n},this.toggleShareModal=()=>{const e=this.props.openModal===di.P.SHARE;this.context.analytics.trackGuiEvent("click_share_button"),this.context.commandBinder.issueCommand(new ui.Bz(di.P.SHARE,!e))},this.renderModeControls=()=>{const{unaligned:e,viewmode:t}=this.props;return(0,l.jsx)(ModeControls,{unaligned:e,viewmode:t,className:"showcase-viewmode-controls"},"mode_controls")},this.renderFloorPlanControls=()=>{const{viewmode:e}=this.props;return(0,l.jsx)(FloorControls,{viewmode:e,iconStyle:!0,className:"showcase-floor-controls"},"floor_controls")},this.renderNotesModeButton=()=>{const{openTool:e}=this.props;return(0,l.jsx)(Ws,{openTool:e,className:"showcase-notes-button"},"notes_mode_button")},this.renderMeasurementModeButton=()=>{const{openTool:e}=this.props;return(0,l.jsx)(qs,{openTool:e,className:"showcase-measurements-button"},"measurement_mode_button")},this.renderHighlightReel=()=>{const{openTool:e,tourState:t,tourMode:n}=this.props;if(e)return null;const{tourPlaying:i,highlights:s,activeStep:r,transition:o}=t;return(0,l.jsx)(xs,{openTool:e,tourMode:n,transition:o,activeStep:r,highlights:s,tourPlaying:i})},this.renderRightControls=()=>{const e=[],{vrEnabled:t,shareEnabled:n}=this.props,i=(0,ts.O6)();e.push((0,l.jsx)("span",{className:"divider"},"divider_1"));const s=this.context.locale.t(g.Z.SOCIAL_SHARING),r={placement:"top"};return n&&e.push((0,l.jsx)(nt,{onClick:this.toggleShareModal,ariaLabel:s,tooltip:s,tooltipOptions:r,icon:"share",theme:"overlay",variant:et.TERTIARY},"toggle_share_modal")),t&&e.push((0,l.jsx)(es,{},"vr_modal_controls")),i&&e.push((0,l.jsx)(FullscreenControls,{},"fullscreen_controls")),e},this.state={viewportHeight:t.mainDiv.offsetHeight,autohide:!1},this.onResize=(0,Hs.D)(this.updateViewportSize,250)}componentDidMount(){const{messageBus:e}=this.context;window.addEventListener("resize",this.onResize),this.bindings.push(e.subscribe(is.ps,this.onViewingControlsToggle)),this.checkShowReel()}componentWillUnmount(){this.isUnmounting=!0,this.bindings.map((e=>e.cancel())),window.removeEventListener("resize",this.onResize)}componentDidUpdate(e){!(e.tourState.totalSteps>0)&&this.props.tourState.totalSteps>0&&this.checkShowReel()}getHlStartupValue(){if((0,v.eY)("note","")||(0,v.eY)("tag",""))return ss.collapsed;const e=this.props.tourState.highlights.some((e=>e.snapshot.is360))?ss.expanded:ss.flash,t=(0,v.eY)("hl",e);return(0,b.p)(ss,t)?t:e}render(){const{measurementsModeEnabled:e,notesEnabled:t,openModal:n,openTool:i,showStoryTour:s,toolPanelLayout:r,tourMode:o,tourState:a,unaligned:c,viewmode:u}=this.props,{tourPlaying:h,tourEnded:m,totalSteps:g,activeStep:f,currentStep:v,highlights:b}=a,{autohide:y,viewportHeight:S}=this.state,{settings:E}=this.context,T=this.viewmodeToClass[u]||"",O=0===g,_=o===Vn.zz.STORIES,A=S>=400,w=this.isReelEnabled()&&!O,N=i!==p.w1.MEASUREMENTS,P=this.isFloorsEnabled(),I=t&&!c,k=e&&!c,C=E.tryGetProperty(wr.i,!1),L={"modal-open":!!n,"tour-playing":h,"stories-tour-showing":s,autohide:y},M=!(!n||n===di.P.CTA&&_||i),D=d()("bottom-controls",{"faded-out":M});return(0,l.jsxs)("div",Object.assign({id:"bottom-ui",className:d()("bottom-ui",L,T)},{children:[(0,l.jsx)(PauseButton,{tourPlaying:h,tourEnded:m}),(0,l.jsxs)("div",Object.assign({className:D},{children:[(0,l.jsxs)(Ar,Object.assign({className:"controls"},{children:[(0,l.jsx)(TourControls,{toolPanelLayout:r,activeTool:i,activeStep:f,currentStep:v,highlights:b||[],tourPlaying:h,tourMode:o,hideReel:!A},"tour_controls"),this.renderModeControls(),P&&this.renderFloorPlanControls(),I&&this.renderNotesModeButton(),k&&this.renderMeasurementModeButton(),N&&this.renderRightControls()]})),C&&(0,l.jsx)(ho,{})]})),w&&this.renderHighlightReel(),(0,l.jsx)(Br,{})]}))}}BottomUiComponent.contextType=m.I;const Co=ko(BottomUiComponent);var Lo=n(21396),Mo=n(80312),Do=n(58575),Ro=n(14385),xo=n(76031);const jo=()=>{const e=vi(xo.My,xo.ED);return(0,r.useMemo)((()=>Object.assign({},xo.ED,e)),[e])};var Uo=n(17111);const{SUBSCRIBER_PROMPT:Ho}=g.Z.SHOWCASE,Fo=e=>{e.preventDefault()},Bo=()=>{const e=(0,Mo.z)(),t=_(),{popupDelay:n}=jo(),[i,s]=(0,r.useState)(0),[o,a]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!0),[u,h]=vo(xo.pr,!1);Gn(Do.i,(e=>{if(o)return;const t=e.durationDollhouse+e.durationFloorplan+e.durationInside,r=i+t;Ro.L.debug(`Check Visibility: ${r}/${n}ms, User has dismissed popup: ${u.toString()}`),r>=n&&!u&&a(!0),s(r)}));const p=(0,r.useCallback)((()=>{h(!0)}),[h]),m=(0,r.useCallback)((t=>{t.stopPropagation(),e.trackGuiEvent("subscriber_prompt_a_popup_dismissed"),p()}),[p,e]),g=(0,r.useCallback)((t=>{e.trackGuiEvent("subscriber_prompt_a_popup_cta_click"),window.open(xo.gP,"_blank"),p()}),[p,e]);return(0,r.useEffect)((()=>(o&&c&&(e.trackGuiEvent("subscriber_prompt_a_popup_viewed"),d(!1)),()=>{})),[e,o,c]),o?(0,l.jsxs)("div",Object.assign({className:"subscriber-prompt-popup",onClick:g},{children:[(0,l.jsx)("img",{className:"matterport-app-icon",alt:"Matterport App Icon",src:Uo,width:"48",height:"48"}),(0,l.jsxs)("div",Object.assign({className:"subscriber-prompt-body"},{children:[(0,l.jsx)("div",Object.assign({className:"h5 subscriber-prompt-heading"},{children:t.t(Ho.POPUP_CTA_HEADING)})),(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",onClick:Fo,href:xo.gP},{children:t.t(Ho.POPUP_CTA_LINK_TEXT)}))]})),(0,l.jsx)(nt,{icon:"close",onClick:m})]})):null};var Vo=n(78576);const Go=w(h.pu);var Wo=n(41252);const zo=new Zn.f({from:null,to:null,progress:new Wo.z(0),promise:Promise.resolve()});function Ko(){const e=function(){const e=zi();return $n(e?e.transitionObservable:zo)}();return Zi((null==e?void 0:e.to)||null)}function Yo(e){const{commandBinder:t}=(0,r.useContext)(m.I),n=function(){const e=Go(),[t,n]=(0,r.useState)(e?e.phase:null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onPropertyChanged("phase",n);return n(e.phase),()=>t.cancel()}),[e]),t}(),i=function(){const e=Qi(),t=Ko(),[n,i]=(0,r.useState)(e?e.name:"");return(0,r.useEffect)((()=>(e?i(e.name):t&&i(t.name),()=>{})),[e,t]),n}(),s=(0,r.useCallback)((()=>{t.issueCommand(new Ui.Vw(null,!1))}),[t]);if(n!==h.nh.PLAYING)return null;const o=d()("floor-container",e.className);return(0,l.jsxs)("div",Object.assign({className:o},{children:[(0,l.jsx)("div",Object.assign({className:"floor-title h4"},{children:i||""})),(0,l.jsx)(Es.hU,{iconClass:"icon-close",buttonStyle:Es.Dd.CLEAR,buttonSize:Ts.qE.STANDARD,tooltipPosition:Vo.lZ.DOWN_RIGHT,onClick:s})]}))}var qo=n(20585),$o=n(33669);function Zo(e){const t=I(),[n,i]=(0,r.useState)((null==t?void 0:t.getTool(e))||null);return(0,r.useEffect)((()=>{if(!t)return()=>{};const n=t.onChanged((()=>i((null==t?void 0:t.getTool(e))||null)));return()=>n.cancel()}),[t]),n}var Qo=n(59867);function Xo(){const{editMode:e}=(0,r.useContext)(m.I),t=Zo(p.w1.SEARCH),n=vi(Qo.B,!1),i=vi(Ln.gx.SpaceSearch,!1);return n&&!!t&&(e||i)}var Jo=n(92216);const ea=()=>{const e=Kn(Jo.I,"applicationKey",null);return vi(xo.B_,!1)&&!e};const ta=w(n(67233).R);function na(){const e=ta(),[t,n]=(0,r.useState)((null==e?void 0:e.getCurrentView())||void 0);return(0,r.useEffect)((()=>{if(!e)return()=>{};function t(){n((null==e?void 0:e.getCurrentView())||void 0)}const i=e.onPropertyChanged("currentViewId",t);return t(),()=>i.cancel()}),[e]),t}const ia=P("activeModelView",na);function sa(){const e=ta(),[t,n]=(0,r.useState)((null==e?void 0:e.getEnabledStandardModelViews())||[]);return(0,r.useEffect)((()=>{if(!e)return()=>{};function t(){n((null==e?void 0:e.getEnabledStandardModelViews())||[])}const i=e.onModelViewsChanged(t);return t(),()=>i.cancel()}),[e]),t}function ra(e,t){const n=(0,v.eY)($o.Sw)===$o.RF;return!(!(e&&e.enabled&&(e.viewType===Lo.X.USER||e.viewType===Lo.X.BASE))||n||t.length<2)}function oa(e,t){const n=ra(e,t),i=(null==e?void 0:e.viewType)===Lo.X.USER;return!n&&i}function aa(){const e=na(),t=sa(),[n,i]=(0,r.useState)(ra(e,t));return(0,r.useEffect)((()=>(i(ra(e,t)),()=>{})),[e,t]),n}function la(){const e=na(),t=sa(),[n,i]=(0,r.useState)(oa(e,t));return(0,r.useEffect)((()=>(i(oa(e,t)),()=>{})),[e,t]),n}var ca=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let da=class TitleBar extends r.Component{constructor(){super(...arguments),this.handleTitleClick=()=>{const{commandBinder:e,analytics:t}=this.context;e.issueCommand(new hi.tT(p.w1.SUMMARY,!0)),t.trackGuiEvent("click_model_title",{interactionSource:"gui"})}}getFilteredValue(e,t,n,i){return!this.context.settings.tryGetProperty(t,n)||i&&!this.props.brandingEnabled?"":e}render(){const{locale:e}=this.context,{className:t,modelDetails:n}=this.props,{name:i,presentedBy:s}=n,r=this.getFilteredValue(i,Ln.gx.DetailsModelName,!0,!1),o=this.getFilteredValue(s,Ln.gx.PresentedBy,!1,!0),a=!!o;return(0,l.jsx)("div",Object.assign({id:"model-title",onClick:this.handleTitleClick,className:t,role:"button"},{children:(0,l.jsx)("div",Object.assign({id:"main-title-wrapper"},{children:(0,l.jsxs)("div",Object.assign({className:"main-title"},{children:[a&&(0,l.jsx)("div",Object.assign({className:"co-brand"},{children:(0,l.jsxs)("span",Object.assign({className:"title",id:"cobrandTitle"},{children:[e.t(g.Z.PRESENTED_BY),o]}))})),(0,l.jsxs)("div",Object.assign({id:"gui-name",className:d()({titleText:!0,noCoBrand:!o})},{children:[(0,l.jsx)("span",{className:"icon icon-location"}),r]}))]}))}))}))}};da.contextType=m.I,da=ca([_n.Z],da);const ua=da;var ha=n(37614),pa=n(99848),ma=n(76482);const{SHOWCASE:ga,WORKSHOP:fa}=g.Z;function va(){const e=na(),t=sa(),n=aa(),i=la(),{analytics:s,commandBinder:o}=(0,r.useContext)(m.I),a=_(),[c,u]=(0,r.useState)(!1),h=(0,r.useCallback)((async()=>{s.trackToolGuiEvent("layers","layers_view_goto_start_location"),await o.issueCommand(new ma.Q)}),[s,o]),p=(0,r.useCallback)((e=>{const t=a.t(fa.LAYERS.VIEW_PLACEHOLDER);return(0,f.aS)(e||t,$o.ty)}),[a]),g=(0,r.useCallback)((e=>{u(e)}),[]);if(!e)return null;const v=a.t(ga.VIEWS.VIEW_SELECTOR_START_LOCATION_TOOLTIP),b=t.map((t=>{const{id:n,name:i}=t;return(0,l.jsx)(ba,{name:p(i),id:n,active:n===e.id},n)})),y=p(e.name);return n&&t.length>1?(0,l.jsxs)("div",Object.assign({className:d()("model-view-selector",{open:c})},{children:[(0,l.jsx)(nt,{className:"start-location-btn",icon:"start-location",variant:et.PRIMARY,size:tt.SMALL,onClick:h,tooltip:v}),(0,l.jsx)(lt,Object.assign({menuClassName:"model-view-selector-menu",variant:et.PRIMARY,size:tt.SMALL,label:y,onMenuToggled:g,caret:!0},{children:b}))]})):i?(0,l.jsx)("div",Object.assign({className:"model-view-display"},{children:y})):null}function ba({name:e,id:t,active:n}){const{analytics:i,commandBinder:s}=(0,r.useContext)(m.I),o=(0,r.useCallback)((async()=>{i.trackToolGuiEvent("layers","layers_view_switch"),await s.issueCommand(new pa.D(!1)),await s.issueCommand(new ha.wG(t)),await s.issueCommand(new pa.D(!0))}),[i,s,t]);return(0,l.jsx)(nt,{className:"view-name",label:e,size:tt.SMALL,onClick:o,active:n})}const{TOOLS:ya}=g.Z;function Sa(e){const{activeTool:t}=e,{commandBinder:n,analytics:i}=(0,r.useContext)(m.I),s=_(),o=t===p.w1.SEARCH,a=(0,ts.Jm)();return(0,l.jsx)("span",Object.assign({className:"search-mode-button"},{children:(0,l.jsx)(Es.hU,Object.assign({onClick:()=>{n.issueCommand(new hi.tT(p.w1.SEARCH,!o)),i.trackToolGuiEvent("search","click_search_button",{interactionSource:"gui"})},buttonStyle:Es.Dd.OVERLAY,buttonState:o?Ts.BN.ACTIVE:Ts.BN.ENABLED},{children:(0,l.jsx)(Vo.oO,Object.assign({content:s.t(ya.SEARCH),position:Vo.lZ.DOWN,tooltipTimeout:a?1e3:void 0},{children:(0,l.jsx)("span",{className:"icon icon-magnifying-glass"})}))}))}))}function Ea(e){const{activeTool:t,brandingEnabled:n,modelDetails:i,showing:s,tourState:o}=e,a=Xo(),c=Io(),u=Po(),h=vi(Ji.Q5,!1),p=vi(Ji.gu,!0),g=h&&p,f=function(){const e=zi(),[t,n]=(0,r.useState)(!!e&&e.showFloorSelection);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onShowFloorSelectionChanged(n);return n(e.showFloorSelection),()=>t.cancel()}),[e]),t}(),{editMode:v}=(0,r.useContext)(m.I),b=function(){const e=Dr(),[t,n]=(0,r.useState)((null==e?void 0:e.model.details.name)||"");return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onChanged(n);return n(e.model.details.name),()=>t.cancel()}),[e]),t}(),y=na(),S=vi($o.Pe,!1),E=aa(),T=la(),O=!v&&S&&(E||T),_=function(){const e=vi(Lr.Zz,!0),t=vi(Ln.gx.DetailsModelName,!0);return e&&t}()&&i,A=!!_&&!f&&(!O||u.width>qo.Eb),w=(()=>{const e=ea(),t=jo(),n=Ao(xo.pr);return t.popupEnabled&&e&&!n})();if((0,r.useEffect)((()=>{if(!y)return;const{viewType:e,name:t}=y;let n;return n=e===Lo.X.USER?`${b}: ${t}`:b,document.title=n,()=>{}}),[b,y]),!(a||_||g||O))return null;const N=d()("top-ui",{"faded-out":!s||o.tourPlaying||c});return(0,l.jsxs)(l.Fragment,{children:[w&&!t&&(0,l.jsx)(Bo,{}),(0,l.jsxs)("div",Object.assign({className:N},{children:[a&&(0,l.jsx)(Sa,{activeTool:t}),(0,l.jsxs)("div",Object.assign({className:"child-container"},{children:[g&&(0,l.jsx)(mi,Object.assign({open:f,className:d()("floor-name-container",{collapsed:!f})},{children:(0,l.jsxs)("div",{children:[(0,l.jsx)(Yo,{}),a&&(0,l.jsx)("div",{className:"search-button-spacer"})]})})),_&&(0,l.jsx)(mi,Object.assign({open:A,className:d()("title-bar-container",{collapsed:!A})},{children:(0,l.jsx)(ua,{modelDetails:i,brandingEnabled:!!n})})),S&&(0,l.jsx)(mi,Object.assign({open:O,className:d()("model-view-container",{collapsed:!O})},{children:(0,l.jsx)(va,{})}))]}))]}))]})}var Ta=n(65453),Oa=n(18253),_a=n(34118),Aa=n(81111),wa=n(14877),Na=n(69098),Pa=n(76641),Ia=n(11679);const ka=new O.Z("embedly");class InvalidImageEmbed{constructor(e){this.msg=e}}class InvalidHtmlError{constructor(e){this.msg=e}}class UnsupportedTypeError{constructor(e){this.msg=e}}const Ca="Instagram",La="Flickr";class Embedly{constructor(e,t){this.key=e,this.queue=t,this.embedEndpoint="https://api.embed.ly/1/oembed",this.imageEndpoint="https://i.embed.ly/1/display/resize",this.saveProvidersForScripts=[La,Ca]}static clearCache(){Embedly.embedCache={},Embedly.imageCache={}}async getType(e){const t=await this.fetchFromCache(e);if(t)return t.type;try{const t=await this.getEmbedDetails(e);if(t.type===Ia.z.rich||t.type===Ia.z.video)return t.type}catch(e){if(401!==e.status_code&&404!==e.status_code&&501!==e.status_code&&!(e instanceof InvalidImageEmbed))return Ia.z.error}try{return await this.getImageDetails(e),Ia.z.photo}catch(e){}return Ia.z.error}async fetchFromCache(e){const t=await this.getDisplayUrl(e),n=Embedly.imageCache[t];if(n)return n;const i=await this.getOEmbedUrl(e),s=Embedly.embedCache[i];return s||null}async getMediaDetails(e,t){switch(e){case Ia.z.photo:return this.getImageDetails(t);case Ia.z.rich:case Ia.z.video:return this.getEmbedDetails(t)}throw Error("unsupported media type")}async getOEmbedUrl(e){const t=Math.max(window.screen.height,window.screen.width),n=`&maxwidth=${t}&maxheight=${t}`;return`${this.embedEndpoint}?key=${this.key}&url=${encodeURIComponent(e)}${n}`}async getEmbedDetails(e){const t=await this.getOEmbedUrl(e);return Embedly.embedCache[t]?Promise.resolve(Embedly.embedCache[t]):this.loadEmbed(t)}async getDisplayUrl(e){const t=Math.max(window.screen.height,window.screen.width),n=`&url=${encodeURIComponent(e)}&width=${t}&height=${t}`;return`${this.imageEndpoint}?key=${this.key}${n}`}async getImageDetails(e){const t=await this.getDisplayUrl(e);return Embedly.imageCache[t]?Promise.resolve(Embedly.imageCache[t]):this.loadImage(t)}loadEmbed(e){return this.queue.get(e,{responseType:"json"}).then((t=>this.validateAndCacheEmbed(e,t)))}loadImage(e){return new Promise(((t,n)=>this.queue.get(e,{responseType:"arraybuffer"}).then((t=>this.validateAndCacheImage(e,t))).then(t).catch(n)))}validateAndCacheEmbed(e,t){const n=!!(!t.html||!t.html.match(/<script/i))||this.saveProvidersForScripts.includes(t.provider_name);if(!(t.type!==Ia.z.photo||t.html&&n))throw new InvalidImageEmbed('image can\'t be used as a "rich" type');if(!t||t.type===Ia.z.rich&&(!t.html||!n))throw new InvalidHtmlError("missing html or html contains Javascript");switch(t.type){case Ia.z.photo:t.html&&(t.type=Ia.z.rich);break;case Ia.z.rich:case Ia.z.video:break;case Ia.z.link:{const e="not supporting link types because of existing link functionality";throw ka.debug(e),new UnsupportedTypeError(e)}default:{const e=`Did the OEmbed format extend?! Unknown type: ${t.type}`;throw ka.debug(e),new UnsupportedTypeError(e)}}const i=(void 0===t.height||void 0===t.width)&&t.thumbnail_width&&t.thumbnail_height,s=i?t.thumbnail_width:t.width,r=i?t.thumbnail_height:t.height,o=t.provider_name,a={width:s,height:r,embedlyResponse:{html:t.html,src:t.url,provider:o},type:t.type};return Embedly.embedCache[e]=a,a}validateAndCacheImage(e,t){return new Promise(((n,i)=>{t||i("Embedly: got an empty response when requesting image");const s=new Uint8Array(t),r=new Blob([s]),o=new Image;o.addEventListener("load",(t=>function(t){const i=t.target,s={width:i.naturalWidth,height:i.naturalHeight,embedlyResponse:{url:a,src:e},type:Ia.z.photo};Embedly.imageCache[e]=s,n(s)}(t)));const a=URL.createObjectURL(r);o.src=a}))}}Embedly.embedCache={},Embedly.imageCache={};const Ma=310;var Da=n(4117);class OpenLinkEditorMessage extends Da.v{constructor(e=!1){super(),this.urlFocus=e}}class CloseLinkEditorMessage extends Da.v{}var Ra,xa=n(36589),ja=n(64921),Ua=n(17141);!function(e){e[e.NOT_READY=1]="NOT_READY",e[e.CUED=2]="CUED",e[e.PLAYING=3]="PLAYING",e[e.PAUSED=4]="PAUSED"}(Ra||(Ra={}));var Ha=n(83773),Fa=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const Ba=new O.Z("mattertag-media");let Va=class MattertagMedia extends r.Component{constructor(e){super(e),this.playerControls=null,this.handleClick=()=>{this.props.mediaType===Ia.z.photo&&this.props.onClickImage&&this.props.onClickImage()},this.onPlayerLoaded=e=>{this.playerControls=e,e.play()},this.setupPlayerControls=e=>{let t=Ra.NOT_READY;const n=()=>{t=Ra.CUED,this.onPlayerLoaded(a)},i=()=>{t=Ra.PLAYING},s=()=>{t=Ra.PAUSED},r=()=>{};try{e.on("ready",n),e.on("play",i),e.on("pause",s),e.on("ended",r)}catch(e){Ba.debug(e)}const o=(0,ts.tq)(),a={play:()=>{if(e&&t!==Ra.NOT_READY&&!o)try{e.play()}catch(e){Ba.error(e)}},pause:()=>{if(e&&t!==Ra.NOT_READY)try{e.pause()}catch(e){Ba.debug(e)}}}},this.setEmbedContentRef=e=>{e&&!this.iframe&&this.createEmbed(e)},this.setContainerRef=e=>{this.mediaContainer=e,this.updateMaxDims()},this.updateMaxDims=()=>{if(this.mediaContainer&&this.props.mediaAspectRatio&&this.props.mediaType===Ia.z.video){const e=this.mediaContainer.getBoundingClientRect();this.setState({maxWidth:e.width,maxHeight:e.height})}},this.mediaStyles=()=>{const{width:e,height:t,mediaPayload:n,mediaType:i,mediaAspectRatio:s}=this.props,{maxWidth:r,maxHeight:o}=this.state,a={};if(n)switch(i){case Ia.z.photo:a.backgroundImage=n.url?`url('${n.url}')`:"none";case Ia.z.rich:void 0!==e&&(a.width=`${e}px`),void 0!==t&&(a.height=`${t}px`,n.provider===Ca?a.height=`${t+54}px`:a.height=`${t}px`);break;case Ia.z.video:if(void 0!==e&&void 0!==t){const n=(0,Ha.lZ)(e,t);a.width=`${e}px`,a.height=`${n}px`}else if(r&&o&&void 0!==s){const e=Math.min(o,(0,Ha.lZ)(r,r/s)),t=e*s;a.width=`${t}px`,a.height=`${e}px`}}return a},this.state={maxWidth:0,maxHeight:0}}componentDidMount(){this.props.mediaAspectRatio&&this.props.mediaType===Ia.z.video&&(window.addEventListener("resize",this.updateMaxDims),this.updateMaxDims())}componentWillUnmount(){this.props.mediaAspectRatio&&this.props.mediaType===Ia.z.video&&window.removeEventListener("resize",this.updateMaxDims)}UNSAFE_componentWillReceiveProps(e){e.mediaPayload!==this.props.mediaPayload&&this.iframe&&this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null),this.playerControls&&this.props.closing!==e.closing&&(e.closing?this.playerControls.pause():this.playerControls.play())}createEmbed(e){const{mediaType:t,mediaPayload:n,width:i,height:s}=this.props,{html:r,provider:o,src:a}=n,l=document.createElement("div");l.innerHTML=r;let c=l.firstChild;if("iframe"!==c.tagName.toLowerCase()){if(c=document.createElement("iframe"),!("srcdoc"in c))return Ba.warn(`Browser does not support srcdoc, refusing to embed ${r}`),void(this.iframe=null);let e,t;void 0!==i&&(c.width=i.toString()),void 0!==s&&(c.height=s.toString()),c.setAttribute("allow","encrypted-media; autoplay; fullscreen"),c.classList.add("tag-iframe-sandbox","loading"),c.onload=()=>c.classList.remove("loading"),e=o===La&&void 0!==a?`<img src=${a} />`:r,t=o===Ca?"\n          <style>\n            html, body { padding: 0; margin: 0; border: 0; }\n            img { display: block; max-width: 100%; height: auto; border: 0; }\n            iframe { display: block; max-width: 100%; border: 0; }\n          </style>\n        ":"\n          <style>\n            html, body { padding: 0; margin: 0; border: 0; }\n            img, iframe { display: block; max-width: 100%; height: auto; border: 0; }\n          </style>\n        ";const n=t.replace(/\s+/g," ");c.srcdoc=`<!doctype html>${n}${e}`}else{const e=c.style;e.maxWidth="100%",e.maxHeight="100%",e.minWidth="",e.minHeight=""}if(t===Ia.z.video&&c.src)try{const e=new Ua.Player(c);c.addEventListener("load",(()=>this.setupPlayerControls(e)))}catch(e){Ba.error(e)}this.iframe=c,e.appendChild(c)}render(){const{mediaPayload:e,mediaType:t}=this.props;if(!e)return null;const n=d()({"tag-image":t===Ia.z.photo,"tag-embed":t===Ia.z.rich,"tag-video":t===Ia.z.video}),i=e&&e.html?(0,l.jsx)("div",{className:"tag-embed-content",ref:this.setEmbedContentRef}):null;return(0,l.jsx)("div",Object.assign({ref:this.setContainerRef,className:"tag-media-content",onClick:this.handleClick},{children:(0,l.jsx)("div",Object.assign({className:n,style:this.mediaStyles()},{children:i}))}))}};Va=Fa([_n.Z],Va);const Ga=Va;class Scrollbars extends r.Component{constructor(e){super(e),this.horizontal={scrollbar:null,animation:null,dragStartScroll:0},this.vertical={scrollbar:null,animation:null,dragStartScroll:0},this.prevSuppressDrag=!1,this.manuallyMoved=!1,this.isUnmounting=!1,this.scrollPosition={horizontal:fs.Beginning,vertical:fs.End},this.handleEvent=e=>{this.inputFilter.handleEvent(e)},this.getScrollableContainer=()=>this.innerWrapper,this.getScrolledOffset=e=>{const t=gs[e].scrollOffset;return this.innerWrapper[t]/this.state[e].childLength},this.debouncedSetState=e=>{new URL(`${document.location}`).searchParams.get("temp-disable-debounce-scroll")?this.setState(e):(cancelAnimationFrame(this.rAFHandle),this.rAFHandle=requestAnimationFrame((()=>{this.isUnmounting||this.setState(e)})))},this.state={horizontal:{wrapperLength:1,childLength:1,scrollOffset:1,isVisible:!1},vertical:{wrapperLength:1,childLength:1,scrollOffset:1,isVisible:!1}},this.resizeSubscription=(0,as.kp)(as.g_.RESIZE,(()=>this.handleExternalChange(as.g_.RESIZE))),this.scrollTo=this.scrollTo.bind(this),this.handlePressStart=this.handlePressStart.bind(this),this.handlePressMove=this.handlePressMove.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleWheelEvent=this.handleWheelEvent.bind(this),this.handleClick=this.handleClick.bind(this),this.toggleVisibility=this.toggleVisibility.bind(this),this.hasManuallyMoved=this.hasManuallyMoved.bind(this),this.prevSuppressDrag=!!e.suppressDrag,this.inputFilter=new InputFilter({handlePressStart:this.handlePressStart,handlePressMove:this.handlePressMove,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,handleClick:this.handleClick});const t=this.handleEvent;window.PointerEvent||(window.addEventListener("mousemove",t),window.addEventListener("mouseleave",t),window.addEventListener("mouseup",t)),window.addEventListener("pointermove",t),window.addEventListener("pointerup",t),window.addEventListener("touchmove",t),window.addEventListener("touchend",t),window.addEventListener("touchcancel",t)}componentDidMount(){if(this.resizeSubscription.renew(),this.innerWrapper.addEventListener("wheel",this.handleWheelEvent,!0),this.props.thumbScrollingOnly)this.innerWrapper.addEventListener("click",this.handleClick);else{const e=this.handleEvent;this.innerWrapper.addEventListener("mousedown",e),this.innerWrapper.addEventListener("pointerdown",e),this.innerWrapper.addEventListener("touchstart",e)}this.firstChild=this.innerWrapper.firstElementChild,this.props.onScrollPositionChange&&this.props.onScrollPositionChange(),this.props.hasOwnProperty("suppressDrag")&&this.inputFilter.setEnabled(!!this.props.suppressDrag)}componentWillUnmount(){this.isUnmounting=!0;const e=this.handleEvent;this.resizeSubscription.cancel(),window.PointerEvent||(window.removeEventListener("mousemove",e),window.removeEventListener("mouseleave",e),window.removeEventListener("mouseup",e)),window.removeEventListener("pointermove",e),window.removeEventListener("touchmove",e),window.removeEventListener("pointerup",e),window.removeEventListener("touchend",e),window.removeEventListener("touchcancel",e),this.innerWrapper.removeEventListener("wheel",this.handleWheelEvent,!0),this.props.thumbScrollingOnly?this.innerWrapper.removeEventListener("click",this.handleClick):(this.innerWrapper.removeEventListener("mousedown",e),this.innerWrapper.removeEventListener("pointerdown",e),this.innerWrapper.removeEventListener("touchstart",e))}componentDidUpdate(){if(this.props.waitToUpdate||this.handleExternalChange(),this.prevSuppressDrag!==this.props.suppressDrag&&(this.inputFilter.setEnabled(!!this.props.suppressDrag),this.props.suppressDrag&&(this.manuallyMoved=!1),this.prevSuppressDrag=!!this.props.suppressDrag),!this.horizontal.animation&&!this.vertical.animation)return;const e={};for(const t in this.state){const n=t;this[n].animation&&(this[n].animation.isAnimating?e[ps(n)]=this[n].animation.getUpdatedValue():this[n].animation=null)}Object.keys(e).length>0&&window.requestAnimationFrame((()=>{this.innerWrapper&&this.scrollTo(e)}))}scrollTo(e){if(!e.hasOwnProperty(hs.x)&&!e.hasOwnProperty(hs.y))return;const t={};for(const n of this.getVisibleAxes(e)){const i=ms(n),s=gs[i].scrollOffset,r=e[n];if(void 0!==r){if(isNaN(r))return;this.innerWrapper[s]=Math.max(Math.min(1,r)*this.state[i].childLength,0),t[i]=Object.assign(Object.assign({},this.state[i]),{scrollOffset:this.innerWrapper[s]})}}this.setState(t)}animatedScrollTo(e,t){if(e.hasOwnProperty(hs.x)||e.hasOwnProperty(hs.y))for(const n of this.getVisibleAxes(e)){const i=ms(n),s=gs[i].scrollOffset;this[i].animation=new ys.Z({duration:t||ds,startValue:this.innerWrapper[s]/this.state[i].childLength,endValue:Math.max(0,Math.min(1,e[n]))})}}setScrollCenter(e){if(!(e&&e.compareDocumentPosition(this.innerWrapper)&Node.DOCUMENT_POSITION_CONTAINS))return;this.scrollCenter=e;const t={},n={};for(const i of this.getVisibleAxes(this.state)){const s=ps(i);t[s]=e[gs[i].positionOffset]+e[gs[i].offsetLength]/2;let r=e;for(;r.parentElement&&r!==this.innerWrapper;)r=r.parentElement,t[s]+=r[gs[i].positionOffset];const o=this.outerWrapper.parentElement[gs[i].offsetLength];n[s]=(t[s]-o/2)/this.state[i].childLength}Object.keys(n).length>0&&this.animatedScrollTo(n)}getVisibleAxes(e){const t=[];for(const n in e)(e[n]||"number"==typeof e[n])&&(n in hs&&this.state[ms(n)].isVisible||n in us&&this.state[n].isVisible)&&t.push(n);return t}handleDragStart(){delete this.scrollCenter,this.hasManuallyMoved()}handlePressStart(){this.horizontal.dragStartScroll=this.innerWrapper.scrollLeft,this.vertical.dragStartScroll=this.innerWrapper.scrollTop}handlePressMove(e){const t={};for(const n of this.getVisibleAxes(e)){const i=ms(n);t[n]=(e[n]+this[i].dragStartScroll)/this.state[i].childLength}this.scrollTo(t)}handleWheelEvent(e){this.props.singleScrollDirection===us.horizontal&&0===e.deltaX&&0!==e.deltaY?(this.handlePressStart(),this.handlePressMove({x:e.deltaY,y:0})):(this.hasManuallyMoved(),this.handleExternalChange())}handleClick(e){this.props.handleClick&&this.props.handleClick(e)}toggleVisibility(e){return t=>{const n=Object.assign(Object.assign({},this.state[e]),{isVisible:t});if(cs(this.state[e],n)){const t={};t[e]=n,this.setState(t),this.props.onScrollbarVisibilityChange&&this.props.onScrollbarVisibilityChange()}}}toggleScrollPosition(e){return t=>{this.scrollPosition[e]=t,this.props.onScrollPositionChange&&this.props.onScrollPositionChange(t)}}handleDragEnd(e,t){for(const n of this.getVisibleAxes(e)){const i=ms(n),s=e[n]/t,r=Math.min(ds,Math.abs(ds*s)),o=this.innerWrapper[gs[i].scrollOffset],a=s*r/2;this[i].animation=new ys.Z({duration:r,startValue:o/this.state[i].childLength,endValue:Math.max(0,Math.min((o+a)/this.state[i].childLength,1)),easingFunction:Ss.hl})}this.setState({})}handleExternalChange(e){if(this.isUnmounting)return;this.scrollCenter&&e&&e===as.g_.RESIZE&&this.setScrollCenter(this.scrollCenter);const t={};for(const e in this.state){const n=e,i=gs[n].clientLength,s=Object.assign(Object.assign({},this.state[n]),{wrapperLength:Number(this.innerWrapper&&this.innerWrapper[i])||1,childLength:Number(this.firstChild&&this.firstChild[i])||1,scrollOffset:this.innerWrapper&&this.innerWrapper[gs[n].scrollOffset]});cs(this.state[n],s)&&(t[n]=s)}Object.keys(t).length>0&&this.debouncedSetState(t)}hasManuallyMoved(){this.manuallyMoved=!0,this.props.onScrolled&&this.props.onScrolled()}resetManuallyMoved(){this.manuallyMoved=!1}renderScrollbar(e,t){const{forceHidden:n}=this.props,{wrapperLength:i,childLength:s,scrollOffset:r}=t;return(0,l.jsx)(Scrollbar,{direction:e,ref:e=>{this.horizontal.scrollbar=e},wrapperLength:i,childLength:s,scrollOffset:r,scrollTo:this.scrollTo,onVisibilityChange:this.toggleVisibility(e),onScrollPositionChange:this.toggleScrollPosition(e),forceHidden:n,onThumbDrag:this.hasManuallyMoved})}render(){const{scrollbarHeight:e,singleScrollDirection:t,name:n,children:i}=this.props,s={maxHeight:e||""},r=t||`${us.vertical} ${us.horizontal}`;return(0,l.jsxs)("div",Object.assign({className:d()("outerScrollbarWrapper",r,`scrollbar-${n}`),ref:e=>{this.outerWrapper=e},style:s},{children:[(0,l.jsx)("div",Object.assign({className:"innerScrollbarWrapper",ref:e=>{this.innerWrapper=e}},{children:(0,l.jsx)("div",Object.assign({className:"paddingScrollbarWrapper"},{children:i}))})),t!==us.vertical&&this.renderScrollbar(us.horizontal,this.state.horizontal),t!==us.horizontal&&this.renderScrollbar(us.vertical,this.state.vertical)]}))}}var Wa=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let za=class TextInput extends r.Component{constructor(e){super(e),this.touchDevice=(0,ts.Jm)(),this.isUnmounting=!1,this.handleOutsideClick=e=>{if(!this.state.editing||!this.input.current)return;const t=this.getTextString(this.input.current.value,this.props.defaultText);this.stopEditing(t,!0)},this.stopEditing=(e,t=!0)=>{this.setState({editing:!1});const n=this.props.validator?this.props.validator(e):this.props.text!==e;t&&n?(this.setState({currentText:e}),this.props.onEdited&&this.props.onEdited(e)):this.props.onCancelEditing&&this.props.onCancelEditing()},this.stopPropagation=e=>{e.stopPropagation()},this.onBlur=()=>{this.input.current&&this.context.engine.broadcast(new Bs.SN(this.input.current,!1))},this.onFocus=()=>{this.input.current&&this.context.engine.broadcast(new Bs.SN(this.input.current,!0))},this.startEditing=e=>{clearTimeout(this.startEditingTimeout),this.startEditingTimeout=window.setTimeout((()=>{if(!this.input.current||this.isUnmounting)return;e&&e.stopPropagation();const{onStartEditing:t,autoSelect:n,defaultText:i}=this.props,{currentText:s}=this.state;this.setState({editing:!0}),t&&t(),this.input.current.focus(),(n||i&&this.input.current.select&&s===i)&&this.input.current.select()}),0)},this.onKeyPress=e=>{var t;if(e.stopPropagation(),this.props.onKeyPress&&this.props.onKeyPress(e))return;const n=e.which||e.keyCode;if(!("keydown"===e.type&&n!==Yr.R.TAB||n!==Yr.R.RETURN&&n!==Yr.R.TAB||e.shiftKey)){e.preventDefault(),null===(t=this.input.current)||void 0===t||t.blur();const n=this.getTextString(e.target.value,this.props.defaultText);this.stopEditing(n)}},this.onInput=e=>{const t=e.target.value;this.setState({currentText:t}),this.props.validator&&this.props.validator(t)&&this.setState({lastValidText:t}),this.props.onInput&&this.props.onInput(t)},this.state={editing:!1,currentText:this.props.text,lastValidText:this.props.text},this.input=(0,r.createRef)()}componentDidMount(){this.input.current&&(this.props.closeOnFocusOut&&this.input.current.addEventListener("focusout",this.handleOutsideClick),(this.props.editing||this.props.autofocus)&&this.startEditing())}componentWillUnmount(){this.isUnmounting=!0,this.input.current&&(this.props.closeOnFocusOut&&this.input.current.removeEventListener("focusout",this.handleOutsideClick),this.input.current.blur())}UNSAFE_componentWillReceiveProps(e){if(e.editing&&!this.props.editing&&this.startEditing(),e.text!==this.props.text){const t=this.getTextString(e.text,e.defaultText);this.setState({currentText:t})}}componentDidUpdate(e,t){this.input.current&&(!t.editing&&this.state.editing?this.input.current.focus():t.editing&&!this.state.editing&&this.input.current.blur())}getTextString(e,t){return this.props.validator?this.props.validator(e)?e:this.state.lastValidText:""===e&&void 0!==t?t:e}setCurrentText(e){this.setState({currentText:e}),this.focusInput(),this.props.onEdited&&this.props.onEdited(e)}getCurrentText(){return this.state.currentText}focusInput(){this.input.current&&this.input.current.focus()}getFractionalCounter(){if(this.props.maxLength&&this.props.fractionalCounter)return`${this.state.currentText.length}/${this.props.maxLength}`}render(){const{editing:e,currentText:t}=this.state,{hint:n,isDisabled:i,placeholder:s,noFocusedPlaceholder:o,clickToEdit:a,maxLength:c,tabIndex:u,textarea:h,readOnlyText:p,autocapitalize:m,fractionalCounter:g,showUnderline:f,className:v}=this.props,b=!(t||!s||e&&o),y=b?s:void 0,S=!1!==a?this.startEditing:void 0,E=(0,l.jsx)("div",Object.assign({className:"current-text",onClick:S,"data-hint":n},{children:t||s||""}));return(0,l.jsxs)("div",Object.assign({className:d()("modifiable-text",v,{editing:e,"fractional-counter":g,default:!t,"has-hint":!!n,"has-placeholder":b}),"data-hint":n,"data-fractional-counter":this.getFractionalCounter()},{children:[h?(0,l.jsx)(Scrollbars,Object.assign({name:"text-input",singleScrollDirection:us.vertical,forceHidden:!1},{children:E})):E,(0,r.createElement)(h?"textarea":"input",{ref:this.input,className:d()("inputDiv",{editing:e}),type:"text",value:t,placeholder:y,maxLength:c,onInput:this.onInput,onClick:this.props.propagateMouseEvent?void 0:this.stopPropagation,onKeyPress:this.onKeyPress,disabled:i,readOnly:this.props.readOnlyMode,onKeyDown:this.onKeyPress,onKeyUp:this.stopPropagation,tabIndex:u,autoCapitalize:m,onBlur:this.touchDevice?this.onBlur:void 0,onFocus:this.touchDevice?this.onFocus:void 0}),p&&(0,l.jsx)("div",Object.assign({className:"read-only-text"},{children:p})),f&&(0,l.jsx)("div",{className:"editable-line"})]}))}};za.contextType=m.I,za=Wa([_n.Z],za);const Ka=za;var Ya=n(91183),qa=new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");const $a=e=>(e=>qa.test(e))(e)&&/^https?:\/\//.test(e);function Za(e,t,n){const i=Math.ceil(t/2);return n(e)?t<=1?e:Za(e+i,i,n):0===e?-1:Za(Math.max(0,e-i),i,n)}function Qa(e,t){if(e<0)return-1;if(t(e))return e;const n=Math.ceil(e/2);return Za(e-n,n,t)}const{MATTERTAGS:Xa}=g.Z.WORKSHOP;class EditableDescription extends r.Component{constructor(e){super(e),this.textParser=new ja.v({links:!0}),this.inputDiv=(0,r.createRef)(),this.getInputDiv=()=>this.inputDiv.current,this.hasTextSelected=()=>this.range&&this.range.startOffset!==this.range.endOffset,this.onSelectionChange=()=>{const e=this.getCurrentSelection();e&&(this.range=e.cloneRange())},this.addFauxHighlight=()=>{this.execCommand("backColor","#ff315840")},this.removeFauxHighlight=()=>{this.execCommand("backColor","transparent")},this.prepareLinkSelection=()=>{const e=this.getAnchorFromSelection();let t=null;const n=window.getSelection();return n&&(e||this.range||!this.inputDiv.current?(this.addFauxHighlight(),e||(t=this.range?this.range.toString():n.toString())):(this.inputDiv.current.focus(),n.selectAllChildren(this.inputDiv.current),n.collapseToEnd(),this.range=n.getRangeAt(0),t=this.range.toString())),e||(t||"")},this.onMouseDown=e=>{e.stopPropagation(),this.removeFauxHighlight(),this.range=null},this.onKeyDown=e=>{const t=e.which||e.keyCode;return e.stopPropagation(),t===Yr.R.ESCAPE?this.props.onNavigationKey(e):t===Yr.R.RETURN||t===Yr.R.TAB?(e.shiftKey||(e.preventDefault(),this.finalizeInput()),this.props.onNavigationKey(e)):void 0},this.onKeyPress=e=>{const{maxLength:t}=this.props;if(t&&this.range&&this.inputDiv&&this.inputDiv.current){const[n,i]=this.textParser.getHTMLWithoutSelection(this.inputDiv.current,this.range),s=this.getTextInsertion(e,n,i);this.textParser.serializeHTMLToMarkdown(`${n}${s}${i}`).length>t&&e.preventDefault()}},this.onInput=()=>{this.props.updateLength()},this.onPaste=e=>{e.preventDefault();const{maxLength:t}=this.props,n=(e.clipboardData||window.clipboardData).getData("text/plain");if(t){if(this.inputDiv.current&&this.range){const[e,i]=this.textParser.getHTMLWithoutSelection(this.inputDiv.current,this.range),s=s=>this.textParser.serializeHTMLToMarkdown(`${e}${n.slice(0,s)}${i}`).length<=t,r=Qa(n.length,s);if(r>=0){const e=n.slice(0,r);document.execCommand("insertHTML",!1,e)}}}else document.execCommand("insertHTML",!1,n)},this.onFocus=e=>{this.inputDiv.current&&(this.context.messageBus.broadcast(new Bs.SN(this.inputDiv.current,!0)),this.props.onFocus&&this.props.onFocus())},this.onBlur=()=>{this.inputDiv.current&&(this.context.messageBus.broadcast(new Bs.SN(this.inputDiv.current,!1)),this.props.onBlur&&this.props.onBlur(),this.finalizeInput())};const t=new Ya.gm((()=>({})),(e=>document.addEventListener("selectionchange",e)),(e=>document.removeEventListener("selectionchange",e)));this.selectionSubscription=t.createSubscription(this.onSelectionChange)}componentDidMount(){const{description:e,onLinkClick:t}=this.props,n=this.getInputDiv();this.textParser.deserialize(e,!0,t).forEach((e=>{null==n||n.appendChild(e)})),this.selectionSubscription.renew(),setTimeout((()=>{this.props.updateLength()}),0)}componentDidUpdate(e){e.description!==this.props.description&&this.props.updateLength()}componentWillUnmount(){var e;this.selectionSubscription.cancel(),null===(e=this.inputDiv.current)||void 0===e||e.blur()}shouldComponentUpdate(){return!1}getCurrentSelection(){const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0);if(this.inputDiv.current&&(this.inputDiv.current===t.commonAncestorContainer||this.inputDiv.current.compareDocumentPosition(t.commonAncestorContainer)&Node.DOCUMENT_POSITION_CONTAINED_BY))return t}return null}linkify(e,t){const{descriptionLength:n,maxLength:i}=this.props,s=`link_${Date.now()}`,r=this.createAnchor(e,t);r.id=s;const o=this.textParser.serializeHTMLToMarkdown(r.outerHTML);if(i&&o.length+n>i)return this.context.locale.t(Xa.LINK_EDITOR_MAX_LENGTH_TIP);this.execCommand("backColor","transparent"),this.execCommand("insertHTML",r.outerHTML);const a=document.getElementById(s);return a&&(a.onclick=this.props.onLinkClick),!1}unlink(e){const t=e.parentNode,n=e.textContent;t&&(t.removeChild(e),n&&!$a(n)&&this.execCommand("insertText",n))}updateLink(e,t,n){const{descriptionLength:i,maxLength:s,updateLength:r}=this.props,{serializeHTMLToMarkdown:o}=this.textParser,a=this.createAnchor(t,n),l=o(a.outerHTML),c=o(e.outerHTML);return i+(l.length-c.length)>s?this.context.locale.t(Xa.LINK_EDITOR_MAX_LENGTH_TIP):(e.href=a.href,e.text=a.text,e.setAttribute("data-value",n),r(),!1)}createAnchor(e,t){const n=document.createElement("a");return n.href=t,n.text=this.textParser.sanitizeText(e),n.classList.add(ja.o.LINK),n.setAttribute("data-value",t),n}applyRange(){if(this.range){const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(this.range))}}execCommand(e,t){this.range&&(this.applyRange(),document.execCommand(e,!1,t),this.onSelectionChange())}getAnchorFromSelection(){const e=this.getCurrentSelection();if(!e)return null;let t=e.commonAncestorContainer;for(;t&&"A"!==t.nodeName;){if(t===this.inputDiv.current)return null;t=t.parentNode}return t||null}finalizeInput(){var e;this.props.onFinalizeInput(),null===(e=this.inputDiv.current)||void 0===e||e.blur()}getTextInsertion(e,t,n){if((e.which||e.keyCode)!==Yr.R.RETURN)return e.key;const i=t.slice(-1),s=n.slice(0,1);return"\n"===i||"\n"===s?"\n":"\n\n"}render(){return(0,l.jsx)("div",{ref:this.inputDiv,className:"inputDiv","data-placeholder":this.props.placeholder,onMouseDown:this.onMouseDown,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onPaste:this.onPaste,contentEditable:!0,onInput:this.onInput,onFocus:this.onFocus,onBlur:this.onBlur})}}EditableDescription.contextType=m.I;var Ja=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let el=class TextInputBox extends r.Component{constructor(e){super(e),this.onInput=e=>{if(this.props.onInput){const t=e.target;this.props.onInput(t.value)}},this.onKeyPress=e=>{e.stopPropagation();const t=e.which||e.keyCode,n=[Yr.R.TAB,Yr.R.RETURN,Yr.R.ESCAPE];if("keydown"===e.type&&!n.includes(t))return!1;const i=e.target;switch(this.props.maxLength&&i.value.length>this.props.maxLength&&e.preventDefault(),t){case Yr.R.ESCAPE:this.props.onCancel&&this.props.onCancel();break;case Yr.R.TAB:case Yr.R.RETURN:this.props.onBlur||e.shiftKey||(e.preventDefault(),this.blur())}return!1},this.stopPropagation=e=>e.stopPropagation(),this.onFocus=e=>{this.context.messageBus.broadcast(new Bs.SN(this.input,!0)),this.props.onFocus&&this.props.onFocus(e)},this.onBlur=e=>{this.context.messageBus.broadcast(new Bs.SN(this.input,!1));const t=e.target.value,{onBlur:n,onDone:i}=this.props;n?n(t):i&&i(t)},this.setRef=e=>this.input=e,this.state={currentText:e.text}}componentWillUnmount(){this.input&&this.input.blur()}componentDidMount(){this.props.focusOnMount&&this.focus()}UNSAFE_componentWillReceiveProps(e){e.text!==this.props.text&&this.setState({currentText:e.text})}getText(){return this.input?this.input.value:""}focus(){this.input.focus()}blur(){this.input.blur()}scrollIntoView(e){this.input.scrollIntoView(e)}render(){const{placeholder:e,tabIndex:t,maxLength:n,type:i,className:s}=this.props,{currentText:r}=this.state;return(0,l.jsx)("div",Object.assign({className:d()("text-field",s)},{children:(0,l.jsx)("input",{ref:this.setRef,className:"text-input-box",type:i||"text",value:r,placeholder:e,maxLength:n,onInput:this.onInput,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyPress,onKeyUp:this.stopPropagation,onBlur:this.onBlur,onFocus:this.onFocus,tabIndex:t})}))}};el.contextType=m.I,el=Ja([_n.Z],el);const tl=el,{MATTERTAGS:nl}=g.Z.WORKSHOP;class LinkEditor extends r.Component{constructor(e){super(e),this.elementRef=(0,r.createRef)(),this.urlInputRef=(0,r.createRef)(),this.textInputRef=(0,r.createRef)(),this.open=e=>{this.elementRef.current&&this.elementRef.current.classList.add("open"),this.focus(e.urlFocus)},this.close=()=>{this.urlInputRef.current&&this.urlInputRef.current.blur(),this.textInputRef.current&&this.textInputRef.current.blur(),this.setState({currentText:"",currentUrl:"",validUrl:!0,errorMessage:void 0}),this.elementRef.current&&this.elementRef.current.classList.remove("open")},this.onEditedUrl=e=>{const{validUrl:t,currentText:n}=this.state;if(!t)return;const i=""!==n?n:e,s=this.props.onSaveLink(i,e);this.setState({errorMessage:s})},this.onInputUrl=e=>{this.setState({validUrl:$a(e),currentUrl:e,errorMessage:void 0})},this.onEditedText=e=>{this.focus(!0)},this.onInputText=e=>{this.setState({currentText:e,errorMessage:void 0})},this.onApply=e=>{this.state.currentUrl&&this.onEditedUrl(this.state.currentUrl)},this.onClose=e=>{this.close(),this.props.onCancel()},this.onPreviewUrl=()=>{this.state.validUrl&&window.open(this.state.currentUrl,"_blank")},this.stopPropagation=e=>{e.stopPropagation()},this.state={currentUrl:e.linkUrl,currentText:e.linkText,validUrl:!0,errorMessage:void 0}}componentDidMount(){this.context.messageBus.subscribe(OpenLinkEditorMessage,this.open),this.context.messageBus.subscribe(CloseLinkEditorMessage,this.close)}componentWillUnmount(){this.close(),this.context.messageBus.unsubscribe(OpenLinkEditorMessage,this.open),this.context.messageBus.unsubscribe(CloseLinkEditorMessage,this.close)}componentDidUpdate(e){this.props.linkUrl!==e.linkUrl&&this.setState({currentUrl:this.props.linkUrl}),this.props.linkText!==e.linkText&&this.setState({currentText:this.props.linkText})}focus(e=!1){e?this.urlInputRef.current&&this.urlInputRef.current.focus():this.textInputRef.current&&this.textInputRef.current.focus()}renderButtons(){const{locale:e}=this.context,{validUrl:t,currentUrl:n}=this.state,{onRemoveLink:i,linkText:s,linkUrl:r}=this.props,o=""!==s&&""!==r,a=!n||!t?Ts.BN.DISABLED:Ts.BN.ENABLED,c=e.t(nl.LINK_EDITOR_APPLY_CTA),d=e.t(nl.LINK_EDITOR_REMOVE_TIP);return(0,l.jsxs)("div",Object.assign({className:"popover-footer"},{children:[this.renderValidationMessage(),o&&(0,l.jsx)(Es.hU,{iconClass:"icon-delete",buttonStyle:Es.Dd.CLEAR,tooltipMsg:d,tooltipPosition:Vo.lZ.UP,onClick:i}),(0,l.jsx)(Ts.zx,Object.assign({className:"button-inline",buttonStyle:Ts.ZJ.CLEAR,buttonSize:Ts.qE.SMALL,buttonState:a,onClick:this.onApply},{children:c}))]}))}renderValidationMessage(){const{locale:e}=this.context,{linkText:t,linkUrl:n}=this.props,{validUrl:i,currentUrl:s,errorMessage:r}=this.state,o=""===t&&""===n&&""===s;return r?(0,l.jsx)("div",Object.assign({className:"popover-message popover-message-error"},{children:r})):!i&&s?(0,l.jsx)("div",Object.assign({className:"popover-message popover-message-error"},{children:e.t(nl.LINK_EDITOR_INVALID_TIP)})):(0,l.jsx)("div",Object.assign({className:"popover-message"},{children:o&&e.t(nl.LINK_EDITOR_TIP_TEXT)}))}render(){const{locale:e}=this.context,{validUrl:t,currentText:n,currentUrl:i}=this.state,s=e.t(nl.LINK_EDITOR_TEXT_LABEL),r=e.t(nl.LINK_EDITOR_URL_LABEL),o=e.t(nl.LINK_EDITOR_PREVIEW_TIP);return(0,l.jsxs)("div",Object.assign({ref:this.elementRef,className:"annotation-popup link-editor",onClick:this.stopPropagation},{children:[(0,l.jsxs)("div",Object.assign({className:"popover-header"},{children:[(0,l.jsx)("div",Object.assign({className:"popover-label"},{children:s})),(0,l.jsx)(An.P,{buttonStyle:An.A.LIGHT,onClose:this.onClose})]})),(0,l.jsx)(tl,{ref:this.textInputRef,text:n,className:"text-field-dark",onBlur:this.onEditedText,onInput:this.onInputText}),(0,l.jsxs)("div",Object.assign({className:"url-field"},{children:[(0,l.jsx)("div",Object.assign({className:"popover-label"},{children:r})),(0,l.jsx)(tl,{ref:this.urlInputRef,text:i,type:"url",className:"text-field-dark",placeholder:"https://",onBlur:this.onEditedUrl,onInput:this.onInputUrl}),t&&i&&(0,l.jsx)(Es.hU,{className:"preview-link",iconClass:"icon-ext-link",buttonStyle:Es.Dd.PLAIN,tooltipMsg:o,tooltipPosition:Vo.lZ.UP,onClick:this.onPreviewUrl})]})),this.renderButtons()]}))}}LinkEditor.contextType=m.I;var il=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{MATTERTAGS:sl}=g.Z.WORKSHOP;let rl=class EditableBillboardText extends r.Component{constructor(e){super(e),this.textParser=new ja.v({links:!0}),this.editableDescriptionRef=(0,r.createRef)(),this.linkElement=null,this.onLabelEdit=e=>{const{manager:t,id:n,onEdited:i}=this.props;t.setLabel(n,e).then(i)},this.onLabelKeyPress=e=>{if(e.keyCode===Yr.R.ESCAPE)return this.props.onNavigationKey(e);if(e.stopPropagation(),e.keyCode===Yr.R.TAB){const e=this.editableDescriptionRef.current;if(e){const t=e.getInputDiv();t&&t.focus()}}return!1},this.updateDescriptionLength=()=>{const e=this.editableDescriptionRef.current;if(!e)return;const t=e.getInputDiv();if(!t)return;const n=this.textParser.serialize(t),i=n.length;this.props.onDescriptionInput((0,f.Yv)(n)),this.setState({descriptionLength:i})},this.onDescriptionEdited=()=>{const e=this.editableDescriptionRef.current;if(!e)return;const t=e.getInputDiv();if(t){const{manager:e,id:n,onEdited:i}=this.props,s=this.textParser.serialize(t);e.setDescription(n,s).then(i)}},this.onLabelFocus=()=>{this.closePopover()},this.onDescriptionFocus=()=>{this.setState({editingDescription:!0})},this.onDescriptionBlur=()=>{this.setState({editingDescription:!1})},this.closePopover=()=>{this.setState({linkUrl:"",linkText:""}),this.linkElement=null,this.props.onClosePopover()},this.linkClicked=e=>{if(e.preventDefault(),this.props.linkEditorOpen)this.closePopover();else{e.stopPropagation(),this.linkElement=e.target;const{href:t,text:n}=this.linkElement;this.setState({linkUrl:t,linkText:n}),this.props.onClickLink()}},this.onRemoveLink=()=>{this.onSaveLink("","")},this.onSaveLink=(e,t)=>{let n;const i=this.editableDescriptionRef.current;if(this.linkElement&&i?""!==t?n=i.updateLink(this.linkElement,e,t):i.unlink(this.linkElement):i&&(n=i.linkify(e,t)),n&&"string"==typeof n)return n;this.closePopover(),this.onDescriptionEdited()},this.state={editingDescription:!1,descriptionLength:0,linkUrl:"",linkText:""}}prepareNewLinkSelection(){const e=this.editableDescriptionRef.current;if(!e)return!1;const t=e.prepareLinkSelection();let n,i;return"string"==typeof t?(this.linkElement=null,n="",i=t):(this.linkElement=t,n=t.href,i=t.text),this.setState({linkUrl:n,linkText:i}),""!==i&&""===n}render(){const{locale:e}=this.context,{linkUrl:t,linkText:n,editingDescription:i,descriptionLength:s}=this.state,{label:r,linkEditorOpen:o,onNavigationKey:a,description:c}=this.props,u=`${s}/${Oa.Us}`,h=e.t(sl.TITLE_PLACEHOLDER),p=e.t(sl.DESCRIPTION_PLACEHOLDER);return(0,l.jsxs)("div",Object.assign({className:"editable-text-content"},{children:[(0,l.jsx)("div",Object.assign({className:"mattertag-label-editor"},{children:(0,l.jsx)(Ka,{text:r,placeholder:h,onEdited:this.onLabelEdit,onInput:this.onLabelEdit,onKeyPress:this.onLabelKeyPress,maxLength:60,closeOnFocusOut:!0,textarea:!0,fractionalCounter:!0,onStartEditing:this.onLabelFocus})})),(0,l.jsx)("div",Object.assign({className:"editable-tag-description"},{children:(0,l.jsx)("div",Object.assign({className:d()("modifiable-text fractional-counter",{editing:i||o,empty:0===s}),"data-fractional-counter":u},{children:(0,l.jsx)(EditableDescription,{ref:this.editableDescriptionRef,maxLength:Oa.Us,descriptionLength:s,placeholder:p,description:c,updateLength:this.updateDescriptionLength,onFinalizeInput:this.onDescriptionEdited,onNavigationKey:a,onLinkClick:this.linkClicked,onFocus:this.onDescriptionFocus,onBlur:this.onDescriptionBlur})}))})),(0,l.jsx)(LinkEditor,{linkUrl:t,linkText:n,onCancel:this.closePopover,onSaveLink:this.onSaveLink,onRemoveLink:this.onRemoveLink})]}))}};rl.contextType=m.I,rl=il([_n.A],rl);var ol=function(){return(ol=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function al(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}Object.create;Object.create;var ll=function(){return(ll=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.create;function cl(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dl(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function ul(e,t,n){if(n||2===arguments.length)for(var i,s=0,r=t.length;s<r;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;var hl=function(e){return(Array.isArray(e)?e:[e]).filter((function(e){return!!e})).map((function(e){return"mdc-theme--"+e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}))},pl=r.forwardRef((function(e,t){var n=e.tag,i=void 0===n?"div":n,s=(e.theme,e.element),o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(e,["tag","theme","element"]),a=s?s.props(o):o,l=s?ml(t,s.setRef):t;return r.createElement(i,ll({},a,{ref:l}))})),ml=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n,i;try{for(var s=cl(e),r=s.next();!r.done;r=s.next()){var o=r.value;"function"==typeof o?o(t):o&&"current"in o&&(o.current=t)}}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}},gl=function(e,t){"function"==typeof e?e(t):e&&"current"in e&&(e.current=t)};function fl(e){var t=r.forwardRef(e),n=function(e,t){return r.createElement(r.Fragment,null)};return n.displayName=e.constructor.name||"RMWCComponent",t.displayName=n.displayName,t}var vl={blur:"onBlur",cancel:"onCancel",click:"onClick",close:"onClose",contextmenu:"onContextMenu",copy:"onCopy",cut:"onCut",auxclick:"onAuxClick",doubleclick:"onDoubleClick",dragend:"onDragEnd",dragstart:"onDragStart",drop:"onDrop",focus:"onFocus",input:"onInput",invalid:"onInvalid",keydown:"onKeyDown",keypress:"onKeyPress",keyup:"onKeyUp",mousedown:"onMouseDown",mouseup:"onMouseUp",paste:"onPaste",pause:"onPause",play:"onPlay",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerup:"onPointerUp",ratechange:"onRateChange",reset:"onReset",seeked:"onSeeked",submit:"onSubmit",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchstart:"onTouchStart",volumechange:"onVolumeChange",abort:"onAbort",animationend:"onAnimationEnd",animationiteration:"onAnimationIteration",animationstart:"onAnimationStart",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",drag:"onDrag",dragenter:"onDragEnter",dragexit:"onDragExit",dragleave:"onDragLeave",dragover:"onDragOver",durationchange:"onDurationChange",emptied:"onEmptied",encrypted:"onEncrypted",ended:"onEnded",error:"onError",gotpointercapture:"onGotPointerCapture",load:"onLoad",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetadata",loadstart:"onLoadStart",lostpointercapture:"onLostPointerCapture",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseover:"onMouseOver",playing:"onPlaying",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",progress:"onProgress",scroll:"onScroll",seeking:"onSeeking",stalled:"onStalled",suspend:"onSuspend",timeupdate:"onTimeUpdate",toggle:"onToggle",touchmove:"onTouchMove",transitionend:"onTransitionEnd",waiting:"onWaiting",wheel:"onWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",change:"onChange",select:"onSelect",beforeinput:"onBeforeInput",compositionend:"onCompositionEnd",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate"},bl=function(e){return vl[e]||e},yl=function(){function e(e){this._classes=new Set,this._events={},this._style={},this._props={},this._ref=null,this._onChange=null,this._onChange=e,this.onChange=this.onChange.bind(this),this.addClass=this.addClass.bind(this),this.removeClass=this.removeClass.bind(this),this.hasClass=this.hasClass.bind(this),this.setProp=this.setProp.bind(this),this.getProp=this.getProp.bind(this),this.removeProp=this.removeProp.bind(this),this.setStyle=this.setStyle.bind(this),this.addEventListener=this.addEventListener.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.setRef=this.setRef.bind(this)}return e.prototype.onChange=function(){this._onChange&&this._onChange()},e.prototype.destroy=function(){var e=this;this._onChange=null,this._events={},this._style={},this._props={},this._classes=new Set,setTimeout((function(){e._ref=null}))},e.prototype.addClass=function(e){this._classes.has(e)||(this._classes.add(e),this.onChange())},e.prototype.removeClass=function(e){this._classes.has(e)&&(this._classes.delete(e),this.onChange())},e.prototype.hasClass=function(e){return this._classes.has(e)},e.prototype.setProp=function(e,t,n){void 0===n&&(n=!1),this._props[e]!==t&&(this._props[e]=t,!n&&this.onChange())},e.prototype.getProp=function(e){return this._props[e]},e.prototype.removeProp=function(e){void 0!==this._props[e]&&(delete this._props[e],this.onChange())},e.prototype.props=function(e){var t=this,n=e.className,i=void 0===n?"":n,s=e.style,r=void 0===s?{}:s,o=Object.entries(e).reduce((function(e,n){var i=dl(n,2),s=i[0],r=i[1],o=t._events[s];if("function"==typeof r&&"function"==typeof o){e[s]=function(e){return o(e),r(e)}}return e}),ll({},this._events)),a=d()(i,ul([],dl(this._classes))),l=ll(ll({},this._style),r);return ll(ll(ll(ll({},e),this._props),o),{style:l,className:a})},e.prototype.setStyle=function(e,t){e=e.startsWith("--")?e:e.replace(/(-[a-z])/g,(function(e){return e.toUpperCase().replace("-","")})),this._style[e]!==t&&(this._style[e]=t,this.onChange())},e.prototype.addEventListener=function(e,t){var n=bl(e);this._events[n]!==t&&(this._events[n]=t,this.onChange())},e.prototype.removeEventListener=function(e,t){var n=bl(e);this._events[n]&&(delete this._events[n],this.onChange())},e.prototype.setRef=function(e){e&&(this._ref=e)},Object.defineProperty(e.prototype,"ref",{get:function(){return this._ref},enumerable:!1,configurable:!0}),e}(),Sl=function(e){return function(t,n,i){var s;void 0===i&&(i=!1),s=new CustomEvent(t,{detail:n,bubbles:i}),Object.defineProperty(s,"target",{value:n,writable:!1}),Object.defineProperty(s,"currentTarget",{value:n,writable:!1});var r=t;return e[r]&&e[r](s),s}},El={bottom:0,height:0,left:0,right:0,top:0,width:0},Tl=function(e,t){return(Tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Ol=function(){return(Ol=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};var _l={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}},Al={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function wl(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}var Nl=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}();var Pl={ACTIVE:"mdc-slider--active",DISABLED:"mdc-slider--disabled",DISCRETE:"mdc-slider--discrete",FOCUS:"mdc-slider--focus",HAS_TRACK_MARKER:"mdc-slider--display-markers",IN_TRANSIT:"mdc-slider--in-transit",IS_DISCRETE:"mdc-slider--discrete"},Il={ARIA_DISABLED:"aria-disabled",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUENOW:"aria-valuenow",CHANGE_EVENT:"MDCSlider:change",INPUT_EVENT:"MDCSlider:input",PIN_VALUE_MARKER_SELECTOR:".mdc-slider__pin-value-marker",STEP_DATA_ATTR:"data-step",THUMB_CONTAINER_SELECTOR:".mdc-slider__thumb-container",TRACK_MARKER_CONTAINER_SELECTOR:".mdc-slider__track-marker-container",TRACK_SELECTOR:".mdc-slider__track"},kl={PAGE_FACTOR:4},Cl=["mousedown","pointerdown","touchstart"],Ll=["mouseup","pointerup","touchend"],Ml={mousedown:"mousemove",pointerdown:"pointermove",touchstart:"touchmove"},Dl="ArrowDown",Rl="ArrowLeft",xl="ArrowRight",jl="ArrowUp",Ul="End",Hl="Home",Fl="PageDown",Bl="PageUp",Vl=function(e){function t(n){var i=e.call(this,Ol({},t.defaultAdapter,n))||this;return i.savedTabIndex_=NaN,i.active_=!1,i.inTransit_=!1,i.isDiscrete_=!1,i.hasTrackMarker_=!1,i.handlingThumbTargetEvt_=!1,i.min_=0,i.max_=100,i.step_=0,i.value_=0,i.disabled_=!1,i.preventFocusState_=!1,i.thumbContainerPointerHandler_=function(){return i.handlingThumbTargetEvt_=!0},i.interactionStartHandler_=function(e){return i.handleDown_(e)},i.keydownHandler_=function(e){return i.handleKeydown_(e)},i.focusHandler_=function(){return i.handleFocus_()},i.blurHandler_=function(){return i.handleBlur_()},i.resizeHandler_=function(){return i.layout()},i}return function(e,t){function n(){this.constructor=e}Tl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Pl},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Il},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return kl},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabIndex:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerThumbContainerInteractionHandler:function(){},deregisterThumbContainerInteractionHandler:function(){},registerBodyInteractionHandler:function(){},deregisterBodyInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},notifyInput:function(){},notifyChange:function(){},setThumbContainerStyleProperty:function(){},setTrackStyleProperty:function(){},setMarkerValue:function(){},setTrackMarkers:function(){},isRTL:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.isDiscrete_=this.adapter_.hasClass(Pl.IS_DISCRETE),this.hasTrackMarker_=this.adapter_.hasClass(Pl.HAS_TRACK_MARKER),Cl.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionStartHandler_),e.adapter_.registerThumbContainerInteractionHandler(t,e.thumbContainerPointerHandler_)})),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.registerResizeHandler(this.resizeHandler_),this.layout(),this.isDiscrete_&&0===this.getStep()&&(this.step_=1)},t.prototype.destroy=function(){var e=this;Cl.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionStartHandler_),e.adapter_.deregisterThumbContainerInteractionHandler(t,e.thumbContainerPointerHandler_)})),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.setupTrackMarker=function(){this.isDiscrete_&&this.hasTrackMarker_&&0!==this.getStep()&&this.adapter_.setTrackMarkers(this.getStep(),this.getMax(),this.getMin())},t.prototype.layout=function(){this.rect_=this.adapter_.computeBoundingRect(),this.updateUIForCurrentValue_()},t.prototype.getValue=function(){return this.value_},t.prototype.setValue=function(e){this.setValue_(e,!1)},t.prototype.getMax=function(){return this.max_},t.prototype.setMax=function(e){if(e<this.min_)throw new Error("Cannot set max to be less than the slider's minimum value");this.max_=e,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(Il.ARIA_VALUEMAX,String(this.max_)),this.setupTrackMarker()},t.prototype.getMin=function(){return this.min_},t.prototype.setMin=function(e){if(e>this.max_)throw new Error("Cannot set min to be greater than the slider's maximum value");this.min_=e,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(Il.ARIA_VALUEMIN,String(this.min_)),this.setupTrackMarker()},t.prototype.getStep=function(){return this.step_},t.prototype.setStep=function(e){if(e<0)throw new Error("Step cannot be set to a negative number");this.isDiscrete_&&("number"!=typeof e||e<1)&&(e=1),this.step_=e,this.setValue_(this.value_,!1,!0),this.setupTrackMarker()},t.prototype.isDisabled=function(){return this.disabled_},t.prototype.setDisabled=function(e){this.disabled_=e,this.toggleClass_(Pl.DISABLED,this.disabled_),this.disabled_?(this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.setAttribute(Il.ARIA_DISABLED,"true"),this.adapter_.removeAttribute("tabindex")):(this.adapter_.removeAttribute(Il.ARIA_DISABLED),isNaN(this.savedTabIndex_)||this.adapter_.setAttribute("tabindex",String(this.savedTabIndex_)))},t.prototype.handleDown_=function(e){var t=this;if(!this.disabled_){this.preventFocusState_=!0,this.setInTransit_(!this.handlingThumbTargetEvt_),this.handlingThumbTargetEvt_=!1,this.setActive_(!0);var n=function(e){t.handleMove_(e)},i=Ml[e.type],s=function(){t.handleUp_(),t.adapter_.deregisterBodyInteractionHandler(i,n),Ll.forEach((function(e){return t.adapter_.deregisterBodyInteractionHandler(e,s)}))};this.adapter_.registerBodyInteractionHandler(i,n),Ll.forEach((function(e){return t.adapter_.registerBodyInteractionHandler(e,s)})),this.setValueFromEvt_(e)}},t.prototype.handleMove_=function(e){e.preventDefault(),this.setValueFromEvt_(e)},t.prototype.handleUp_=function(){this.setActive_(!1),this.adapter_.notifyChange()},t.prototype.getClientX_=function(e){return e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].clientX:e.clientX},t.prototype.setValueFromEvt_=function(e){var t=this.getClientX_(e),n=this.computeValueFromClientX_(t);this.setValue_(n,!0)},t.prototype.computeValueFromClientX_=function(e){var t=this.max_,n=this.min_,i=(e-this.rect_.left)/this.rect_.width;return this.adapter_.isRTL()&&(i=1-i),n+i*(t-n)},t.prototype.handleKeydown_=function(e){var t=this.getKeyId_(e),n=this.getValueForKeyId_(t);isNaN(n)||(e.preventDefault(),this.adapter_.addClass(Pl.FOCUS),this.setValue_(n,!0),this.adapter_.notifyChange())},t.prototype.getKeyId_=function(e){return e.key===Rl||37===e.keyCode?Rl:e.key===xl||39===e.keyCode?xl:e.key===jl||38===e.keyCode?jl:e.key===Dl||40===e.keyCode?Dl:e.key===Hl||36===e.keyCode?Hl:e.key===Ul||35===e.keyCode?Ul:e.key===Bl||33===e.keyCode?Bl:e.key===Fl||34===e.keyCode?Fl:""},t.prototype.getValueForKeyId_=function(e){var t=this,n=t.max_,i=t.min_,s=t.step_||(n-i)/100;switch(this.adapter_.isRTL()&&(e===Rl||e===xl)&&(s=-s),e){case Rl:case Dl:return this.value_-s;case xl:case jl:return this.value_+s;case Hl:return this.min_;case Ul:return this.max_;case Bl:return this.value_+s*kl.PAGE_FACTOR;case Fl:return this.value_-s*kl.PAGE_FACTOR;default:return NaN}},t.prototype.handleFocus_=function(){this.preventFocusState_||this.adapter_.addClass(Pl.FOCUS)},t.prototype.handleBlur_=function(){this.preventFocusState_=!1,this.adapter_.removeClass(Pl.FOCUS)},t.prototype.setValue_=function(e,t,n){if(void 0===n&&(n=!1),e!==this.value_||n){var i=this.min_,s=this.max_,r=e===i||e===s;this.step_&&!r&&(e=this.quantize_(e)),e<i?e=i:e>s&&(e=s),e=e||0,this.value_=e,this.adapter_.setAttribute(Il.ARIA_VALUENOW,String(this.value_)),this.updateUIForCurrentValue_(),t&&(this.adapter_.notifyInput(),this.isDiscrete_&&this.adapter_.setMarkerValue(e))}},t.prototype.quantize_=function(e){return Math.round(e/this.step_)*this.step_},t.prototype.updateUIForCurrentValue_=function(){var e=this,t=this,n=t.max_,i=t.min_,s=(t.value_-i)/(n-i),r=s*this.rect_.width;this.adapter_.isRTL()&&(r=this.rect_.width-r);var o=function(e,t){if(wl(e)&&t in _l){var n=e.document.createElement("div"),i=_l[t],s=i.standard,r=i.prefixed;return s in n.style?s:r}return t}(window,"transform"),a=function(e,t){if(wl(e)&&t in Al){var n=e.document.createElement("div"),i=Al[t],s=i.standard,r=i.prefixed;return i.cssProperty in n.style?s:r}return t}(window,"transitionend");if(this.inTransit_){var l=function(){e.setInTransit_(!1),e.adapter_.deregisterThumbContainerInteractionHandler(a,l)};this.adapter_.registerThumbContainerInteractionHandler(a,l)}requestAnimationFrame((function(){e.adapter_.setThumbContainerStyleProperty(o,"translateX("+r+"px) translateX(-50%)"),e.adapter_.setTrackStyleProperty(o,"scaleX("+s+")")}))},t.prototype.setActive_=function(e){this.active_=e,this.toggleClass_(Pl.ACTIVE,this.active_)},t.prototype.setInTransit_=function(e){this.inTransit_=e,this.toggleClass_(Pl.IN_TRANSIT,this.inTransit_)},t.prototype.toggleClass_=function(e,t){t?this.adapter_.addClass(e):this.adapter_.removeClass(e)},t}(Nl);var Gl=function(e){var t=(0,r.useRef)(),n=(0,r.useRef)(),i=function(e){var t=e.foundation,n=e.props,i=e.elements,s=e.api,o=dl((0,r.useState)(0),2)[1],a=(0,r.useRef)(n);a.current=n;var l=(0,r.useMemo)((function(){return Object.keys(i).reduce((function(e,t){return e[t]=new yl((function(){o((function(e){return e+1}))})),e}),{})}),[]),c=(0,r.useMemo)((function(){var e=t(ll(ll({},l),{getProps:function(){return a.current},emit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Sl(a.current).apply(void 0,ul([],dl(e)))}}));return s&&gl(a.current.apiRef,s(ll({foundation:e},l))),e}),[]);return(0,r.useEffect)((function(){var e=c;return e.init(),s&&gl(a.current.apiRef,s(ll({foundation:e},l))),gl(a.current.foundationRef,e),function(){e.destroy(),gl(a.current.apiRef,null),gl(a.current.foundationRef,null),Object.values(l).map((function(e){return e.destroy()})),a.current={}}}),[c,l]),ll({foundation:c},l)}({props:e,elements:{rootEl:!0,thumbContainerEl:!0,sliderPinEl:!0},foundation:function(e){var i,r,o,a=e.rootEl,l=e.thumbContainerEl,c=e.sliderPinEl,d=e.emit;return new Vl({hasClass:function(e){return a.hasClass(e)},addClass:function(e){return a.addClass(e)},removeClass:function(e){return a.removeClass(e)},getAttribute:function(e){return a.getProp(e)},setAttribute:(i=function(e,t){return a.setProp(e,t)},r=300,function(){var e=this,t=arguments,n=function(){o=null,i.apply(e,t)};null!==o&&clearTimeout(o),o=setTimeout(n,r)}),removeAttribute:function(e){return a.removeProp(e)},computeBoundingRect:function(){return a.ref?a.ref.getBoundingClientRect():El},getTabIndex:function(){return a.ref?a.ref.tabIndex:0},registerInteractionHandler:function(e,t){a.addEventListener(e,t)},deregisterInteractionHandler:function(e,t){a.removeEventListener(e,t)},registerThumbContainerInteractionHandler:function(e,t){l.addEventListener(e,t)},deregisterThumbContainerInteractionHandler:function(e,t){l.removeEventListener(e,t)},registerBodyInteractionHandler:function(e,t){document.body&&document.body.addEventListener(e,t)},deregisterBodyInteractionHandler:function(e,t){document.body&&document.body.removeEventListener(e,t)},registerResizeHandler:function(e){window.addEventListener("resize",e)},deregisterResizeHandler:function(e){window.removeEventListener("resize",e)},notifyInput:function(){d("onInput",{value:s.getValue()})},notifyChange:function(){d("onChange",{value:s.getValue()})},setThumbContainerStyleProperty:function(e,t){l.setStyle(e,t)},setTrackStyleProperty:function(e,n){var i;null===(i=t.current)||void 0===i||i.style.setProperty(e,n)},setMarkerValue:function(e){c.setProp("value",e)},setTrackMarkers:function(e,t,i){var s,r=e.toLocaleString(),o="linear-gradient(to right, currentColor 2px, transparent 0) "+("0 center / calc((100% - 2px) / "+("(("+t.toLocaleString()+" - "+i.toLocaleString()+") / "+r+")")+") 100% repeat-x");null===(s=n.current)||void 0===s||s.style.setProperty("background",o)},isRTL:function(){return!!a.ref&&"rtl"===getComputedStyle(a.ref).direction}})}}),s=i.foundation,o=al(i,["foundation"]);return(0,r.useEffect)((function(){void 0!==e.max&&s.setMax(+e.max)}),[e.max,s]),(0,r.useEffect)((function(){void 0!==e.min&&s.setMin(+e.min)}),[e.min,s]),(0,r.useEffect)((function(){var t=void 0!==e.value?Number(e.value):s.getValue(),n=s.getMin(),i=s.getMax();t<n&&(console.warn("Attempted to set slider to "+t+" which is less than min: "+n),t=n),t>i&&(console.warn("Attempted to set slider to "+t+" which is greater than max: "+i),t=i),s.setValue(t)}),[e.value,s]),(0,r.useEffect)((function(){void 0!==e.step&&s.setStep(+e.step)}),[e.step,s]),(0,r.useEffect)((function(){void 0!==e.disabled&&s.setDisabled(e.disabled)}),[e.disabled,s]),(0,r.useEffect)((function(){void 0!==e.discrete&&(s.isDiscrete_=e.discrete),e.discrete&&0===s.getStep()&&s.setStep(1)}),[e.discrete,s]),(0,r.useEffect)((function(){var t=s.hasTrackMarker_;void 0!==e.displayMarkers&&e.displayMarkers!==t&&(s.hasTrackMarker_=e.displayMarkers,window.requestAnimationFrame((function(){return s.setupTrackMarker()})))}),[e.displayMarkers,s]),(0,r.useEffect)((function(){var e=s.handleDown_.bind(s);s.handleDown_=function(t){t.persist(),e(t)}}),[s]),ol({setTrackRef:function(e){return t.current=e},setTrackMarkerContainerRef:function(e){return n.current=e}},o)},Wl=r.memo(r.forwardRef((function(e,t){return r.createElement("div",{ref:t,className:"mdc-slider__track"})}))),zl=r.memo(r.forwardRef((function(e,t){return r.createElement("div",{ref:t,className:"mdc-slider__track-marker-container"})}))),Kl=r.memo((function(e){var t=e.value;return r.createElement("div",{className:"mdc-slider__pin"},r.createElement("span",{className:"mdc-slider__pin-value-marker"},t))})),Yl=r.memo((function(){return r.createElement("svg",{className:"mdc-slider__thumb",width:"21",height:"21"},r.createElement("circle",{cx:"10.5",cy:"10.5",r:"7.875"}))})),ql=r.memo((function(){return r.createElement("div",{className:"mdc-slider__focus-ring"})})),$l=fl((function(e,t){var n=Gl(e),i=n.rootEl,s=n.thumbContainerEl,o=n.sliderPinEl,a=n.setTrackRef,l=n.setTrackMarkerContainerRef,c=e.value,u=(e.min,e.max),h=e.discrete,p=e.displayMarkers,m=e.step,g=e.disabled,f=(e.onChange,e.onInput,e.children),v=(e.foundationRef,al(e,["value","min","max","discrete","displayMarkers","step","disabled","onChange","onInput","children","foundationRef"])),b=function(e,t){return d().apply(void 0,ul(ul([e.className],dl(e.theme?hl(e.theme):[])),dl("function"==typeof t?t(e):t)))}(e,["mdc-slider",{"mdc-slider--discrete":h,"mdc-slider--display-markers":p&&h}]),y=m?{"data-step":m}:{};return p&&!h&&console.warn("The 'displayMarkers' prop on rmwc Slider will\n        only work in conjunction with the 'discrete' prop"),r.createElement(pl,ol({tabIndex:0,role:"slider","aria-valuemax":u,"aria-valuenow":c,"aria-label":"Select Value"},g?{"aria-disabled":g}:{},y,v,{ref:t,element:i,className:b}),r.createElement("div",{className:"mdc-slider__track-container"},r.createElement(Wl,{ref:a}),p&&r.createElement(zl,{ref:l})),r.createElement(pl,{element:s,className:"mdc-slider__thumb-container"},h&&r.createElement(Kl,{value:o.getProp("value")}),r.createElement(Yl,null),r.createElement(ql,null)),f)}));n(85925);let Zl=0;class SliderWithTooltip extends r.Component{constructor(e){super(e),this.mdcRef=(0,r.createRef)(),this.setValue=e=>{this.setState({value:e})},this.onSliderInput=e=>{var t;const n=e.detail.value;this.layoutRecalculated||(null===(t=this.mdcRef.current)||void 0===t||t.layout(),this.layoutRecalculated=!0),this.setState({value:n}),this.props.onInput&&this.props.onInput(n)},this.onSliderChange=e=>{const t=e.detail.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(t)},this.getLeftOffset=()=>100*(this.state.value-this.props.min)/(this.props.max-this.props.min)+"%",this.getSliderId=()=>`slider-with-tooltip-${this.id}`,this.getStyleElement=()=>`#${this.getSliderId()} .mdc-slider__thumb-container {\n        left: ${this.getLeftOffset()}\n    }`,this.getDisplayValue=e=>{const{formatNumbers:t,units:n}=this.props;return(t?t(e):e)+(n||"")},this.setActive=e=>()=>this.setState({active:e}),this.hasChanged=()=>{this.setState({hasChanged:!1})},this.onMouseDown=e=>{this.props.onInputStart&&this.props.onInputStart()},this.onEventMouseUp=e=>{this.props.onInputEnd&&this.props.onInputEnd()},this.onMouseUp=e=>{this.props.onInputEnd&&this.props.onInputEnd()},this.id=Zl++,this.state={value:void 0!==e.initialValue?e.initialValue:(e.max+e.min)/2,active:!1,hasChanged:!1},this.setActiveSlider=this.setActive(!0),this.setInactiveSlider=this.setActive(!1)}componentDidMount(){document.addEventListener("mouseup",this.onEventMouseUp),document.addEventListener("mouseleave",this.onEventMouseUp)}componentWillUnmount(){document.removeEventListener("mouseup",this.onEventMouseUp),document.removeEventListener("mouseleave",this.onEventMouseUp)}componentDidUpdate(e,t){t.value!==this.state.value&&(clearTimeout(this.hasChangedTimeout),this.setState({hasChanged:!0}),this.hasChangedTimeout=window.setTimeout(this.hasChanged,450))}render(){const{width:e,displayBounds:t,min:n,max:i,discrete:s,tooltipPosition:r,variant:o="default",disabled:a}=this.props,{active:c,hasChanged:u,value:h}=this.state,p={left:this.getLeftOffset()},m="inline-value"===o,g=!m&&t,f=!m;return(0,l.jsxs)("div",Object.assign({id:this.getSliderId(),className:d()("slider-with-tooltip",{displayBounds:t,disabled:a}),style:{width:`${e}px`},onMouseEnter:this.setActiveSlider,onMouseLeave:this.setInactiveSlider},{children:[f&&r===Ql.UP&&(0,l.jsx)("div",{className:d()("slider-tooltip",{active:c||u}),"data-balloon":this.getDisplayValue(h),"data-balloon-pos":Ql.UP,style:p}),g&&(0,l.jsx)("div",Object.assign({className:"min-amount"},{children:this.getDisplayValue(n)})),m&&(0,l.jsx)("div",Object.assign({className:"min-amount"},{children:this.getDisplayValue(h)})),(0,l.jsx)($l,{discrete:s,min:n,max:i,value:h,onInput:this.onSliderInput,onChange:this.onSliderChange,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,foundationRef:this.mdcRef,disabled:a}),g&&(0,l.jsx)("div",Object.assign({className:"max-amount"},{children:this.getDisplayValue(i)})),(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:this.getStyleElement()}}),f&&r===Ql.DOWN&&(0,l.jsx)("div",{className:d()("slider-tooltip",{active:c||u}),"data-balloon":this.getDisplayValue(h),"data-balloon-pos":Ql.DOWN,style:p})]}))}}var Ql;!function(e){e.UP="up",e.DOWN="down"}(Ql||(Ql={}));const Xl=e=>{let t="";t+=Math.floor(e)+"'";const n=Math.floor(e%1*12);return n<10&&(t+="0"),t+=n+"''",t};var Jl=n(48558),ec=n(93510);const{MATTERTAGS:tc}=g.Z.WORKSHOP;class StemSlider extends r.Component{constructor(e){super(e),this.sliderRef=(0,r.createRef)(),this.setStemValue=(e,t=!0)=>{const n=t?(0,Jl._F)(e):e;if(n!==this.props.stemHeight){const{manager:e,sid:t,onEdited:i}=this.props;e.setStemHeight(t,n).then(i)}},this.onClickReset=()=>{const e=this.sliderRef.current;e&&(this.setStemValue(this.state.originalStemHeight,!1),e.setValue((0,Jl.zy)(this.state.originalStemHeight)))},this.onToggleStemVisibility=()=>{const{manager:e,sid:t,stemVisible:n,onEdited:i}=this.props;e.setStemVisibility(t,!n).then(i)},this.stopPropagation=e=>{e.stopPropagation()},this.updateUnits=()=>{this.setState({units:this.context.settings.tryGetProperty(Ln.gx.Units,ec.M.IMPERIAL)})},this.formatStemHeight=e=>{if(this.state.units===ec.M.IMPERIAL)return Xl(e);return`${Math.round(100*(0,Jl._F)(e))/100}m`},this.state={originalStemHeight:e.stemHeight,units:ec.M.IMPERIAL}}componentDidMount(){const e=this.sliderRef.current;e&&e.setValue((0,Jl.zy)(this.props.stemHeight)),this.context.settings.onPropertyChanged(Ln.gx.Units,this.updateUnits),this.updateUnits()}componentWillUnmount(){this.context.settings.removeOnPropertyChanged(Ln.gx.Units,this.updateUnits)}render(){const{locale:e}=this.context,{stemVisible:t,stemHeight:n}=this.props,{originalStemHeight:i}=this.state,s=i!==n,r=e.t(tc.STEM_SLIDER_RESET_CTA),o=e.t(tc.SHOW_STEM_LABEL);return(0,l.jsxs)("div",Object.assign({className:"editable-popover stem-popover",onClick:this.stopPropagation},{children:[(0,l.jsx)(SliderWithTooltip,{ref:this.sliderRef,discrete:!1,min:0,max:9,initialValue:(0,Jl.zy)(i),onInput:this.setStemValue,displayBounds:!0,width:150,formatNumbers:this.formatStemHeight,tooltipPosition:Ql.DOWN}),(0,l.jsx)("div",Object.assign({className:d()("link-btn","popover-btn","stem-slider-reset",{disabled:!s}),onClick:this.onClickReset},{children:r})),(0,l.jsx)("hr",{}),(0,l.jsxs)("div",Object.assign({className:"stem-checkbox",onClick:this.onToggleStemVisibility},{children:[(0,l.jsx)("div",{className:d()("checkbox icon-checkmark",{checked:t})}),(0,l.jsx)("div",Object.assign({className:"checkbox-text"},{children:o}))]}))]}))}}StemSlider.contextType=m.I;var nc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let ic=class ColorPicker extends r.Component{constructor(e){super(e),this.clickColor=e=>{const t=e.currentTarget;if(t&&t.dataset){const n=t.dataset.value;n&&(e.stopPropagation(),this.props.onColorPicked(n),this.setState({activeColor:n}))}},this.renderColorSwatch=e=>{const{activeColor:t}=this.state,n={backgroundColor:e},i=d()({"color-swatch":!0,"icon-checkmark":!0,active:e===t});return(0,l.jsx)("div",{className:i,style:n,"data-value":e,onClick:this.clickColor},e)},this.state={activeColor:e.defaultColor||""}}UNSAFE_componentWillReceiveProps(e){e.defaultColor&&!this.state.activeColor&&this.setState({activeColor:e.defaultColor})}render(){const{colors:e}=this.props;return(0,l.jsx)("div",Object.assign({className:"color-picker"},{children:e.map((e=>this.renderColorSwatch(e)))}))}};ic=nc([_n.Z],ic);const sc=["#d44441","#f44336","#e91e63","#f78da7","#9c4b92","#673ab7","#03687d","#03a9f4","#00bcd4","#417505","#51a868","#37d67a","#cddc39","#fbcd00","#ffac17","#ff6900","#abb8c3","#607d8b"];class DiscColorPicker extends r.Component{constructor(e){super(e),this.handleColorPicked=e=>{const{manager:t,sid:n,onEdited:i}=this.props;t.setColor(n,e).then(i)},this.stopPropagation=e=>{e.stopPropagation()}}render(){const{color:e}=this.props;return(0,l.jsx)("div",Object.assign({className:"editable-popover color-editor",onClick:this.stopPropagation},{children:(0,l.jsx)(ic,{colors:sc,defaultColor:e,onColorPicked:this.handleColorPicked})}))}}const{MATTERTAGS:rc}=g.Z.WORKSHOP;var oc;!function(e){e[e.NONE=0]="NONE",e[e.INVALID_URL_SYNTAX=1]="INVALID_URL_SYNTAX",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED",e[e.ERROR=4]="ERROR"}(oc||(oc={}));class MediaLinkInput extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.onInput=e=>{const t=$a(e)?oc.NONE:oc.INVALID_URL_SYNTAX;this.setState({validationPhase:t,currentUrl:e})},this.onApply=()=>{this.applyDisabled||this.onChangeMedia(this.state.currentUrl)},this.stopPropagation=e=>{e.stopPropagation()},this.onChangeMedia=async e=>{const{sid:t,mediaSrc:n,onEdited:i,manager:s}=this.props;if(e!==n){const n=await this.loadMedia(e);if(n!==Ia.z.error){if(await s.setEmbed(t,e,n),this.isUnmounting)return;this.setState({validationPhase:oc.LOADED}),i()}else{if(this.isUnmounting)return;this.setState({validationPhase:oc.ERROR})}}else this.props.onCancel()},this.loadMedia=async e=>{let t=Ia.z.none;return this.setState({validationPhase:oc.NONE}),e&&(this.setState({validationPhase:oc.LOADING}),t=await this.props.embedlyValidator.getType(e)),t},this.state={currentUrl:e.mediaSrc,validationPhase:this.getInitialValidationPhase()}}componentWillUnmount(){this.isUnmounting=!0}getInitialValidationPhase(){return this.props.mediaType===Ia.z.error?oc.ERROR:this.props.mediaSrc?oc.LOADED:oc.NONE}UNSAFE_componentWillReceiveProps(e){this.props.mediaSrc!==e.mediaSrc&&this.setState({currentUrl:e.mediaSrc})}render(){const{locale:e}=this.context,{onCancel:t}=this.props,{currentUrl:n}=this.state,i=e.t(rc.MEDIA_LINK_LABEL),s=e.t(rc.MEDIA_LINK_SUPPORTED_FORMATS_LINK);return(0,l.jsxs)("div",Object.assign({className:"annotation-popup open media-editor",onClick:this.stopPropagation},{children:[(0,l.jsxs)("div",Object.assign({className:"popover-header"},{children:[(0,l.jsxs)("div",Object.assign({className:"popover-label"},{children:[i,(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",href:MediaLinkInput.supportPage},{children:s}))]})),(0,l.jsx)(An.P,{buttonStyle:An.A.LIGHT,onClose:t})]})),(0,l.jsx)(tl,{text:n,type:"url",className:"text-field-dark",placeholder:"https://",onDone:this.onChangeMedia,onInput:this.onInput}),this.renderPopoverFooter()]}))}get applyDisabled(){const{mediaSrc:e}=this.props,{validationPhase:t,currentUrl:n}=this.state;return t===oc.ERROR||t===oc.LOADING||t===oc.INVALID_URL_SYNTAX&&""!==n||n===e&&""===n}renderPopoverFooter(){const{locale:e}=this.context,t=this.applyDisabled?Ts.BN.DIMMED:Ts.BN.ENABLED,n=e.t(rc.MEDIA_LINK_APPLY_CTA);return(0,l.jsxs)("div",Object.assign({className:"popover-footer"},{children:[this.renderValidationMessage(),(0,l.jsx)(Ts.zx,Object.assign({className:"button-inline",buttonStyle:Ts.ZJ.CLEAR,buttonSize:Ts.qE.SMALL,buttonState:t,onClick:this.onApply},{children:n}))]}))}renderValidationMessage(){const{locale:e}=this.context;switch(this.state.validationPhase){case oc.ERROR:return(0,l.jsxs)("div",Object.assign({className:"popover-message popover-message-error"},{children:[e.t(rc.MEDIA_LINK_ERROR_MESSAGE),(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",href:MediaLinkInput.supportPage},{children:e.t(rc.MEDIA_LINK_HELP_LINK)}))]}));case oc.LOADING:return(0,l.jsx)("div",Object.assign({className:"popover-message"},{children:e.t(rc.MEDIA_LINK_LOADING_MESSAGE)}));case oc.INVALID_URL_SYNTAX:if(""!==this.state.currentUrl)return(0,l.jsx)("div",Object.assign({className:"popover-message popover-message-error"},{children:e.t(rc.MEDIA_LINK_INVALID_URL_MESSAGE)}))}return(0,l.jsx)("div",{className:"popover-message"})}}MediaLinkInput.contextType=m.I,MediaLinkInput.supportPage="https://support.matterport.com/hc/en-us/articles/115006363868-Add-Multimedia-to-a-Mattertag-Post";var ac=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{MATTERTAGS:lc}=g.Z.WORKSHOP;var cc;!function(e){e.COLOR="color",e.STEM="stem",e.MEDIA="media",e.LINK="text-link"}(cc||(cc={}));let dc=class EditableBillboardContent extends r.Component{constructor(e){super(e),this.textParser=new ja.v({links:!0}),this.getColorStyle=()=>{const e=this.props.getSavedData().color;if(e)return{backgroundColor:e}},this.toggleVisibility=()=>{const{id:e,manager:t}=this.props;this.closePopover();const n=this.state.currentValues.visible;t.setVisibility(e,!n).then(this.onEdited)},this.onEdited=()=>{const e=this.props.getSavedData();e&&this.setState({currentValues:e,tagEmpty:this.props.manager.isTagEmpty(this.props.id)})},this.onMediaEdited=()=>{this.onEdited(),this.closePopover()},this.onMediaCancel=()=>{this.closePopover()},this.cancelEdits=()=>{this.props.manager.revertChanges()},this.doneEditing=()=>{const{manager:e,id:t}=this.props;e.saveMattertag(t)},this.onAddLinkClicked=e=>{if(e.stopPropagation(),this.state.popover===cc.LINK)this.closePopover();else if(this.state.linkCount<5){const e=this.billboardText.prepareNewLinkSelection();this.openLinkEditor(e)}},this.onClickLink=()=>{this.openLinkEditor(!1)},this.onDescriptionInput=e=>{const t=this.props.getSavedData(),n=(0,f.Yv)(t.label)&&(0,f.Yv)(t.mediaSrc)&&e;this.updateLinkCount(this.props.description),this.setState({tagEmpty:n})},this.onNavigationKey=e=>{e.keyCode===Yr.R.ESCAPE&&this.cancelEdits()},this.billboardClick=e=>{e.stopPropagation();const{popover:t}=this.state;t===cc.LINK||t===cc.MEDIA||this.closePopover()},this.closePopover=()=>{const{popover:e}=this.state;null!==e&&this.setPopover(e,!1)},this.setBillboardTextRef=e=>{this.billboardText=e};const t=e.getSavedData();this.state={popover:null,linkCount:0,currentValues:Object.assign({},t),tagEmpty:e.manager.isTagEmpty(e.id)},this.clickColor=this.clickMenuIcon.bind(this,cc.COLOR),this.clickStem=this.clickMenuIcon.bind(this,cc.STEM),this.clickMedia=this.clickMenuIcon.bind(this,cc.MEDIA)}componentDidMount(){this.context.analytics.trackToolGuiEvent("mattertags","mattertag_editor_opened"),this.updateLinkCount(this.props.description)}componentDidUpdate(e,t){const n=this.props.manager.dataMap.mattertagsViewData.toolState;t.tagEmpty&&!this.state.tagEmpty&&n===Aa.rI.PLACED&&this.props.manager.dataMap.mattertagsViewData.setToolState(Aa.rI.EDITING),this.updateLinkCount(this.props.description)}setPopover(e,t){const n=this.state.popover,i=t?e:null;n!==i&&n===cc.LINK&&this.context.messageBus.broadcast(new CloseLinkEditorMessage),this.setState({popover:i})}openLinkEditor(e){this.setPopover(cc.LINK,!0),this.context.messageBus.broadcast(new OpenLinkEditorMessage(e))}updateLinkCount(e){let t=0;const n=this.textParser.parse(e);for(const e of n)e.blockType===xa.C.LINK&&t++;this.setState({linkCount:t})}clickMenuIcon(e,t){t.stopPropagation(),this.setPopover(e,this.state.popover!==e)}render(){const{locale:e}=this.context,{tagEmpty:t,popover:n}=this.state,i=null!==n,s=n===cc.LINK||n===cc.MEDIA,r=e.t(lc.EDIT_BILLBOARD_CANCEL_CTA),o=e.t(lc.EDIT_BILLBOARD_DONE_CTA);return(0,l.jsxs)("div",Object.assign({className:d()("editable-billboard-body",{"popover-open":i,"url-popover-open":s}),onClick:this.billboardClick},{children:[(0,l.jsxs)("div",Object.assign({className:"editable-billboard-content",onClick:this.billboardClick},{children:[this.renderTextContent(),this.renderMattertagMedia(),this.renderActivePopover()]})),(0,l.jsxs)("div",Object.assign({className:"billboard-footer",onClick:this.billboardClick},{children:[this.renderMenuItems(),(0,l.jsxs)("div",Object.assign({className:"billboard-cta"},{children:[(0,l.jsx)(Ts.zx,Object.assign({buttonStyle:Ts.ZJ.CLEAR,buttonSize:Ts.qE.SMALL,className:"button-inline",onClick:this.cancelEdits},{children:r})),(0,l.jsx)(Ts.zx,Object.assign({className:"button-inline",buttonStyle:Ts.ZJ.CLEAR,buttonSize:Ts.qE.SMALL,buttonState:t?Ts.BN.DISABLED:Ts.BN.ENABLED,onClick:this.doneEditing},{children:o}))]}))]}))]}))}renderActivePopover(){const{id:e,manager:t}=this.props,{popover:n,currentValues:i}=this.state,{stemVisible:s,stemHeight:r,color:o,mediaSrc:a,mediaType:c}=i;switch(n){case cc.STEM:return(0,l.jsx)(StemSlider,{sid:e,stemVisible:s,stemHeight:r,onEdited:this.onEdited,manager:t});case cc.COLOR:return(0,l.jsx)(DiscColorPicker,{sid:e,color:o,onEdited:this.onEdited,manager:t});case cc.MEDIA:return(0,l.jsx)(MediaLinkInput,{sid:e,mediaSrc:a,mediaType:c,embedlyValidator:this.props.embedlyValidator,onEdited:this.onMediaEdited,onCancel:this.onMediaCancel,manager:t});default:return null}}renderMenuItems(){const{locale:e}=this.context,{manager:t,id:n,fullSized:i}=this.props,{popover:s,currentValues:r,linkCount:o}=this.state,{visible:a}=r,c=t.isNewTag(n),u=s===cc.COLOR,h=s===cc.STEM,p=s===cc.MEDIA,m=s===cc.LINK,g=o<5,f=e.t(g?lc.LINK_TOOLTIP_MESSAGE:lc.LINK_DISABLED_TOOLTIP_MESSAGE),v=i?Vo.lZ.UP:Vo.lZ.DOWN,b=m?Ts.BN.ACTIVE:g?Ts.BN.ENABLED:Ts.BN.DIMMED;return(0,l.jsxs)("div",Object.assign({className:"billboard-menu"},{children:[(0,l.jsx)(Es.hU,{iconClass:"icon-link",className:d()("billboard-menu-item","add-link"),buttonState:b,buttonStyle:Es.Dd.CLEAR,onClick:this.onAddLinkClicked,tooltipMsg:m?void 0:f,tooltipPosition:v}),(0,l.jsx)(Es.hU,Object.assign({className:d()("billboard-menu-item","color"),buttonStyle:Es.Dd.CLEAR,buttonState:u?Ts.BN.ACTIVE:Ts.BN.ENABLED,onClick:this.clickColor,tooltipMsg:u?void 0:e.t(lc.COLOR_TOOLTIP_MESSAGE),tooltipPosition:v},{children:(0,l.jsx)("span",{className:"color-dot",style:this.getColorStyle()})})),(0,l.jsx)(Es.hU,{iconClass:"icon-stem-height",className:d()("billboard-menu-item","stem"),buttonStyle:Es.Dd.CLEAR,buttonState:h?Ts.BN.ACTIVE:Ts.BN.ENABLED,onClick:this.clickStem,tooltipMsg:h?void 0:e.t(lc.STEM_TOOLTIP_MESSAGE),tooltipPosition:v}),(0,l.jsx)(Es.hU,{iconClass:"icon-media-mix",className:d()("billboard-menu-item","media"),buttonStyle:Es.Dd.CLEAR,buttonState:p?Ts.BN.ACTIVE:Ts.BN.ENABLED,onClick:this.clickMedia,tooltipMsg:p?void 0:e.t(lc.MEDIA_TOOLTIP_MESSAGE),tooltipPosition:v}),!c&&(0,l.jsx)(Es.hU,{iconClass:a?"icon-eye-hide":"icon-eye-show",className:"billboard-menu-item",buttonStyle:Es.Dd.CLEAR,onClick:this.toggleVisibility,tooltipMsg:e.t(a?lc.HIDE_TOOLTIP_MESSAGE:lc.SHOW_TOOLTIP_MESSAGE),tooltipPosition:v})]}))}renderTextContent(){const{popover:e}=this.state,{id:t,label:n,description:i,manager:s}=this.props,r=e===cc.LINK;return(0,l.jsx)(rl,{id:t,ref:this.setBillboardTextRef,label:n,description:i,linkEditorOpen:r,onClickLink:this.onClickLink,onClosePopover:this.closePopover,onDescriptionInput:this.onDescriptionInput,onNavigationKey:this.onNavigationKey,onEdited:this.onEdited,manager:s})}renderMattertagMedia(){const{id:e,mediaType:t,closing:n,media:{hasMedia:i,mediaPayload:s},mediaAspectRatio:r}=this.props;return i?s?(0,l.jsx)(Ga,{mediaPayload:s,mediaType:t,mediaAspectRatio:r,closing:n},e):(0,l.jsx)("div",Object.assign({className:"loadingSpinner"},{children:(0,l.jsx)("div",{className:"gui-spinner-icon"})})):null}};dc.contextType=m.I,dc=ac([_n.Z],dc);var uc=n(54929);class MouseThrough extends r.Component{constructor(e){super(e),this.mouseThroughElementRef=(0,r.createRef)(),this.eventsToSend={[MouseThrough.SendEvent.HOVER]:!1,[MouseThrough.SendEvent.CLICK]:!1,[MouseThrough.SendEvent.BUTTON]:!1},this.onHoverEvent=e=>{switch(e.type){case"mousemove":this.props.onMouseMove&&this.props.onMouseMove(e);break;case"mouseenter":this.props.onMouseEnter&&this.props.onMouseEnter(e);break;case"mouseleave":this.props.onMouseLeave&&this.props.onMouseLeave(e);break;case"pointermove":this.props.onMouseMove&&this.props.onMouseMove(e);break;case"pointerenter":this.props.onMouseEnter&&this.props.onMouseEnter(e);break;case"pointerleave":this.props.onMouseLeave&&this.props.onMouseLeave(e)}this.eventsToSend[MouseThrough.SendEvent.HOVER]&&this.isValidTarget(e.target)&&this.sendEventThrough(e.type,e)},this.isValidTarget=e=>{const t=this.mouseThroughElementRef.current;return!!t&&(e===t||this.props.includeChildrenEvents&&e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS)},this.onClick=e=>{this.props.onClick&&this.props.onClick(e),this.eventsToSend[MouseThrough.SendEvent.CLICK]&&this.isValidTarget(e.target)&&(this.sendEventThrough("mousedown",e),window.setTimeout((()=>this.sendEventThrough("mouseup",e)),0))},this.onButtonEvent=e=>{switch(e.type){case"pointerdown":this.props.onPointerDown&&this.props.onPointerDown(e);break;case"pointerup":this.props.onPointerUp&&this.props.onPointerUp(e)}this.eventsToSend[MouseThrough.SendEvent.BUTTON]&&this.isValidTarget(e.target)&&this.sendEventThrough(e.type,e)},this.onClick=this.onClick.bind(this),this.target=e.clickTarget||document.getElementsByTagName("canvas")[0],this.registerEvents()}UNSAFE_componentWillReceiveProps(e){(0,uc.NK)(this.props.sendEvents,e.sendEvents)&&this.registerEvents()}render(){return(0,l.jsx)("div",Object.assign({id:this.props.id,ref:this.mouseThroughElementRef,className:this.props.className,style:this.props.style||{},onMouseEnter:this.onHoverEvent,onMouseLeave:this.onHoverEvent,onMouseMove:this.onHoverEvent,onPointerEnter:this.onHoverEvent,onPointerLeave:this.onHoverEvent,onPointerMove:this.onHoverEvent,onMouseDown:this.onButtonEvent,onMouseUp:this.onButtonEvent,onPointerDown:this.onButtonEvent,onPointerUp:this.onButtonEvent,onClick:this.onClick},{children:this.props.children}))}registerEvents(){this.props.sendEvents.length&&(this.eventsToSend[MouseThrough.SendEvent.CLICK]=this.props.sendEvents.indexOf(MouseThrough.SendEvent.CLICK)>-1,this.eventsToSend[MouseThrough.SendEvent.HOVER]=this.props.sendEvents.indexOf(MouseThrough.SendEvent.HOVER)>-1,this.eventsToSend[MouseThrough.SendEvent.BUTTON]=this.props.sendEvents.indexOf(MouseThrough.SendEvent.BUTTON)>-1)}sendEventThrough(e,t){const n=t.nativeEvent;let i;try{i=window.PointerEvent?new PointerEvent(e,n):new MouseEvent(e,n)}catch(t){i=document.createEvent("MouseEvents");const s=n.view;if(!s)return;i.initMouseEvent(e,n.bubbles,n.cancelable,s,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)}this.target.dispatchEvent(i)}}!function(e){let t;!function(e){e[e.HOVER=1]="HOVER",e[e.CLICK=2]="CLICK",e[e.BUTTON=3]="BUTTON"}(t=e.SendEvent||(e.SendEvent={}))}(MouseThrough||(MouseThrough={}));var hc=n(25551),pc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let mc=class MattertagDescription extends r.Component{constructor(e){super(e),this.formatLink=(e,t)=>gc(e,t,!1),this.linkClicked=e=>t=>{t.preventDefault(),this.props.onLinkClick(e);const{link:n}=e;if(void 0===n)return;switch(n.type){case hc.U.NAVIGATION:n.navigationData&&this.props.linkHandler.handler.openLink({pose:n.navigationData,fullLink:n.url});break;case hc.U.MODEL:try{const e=new URL(n.url);this.props.linkHandler.handler.openLink({modelId:e.searchParams.get("m")||"",fullLink:n.url})}catch(e){}break;case hc.U.EXT_LINK:this.context.messageBus.broadcast(new Pa.Ik(n.url)),this.props.linkHandler.handler.openLink(n.url)}}}render(){const{description:e,parsedDescription:t}=this.props;let n=e;return t&&t.length>0&&(n=fc(t,this.formatLink,this.linkClicked)),n?(0,l.jsx)("div",Object.assign({className:"tag-description"},{children:n})):null}};mc.contextType=m.I,mc=pc([_n.Z],mc);const gc=(e,t,n)=>{if(!e.link)return null;const i=e.link,s=i.type===hc.U.NAVIGATION?"Link to position within this model":"Link to external web site";return(0,l.jsxs)("a",Object.assign({className:"link-url",contentEditable:n,href:i.url,onClick:t(e)},{children:[i.label,(0,l.jsx)("i",{className:"icon-ext-link",title:s})]}),i.label)},fc=(e,t,n)=>e.map((e=>{switch(e.type){case Ia.z.link:if(e.link)return t(e,n);case Ia.z.text:return(e.text||"").replace("&zwnj;","")}return null}));var vc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let bc=class MattertagTextContent extends r.Component{constructor(e){super(e),this.scrollbarsRef=(0,r.createRef)(),this.state={height:null,descriptionHeight:0,scrollable:!1,determiningScrollability:!1,scrollClass:fs.None},this.onScrollPositionChange=()=>{const e=this.scrollbarsRef.current;if(!e||this.state.determiningScrollability)return;const t=e.scrollPosition.vertical;this.setState({scrollClass:t})}}UNSAFE_componentWillReceiveProps(e){e.tagWidth!==this.props.tagWidth&&this.setState({height:null,scrollable:!0,determiningScrollability:!0})}componentDidMount(){this.determineScrollability()}componentDidUpdate(){this.state.determiningScrollability&&this.determineScrollability()}determineScrollability(){const e=this.textContainer&&this.textContainer.querySelector(".tag-description");let t={determiningScrollability:!1};if(this.props.description&&e){const n=this.props.mediaTag?65:159;if(e.scrollHeight>n+12){const e=this.textContainer&&this.textContainer.querySelector(".tag-label"),i=this.props.label?n+e.scrollHeight-5:n;t=Object.assign(Object.assign({},t),{height:i,scrollable:!0,scrollClass:fs.Beginning})}else t=Object.assign(Object.assign({},t),{height:null,scrollable:!1,scrollClass:fs.None})}this.setState(t)}render(){const{label:e,description:t,parsedDescription:n,onLinkClick:i}=this.props;if(e||t||n){const s=d()({"tag-text-content":!0,noScroll:!this.state.height||!this.state.scrollable,[this.state.scrollClass]:!0});return(0,l.jsx)("div",Object.assign({className:s,style:{height:this.state.scrollable&&this.state.height||"auto"},ref:e=>{this.textContainer=e}},{children:(0,l.jsxs)(Scrollbars,Object.assign({name:"mattertag-text-content",forceHidden:!1,waitToUpdate:this.state.determiningScrollability,singleScrollDirection:us.vertical,ref:this.scrollbarsRef,onScrollPositionChange:this.onScrollPositionChange},{children:[e&&(0,l.jsx)("div",Object.assign({className:"tag-label",onClick:this.onBoundClick},{children:(0,l.jsx)("span",{children:e})})),(0,l.jsx)(mc,{description:t,parsedDescription:n,onLinkClick:i,linkHandler:this.props.linkHandler})]}))}))}return null}};bc=vc([_n.Z],bc);const yc=bc;class CustomWidgetFrame extends r.Component{constructor(){super(...arguments),this.elementRef=(0,r.createRef)()}shouldComponentUpdate(){return!1}componentDidMount(){const e=this.elementRef.current;e&&this.props.widget.frame.mount(e)}componentWillUnmount(){this.elementRef.current&&this.props.widget.frame.unmount()}render(){const{width:e,height:t}=this.props.widget.size,n={};return e&&t&&(n.width=e+"px",n.height=t+"px"),(0,l.jsx)("div",{className:"custom-widget-container",style:n,ref:this.elementRef})}}var Sc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Ec=class ReadonlyBillboardContent extends r.Component{constructor(e){super(e),this.clickBillboard=()=>{this.props.onClickBillboard()},this.onClickImage=()=>{this.props.allowTagOverlay?this.props.onOpenOverlay():this.props.onClickBillboard()}}render(){const{media:e,style:t,selected:n,allowTagOverlay:i,label:s,description:r,parsedDescription:o}=this.props;return(0,l.jsxs)("div",Object.assign({className:d()("billboard-body",{expandable:i}),onClick:this.clickBillboard},{children:[(0,l.jsxs)("div",Object.assign({className:"billboard-content",style:t.bodyStyle},{children:[(0,l.jsx)(yc,{label:s,description:r,parsedDescription:o,tagWidth:t.width,imgHeight:t.height,mediaTag:e.hasMedia,onLinkClick:this.props.onLinkClick,linkHandler:this.props.linkHandler}),this.renderMattertagMedia(),this.renderCustomWidget()]})),!n&&(0,l.jsx)(MouseThrough,{sendEvents:[MouseThrough.SendEvent.BUTTON],className:"hover-arrow"})]}))}renderMattertagMedia(){const{id:e,allowTagOverlay:t,mediaType:n,style:{width:i,height:s,closing:r},media:{hasMedia:o,mediaPayload:a}}=this.props;return o?a?(0,l.jsx)(Ga,{mediaPayload:a,mediaType:n,width:i,height:s,onClickImage:t?this.onClickImage:void 0,closing:r},e):(0,l.jsx)("div",Object.assign({className:"loadingSpinner"},{children:(0,l.jsx)("div",{className:"gui-spinner-icon"})})):null}renderCustomWidget(){if(this.props.customWidget)return(0,l.jsx)(CustomWidgetFrame,{widget:this.props.customWidget})}};Ec=Sc([_n.A],Ec);var Tc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Oc=class MattertagOverlay extends r.Component{constructor(e){super(e),this.scrollbarsRef=(0,r.createRef)(),this.toggleCollapseText=()=>{this.setState((e=>({collapsed:!e.collapsed})))},this.onScrollPositionChange=()=>{const e=this.scrollbarsRef.current;if(!e||this.state.determiningScrollability)return;const t=e.scrollPosition.vertical;this.setState({scrollClass:t})},this.updateScrollAndCollapse=()=>{const e=this.textContainer?this.textContainer.scrollHeight:0,t=this.textContainer&&this.textContainer.querySelector(".tag-description");let n={determiningScrollability:!1};if(e){const i=Math.max(e-41-this.state.overlayHeight,0),s=i>0,r=e-i,o=t&&t.scrollHeight-i,a=s?fs.Beginning:fs.None,l=t&&e>41;n=Object.assign(Object.assign({},n),{height:r,scrollable:s,descriptionHeight:o,scrollClass:a,collapsible:l})}this.setState(n)},this.updateOverlayDimensions=()=>{const{label:e,description:t,maxWidth:n,maxHeight:i,mediaAspectRatio:s}=this.props,r=n-24,o=i-24-(e||t?41:0),a=s<r/o;this.setState({overlayWidth:a?o*s:r,overlayHeight:a?o:r/s})},this.stopPropagation=e=>{e.stopPropagation()},this.state={overlayWidth:0,overlayHeight:0,collapsible:!!(e.description&&e.description.length>0),collapsed:!1,height:null,descriptionHeight:0,scrollable:!1,determiningScrollability:!1,scrollClass:fs.None}}componentDidMount(){this.updateOverlayDimensions(),this.updateScrollAndCollapse()}componentDidUpdate(e,t){const n=e.mediaAspectRatio!==this.props.mediaAspectRatio,i=e.maxWidth!==this.props.maxWidth,s=e.maxHeight!==this.props.maxHeight;(n||i||s)&&(this.setState({determiningScrollability:!0,scrollable:!1,scrollClass:fs.None,height:0}),window.requestAnimationFrame((()=>{this.updateOverlayDimensions(),this.updateScrollAndCollapse()})))}render(){const{mediaPayload:e,mediaType:t,closing:n}=this.props,{overlayWidth:i,overlayHeight:s,collapsible:r}=this.state;return(0,l.jsx)("div",Object.assign({className:"billboard-body",onClick:this.stopPropagation},{children:(0,l.jsxs)("div",Object.assign({className:d()("billboard-content",{collapsible:r})},{children:[this.renderOverlayText(),(0,l.jsx)(Ga,{mediaPayload:e,mediaType:t,width:i,height:s,closing:n})]}))}))}renderOverlayText(){const{label:e,description:t,parsedDescription:n,onLinkClick:i,closeImageOverlay:s}=this.props,{collapsible:r,collapsed:o,descriptionHeight:a,scrollable:c,height:u,determiningScrollability:h,scrollClass:p}=this.state,m=h||o?void 0:{maxHeight:u+"px"},g={};return t&&u&&c&&(g.height=a+"px",g.overflow="hidden"),(0,l.jsxs)("div",Object.assign({className:d()("tag-text-content",{collapsed:o,noScroll:!u||!c}),style:m,ref:e=>{this.textContainer=e}},{children:[e&&(0,l.jsx)("div",Object.assign({className:"tag-label",onClick:this.toggleCollapseText},{children:(0,l.jsx)("div",Object.assign({className:"labelText"},{children:e}))})),t&&(0,l.jsx)("div",Object.assign({style:g,className:d()(p,"wrappedDesc")},{children:(0,l.jsx)(Scrollbars,Object.assign({name:"mattertag-overlay-text",forceHidden:!1,waitToUpdate:h,singleScrollDirection:us.vertical,ref:this.scrollbarsRef,onScrollPositionChange:this.onScrollPositionChange},{children:(0,l.jsx)("div",{children:(0,l.jsx)(mc,{description:t,parsedDescription:n,onLinkClick:i,linkHandler:this.props.linkHandler})})}))})),(0,l.jsxs)("div",Object.assign({className:"buttons"},{children:[r&&(0,l.jsx)(Es.hU,{className:d()("tag-button","tag-collapse-button"),iconClass:"icon-dpad-down",onClick:this.toggleCollapseText}),(0,l.jsx)(Es.hU,{className:"tag-button",iconClass:"icon-close",onClick:s})]}))]}))}};Oc.contextType=m.I,Oc=Tc([_n.Z],Oc);const _c=Oc;class FullSizeOnSmallScreens extends r.Component{constructor(e){super(e),this.onResize=()=>{this.adjustSizing(this.props)},this.adjustSizing=(e=this.props,t=!0)=>{const n=FullSizeOnSmallScreens.isFullSized(e.editing);n!==this.state.fullSized&&(this.context.messageBus.broadcast(new is.Zi(n)),t&&this.setState({fullSized:n}))},this.state={fullSized:!1}}static isFullSized(e){return e&&(window.innerWidth<=700||window.innerHeight<=600)}componentDidMount(){window.addEventListener("resize",this.onResize),this.adjustSizing(this.props)}componentDidUpdate(){this.adjustSizing(this.props)}render(){const e=d()({"full-size-on-small-screens":this.state.fullSized,"floating-on-normal-screens":!this.state.fullSized});return(0,l.jsx)("div",Object.assign({className:e},{children:this.props.children}))}componentWillUnmount(){this.adjustSizing({editing:!1},!1),window.removeEventListener("resize",this.onResize)}}FullSizeOnSmallScreens.contextType=m.I;var Ac,wc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const Nc=new O.Z("billboard");var Pc;!function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.FAILED=3]="FAILED",e[e.ENABLED=4]="ENABLED"}(Pc||(Pc={}));let Ic=Ac=class Billboard extends r.Component{constructor(e,t){super(e,t),this.linkCount=0,this.linksClicked=[],this.linkEditorOpened=()=>this.setState({expanded:!0}),this.linkEditorClosed=()=>this.setState({expanded:!1}),this.getSavedData=()=>{const{label:e,description:t,mediaSrc:n,mediaType:i,stemVisible:s,enabled:r}=this.props.tag,{stemHeight:o,color:a}=this.props.view;return{visible:r,color:a,label:e,description:t,stemHeight:o,mediaSrc:n,mediaType:i,stemVisible:s}},this.updateBillboardSize=()=>{const{mediaWidth:e,mediaHeight:t}=this.state,{tag:n}=this.props;if(n.mediaType===Ia.z.photo||n.mediaType===Ia.z.rich||n.mediaType===Ia.z.video){const i=this.getDimensionsForMedia(n.mediaType,e,t);this.setState(Object.assign({},i))}},this.closeImageOverlay=()=>{const{overlay:e,toggleImageOverlay:t,tag:n}=this.props;e&&t(n.sid,!1)},this.onOpenOverlay=()=>{const{toggleImageOverlay:e,allowTagOverlay:t,tag:n}=this.props;t&&e(n.sid,!0)},this.onBillboardClicked=()=>{const{manager:e,toolOpen:t,tag:n,selected:i}=this.props;t&&e&&!i&&e.selectMattertag(n.sid)},this.setBillboardRef=e=>{this.billboardRef=e},this.updateTagDirection=()=>{const{direction:e}=this.state,{getTagContainer:t,tag:n}=this.props,{navigating:i,navigatingPosition:s,position:r,onTagDirectionChanged:o}=this.props.view,a=t();if(!a)return;const[l,c]=[a.offsetWidth,a.offsetHeight];let d;d=i&&s?Ac.getTagDirection(s.x,s.y,l,c):r?Ac.getTagDirection(r.x,r.y,l,c):Ac.getTagDirection(0,0,l,c),d!==e&&(o(n.sid,d),this.setState({direction:d}))},this.onLinkClick=e=>{if(void 0===e.link)return;-1===this.linksClicked.indexOf(e.link)&&this.linksClicked.push(e.link);const t=e.link.type;this.linkCount++,this.context.analytics.track("click_mattertag_link",{link_type:t,link_count:this.linkCount,links_clicked:this.linksClicked.length})};const n=this.getDimensionsForMedia(e.tag.mediaType,1024,1024),i=t.settings.getProperty(Oa.lc);this.embedly=new Embedly(i,t.queue),this.state={width:n.width,height:190,expanded:!1,mediaWidth:0,mediaHeight:0,mediaPayload:null,landscape:!1,active:!1,mediaLoadingState:e.mediaEnabled?Pc.NOT_LOADED:Pc.ENABLED,savedData:this.getSavedData(),direction:void 0};const s=e.tag,r=new Ya.gm((()=>({})),(e=>{s.onPropertyChanged("mediaSrc",e),s.onPropertyChanged("mediaType",e)}),(e=>{s.removeOnPropertyChanged("mediaSrc",e),s.removeOnPropertyChanged("mediaType",e)}));this.tagOnChangedSub=r.createSubscription((()=>{this.loadMedia(!0)}),!1)}componentDidMount(){const{view:e,manager:t}=this.props;this.updateTagDirection(),this.loadMedia(),!e.located||e.navigating&&!e.navigatingPosition||this.setState({active:!0}),window.addEventListener("resize",this.updateBillboardSize),t&&(this.context.messageBus.subscribe(OpenLinkEditorMessage,this.linkEditorOpened),this.context.messageBus.subscribe(CloseLinkEditorMessage,this.linkEditorClosed)),this.tagOnChangedSub.renew()}componentWillUnmount(){this.tagOnChangedSub.cancel(),window.removeEventListener("resize",this.updateBillboardSize),this.props.manager&&(this.context.messageBus.unsubscribe(OpenLinkEditorMessage,this.linkEditorOpened),this.context.messageBus.unsubscribe(CloseLinkEditorMessage,this.linkEditorClosed))}componentDidUpdate(e,t){const{manager:n,editing:i,tag:s,view:r,overlay:o}=this.props,{active:a}=this.state;if(n===e.manager||e.manager||(this.context.messageBus.subscribe(OpenLinkEditorMessage,this.linkEditorOpened),this.context.messageBus.subscribe(CloseLinkEditorMessage,this.linkEditorClosed)),i===e.editing&&o===e.overlay||this.updateBillboardSize(),r.closeTheTag||s&&s.mediaSrc!==e.tag.mediaSrc&&this.loadMedia(!0),a||e.view.navigatingPosition===r.navigatingPosition||this.updateTagDirection(),r.closeTheTag)a&&this.setState({active:!1});else if(a||!r.located||r.navigating&&!r.navigatingPosition||this.setState({active:!0}),i&&(!e.editing||null===this.state.savedData)){const e=this.getSavedData();e&&this.setState({savedData:e})}}loadMedia(e=!1){const{mediaType:t,mediaSrc:n}=this.props.tag,{mediaLoadingState:i}=this.state;if(Ac.isMediaTag(t)&&(e||![Pc.LOADING,Pc.FAILED,Pc.ENABLED].includes(i)))return this.setState({mediaLoadingState:Pc.LOADING}),this.embedly.getMediaDetails(t,n).then((e=>{if(e&&this.billboardRef){const n=this.getDimensionsForMedia(t,e.width,e.height);this.setState(Object.assign(Object.assign({},n),{mediaWidth:e.width,mediaHeight:e.height,mediaPayload:e.embedlyResponse,mediaLoadingState:Pc.LOADED}))}})).catch((e=>{if(Nc.debug(e),this.billboardRef){const e=this.getDimensionsForMedia(Ia.z.text,1024,1024);this.setState(Object.assign(Object.assign({},e),{mediaLoadingState:Pc.FAILED}))}}))}getDimensionsForMedia(e,t,n){if(e===Ia.z.text||e===Ia.z.none||e===Ia.z.error)return{width:298,height:0,landscape:!1};const{getTagContainer:i,editing:s,overlay:r}=this.props;let o=t,a=n;const l=Math.max(t,1)/Math.max(n,1),c=i();if(c)if(r)o=c.offsetWidth,a=c.offsetHeight;else{const n=e===Ia.z.photo;let i;i=s?n?150:340:80;const r=c.offsetWidth-100,d=c.offsetHeight-i;o=n?l>1?Math.max(Math.min(t,400,r),Ma):Math.max(Math.min(t,300),200):Math.max(Math.min(t,350,r),Ma),a=o/l,a>d&&(a=d,o=a*l)}return{width:o,height:a,landscape:l>1}}render(){const{overlay:e,editing:t,view:n,tag:i}=this.props,{closeTheTag:s}=n,{sid:r,mediaType:o,label:a,description:c}=i,{landscape:u,mediaLoadingState:h,active:p,direction:m,expanded:g}=this.state,f=Ac.isMediaTag(o)&&h!==Pc.FAILED&&h!==Pc.ENABLED,v=h===Pc.LOADING&&o===Ia.z.photo,b=t||e?void 0:this.getTagPositionStyle(),y=t||e||!m?void 0:"tag"+m.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase();const S=this.isImageTag(),E=f&&o===Ia.z.video,T=f&&(o===Ia.z.rich||v),O=E||T||S,_=a.length>0||c.length>0;return(0,l.jsx)(FullSizeOnSmallScreens,Object.assign({editing:t},{children:(0,l.jsx)("div",Object.assign({className:d()("tag-position",{"billboard-standard-view":!t&&!e,"billboard-overlay":e,"billboard-editing":t,"media-only-mattertag":!_&&O,"media-mattertag":O,"video-mattertag":E,"embed-mattertag":T,"image-mattertag":S,"link-popover-expanded":g}),style:b},{children:(0,l.jsx)("div",Object.assign({className:d()("tag-wrapper",{active:!s&&p})},{children:(0,l.jsx)("div",Object.assign({ref:this.setBillboardRef,className:d()("tag-container",[y],{"media-landscape":O&&u,"media-portrait":O&&!u}),onClick:this.closeImageOverlay},{children:this.renderBillboard(f)}))}))}),r)}))}renderBillboard(e){const{mediaPayload:t,width:n,height:i,savedData:s,mediaWidth:r,mediaHeight:o}=this.state,{overlay:a,selected:c,view:d,tag:u,allowTagOverlay:h}=this.props,p=o>0?r/o:void 0;if(a&&p){const{label:e,description:s,parsedDescription:r,mediaType:o}=u;return(0,l.jsx)(_c,{label:e,description:s,parsedDescription:r,mediaPayload:t,mediaType:o,maxWidth:n,maxHeight:i,mediaAspectRatio:p,closing:d.closeTheTag,closeImageOverlay:this.closeImageOverlay,onLinkClick:this.onLinkClick,linkHandler:this.props.linkHandler})}{const{sid:r}=u,o={mediaPayload:t,hasMedia:e},a=e&&!t?{width:n+"px"}:{},{editing:m,manager:g}=this.props;if(m&&g){const e=FullSizeOnSmallScreens.isFullSized(m);return(0,l.jsx)(dc,{id:r,getSavedData:this.getSavedData,manager:g,fullSized:e,mediaAspectRatio:p,media:o,mediaType:u.mediaType,closing:d.closeTheTag,label:u.label,description:u.description,originalValues:s,embedlyValidator:this.embedly})}{const e={width:n,height:i,bodyStyle:a,closing:d.closeTheTag};return(0,l.jsx)(Ec,{id:r,allowTagOverlay:h,selected:c,style:e,onClickBillboard:this.onBillboardClicked,onOpenOverlay:this.onOpenOverlay,onLinkClick:this.onLinkClick,linkHandler:this.props.linkHandler,media:o,mediaType:u.mediaType,mediaSrc:u.mediaSrc,label:u.label,parsedDescription:u.parsedDescription,description:u.description,customWidget:u.widgetFrame})}}}isImageTag(){const{tag:e}=this.props;return this.state.mediaLoadingState!==Pc.FAILED&&this.state.mediaLoadingState!==Pc.ENABLED&&e.mediaType===Ia.z.photo}getTagPositionStyle(){const{view:e}=this.props;if(e.located){const{position:t}=e;return{transform:`translate(${t?t.x:0}px, ${t?t.y:0}px)`}}return{pointerEvents:"none",visibility:"hidden"}}static isMediaTag(e){return e===Ia.z.photo||e===Ia.z.video||e===Ia.z.rich}};Ic.contextType=m.I,Ic.getTagDirection=(e,t,n,i)=>{const s=.2,r=1-(e+1)/(n=n||window.innerWidth)*2,o=1-(t+1)/(i=i||window.innerHeight)*2,a=o<-.2?0:o<s?1:2,l=r<-.2?2:r<s?1:0,c=Math.max(e,n-e);let d;return d=0===l?1===a?Aa.Pg.RIGHT:0===a?Aa.Pg.RIGHT_UP:Aa.Pg.RIGHT_DOWN:2===l?1===a?Aa.Pg.LEFT:0===a?Aa.Pg.LEFT_UP:Aa.Pg.LEFT_DOWN:1===a&&c>Ma?r<0?Aa.Pg.RIGHT:Aa.Pg.LEFT:2===a?Aa.Pg.DOWN:Aa.Pg.UP,Nc.debug(`Selected ${d} for [${e}, ${t}] in ${n}x${i} (${l}, ${a})`),d},Ic=Ac=wc([_n.Z],Ic);Ic.getTagDirection;var kc,Cc=n(90525),Lc=n(61709),Mc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Dc=kc=class CircularProgressBar extends r.Component{constructor(e){super(e),this.strokePattern=[0,100],this.strokeOffset=0,this.innerRadius=15.92,this.strokeWidth=1,this.drawRadius=this.innerRadius+this.strokeWidth/2,this.updateSvgAttributes(e),this.elementId=this.props.id||"circle-progress-"+kc.id++}UNSAFE_componentWillReceiveProps(e){this.updateSvgAttributes(e)}updateSvgAttributes(e){this.strokeWidth=e.barWidth||this.strokeWidth,this.innerRadius=e.innerRadius||this.innerRadius,this.drawRadius=this.innerRadius+this.strokeWidth/2;const t=2*this.drawRadius*Math.PI;this.strokeOffset=t*(e.startPosition||this.strokeOffset),this.strokePattern[0]=t*(0,ls.uZ)(e.progress,0,100)/100,this.strokePattern[1]=t-this.strokePattern[0]}render(){const{progressColor:e}=this.props,t=2*(this.innerRadius+this.strokeWidth),n=t/2;return(0,l.jsxs)("svg",Object.assign({id:this.elementId,className:d()("circular-progress",this.props.className),viewBox:`${-n} ${-n} ${t} ${t}`},{children:[(0,l.jsx)("circle",{className:"bar-bg",cx:"0",cy:"0",r:this.drawRadius,transform:"rotate(-90) "+(this.props.ccw?"scale(-1 1)":""),strokeDasharray:`${this.strokePattern[1]} ${this.strokePattern[0]}`,strokeDashoffset:this.strokeOffset-this.strokePattern[0],strokeWidth:this.strokeWidth,fill:"none"}),(0,l.jsx)("circle",{className:e?void 0:"progress",cx:"0",cy:"0",r:this.drawRadius,transform:"rotate(-90) "+(this.props.ccw?"scale(-1 1)":""),strokeDasharray:`${this.strokePattern[0]} ${this.strokePattern[1]}`,strokeWidth:this.strokeWidth,stroke:e,fill:"none"}),this.props.children]}))}};Dc.id=0,Dc=kc=Mc([_n.Z],Dc);class Tags extends r.Component{constructor(e){super(e),this.tagsRootRef=(0,r.createRef)(),this.bindings=[],this.isUnmounting=!1,this.onUpdateSelectedTag=()=>{if(!this.isUnmounting){const{selectedTag:e,overlay:t}=this.state,n=this.mattertagsViewData.selectedTag;n!==e&&(t&&e&&this.toggleImageOverlay(e,!1),this.setState({selectedTag:n}))}},this.onUpdateToolState=()=>!this.isUnmounting&&this.setState({toolState:this.mattertagsViewData.toolState}),this.onUpdateScreenPosition=()=>!this.isUnmounting&&this.setState({screenPosition:this.mattertagsViewData.screenPosition}),this.onUpdateProgress=()=>!this.isUnmounting&&this.setState({creationProgress:this.mattertagsViewData.progress}),this.onUpdateBillboards=()=>!this.isUnmounting&&this.setState({billboards:this.mattertagsViewData.activeBillboards.keys}),this.toggleImageOverlay=async(e,t)=>{if(!this.isUnmounting&&(this.props.allowTagOverlay||!t))if(this.setState({overlay:t}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.MATTERTAG_PHOTO,t)),t){this.context.messageBus.broadcast(new Pa.dJ(e,Na.V.OVERLAY));const t=e!==this.state.selectedTag?Os.n.Interpolate:Os.n.Instant,n=this.mattertagsData.getTag(e);this.context.commandBinder.issueCommand(new Cc.Y(n.sid,t))}else this.closeBillboard(e)},this.getTagContainer=()=>this.tagsRootRef.current,this.state={billboards:[],selectedTag:null,overlay:!1,toolState:Aa.rI.CLOSED,creationProgress:0,screenPosition:null}}componentDidMount(){const e=this.context.market;Promise.all([e.waitForData(Lc.n),e.waitForData(Aa.P5),this.context.engine.getModuleBySymbol(wa.y.DEEP_LINKS)]).then((([e,t,n])=>{this.init(e,t,n)}))}init(e,t,n){this.isUnmounting||(this.mattertagsData=e,this.mattertagsViewData=t,this.linkHandler=n,this.bindings.push(this.mattertagsViewData.onSelectedTagChanged(this.onUpdateSelectedTag),this.mattertagsViewData.onChanged(this.onUpdateBillboards),this.mattertagsViewData.onToolStateChanged(this.onUpdateToolState)),this.context.editMode&&this.bindings.push(this.mattertagsViewData.onScreenPositionChanged(this.onUpdateScreenPosition),this.mattertagsViewData.onProgressChanged(this.onUpdateProgress)),this.setState({selectedTag:this.mattertagsViewData.selectedTag,toolState:this.mattertagsViewData.toolState,screenPosition:this.mattertagsViewData.screenPosition,creationProgress:this.mattertagsViewData.progress,billboards:this.mattertagsViewData.activeBillboards.keys}))}componentWillUnmount(){this.isUnmounting=!0,this.bindings.forEach((e=>{e.cancel()})),this.bindings.length=0}componentDidUpdate(e){const{allowTagOverlay:t,toolOpen:n}=this.props;if(this.context.editMode&&(t!==e.allowTagOverlay||n!==e.toolOpen)){const e=this.mattertagsViewData&&this.mattertagsViewData.openTag;e&&(this.state.overlay?t||this.toggleImageOverlay(e,!1):this.closeBillboard(e))}}closeBillboard(e){this.mattertagsViewData.closeBillboard(e)}renderBillboards(){const{settings:e}=this.context,{overlay:t,selectedTag:n,toolState:i,billboards:s}=this.state,{toolOpen:r,manager:o,allowTagOverlay:a}=this.props,c=[],d=i===Aa.rI.CREATING||i===Aa.rI.PRESSING||i===Aa.rI.PLACING,u=!(!r||i!==Aa.rI.EDITING&&i!==Aa.rI.PLACED);return d||s.forEach((i=>{const s=n===i,d=u&&s,h=this.mattertagsViewData.getViewData(i),p=this.mattertagsData.getTag(i),m=e.tryGetProperty(Lr.sX,!1),g=d||!m;!p||h.closeTheTag&&d||c.push((0,l.jsx)(Ic,{editing:d,selected:s,overlay:t,allowTagOverlay:a,toolOpen:r,view:h,tag:p,manager:o,mediaEnabled:g,toggleImageOverlay:this.toggleImageOverlay,getTagContainer:this.getTagContainer,linkHandler:this.linkHandler},`billboard-${i}`))})),c}renderProgressCircle(){const{mobile:e}=this.props,{creationProgress:t,screenPosition:n,toolState:i}=this.state;if(!(i===Aa.rI.PRESSING&&t>0&&e)||!n)return null;const s={left:n.x-Tags.creationButtonRadius/2+"px",top:n.y-Tags.creationButtonRadius/2+"px"};return(0,l.jsx)("div",Object.assign({className:"point-button-wrapper",style:s},{children:(0,l.jsx)(Dc,Object.assign({className:d()({complete:1===t,reset:0===t}),progress:100*t,innerRadius:Tags.creationButtonRadius,barWidth:Tags.progressBarThickness},{children:(0,l.jsx)("circle",{className:"point",cx:"0",cy:"0",r:"22",transform:"rotate(-90)",fill:"#fff"})}))}))}render(){if(!this.mattertagsData||!this.mattertagsViewData)return null;const{toolOpen:e}=this.props,{toolState:t}=this.state,n=!(!e||t!==Aa.rI.EDITING&&t!==Aa.rI.PLACED);return(0,l.jsxs)("div",Object.assign({className:d()("overlay-layer","tags-layer",{"tag-editable":e,"tags-layer-editing":n,"tags-layer-displaying":!n}),ref:this.tagsRootRef},{children:[this.renderProgressCircle(),this.renderBillboards()]}))}}Tags.contextType=m.I,Tags.creationButtonRadius=132,Tags.progressBarThickness=8;var Rc=n(88507),xc=n(15099),jc=n(49807),Uc=n(84428),Hc=n(50084),Fc=n(92214),Bc=n(64038),Vc=n(32548);class RoomLabel extends r.Component{constructor(e){super(e)}render(){const{sid:e,position:t,text:n,readOnlyText:i,rotation:s,visible:r}=this.props,o={left:t.x+"px",top:t.y+"px",transform:s?`translate(-50%, -50%) rotate(${s}deg) `:"translate(-50%, -50%)"},a=i?`${n} ${i}`:n;return r?(0,l.jsx)("div",Object.assign({id:e,className:"label",style:o},{children:(0,l.jsx)("span",{children:a})})):null}}const Gc=new O.Z("label-ui");class LabelLayerComponent extends r.Component{constructor(e){super(e),this.subscriptions=[],this.reusableVector=new Uc.Vector3,this.isUnmounting=!1,this.inFloorPlan=e=>e===E.BD.FLOORPLAN,this.onCameraUpdate=()=>{this.inFloorPlan(this.props.viewmode)&&this.updateLabelPositions()},this.onViewTransitionStart=()=>{this.setState({inModeTransition:!0})},this.onViewTransitionEnd=async e=>{this.inFloorPlan((0,E.ty)(e.toMode))&&(this.setState({inModeTransition:!1}),this.updateLabelPositions())},this.updateFloorState=()=>{this.isUnmounting||this.setState({topMostFloorId:this.floorsViewData.topFloorId})},this.updateLabelPositions=async()=>{const e={};for(const t of this.labelData.getCollection()){this.reusableVector.set(t.position.x,t.position.y,t.position.z);const n=await this.context.commandBinder.issueCommand(new jc.b({worldPosition:this.reusableVector}));e[t.sid]=Object.assign({screenPosition:n},t)}this.isUnmounting||this.setState({labelPositions:e})},this.startMoveToFloor=()=>{this.setState({movingToFloor:!0})},this.endMoveToFloor=e=>{this.setState({movingToFloor:!1})},this.state={labelPositions:{},topMostFloorId:null,inModeTransition:!1,movingToFloor:!1}}async componentDidMount(){const e=this.context.messageBus;try{if(this.floorsViewData=await this.context.market.waitForData(S.c),this.isUnmounting)return;const e=this.floorsViewData.onChanged(this.updateFloorState);if(this.subscriptions.push(e),this.updateFloorState(),this.labelData=await this.context.market.waitForData(Rc.D),this.isUnmounting)return}catch(e){Gc.debug(e)}this.updateLabelPositions();const t=await this.context.market.waitForData(xc.M_);this.isUnmounting||(this.subscriptions.push(t.onChanged(this.onCameraUpdate),e.subscribe(Bc.S,this.startMoveToFloor),e.subscribe(Vc.P,this.endMoveToFloor),e.subscribe(Fc.Z,this.onViewTransitionStart),e.subscribe(Hc.Z,this.onViewTransitionEnd)),this.subscriptions.forEach((e=>e.renew())))}componentWillUnmount(){this.isUnmounting=!0,this.subscriptions.forEach((e=>e.cancel()))}renderLabel(e){const{currentFloorId:t}=this.props,{topMostFloorId:n,labelPositions:i,movingToFloor:s}=this.state,{floorId:r,screenPosition:o,text:a,visible:c,sid:d,rotation:u}=i[e],h=s?null:t;return(0,l.jsx)(RoomLabel,{position:o,rotation:u,text:a,visible:(!h&&n===r||h===r)&&c,sid:d},d)}render(){const{inModeTransition:e,labelPositions:t}=this.state,{viewmode:n}=this.props;if(!this.inFloorPlan(n)||e)return null;const i=[];return Object.keys(t).forEach((e=>{i.push(this.renderLabel(e))})),(0,l.jsx)("div",Object.assign({className:"overlay-layer labels-layer"},{children:i}))}}LabelLayerComponent.contextType=m.I;const Wc=$i(LabelLayerComponent);var zc=n(65143),Kc=n(40825),Yc=n(47357),qc=n(49315),$c=n(50566),Zc=n(18236),Qc=n(38562);const Xc=w(Qc.X);function Jc(e,t){return t?t.getNoteView(e):null}var ed=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let td=class Badge extends r.Component{constructor(e){super(e)}render(){const{iconClass:e,label:t,badgeStyle:n,onClick:i}=this.props;return(0,l.jsxs)("span",Object.assign({className:d()("badge",{clickable:!!i}),style:n,onClick:i},{children:[e&&(0,l.jsx)("span",{className:`icon badge-icon ${e}`}),t&&(0,l.jsx)("span",Object.assign({className:"badge-label"},{children:t}))]}))}};function nd({comment:e,noteView:t}){const n=t?t.created:e.created,{userData:i}=(0,r.useContext)(m.I),s=t?t.user.email:e.user.email,o=i.getUserDisplay(s),a=o.color,c=t?t.comments.length-1:0,d=1===c?`${c} reply`:`${c} replies`,u=""===e.text&&!(e.attachments.length>0)?"Original content was deleted":n.toLocaleString();return(0,l.jsxs)("header",Object.assign({className:"note-header"},{children:[(0,l.jsx)(td,{label:o.initials,badgeStyle:{color:a,borderColor:a}}),(0,l.jsxs)("div",Object.assign({className:"note-details"},{children:[(0,l.jsx)("span",Object.assign({className:"note-user"},{children:o.name})),c>0&&(0,l.jsx)("span",Object.assign({className:"note-summary-info note-replies"},{children:d})),(0,l.jsx)("div",Object.assign({className:"note-subheader"},{children:u}))]}))]}))}td=ed([_n.Z],td);var id=n(18482),sd=n(87443),rd=n(48452),od=n(71981);class OEmbedTextComponent extends r.Component{constructor(e){super(e)}render(){const{className:e,cover:t,data:n,onClick:i,style:s}=this.props,r=d()("oembed","oembed-text",e,{"oembed-text--cover":t}),o=n.provider_name?`${n.provider_name} content`:"Embedded content",a=n.author_name?`from ${n.author_name}`:"";return(0,l.jsxs)("div",Object.assign({className:r,style:s,onClick:i},{children:[n.title&&(0,l.jsx)("h3",{children:n.title}),(0,l.jsx)("p",{children:`${o} ${a}`})]}))}}const ad=["soundcloud","spotify"];class OEmbedThumbnailComponent extends r.Component{constructor(e){super(e)}getAttributes(){const{data:e}=this.props;let t=e.thumbnail_url,n=e.thumbnail_width,i=e.thumbnail_height;return(!t||!n||!i)&&e.type===od.ht.PHOTO&&(t=e.url,n=e.width,i=e.height),{url:t,width:n,height:i}}render(){const{className:e,cover:t,data:n,disabled:i,maxHeight:s,maxWidth:r,onClick:o,style:a}=this.props,{url:c,width:u,height:h}=this.getAttributes();if(!c||!u||!h)return(0,l.jsx)(OEmbedTextComponent,Object.assign({},this.props));const p=function(e,t){return e<128||t<128}(u,h),m=!i&&function(e){const t=(e.provider_name||"").toLowerCase();return e.type===od.ht.VIDEO?"giphy"!==t:!(e.type!==od.ht.RICH||!ad.includes(t))}(n),g=d()("oembed","oembed-thumbnail",e,{"oembed-thumbnail--cover":t,"oembed-thumbnail--cover--icon":t&&p}),f=Object.assign(Object.assign({},a),{backgroundImage:`url('${c}')`});if(!t){const{width:e,height:t}=function(e,t,n,i){let s=e,r=t;if(n&&s>n){const e=n/s;s*=e,r&&(r*=e)}if(r&&i&&r>i){const e=i/r;s*=e,r*=e}return{width:s,height:r}}(u,h,r,s);f.width=`${e}px`,f.height=`${t}px`}return t&&p&&(f.maxWidth=1.5*u+"px"),(0,l.jsx)("div",Object.assign({className:g,style:f,onClick:i?void 0:o},{children:m&&(0,l.jsx)(Es.hU,{className:"oembed-thumbnail__cta",iconClass:"icon-play-unicode",buttonStyle:Es.Dd.OVERLAY,buttonSize:Ts.qE.LARGE})}))}}const ld=({id:e,className:t,onClick:n,url:i,cover:s,style:o,containerWidth:a})=>{const{height:c}=Po(),u=(0,r.useCallback)((t=>{n&&n(t,e)}),[n,e]),h=d()({"image-cover":!!s},t),p=4/3,m=.8*c,g=Math.min(Math.round(a/p),m);return(0,l.jsxs)("div",Object.assign({className:d()("oembed-image fill-cover-image",h),style:Object.assign(Object.assign({},o),{minHeight:g,maxWidth:a}),onClick:n?u:void 0},{children:[(0,l.jsx)("div",{className:"fill-blur",style:{backgroundImage:`url('${i}')`}}),(0,l.jsx)("img",{className:d()("image",h),src:i,style:{maxHeight:Math.min(m,Math.round(a*p))},onClick:n?u:void 0})]}))};class OEmbedPhotoComponent extends r.Component{constructor(e){super(e)}render(){const{className:e,cover:t,data:n,onClick:i,style:s,containerWidth:r}=this.props,o=d()("oembed","oembed-photo",e,{"oembed-photo--cover":t});return(0,l.jsx)(ld,{url:n.url,style:s,onClick:i,className:o,containerWidth:r})}}function cd(e){const{className:t,children:n}=e;if(!n)return null;const i=d()("oembed","oembed-loading",t);return(0,l.jsx)("div",Object.assign({className:i},{children:n}))}var dd=n(62074);const ud={flickr:!0,instagram:!0},hd=/^<iframe.*>.*<\/iframe>$/;function pd(e){return hd.test(e)}function md(e,t){let n;return n=pd(e)?function(e){const t=document.createElement("div");t.innerHTML=e;const n=t.firstChild,i=n.style;return i.maxWidth="100%",i.maxHeight="100%",i.minWidth="",i.minHeight="",n}(e):function(e,t){const n=document.createElement("iframe");n.setAttribute("allow","encrypted-media; autoplay; fullscreen");let i="";return i=t&&t===dd.z.Instagram?"\n      <style>\n        html, body { padding: 0; margin: 0; border: 0; }\n        img { display: block; max-width: 100%; height: auto; border: 0; }\n        iframe { display: block; max-width: 100%; border: 0; }\n      </style>\n    ":"\n      <style>\n        html, body { padding: 0; margin: 0; border: 0; }\n        img, iframe { display: block; max-width: 100%; height: auto; border: 0; }\n      </style>\n    ",n.srcdoc=`<!doctype html>${i.replace(/\s+/g," ")}${e}`,n}(e,t),n.src||(e=>void 0!==e&&!!ud[e.toLowerCase()])(t)?n.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-presentation"):n.setAttribute("sandbox","allow-same-origin"),n}function gd(e){const{className:t,data:n,loadingComponent:i,onClick:s,style:o,onLoad:a}=e,[c,u]=(0,r.useState)(),[h,p]=(0,r.useState)(),[m,g]=(0,r.useState)(!0),[f,v]=(0,r.useState)(n.height);(0,r.useLayoutEffect)((()=>{const e=c;let t=null;if(e){for(;e.lastChild;)e.removeChild(e.lastChild);const i=md(n.html,n.provider_name);i.onload=()=>{a&&i&&a(i),g(!1)},e.appendChild(i),t=e=>{const t=(e=>{let t;try{t=JSON.parse(e.data)}catch(e){return}if("iframe.resize"!==t.context)return;const n=t.src.replace(/http(s?):\/\//,"//"),i=document.querySelector('iframe[src="'+n+'"]');return i?{iframe:i,height:t.height}:void 0})(e);t&&t.iframe===i&&v(t.height)},window.addEventListener("message",t)}return()=>{t&&window.removeEventListener("message",t)}}),[c,n.html,n.provider_name,a]);const b=(0,r.useCallback)((e=>{e&&(p(e.offsetWidth),u(e))}),[]),y=(0,r.useMemo)((()=>{var e;if(!f||!h)return"30%";let t;if((null===(e=n.provider_name)||void 0===e?void 0:e.toLowerCase())===dd.z.Flickr)t=(n.height||n.thumbnail_height||220)/n.width;else{t=(f||n.height||n.thumbnail_height||220)/h}return`${Math.max(30,100*t).toPrecision(4)}%`}),[f,h,n.height,n.width,n.thumbnail_height,n.provider_name]);return(0,l.jsxs)("div",Object.assign({className:d()("oembed-iframe--wrapper",t),style:o,onClick:s},{children:[(0,l.jsx)(cd,Object.assign({className:m?"":"is-loaded"},{children:i})),(0,l.jsx)("div",{className:d()("oembed-iframe__container",n.provider_name&&`oembed-iframe--src-${n.provider_name.replace(/\s/g,"-")}`,m&&"is-loading"),ref:b,style:{paddingBottom:y}})]}))}const fd=new O.Z("oembed-video");class OEmbedVideoComponent extends r.Component{constructor(){super(...arguments),this.isUnmounting=!1,this.onIFrameLoad=async e=>{if(!this.isUnmounting)try{const t=await function(e){const t=new Ua.Player(e);return new Promise(((e,n)=>{t.on("ready",(()=>{e(t)}))}))}(e);if(this.isUnmounting)return;(0,ts.tq)()||t.play()}catch(e){fd.warn("unable to autoplay video"),fd.warn(e)}}}componentWillUnmount(){this.isUnmounting=!0}render(){const{className:e,cover:t}=this.props;if(t)return(0,l.jsx)(OEmbedThumbnailComponent,Object.assign({},this.props));const n=d()("oembed","oembed-video",e);return(0,l.jsx)(gd,Object.assign({},this.props,{className:n,onLoad:this.onIFrameLoad}))}}const vd=e=>{const{className:t,cover:n}=e;if(n)return(0,l.jsx)(OEmbedThumbnailComponent,Object.assign({},e));const i=d()("oembed","oembed-rich",t);return(0,l.jsx)(gd,Object.assign({},e,{className:i}))};function bd(e){const{children:t,className:n}=e;if(!t)return null;const i=d()("oembed","oembed-error",n);return(0,l.jsx)("div",Object.assign({className:i},{children:t}))}const yd=new O.Z("oembed-errors");class OEmbedComponent extends r.Component{constructor(e){super(e),this.state={caughtError:void 0}}static getDerivedStateFromError(e){return{caughtError:e}}componentDidCatch(e){yd.warn(e.message)}componentDidUpdate(e){e.data!==this.props.data&&this.setState({caughtError:void 0})}render(){const{className:e,cover:t,data:n,disabled:i,renderError:s,loadingComponent:r,maxHeight:o,maxWidth:a,onClick:c,style:d,thumbnail:u,error:h,containerWidth:p}=this.props,{caughtError:m}=this.state;if(s&&(h||m))return(0,l.jsx)(bd,Object.assign({className:e},{children:s(h,m)}));if(!n)return(0,l.jsx)(cd,Object.assign({className:e},{children:r}));const g={className:e,cover:t,maxHeight:o,maxWidth:a,onClick:c,style:d,containerWidth:p};return u?(0,l.jsx)(OEmbedThumbnailComponent,Object.assign({data:n,disabled:i},g)):n.type===od.ht.PHOTO?(0,l.jsx)(OEmbedPhotoComponent,Object.assign({data:n},g)):n.type===od.ht.VIDEO?(0,l.jsx)(OEmbedVideoComponent,Object.assign({data:n,loadingComponent:r},g)):n.type===od.ht.RICH?(0,l.jsx)(vd,Object.assign({data:n,loadingComponent:r},g)):null}}const{ATTACHMENTS:Sd}=g.Z.SHOWCASE,Ed={200:Sd.ERROR_200_MESSAGE,401:Sd.ERROR_401_MESSAGE,403:Sd.ERROR_403_MESSAGE,404:Sd.ERROR_404_MESSAGE,429:Sd.ERROR_429_MESSAGE},Td=({error:e,compact:t,scriptError:n})=>{const[i,s]=(0,r.useState)(null),o=_(),a=(null==e?void 0:e.status)&&(e=>{const t=Ed[e];if(t)return t;switch(Math.floor(+e/100)){case 2:return Sd.ERROR_200_MESSAGE;case 4:return Sd.ERROR_4XX_MESSAGE;case 5:return Sd.ERROR_5XX_MESSAGE}})(e.status),c=n?n.message:o.t(a||Sd.FAILED_TO_LOAD_MESSAGE),d=(0,r.useCallback)((e=>{s(e)}),[]);return(0,l.jsx)("div",Object.assign({className:"embed-error-container",ref:d},{children:t?(0,l.jsx)(Je,{title:c,target:i}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"icon icon-error"}),(0,l.jsx)("div",Object.assign({className:"embed-error-message"},{children:c}))]})}))};var Od=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let _d=class EmbeddedMedia extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.renderError=(e,t)=>{const{compact:n}=this.props;return(0,l.jsx)(Td,{error:e,scriptError:t,compact:n})},this.state={embed:null,error:void 0}}componentDidMount(){this.getEmbeddedMedia()}componentWillUnmount(){this.isUnmounting=!0}componentDidUpdate(e){this.props.attachment.id!==e.attachment.id&&this.getEmbeddedMedia()}async getEmbeddedMedia(){const{attachment:e}=this.props,{commandBinder:t}=this.context;let n,i=null;try{if(i=await t.issueCommand(new sd.st(e)),!i)throw new Error("embed not found")}catch(e){n=e}this.isUnmounting||this.setState({attachmentId:e.id,embed:i,error:n})}render(){const{compact:e,maxHeight:t,maxWidth:n,onClick:i,style:s,thumbnail:r,containerWidth:o}=this.props,{embed:a,error:c}=this.state,u=a&&this.state.attachmentId===this.props.attachment.id,h=(0,l.jsx)("div",{className:"gui-spinner-icon"}),p=d()("embedded-media",{clickable:i&&!c});return(0,l.jsx)(OEmbedComponent,{className:p,data:u&&null!=a?a:void 0,style:s,loadingComponent:h,renderError:this.renderError,error:c,thumbnail:r,disabled:e,maxWidth:n,maxHeight:t,onClick:c?void 0:i,containerWidth:o})}};_d.contextType=m.I,_d=Od([_n.Z],_d);var Ad=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{ATTACHMENTS:wd}=g.Z.SHOWCASE,Nd=e=>{e.stopPropagation()};let Pd=class UploadedMedia extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.state={mediaUrl:""}}componentDidMount(){this.loadMedia()}componentWillUnmount(){this.isUnmounting=!0}componentDidUpdate(e){e.attachment.id!==this.props.attachment.id&&this.loadMedia()}getImageUrl(){const{attachment:e,cover:t,smartWidth:n,smartHeight:i}=this.props,{mediaUrl:s}=this.state;if(!(0,id.lV)(e))return null;if(!t||void 0===n||void 0===i||!(0,id.Uq)(e))return s;const r=-1!==s.indexOf("?");return`${s}${r?"&":"?"}height=${i}&crop=${n}:${i},smart`}async loadMedia(){const{attachment:e,thumbnail:t}=this.props,n=t&&e.thumbnailUrl?e.thumbnailUrl:e.url,i=await n.get();this.isUnmounting||this.setState({mediaUrl:i})}render(){const{attachment:e,inline:t,onClick:n,style:i,containerWidth:s}=this.props,{id:r,category:o,filename:a,bytes:c}=e;if(o!==rd.G$.UPLOAD)return null;const u=this.getImageUrl(),h=d()("attachment-view",{clickable:!!n});if(u)return(0,l.jsx)(ld,{id:r,url:u,style:i,onClick:n,className:h,containerWidth:s});{const{mediaUrl:e}=this.state,s=this.context.locale.t(wd.DOWNLOAD_TOOLTIP),r=c?(0,id.VV)(c):"";return(0,l.jsxs)("div",Object.assign({className:d()(h,"attachment-other",{inline:t}),onClick:n,style:i},{children:[!t&&(0,l.jsx)("div",{className:"icon icon-file"}),(0,l.jsxs)("div",Object.assign({className:"attachment-label"},{children:[(0,l.jsx)("div",Object.assign({className:"file-label"},{children:a})),r&&!t&&(0,l.jsx)("div",Object.assign({className:"size-label"},{children:r}))]})),!t&&e&&(0,l.jsx)("a",Object.assign({className:"link download-link","data-balloon":s,"data-balloon-pos":"down",href:e,download:!0,onClick:Nd},{children:(0,l.jsx)("span",{className:"icon-download"})}))]}))}}};function Id({id:e,srcDoc:t,onLoad:n}){const i=new URLSearchParams(new URL(e,window.location.href).search).get("parent"),s=(0,r.useCallback)((function(e){n(e.currentTarget,i||"")}),[n,i]);return(0,l.jsx)("iframe",{style:{width:"100%",height:"100%",border:0},srcDoc:t,onLoad:s,referrerPolicy:"no-referrer"},e)}Pd.contextType=m.I,Pd=Ad([_n.Z],Pd);const{ATTACHMENTS:kd}=g.Z.SHOWCASE,Cd=({attachment:e,onClick:t,inline:n,canDelete:i,hero:s,containerWidth:o,thumbnail:a})=>{const{commandBinder:c,locale:u}=(0,r.useContext)(m.I),h=(0,Mo.z)(),[p,{width:g}]=To(),f=(0,r.useMemo)((()=>u.t(kd.DELETE_ATTACHMENT_TOOLTIP)),[u]),v=(0,r.useCallback)((t=>{t.stopPropagation(),i&&(h.trackGuiEvent("attachments_click_remove"),c.issueCommand(new sd.$T(e)))}),[i,e,h,c]),b=(0,r.useCallback)((n=>{t&&t(n,e.id)}),[t,e]),y={attachment:e,thumbnail:a,containerWidth:o||g,onClick:t?b:void 0};return(0,l.jsxs)("div",Object.assign({className:d()("attachment",`attachment-category-${e.category}`,{inline:!!n,hero:!!s}),ref:p},{children:[e.category===rd.G$.UPLOAD?(0,l.jsx)(Pd,Object.assign({},y,{inline:n})):e.category===rd.G$.EXTERNAL?(0,l.jsx)(_d,Object.assign({},y,{compact:n})):Ld(e)?(0,l.jsx)(Id,{id:e.src,srcDoc:e.srcDoc,onLoad:e.onLoad}):(0,l.jsx)("div",{children:"Unknown Attachment Category"}),i&&(0,l.jsx)(nt,{icon:"close",className:"attachment-delete",size:tt.SMALL,variant:et.FAB,theme:"dark",tooltip:f,tooltipOptions:{placement:"bottom-start"},onClick:v})]}))};function Ld(e){return e.category===rd.G$.SANDBOX}function Md(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function Dd(e){void 0===e&&(e={});var t=e.onResize,n=(0,r.useRef)(void 0);n.current=t;var i=e.round||Math.round,s=(0,r.useRef)(),o=(0,r.useState)({width:void 0,height:void 0}),a=o[0],l=o[1],c=(0,r.useRef)(!1);(0,r.useEffect)((function(){return c.current=!1,function(){c.current=!0}}),[]);var d=(0,r.useRef)({width:void 0,height:void 0}),u=function(e,t){var n=(0,r.useRef)(null),i=(0,r.useRef)(null);i.current=t;var s=(0,r.useRef)(null);(0,r.useEffect)((function(){o()}));var o=(0,r.useCallback)((function(){var t=s.current,r=i.current,o=t||(r?r instanceof Element?r:r.current:null);n.current&&n.current.element===o&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:o,subscriber:e,cleanup:o?e(o):void 0})}),[e]);return(0,r.useEffect)((function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}}),[]),(0,r.useCallback)((function(e){s.current=e,o()}),[o])}((0,r.useCallback)((function(t){return s.current&&s.current.box===e.box&&s.current.round===i||(s.current={box:e.box,round:i,instance:new ResizeObserver((function(t){var s=t[0],r="border-box"===e.box?"borderBoxSize":"device-pixel-content-box"===e.box?"devicePixelContentBoxSize":"contentBoxSize",o=Md(s,r,"inlineSize"),a=Md(s,r,"blockSize"),u=o?i(o):void 0,h=a?i(a):void 0;if(d.current.width!==u||d.current.height!==h){var p={width:u,height:h};d.current.width=u,d.current.height=h,n.current?n.current(p):c.current||l(p)}}))}),s.current.instance.observe(t,{box:e.box}),function(){s.current&&s.current.instance.unobserve(t)}}),[e.box,i]),e.ref);return(0,r.useMemo)((function(){return{ref:u,width:a.width,height:a.height}}),[u,a.width,a.height])}const Rd=({attachments:e,onClick:t,onNavigate:n,startIndex:i=0})=>{const s=(0,Mo.z)(),[o,{width:a}]=To(),{ref:c,height:u}=Dd({box:"border-box"}),[h,p]=(0,r.useState)(i),m=e.length;(0,r.useEffect)((()=>{i!==h&&p(i)}),[i]);const g=(0,r.useCallback)((e=>{e.stopPropagation();const t=h+1<m?h+1:0;s.trackGuiEvent("attachments_viewer_next"),p(t),n&&n(t)}),[n,h,s,m]),f=(0,r.useCallback)((e=>{e.stopPropagation();const t=h>0?h-1:m-1;s.trackGuiEvent("attachments_viewer_prev"),p(t),n&&n(t)}),[n,h,s,m]),v=(0,r.useCallback)(((e,t)=>{e.stopPropagation();const i=t;s.trackGuiEvent("attachments_viewer_dot_clicked"),p(i),n&&n(i)}),[n,s]),b=e[h];if(!b)return null;const y=m>1;return(0,l.jsxs)("div",Object.assign({className:"attachment-carousel",ref:o},{children:[(0,l.jsx)("div",Object.assign({className:"attachment-carousel-view",style:{height:u}},{children:(0,l.jsx)("div",Object.assign({className:"attachment-container",ref:c},{children:(0,l.jsx)(Cd,{attachment:b,onClick:t,thumbnail:!1,containerWidth:a||318})}))})),y&&(0,l.jsx)(Es.hU,{className:d()("modal-nav","modal-prev"),iconClass:"icon-dpad-left",onClick:f}),y&&(0,l.jsx)(Es.hU,{className:d()("modal-nav","modal-next"),iconClass:"icon-dpad-right",onClick:g}),y&&(0,l.jsx)("div",Object.assign({className:"carousel-bullets"},{children:e.map(((e,t)=>(0,l.jsx)(nt,{className:d()("carousel-bullet",t===h&&"carousel-bullet-active"),icon:"simple-tag",onClick:v,onClickArgs:[t,e]},t)))}))]}))};function xd(e){const{attachments:t}=e,{analytics:n}=(0,r.useContext)(m.I);if(!(t.length>0))return null;const i=t.filter(id.lV);if(0===i.length)return null;return(0,l.jsx)(Rd,{attachments:i,startIndex:0,onClick:(t,i)=>{n.trackToolGuiEvent("notes","notes_preview_click_attachment"),t.stopPropagation(),e.onClick(i)}})}var jd=n(3922);function Ud(e){return e.get("m")||e.get("model")}function Hd(e){const t=-1!==e.indexOf("matterport.com/show"),n=-1!==e.indexOf(window.location.host+"/show");if(t||n){const t=new URL(e),n=jd.K.deserialize(e)||void 0,i=Ud(t.searchParams),s=Ud(new URLSearchParams(window.location.search));return{url:e,pose:n,modelId:i&&i!==s?i:void 0}}return{url:e}}var Fd=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{ATTACHMENTS:Bd}=g.Z.SHOWCASE;let Vd=class PendingUpload extends r.Component{constructor(e){super(e),this.onRemoveFailed=e=>{const{id:t,error:n}=this.props;n&&(e.stopPropagation(),this.context.commandBinder.issueCommand(new sd.Rh(t)))}}renderError(e){let t=Vo.ig.SMALL;const n=this.context.locale;let i=n.t(Bd.ERROR_UPLOAD_FAIL);switch(e){case rd.kV.FILE_TOO_LARGE:i=n.t(Bd.ERROR_FILE_TOO_LARGE);break;case rd.kV.EMPTY_FILE:i=n.t(Bd.ERROR_EMPTY_FILE);break;case rd.kV.OVER_QUOTA:i=n.t(Bd.ERROR_OVER_QUOTA),t=Vo.ig.MEDIUM;break;case rd.kV.PERMISSION_DENIED:i=n.t(Bd.ERROR_PERMISSION_DENIED)}const s=this.context.locale.t(Bd.REMOVE_TOOLTIP);return(0,l.jsxs)("div",Object.assign({className:"upload-status"},{children:[(0,l.jsx)(Vo.oO,Object.assign({className:"upload-error-message",content:i,position:Vo.lZ.DOWN,tooltipWidth:t,showOnClick:!0},{children:(0,l.jsx)("span",{className:"icon icon-error"})})),(0,l.jsx)(Es.hU,{iconClass:"icon-close",className:"attachment-delete",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.SMALL,tooltipMsg:s,tooltipPosition:Vo.lZ.DOWN_LEFT,onClick:this.onRemoveFailed})]}))}renderInProgress(){const{progress:e}=this.props;return(0,l.jsx)("div",Object.assign({className:"upload-status"},{children:(0,l.jsx)(Dc,{progress:e,innerRadius:20,barWidth:4})}))}render(){const{className:e,error:t}=this.props,n={"upload-error":!!t};return(0,l.jsx)("div",Object.assign({className:d()("attachment","attachment-upload",n,e)},{children:t?this.renderError(t):this.renderInProgress()}))}};Vd.contextType=m.I,Vd=Fd([_n.Z],Vd);var Gd=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Wd=class AnnotationAttachments extends r.Component{constructor(e){super(e),this.onViewAttachment=(e,t)=>{this.props.onViewAttachment&&this.props.onViewAttachment(t)},this.renderAttachment=(e,t)=>{const{inline:n,canDelete:i,attachments:s}=this.props,r=s.length,o=!n&&(1===r||0===t&&r>2),a=!!n||!o;return(0,l.jsx)(Cd,{attachment:e,inline:!!n,canDelete:!!i,hero:o,onClick:this.onViewAttachment,thumbnail:a},e.id)},this.renderPendingUpload=e=>(0,l.jsx)(Vd,{id:e.id,className:"inline",progress:e.progress,error:e.error},e.id)}render(){const{attachments:e,uploads:t,failures:n,inline:i,children:s}=this.props;return(0,l.jsxs)("div",Object.assign({className:d()("annotation-attachments",{"annotation-attachments-inline":!!i})},{children:[e.map(this.renderAttachment),t&&t.map(this.renderPendingUpload),n&&n.map(this.renderPendingUpload),s]}))}};Wd.contextType=m.I,Wd=Gd([_n.Z],Wd);var zd=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Kd=class TextBox extends r.Component{constructor(e){super(e),this.textElement=(0,r.createRef)(),this.editing=!1,this.isUnmounting=!1,this.stopPropagation=e=>e.stopPropagation(),this.onPaste=e=>{if(!e.clipboardData||!this.textElement.current)return;const{maxLength:t,textParser:n}=this.props,i=e.clipboardData.getData("text/plain");if(e.preventDefault(),t){const e=this.getSelectionRange();if(!e)return;const[s,r]=n.getHTMLWithoutSelection(this.textElement.current,e),o=e=>n.serializeHTMLToMarkdown(`${s}${i.slice(0,e)}${r}`).length<=t,a=Qa(i.length,o);if(a>=0){const e=i.slice(0,a);document.execCommand("insertHTML",!1,e)}}else document.execCommand("insertHTML",!1,i)},this.onKeyDown=e=>{if(!this.textElement.current)return;const{maxLength:t,onKeyDown:n,textParser:i}=this.props,s=this.getSelectionRange();if(t&&s){const[n,r]=i.getHTMLWithoutSelection(this.textElement.current,s),o=this.getTextInsertion(e,n,r);if(i.serializeHTMLToMarkdown(`${n}${o}${r}`).length>t)return e.preventDefault(),void e.stopPropagation()}(e.which||e.keyCode)===Yr.R.RETURN&&(e.shiftKey||e.altKey)?document.execCommand("insertText",!1,"\n"):n&&n(e)},this.onMouseDown=e=>{const{onClick:t,clickToEdit:n,readonly:i}=this.props;t&&(e.stopPropagation(),t(e)),i||!this.editing&&n&&this.toggleEditing(!0)},this.onFocus=e=>{this.textElement.current&&(this.context.messageBus.broadcast(new Bs.SN(this.textElement.current,!0)),this.props.onFocus&&this.props.onFocus(e))},this.onBlur=e=>{this.textElement.current&&(this.context.messageBus.broadcast(new Bs.SN(this.textElement.current,!1)),this.props.onBlur&&this.props.onBlur(e))}}componentDidMount(){this.replaceTextContent(this.props.text)}componentWillUnmount(){this.isUnmounting=!0,this.textElement.current&&this.textElement.current.blur()}componentDidUpdate(e){const{text:t,active:n}=this.props;t===e.text&&n===e.active||this.replaceTextContent(t)}shouldComponentUpdate(){return!1}getTextElement(){return this.textElement.current}getPlainText(){var e;return(null===(e=this.textElement.current)||void 0===e?void 0:e.innerText)||""}focus(){this.editing&&this.textElement.current&&this.textElement.current.focus()}toggleEditing(e,t=!0){clearTimeout(this.toggleEditingTimeout),this.toggleEditingTimeout=window.setTimeout((()=>{this.textElement.current&&!this.isUnmounting&&(this.editing!==e&&(this.editing=e,this.textElement.current.contentEditable=e?"true":"false",e?this.textElement.current.classList.add("editing"):this.textElement.current.classList.remove("editing")),e&&t?this.textElement.current.focus():this.textElement.current.blur())}),0)}replaceTextContent(e){clearTimeout(this.replaceTextContentTimeout),this.replaceTextContentTimeout=window.setTimeout((()=>{if(!this.textElement.current||this.isUnmounting)return;for(;this.textElement.current.firstChild;)this.textElement.current.removeChild(this.textElement.current.firstChild);const t=document.createDocumentFragment(),{textParser:n,markers:i,onClickAnchor:s,active:r,readonly:o,maxLength:a,clickableLinks:l}=this.props,c=void 0!==l?l:!r,d=n.deserialize(e,c,s,i);let u=0,h=!d.every((e=>{var n;const i=(null===(n=e.textContent)||void 0===n?void 0:n.length)||0;if(o&&a&&u+i>a){if("#text"===e.nodeName){const n=e.textContent||"";e.textContent=n.substring(0,a-u),t.appendChild(e)}return!1}return!o&&r&&"A"===e.nodeName&&(e.contentEditable="true"),u+=i,t.appendChild(e),!0}));h&&t.appendChild(document.createTextNode("...")),this.textElement.current.appendChild(t),this.focus(),o&&!h&&this.props.maxLines&&this.textElement.current.scrollHeight>this.textElement.current.offsetHeight&&(h=!0,this.textElement.current.appendChild(document.createTextNode("..."))),this.props.onTextReplaced&&this.props.onTextReplaced(h)}),0)}getSelectionRange(){const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0);if(this.textElement.current&&(this.textElement.current===t.commonAncestorContainer||this.textElement.current.compareDocumentPosition(t.commonAncestorContainer)&Node.DOCUMENT_POSITION_CONTAINED_BY))return t}return null}getTextInsertion(e,t,n){switch(e.which||e.keyCode){case Yr.R.LEFTARROW:case Yr.R.UPARROW:case Yr.R.RIGHTARROW:case Yr.R.DOWNARROW:case Yr.R.BACKSPACE:return"";case Yr.R.RETURN:const i=t.slice(-1),s=n.slice(0,1);return"\n"===i||"\n"===s?"\n":"\n\n";default:return e.key}}render(){const{placeholder:e,tabIndex:t,onInput:n,readonly:i,maxLines:s,text:r}=this.props,o=i&&s,a=o?{WebkitLineClamp:s}:{},c=d()("text-box-text",{clamped:o,placeholder:!!e&&!r});return(0,l.jsx)("div",{ref:this.textElement,className:c,style:a,role:"textbox",draggable:!1,spellCheck:!0,contentEditable:!1,placeholder:e,onMouseDown:this.onMouseDown,onKeyDown:i?void 0:this.onKeyDown,onKeyUp:i?void 0:this.stopPropagation,onFocus:i?void 0:this.onFocus,onBlur:i?void 0:this.onBlur,onInput:i?void 0:n,onPaste:i?void 0:this.onPaste,tabIndex:t})}};Kd.contextType=m.I,Kd=zd([_n.A],Kd);const Yd=Kd;var qd=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let $d=class ViewOnlyAnnotation extends r.Component{constructor(e){super(e),this.onTextReplaced=e=>{const{onTruncationChange:t}=this.props,n=this.state.truncated;this.setState({truncated:e}),t&&n!==e&&t(e)},this.onClickAnchor=e=>{const t=e.target,n=t.dataset.blocktype;if(e.stopPropagation(),n){const{annotationType:i,annotationId:s,linkHandler:r}=this.props,o={blockType:n,text:t.innerText,value:t.dataset.value,id:t.dataset.id};if(n===xa.C.LINK&&r&&o.value){e.preventDefault();const t=Hd(o.value),{url:n,modelId:a,pose:l}=t;a?r.handler.openLink({fullLink:n,modelId:a}):l?(r.handler.openLink({fullLink:n,pose:l}),this.context.commandBinder.issueCommand(new Zc.Aj(s,i))):(r.handler.openLink(n),this.context.messageBus.broadcast(new Pa.Ik(n)))}this.context.messageBus.broadcast(new $c.iP(i,s,o))}},this.state={truncated:!1}}renderAttachments(e){if(0===e.length)return null;const{onViewAttachment:t}=this.props;return(0,l.jsx)(Wd,{attachments:e,onViewAttachment:t})}render(){const{settings:e}=this.context,{text:t,textParser:n,edited:i,attachments:s,maxLength:r,maxLines:o,readMore:a}=this.props,{truncated:c}=this.state,d=e.tryGetProperty(Lr.sX,!1);return(0,l.jsxs)("div",Object.assign({className:"annotation-box"},{children:[(0,l.jsx)("div",Object.assign({className:"annotation-text-box"},{children:(0,l.jsx)(Yd,{text:t,textParser:n,onClickAnchor:d?void 0:this.onClickAnchor,clickableLinks:!d,onTextReplaced:this.onTextReplaced,maxLength:r,maxLines:o,readonly:!0})})),i&&(0,l.jsx)("div",Object.assign({className:"annotation-edited"},{children:"(edited)"})),a&&c&&(0,l.jsx)("div",Object.assign({className:"annotation-read-more"},{children:(0,l.jsx)("span",Object.assign({className:"link link-more"},{children:a}))})),s&&!d&&this.renderAttachments(s)]}))}};function Zd(e){return e?e.getTextParser():null}function Qd(e){return e?e.getLinkHandler():null}$d.contextType=m.I,$d=qd([_n.Z],$d);function Xd({text:e,noteId:t}){const n=function(){const e=Xc(),[t,n]=(0,r.useState)(Zd(e));return(0,r.useEffect)((()=>(t||n(Zd(e)),()=>{})),[e]),t}(),i=function(){const e=Xc(),[t,n]=(0,r.useState)(Qd(e));return(0,r.useEffect)((()=>(t||n(Qd(e)),()=>{})),[e]),t}();return(0,l.jsx)("div",Object.assign({className:d()("note-post",{"note-summary-info":!e})},{children:e&&n&&(0,l.jsx)($d,{text:e,textParser:n,linkHandler:i,maxLength:150,annotationType:Yc.J.NOTE,annotationId:t})}))}const{ANNOTATIONS:Jd}=g.Z.SHOWCASE;function eu(e){const{previewId:t}=e,n=_(),i=function(){const e=Xc(),[t,n]=(0,r.useState)(e?e.focusedComment:null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onFocusedCommentChanged(n);return n(e.focusedComment),()=>t.cancel()}),[e]),t}(),s=function(e){const t=Xc(),[n,i]=(0,r.useState)(Jc(e,t));return(0,r.useEffect)((()=>(n&&n.id===e||i(Jc(e,t)),()=>{})),[e,t]),n}(t);if(!s)return null;const o=s.comments.get(0),a=o&&o.attachments.length>0,c=s.comments.length>0,u=n.t(Jd.READ_MORE_MESSAGE),h=d()("annotation-preview-contents","note-preview-contents",{"viewable-media":a});return(0,l.jsxs)("div",Object.assign({className:h,onClick:t=>{t.stopPropagation(),e.onClick()}},{children:[o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xd,{attachments:o.attachments.values(),onClick:e.onClick}),(0,l.jsx)(nd,{noteView:s,comment:o}),(0,l.jsx)(Xd,{text:o.text,noteId:t})]}),i&&i.id!==o.id&&(0,l.jsxs)("div",Object.assign({className:"nested-comment-preview"},{children:[(0,l.jsx)(nd,{comment:i}),(0,l.jsx)(Xd,{text:i.text,noteId:t})]})),c&&(0,l.jsx)("div",Object.assign({className:"link link-more"},{children:u}))]}))}var tu=n(69826);const nu=w(tu.n);function iu(e){return e?e.getLinkHandler():null}function su(){const e=nu(),[t,n]=(0,r.useState)(iu(e));return(0,r.useEffect)((()=>(t||n(iu(e)),()=>{})),[e]),t}const ru=P("linkHandler",su),ou=({attachments:e,onClick:t})=>{const{settings:n}=(0,r.useContext)(m.I),i=n.tryGetProperty(Lr.sX,!1),s=(0,r.useCallback)(((n,i)=>{0!==e.length&&(n.stopPropagation(),t(n,i))}),[e,t]);return i||0===e.length?null:(0,l.jsx)("div",Object.assign({className:"tag-media"},{children:(0,l.jsx)(Rd,{attachments:e,startIndex:0,onClick:s})}))};var au=n(19822);function lu(e){const t=document.createElement("input");t.type="text",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}var cu=n(14909),du=n(53549);function uu(e){const{label:t,className:n,darkTheme:i,analyticAction:s,urlParams:o,includeCameraView:a,buttonVariant:c}=e,{analytics:u,editMode:h,locale:p,market:f,settings:v}=(0,r.useContext)(m.I),[b,E]=(0,r.useState)(!1),T=h||v.tryGetProperty(Lr.Yo,!1),O=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),_=(0,r.useCallback)((e=>{e.stopPropagation(),b||(!async function(e,t,n){const i=(0,cu.rI)();let s;if(n){const[e,n,i,r]=await Promise.all([t.waitForData(xc.M_),t.waitForData(y.O),t.waitForData(S.c),t.waitForData(du.Z)]);s=jd.K.serialize({cameraData:e,viewmodeData:n,floorsViewData:i,sweepData:r})}else s=jd.K.removeNavigationKeys();(0,cu.on)(s),Object.keys(e).forEach((t=>s.set(t,e[t]))),i.search=s.toString(),lu(i.toString())}(o,f,!!a),E(!0),u.trackGuiEvent(s))}),[o,b,E,u,h,a,f]);(0,r.useEffect)((()=>{if(!b)return()=>{};const e=window.setTimeout((()=>E(!1)),2500);return()=>window.clearTimeout(e)}),[b]);let A=c||(!t?et.FAB:et.TERTIARY),w="share",N=t,P=t?void 0:p.t(g.Z.COPY_LINK),I=!1;return b&&(A=et.TERTIARY,w=void 0,N=p.t(g.Z.SHARE_COPIED),P=void 0,I=!0),T?(0,l.jsx)("div",Object.assign({className:d()("url-link-copy",n,{"link-copied":b}),onClick:O},{children:(0,l.jsx)(nt,{icon:w,label:N,size:tt.SMALL,variant:A,theme:i?"dark":"light",disabled:I,tooltip:P,tooltipOptions:{placement:"bottom"},onClick:_})})):null}var hu=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};function pu(e){const{prefix:t,pin:n,id:i}=e,s=hu(e,["prefix","pin","id"]),{stemNormal:r,stemLength:o,anchorPosition:a}=n,c={[`${t}`]:i,"pin-pos":jd.K.encodeVector3((new Uc.Vector3).copy(r).setLength(o).add(a))};return(0,l.jsx)(uu,Object.assign({urlParams:c},s))}var mu=n(98461);const{TAGS:gu}=g.Z.SHOWCASE;function fu(e){const{tag:t,tagType:n}=e,{analytics:i,commandBinder:s,editMode:o,locale:a}=(0,r.useContext)(m.I),c=a.t(gu.SHARE_TAG_LABEL),u=o?a.t(gu.EDIT_TAG_LABEL):a.t(gu.DOCK_TAG_LABEL),h=o?"toggle-pencil":"dock",p=t.id,g=(0,r.useCallback)((e=>{e.stopPropagation(),o&&n===Yc.J.OBJECT?(i.trackToolGuiEvent("object_tags","object_tags_billboard_edit_tag"),s.issueCommand(new mu.OD(p))):(i.trackToolGuiEvent("tags",o?"tags_billboard_edit_tag":"tags_billboard_dock_tag"),s.issueCommand(new au.lt(p,Os.n.Interpolate,!0)))}),[p,o,n]);return n!==Yc.J.OBJECT||o?(0,l.jsxs)("header",Object.assign({className:d()("tag-billboard-header",{editable:o})},{children:[!o&&(0,l.jsx)(pu,{prefix:"tag",pin:t,id:t.id,label:c,darkTheme:!0,includeCameraView:!0,analyticAction:"tags_copy_share_link"}),(0,l.jsx)(nt,{icon:h,label:u,size:tt.SMALL,variant:et.TERTIARY,theme:"dark",onClick:g,reverse:!0})]})):null}var vu=n(22149);const bu=({keywords:e,className:t,maxVisible:n=2,theme:i})=>{const{engine:s}=(0,r.useContext)(m.I),o=(0,r.useCallback)((({text:e},t)=>{t.stopPropagation(),s.commandBinder.issueCommand(new hi.tT(p.w1.SEARCH,!0)),s.commandBinder.issueCommand(new vu.FZ([e]))}),[s]);return(0,l.jsx)(fn,{className:d()("tag-keywords",t),tokens:e.map((e=>({id:e,text:e}))),onTokenClick:o,maxVisibleTruncated:n,tokenSize:"small",tokenTheme:i})},yu=w(Lc.n);const Su=w(n(91997).h),{ANNOTATIONS:Eu}=g.Z.SHOWCASE,Tu=e=>{const t=new ja.v({links:!0}),n=(0,Mo.z)(),{editMode:i}=(0,r.useContext)(m.I),s=nu(),o=yu(),a=Su(),c=_(),u=su(),[h,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null),v=(0,r.useCallback)((e=>{n.trackToolGuiEvent("tags",e)}),[n]),b=(0,r.useCallback)(((t,n)=>{v("tags_billboard_click_attachment"),e.onClick(n)}),[e,v]),y=(0,r.useCallback)((t=>{v(i?"tags_billboard_click_to_edit":"tags_billboard_click_to_dock"),t.stopPropagation(),e.onClick()}),[e,v,i]),S=(0,r.useCallback)((e=>{p(e)}),[]);if((0,r.useEffect)((()=>{const t=e.previewType,n=e.previewId;if(s&&o)switch(t){case Yc.J.OBJECT:const e=null==a?void 0:a.suggestions.find((e=>e.id===n));if(!e)return;const t=e.mattertagId?o.getTag(e.mattertagId):void 0,i=e.toTagView(t);f(Object.assign({},i));break;case Yc.J.TAG:const r=o.getTag(n),l=s.getTagView(n);if(!r||!l)return void f(null);f(Object.assign({},l));const c=r.onChanged((()=>{const e=s.getTagView(n);e&&f(Object.assign({},e))}));return()=>c.cancel()}}),[o,null==a?void 0:a.suggestions,e.previewId,e.previewType,s]),!c)return null;return(()=>{if(!g)return null;const{layerWidth:n,layerHeight:i,previewType:s}=e,{id:r,label:o,attachments:a,description:p,keywords:m}=g,f=(0,id.Ug)(a),v=f.length>0,E=(0,id.ae)(a),T=E.length-3;T>0&&(E.length=3);const O=c.t(Eu.READ_MORE_MESSAGE),_=!o&&!p,A=d()("annotation-preview-contents","tag-billboard",{"viewable-media":v,"media-only":_,"has-keywords":m&&m.length>0});return(0,l.jsxs)("div",Object.assign({className:A,onClick:y},{children:[(0,l.jsx)(fu,{tag:g,tagType:s}),(0,l.jsxs)("div",Object.assign({className:"tag-billboard-contents"},{children:[(0,l.jsx)(ou,{attachments:f,layerWidth:n,layerHeight:i,onClick:b}),o&&(0,l.jsx)("div",Object.assign({className:"tag-billboard-title"},{children:o})),p&&(0,l.jsx)("div",Object.assign({className:"tag-billboard-description"},{children:(0,l.jsx)($d,{text:p,textParser:t,linkHandler:u,annotationType:Yc.J.TAG,annotationId:r,maxLength:100,maxLines:4,onTruncationChange:S})})),m&&(0,l.jsx)(bu,{keywords:m,theme:"dark",className:"tag-previewer-keywords"}),E.length>0&&(0,l.jsx)(Wd,Object.assign({attachments:E},{children:T>0&&(0,l.jsx)("div",Object.assign({className:"attachment attachments-truncated"},{children:(0,l.jsx)("div",Object.assign({className:"attachment-view attachment-other "},{children:(0,l.jsx)("div",Object.assign({className:"attachment-label"},{children:(0,l.jsxs)("div",Object.assign({className:"file-label"},{children:[T," more attachment",1===T?"":"s","..."]}))}))}))}))})),h&&(0,l.jsx)("div",Object.assign({className:"annotation-read-more"},{children:(0,l.jsx)("span",Object.assign({className:"link link-more"},{children:O}))}))]}))]}))})()};var Ou=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let _u=class AnnotationsLayer extends r.Component{constructor(e){super(e),this.bindings=[],this.isUnmounting=!1,this.clickOuterAnnotation=()=>{const{currentAnnotation:e}=this.state;if(!e)return;const{selectedAnnotation:t,dockedAnnotation:n}=this.viewData;if(t)this.closeAnnotation();else{n||e.annotationType===Yc.J.NOTE?this.dockAnnotation():this.selectAnnotation()}},this.onClickNote=async e=>{this.context.analytics.trackGuiEvent("click_note_preview"),this.clickInnerAnnotation(e)},this.onClickTag=e=>{this.context.analytics.trackGuiEvent("tags_click_tag_billboard"),this.clickInnerAnnotation(e)},this.onResize=e=>{e.forEach((e=>{const t=e.target;t.classList.contains("annotation-preview")&&"hidden"!==t.style.visibility||this.updatePositioning(!0)}))},this.updateScreenPosition=()=>{this.updatePositioning(!1)},this.updateCurrentAnnotation=()=>{const{billboardAnnotation:e}=this.viewData;this.setState({currentAnnotation:e}),e&&this.updatePositioning(!0)},this.updatePositioning=e=>{if(!this.pinsViewData||!this.layer||!this.viewData.billboardAnnotation)return;const t=this.pinsViewData.screenPosition;if(t){if(e){const e=t.x,n=t.y;this.updatePreviewDirection(e,n)}this.setState({screenPosition:t,layerWidth:this.layer.offsetWidth,layerHeight:this.layer.offsetHeight})}},this.updatePreviewDirection=(e,t)=>{if(!this.layer||!this.preview)return;const{layerWidth:n,layerHeight:i,previewDirection:s}=this.state,{offsetWidth:r,offsetHeight:o}=this.preview;if(!(n&&i&&r&&o))return;let a=s;const l=t<o,c=t>i-o,d=e<r,u=e>n-r;l&&c?a=u&&!d?zc.Od.LEFT:zc.Od.RIGHT:l?a=d?zc.Od.DOWN_RIGHT:u?zc.Od.DOWN_LEFT:zc.Od.DOWN:c?a=d?zc.Od.UP_RIGHT:u?zc.Od.UP_LEFT:zc.Od.UP:d&&u?a=l?zc.Od.DOWN:zc.Od.UP:d?a=zc.Od.RIGHT:u?a=zc.Od.LEFT:null===a&&(a=zc.Od.RIGHT),a!==s&&this.setState({previewDirection:a})},this.setLayerRef=e=>{this.layer=e,e&&(this.resizeObserver.observe(e),this.updatePositioning(!0))},this.setPreviewRef=e=>{this.preview=e,e&&(this.resizeObserver.observe(e),this.updatePositioning(!0))},this.state={currentAnnotation:null,screenPosition:null,previewDirection:null,layerWidth:0,layerHeight:0},this.resizeObserver=new fr(this.onResize)}componentDidMount(){const{market:e}=this.context;Promise.all([e.waitForData(qc.A),e.waitForData(Kc.B)]).then((([e,t])=>{this.isUnmounting||(this.viewData=e,this.pinsViewData=t,this.bindings.push(e.onChanged(this.updateCurrentAnnotation),t.onScreenPositionChanged(this.updateScreenPosition)),this.isUnmounting||(this.updateCurrentAnnotation(),this.updateScreenPosition()))}))}componentWillUnmount(){this.isUnmounting=!0;for(const e of this.bindings)e.cancel();this.resizeObserver&&this.resizeObserver.disconnect()}async clickInnerAnnotation(e){const{currentAnnotation:t}=this.state;if(t){const{messageBus:n}=this.context,{id:i,annotationType:s}=t;e&&!this.viewData.dockedAnnotation||s===Yc.J.OBJECT||this.dockAnnotation(),e&&n.broadcast(new $c.qk(s,i,e))}}dockAnnotation(){const{currentAnnotation:e}=this.state;if(!e)return;const{analytics:t,commandBinder:n}=this.context;t.trackGuiEvent(`annotations_dock_${e.annotationType}`),n.issueCommand(new Zc.bd(e.id,e.annotationType))}selectAnnotation(){const{currentAnnotation:e}=this.state;if(!e)return;const{analytics:t,commandBinder:n}=this.context;t.trackGuiEvent(`annotations_select_${e.annotationType}`),n.issueCommand(new Zc.oM(e.id,e.annotationType))}closeAnnotation(){const{currentAnnotation:e}=this.state;if(!e)return;const{commandBinder:t}=this.context;t.issueCommand(new Zc.Aj(e.id,e.annotationType))}getPreviewPositioning(){const{screenPosition:e,previewDirection:t}=this.state;if(e){let n="",i=e.x;switch(t){case zc.Od.UP:n="translate(-50%, -100%)";break;case zc.Od.DOWN:n="translateX(-50%)";break;case zc.Od.LEFT:n="translate(-100%, -50%)";break;case zc.Od.RIGHT:n="translateY(-50%)";break;case zc.Od.UP_LEFT:i+=50,n="translate(-100%, -100%)";break;case zc.Od.UP_RIGHT:n="translate(-50px, -100%)";break;case zc.Od.DOWN_LEFT:i+=50,n="translate(-100%, 5px)";break;case zc.Od.DOWN_RIGHT:n="translate(-50px, 5px)"}return{top:`${e.y}px`,left:`${i}px`,visibility:null===t?"hidden":"",transform:n}}return{}}render(){const{openModal:e,newTagsEnabled:t,notesEnabled:n}=this.props;if(e)return null;const{currentAnnotation:i,previewDirection:s,screenPosition:r,layerWidth:o,layerHeight:a}=this.state,c=null===r,u=a-100,h=t&&i&&i.annotationType===Yc.J.TAG,p=n&&i&&i.annotationType===Yc.J.NOTE,m=i&&i.annotationType===Yc.J.OBJECT;return(0,l.jsx)("div",Object.assign({ref:this.setLayerRef,className:"annotations-preview-layer"},{children:i&&(h||p||m)&&!c&&(0,l.jsxs)("div",Object.assign({ref:this.setPreviewRef,className:d()("annotation-preview",`annotation-preview-${s}`,{"tag-preview":!!h||!!m,"note-preview":!!p}),style:this.getPreviewPositioning(),onClick:this.clickOuterAnnotation},{children:[(h||m)&&(0,l.jsx)(Tu,{previewId:i.id,previewType:i.annotationType,onClick:this.onClickTag,layerWidth:o,layerHeight:u}),p&&(0,l.jsx)(eu,{previewId:i.id,onClick:this.onClickNote})]}))}))}};_u.contextType=m.I,_u=Ou([_n.Z],_u);var Au=n(96372),wu=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{ATTACHMENTS:Nu}=g.Z.SHOWCASE;let Pu=class AttachmentViewer extends r.Component{constructor(e){super(e),this.bindings=[],this.onKey=async e=>{const{attachments:t,attachmentIndex:n}=this.state,i=t.length;let s=-1;switch(e.keyCode){case Yr.R.ESCAPE:this.closeAttachmentViewer();break;case Yr.R.LEFTARROW:s=n-1,s<0&&(s=i-1);break;case Yr.R.RIGHTARROW:s=n+1,s>=i&&(s=0)}-1!==s&&this.setState({attachmentIndex:s}),e.stopPropagation()},this.closeAttachmentViewer=()=>{this.state.open&&this.context.commandBinder.issueCommand(new sd.xW(!1))},this.onModalToggled=e=>{e.modal!==di.P.ATTACHMENT||e.open||this.closeAttachmentViewer()},this.onViewerClosed=()=>{this.state.open&&(document.removeEventListener("keydown",this.onKey,{capture:!0}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.ATTACHMENT,!1)),this.setState({open:!1}))},this.onNavigate=e=>{this.setState({attachmentIndex:e})},this.onViewAttachments=e=>{const{attachments:t,attachmentId:n}=e,i=n||this.getCurrentAttachmentId(),s=t.findIndex((e=>e.id===i));0===t.length||-1===s?this.closeAttachmentViewer():(this.state.open||(document.addEventListener("keydown",this.onKey,{capture:!0}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.ATTACHMENT,!0)),this.setState({open:!0})),this.setState({attachments:t,attachmentIndex:s}))},this.state={open:!1,attachmentIndex:-1,attachments:[]}}componentDidMount(){const{messageBus:e}=this.context;this.bindings.push(e.subscribe(Au.O,this.onViewAttachments),e.subscribe(Au.Rd,this.onViewerClosed),e.subscribe(Bs.nV,this.onModalToggled))}componentWillUnmount(){for(const e of this.bindings)e.cancel();document.removeEventListener("keydown",this.onKey,{capture:!0})}getCurrentAttachmentId(){var e;const{attachmentIndex:t,attachments:n}=this.state;return(null===(e=n[t])||void 0===e?void 0:e.id)||void 0}render(){const{open:e,attachments:t,attachmentIndex:n}=this.state,{locale:i}=this.context,s=i.t(Nu.CLOSE_TOOLTIP),r=i.t(Nu.VIEWER_INDEX_COUNT,{currentNumber:n+1,totalNumber:t.length});return(0,l.jsx)("div",Object.assign({className:d()("overlay-layer","attachment-overlay",{open:e})},{children:e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",Object.assign({className:"overlay-top-bar"},{children:[(0,l.jsx)("div",Object.assign({className:"overlay-label"},{children:r})),(0,l.jsx)(Es.hU,{iconClass:"icon-close",buttonStyle:Es.Dd.OVERLAY,tooltipMsg:s,tooltipPosition:Vo.lZ.DOWN,onClick:this.closeAttachmentViewer})]})),(0,l.jsx)(Rd,{attachments:t,startIndex:n,onNavigate:this.onNavigate})]})}))}};Pu.contextType=m.I,Pu=wu([_n.Z],Pu);var Iu=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let ku=class LoadIndicator extends r.Component{constructor(e){super(e)}render(){const{showing:e}=this.props;return(0,l.jsx)(mi,Object.assign({open:e,className:d()("load-indicator",{"fade-in":e,"fade-out":!e})},{children:(0,l.jsx)("div",Object.assign({className:"center-container"},{children:(0,l.jsx)(Dc,{progress:33,barWidth:4,progressColor:"#ffffff"})}))}))}};ku=Iu([_n.Z],ku);const Cu=ku;class OverlayUi extends r.Component{constructor(e){super(e),this.propertiesToRefreshUi=[Oa.re,Fs.Mp,Ta.Nj,Ln.gx.Labels,Ji.Q5,Ta.Cu,Ji.gu],this.bindings=[],this.inTransition=!1,this.newTagsEnabled=!1,this.notesEnabled=!1,this.onLoadSpinnerMessage=e=>{this.setState({loadSpinnerOn:e.isOpen})},this.onLoadSpinnerSuppressMessage=e=>{this.setState({loadSpinnerSuppress:e.suppress})},this.refreshVisibility=()=>{const e=this.context.settings;this.setState({labelsOn:e.tryGetProperty(Ta.Nj,!1)&&e.tryGetProperty(Ln.gx.Labels,!1)&&!e.tryGetProperty(Ta.Cu,!1)&&!this.inTransition,mattertagsOn:e.tryGetProperty(Oa.re,!1),notesOn:e.tryGetProperty(Fs.Mp,!1)})},this.state={mattertagsOn:!1,labelsOn:!1,notesOn:!1,loadSpinnerOn:!1,loadSpinnerSuppress:!1}}componentDidMount(){for(const e of this.propertiesToRefreshUi)this.context.settings.onPropertyChanged(e,this.refreshVisibility);const e=()=>{this.inTransition=!0},t=()=>{this.inTransition=!1,this.refreshVisibility()};this.bindings.push(this.context.messageBus.subscribe(Fc.Z,e),this.context.messageBus.subscribe(Hc.Z,t),this.context.messageBus.subscribe(Bc.S,e),this.context.messageBus.subscribe(Vc.P,t),this.context.messageBus.subscribe(Bs.Z_,this.onLoadSpinnerMessage),this.context.messageBus.subscribe(Bs.bN,this.onLoadSpinnerSuppressMessage),this.context.messageBus.subscribe(ci.oR,(()=>this.setState({loadSpinnerSuppress:!0}))),this.context.messageBus.subscribe(ci.NR,(()=>this.setState({loadSpinnerSuppress:!1})))),this.refreshVisibility(),this.newTagsEnabled=this.context.settings.tryGetProperty(_a.RY,!1),this.notesEnabled=this.context.settings.tryGetProperty(Fs.IA,!1)}componentWillUnmount(){for(const e of this.propertiesToRefreshUi)this.context.settings.removeOnPropertyChanged(e,this.refreshVisibility);this.bindings.forEach((e=>e.cancel())),this.bindings.length=0}render(){const{labelsOn:e,mattertagsOn:t,notesOn:n,loadSpinnerOn:i,loadSpinnerSuppress:s}=this.state,{mobile:r,viewmode:o,openModal:a,tourState:c}=this.props,{tourPlaying:d}=c,u=i&&!s,h=t&&this.newTagsEnabled,p=n&&this.notesEnabled,m=p||h;return(0,l.jsxs)("div",Object.assign({className:"overlay-ui"},{children:[m&&(0,l.jsx)(Pu,{}),m&&(0,l.jsx)(_u,{notesEnabled:p,newTagsEnabled:h,openModal:a}),t&&!this.newTagsEnabled&&(0,l.jsx)(Tags,{tourPlaying:d,toolOpen:!1,mobile:r,allowTagOverlay:!0}),e&&(0,l.jsx)(Wc,{viewmode:o}),(0,l.jsx)(Cu,{showing:u})]}))}}function Lu(e){const t=fi(),{activeStep:n,currentStep:i,highlights:s}=e,r=s[i],o=n!==i,a=((null==r?void 0:r.title)||(null==r?void 0:r.description))&&t&&!o;return(0,l.jsx)("div",Object.assign({className:"overlay-layer"},{children:(0,l.jsx)("div",{className:d()("tour-story-scrim",{active:a})})}))}OverlayUi.contextType=m.I;var Mu=n(88599),Du=n(37367);const Ru={"en-US":"./terms/terms-en-US.html",es:"./terms/terms-es-MX.html",fr:"./terms/terms-fr-FR.html",de:"./terms/terms-de-DE.html",ru:"./terms/terms-ru-RU.html",ja:"./terms/terms-ja-JP.html","zh-CN":"./terms/terms-zh-CN.html","zh-TW":"./terms/terms-zh-TW.html",ko:"./terms/terms-ko-KR.html",nl:"./terms/terms-nl-NL.html",it:"./terms/terms-it-IT.html",pt:"./terms/terms-pt-BR.html"};class Terms extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.onScrollPositionChange=()=>{this.scrollbars&&this.setState({scrollClass:this.scrollbars.scrollPosition.vertical})},this.onClose=()=>{this.setState({showing:!1}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.TERMS,!1))},this.stopPropagation=e=>{e.stopPropagation()},this.state={termsText:"",showing:!1,scrollClass:fs.None}}async componentDidMount(){const e=function(e){if((0,Du.y)(e)&&e in Ru)return Ru[e]}(this.context.locale?this.context.locale.languageCode:Mu.k$);let t="";if(e)try{t=await this.context.queue.get(e)}catch(e){t=this.context.locale.t(g.Z.TERMS_FAIL)}else t=this.context.locale.t(g.Z.TERMS_FAIL);window.requestAnimationFrame((()=>{this.isUnmounting||this.setState({showing:!0,termsText:t})}))}componentWillUnmount(){this.isUnmounting=!0}componentDidUpdate(e){this.state.termsText!==e.termsText&&(this.termsTextDiv.innerHTML=this.state.termsText,[].slice.call(this.termsTextDiv.querySelectorAll("a")).forEach((e=>{e.setAttribute("target","_blank"),e.classList.add("link")})))}render(){const{showing:e,scrollClass:t}=this.state;return(0,l.jsxs)("div",Object.assign({className:d()("modal","terms-modal",{"faded-in":e,[t]:!0}),onClick:this.stopPropagation},{children:[(0,l.jsx)("div",Object.assign({id:"terms-wrapper"},{children:(0,l.jsx)(Scrollbars,Object.assign({name:"terms",ref:e=>this.scrollbars=e,onScrollPositionChange:this.onScrollPositionChange,forceHidden:os(window)},{children:(0,l.jsx)("div",{ref:e=>this.termsTextDiv=e,id:"terms-text"})}))})),(0,l.jsx)(An.P,{buttonStyle:An.A.LIGHT,onClose:this.onClose})]}))}}Terms.contextType=m.I;var xu=n(24440),ju=n(69920),Uu=n(75783),Hu=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const Fu=new O.Z("vr-select");let Bu=class VrModal extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.stopPropagation=e=>{e.stopPropagation()},this.renderHeadsetHeader=()=>{const{locale:e}=this.context,{vrPlatform:t}=this.state;switch(t){case xu.bk.unsupported:case xu.bk.webxr:return(0,l.jsxs)("div",Object.assign({className:"headset-header dark"},{children:[(0,l.jsxs)("span",Object.assign({className:"headset-titles"},{children:[(0,l.jsx)("h2",{children:e.t(g.Z.VR_RECOMMENDED)}),(0,l.jsx)("h1",{children:e.t(g.Z.VR_QUEST)})]})),(0,l.jsx)("img",{className:"headset-quest",src:n(49529),height:200,width:342})]}));default:return null}},this.renderBodyText=()=>{const{locale:e}=this.context,{vrPlatform:t}=this.state;switch(t){case xu.bk.unsupported:case xu.bk.webxr:return(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:e.t(g.Z.VR_SUPPORTS)})});default:return null}},this.getFooterButtons=()=>{const{locale:e}=this.context,{vrPlatform:t}=this.state,n=[];n.push((0,l.jsx)(Ts.zx,Object.assign({buttonStyle:Ts.ZJ.OUTLINE,className:d()("button-inline","cancel"),onClick:this.onLearnMoreClicked},{children:e.t(g.Z.VR_LEARN_MORE_CAPS)}),"learn-more"));return t===xu.bk.webxr&&n.push((0,l.jsx)(Ts.zx,Object.assign({buttonState:Ts.BN.ENABLED,className:d()("button-inline","confirm"),onClick:this.onActionClicked},{children:e.t(g.Z.VR_ENTER)}),"enter-vr")),n},this.closeModal=()=>{this.context.commandBinder.issueCommand(new ui.Bz(di.P.VR_SELECT,!1))},this.onCloseClicked=()=>{this.context.analytics.trackGuiEvent("vr_modal_close"),this.closeModal()},this.onActionClicked=()=>{switch(this.state.vrPlatform){case xu.bk.webxr:this.startWebXR(),this.closeModal()}},this.onLearnMoreClicked=()=>{window.open("https://support.matterport.com/hc/en-us/articles/360050098973-Exploring-Matterport-Spaces-in-VR-","_blank"),this.context.analytics.trackGuiEvent("vr_learn_more")},this.startWebXR=()=>{const{analytics:e,commandBinder:t}=this.context;t.issueCommand(new Uu.j({type:"immersive-vr",features:["local-floor"]})).then((t=>{if(t){e.trackGuiEvent("vr_enter_app");const n=()=>{e.trackGuiEvent("vr_exit_app"),t.removeEventListener("end",n)};t.addEventListener("end",n)}else Fu.error("requestPresent Failed"),e.trackGuiEvent("vr_present_error"),this.updatePlatformState()})).catch((t=>{Fu.error("requestPresent Failed:",t),e.trackGuiEvent("vr_present_error")}))},this.state={vrPlatform:null}}async componentDidMount(){ju.Z.apiExists()&&navigator.xr.addEventListener("ondevicechange",this.updatePlatformState),await this.updatePlatformState(),this.context.analytics.trackGuiEvent("click_vr_button")}componentWillUnmount(){this.isUnmounting=!0,ju.Z.apiExists()&&navigator.xr.removeEventListener("ondevicechange",this.updatePlatformState)}render(){const{isMobile:e}=this.props,{locale:t}=this.context,n=d()("vr-modal","modal","full-modal",{mobile:e,desktop:!e});return(0,l.jsxs)("dialog",Object.assign({className:n,onClick:this.stopPropagation},{children:[(0,l.jsxs)("header",Object.assign({className:"modal-header"},{children:[(0,l.jsx)("div",Object.assign({className:"modal-title"},{children:t.t(g.Z.VR_VIEW_SPACE)})),(0,l.jsx)(An.P,{onClose:this.onCloseClicked})]})),this.renderHeadsetHeader(),(0,l.jsx)("div",Object.assign({className:"modal-body"},{children:this.renderBodyText()})),(0,l.jsx)("div",Object.assign({className:"modal-footer"},{children:this.getFooterButtons()}))]}))}async updatePlatformState(){const e=await(0,xu.pl)();this.isUnmounting||(this.setState({vrPlatform:e}),Fu.debug(this.state))}};Bu.contextType=m.I,Bu=Hu([_n.Z],Bu);const Vu=Bu;class CtaSmall extends r.Component{render(){const{isMobile:e}=this.props,{locale:t}=this.context;return(0,l.jsx)("div",Object.assign({className:"cta"},{children:(0,l.jsx)("h1",Object.assign({className:d()({mobile:e})},{children:t.t(e?g.Z.MOBILE_SHORT_CTA:g.Z.DESKTOP_SHORT_CTA)}))}))}}CtaSmall.contextType=m.I;const Gu={mouse:{click:n(41891),clickInside:n(70626),dragLeft:n(73993),dragRight:n(26668),play:n(31891),positionLeft:n(82906),positionRight:n(64991),zoom:n(12136)},gesture:{drag:n(72145),dragTwoFinger:n(12742),pinch:n(5435),position:n(67649),positionTwoFinger:n(2433),tap:n(24367),tapInside:n(90619),play:n(94874)},keyboard:{all:n(76064),inside:n(64549),leftRight:n(81202),spaceBar:n(71002),upDown:n(42135),zoom:n(26407)},moreHelp:{view360:n(86533),mattertag:n(14653)}},{HELP:Wu}=g.Z.SHOWCASE;class CtaDesktop extends r.Component{constructor(){super(...arguments),this.keys={header:g.Z.DESKTOP_SHORT_CTA,tourHeader:g.Z.CTA_TOUR_COMPLETE,tourSubhead:g.Z.CTA_EXPLORE_SPACE,restartTour:g.Z.CTA_RESTART_TOUR,share:g.Z.CTA_SHARE,move:g.Z.MOVE,inside:g.Z.INSIDE,rotate:g.Z.ROTATE,play:g.Z.PLAY,zoom:g.Z.ZOOM},this.clickInside={Icon:Gu.mouse.clickInside,Label:this.keys.inside,FooterIcon:Gu.keyboard.inside,Alt:Wu.ALT_MOUSE_CLICKINSIDE,FooterAlt:Wu.ALT_KEYBOARD_INSIDE},this.clickMove={Icon:Gu.mouse.positionRight,Label:this.keys.move,FooterIcon:"",Alt:Wu.ALT_MOUSE_POSITIONRIGHT},this.moveUpDown={Icon:Gu.mouse.click,Label:this.keys.move,FooterIcon:Gu.keyboard.upDown,Alt:Wu.ALT_MOUSE_CLICK,FooterAlt:Wu.ALT_KEYBOARD_UPDOWN},this.play={Icon:Gu.mouse.play,Label:this.keys.play,FooterIcon:null,Alt:Wu.ALT_MOUSE_PLAY},this.zoom={Icon:Gu.mouse.zoom,Label:this.keys.zoom,FooterIcon:Gu.keyboard.zoom,Alt:Wu.ALT_MOUSE_ZOOM,FooterAlt:Wu.ALT_KEYBOARD_ZOOM},this.dragMove={Icon:Gu.mouse.positionLeft,Label:this.keys.move,FooterIcon:null,Alt:Wu.ALT_MOUSE_POSITIONLEFT},this.dragRotateLeft={Icon:Gu.mouse.dragLeft,Label:this.keys.rotate,FooterIcon:Gu.keyboard.leftRight,Alt:Wu.ALT_MOUSE_DRAGLEFT,FooterAlt:Wu.ALT_KEYBOARD_LEFTRIGHT},this.dragRotateRight={Icon:Gu.mouse.dragRight,Label:this.keys.rotate,FooterIcon:Gu.keyboard.leftRight,Alt:Wu.ALT_MOUSE_DRAGRIGHT,FooterAlt:Wu.ALT_KEYBOARD_LEFTRIGHT},this.left=this.clickInside,this.center=this.clickMove,this.right=this.play,this.close=async()=>{const{commandBinder:e}=this.context;await e.issueCommand(new ui.Bz(di.P.CTA,!1))},this.restartTour=async()=>{const{commandBinder:e}=this.context;this.context.analytics.trackGuiEvent("restart_highlights_from_cta"),this.close(),await e.issueCommand(new T.rU(0,!0)),e.issueCommand(new T.TH)},this.share=async()=>{const{commandBinder:e}=this.context;this.context.analytics.trackGuiEvent("click_share_button_from_cta"),this.close(),e.issueCommand(new ui.Bz(di.P.SHARE,!0))}}render(){const{viewmode:e,isHelpCta:t,shareEnabled:n}=this.props,{locale:i}=this.context;this.configureViewmodeSpecifics(e);const s=i.t(t?this.keys.header:this.keys.tourHeader),r=t?"":i.t(this.keys.tourSubhead),o=i.t(g.Z.CTA_SHARE),a=i.t(g.Z.CTA_RESTART_TOUR);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",Object.assign({className:d()({cta:!0})},{children:[(0,l.jsxs)("h1",{children:[s,(0,l.jsx)("div",Object.assign({className:"subhead"},{children:r}))]}),(0,l.jsx)("img",{src:this.left.Icon,alt:this.left.Alt}),(0,l.jsx)("h2",{children:i.t(this.left.Label)}),this.left.FooterIcon?(0,l.jsx)("img",{className:"footer-icon",src:this.left.FooterIcon,alt:this.left.FooterAlt}):(0,l.jsx)("span",{}),(0,l.jsx)("img",{src:this.center.Icon,alt:this.center.Alt}),(0,l.jsx)("h2",{children:i.t(this.center.Label)}),this.center.FooterIcon?(0,l.jsx)("img",{className:"footer-icon",src:this.center.FooterIcon,alt:this.center.FooterAlt}):(0,l.jsx)("span",{}),(0,l.jsx)("img",{src:this.right.Icon,alt:this.right.Alt}),(0,l.jsx)("h2",{children:i.t(this.right.Label)}),this.right.FooterIcon?(0,l.jsx)("img",{className:"footer-icon",src:this.right.FooterIcon,alt:this.right.FooterAlt}):(0,l.jsx)("span",{})]})),(0,l.jsx)(nt,{className:"close-button",theme:"dark",icon:"close",variant:et.TERTIARY,onClick:this.close}),!t&&(0,l.jsxs)("div",Object.assign({className:"footer"},{children:[(0,l.jsxs)("div",Object.assign({className:"restart-tour",onClick:this.restartTour},{children:[a," ",(0,l.jsx)("span",{className:"icon-restart"})]})),n&&(0,l.jsx)(nt,{className:"share",theme:"dark",label:o,icon:"share2",variant:et.SECONDARY,onClick:this.share})]}))]})}configureViewmodeSpecifics(e){switch(e){case E.BD.INSIDE:this.left=this.dragRotateLeft,this.center=this.moveUpDown,this.right=this.props.isHelpCta?this.play:this.zoom;break;case E.BD.OUTSIDE:case E.BD.DOLLHOUSE:this.left=this.dragRotateLeft,this.center=this.clickMove,this.right=this.clickInside;break;case E.BD.FLOORPLAN:this.left=this.dragMove,this.center=this.dragRotateRight,this.right=this.clickInside}}}CtaDesktop.contextType=m.I;const{HELP:zu}=g.Z.SHOWCASE;class CtaMobile extends r.Component{constructor(){super(...arguments),this.keys={shortCta:g.Z.MOBILE_SHORT_CTA,tourHeader:g.Z.CTA_TOUR_COMPLETE,tourSubhead:g.Z.CTA_EXPLORE_SPACE,move:g.Z.MOVE,inside:g.Z.INSIDE,rotate:g.Z.ROTATE,play:g.Z.PLAY,zoom:g.Z.ZOOM},this.clickInside={Icon:Gu.gesture.tapInside,Label:this.keys.inside,Alt:zu.ALT_GESTURE_TAPINSIDE},this.clickMove={Icon:Gu.gesture.tap,Label:this.keys.move,Alt:zu.ALT_GESTURE_TAP},this.dragRotate={Icon:Gu.gesture.drag,Label:this.keys.rotate,Alt:zu.ALT_GESTURE_DRAG},this.dragMove={Icon:Gu.gesture.position,Label:this.keys.move,Alt:zu.ALT_GESTURE_POSITION},this.play={Icon:Gu.gesture.play,Label:this.keys.play,Alt:zu.ALT_GESTURE_PLAY},this.zoom={Icon:Gu.gesture.pinch,Label:this.keys.zoom,Alt:zu.ALT_GESTURE_PINCH},this.left=this.dragRotate,this.center=this.clickInside,this.right=this.play}render(){const e=d()({mobile:!0}),{viewmode:t,isHelpCta:n}=this.props,{locale:i}=this.context;this.configureViewmodeSpecifics(t);const s=i.t(n?this.keys.shortCta:this.keys.tourHeader),r=n?"":i.t(this.keys.tourSubhead);return(0,l.jsxs)("div",Object.assign({className:d()({cta:!0,mobile:!0})},{children:[(0,l.jsxs)("h1",Object.assign({className:e},{children:[s,(0,l.jsx)("div",Object.assign({className:"subhead"},{children:r}))]})),(0,l.jsx)("h2",Object.assign({className:e},{children:i.t(this.left.Label)})),(0,l.jsx)("img",{src:this.left.Icon}),(0,l.jsx)("h2",Object.assign({className:e},{children:i.t(this.center.Label)})),(0,l.jsx)("img",{src:this.center.Icon}),(0,l.jsx)("h2",Object.assign({className:e},{children:i.t(this.right.Label)})),(0,l.jsx)("img",{src:this.right.Icon})]}))}configureViewmodeSpecifics(e){switch(e){case E.BD.INSIDE:this.left=this.dragRotate,this.center=this.clickMove,this.right=this.props.isHelpCta?this.zoom:this.play;break;case E.BD.DOLLHOUSE:case E.BD.OUTSIDE:this.left=this.dragRotate,this.center=this.clickInside,this.right=this.props.isHelpCta?this.zoom:this.play;break;case E.BD.FLOORPLAN:this.left=this.dragMove,this.center=this.clickInside,this.right=this.props.isHelpCta?this.zoom:this.play}}}CtaMobile.contextType=m.I;var Ku=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const Yu=new O.Z("cta");var qu,$u;!function(e){e[e.NONE=0]="NONE",e[e.LARGE=1]="LARGE",e[e.SMALL=2]="SMALL"}(qu||(qu={})),function(e){e[e.HELP=0]="HELP",e[e.TOUR=1]="TOUR"}($u||($u={}));let Zu=class Cta extends r.Component{constructor(e){super(e),this.styles=[qu.NONE],this.bindings=[],this.handleInteraction=()=>{this.props.showCta&&(this.setState({seenCta:!0}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.CTA,!1)))},this.onTourEnded=e=>{const{ctaSource:t,seenCta:n}=this.state;t!==$u.TOUR||n||(this.setState({seenCta:!0}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.CTA,!0)))},this.onTourStarted=()=>{this.state.ctaSource===$u.HELP&&2===this.styles.length&&this.setState({ctaSource:$u.TOUR,seenCta:!1,style:this.styles[1]}),this.props.showCta&&this.context.commandBinder.issueCommand(new ui.Bz(di.P.CTA,!1))},this.onTourStartTransition=()=>{this.props.showCta&&this.context.commandBinder.issueCommand(new ui.Bz(di.P.CTA,!1))},this.state={ctaSource:$u.TOUR,seenCta:!1,style:this.styles[0]}}componentDidMount(){const{canvas:e}=this.props,{messageBus:t,settings:n}=this.context;try{e&&(e.addEventListener("mousedown",this.handleInteraction),e.addEventListener("pointerdown",this.handleInteraction),e.addEventListener("touchstart",this.handleInteraction)),this.bindings.push(t.subscribe(ci.Mt,this.onTourEnded),t.subscribe(ci.oR,this.onTourStarted),t.subscribe(ci.dW,this.onTourStartTransition))}catch(e){Yu.debug(e)}let i=this.state.ctaSource;const s=parseInt(n.tryGetProperty("tourcta",1),10);!isNaN(s)&&s in qu&&(this.styles[0]=s,i=$u.TOUR);const r=n.tryGetProperty("help",0);!isNaN(r)&&r in qu&&r!==qu.NONE&&(this.styles[0]===qu.NONE?this.styles[0]=r:this.styles.unshift(r),i=$u.HELP),this.styles[0]!==qu.NONE&&this.setState({style:this.styles[0],ctaSource:i})}componentWillUnmount(){const{canvas:e}=this.props;e&&(e.removeEventListener("mousedown",this.handleInteraction),e.removeEventListener("pointerdown",this.handleInteraction),e.removeEventListener("touchstart",this.handleInteraction)),this.bindings.forEach((e=>e.cancel()))}renderCtaStyle(){const{isMobile:e,viewmode:t,shareEnabled:n}=this.props,{style:i,ctaSource:s}=this.state;switch(i){case qu.NONE:return null;case qu.SMALL:return(0,l.jsx)(CtaSmall,{isMobile:e});case qu.LARGE:return e?(0,l.jsx)(CtaMobile,{isMobile:e,viewmode:t,isHelpCta:s===$u.HELP,shareEnabled:n}):(0,l.jsx)(CtaDesktop,{viewmode:t,isHelpCta:s===$u.HELP,shareEnabled:n})}}render(){const{showCta:e,isMobile:t}=this.props,{style:n,ctaSource:i}=this.state,s={ctaContainer:!0,mobile:t,showMessage:e,small:n===qu.SMALL,helpCta:i===$u.HELP};return(0,l.jsx)("div",Object.assign({id:"cta-container",className:d()(s)},{children:this.renderCtaStyle()}))}};Zu.contextType=m.I,Zu=Ku([_n.Z],Zu);const Qu=Zu;var Xu,Ju,eh,th,nh,ih;!function(e){e[e.navigation=0]="navigation",e[e.moreHelp=1]="moreHelp"}(Xu||(Xu={})),function(e){e.left="left",e.middle="middle",e.right="right"}(Ju||(Ju={})),function(e){e.topInfo="topInfo",e.bigImage="bigImage",e.bottomInfo="bottomInfo",e.keyboard="keyboard"}(eh||(eh={})),function(e){e.desktop="desktop",e.mobile="mobile"}(th||(th={})),function(e){e.hlr="hlr",e.dollhouse="dollhouse",e.floors="floors",e.mattertag="mattertag",e.floorplan="floorplan",e.tour="tour",e.inside="inside",e.vr="vr",e.view360="view360",e.fullscreen="fullscreen"}(nh||(nh={})),function(e){e.landscape="landscape",e.portrait="portrait"}(ih||(ih={}));const{HELP:sh}=g.Z.SHOWCASE,rh={[th.desktop]:{[Ju.left]:{[eh.topInfo]:"HELP_DESKTOP_PANORAMA_1A",[eh.bottomInfo]:"HELP_DESKTOP_PANORAMA_1B",[eh.bigImage]:{img:Gu.mouse.dragLeft,alt:sh.ALT_MOUSE_DRAGLEFT},[eh.keyboard]:{img:Gu.keyboard.leftRight,alt:sh.ALT_KEYBOARD_LEFTRIGHT}},[Ju.middle]:{[eh.topInfo]:"HELP_DESKTOP_PANORAMA_2A",[eh.bottomInfo]:"HELP_DESKTOP_PANORAMA_2B",[eh.bigImage]:{img:Gu.mouse.click,alt:sh.ALT_MOUSE_CLICK},[eh.keyboard]:{img:Gu.keyboard.upDown,alt:sh.ALT_KEYBOARD_UPDOWN}},[Ju.right]:{[eh.topInfo]:"HELP_DESKTOP_PANORAMA_3A",[eh.bottomInfo]:"HELP_DESKTOP_PANORAMA_3B",[eh.bigImage]:{img:Gu.mouse.zoom,alt:sh.ALT_MOUSE_ZOOM},[eh.keyboard]:{img:Gu.keyboard.zoom,alt:sh.ALT_KEYBOARD_ZOOM}}},[th.mobile]:{[Ju.left]:{[eh.topInfo]:"HELP_MOBILE_PANORAMA_1",[eh.bigImage]:{img:Gu.gesture.drag,alt:sh.ALT_GESTURE_DRAG}},[Ju.middle]:{[eh.topInfo]:"HELP_MOBILE_PANORAMA_2",[eh.bigImage]:{img:Gu.gesture.tap,alt:sh.ALT_GESTURE_TAP}},[Ju.right]:{[eh.topInfo]:"HELP_MOBILE_3",[eh.bigImage]:{img:Gu.gesture.pinch,alt:sh.ALT_GESTURE_PINCH}}}},oh={[th.desktop]:{[Ju.left]:{[eh.topInfo]:"HELP_DESKTOP_DOLLHOUSE_1A",[eh.bottomInfo]:"HELP_DESKTOP_DOLLHOUSE_1B",[eh.bigImage]:{img:Gu.mouse.dragLeft,alt:sh.ALT_MOUSE_DRAGLEFT},[eh.keyboard]:{img:Gu.keyboard.all,alt:sh.ALT_KEYBOARD_ALL}},[Ju.middle]:{[eh.topInfo]:"HELP_DESKTOP_DOLLHOUSE_2A",[eh.bigImage]:{img:Gu.mouse.positionRight,alt:sh.ALT_MOUSE_POSITIONRIGHT}},[Ju.right]:{[eh.topInfo]:"HELP_DESKTOP_DOLLHOUSE_3A",[eh.bigImage]:{img:Gu.mouse.zoom,alt:sh.ALT_MOUSE_ZOOM}}},[th.mobile]:{[Ju.left]:{[eh.topInfo]:"HELP_MOBILE_DOLLHOUSE_1",[eh.bigImage]:{img:Gu.gesture.drag,alt:sh.ALT_GESTURE_DRAG}},[Ju.middle]:{[eh.topInfo]:"HELP_MOBILE_DOLLHOUSE_2",[eh.bigImage]:{img:Gu.gesture.positionTwoFinger,alt:sh.ALT_GESTURE_POSITIONTWOFINGER}},[Ju.right]:{[eh.topInfo]:"HELP_MOBILE_3",[eh.bigImage]:{img:Gu.gesture.pinch,alt:sh.ALT_GESTURE_PINCH}}}},ah={[th.desktop]:{[Ju.left]:{[eh.topInfo]:"HELP_DESKTOP_FLOORPLAN_1A",[eh.bigImage]:{img:Gu.mouse.positionLeft,alt:sh.ALT_MOUSE_POSITIONLEFT}},[Ju.middle]:{[eh.topInfo]:"HELP_DESKTOP_FLOORPLAN_2A",[eh.bottomInfo]:"HELP_DESKTOP_FLOORPLAN_2B",[eh.bigImage]:{img:Gu.mouse.dragRight,alt:sh.ALT_MOUSE_DRAGRIGHT},[eh.keyboard]:{img:Gu.keyboard.leftRight,alt:sh.ALT_KEYBOARD_LEFTRIGHT}},[Ju.right]:{[eh.topInfo]:"HELP_DESKTOP_FLOORPLAN_3A",[eh.bottomInfo]:"HELP_DESKTOP_FLOORPLAN_3B",[eh.bigImage]:{img:Gu.mouse.zoom,alt:sh.ALT_MOUSE_ZOOM},[eh.keyboard]:{img:Gu.keyboard.upDown,alt:sh.ALT_KEYBOARD_UPDOWN}}},[th.mobile]:{[Ju.left]:{[eh.topInfo]:"HELP_MOBILE_FLOORPLAN_1",[eh.bigImage]:{img:Gu.gesture.position,alt:sh.ALT_GESTURE_POSITION}},[Ju.middle]:{[eh.topInfo]:"HELP_MOBILE_FLOORPLAN_2",[eh.bigImage]:{img:Gu.gesture.dragTwoFinger,alt:sh.ALT_GESTURE_DRAGTWOFINGER}},[Ju.right]:{[eh.topInfo]:"HELP_MOBILE_3",[eh.bigImage]:{img:Gu.gesture.pinch,alt:sh.ALT_GESTURE_PINCH}}}},lh=JSON.parse(JSON.stringify(rh));lh.desktop.middle={[eh.topInfo]:"HELP_DESKTOP_360_2A",[eh.bottomInfo]:"HELP_DESKTOP_360_2B",[eh.bigImage]:{img:Gu.mouse.clickInside,alt:sh.ALT_MOUSE_CLICKINSIDE},[eh.keyboard]:{img:Gu.keyboard.inside,alt:sh.ALT_KEYBOARD_INSIDE}},lh.mobile.middle={[eh.topInfo]:"HELP_MOBILE_360_2",[eh.bigImage]:{img:Gu.gesture.tapInside,alt:sh.ALT_GESTURE_TAPINSIDE}};const ch={INSIDE:rh,OUTSIDE:lh,FLOORPLAN:ah,DOLLHOUSE:oh};var dh=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let uh=class NavigationTab extends r.Component{constructor(e){super(e),this.state={overflow:!1}}UNSAFE_componentWillReceiveProps(e){(this.navigationDiv&&this.navigationDiv.clientHeight||0)/(this.navigationDiv.parentElement&&this.navigationDiv.parentElement.clientHeight||1)>.7&&this.setState({overflow:!0})}getAssetObj(e){switch(e){case this.props.Modes.DOLLHOUSE:return ch.DOLLHOUSE[this.props.device];case this.props.Modes.FLOORPLAN:return ch.FLOORPLAN[this.props.device];case this.props.Modes.OUTSIDE:return ch.OUTSIDE[this.props.device];case this.props.Modes.INSIDE:default:return ch.INSIDE[this.props.device]}}buildRows(){const e=this.getAssetObj(this.props.viewmode),t=[];for(const n in eh){const i=[],s=[];for(const t in Ju)if(i.push(this.wrapAsset(e,t,n,!1)),n===eh.bigImage){const i=!e[t][eh.bottomInfo];s.push((0,l.jsx)("div",Object.assign({className:d()(t,"column",{noDivider:i})},{children:(0,l.jsx)("hr",{})}),`${n}_${t}_divider_row`))}t.push((0,l.jsx)("div",Object.assign({className:d()(n,"row")},{children:i}),`${n}_vertical_row`))}return t}buildMobilePortrait(){const e=this.getAssetObj(this.props.viewmode),t=[];for(const n in e)for(const i in e[n])t.push(this.wrapAsset(e,n,i,!0));return t}wrapAsset(e,t,n,i){const s=e[t][n],r=n===eh.bigImage||n===eh.keyboard,o=s?s.img:void 0,a=s&&s.alt?this.context.locale.t(s.alt):void 0,c=(0,l.jsx)("img",{src:o,alt:a});return(0,l.jsx)("div",Object.assign({className:i?d()(n,"row"):d()(t,"column")},{children:s&&r?c:s&&this.context.locale.t(s)}),`wrapped_asset_${t}_${n}`)}render(){const e=this.props.device===th.mobile&&this.props.orientation===as.i5.PORTRAIT,t=d()({navigation:!0,small:this.state.overflow,[this.props.viewmode]:!0});return(0,l.jsx)("div",Object.assign({className:t,ref:e=>{this.navigationDiv=e}},{children:e?(0,l.jsx)(Scrollbars,Object.assign({name:"navigation",forceHidden:!1},{children:(0,l.jsx)("div",Object.assign({className:"nav-wrapper"},{children:this.buildMobilePortrait()}))})):this.buildRows()}))}};uh.contextType=m.I,uh=dh([_n.Z],uh);const hh=uh,ph={[nh.hlr]:{[eh.topInfo]:"HELP_MORE_HLR_A",[eh.bigImage]:"icon-hlr",[eh.bottomInfo]:"HELP_DESKTOP_MORE_HLR_B"},[nh.dollhouse]:{[eh.topInfo]:"HELP_MORE_DOLLHOUSE_A",[eh.bigImage]:"icon-dollhouse",[eh.bottomInfo]:"HELP_MOBILE_MORE_DOLLHOUSE_B"},[nh.floors]:{[eh.topInfo]:"HELP_MORE_FLOORS_A",[eh.bigImage]:"icon-floor-controls",[eh.bottomInfo]:"HELP_DESKTOP_MORE_FLOORS_B"},[nh.mattertag]:{[eh.topInfo]:"HELP_MORE_MATTERTAG_A",[eh.bigImage]:Gu.moreHelp.mattertag,[eh.bottomInfo]:"HELP_MOBILE_MORE_MATTERTAG_B"},[nh.tour]:{[eh.topInfo]:"HELP_MORE_TOUR_A",[eh.bigImage]:"icon-play",[eh.bottomInfo]:"HELP_DESKTOP_MORE_TOUR_B"},[nh.inside]:{[eh.topInfo]:"HELP_MORE_INSIDE_A",[eh.bigImage]:"icon-panorama",[eh.bottomInfo]:"HELP_MOBILE_MORE_INSIDE_B"},[nh.vr]:{[eh.topInfo]:"HELP_MORE_VR_A",[eh.bigImage]:"icon-vr",[eh.bottomInfo]:"HELP_MOBILE_MORE_VR_B"},[nh.view360]:{[eh.topInfo]:"HELP_MORE_360_A",[eh.bigImage]:Gu.moreHelp.view360,[eh.bottomInfo]:"HELP_MOBILE_MORE_360_B"},[nh.floorplan]:{[eh.topInfo]:"HELP_MORE_FLOORPLAN_A",[eh.bigImage]:"icon-floorplan",[eh.bottomInfo]:"HELP_MOBILE_FLOORPLAN_B"}},mh=JSON.parse(JSON.stringify(ph));mh[nh.fullscreen]={[eh.topInfo]:"HELP_MORE_FULLSCREEN_A",[eh.bigImage]:"icon-fullscreen",[eh.bottomInfo]:"HELP_DESKTOP_MORE_FULLSCREEN_B"},mh[nh.dollhouse][eh.bottomInfo]="HELP_DESKTOP_MORE_DOLLHOUSE_B",mh[nh.mattertag][eh.bottomInfo]="HELP_DESKTOP_MORE_MATTERTAG_B",mh[nh.inside][eh.bottomInfo]="HELP_DESKTOP_MORE_INSIDE_B",mh[nh.vr][eh.bottomInfo]="HELP_DESKTOP_MORE_VR_B",mh[nh.view360][eh.bottomInfo]="HELP_DESKTOP_MORE_360_B",mh[nh.floorplan][eh.bottomInfo]="HELP_DESKTOP_FLOORPLAN_B";const gh={[th.desktop]:mh,[th.mobile]:ph},fh=[eh.topInfo,eh.bigImage,eh.bottomInfo];class MoreHelpTab extends r.Component{constructor(e){super(e),this.scrollbarsRef=(0,r.createRef)()}componentDidMount(){const e=this.scrollbarsRef.current;e&&e.scrollTo({x:0,y:0})}buildInstructions(){const e=[],t=this.props.device===th.desktop?5:this.props.orientation===as.i5.LANDSCAPE?3:2,n=Object.keys(gh[this.props.device]);for(let i=0;i<n.length;i+=t){for(const s of fh){const r=[];for(let e=0;e<t;e++){if(i+e>=n.length)continue;const t=gh[this.props.device][n[i+e]][s],o=d()(s,n[i+e],{noAsset:!t}),a=`${i}_${s}_${e}`;switch(s){case eh.topInfo:r.push((0,l.jsx)("div",Object.assign({className:o},{children:this.context.locale.t(t)}),`${a}_top_info`));break;case eh.bigImage:r.push((0,l.jsx)("div",Object.assign({className:o},{children:t.indexOf(".png")>-1?(0,l.jsx)("img",{src:t}):(0,l.jsx)("span",Object.assign({className:t},{children:"floors"===n[i+e]?(0,l.jsx)("span",{children:"2"}):null}))}),`${a}_big_img`));break;case eh.bottomInfo:r.push((0,l.jsx)("div",Object.assign({className:o},{children:this.context.locale.t(t)}),`${a}_bottom_info`))}}e.push((0,l.jsx)("div",Object.assign({className:d()("innerRow",s)},{children:r}),`${i}_${s}_top_info`))}e.push((0,l.jsx)("div",{className:"rowPadding"},`${i}_row_padding`))}return e.pop(),e}render(){return(0,l.jsx)("div",Object.assign({className:d()("more-help-wrapper",this.props.device)},{children:(0,l.jsx)(Scrollbars,Object.assign({name:"more-help-wrapper",ref:this.scrollbarsRef,forceHidden:!1},{children:(0,l.jsx)("div",Object.assign({className:d()("more-help")},{children:this.buildInstructions()}))}))}))}}MoreHelpTab.contextType=m.I;var vh=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let bh=class Help extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.setOrientation=e=>{const{orientation:t}=e;this.setState({orientation:t})},this.handleTabClick=e=>()=>{this.setState({tab:e})},this.closeHelp=()=>{this.setState({showing:!1}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.HELP,!1))},this.stopPropagation=e=>{e.stopPropagation()},this.device=this.props.isMobile?th.mobile:th.desktop,this.state={showing:!1,tab:Xu.navigation,orientation:(0,as.T8)().orientation},this.orientationSubscription=(0,as.kp)(as.g_.ORIENTATION_CHANGED,this.setOrientation)}componentDidMount(){this.orientationSubscription.renew(),window.requestAnimationFrame((()=>{this.isUnmounting||this.setState({showing:!0})}))}componentWillUnmount(){this.isUnmounting=!0,this.orientationSubscription.cancel()}render(){const{showing:e,tab:t,orientation:n}=this.state;return(0,l.jsxs)("div",Object.assign({id:"help-modal",className:d()(this.device,{"faded-in":e}),onClick:this.stopPropagation},{children:[(0,l.jsxs)("div",Object.assign({className:d()("tabs",t)},{children:[(0,l.jsx)("div",Object.assign({className:d()("navigation-tab",{active:t===Xu.navigation}),onClick:this.handleTabClick(Xu.navigation)},{children:(0,l.jsx)("span",{children:this.context.locale.t(g.Z.HELP_NAVIGATION_TAB)})})),(0,l.jsx)("div",Object.assign({className:d()("more-help-tab",{active:t===Xu.moreHelp}),onClick:this.handleTabClick(Xu.moreHelp)},{children:(0,l.jsx)("span",{children:this.context.locale.t(g.Z.HELP_MORE_HELP_TAB)})}))]})),t===Xu.navigation&&(0,l.jsx)(hh,{device:this.device,Modes:this.props.allModes,viewmode:this.props.viewmode,orientation:n}),t===Xu.moreHelp&&(0,l.jsx)(MoreHelpTab,{device:this.device,orientation:n}),(0,l.jsx)(An.P,{buttonStyle:An.A.LIGHT,onClose:this.closeHelp})]}))}};bh.contextType=m.I,bh=vh([_n.Z],bh);const yh=bh;var Sh;!function(e){e.MAIL="mail",e.PINTEREST="pinterest",e.LINKEDIN="linkedin",e.TWITTER="twitter",e.FACEBOOK="facebook",e.COPYLINK="copylink",e.NATIVE="native"}(Sh||(Sh={}));const{FACEBOOK:Eh,TWITTER:Th,MAIL:Oh,PINTEREST:_h,LINKEDIN:Ah,COPYLINK:wh,NATIVE:Nh}=Sh,Ph={[Oh]:"em",[_h]:"pn",[Ah]:"ln",[Th]:"tw",[Eh]:"fb",[wh]:"cp",[Nh]:"os"},Ih={[Eh]:{width:626,height:436},[Th]:{width:550,height:440},[_h]:{width:750,height:749},[Ah]:{width:550,height:453},[wh]:{},[Oh]:{},[Nh]:{}},kh=async(e,t=!0)=>{let n;const i=await e.engine.getModuleBySymbol(wa.y.DEEP_LINKS),s=["ref","gclid","fbclid","cloudEdit","back","note","comment","apiHost","applicationKey","host","sdkKey","tag"],r=e=>!s.includes(e);return n=t?i.creator.createDeepLink({paramFilter:r}):i.creator.createLink({paramFilter:r}),n.searchParams.forEach(((e,t)=>{(s.includes(t)||0===t.indexOf("utm_"))&&n.searchParams.delete(t)})),decodeURIComponent(n.href)},Ch=e=>new URLSearchParams(e).toString(),Lh=(e,t,n)=>{const i=e.replace("?",`?ref=${Ph[Eh]}&`);return`http://www.facebook.com/sharer.php?${Ch({display:"popup",u:i})}`},Mh=(e,t,n)=>{const i=e.replace("?",`?ref=${Ph[Th]}&`),s={text:n.t(g.Z.SHARED_MESSAGE_HASHTAG,{title:t,url:i,hashtag:"#Matterport"})};return`http://twitter.com/intent/tweet?${Ch(s)}`},Dh=(e,t,n)=>{const i=e.replace("?",`?ref=${Ph[Oh]}&`),s={subject:n.t(g.Z.SHARED_TITLE,{title:t}),body:n.t(g.Z.SHARED_MESSAGE,{title:t,url:i})};return`mailto:?${Ch(s)}`},Rh=(e,t,n,i)=>{const s={url:e.replace("?",`?ref=${Ph[_h]}&`),media:n,description:i.t(g.Z.SHARED_TITLE,{title:t})};return`http://pinterest.com/pin/create/link/?${Ch(s)}`},xh=(e,t,n)=>{const i=e.replace("?",`?ref=${Ph[Ah]}&`);return`https://www.linkedin.com/shareArticle?${Ch({mini:"true",url:i})}`},jh=(e,t,n,i)=>({[Eh]:Lh(e),[Th]:Mh(e,t,i),[Oh]:Dh(e,t,i),[_h]:Rh(e,t,n,i),[Ah]:xh(e),[wh]:e,[Nh]:e}),Uh=new O.Z("share-modal");class ShareModal extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.copyURL=()=>{const{deeplink:e}=this.state;this.urlInputRef.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.urlInputRef.blur(),this.setState({copied:!0}),this.context.analytics.track("showcase_share_action",{channel:Sh.COPYLINK,pano_id:this.sweepData.currentSweep,deeplink:e}),window.setTimeout((()=>{this.setState({copied:!1})}),2500)},this.toggleDeeplinks=()=>{const{deeplink:e}=this.state;this.setState({deeplink:!e})},this.close=()=>{this.context.commandBinder.issueCommand(new ui.Bz(di.P.SHARE,!1))},this.openShareWindow=e=>{const{urls:t,deeplink:n,deeplinkUrls:i}=this.state,{width:s,height:r}=Ih[e],o=n?i[e]:t[e];let a;if(s&&r){a="top="+(window.screenY+(window.innerHeight-r)/2)+",left="+(window.screenX+(window.innerWidth-s)/2)+",width="+s+",height="+r}this.context.analytics.track("showcase_share_action",{channel:e,pano_id:this.sweepData.currentSweep,deeplink:n}),window.open(o,"",a)},this.openWebShareApi=e=>{if(!navigator.share)return;const{excerpt:t,title:n,urls:i,deeplinkUrls:s}=this.state,r={url:e?s[Sh.COPYLINK]:i[Sh.COPYLINK],text:t,title:n};Uh.debug("Launching Web Share API",r),navigator.share(r),this.context.analytics.track("showcase_share_action",{channel:Sh.NATIVE,pano_id:this.sweepData.currentSweep,deeplink:e})},this.onWebShareClick=()=>{this.openWebShareApi(!1)},this.onWebShareDeeplinkClick=()=>{this.openWebShareApi(!0)},this.stopPropagation=e=>e.stopPropagation(),this.setUrlInputRef=e=>{this.urlInputRef=e},this.state={urls:{},deeplinkUrls:{},title:"",excerpt:"",image:"",copied:!1,deeplink:!1,webShareEnabled:(0,ts.J1)()},this.openFacebook=this.openShareWindow.bind(this,Sh.FACEBOOK),this.openTwitter=this.openShareWindow.bind(this,Sh.TWITTER),this.openPinterest=this.openShareWindow.bind(this,Sh.PINTEREST),this.openLinkedIn=this.openShareWindow.bind(this,Sh.LINKEDIN),this.openEmail=this.openShareWindow.bind(this,Sh.MAIL)}async componentDidMount(){const{market:e}=this.context,[t,n]=await Promise.all([e.waitForData(Mr.T),e.waitForData(du.Z)]);this.sweepData=n;const i=t.model,s=`${window.location.origin}/api/v1/player/models/${i.sid}/thumb`,r=i.details.name;this.isUnmounting||this.setState({title:r,image:s},this.updateUrls)}componentWillUnmount(){this.isUnmounting=!0}async updateUrls(){const{title:e,image:t}=this.state,[n,i]=await Promise.all([kh(this.context,!1),kh(this.context,!0)]),s=jh(n,e,t,this.context.locale),r=jh(i,e,t,this.context.locale);Uh.debug("Social Share URLs:",s),Uh.debug("Social Share URLs, with current location",r),this.isUnmounting||this.setState({urls:s,deeplinkUrls:r})}renderWebShareDialog(){return(0,l.jsxs)("div",Object.assign({className:"share-controls"},{children:[(0,l.jsx)(Ts.zx,Object.assign({className:"share-modal-button",buttonStyle:Ts.ZJ.PRIMARY,onClick:this.onWebShareDeeplinkClick},{children:this.context.locale.t(g.Z.SHARE_CURRENT_LOCATION)})),(0,l.jsx)(Ts.zx,Object.assign({className:"share-modal-button",buttonStyle:Ts.ZJ.OUTLINE,onClick:this.onWebShareClick},{children:this.context.locale.t(g.Z.SHARE_DEFAULT_LOCATION)}))]}))}renderShareDialog(){const{copied:e,deeplink:t,urls:n,deeplinkUrls:i}=this.state,s=t?i[Sh.COPYLINK]:n[Sh.COPYLINK],r=this.sweepData&&this.sweepData.isSweepDisabled(),o=r?this.context.locale.t(g.Z.SHARE_ERROR_SWEEP_DISABLED):void 0;return(0,l.jsxs)("div",Object.assign({className:"share-controls"},{children:[(0,l.jsxs)("div",Object.assign({className:"social-icons"},{children:[(0,l.jsx)(Es.hU,{onClick:this.openFacebook,iconClass:"icon-facebook",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.LARGE}),(0,l.jsx)(Es.hU,{onClick:this.openTwitter,iconClass:"icon-twitter",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.LARGE}),(0,l.jsx)(Es.hU,{onClick:this.openLinkedIn,iconClass:"icon-linkedin",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.LARGE}),(0,l.jsx)(Es.hU,{onClick:this.openPinterest,iconClass:"icon-pinterest",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.LARGE}),(0,l.jsx)(Es.hU,{onClick:this.openEmail,iconClass:"icon-email",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.LARGE})]})),(0,l.jsxs)("div",Object.assign({className:"input-group"},{children:[(0,l.jsx)("input",{className:"input",type:"text",value:s||"",ref:this.setUrlInputRef,onKeyDown:this.stopPropagation,onKeyPress:this.stopPropagation,onKeyUp:this.stopPropagation,readOnly:!0}),(0,l.jsx)(Vo.oO,Object.assign({content:e?this.context.locale.t(g.Z.SHARE_COPIED):this.context.locale.t(g.Z.COPY_URL),position:Vo.lZ.UP,tooltipTimeout:2e3},{children:(0,l.jsx)("button",Object.assign({className:"input-addon",onClick:this.copyURL},{children:this.context.locale.t(g.Z.COPY)}))}))]})),(0,l.jsx)(zr,{dataValue:"deeplink",checked:t,enabled:!r,error:r,helpText:o,label:this.context.locale.t(g.Z.SHARE_LINK_TO_LOCATION),onChange:this.toggleDeeplinks})]}))}render(){const{webShareEnabled:e}=this.state,t=d()("modal","share-modal","modal-dialog",{"share-dialog":!e,"web-share-dialog":e}),n=e?this.renderWebShareDialog():this.renderShareDialog();return(0,l.jsxs)("dialog",Object.assign({open:!0,className:t,onClick:this.stopPropagation},{children:[(0,l.jsxs)("header",Object.assign({className:"modal-header"},{children:[(0,l.jsx)("div",Object.assign({className:"modal-title"},{children:this.context.locale.t(g.Z.SHARE_MODAL_TITLE)})),(0,l.jsx)(An.P,{onClose:this.close})]})),(0,l.jsx)("div",Object.assign({className:"modal-body"},{children:n}))]}))}}ShareModal.contextType=m.I;class MeasurementModeHelp extends r.Component{constructor(e,t){super(e),this.closeModal=()=>{this.context.commandBinder.issueCommand(new ui.Bz(di.P.MEASUREMENT_HELP,!1))},this.stopPropagation=e=>{e.stopPropagation()},this.locale={headerString:t.locale.t(g.Z.MEASUREMENT_MODE),subHeaderString:t.locale.t(g.Z.MEASUREMENT_HELP_MODAL_SUB_HEADER),body1String:t.locale.t(g.Z.MEASUREMENT_HELP_MODAL_BODY_1),body2String:t.locale.t(g.Z.MEASUREMENT_HELP_MODAL_BODY_2)}}render(){const{headerString:e,subHeaderString:t,body1String:n,body2String:i}=this.locale,{mobile:s}=this.props;return(0,l.jsxs)("div",Object.assign({className:d()("modal","full-modal","measurement-mode-help-modal",{mobile:s}),onClick:this.stopPropagation},{children:[(0,l.jsxs)("header",Object.assign({className:"modal-header"},{children:[(0,l.jsx)("div",Object.assign({className:"modal-title"},{children:e})),(0,l.jsx)(An.P,{onClose:this.closeModal})]})),(0,l.jsx)("div",Object.assign({className:"modal-subheader"},{children:t})),(0,l.jsxs)("div",Object.assign({className:"modal-body"},{children:[(0,l.jsx)("p",Object.assign({className:"modal-paragraph"},{children:n})),(0,l.jsx)("p",Object.assign({className:"modal-paragraph"},{children:i}))]}))]}))}}MeasurementModeHelp.contextType=m.I;const{NOTES:Hh}=g.Z.SHOWCASE;class NotesIntro extends r.Component{constructor(){super(...arguments),this.onClose=()=>{this.context.commandBinder.issueCommand(new ui.Bz(di.P.NOTES_INTRO,!1))},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this.context.settings.setLocalStorageProperty(Hn.F.NotesIntroModalSeen,!0)}renderHeader(){return(0,l.jsxs)("div",Object.assign({className:"notes-intro-header"},{children:[(0,l.jsxs)("div",{children:["Welcome to the ",(0,l.jsx)("div",Object.assign({className:"h4"},{children:"Notes Beta"}))]}),(0,l.jsxs)("div",Object.assign({className:"note-badges"},{children:[(0,l.jsx)(td,{badgeStyle:{backgroundColor:"#E993A7"},iconClass:"icon-comment"}),(0,l.jsx)(td,{badgeStyle:{backgroundColor:"#6140B0"},iconClass:"icon-comment"}),(0,l.jsx)(td,{badgeStyle:{backgroundColor:"#385DFF"},iconClass:"icon-comment"})]}))]}))}render(){const{locale:e}=this.context;return(0,l.jsxs)("dialog",Object.assign({className:"modal full-modal notes-intro open",onClick:this.stopPropagation,onPointerDown:this.stopPropagation,onPointerUp:this.stopPropagation},{children:[(0,l.jsxs)("header",Object.assign({className:"modal-header"},{children:[(0,l.jsx)("div",Object.assign({className:"modal-title"},{children:e.t(Hh.MODAL_TITLE)})),(0,l.jsx)(An.P,{onClose:this.onClose})]})),this.renderHeader(),(0,l.jsx)("div",Object.assign({className:"modal-body"},{children:(0,l.jsx)("div",Object.assign({className:"modal-content"},{children:e.t(Hh.MODAL_COPY)}))})),(0,l.jsx)("div",Object.assign({className:"modal-footer"},{children:(0,l.jsx)("div",Object.assign({className:"modal-buttons"},{children:(0,l.jsx)(Ts.zx,Object.assign({buttonSize:Ts.qE.LARGE,onClick:this.onClose},{children:e.t(Hh.MODAL_CTA)}))}))}))]}))}}NotesIntro.contextType=m.I;class Link extends r.Component{render(){const{className:e,href:t,children:n,onClick:i}=this.props;return(0,l.jsx)("a",Object.assign({className:d()("link",{className:e}),href:t,target:"_blank",onClick:i},{children:n}))}}var Fh;!function(e){e.HandsRaised="hands-raised",e.RotatePhone="rotate-phone"}(Fh||(Fh={}));const Bh=new Map;Bh.set(Fh.HandsRaised,{alt:"Hands Raised",json:n(22016),fallback:n(63064)}),Bh.set(Fh.RotatePhone,{alt:"Rotate your device to portrait orientation",json:n(10105),fallback:n(34458)});var Vh=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Gh=class Lottie extends r.Component{constructor(e){super(e),this.lottieTargetRef=(0,r.createRef)(),this.isUnmounting=!1,this.loadLottie=async()=>this.lottieLib?this.lottieLib:await n.e(932).then(n.t.bind(n,11248,23)),this.updateAnimation=async()=>{const{animation:e,loop:t=!1}=this.props;let n;this.setState({fallbackActive:!1});try{n=await this.loadLottie()}catch(e){if(this.isUnmounting)return;return void this.setState({fallbackActive:!0})}const i=Bh.get(e);if(n&&i&&this.lottieTargetRef.current){const e=n.loadAnimation({loop:t,container:this.lottieTargetRef.current,renderer:"svg",autoplay:!1,animationData:i.json});e.addEventListener("data_failed",(()=>{this.isUnmounting||this.setState({fallbackActive:!0})})),setTimeout((()=>{this.isUnmounting||e.play()}),50)}},this.renderFallback=()=>{const{animation:e}=this.props,t=Bh.get(e);return t?(0,l.jsx)("img",{className:"lottie-fallback",src:t.fallback,alt:t.alt}):null},this.state={fallbackActive:!1}}componentDidMount(){this.updateAnimation()}componentDidUpdate(e){e.animation===this.props.animation&&e.loop===this.props.loop||this.updateAnimation()}componentWillUnmount(){this.isUnmounting=!0}render(){return(0,l.jsxs)("div",Object.assign({className:"lottie"},{children:[(0,l.jsx)("div",{className:"lottie-animation",ref:this.lottieTargetRef}),this.state.fallbackActive&&this.renderFallback()]}))}};Gh=Vh([_n.Z],Gh);const Wh=Gh,{MODEL_RATING:zh}=g.Z.WORKSHOP;class ModelRatingThankYou extends r.Component{constructor(){super(...arguments),this.onClose=()=>{this.context.commandBinder.issueCommand(new ui.Bz(di.P.RATING_THANK_YOU,!1))},this.stopPropagation=e=>{e.stopPropagation()}}render(){const{locale:e}=this.context;return(0,l.jsxs)("dialog",Object.assign({className:"modal model-rating-thank-you open",onClick:this.stopPropagation,onPointerDown:this.stopPropagation,onPointerUp:this.stopPropagation},{children:[(0,l.jsx)(An.P,{onClose:this.onClose}),(0,l.jsx)("h4",{children:e.t(zh.THANK_YOU_HEADING)}),(0,l.jsx)(Wh,{animation:Fh.HandsRaised}),(0,l.jsx)("p",Object.assign({className:"p4"},{children:e.t(zh.THANK_YOU_BODY)})),(0,l.jsxs)("small",Object.assign({className:"model-rating-cta"},{children:[e.t(zh.THANK_YOU_CTA)," ",(0,l.jsx)(Link,Object.assign({href:"//matterport.com/resources/support",onClick:this.onClose},{children:e.t(zh.THANK_YOU_CTA_LINK_TEXT)}))]}))]}))}}ModelRatingThankYou.contextType=m.I;var Kh=n(47475),Yh=n(31013),qh=n(60591);function $h({commandBinder:e}){const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),[o,a]=(0,r.useState)(),c=_(),u=I(),h=(0,r.useCallback)((async t=>{await e.issueCommand(new Kh.n(400,0)),null==i||i.resolve(t),n(!1),null==u||u.setOpenModal(null)}),[e,i,u]),p=(0,r.useCallback)((()=>{h(qh.Uc.CLOSE)}),[h]),m=(0,r.useCallback)((()=>{h(qh.Uc.CONFIRM)}),[h]),g=(0,r.useCallback)((async r=>{switch(r.action){case qh.Rx.DISPLAY:if(t){if(!(null==o?void 0:o.cancellable))return Promise.reject("Cannot close non-cancellable modal");await h(qh.Uc.CLOSE)}e.issueCommand(new Kh.n(400,3)),n(!0),null==u||u.setOpenModal(di.P.CONFIRM),a(r.properties);const l=new Yh.Q;return s(l),l.nativePromise();case qh.Rx.UPDATE:return a(r.properties),null==i?void 0:i.nativePromise();case qh.Rx.CLOSE:return t?(h(qh.Uc.CLOSE),null==i?void 0:i.nativePromise()):Promise.reject("Cannot cancel a closed modal")}}),[h,e,o,t,i,u]);(0,r.useEffect)((()=>(e.addBinding(qh.EW,g),()=>{e.removeBinding(qh.EW,g)})),[e,g]);const f=(0,r.useCallback)((e=>e.stopPropagation()),[]);if(!o)return null;const{title:v,titleLocalizationOptions:b,message:y,messageLocalizationOptions:S,confirmPhraseKey:E,cancelPhraseKey:T,closeButton:O,modalClass:A,confirmDisabled:w,cancelVariant:N}=o;let P=v;if("string"==typeof v){const e=void 0===b?{}:b,t=c.t(v,e);P=(0,l.jsx)("span",{children:t})}let k=y;if("string"==typeof y){const e=void 0===S?{}:S,t=c.t(y,e);k=(0,l.jsx)("p",Object.assign({className:"modal-message"},{children:t}))}return(0,l.jsx)(mi,Object.assign({open:t,className:d()("modal-background","confirm-modal-background",{open:t}),onClick:f,onPointerDown:f,onPointerUp:f},{children:(0,l.jsxs)("dialog",Object.assign({"data-testid":"confirm-modal",open:t,className:d()("modal","confirm-modal",A)},{children:[(0,l.jsxs)("header",Object.assign({className:"modal-header"},{children:[(0,l.jsx)("div",Object.assign({className:"modal-title"},{children:P})),O&&(0,l.jsx)(nt,{icon:"close",onClick:p})]})),(0,l.jsx)("div",Object.assign({className:"modal-body"},{children:k})),(0,l.jsxs)(st,Object.assign({spacing:"small"},{children:[T&&(0,l.jsx)(nt,Object.assign({size:"large",onClick:p,variant:N||et.SECONDARY},{children:c.t(T)})),E&&(0,l.jsx)(nt,Object.assign({disabled:w,variant:et.PRIMARY,size:"large",onClick:m},{children:c.t(E)}))]}))]}))}))}class Modals extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.closeModal=()=>{this.context.commandBinder.issueCommand(new ui.rE)},this.blurGuiForModal=()=>{},this.mobile=(0,ts.tq)(),this.state={modelDetails:void 0}}componentDidMount(){this.context.market.waitForData(Mr.T).then((e=>{this.isUnmounting||this.setState({modelDetails:e.model.details})}))}componentWillUnmount(){this.isUnmounting=!0}render(){const{openModal:e,viewmode:t,glCanvas:n,shareEnabled:i}=this.props,{modelDetails:s}=this.state;if(!s)return null;const r=e===di.P.SHARE,o=e===di.P.TERMS,a=e===di.P.HELP,c=e===di.P.CTA,u=e===di.P.NOTES_INTRO,h=e===di.P.MEASUREMENT_HELP,p=e===di.P.VR_SELECT,m=e===di.P.RATING_THANK_YOU,g=o||a,f=r||g||h||u||m||p&&!!s;return(0,l.jsxs)("div",Object.assign({id:"showcase-modals"},{children:[(0,l.jsx)($h,{commandBinder:this.context.commandBinder,handleBlur:this.blurGuiForModal}),(0,l.jsxs)(mi,Object.assign({className:d()("modal-background",{"modal-background":!0,"dark-modal-background":g,open:f}),open:f,selectChild:!0,childKey:e||void 0,onClick:this.closeModal},{children:[(0,l.jsx)(ShareModal,{},di.P.SHARE),(0,l.jsx)(MeasurementModeHelp,{mobile:this.mobile},di.P.MEASUREMENT_HELP),u&&(0,l.jsx)(NotesIntro,{},di.P.NOTES_INTRO),s&&(0,l.jsx)(Vu,{isMobile:this.mobile,modelDetails:s},di.P.VR_SELECT),o&&(0,l.jsx)(Terms,{},di.P.TERMS),a&&(0,l.jsx)(yh,{isMobile:this.mobile,viewmode:t,allModes:E.BD},di.P.HELP),m&&(0,l.jsx)(ModelRatingThankYou,{},di.P.RATING_THANK_YOU)]})),(0,l.jsx)(Qu,{canvas:n,isMobile:this.mobile,viewmode:t,showCta:c,shareEnabled:i})]}))}}Modals.contextType=m.I;var Zh=n(94805),Qh=n(77477),Xh=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Jh=class Toastr extends r.Component{constructor(e){super(e),this.getInitialState=()=>({messagePhraseKey:"",active:!1,ctaPhraseKey:"",timeout:0,multiline:!1,dismissesOnAction:!1,actionHandler:()=>{}}),this.triggerAction=e=>{e.stopPropagation(),this.state.actionHandler&&this.state.actionHandler(),this.state.dismissesOnAction&&this.hide()},this.hide=async()=>{window.clearTimeout(this.timeout),this.setState({active:!1})},this.show=async e=>{const t=Object.assign(this.getInitialState(),e,{active:!0});this.setState(t),window.clearTimeout(this.timeout),t.timeout>0&&(this.timeout=window.setTimeout((()=>{this.setState({active:!1})}),t.timeout))},this.state=this.getInitialState()}componentDidMount(){this.context.commandBinder.addBinding(Qh.L,this.show),this.context.commandBinder.addBinding(Qh.Q,this.hide)}componentWillUnmount(){window.clearTimeout(this.timeout),this.context.commandBinder.removeBinding(Qh.L,this.show),this.context.commandBinder.removeBinding(Qh.Q,this.hide)}render(){const{locale:e}=this.context,t=this.props.className||"",{active:n,multiline:i,messagePhraseKey:s,ctaPhraseKey:r,dismissesOnAction:o}=this.state,a={active:n,multiline:i},c=s?e.t(s):null,u=r?e.t(r):null;return(0,l.jsx)("div",Object.assign({className:"toastr-wrapper",onClick:o?this.hide:void 0},{children:(0,l.jsxs)("div",Object.assign({className:d()("toastr-contents",`${t}`,a)},{children:[(0,l.jsx)("div",Object.assign({className:"toastr-text"},{children:c})),u&&(0,l.jsx)("a",Object.assign({className:"link",onClick:this.triggerAction},{children:u}))]}))}))}};function ep(){const e=I(),[t,n]=(0,r.useState)((null==e?void 0:e.toolCollapsed)||!1);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onToolCollapsedChanged(n);return()=>t.cancel()}),[e]),t}Jh.contextType=m.I,Jh=Xh([_n.A],Jh);const tp=P("toolCollapsed",ep);const{PANELS:np}=g.Z;function ip({children:e,className:t,sidePanelCollapsible:n}){const{commandBinder:i,analytics:s}=(0,r.useContext)(m.I),o=ep(),a=function(){const e=I(),[t,n]=(0,r.useState)((null==e?void 0:e.getActiveTool())||null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onToolChanged((()=>n((null==e?void 0:e.getActiveTool())||null)));return()=>t.cancel()}),[e]),t}(),c=_(),u=L(),h=a&&a.panel;let p=null;h&&e&&Array.isArray(e)&&(p=e.find((e=>e&&e.key===(null==a?void 0:a.id)))||!1);const g=(0,r.useCallback)((()=>{p&&!u&&(s.track("showcase_gui",{gui_action:"toggle_side_panel"}),i.issueCommand(new hi.Fg(!o)))}),[p,u,s,i,o]);(0,r.useEffect)((()=>{p&&!u&&o&&!n&&i.issueCommand(new hi.Fg(!1))}),[p,u,o,n,i]);const f=o?c.t(np.EXPAND_PANEL):c.t(np.COLLAPSE_PANEL),v=o?"icon-dpad-left":"icon-dpad-right",b=!!(a&&p&&a.panel),y=b&&!u&&n?(0,l.jsx)("div",Object.assign({className:"panel-track"},{children:(0,l.jsx)("div",Object.assign({className:"panel-track-thumb","data-balloon":f,"data-balloon-pos":"left",onClick:g},{children:(0,l.jsx)("span",{className:`icon ${v}`})}))})):void 0,S={"panel-open":b&&!o,"panel-collapsed":b&&o};return(0,l.jsx)(mi,Object.assign({className:d()("panels",S,t),open:b,firstChild:y,selectChild:!0,childKey:null==a?void 0:a.id},{children:e}))}const sp=(()=>{let e=0;return function(t,n){window.clearTimeout(e);const i=t.classList;switch(n){case p.wS.NORMAL:i.remove("narrow-layout"),i.contains("side-panel")?e=window.setTimeout((()=>{i.remove("side-panel")}),900):i.remove("bottom-panel");break;case p.wS.NARROW:i.add("narrow-layout"),i.contains("bottom-panel")?e=window.setTimeout((()=>{i.remove("bottom-panel")}),900):i.remove("side-panel");break;case p.wS.SIDE_PANEL:i.add("side-panel"),i.remove("bottom-panel","narrow-layout");break;case p.wS.BOTTOM_PANEL:i.remove("side-panel"),i.add("narrow-layout","bottom-panel")}}})();function rp(){const e=nu(),[t,n]=(0,r.useState)(e?e.openTagView:null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onOpenTagViewChanged(n);return n(e.openTagView),()=>t.cancel()}),[e]),t}P("openTagView",rp);var op=n(71266),ap=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let lp=class TagViewPanel extends r.Component{constructor(e){super(e),this.textParser=new ja.v({links:!0}),this.onClickAttachment=(e,t)=>{this.onViewAttachment(t)},this.onViewAttachment=e=>{const{attachments:t}=this.props.tagView;this.context.commandBinder.issueCommand(new sd.xW(!0,t,e))}}renderWidgetFrame(){const{widgetFrame:e}=this.props.tagView;return e?(0,l.jsx)(CustomWidgetFrame,{widget:e}):null}render(){const{settings:e}=this.context,{tagView:t,linkHandler:n}=this.props,{id:i,description:s,label:r,attachments:o,keywords:a,icon:c,color:u}=t,h=e.tryGetProperty(Lr.sX,!1),p=(0,id.Ug)(o),m=(0,id.ae)(o),g=e.tryGetProperty(_a.RV,!1),f=p.length>0;return(0,l.jsxs)("div",Object.assign({className:d()("tag-view-panel",{"viewable-media":f})},{children:[f&&!h&&(0,l.jsx)(ou,{attachments:p,onClick:this.onClickAttachment}),(0,l.jsxs)("div",Object.assign({className:d()("tag-view-panel-header",!f&&"no-media")},{children:[(0,l.jsx)(td,{badgeStyle:{background:u},iconClass:`icon-${(0,op.m)(zc.Er.MATTERTAG,c,g)}`}),(0,l.jsxs)("div",Object.assign({className:"tag-view-panel-header-contents"},{children:[r&&(0,l.jsx)("div",Object.assign({className:"tag-view-panel-title"},{children:r})),a&&(0,l.jsx)(bu,{className:"tag-view-panel-keywords",keywords:a,maxVisible:5}),(0,l.jsx)($d,{text:s,textParser:this.textParser,linkHandler:n,annotationType:Yc.J.TAG,annotationId:i,attachments:[],onViewAttachment:this.onViewAttachment}),(0,l.jsx)(pu,{prefix:"tag",pin:t,id:t.id,darkTheme:!1,includeCameraView:!0,analyticAction:"tags_copy_share_link",buttonVariant:et.TERTIARY},t.id)]}))]})),m.length>0&&(0,l.jsxs)("div",Object.assign({className:"tag-view-panel-attachments"},{children:[(0,l.jsx)("h4",{children:"Attachments"}),(0,l.jsx)(Wd,{attachments:m})]})),this.renderWidgetFrame()]}))}};lp.contextType=m.I,lp=ap([_n.Z],lp);const cp=ru(lp);var dp=n(37917),up=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let hp=class Scroller extends r.Component{constructor(e){super(e),this.usePointerEvents=window.PointerEvent,this.scrollerRef=(0,r.createRef)(),this.trackRef=(0,r.createRef)(),this.thumbRef=(0,r.createRef)(),this.focusedSelector=null,this.listening=!1,this.startY=0,this.onThumb=!1,this.scrollTop=0,this.isUnmounting=!1,this.handleResize=()=>{this.isUnmounting||(this.computeStateValues(),this.focusedSelector&&this.scrollToSelector(this.focusedSelector))},this.handleWheelEvent=e=>{this.props.disabled||(this.onThumb=!1,this.focusedSelector=null,this.scrollBy(e.deltaY))},this.handleEvent=e=>{if(this.scrollerRef.current&&!this.props.disabled){this.scrollVelocityPixelsMS=0;if("mousedown"===e.type||"pointerdown"===e.type||"touchstart"===e.type){const t=e.target;this.onThumb=t&&t.classList.contains("scroller-thumb")}this.focusedSelector=null,this.inputFilter.handleEvent(e)}},this.handlePressStart=e=>{this.onThumb?this.startY=this.getThumbTop():this.startY=this.getScrollTop()},this.handlePressMove=e=>{const{trackHeight:t,contentsHeight:n}=this.state;let i;this.onThumb?(i=(this.startY-e.y)/t,this.scrollToPercent(i)):(i=(e.y+this.startY)/n,this.scrollToPercent(i))},this.handleDragStart=()=>{},this.handleDragEnd=(e,t)=>{this.scrollVelocityPixelsMS=e.y/t,this.lastScrollTimeMS=void 0,Math.abs(this.scrollVelocityPixelsMS)<1?this.scrollVelocityPixelsMS=0:this.animateScroll()},this.onTrackClick=e=>{const t=this.trackRef.current;if(e.target!==t||!t)return;const n=this.getThumbHeight(),i=this.getThumbTop(),s=t.getBoundingClientRect().top,r=this.state.trackHeight;let o;o=e.clientY<s+i?Math.max(0,(i-n)/r):Math.min(r,(i+n)/r),this.scrollToPercent(o)},this.scrollToPercent=e=>{this.isOverflowing()&&this.scrollerRef.current&&!isNaN(e)&&this.setScrollPosition(Math.max(Math.min(1,e)*this.state.contentsHeight,0))},this.scrollBy=e=>{this.isOverflowing()&&this.scrollerRef.current&&!isNaN(e)&&this.setScrollPosition(Math.max(this.scrollerRef.current.scrollTop+e,0))},this.computeStateValues=()=>{if(this.props.disabled)return;const e=this.scrollerRef.current,t=this.trackRef.current,n=Number(e&&e.clientHeight)||1,i=Number(t&&t.clientHeight)||n,s=Number(this.contents&&this.contents.clientHeight)||1,r=Number(this.contents&&this.contents.offsetTop)||0;this.debouncedSetState({scrollerHeight:n,contentsHeight:s,trackHeight:i,offsetTop:r})},this.debouncedSetState=e=>{new URL(`${document.location}`).searchParams.get("temp-disable-debounce-scroll")?this.setState(e):(cancelAnimationFrame(this.rAFHandle),this.rAFHandle=requestAnimationFrame((()=>{this.isUnmounting||this.setState(e)})))},this.setContentsRef=e=>{e?(this.contents=e,this.resizeObserver.observe(this.contents)):this.contents&&this.resizeObserver.unobserve(this.contents)},this.state={scrollerHeight:1,contentsHeight:1,trackHeight:1,offsetTop:0},this.resizeObserver=new fr(this.handleResize),this.resizeSubscription=(0,as.kp)(as.g_.RESIZE,this.handleResize),this.inputFilter=new InputFilter({handlePressStart:this.handlePressStart,handlePressMove:this.handlePressMove,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd})}componentDidMount(){this.toggleEventHandling(!0),this.computeStateValues()}componentWillUnmount(){this.isUnmounting=!0,this.toggleEventHandling(!1),this.resizeObserver&&this.resizeObserver.disconnect()}componentDidUpdate(e,t){this.scrollerRef.current&&e.disabled!==this.props.disabled&&(this.props.disabled?this.toggleEventHandling(!1):this.toggleEventHandling(!0))}resetScrollTop(){this.focusedSelector=null,this.setScrollPosition(0)}getScroller(){return this.scrollerRef.current}getScrollHeight(){return Number(this.contents&&this.contents.clientHeight)||0}scrollToElement(e,t="center",n){const i=this.scrollerRef.current;if(!e||!i)return;if(!(e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINS))return;if(!this.isOverflowing())return;const{contentsHeight:s,scrollerHeight:r,offsetTop:o}=this.state;let a=e.offsetTop;if(!n){let t=e;for(;t.parentElement&&(t=t.parentElement,a+=t.offsetTop,t.offsetParent!==this.contents););}let l=o+a;"center"===t&&(l+=e.offsetHeight/2-r/2),l=Math.max(Math.min(s,l),0);const c=i.scrollTop,d=l-c;let u=0;const h=e=>{u||(u=e);const t=e-u,n=(0,Ss.hN)(t,c,d,500);i.scrollTo(0,n),t<500?window.requestAnimationFrame(h):this.setScrollPosition(l)};window.requestAnimationFrame(h)}scrollToSelector(e,t="center",n){const i=this.scrollerRef.current;if(!i)return;const s=i.querySelector(e);s?(this.focusedSelector=e,this.scrollToElement(s,t,n)):this.focusedSelector=null}setScrollPosition(e){const t=this.scrollerRef.current;if(t){const n=t.scrollTop;t.scrollTop=e,this.scrollTop=this.getScrollTop(),this.props.onScrolled&&n!==this.scrollTop&&this.props.onScrolled(this.scrollTop);const i=this.thumbRef.current;i&&(i.style.height=`${this.getThumbHeight()}px`,i.style.top=`${this.getThumbTop()}px`)}}toggleEventHandling(e){const t=this.scrollerRef.current,n=this.handleEvent,i=dp.h?{passive:!0}:void 0;!this.listening&&e&&t?(this.resizeSubscription.renew(),t.addEventListener("wheel",this.handleWheelEvent,i),this.usePointerEvents?(t.addEventListener("pointerdown",n,i),window.addEventListener("pointermove",n,i),window.addEventListener("pointerup",n,i)):(t.addEventListener("touchstart",n,i),t.addEventListener("mousedown",n,i),window.addEventListener("mousemove",n,i),window.addEventListener("mouseleave",n,i),window.addEventListener("mouseup",n,i),window.addEventListener("touchmove",n,i),window.addEventListener("touchend",n,i),window.addEventListener("touchcancel",n,i))):this.listening&&!e&&t&&(this.resizeSubscription.cancel(),t.removeEventListener("wheel",this.handleWheelEvent),this.usePointerEvents?(t.removeEventListener("pointerdown",n),window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",n)):(t.removeEventListener("touchstart",n),t.removeEventListener("mousedown",n),window.removeEventListener("mousemove",n),window.removeEventListener("mouseleave",n),window.removeEventListener("mouseup",n),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",n),window.removeEventListener("touchcancel",n)))}animateScroll(){window.requestAnimationFrame((e=>{void 0===this.lastScrollTimeMS&&(this.lastScrollTimeMS=e);let t=e-this.lastScrollTimeMS;if(t>0){this.scrollBy(this.scrollVelocityPixelsMS*t);const e=this.scrollVelocityPixelsMS>0?-1:1;for(;t>0;)this.scrollVelocityPixelsMS+=this.scrollVelocityPixelsMS*this.scrollVelocityPixelsMS*.01*e,t-=1}Math.abs(this.scrollVelocityPixelsMS)>.001&&this.animateScroll()}))}getThumbTop(){const{contentsHeight:e,trackHeight:t}=this.state;return Math.min(this.scrollTop/e*t,t-this.getThumbHeight())}getThumbHeight(){const{scrollerHeight:e,contentsHeight:t,trackHeight:n}=this.state;return e/t*n}getScrollTop(){return this.scrollerRef.current?this.scrollerRef.current.scrollTop:0}isOverflowing(){const{contentsHeight:e,scrollerHeight:t,offsetTop:n}=this.state;return e+n>t}renderTrack(){const e={height:`${this.getThumbHeight()}px`,top:`${this.getThumbTop()}px`};return(0,l.jsx)("div",Object.assign({ref:this.trackRef,className:"scroller-track",onClick:this.onTrackClick},{children:(0,l.jsx)("div",{ref:this.thumbRef,className:"scroller-thumb",style:e,onPointerDown:this.usePointerEvents?this.handleEvent:void 0,onMouseDown:this.usePointerEvents?void 0:this.handleEvent,onTouchStart:this.usePointerEvents?void 0:this.handleEvent})}))}render(){const{children:e,className:t,hideThumb:n,disabled:i}=this.props,s=!i&&this.isOverflowing();return(0,l.jsxs)("div",Object.assign({className:d()("scroller-container",t)},{children:[(0,l.jsx)("div",Object.assign({className:"scroller-scroller",ref:this.scrollerRef},{children:(0,l.jsx)("div",Object.assign({className:"scroller-contents",ref:this.setContentsRef},{children:e}))})),!n&&s&&this.renderTrack()]}))}};hp=up([_n.Z],hp);class DetailPanel extends r.Component{constructor(e){super(e),this.touchDevice=(0,ts.Jm)(),this.bindings=[],this.handleTextBoxFocus=e=>{this.setState({textFocused:e.focused})},this.setScrollerRef=e=>{e&&(this.scroller=e)},this.state={textFocused:!1}}componentDidMount(){if(this.touchDevice){const{messageBus:e}=this.context;this.bindings.push(e.subscribe(Bs.SN,this.handleTextBoxFocus))}}componentWillUnmount(){this.bindings.map((e=>e.cancel()))}isPanelFitting(){const e=this.scroller&&this.scroller.getScroller();if(!e)return!1;return this.scroller.getScrollHeight()<=(window.visualViewport?window.visualViewport.height:window.innerHeight)-e.getBoundingClientRect().top}resetScrollTop(){this.scroller&&this.scroller.resetScrollTop()}scrollToSelector(e){this.scroller&&this.scroller.scrollToSelector(e)}render(){const{open:e,className:t,children:n,onScrolled:i,toolPanelLayout:s,scrollingDisabled:r}=this.props,{textFocused:o}=this.state,a=s===p.wS.BOTTOM_PANEL,c=this.touchDevice&&o&&a,u=a,h={open:e,"sticky-header":!c,"detail-panel-align-top":c&&!this.isPanelFitting()};return(0,l.jsx)("div",Object.assign({className:d()("detail-panel",h,t)},{children:(0,l.jsx)(hp,Object.assign({ref:this.setScrollerRef,hideThumb:u,disabled:r,onScrolled:i},{children:n}))}))}}DetailPanel.contextType=m.I;var pp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let mp=class ListNavigation extends r.Component{constructor(){super(...arguments),this.onGotoNext=()=>{const e=this.getNextIndex();-1!==e&&this.props.onNavigate(e)},this.onGotoPrev=()=>{const e=this.getPrevIndex();-1!==e&&this.props.onNavigate(e)}}getNextIndex(){const{total:e,index:t,wrapAround:n}=this.props;return t+1<e?t+1:n?0:-1}getPrevIndex(){const{total:e,index:t,wrapAround:n}=this.props;return t>0?t-1:n?e-1:-1}render(){const{total:e,index:t,disabled:n,overlay:i}=this.props;if(e<2||-1===t)return null;const s=i?"dark":"light",r=i?void 0:tt.LARGE,o=`${t+1} of ${e}`;return(0,l.jsxs)("div",Object.assign({className:"list-nav"},{children:[(0,l.jsx)(nt,{icon:"dpad-left",variant:et.TERTIARY,size:r,disabled:n,theme:s,onClick:this.onGotoPrev}),(0,l.jsx)("span",Object.assign({className:"list-nav-label"},{children:o})),(0,l.jsx)(nt,{icon:"dpad-right",variant:et.TERTIARY,size:r,disabled:n,theme:s,onClick:this.onGotoNext})]}))}};mp=pp([_n.Z],mp);var gp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let fp=class TagsNavigationBar extends r.Component{constructor(e){super(e),this.bindings=[],this.isUnmounting=!1,this.updateOpenTag=()=>{if(this.isUnmounting)return;!this.tagsViewData.openTagView&&this.state.navigating||this.setState({openTagView:this.tagsViewData.openTagView,listIndex:this.tagsViewData.getOpenTagFlatListIndex(!1)})},this.updateTags=()=>{this.isUnmounting||(this.setState({numTags:this.tagsViewData.tagViewList.values().length}),this.updateOpenTag())},this.onNavigateList=e=>{const t=this.tagsViewData.getTagViewByIndex(e);if(!t)return;this.setState({listIndex:e,navigating:!0});const{openTagView:n}=this.state,{toolPanelLayout:i,analyticAction:s}=this.props,r=n?i===p.wS.BOTTOM_PANEL?Os.n.Instant:Os.n.FadeToBlack:Os.n.Interpolate;this.context.analytics.trackToolGuiEvent("tags",s),this.context.commandBinder.issueCommand(new au.lt(t.id,r,null)).then((()=>{this.isUnmounting||this.setState({navigating:!1})}))},this.state={openTagView:null,listIndex:-1,numTags:0,navigating:!1}}componentDidMount(){const{market:e}=this.context;Promise.all([e.waitForData(tu.n)]).then((e=>{[this.tagsViewData]=e,this.bindings.push(this.tagsViewData.onOpenTagViewChanged(this.updateOpenTag),this.tagsViewData.tagViewList.onChanged(this.updateTags)),this.updateOpenTag(),this.updateTags()}))}componentWillUnmount(){this.isUnmounting=!0;for(const e of this.bindings)e.cancel()}render(){const{overlay:e}=this.props,{openTagView:t,listIndex:n,numTags:i,navigating:s}=this.state;return t&&i>1?(0,l.jsx)(mp,{index:n,total:i,disabled:s,overlay:e,wrapAround:!0,onNavigate:this.onNavigateList}):null}};function vp(){const e=function(){const e=I(),[t,n]=(0,r.useState)((null==e?void 0:e.toolHistory)||[]);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onToolHistoryChanged(n);return()=>t.cancel()}),[e]),t}();return e[e.length-1]||null}fp.contextType=m.I,fp=gp([_n.Z],fp);const{TAGS:bp}=g.Z.SHOWCASE;function yp(){const e=rp(),t=vp(),n=C(),i=Pr(),{commandBinder:s,locale:o}=(0,r.useContext)(m.I),a=N(Lc.n),c=N(tu.n),[d,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!(a&&c&&e&&(null==a?void 0:a.getTag(e.id))))return;const t=a.getTag(e.id);u(Object.assign({},e));const n=t.onChanged((()=>{const t=c.getTagView(e.id);u(t?Object.assign({},t):null)}));return()=>n.cancel()}),[e,a,c]);const h=(0,r.useCallback)((()=>{t?s.issueCommand(new hi.cR):s.issueCommand(new hi.CH(p.w1.TAGS))}),[t,s]);if(!d)return null;const g=t?"back":"close",f=o.t(t?bp.NAV_BACK_LABEL:bp.CLOSE_TAG_LABEL),v=!(n===p.wS.BOTTOM_PANEL)||!i;return(0,l.jsxs)(DetailPanel,Object.assign({className:"tags-panel",open:v,toolPanelLayout:n,scrollingDisabled:!1},{children:[(0,l.jsxs)("div",Object.assign({className:"detail-panel-header"},{children:[(0,l.jsx)(nt,{icon:g,label:f,variant:et.TERTIARY,onClick:h}),(0,l.jsx)(fp,{toolPanelLayout:n,analyticAction:"tags_navigate_in_panel"})]})),(0,l.jsx)(cp,{tagView:d})]}))}var Sp=n(57183),Ep=n(57756),Tp=n(8765),Op=n(13912),_p=n(91754),Ap=n(64069),wp=n(4752),Np=n(10047),Pp=n(76223),Ip=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const kp="​";let Cp=class SmartTextEditor extends r.Component{constructor(e){super(e),this.emailMention=!1,this.wordToken=null,this.endTokens={"@":[","," ","!","?","/",";",":","(",")"],"#":[","," ",".","!","?","/",";",":"]},this.wordElement=null,this.linkElement=null,this.onClickAnchor=e=>{const t=e.target,n=t.dataset.blocktype;this.props.active?(e.preventDefault(),n===xa.C.LINK&&this.prepareLinkForEdit(t)):n&&this.props.onClickBlock({blockType:n,text:t.innerText,value:t.dataset.value,id:t.dataset.id},e)},this.onSelectionChange=()=>{const e=this.getCurrentRange();if(e){this.range=e.cloneRange();const t=this.wordElement&&null===this.wordElement.parentElement,n=!!this.wordElement&&this.wordElement!==this.getAnchorFromSelection();(t||n)&&this.wordElement&&(this.wordElement.classList.add("link-annotation-active"),this.endWordMatching()),this.insertFocusNodeIfNeeded()}},this.addFauxHighlight=()=>{this.execCommand("backColor","#ff315840")},this.removeFauxHighlight=()=>{this.execCommand("backColor","transparent")},this.isEmailMention=(e="")=>e.lastIndexOf("@")>0,this.onInput=e=>{var t;const n=e.nativeEvent,i=n.inputType,s=i.startsWith("insert"),r="insertLineBreak"===i,o=n.data,a=this.startTokens;e.stopPropagation();const{isLinkNode:l,isSpecialNode:c,anchorNode:d}=this.tryGetAnchorNode();if(a.length&&!l&&!r){let r=o&&o.length>0?o.charAt(o.length-1):"";const l=this.getTextElement(),u=((null==l?void 0:l.innerText)||"").trim().length;if(l&&i.startsWith("delete")&&0===u&&(l.innerHTML=""),this.updateWordElement(n,c,d),!this.wordToken&&a.includes(r)?(e.preventDefault(),this.wordToken=r,this.emailMention=!1,this.createWordElement(r),this.updateSuggestions()):!this.wordToken&&o&&o.length>1&&a.includes(o[0])&&(e.preventDefault(),this.wordToken=o[0],r=o[o.length-1],this.emailMention=this.isEmailMention(o),this.createWordElement(o),this.updateSuggestions()),this.wordToken&&this.wordElement){const n=this.wordElement.textContent||"",i=this.getMatches(n),o=i.length,a=null===(t=this.endTokens[this.wordToken])||void 0===t?void 0:t.includes(r);1===o&&this.sanitizeForSearch(n)===this.sanitizeForSearch(i[0].text)&&s?(e.preventDefault(),this.chooseMatch(i[0].text,i[0].value,i[0].id)):a&&"#"===this.wordToken?(e.preventDefault(),this.finishWordElement(!0)):a&&"@"===this.wordToken?(e.preventDefault(),this.emailMention?this.finishWordElement(!0):0===o&&this.clearWordElement()):"@"===this.wordToken?(this.updateUserMatches(),this.isEmailMention(n)&&(this.wordElement.classList.add("link-annotation-active"),this.emailMention=!0)):this.filterSuggestions()}}this.props.onInput(this.getMarkdown())},this.updateUserMatches=(0,Hs.D)((()=>this.fetchUserMatches()),350),this.onClickMatch=e=>{const t=e.currentTarget;if(t){const n=t.dataset.value,i=t.dataset.id,s=t.dataset.text||t.innerText;e.stopPropagation(),e.preventDefault(),this.chooseMatch(s,n,i)}},this.onHoverMatch=e=>{const t=e.currentTarget;if(t){const e=parseInt(t.dataset.index||"0",10);this.setState({activeMatch:e})}},this.onClick=e=>{const{active:t,clickToEdit:n,onStartEditing:i}=this.props;t?(this.removeFauxHighlight(),this.range=null):n&&i&&i(e)},this.handleFocus=()=>{const{onFocusChange:e}=this.props;e&&e(!0)},this.onBlur=()=>{this.endWordMatching(),this.setState({sortedSuggestions:[]});const{onFocusChange:e}=this.props;e&&e(!1)},this.onDone=()=>{const{onDoneEditing:e}=this.props;e?e():this.toggleEditing(!1)},this.onKeyDown=e=>{const{onCancelEditing:t}=this.props,{matches:n,activeMatch:i}=this.state;e.stopPropagation(),this.range||(this.range=this.getCurrentRange());switch(e.which||e.keyCode){case Yr.R.ESCAPE:return void(t&&t());case Yr.R.TAB:case Yr.R.RETURN:if(n.length&&i>-1)e.preventDefault(),this.chooseMatch(n[i].text,n[i].value,n[i].id);else{const{isSpecialNode:t,anchorNode:n}=this.tryGetAnchorNode();t&&n&&this.range&&(e.preventDefault(),this.insertAndFocusCharacter(n,!1,"\n​")),this.wordToken&&(e.preventDefault(),this.finishWordElement(!1,!0)),e.shiftKey||(e.preventDefault(),this.onDone())}return;case Yr.R.DOWNARROW:return void(n.length&&(e.preventDefault(),this.setState((e=>{const t=(e.activeMatch+1)%n.length;return this.ensureActiveMatchIsVisible(t),{activeMatch:t}}))));case Yr.R.UPARROW:return void(n.length&&(e.preventDefault(),this.setState((e=>{const t=0===e.activeMatch?n.length-1:e.activeMatch-1;return this.ensureActiveMatchIsVisible(t),{activeMatch:t}}))));case Yr.R.B:case Yr.R.I:case Yr.R.U:if(e.ctrlKey||e.metaKey)return void e.preventDefault();break;case Yr.R.BACKSPACE:case Yr.R.SHIFT:case Yr.R.CONTROL:case Yr.R.ALT:case Yr.R.LEFTARROW:case Yr.R.RIGHTARROW:case Yr.R.DELETE:return}},this.saveRef=e=>{this.textBox=e},this.bindSuggestionMenuRef=e=>{this.suggestionMenuRef=e},this.state={activeMatch:-1,matches:[],sortedSuggestions:[]}}componentDidMount(){this.props.active&&this.toggleEditing(!0,this.props.focusOnMount)}componentWillUnmount(){this.toggleEditing(!1),this.wordElement=null}componentDidUpdate(e,t){const{active:n}=this.props;n!==e.active&&this.toggleEditing(n)}toggleEditing(e,t){this.textBox&&this.textBox.toggleEditing(e,t),this.endWordMatching(),this.setState({sortedSuggestions:[]}),e?document.addEventListener("selectionchange",this.onSelectionChange):document.removeEventListener("selectionchange",this.onSelectionChange)}ensureActiveMatchIsVisible(e){if(!this.suggestionMenuRef)return;const{scrollTop:t,offsetHeight:n}=this.suggestionMenuRef,i=this.suggestionMenuRef.querySelector(`[data-index="${e}"]`);if(!i)return;const{offsetTop:s,offsetHeight:r}=i,o=t>s;if(t+n<s+r||o){const e=o;i.scrollIntoView(e)}}getTextElement(){var e;return null===(e=this.textBox)||void 0===e?void 0:e.getTextElement()}focus(){this.textBox&&this.textBox.focus()}getMarkdown(){const e=this.getTextElement();return e?this.props.textParser.serialize(e):""}hasTextSelected(){return!(!this.range||this.range.startOffset===this.range.endOffset)}createAnchor(e,t){const n=document.createElement("a");return n.href=t,n.text=this.props.textParser.sanitizeText(e),n.classList.add(ja.o.LINK),n.setAttribute("data-value",t),n}prepareLinkForEdit(e){const t=e||this.getAnchorFromSelection();let n="";const i=window.getSelection();if(i){const e=this.getTextElement();t||this.range||!e?(this.addFauxHighlight(),t||(n=this.range?this.range.toString():i.toString())):(this.focus(),i.selectAllChildren(e),i.collapseToEnd(),this.range=i.getRangeAt(0),n=this.range.toString())}n===kp&&(n=""),this.linkElement=t;const s=t?t.innerText:n,r=t?t.dataset.value||t.href:"";this.props.onClickBlock({blockType:xa.C.LINK,text:s,value:r})}saveLink(e,t){this.linkElement?""!==t?this.updateLink(this.linkElement,e,t):this.unlink(this.linkElement):this.linkify(e,t)}updateLink(e,t,n){const{maxLength:i,textParser:s}=this.props,r=this.getMarkdown(),o=this.createAnchor(t,n);if(i){const t=s.serializeHTMLToMarkdown(o.outerHTML),n=s.serializeHTMLToMarkdown(e.outerHTML),a=t.length-n.length;if(r.length+a>i)return!1}return e.href=o.href,e.text=o.text,e.setAttribute("data-value",n),!0}cancelLink(){this.focus(),this.removeFauxHighlight()}linkify(e,t){this.removeFauxHighlight(),this.execCommand("createLink",t);let n=this.getAnchorFromSelection();!n&&this.range&&(n=document.createElement("a"),n.href=t,this.range.insertNode(n)),n&&(n.text=e,n.className=`link-annotation ${ja.o.LINK}`,n.setAttribute("data-blocktype",xa.C.LINK),n.setAttribute("data-value",t),n.onclick=this.onClickAnchor,this.insertAndFocusCharacter(n))}insertAndFocusCharacter(e,t=!1,n="​"){if(this.range=this.getCurrentRange(),this.range){const i=document.createTextNode(n),s=t?"setStartBefore":"setStartAfter",r=t?"setEndBefore":"setEndAfter";this.range[s](e),this.range[r](e),this.range.insertNode(i),this.range.selectNodeContents(i),n!==kp&&this.range.collapse(!1),this.applyRange()}}unlink(e){const t=e.parentNode,n=e.textContent;t&&(t.removeChild(e),n&&!$a(n)&&this.execCommand("insertText",n))}execCommand(e,t){this.range&&(this.applyRange(),document.execCommand(e,!1,t),this.onSelectionChange())}applyRange(){if(this.range){const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(this.range))}}getAnchorFromSelection(){const e=this.getCurrentRange();if(!e)return null;let t=e.commonAncestorContainer;for(;t&&"A"!==t.nodeName;){if(t===this.getTextElement())return null;t=t.parentNode}return t||null}insertFocusNodeIfNeeded(){var e,t;const n=window.getSelection();if(!n||!this.range)return;const{anchorNode:i,isLinkNode:s}=this.tryGetAnchorNode();if(i){const r=null!==(t=null===(e=i.textContent)||void 0===e?void 0:e.length)&&void 0!==t?t:0,o=0===n.focusOffset&&r>0,a=null===i.nextSibling&&r===n.focusOffset&&s;(o||a)&&this.insertAndFocusCharacter(i,o)}}getCurrentRange(){const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0),n=this.getTextElement();if(n&&(n===t.commonAncestorContainer||n.compareDocumentPosition(t.commonAncestorContainer)&Node.DOCUMENT_POSITION_CONTAINED_BY))return t}return null}sortWords(e){return e.sort(((e,t)=>e.text.toLowerCase()<t.text.toLowerCase()?-1:1))}tryGetAnchorNode(){var e;const t=this.getAnchorFromSelection();if(t&&t instanceof HTMLAnchorElement){const n=null===(e=t.dataset)||void 0===e?void 0:e.blocktype,i=n===xa.C.USER||n===xa.C.HASH,s=n===xa.C.LINK;return{isSpecialNode:i,isLinkNode:s,anchorNode:i||s?t:null}}return{isSpecialNode:!1,isLinkNode:!1,anchorNode:null}}updateWordElement(e,t,n){const i=e.inputType.startsWith("delete"),s=window.getSelection(),r=this.startTokens;if(!this.wordElement||this.wordElement.parentElement){if(t&&n&&n.parentElement&&s){const e=n.textContent||"";if(!r.includes(e[0]||""))return void this.clearWordElement();const t=e.substr(0,s.focusOffset),o=s&&s.focusOffset<e.length,a=i||o;if(this.wordElement=n,this.wordToken=t[0],this.emailMention=this.isEmailMention(t),this.updateSuggestions(),this.range=this.getCurrentRange(),a&&this.range){this.range.selectNode(n);const i=this.range.extractContents();if(i&&i.firstElementChild&&i.firstElementChild instanceof HTMLElement){const n=e.substring(t.length),s=document.createTextNode(n);i.firstElementChild.innerText=t,i.firstElementChild.classList.remove("link-annotation-active"),i.firstElementChild.removeAttribute("data-value"),i.firstElementChild.removeAttribute("data-id"),i.appendChild(s),this.range.insertNode(i),this.range.setStartBefore(s),this.range.setEndBefore(s),this.range.collapse(!1),this.range.selectNodeContents(this.wordElement),this.range.collapse(!1),this.applyRange()}}}}else this.endWordMatching()}get startTokens(){const{hashtags:e,userMentions:t}=this.props,n=[];return t&&n.push("@"),e&&n.push("#"),n}fetchUserMatches(){const e=this.wordElement?this.wordElement.textContent:null;if(this.props.active&&this.wordToken&&e){const t=this.sanitizeForSearch(e,!0);this.context.commandBinder.issueCommand(new Pp.V1(t)).then((()=>{this.updateSuggestions()}))}}filterSuggestions(){const{wordToken:e,wordElement:t}=this;if(e&&t&&t.textContent){const e=this.sanitizeForSearch(t.textContent),n=this.getMatches(e),i=n.length>0?0:-1;this.setState({matches:n,activeMatch:i})}}sanitizeForSearch(e="",t){if(!this.wordToken)return e;let n=(e.startsWith(this.wordToken)?e.substr(1):e).toLowerCase().trim().replace(/\s\s+/g," ");if(t){const e=/([^\s]+)/.exec(n);n=e&&e[0]||""}return n}getMatches(e){const{sortedSuggestions:t=[]}=this.state,n=this.sanitizeForSearch(e)||"";return 0===n.length?t:t.filter((e=>{let t=0===this.sanitizeForSearch(e.text).indexOf(n);return!t&&"@"===this.wordToken&&e.value&&(t=0===this.sanitizeForSearch(e.value).indexOf(n)),t}))}chooseMatch(e,t,n){const i=this.wordElement;if(i){const s=this.wordToken&&!e.startsWith(this.wordToken)?this.wordToken:"";i.innerHTML=`${s}${e}`,i.classList.add("link-annotation-active"),t&&i.setAttribute("data-value",t),n&&i.setAttribute("data-id",n),this.finishWordElement(!1,!0),this.props.onInput(this.getMarkdown())}}updateSuggestions(){const{wordToken:e}=this,{hashtags:t,userMentions:n}=this.props;let i=[];if("#"===e&&t)i=this.sortWords(t.map((e=>({text:e,blockType:xa.C.HASH}))));else if("@"===e&&n){const e=this.context.userData.getKnownUsers();i=this.sortWords(e.map((e=>({text:e.name,id:e.id,value:e.email,blockType:xa.C.USER}))))}this.setState({sortedSuggestions:i},this.filterSuggestions)}endWordMatching(){this.setState({matches:[],activeMatch:-1}),this.wordToken=null,this.wordElement=null,this.emailMention=!1}createWordElement(e){const t=window.getSelection(),n=this.range;if(!n||!t||!this.wordToken)return;const i=document.createElement("a");i.removeAttribute("href"),i.innerText=e,"#"===this.wordToken?(i.className=`link-annotation ${ja.o.HASH}`,i.setAttribute("data-blocktype",xa.C.HASH)):"@"===this.wordToken&&(i.className=`link-annotation ${ja.o.USER}`,i.setAttribute("data-blocktype",xa.C.USER));const s=n.startContainer,r=n.startOffset,o=n.endOffset+e.length,a=Math.max(0,(s.textContent||"").length);try{n.setStart(s,Math.min(r,a)),n.setEnd(s,Math.min(o,a))}catch(e){n.selectNodeContents(s)}n.deleteContents(),n.insertNode(i),n.selectNodeContents(i),n.collapse(!1),this.applyRange(),this.wordElement=i}clearWordElement(){const e=this.range,t=window.getSelection();e&&t&&this.wordElement&&this.wordToken&&(this.stripAnchorFromNode(this.wordElement),this.endWordMatching())}stripAnchorFromNode(e){const t=this.range;if(!t)return;const n=e.textContent;if(this.focus(),t.selectNode(e),t.deleteContents(),t.collapse(!1),n){const e=document.createTextNode(n);t.insertNode(e),t.selectNodeContents(e),t.collapse(!1)}this.applyRange()}isValidSpecialWord(e,t){return 0!==this.sanitizeForSearch(t).length||(this.clearWordElement(),!1)}finishWordElement(e,t){const{range:n,wordElement:i,wordToken:s}=this,r=window.getSelection();if(!(n&&r&&i&&s))return;i.contentEditable="true",i.classList.add("link-annotation-active");let o="";const a=i.textContent;if(this.isValidSpecialWord(s,a||"")){if(e&&a&&a.length>1?(o=a.charAt(a.length-1),i.textContent=a.slice(0,-1)):t&&(o=" "),this.focus(),n.setStartAfter(i),o){const e=document.createTextNode(o);n.insertNode(e),n.selectNodeContents(e),n.collapse(!1)}this.applyRange(),this.endWordMatching()}else this.clearWordElement()}renderMatch(e,t){const{activeMatch:n}=this.state,i=t===n,s=e.blockType===xa.C.USER,r=s&&e.value?this.context.userData.getUserDisplay(e.value):null,o=s?e.value:void 0,a=`${e.text}-${t}`;return(0,l.jsxs)("div",Object.assign({className:d()("suggestion",{selected:i}),onMouseDown:this.onClickMatch,onMouseEnter:this.onHoverMatch,"data-value":e.value,"data-id":e.id,"data-text":e.text,"data-index":t},{children:[s&&r&&(0,l.jsx)(td,{badgeStyle:{color:r.color,borderColor:r.color,backgroundColor:"transparent"},label:r.initials}),(0,l.jsx)("span",Object.assign({className:"suggestion-text"},{children:e.text})),o&&(0,l.jsxs)("p",Object.assign({className:"suggestion-hint"},{children:["(",o,")"]}))]}),a)}renderMatches(){if(!this.props.active)return null;const{matches:e}=this.state,t=e.length>0;return(0,l.jsx)("div",Object.assign({className:d()("suggestion-menu",{open:t}),ref:this.bindSuggestionMenuRef},{children:t&&e.map(((e,t)=>this.renderMatch(e,t)))}))}render(){const{text:e,textParser:t,clickToEdit:n,placeholder:i,tabIndex:s,maxLength:r,className:o,active:a}=this.props;return(0,l.jsxs)("div",Object.assign({className:d()("smart-text-box",o)},{children:[(0,l.jsx)(Yd,{ref:this.saveRef,text:e,textParser:t,active:a,placeholder:i,tabIndex:s,clickToEdit:n&&!a,maxLength:r,onClick:this.onClick,onInput:this.onInput,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.handleFocus,onClickAnchor:this.onClickAnchor}),this.renderMatches()]}))}};Cp.contextType=m.I,Cp=Ip([_n.A],Cp);var Lp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Mp=class FileUpload extends r.Component{constructor(e){super(e),this.handleUpload=e=>{const t=e.target;if(!t)return;const n=t.files;n&&this.props.onUpload(n),t.value=""}}render(){const{accept:e,id:t,multi:n,enabled:i,children:s,className:r,tooltip:o}=this.props,a=`file-upload-${t}`;return(0,l.jsxs)("div",Object.assign({className:d()("file-upload-button",r,{disabled:!i})},{children:[(0,l.jsx)("label",Object.assign({className:"file-upload-trigger",htmlFor:a,"data-balloon":o,"data-balloon-pos":"down"},{children:s})),i&&(0,l.jsx)("input",{type:"file",className:"file-input",id:a,accept:e,multiple:!!n,onChange:this.handleUpload})]}))}};Mp=Lp([_n.Z],Mp);var Dp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Rp=class FileDropZone extends r.Component{constructor(e){super(e),this.active=!1,this.dropZone=null,this.onDragOver=e=>{e.dataTransfer&&e.dataTransfer.types&&e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),this.activate())},this.onDrop=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&e.dataTransfer.files&&this.props.onDropped(e.dataTransfer.files),this.deactivate()},this.onDragEnd=e=>{e.preventDefault(),e.stopPropagation(),this.deactivate()},this.onDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.deactivate()},this.setDropZoneRef=e=>{this.dropZone=e}}activate(){!this.active&&this.dropZone&&(this.props.onActivate&&this.props.onActivate(!0),this.active=!0,this.dropZone.classList.add("active"))}deactivate(){this.active&&this.dropZone&&(this.active=!1,this.dropZone.classList.remove("active"),this.props.onDone&&this.props.onDone())}render(){const{className:e,children:t,disabled:n}=this.props;return(0,l.jsxs)("div",Object.assign({className:e,onDragEnter:n?void 0:this.onDragOver,onDragLeave:n?void 0:this.onDragLeave,onDragOver:n?void 0:this.onDragOver,onDragEnd:n?void 0:this.onDragEnd,onDrop:n?void 0:this.onDrop},{children:[(0,l.jsxs)("div",Object.assign({className:"file-drop-zone",ref:this.setDropZoneRef},{children:[(0,l.jsx)("span",{className:"icon icon-attach"}),(0,l.jsx)("label",{children:"Upload file"})]})),t]}))}};Rp=Dp([_n.Z],Rp);const{MATTERTAGS:xp}=g.Z.WORKSHOP;function jp(e){const{url:t,text:n,error:i,newLink:s}=e,{locale:o}=(0,r.useContext)(m.I),a=""===n&&""===t&&s?o.t(xp.LINK_EDITOR_TIP_TEXT):null,c=i?o.t(xp.LINK_EDITOR_INVALID_TIP):null,u=d()("modal-message",{"modal-message-error":!!i}),h=c||a||"";return(0,l.jsx)("div",Object.assign({className:u},{children:h}))}const{MATTERTAGS:Up,MODAL:Hp}=g.Z.WORKSHOP;function Fp(e){return $a(e)}function Bp(e){const{linkUrl:t,linkText:n,onSaveLink:i,onRemoveLink:s,onCancelLink:o}=e,{locale:a}=(0,r.useContext)(m.I),[c,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(n),[g,f]=(0,r.useState)(t),[v,b]=(0,r.useState)(Fp(t));(0,r.useEffect)((()=>(f(t),p(n),b(Fp(t)),u(!1),()=>{})),[n,t]);const y=(0,r.useCallback)((()=>{v&&window.open(g,"_blank","noreferrer")}),[g,v]),S=(0,r.useCallback)(((e,t)=>{const n=void 0!==t?t:g;i((void 0!==e?e:h)||n,n)}),[g,h,i]),E=(0,r.useCallback)((()=>{S(h,g)}),[h,g]),T=(0,r.useCallback)(((e,t)=>{const n=Fp(e);b(n),u(!n&&""!==e),t&&n&&S(h,e)}),[h,S]),O=(0,r.useCallback)((e=>{p(e)}),[]),_=(0,r.useCallback)((e=>{f(e);const t=Fp(e);b(t),c&&t&&u(!1)}),[T,c]),A=(0,r.useCallback)((()=>{T(g,!1)}),[g,T]),w=(0,r.useCallback)((()=>{T(g,!0)}),[g,T]),N=!t,P=a.t(Up.LINK_EDITOR_TEXT_PLACEHOLDER),I=a.t(Hp.SAVE),k=a.t(Hp.CANCEL),C=a.t(Up.LINK_EDITOR_PREVIEW_TIP),L=a.t(Up.LINK_EDITOR_REMOVE_TIP),M=!N&&s;return(0,l.jsxs)("div",Object.assign({className:"modal-contents"},{children:[(0,l.jsxs)("div",Object.assign({className:"modal-body"},{children:[(0,l.jsx)("div",Object.assign({className:"link-editor-field link-text-field"},{children:(0,l.jsx)(qt,{text:h,placeholder:P,autofocus:!n,onInput:O,onCancel:o})})),(0,l.jsxs)("div",Object.assign({className:"link-editor-field link-url-field"},{children:[(0,l.jsx)(qt,{text:g,type:"url",placeholder:"https://",autofocus:!!n,onBlur:A,onReturn:w,onInput:_,onCancel:o}),v&&g&&(0,l.jsx)(nt,{className:"preview-link",icon:"ext-link",variant:et.TERTIARY,size:tt.SMALL,tooltip:C,onClick:y})]})),(0,l.jsx)(jp,{newLink:N,text:n,url:g,error:c})]})),(0,l.jsx)("div",Object.assign({className:"modal-footer"},{children:(0,l.jsxs)(st,Object.assign({className:d()("modal-footer",{stretch:M})},{children:[M&&(0,l.jsx)(nt,{icon:"delete",label:L,className:"remove-link",variant:et.TERTIARY,size:tt.SMALL,onClick:s}),(0,l.jsxs)(st,Object.assign({spacing:"small"},{children:[(0,l.jsx)(nt,{label:k,variant:et.SECONDARY,size:tt.SMALL,onClick:o}),(0,l.jsx)(nt,{label:I,variant:et.PRIMARY,disabled:!v,size:tt.SMALL,onClick:E})]}))]}))}))]}))}const{REUSABLES:Vp}=g.Z;function Gp(e){const{children:t,className:n,title:i,open:s,onClose:o,fullModal:a}=e,{locale:c,commandBinder:u}=(0,r.useContext)(m.I);let h=!1;const p=(0,r.useCallback)((()=>{u.issueCommand(new ui.rE),o&&o()}),[u,o]),g=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),f=(0,r.useCallback)((()=>{h=!0,window.setTimeout((()=>{h=!1}),500)}),[]),v=(0,r.useCallback)((()=>{h&&(h=!1,p())}),[p]),b=c.t(Vp.CLOSE_BUTTON_TOOLTIP_MESSAGE),y=document.querySelector("#react-render-root")||document.body,S=d()("modal",n,{open:s,"full-modal":a});return(0,R.createPortal)((0,l.jsx)(mi,Object.assign({open:s,className:d()("modal-background",{open:s}),onPointerUp:v,onPointerDown:f},{children:(0,l.jsxs)("dialog",Object.assign({className:S,onClick:g,onPointerUp:g,onPointerDown:g},{children:[(0,l.jsxs)("header",Object.assign({className:"modal-header"},{children:[(0,l.jsx)("div",Object.assign({className:"modal-title"},{children:i})),(0,l.jsx)(nt,{icon:"close",ariaLabel:b,variant:et.TERTIARY,onClick:p})]})),t]}))})),y)}const{MATTERTAGS:Wp}=g.Z.WORKSHOP;function zp(e){const{linkUrl:t,linkText:n,onSaveLink:i,onRemoveLink:s,onCancelLink:o}=e,{locale:a}=(0,r.useContext)(m.I),c=Pr(),d=""===t?a.t(Wp.LINK_EDITOR_LINK_ADD_LABEL):a.t(Wp.LINK_EDITOR_LINK_EDIT_LABEL),u=c===di.P.LINK_EDITOR;return(0,l.jsx)(Gp,Object.assign({open:u,title:d,fullModal:!1,className:"link-editor-modal"},{children:(0,l.jsx)(Bp,{linkText:n,linkUrl:t,onCancelLink:o,onSaveLink:i,onRemoveLink:s})}))}class OpenMediaEmbedPopupMessage extends Da.v{}class CloseMediaEmbedPopupMessage extends Da.v{}var Kp,Yp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{EMBED:qp}=g.Z.WORKSHOP;var $p;!function(e){e.NONE="none",e.INVALID_URL_SYNTAX="invalid",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"}($p||($p={}));let Zp=Kp=class MediaEmbedEditor extends r.Component{constructor(e){super(e),this.inputRef=(0,r.createRef)(),this.isUnmounting=!1,this.onInput=e=>{const t=$a(e)?$p.NONE:$p.INVALID_URL_SYNTAX;this.setState({validationPhase:t,currentUrl:e})},this.onApply=()=>{this.isDisabled()||this.onDoneEditing(this.state.currentUrl)},this.stopPropagation=e=>{e.stopPropagation()},this.onDoneEditing=async e=>{const{onEmbed:t,onEmbedCleared:n,url:i}=this.props;if(""===e)return n&&n(),void this.setState({validationPhase:$p.NONE,error:void 0,currentUrl:""});const s=(0,od.V0)(e);if(s&&s!==i)try{const e=await this.loadMedia(s);if(this.isUnmounting)return;e?(this.setState({validationPhase:$p.LOADED,error:void 0,currentUrl:s}),t(e)):this.onEmbedError(s)}catch(e){if(this.isUnmounting)return;this.onEmbedError(s,e)}},this.loadMedia=async e=>{const{parentId:t,parentType:n}=this.props;return this.setState({validationPhase:$p.LOADING}),this.context.commandBinder.issueCommand(new sd.wu(t,n,e))},this.state={currentUrl:e.url||"",validationPhase:$p.NONE,error:void 0}}componentWillUnmount(){this.isUnmounting=!0,this.setState({currentUrl:"",validationPhase:$p.NONE,error:void 0})}componentDidUpdate(e,t){const{url:n,onValidationPhaseChange:i}=this.props;let s=this.state.validationPhase;n!==e.url&&(s=$p.NONE,this.setState({currentUrl:n||"",validationPhase:$p.NONE,error:void 0})),i&&s!==t.validationPhase&&i(s)}focus(){this.inputRef.current&&this.inputRef.current.focus()}onEmbedError(e,t){this.setState({error:t,validationPhase:$p.ERROR,currentUrl:e})}isDisabled(){const{validationPhase:e,currentUrl:t}=this.state;return e===$p.ERROR||e===$p.LOADING||e===$p.INVALID_URL_SYNTAX&&""!==t||""===t}renderError(){const{locale:e}=this.context,{error:t}=this.state;let n=e.t(qp.ERROR_MESSAGE);return t instanceof od.HF?n=e.t(qp.PROVIDER_NOT_SUPPORTED_MESSAGE):t instanceof od.t1&&(n=e.t(qp.LINK_TYPE_NOT_SUPPORTED_MESSAGE)),(0,l.jsxs)("div",Object.assign({className:"popover-message popover-message-error"},{children:[n," ",(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",rel:"noreferrer",href:Kp.supportPage},{children:e.t(qp.HELP_CTA)}))]}))}renderHelpMessage(){const{locale:e}=this.context,{currentUrl:t,validationPhase:n}=this.state;switch(n){case $p.ERROR:return this.renderError();case $p.LOADING:return(0,l.jsx)("div",Object.assign({className:"popover-message"},{children:e.t(qp.LOADING_MESSAGE)}));case $p.INVALID_URL_SYNTAX:if(""!==t)return(0,l.jsx)("div",Object.assign({className:"popover-message popover-message-error"},{children:e.t(qp.INVALID_URL_MESSAGE)}))}return(0,l.jsx)("div",Object.assign({className:"popover-message"},{children:(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",href:Kp.supportPage},{children:e.t(qp.SUPPORTED_FORMATS_MESSAGE)}))}))}render(){const{locale:e}=this.context,{className:t}=this.props,{currentUrl:n}=this.state,i=this.isDisabled()?Ts.BN.DISABLED:Ts.BN.ENABLED;return(0,l.jsxs)("div",Object.assign({className:"media-embed-editor",onClick:this.stopPropagation},{children:[(0,l.jsx)(tl,{ref:this.inputRef,text:n,type:"url",className:d()(t),placeholder:"Linked Video or GIF (eg. youtube.com)",onDone:this.onDoneEditing,onInput:this.onInput}),(0,l.jsxs)("div",Object.assign({className:"popover-footer"},{children:[this.renderHelpMessage(),(0,l.jsx)(Ts.zx,Object.assign({className:"button-inline embed-apply-btn",buttonStyle:Ts.ZJ.CLEAR,buttonSize:Ts.qE.SMALL,buttonState:i,onClick:this.onApply},{children:e.t(qp.APPLY_CTA)}))]}))]}))}};Zp.contextType=m.I,Zp.supportPage="https://support.matterport.com/hc/en-us/articles/115006363868-Add-Multimedia-to-a-Mattertag-Post",Zp=Kp=Yp([_n.Z],Zp);var Qp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{EMBED:Xp}=g.Z.WORKSHOP;let Jp=class MediaEmbedPopup extends r.Component{constructor(e){super(e),this.popupRef=(0,r.createRef)(),this.embedRef=(0,r.createRef)(),this.open=()=>{this.popupRef.current&&this.popupRef.current.classList.add("open"),this.focus()},this.close=()=>{this.popupRef.current&&this.popupRef.current.classList.remove("open")},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this.context.messageBus.subscribe(OpenMediaEmbedPopupMessage,this.open),this.context.messageBus.subscribe(CloseMediaEmbedPopupMessage,this.close)}componentWillUnmount(){this.close(),this.context.messageBus.unsubscribe(OpenMediaEmbedPopupMessage,this.open),this.context.messageBus.unsubscribe(CloseMediaEmbedPopupMessage,this.close)}focus(){this.embedRef.current&&this.embedRef.current.focus()}render(){const{locale:e}=this.context,{onCancel:t,onEmbed:n,parentId:i,parentType:s}=this.props;return(0,l.jsxs)("div",Object.assign({ref:this.popupRef,className:"annotation-popup",onClick:this.stopPropagation},{children:[(0,l.jsxs)("div",Object.assign({className:"popover-header"},{children:[(0,l.jsx)("div",Object.assign({className:"popover-label"},{children:e.t(Xp.MEDIA_LINK_LABEL)})),(0,l.jsx)(An.P,{buttonStyle:An.A.LIGHT,onClose:t})]})),(0,l.jsx)(Zp,{ref:this.embedRef,parentId:i,parentType:s,className:"text-field-dark",onEmbed:n})]}))}};Jp.contextType=m.I,Jp=Qp([_n.Z],Jp);var em=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{ANNOTATIONS:tm}=g.Z.SHOWCASE;let nm=class Annotation extends r.Component{constructor(e){super(e),this.uploadTooltipTimeout=0,this.bindings=[],this.isUnmounting=!1,this.getAttachmentsState=()=>{if(!this.attachmentsData)return;const{active:e,parentId:t,parentType:n}=this.props;if(!e)return;return{pendingAttachments:this.attachmentsData.getPendingAttachmentsForAsset(t,n),removedAttachments:this.attachmentsData.getRemovedAttachmentsForAsset(t,n),failures:this.attachmentsData.failures.values,uploads:this.attachmentsData.uploads.values}},this.updateAttachments=()=>{const e=this.getAttachmentsState();e&&this.setState(e)},this.cancelEdits=()=>{this.props.onCancelEditing&&this.props.onCancelEditing()},this.saveEdits=()=>{this.onDoneEditing()},this.onDoneEditing=()=>{const{onDoneEditing:e}=this.props;if(e){const t=this.getMarkdown();e(t,""===t&&0===this.getAttachmentCount())}},this.onInput=e=>{this.setState({textChanged:e.trim()!==this.props.text})},this.openLinkEditor=()=>{!(this.props.openModal===di.P.LINK_EDITOR)&&this.textEditor&&(this.context.analytics.trackGuiEvent("annotation_open_link_editor"),this.textEditor.prepareLinkForEdit())},this.onClickBlock=(e,t)=>{const{active:n,annotationType:i,annotationId:s,linkHandler:r}=this.props,o=e.blockType;if(o===xa.C.LINK&&n)this.setState({selectedBlock:e}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.LINK_EDITOR,!0));else if(!n){if(o===xa.C.LINK&&r&&e.value){t&&t.preventDefault();const n=Hd(e.value),{url:o,modelId:a,pose:l}=n;a?r.handler.openLink({fullLink:o,modelId:a}):l?(r.handler.openLink({fullLink:o,pose:l}),this.context.commandBinder.issueCommand(new Zc.Aj(s,i))):r.handler.openLink(o)}this.context.messageBus.broadcast(new $c.iP(i,s,e))}},this.closeLinkEditor=async()=>(this.setState({selectedBlock:null}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.LINK_EDITOR,!1))),this.onCancelLink=async()=>{await this.closeLinkEditor()},this.toggleEmbedEditor=()=>{this.setState((e=>{const t=!e.embedPopupOpen;return t?(this.context.analytics.trackGuiEvent("annotation_open_embed_editor"),this.context.messageBus.broadcast(new OpenMediaEmbedPopupMessage)):this.context.messageBus.broadcast(new CloseMediaEmbedPopupMessage),{embedPopupOpen:t}}))},this.closeEmbedEditor=()=>{this.state.embedPopupOpen&&this.toggleEmbedEditor()},this.onRemoveLink=()=>{this.onSaveLink("","")},this.onSaveLink=(e,t)=>{this.props.openModal===di.P.LINK_EDITOR&&this.textEditor&&(this.setState({textChanged:!0}),this.textEditor.saveLink(e,t),this.closeLinkEditor())},this.onClickFileInput=()=>{const{active:e,onClickToEdit:t}=this.props;this.isAtMaxAttachments()?(window.clearTimeout(this.uploadTooltipTimeout),this.setState({showUploadTooltip:!0}),this.uploadTooltipTimeout=window.setTimeout((()=>{this.setState({showUploadTooltip:!1})}),2500)):!e&&t&&t()},this.onFileUpload=e=>{const{parentId:t,parentType:n}=this.props,i=Array.from(e),s=this.getAttachmentCount();e.length+s>Np.yk&&i.splice(Np.yk-s),this.context.commandBinder.issueCommand(new sd.It(t,n,i)),this.edit()},this.onDrop=e=>{this.context.analytics.trackGuiEvent("attachment_drag_and_dropped"),this.onFileUpload(e)},this.onFilesChosen=e=>{this.context.analytics.trackGuiEvent("annotation_files_chosen"),this.onFileUpload(e)},this.dropActivated=()=>{const{active:e,creating:t,onClickToEdit:n}=this.props;t&&!e&&n&&n()},this.setTextEditorRef=e=>this.textEditor=e,this.state={textChanged:!1,selectedBlock:null,showUploadTooltip:!1,pendingAttachments:[],removedAttachments:[],uploads:[],failures:[],embedPopupOpen:!1}}componentDidMount(){this.context.market.waitForData(wp.b).then((e=>{this.attachmentsData=e,this.bindings.push(this.attachmentsData.onChanged(this.updateAttachments)),this.isUnmounting||this.updateAttachments()}))}componentWillUnmount(){this.isUnmounting=!0,window.clearTimeout(this.uploadTooltipTimeout);for(const e of this.bindings)e.cancel()}componentDidUpdate(e,t){const{active:n,parentId:i,parentType:s}=this.props;e.active&&!n?this.setState({textChanged:!1,pendingAttachments:[],removedAttachments:[],uploads:[],failures:[],embedPopupOpen:!1}):i===e.parentId&&s===e.parentType||this.updateAttachments()}edit(){this.textEditor&&this.textEditor.toggleEditing(!0)}focus(){this.textEditor&&this.textEditor.focus()}getMarkdown(){let e;return e=this.textEditor?this.textEditor.getMarkdown():this.props.text,e.trim()}getAttachmentCount(){const{attachments:e}=this.props,{pendingAttachments:t,removedAttachments:n,uploads:i}=this.state;return e.length+t.length+i.length-n.length}isAtMaxAttachments(){return this.getAttachmentCount()>=Np.yk}inEmptyState(){const{active:e,text:t}=this.props;return!e&&""===t.trim()&&0===this.getAttachmentCount()}renderButtonBar(){const{active:e,creating:t,parentId:n}=this.props;if(!e)return null;const{pendingAttachments:i,removedAttachments:s,textChanged:r,uploads:o,showUploadTooltip:a}=this.state,c=this.isAtMaxAttachments(),d=r||s.length>0||i.length>0,u=o.length>0,h=!c&&!u,p=d&&e&&!u?Ts.BN.ENABLED:Ts.BN.DISABLED,m=c?Ts.BN.DIMMED:u?Ts.BN.DISABLED:Ts.BN.ENABLED,g=this.context.locale.t(c?tm.MAX_ATTACHMENTS_TOOLTIP:tm.UPLOAD_TOOLTIP,Np.yk),f=this.context.locale.t(c?tm.MAX_ATTACHMENTS_TOOLTIP:tm.EMBED_TOOLTIP,Np.yk),v=this.context.locale.t(t?tm.ADD_CTA:tm.SAVE_CTA),b=this.context.locale.t(tm.LINK_TOOLTIP),y=this.context.locale.t(tm.CANCEL_CTA);return(0,l.jsxs)("div",Object.assign({className:"annotation-button-bar"},{children:[(0,l.jsxs)("div",Object.assign({className:"annotation-editors"},{children:[(0,l.jsx)(Mp,Object.assign({id:`${n}-annotation`,multi:!0,enabled:h,onUpload:this.onFilesChosen},{children:(0,l.jsx)(Es.hU,{iconClass:"icon-attach",buttonStyle:Es.Dd.PLAIN,buttonState:m,onClick:this.onClickFileInput,tooltipMsg:g,tooltipPersist:a})})),(0,l.jsx)(Es.hU,{iconClass:"icon-media-mix",buttonStyle:Es.Dd.PLAIN,buttonState:m,tooltipMsg:f,onClick:this.toggleEmbedEditor}),(0,l.jsx)(Es.hU,{iconClass:"icon-add-link",buttonStyle:Es.Dd.PLAIN,tooltipMsg:b,onClick:this.openLinkEditor})]})),(0,l.jsxs)("div",Object.assign({className:"annotation-cta-buttons"},{children:[(0,l.jsx)(Ts.zx,Object.assign({buttonStyle:Ts.ZJ.SECONDARY,buttonSize:Ts.qE.SMALL,className:"button-inline",buttonState:Ts.BN.ENABLED,onClick:this.cancelEdits},{children:y})),(0,l.jsx)(Ts.zx,Object.assign({className:"button-inline",buttonStyle:Ts.ZJ.SECONDARY,buttonSize:Ts.qE.SMALL,buttonState:p,onClick:this.saveEdits},{children:v}))]}))]}))}renderAttachments(){const{attachments:e,active:t,onViewAttachment:n}=this.props,{uploads:i,failures:s,pendingAttachments:r}=this.state,o=this.attachmentsData?e.filter((e=>!this.attachmentsData.removals.get(e.id))):e;return r.forEach((e=>o.push(e))),(0,l.jsx)(Wd,{canDelete:t,inline:t,attachments:o,uploads:i,failures:s,onViewAttachment:n})}renderSmartEditor(){const{placeholder:e,hashtags:t,text:n,creating:i,textParser:s,active:r,maxLength:o,tabIndex:a,annotationType:c,onClickToEdit:d}=this.props,u=c===Yc.J.NOTE,h=this.inEmptyState()&&u&&!i?this.context.locale.t(tm.CONTENT_DELETED):e;return(0,l.jsx)(Cp,{ref:this.setTextEditorRef,textParser:s,text:n,active:!!r,clickToEdit:!!d,placeholder:h,onClickBlock:this.onClickBlock,onStartEditing:r?void 0:d,onDoneEditing:this.onDoneEditing,onCancelEditing:this.cancelEdits,onInput:this.onInput,tabIndex:a,maxLength:o,hashtags:t||[],userMentions:u})}render(){const{className:e,creating:t,active:n,parentId:i,parentType:s,annotationType:r,onClickToEdit:o,edited:a,title:c}=this.props,{uploads:u,selectedBlock:h}=this.state,p=this.getAttachmentCount()<Np.yk,m=!(u.length>0)&&(n||t)&&p,g=r===Yc.J.NOTE,f=this.inEmptyState()&&!t&&g,v=!n&&a&&!f,b={annotating:n,"editor-box":n||!!o,"annotation-emptied":f};let y="",S="";return h&&h.blockType===xa.C.LINK&&(y=h.text,S=h.value||""),(0,l.jsxs)(Rp,Object.assign({className:"annotation-box",onDropped:this.onDrop,disabled:!m,onActivate:this.dropActivated},{children:[c,(0,l.jsxs)("div",Object.assign({className:d()("annotation-text-box",b,e)},{children:[this.renderSmartEditor(),n&&this.renderAttachments(),n&&this.renderButtonBar()]})),v&&(0,l.jsx)("div",Object.assign({className:"annotation-edited"},{children:"(edited)"})),!n&&!t&&this.renderAttachments(),n&&!!i&&(0,l.jsx)(Jp,{parentId:i,parentType:s,onEmbed:this.closeEmbedEditor,onCancel:this.closeEmbedEditor}),n&&!!i&&(0,l.jsx)(zp,{linkText:y,linkUrl:S,onCancelLink:this.onCancelLink,onSaveLink:this.onSaveLink,onRemoveLink:this.onRemoveLink})]}))}};nm.contextType=m.I,nm=em([_n.Z],nm);class OptionsButton extends r.Component{constructor(e){super(e),this.popupMenuRef=(0,r.createRef)(),this.isUnmounting=!1,this.popupOpened=e=>{if(this.isUnmounting)return;const{id:t}=this.props;e.id!==t&&this.setState({open:!1})},this.toggleMenu=e=>{if(e.stopPropagation(),!this.popupMenuRef.current)return;const t=e.clientY+this.popupMenuRef.current.offsetHeight+Nn.POPUP_OFFSET>window.innerHeight?On.BOTTOM_RIGHT:On.TOP_RIGHT;this.setState((e=>{const n=!e.open;return n&&this.context.messageBus.broadcast(new Bs.nZ(this.props.id)),this.props.onMenuToggled&&this.props.onMenuToggled(n),{arrowPosition:t,open:n}}))},this.onClose=()=>{this.setState({open:!1})},this.state={open:!1,arrowPosition:On.TOP_RIGHT}}componentDidMount(){this.context.messageBus.subscribe(Bs.nZ,this.popupOpened)}componentWillUnmount(){this.isUnmounting=!0,this.context.messageBus.unsubscribe(Bs.nZ,this.popupOpened)}renderMenu(){const{menu:e,closeOnMenuItemClick:t}=this.props,{locale:n}=this.context;return(0,l.jsx)("div",Object.assign({className:"tooltip-menu"},{children:e.map((([e,i,s])=>(0,l.jsx)("div",Object.assign({className:d()("tpMsg",{disabled:s}),onClick:s?void 0:e=>{e.stopPropagation(),i(),t&&this.onClose()}},{children:n.t(e)}),e)))}))}render(){const{arrowPosition:e,open:t}=this.state,{id:n,disabled:i,accordion:s}=this.props,r=d()("options-button",{"accordion-options-button":s}),o=d()("icon-more-vert","item-more-options",{"accordion-icon":s}),a=d()({"options-button__tooltip-container":s});return(0,l.jsx)(Es.hU,Object.assign({dataValue:n,className:r,buttonState:!0===i?Ts.BN.DISABLED:void 0,buttonStyle:Es.Dd.PLAIN,iconClass:o,onClick:this.toggleMenu},{children:(0,l.jsx)("div",Object.assign({className:a,ref:this.popupMenuRef},{children:(0,l.jsx)(Nn,{open:t,onClose:this.onClose,message:this.renderMenu(),arrowPos:e,bodyClassName:"item-tooltip"})}))}))}}OptionsButton.contextType=m.I;var im=n(10969),sm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{INVITE_USER:rm,INVITE_BUTTON:om,INVITE_USERS:am,INVITE_VISIBLE_MSG:lm}=g.Z.USERS;let cm=class UserInviteCard extends r.Component{constructor(e){super(e),this.onInviteUsers=()=>{this.props.onInviteUsers(this.props.invitees)}}render(){const{invitees:e}=this.props;if(0===e.length)return null;const{locale:t}=this.context;let n;const i=t.t(om,e.length);n=1===e.length?t.t(rm,{email:e[0]}):t.t(am,{emails:e.join(", ")});const s=t.t(lm);return(0,l.jsxs)("div",Object.assign({className:"user-invite-card"},{children:[(0,l.jsxs)("div",Object.assign({className:"user-invite-info"},{children:[(0,l.jsx)("span",{className:"icon icon-eye-show"}),(0,l.jsx)("span",Object.assign({className:""},{children:s}))]})),(0,l.jsx)("p",Object.assign({className:"user-invite-msg"},{children:n})),(0,l.jsx)(Ts.zx,Object.assign({onClick:this.onInviteUsers,buttonStyle:Ts.ZJ.TERTIARY,className:d()("button-inline","user-invite-button")},{children:i}))]}))}};cm.contextType=m.I,cm=sm([_n.Z],cm);var dm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{INVITE_VISIBLE_MSG:um,INVITE_USER_FAILED:hm,INVITE_USERS_FAILED:pm}=g.Z.USERS;let mm=class UserInviteError extends r.Component{constructor(e){super(e)}render(){const{failedEmails:e}=this.props,{locale:t}=this.context;if(0===e.length)return null;let n;n=1===e.length?t.t(hm,{email:e[0]}):t.t(pm,{failedEmails:e.join(", ")});const i=t.t(um);return(0,l.jsxs)("div",Object.assign({className:"user-invite-card"},{children:[(0,l.jsxs)("div",Object.assign({className:"user-invite-info"},{children:[(0,l.jsx)("span",{className:"icon icon-eye-show"}),(0,l.jsx)("span",Object.assign({className:""},{children:i}))]})),(0,l.jsx)("p",Object.assign({className:"user-invite-msg"},{children:n}))]}))}};mm.contextType=m.I,mm=dm([_n.Z],mm);var gm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{UNKNOWN_USER:fm,UNKNOWN_USERS:vm,INVITE_VISIBLE_MSG:bm}=g.Z.USERS;let ym=class UnknownEmailCard extends r.Component{render(){const{locale:e}=this.context,{emails:t}=this.props;if(0===t.length)return null;let n;n=1===t.length?e.t(fm,{email:t[0]}):e.t(vm,{emails:t.join(", ")});const i=e.t(bm);return(0,l.jsxs)("div",Object.assign({className:"user-invite-card"},{children:[(0,l.jsxs)("div",Object.assign({className:"user-invite-info"},{children:[(0,l.jsx)("span",{className:"icon icon-eye-show"}),(0,l.jsx)("span",Object.assign({className:""},{children:i}))]})),(0,l.jsx)("p",Object.assign({className:"user-invite-msg"},{children:n}))]}))}};ym.contextType=m.I,ym=gm([_n.Z],ym);var Sm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Em=class UnknownUserMention extends r.Component{constructor(e){super(e),this.inviteUsers=async e=>{if(0===e.length)return;const{noteId:t,message:n}=this.props;await this.context.commandBinder.issueCommand(new Pp.JB(e,n,Fs.AT,t))}}getInvitees(){const{userMentions:e}=this.props,t=[];return e.forEach((e=>{(e.userStatus===im.J.MENTIONED||e.userStatus===im.J.KNOWN&&e.modelAccess===Ap.x6.PUBLIC)&&t.push(e.email)})),t}getFailedEmails(){const{userMentions:e}=this.props,t=[];return e.forEach((e=>{e.userStatus===im.J.FAILED&&t.push(e.email)})),t}render(){const{expires:e,noteId:t}=this.props;if((new Date).getTime()>e)return null;const{userData:n}=this.context,i=n.isInviter(),s=this.getInvitees(),r=this.getFailedEmails();return(0,l.jsxs)("div",Object.assign({className:"user-mentions-unknown"},{children:[i&&s.length>0&&(0,l.jsx)(cm,{invitees:s,modelAccess:Fs.AT,noteId:t,onInviteUsers:this.inviteUsers}),!i&&s.length>0&&(0,l.jsx)(ym,{emails:s}),r.length>0&&(0,l.jsx)(mm,{failedEmails:r})]}))}};Em.contextType=m.I,Em=Sm([_n.Z],Em);var Tm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{NOTES:Om}=g.Z.SHOWCASE;let _m=class Comment extends r.Component{constructor(e){super(e),this.editComment=()=>{const{comment:e}=this.props;this.trackEvent("notes_click_edit_comment"),this.context.commandBinder.issueCommand(new Tp.x4(e.id)),this.annotation&&this.annotation.edit()},this.deleteComment=()=>{const{noteId:e,comment:t}=this.props;this.trackEvent("notes_click_delete_comment"),this.context.commandBinder.issueCommand(new Tp.mH(e,t.id))},this.saveChanges=(e,t)=>{const{comment:n,noteId:i,onCancel:s}=this.props;t?(this.trackEvent("notes_delete_empty_comment"),this.context.commandBinder.issueCommand(new Tp.mH(i,n.id)),s()):this.context.commandBinder.issueCommand(new Tp.Uw(i,n.id,e))},this.setAnnotationRef=e=>{this.annotation=e},this.getMenuOptions=(e,t)=>{const n=[];return e&&n.push([Om.EDIT,this.editComment]),t&&n.push([Om.DELETE,this.deleteComment]),n}}trackEvent(e){this.context.analytics.trackToolGuiEvent("notes",e)}getUnknownMentions(){const{manager:e,comment:t,userMentionMap:n}=this.props;return e.dataMap.notesViewData.getCommentUserMentions(t.text,n)}renderAnnotation(e){const{comment:t,attachments:n,hashtags:i,active:s,onViewAttachment:r,manager:o,noteId:a,onCancel:c,toolPanelLayout:d,openModal:u}=this.props,{text:h,edited:p,id:m}=t,g=o.getTextParser(),f=o.getLinkHandler();return e?(0,l.jsx)(nm,{ref:this.setAnnotationRef,text:h,textParser:g,linkHandler:f,hashtags:i,annotationType:Yc.J.NOTE,annotationId:a,parentType:Ap.ud.COMMENT,parentId:m,attachments:n,active:s,edited:p,creating:!1,toolPanelLayout:d,openModal:u,onViewAttachment:r,onDoneEditing:this.saveChanges,onCancelEditing:c,maxLength:Fs.Ko},m):(0,l.jsx)($d,{text:h,textParser:g,linkHandler:f,annotationType:Yc.J.NOTE,annotationId:a,attachments:n,edited:p,onViewAttachment:r})}render(){const{comment:e,active:t,noteId:n,manager:i}=this.props,{user:s,created:r,id:o,text:a}=e,{userData:c}=this.context,u=(0,Op.C)(c,Yc.J.NOTE,s),h=(0,Op.K)(c,Yc.J.NOTE,s),p=this.getMenuOptions(u,h),m=e.modified.getTime()+60*Fs.E8*1e3,g=c.getUserDisplay(s.email),f=g.color,v=i.getTextParser().getPlainText(a),b=this.getUnknownMentions();return(0,l.jsxs)("div",Object.assign({className:d()("comment",{active:t}),"data-id":o},{children:[(0,l.jsxs)("div",Object.assign({className:"note-header comment-header"},{children:[(0,l.jsx)(td,{badgeStyle:{color:f,borderColor:f},label:g.initials}),(0,l.jsxs)("div",Object.assign({className:"note-details"},{children:[(0,l.jsx)("span",Object.assign({className:"note-user"},{children:g.name})),(0,l.jsx)("div",Object.assign({className:"note-subheader"},{children:r.toLocaleString()}))]})),!t&&(u||h)&&(0,l.jsx)(OptionsButton,{id:o,menu:p})]})),this.renderAnnotation(u),u&&(0,l.jsx)(Em,{noteId:n,message:v,userMentions:b,expires:m})]}))}};_m.contextType=m.I,_m=Tm([_n.Z],_m);var Am=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{NOTES:wm}=g.Z.SHOWCASE;let Nm=class ReplyBox extends r.Component{constructor(e){super(e),this.startReply=()=>{this.context.analytics.trackToolGuiEvent("notes","notes_click_new_comment"),this.context.commandBinder.issueCommand(new Tp.x4(this.props.replyId))},this.onDone=(e,t)=>{const{replyId:n,noteId:i,onCancel:s,onReply:r}=this.props;t?s():r(i,n,e)}}render(){const{hashtags:e,replyId:t,noteId:n,active:i,onCancel:s,toolPanelLayout:r,openModal:o,manager:a}=this.props;return(0,l.jsx)(nm,{className:"reply-box",textParser:a.getTextParser(),linkHandler:a.getLinkHandler(),annotationType:Yc.J.NOTE,annotationId:n,parentType:Ap.ud.COMMENT,parentId:t,attachments:[],active:i,edited:!1,creating:!0,text:"",hashtags:e,toolPanelLayout:r,openModal:o,placeholder:this.context.locale.t(wm.REPLY_PLACEHOLDER),onClickToEdit:this.startReply,onDoneEditing:this.onDone,onCancelEditing:s,maxLength:Fs.Ko})}};Nm.contextType=m.I,Nm=Am([_n.Z],Nm);var Pm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{NOTES:Im}=g.Z.SHOWCASE;let km=class NoteHeader extends r.Component{constructor(e){super(e),this.editNote=()=>{this.trackEvent("notes_click_edit_note"),this.props.onEditNote()},this.deleteNote=()=>{const{note:e}=this.props;this.trackEvent("notes_click_delete_note"),this.context.commandBinder.issueCommand(new Tp.sG(e.id))},this.resolveNote=()=>{const{note:e}=this.props;this.trackEvent("notes_click_resolve_note"),this.context.commandBinder.issueCommand(new Tp.yp(e.id,!0))},this.unresolveNote=()=>{const{note:e}=this.props;this.trackEvent("notes_click_unresolve_note"),this.context.commandBinder.issueCommand(new Tp.yp(e.id,!1))},this.getMenuOptions=(e,t,n)=>{const i=[];return e&&i.push([Im.EDIT,this.editNote]),n&&i.push([Im.UNRESOLVE,this.unresolveNote]),t&&i.push([Im.DELETE,this.deleteNote]),i}}trackEvent(e){this.context.analytics.trackToolGuiEvent("notes",e)}render(){const{note:e,creatingNote:t,active:n,onCancelNote:i}=this.props,{userData:s}=this.context,r=(0,Op.C)(s,Yc.J.NOTE,e.user),o=s.getUserDisplay(e.user.email),a=o.color,c=!t&&!n,d=c&&(0,Op.K)(s,Yc.J.NOTE,e.user),u=c&&!e.resolved,h=c&&e.resolved,p=!t&&(r||h||d),m=this.getMenuOptions(r,d,h),g=this.context.locale.t(Im.MARK_AS_RESOLVED);return(0,l.jsxs)("header",Object.assign({className:"note-header"},{children:[(0,l.jsx)(td,{badgeStyle:{color:a,borderColor:a},label:o.initials}),(0,l.jsxs)("div",Object.assign({className:"note-details"},{children:[(0,l.jsx)("span",Object.assign({className:"note-user"},{children:o.name})),(0,l.jsx)("div",Object.assign({className:"note-subheader"},{children:e.created.toLocaleString()}))]})),t&&(0,l.jsx)(Es.hU,{iconClass:"icon-close",buttonStyle:Es.Dd.PLAIN,tooltipMsg:this.context.locale.t(Im.CANCEL),tooltipPosition:Vo.lZ.DOWN,onClick:i}),u&&(0,l.jsx)(Es.hU,{iconClass:"icon-checkmark",buttonStyle:Es.Dd.SOCIAL,buttonSize:Ts.qE.SMALL,buttonState:Ts.BN.ENABLED,tooltipMsg:g,tooltipPosition:Vo.lZ.DOWN,onClick:this.resolveNote}),c&&(0,l.jsx)(pu,{prefix:"note",pin:e,id:e.id,darkTheme:!0,analyticAction:"copy_note_share_link",includeCameraView:!0}),p&&(0,l.jsx)(OptionsButton,{id:e.id,menu:m})]}))}};km.contextType=m.I,km=Pm([_n.Z],km);var Cm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Lm=class NotePost extends r.Component{constructor(e){super(e),this.bindings=[],this.startEditing=()=>{const e=this.props.manager.dataMap.notesViewData.activeNotation;this.annotation&&e===this.props.note.id&&this.annotation.edit()},this.saveNoteChanges=async(e,t)=>{const{note:n,manager:i,onCancel:s}=this.props;t?s():i.dataMap.notesViewData.isNewNote?await this.context.commandBinder.issueCommand(new Tp.FB(e)):await this.context.commandBinder.issueCommand(new Tp.kd(n.id,e))},this.onEditNote=()=>{var e;const{note:t}=this.props,n=null===(e=t.comments.get(0))||void 0===e?void 0:e.id;n&&this.context.commandBinder.issueCommand(new Tp.x4(n))},this.onFocusPin=()=>{this.props.manager.dataMap.notesViewData.isNewNote&&this.startEditing()},this.setAnnotationRef=e=>{this.annotation=e}}componentDidMount(){const{messageBus:e}=this.context;this.bindings.push(e.subscribe(Sp.cd,this.onFocusPin))}componentWillUnmount(){for(const e of this.bindings)e.cancel()}componentDidUpdate(e){this.props.active&&!e.active&&this.startEditing()}getExpirationTime(e){return e.modified.getTime()+60*Fs.E8*1e3}getUnknownMentions(e){const{manager:t,userMentionMap:n}=this.props;return t.dataMap.notesViewData.getCommentUserMentions(e.text,n)}renderUserMentionCards(){const{manager:e,note:t}=this.props,n=t.comments.get(0);if(!n)return null;const i=e.getTextParser().getPlainText(n.text),s=this.getExpirationTime(n),r=this.getUnknownMentions(n);return 0===r.length?null:(0,l.jsx)(Em,{message:i,noteId:t.id,expires:s,userMentions:r})}renderAnnotation(e){const{note:t,creatingNote:n,attachments:i,hashtags:s,active:r,onViewAttachment:o,manager:a,onCancel:c,toolPanelLayout:d,openModal:u}=this.props,h=a.getTextParser(),p=a.getLinkHandler(),m=t.comments.get(0),g=(null==m?void 0:m.text)||"",f=(null==m?void 0:m.edited)||!1;if(e){const e=(null==m?void 0:m.id)||t.id;return(0,l.jsx)(nm,{ref:this.setAnnotationRef,textParser:h,linkHandler:p,annotationId:t.id,annotationType:Yc.J.NOTE,parentId:e,parentType:Ap.ud.COMMENT,attachments:i,active:r,edited:f,creating:n,text:g,hashtags:s,placeholder:"Add your message",toolPanelLayout:d,openModal:u,onViewAttachment:o,onDoneEditing:this.saveNoteChanges,onCancelEditing:c,maxLength:Fs.TM})}return(0,l.jsx)($d,{text:g,textParser:h,linkHandler:p,annotationType:Yc.J.NOTE,annotationId:t.id,attachments:i,edited:f,onViewAttachment:o})}render(){const{note:e,creatingNote:t,onCancel:n,active:i}=this.props,{userData:s}=this.context,r=e.comments.get(0),o=e.user.id===s.getCurrentUserId(),a=!!o&&s.isCommenter();return(0,l.jsxs)("div",Object.assign({className:"note-post"},{children:[(0,l.jsx)(km,{note:e,active:i,creatingNote:t,onEditNote:this.onEditNote,onCancelNote:n}),this.renderAnnotation(a),!t&&r&&o&&this.renderUserMentionCards()]}))}};Lm.contextType=m.I,Lm=Cm([_n.Z],Lm);var Mm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Dm=class ButtonWithIcon extends r.Component{constructor(e){super(e)}render(){const{onClick:e,label:t,ariaLabel:n,icon:i,buttonSize:s,buttonStyle:r,buttonState:o,className:a}=this.props;return(0,l.jsxs)(Ts.zx,Object.assign({className:d()("button-with-icon",a),buttonSize:s,buttonStyle:r,buttonState:o,onClick:e,"aria-label":n||t},{children:[(0,l.jsx)("span",{className:d()("icon",i)}),t]}))}};Dm=Mm([_n.Z],Dm);const{NOTES:Rm}=g.Z.SHOWCASE;class NoteWidget extends r.Component{constructor(e){super(e),this.bindings=[],this.cancelTimeout=0,this.updateListIndex=()=>{const e=this.props.manager.dataMap.notesViewData.listIndex;this.setState({listIndex:e,navigating:!1})},this.updateAttachments=()=>{const{note:e,manager:t}=this.props,n=e?t.dataMap.notesViewData.getNoteAttachments(e.id):[];this.setState({attachments:n})},this.updateHashtags=()=>{const{hashtagData:e}=this.props.manager.dataMap;this.setState({hashtags:e.getHashtags()})},this.updateActiveNotation=()=>{const{notesViewData:e}=this.props.manager.dataMap;this.setState({activeNotation:e.activeNotation})},this.updateUserMentionMap=()=>{this.setState({userMentionMap:this.context.userData.getUsersWhoMayNeedAccess()})},this.updateToolAssetAccess=()=>{this.setState({toolAccess:this.context.toolsData.toolAccess})},this.closeNotesMode=()=>{this.context.commandBinder.issueCommand(new hi.tT(p.w1.NOTES,!1))},this.cancelNoteChanges=()=>{const{note:e,manager:t}=this.props,{activeNotation:n}=this.state;window.clearTimeout(this.cancelTimeout),t.dataMap.notesViewData.isNewNote?this.setState({cancellingCreation:!0},(()=>{this.closeNote(),this.cancelTimeout=window.setTimeout((()=>{this.setState({cancellingCreation:!1})}),500)})):e&&n&&this.cancelCommentChanges()},this.cancelCommentChanges=()=>{this.context.commandBinder.issueCommand(new Tp.oH)},this.closeNote=()=>{this.props.manager.dataMap.notesViewData.isNewNote?this.context.commandBinder.issueCommand(new Tp.gc):this.context.commandBinder.issueCommand(new Tp._N)},this.addReply=(e,t,n)=>{this.context.commandBinder.issueCommand(new Tp.Df(e,n,t)),this.setState({replyId:this.getReplyId()})},this.cancelReply=()=>{this.cancelCommentChanges(),this.setState({replyId:this.getReplyId()})},this.onViewAttachment=e=>{const{attachments:t}=this.state;if(t.length){this.context.analytics.trackToolGuiEvent("notes","notes_click_view_attachment");const n=t.filter((e=>(0,id.lV)(e)));n.length>0&&this.context.commandBinder.issueCommand(new sd.xW(!0,n,e))}},this.onNavigateList=async e=>{const t=this.props.noteListViews[e];if(!t)return;this.setState({listIndex:e,navigating:!0}),this.context.commandBinder.issueCommand(new sd.xW(!1));const n=t.assetType===_p.h.COMMENT;await this.context.commandBinder.issueCommand(new Tp.Zd(t.id,n,!1)),n&&await this.context.messageBus.broadcast(new Vs.JL(t.id))},this.state={activeNotation:null,listIndex:-1,replyId:this.getReplyId(),toolAccess:p.X$.SCENE,hashtags:[],attachments:[],userMentionMap:{},cancellingCreation:!1,navigating:!1}}componentDidMount(){const{hashtagData:e,notesViewData:t}=this.props.manager.dataMap,{toolsData:n,userData:i}=this.context;this.bindings.push(n.onToolAssetAccessChanged(this.updateToolAssetAccess),e.onChanged(this.updateHashtags),t.onActiveNotationChanged(this.updateActiveNotation),t.onListIndexChanged(this.updateListIndex),i.onUsersChanged(this.updateUserMentionMap)),this.updateToolAssetAccess(),this.updateHashtags(),this.updateActiveNotation(),this.updateListIndex(),this.updateUserMentionMap()}componentWillUnmount(){window.clearTimeout(this.cancelTimeout);for(const e of this.bindings)e.cancel()}componentDidUpdate(e,t){var n;const{note:i}=this.props;e.note!==i&&(this.updateAttachments(),(null===(n=e.note)||void 0===n?void 0:n.id)!==(null==i?void 0:i.id)&&i&&(window.clearTimeout(this.cancelTimeout),this.setState({replyId:this.getReplyId()})),this.handleMissingNotation())}shouldComponentUpdate(){return!this.state.cancellingCreation}getReplyId(){return this.props.note?(0,f.O1)(11):null}handleMissingNotation(){const{note:e,manager:t,creatingNote:n}=this.props,{activeNotation:i,replyId:s}=this.state;if(n||!i)return;const{notesViewData:r}=t.dataMap;if(e){const t=e.id;i===t||i===s||r.getComment(t,i)||r.setActiveNotation(null)}else r.setActiveNotation(null)}getCommentAttachments(e){return this.state.attachments.filter((t=>t.parentId===e))}renderReplyBox(){const{note:e,toolPanelLayout:t,openModal:n,manager:i}=this.props,{activeNotation:s,hashtags:r,replyId:o}=this.state;if(!e||!o)return null;const a=s===o;return a||null===s?(0,l.jsx)(Nm,{replyId:o,noteId:e.id,active:a,hashtags:r,manager:i,toolPanelLayout:t,openModal:n,onCancel:this.cancelReply,onReply:this.addReply}):null}renderComments(){const{note:e,toolPanelLayout:t,manager:n,openModal:i}=this.props;if(!e)return null;const{activeNotation:s,hashtags:r,userMentionMap:o}=this.state;return(0,l.jsx)("div",Object.assign({className:"note-comments"},{children:e.comments.map(((a,c)=>{if(0===c)return null;const d=this.getCommentAttachments(a.id);return(0,l.jsx)(_m,{active:s===a.id,manager:n,noteId:e.id,comment:a,attachments:d,hashtags:r,userMentionMap:o,toolPanelLayout:t,openModal:i,onCancel:this.cancelCommentChanges,onViewAttachment:this.onViewAttachment},a.id)}))}))}renderNoteNavHeader(){const{noteListViews:e,creatingNote:t,note:n,toolPanelLayout:i}=this.props;if(t||!n)return null;const{toolAccess:s,activeNotation:r,listIndex:o,navigating:a}=this.state,c=e.length,d=!t&&!r&&c>1&&-1!==o,u=i===p.wS.SIDE_PANEL,h=s===p.X$.SCENE,m=s===p.X$.LIST||!h&&u,g=this.context.locale.t(m?Rm.NAV_BACK:Rm.NAV_CLOSE),f=m?"icon-back":"icon-close",v=m||!h?this.closeNote:this.closeNotesMode;return(0,l.jsxs)("div",Object.assign({className:"detail-panel-header"},{children:[(0,l.jsx)(Dm,{label:g,className:"return-btn",icon:f,buttonSize:Ts.qE.SMALL,buttonStyle:Ts.ZJ.TOOLBAR,onClick:v}),d&&(0,l.jsx)(mp,{index:o,total:c,disabled:a,wrapAround:!0,onNavigate:this.onNavigateList})]}))}render(){var e,t;const{manager:n,note:i,toolPanelLayout:s,notesPhase:r,creatingNote:o,openModal:a}=this.props,{activeNotation:c,hashtags:u,userMentionMap:h}=this.state,{userData:p}=this.context,m=p.isCommenter(),g=null===(t=null===(e=null==i?void 0:i.comments)||void 0===e?void 0:e.get(0))||void 0===t?void 0:t.id,f=!!c&&(c===g||o),v={annotating:!!c,creating:o},b=g?this.getCommentAttachments(g):[];return(0,l.jsxs)("div",Object.assign({className:d()("note-widget",v)},{children:[this.renderNoteNavHeader(),i&&(0,l.jsx)(Lm,{active:f,manager:n,note:i,notesPhase:r,creatingNote:o,attachments:b,hashtags:u,userMentionMap:h,toolPanelLayout:s,openModal:a,onCancel:this.cancelNoteChanges,onViewAttachment:this.onViewAttachment}),!o&&this.renderComments(),!o&&m&&this.renderReplyBox()]}))}}NoteWidget.contextType=m.I;const xm=Ir(NoteWidget);var jm=n(99380);class StemEditor extends r.Component{constructor(e){super(e),this.sliderRef=(0,r.createRef)(),this.stemLengthUpdating=(e,t=!0)=>{const n=t?(0,Jl._F)(e):e;n!==this.props.stemLength&&this.props.onLengthUpdate(n)},this.saveStemLength=(e,t=!0)=>{const n=t?(0,Jl._F)(e):e;this.props.onLengthChanged(n)},this.onChangeStemEnabled=e=>{const t=e.classList.contains("checked");this.props.onStemEnabledChanged(t)},this.stopPropagation=e=>e.stopPropagation(),this.updateUnits=()=>{this.setState({units:this.context.settings.tryGetProperty(Ln.gx.Units,ec.M.IMPERIAL)})},this.formatStemHeight=e=>{if(this.state.units===ec.M.IMPERIAL)return Xl(e);return`${Math.round(100*(0,Jl._F)(e))/100}m`},this.state={units:ec.M.IMPERIAL}}componentDidMount(){this.updateUnits(),this.sliderRef.current&&this.sliderRef.current.setValue((0,Jl.zy)(this.props.stemLength)),this.context.settings.onPropertyChanged(Ln.gx.Units,this.updateUnits)}componentWillUnmount(){this.context.settings.removeOnPropertyChanged(Ln.gx.Units,this.updateUnits)}UNSAFE_componentWillReceiveProps(e){e.stemLength!==this.props.stemLength&&this.sliderRef.current&&this.sliderRef.current.setValue((0,Jl.zy)(e.stemLength))}render(){const{stemEnabled:e,stemLength:t,variant:n,disabled:i}=this.props;return(0,l.jsxs)("div",Object.assign({className:"stem-editor",onClick:this.stopPropagation},{children:[(0,l.jsx)("div",Object.assign({className:"stem-slider"},{children:(0,l.jsx)(SliderWithTooltip,{ref:this.sliderRef,discrete:!1,min:.1,max:9,initialValue:(0,Jl.zy)(t),onChange:this.saveStemLength,onInput:this.stemLengthUpdating,displayBounds:!0,width:150,formatNumbers:this.formatStemHeight,tooltipPosition:Ql.DOWN,variant:n,disabled:i})})),(0,l.jsx)(zr,{enabled:!0,checked:e,label:"Show Stem",onChange:this.onChangeStemEnabled})]}))}}StemEditor.contextType=m.I;var Um=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{PINS:Hm}=g.Z.WORKSHOP;let Fm=class PinAssetEditor extends r.Component{constructor(e){super(e),this.closePinAssetEditor=e=>{e&&e.stopPropagation(),this.props.onClose()},this.handleColorPicked=e=>{this.context.analytics.trackGuiEvent("pin_change_color"),this.props.onSave({color:e})},this.saveStemEnabled=e=>{this.context.analytics.trackGuiEvent(e?"pin_show_stem":"pin_hide_stem"),this.props.onSave({stemEnabled:e})},this.saveStemLength=e=>{this.context.analytics.trackGuiEvent("pin_change_stem_height"),this.props.onSave({stemLength:e})},this.previewStemLength=e=>{const{id:t,pinType:n}=this.props;this.context.commandBinder.issueCommand(new jm.tE(t,n,{stemLength:e}))},this.stopPropagation=e=>{e.stopPropagation()}}renderStemEditor(){const{pin:e}=this.props;return(0,l.jsx)(StemEditor,{stemLength:e.stemLength,stemEnabled:e.stemEnabled,onLengthUpdate:this.previewStemLength,onLengthChanged:this.saveStemLength,onStemEnabledChanged:this.saveStemEnabled})}render(){const{toolPanelLayout:e,open:t,pin:n,colors:i}=this.props,s=e===p.wS.BOTTOM_PANEL;if(!t&&!s)return null;const r=this.context.locale.t(Hm.COLOR_STEM_EDITOR_TITLE);return(0,l.jsxs)("div",Object.assign({className:d()("pin-tool-editor",{"tool-popup":!s,open:s&&t}),onClick:this.stopPropagation},{children:[(0,l.jsxs)("div",Object.assign({className:"tool-editor-title"},{children:[(0,l.jsx)("span",{children:r}),(0,l.jsx)(An.P,{buttonStyle:An.A.LIGHT,onClose:this.closePinAssetEditor,hideTooltip:!0})]})),(0,l.jsx)(ic,{colors:i,defaultColor:n.color,onColorPicked:this.handleColorPicked}),this.renderStemEditor()]}))}};Fm.contextType=m.I,Fm=Um([_n.Z],Fm);var Bm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Vm=class NoteDetailsPanel extends r.Component{constructor(e){super(e),this.bindings=[],this.onCommentFocus=e=>{this.toolPanel.scrollToSelector(`[data-id='${e.commentId}']`)},this.closeEditor=()=>{this.context.commandBinder.issueCommand(new Tp.df(!1))},this.savePinAppearance=e=>{const{note:t}=this.props;t&&this.context.commandBinder.issueCommand(new Tp.oE(t.id,e))},this.setToolPanelRef=e=>{e&&(this.toolPanel=e)}}componentDidMount(){this.bindings.push(this.context.messageBus.subscribe(Vs.JL,this.onCommentFocus))}componentWillUnmount(){for(const e of this.bindings)e.cancel()}componentDidUpdate(e){var t,n;this.toolPanel&&(e.notesPhase!==Ep.U.EDITING&&this.props.notesPhase===Ep.U.EDITING||(null===(t=e.note)||void 0===t?void 0:t.id)!==(null===(n=this.props.note)||void 0===n?void 0:n.id)||e.modalOpen&&!this.props.modalOpen)&&this.toolPanel.resetScrollTop()}render(){const{note:e,noteListViews:t,notesPhase:n,closing:i,creatingNote:s,modalOpen:r,toolPanelLayout:o,manager:a}=this.props,c=!!e&&(0,Op.C)(this.context.userData,Yc.J.NOTE,e.user),d=n===Ep.U.EDITING,u=o===p.wS.BOTTOM_PANEL,h=!(!e||i||u&&r),m=d&&u;return(0,l.jsxs)(DetailPanel,Object.assign({ref:this.setToolPanelRef,open:h,toolPanelLayout:o,scrollingDisabled:m},{children:[(0,l.jsx)(xm,{manager:a,note:e,toolPanelLayout:o,notesPhase:n,creatingNote:s,noteListViews:t}),e&&u&&c&&(0,l.jsx)(Fm,{id:e.id,pin:e,pinType:zc.Er.NOTE,onSave:this.savePinAppearance,onClose:this.closeEditor,colors:Fs.ZP.colors,open:d,toolPanelLayout:o},e.id)]}))}};Vm.contextType=m.I,Vm=Bm([_n.Z],Vm);var Gm=n(77534);const Wm=({children:e,className:t})=>{if(!e)return null;const n=d()("panel-title",t);return(0,l.jsx)("div",Object.assign({className:n},{children:e}))},zm=(0,ts.Jm)();function Km(e){const{tooltip:t,icon:n,label:i,analytic:s,children:o,overlay:a,className:c,popupSize:d="medium",onOpenPopup:u}=e,{analytics:h}=(0,r.useContext)(m.I),p=L(),g=vi(qo.Bg,!1),[f,v]=(0,r.useState)(!1),b=(0,r.useCallback)((e=>{e.stopPropagation(),f||(h.track(s),u&&u()),v(!f)}),[s,h,f,u]),y=(0,r.useCallback)((e=>{e||v(e)}),[]),S=a?"overlay":!g&&p?"dark":"light",E=zm||f?"static":"hover",T=f?o:zm?void 0:t,O={placement:a?"bottom":"bottom-end",onToggle:y,trigger:E,theme:f?"light":"dark",size:f?d:"small"},_=`button-tooltip-${t}-${E}`;return(0,l.jsx)(nt,{icon:n,ariaLabel:t||i,label:i,className:c,variant:a?et.FAB:et.TERTIARY,theme:S,onClick:b,tooltip:T,tooltipOptions:O},_)}function Ym({analytic:e,children:t,className:n}){const i=_().t(g.Z.REUSABLES.HELP_BUTTON_TOOLTIP_MESSAGE);return(0,l.jsx)(Km,Object.assign({icon:"help",tooltip:i,analytic:`${e}_help_click`,className:d()("help-button",n)},{children:t}))}const{EDIT_BAR:qm}=g.Z.WORKSHOP;function $m({tool:e}){const{helpHref:t,helpMessagePhraseKey:n}=e,i=_(),s=i.t(qm.HELP_LINK);return(0,l.jsxs)("div",Object.assign({className:"tool-help"},{children:[n&&i.t(n),t&&(0,l.jsx)(Link,Object.assign({href:t},{children:s}))]}))}function Zm({tool:e}){const{analytic:t,helpMessagePhraseKey:n}=e;return n?(0,l.jsx)(Ym,Object.assign({analytic:t,className:"tool-help-button"},{children:(0,l.jsx)($m,{tool:e})})):null}const{CLOSE_BUTTON_TOOLTIP_MESSAGE:Qm}=g.Z.REUSABLES,{COLLAPSE_PANEL:Xm,EXPAND_PANEL:Jm}=g.Z.PANELS;function eg(e){const{tool:t,title:n,titleNode:i,children:s,expandable:o,hideHelp:a,hideBadge:c,onTogglePanel:d}=e,u=_(),h=ep(),{commandBinder:g}=(0,r.useContext)(m.I),f=vi(qo.Bg,!1),v=f||t.id===p.w1.NOTES||t.id===p.w1.SEARCH,b=f&&!a,y=(0,r.useCallback)((()=>{g.issueCommand(new hi.CH(t.id))}),[g,t]),S=(0,r.useCallback)((e=>{e&&e.stopPropagation();const t=!h;d&&d(t),g.issueCommand(new hi.Fg(t))}),[g,h,d]),E=h?"dpad-up":"dpad-down",T=h?u.t(Jm):u.t(Xm);return(0,l.jsxs)("div",Object.assign({className:"panel-header",onClick:o?S:void 0},{children:[(0,l.jsxs)(Wm,{children:[o&&(0,l.jsx)(nt,{icon:E,label:n,tooltip:T,tooltipOptions:{placement:"bottom-start"},variant:et.TERTIARY,onClick:S}),!o&&n,t.badgePhraseKey&&!c&&(0,l.jsx)("span",Object.assign({className:"word-badge"},{children:u.t(t.badgePhraseKey)})),i||null]}),(0,l.jsxs)(st,Object.assign({className:"panel-header-controls"},{children:[s,b&&(0,l.jsx)(Zm,{tool:t}),v&&(0,l.jsx)(nt,{icon:"close",tooltip:u.t(Qm),tooltipOptions:{placement:"bottom"},variant:et.TERTIARY,onClick:y})]}))]}))}function tg(e){const{active:t,closed:n,toolId:i,children:s,className:o,filmstrip:a,title:c,titleNode:u,subheader:h,hideHelp:m,hideBadge:g,footer:f,controls:v,subheaderCollapsedHeight:b}=e,y=ep(),S=C(),E=Zo(i),[T,O]=(0,r.useState)(!1);let _=0;const A=(0,r.useCallback)((()=>{T||(window.clearTimeout(_),O(!0),_=window.setTimeout((()=>{O(!1)}),qo.g))}),[y,T]);(0,r.useEffect)((()=>()=>{window.clearTimeout(_)}),[]);const w=!!E&&!n,N=S===p.wS.BOTTOM_PANEL,P=y&&T,I=!y||P,k={active:t&&!y,closed:n,collapsed:y,collapsing:P,"filmstrip-panel":a},L=b&&(N&&y)?{height:b+qo.oO}:void 0,M=h&&(b||!y),D=a||N;return(0,l.jsxs)(mi,Object.assign({open:w,className:d()("list-panel",k,o),style:L},{children:[E&&(0,l.jsx)(eg,Object.assign({tool:E,title:c,titleNode:u,hideHelp:m,hideBadge:g,expandable:D,onTogglePanel:A},{children:v})),M&&h,I&&s,I&&f||null]}))}var ng=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let ig=class Accordions extends r.Component{constructor(e){super(e)}render(){const{children:e,className:t}=this.props,n=t||"";return(0,l.jsx)("div",Object.assign({className:d()("accordion-list",[n])},{children:e}))}};ig=ng([_n.Z],ig);var sg=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let rg=class AccordionHeader extends r.Component{constructor(e){super(e)}render(){const{label:e,onToggle:t,children:n,className:i,actions:s}=this.props;return(0,l.jsxs)("div",Object.assign({className:d()("accordion-header",i),onClick:t||void 0},{children:[n,(0,l.jsx)("span",Object.assign({className:"accordion-header-label"},{children:e})),!!t&&(0,l.jsx)("button",{className:"icon accordion-icon accordion-toggle-icon"}),s]}))}};rg=sg([_n.Z],rg);var og=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let ag=class AccordionGroup extends r.Component{constructor(e){super(e),this.toggleGroup=()=>{this.state.expanded?this.animateCollapseGroup():this.animateExpandGroup();const{id:e,onExpandChange:t}=this.props;t&&t(e,this.state.expanded)};const t=!e.header||!!e.open;this.state={expanded:t,showChildren:t};const{id:n,onExpandChange:i}=this.props;i&&i(n,this.state.expanded)}componentDidUpdate(e){!e.open&&this.props.open&&this.animateExpandGroup(),e.open&&!this.props.open&&this.animateCollapseGroup()}componentWillUnmount(){void 0!==this.timeout&&window.clearTimeout(this.timeout)}animateExpandGroup(){this.setState({showChildren:!0},(()=>{this.timeout=window.setTimeout((()=>{delete this.timeout,this.setState({expanded:!0})}))}))}animateCollapseGroup(){this.setState({expanded:!1},(()=>{this.timeout=window.setTimeout((()=>{delete this.timeout,this.state&&!this.state.expanded&&this.setState({showChildren:!1})}),qo.g)}))}renderContents(){const{children:e,emptyMessage:t,doubleLine:n,naturalHeight:i}=this.props,{expanded:s,showChildren:r}=this.state,o=n?60:40,a=e&&Array.isArray(e)&&e.length||0,c=a>0;let d;d=s?c?a*o+"px":`${o}px`:"0";const u=i?void 0:{height:`${d}`},h=c?e:(0,l.jsx)("p",Object.assign({className:"hint accordion-empty-message"},{children:t||""}));return(0,l.jsx)("div",Object.assign({className:"accordion-contents",style:u},{children:r&&h}))}renderHeader(){const{header:e,collapsible:t,actions:n}=this.props,{expanded:i}=this.state,s="string"==typeof e?e:void 0;if(s)return(0,l.jsx)(rg,{label:s,expanded:i,onToggle:t?this.toggleGroup:void 0,actions:n});if(void 0!==e){const t=e;return(0,r.cloneElement)(t,{expanded:i,onToggle:this.toggleGroup})}return null}render(){const{doubleLine:e}=this.props,{expanded:t}=this.state;return(0,l.jsxs)("div",Object.assign({className:d()("accordion-group",{expanded:t,collapsed:!t,"double-line":e}),"aria-expanded":t?"true":"false"},{children:[this.renderHeader(),this.renderContents()]}))}};ag=og([_n.Z],ag);var lg=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let cg=class AccordionItem extends r.Component{constructor(e){super(e),this.onClick=e=>{const t=e.target;this.props.onSelect&&!t.classList.contains("icon-more-vert")&&this.props.onSelect(this.props.sid)}}render(){const{enabled:e,selected:t,children:n,className:i}=this.props,s=d()("accordion-item",{"accordion-item-disabled":!e,"accordion-item-selected":t},i);return(0,l.jsx)("div",Object.assign({className:s,onClick:this.onClick},{children:n}))}};function dg(e){const{text:t,keyPrefix:n,markers:i}=e,[s,o]=i,a=[];let c=t,d=c.search(`${s}|${o}`),u=c.search(s);for(;d>-1;){const e=d===u,i=c.slice(0,d),h=t.length-c.length,p=`${n},${h}-${h+d}`;e?a.push((0,l.jsx)(r.Fragment,{children:i},p)):a.push((0,l.jsx)("span",Object.assign({"data-blocktype":"marker"},{children:i}),p)),c=c.slice(d+(e?s.length:o.length),c.length),d=c.search(`${s}|${o}`),u=c.search(s)}if(c.length){const e=`${n},${t.length-c.length}-${t.length}`;a.push((0,l.jsx)(r.Fragment,{children:c},e))}return 0===a.length?(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)(l.Fragment,{children:a})}function ug(e){const{block:t,children:n,onClick:i}=e;return i?(0,l.jsx)("a",Object.assign({className:`link-annotation ${ja.o.USER}`,onClick:i,"data-id":t.id||void 0,"data-value":t.value||void 0,"data-blocktype":t.blockType},{children:n})):(0,l.jsx)("span",Object.assign({"data-blocktype":t.blockType},{children:n}))}function hg(e){const{block:t,children:n,onClick:i}=e;return i?(0,l.jsx)("a",Object.assign({className:`link-annotation ${ja.o.USER}`,onClick:i,"data-blocktype":t.blockType},{children:n})):(0,l.jsx)("span",Object.assign({"data-blocktype":t.blockType},{children:n}))}function pg(e){const{block:t,children:n,linksActive:i,onClick:s}=e;return s||i?(0,l.jsx)("a",Object.assign({href:`${t.value}`,target:"_blank",className:`link-annotation ${ja.o.LINK}`,onClick:s,"data-blocktype":t.blockType,"data-value":t.value},{children:n})):(0,l.jsx)("span",Object.assign({"data-blocktype":t.blockType,"data-value":t.value},{children:n}))}function mg(e){const{block:t,keyPrefix:n,markers:i}=e,{blockType:s,text:r}=t,o=i?(0,l.jsx)(dg,{keyPrefix:n,text:r,markers:i}):(0,l.jsx)(l.Fragment,{children:r});return s===xa.C.USER?(0,l.jsx)(ug,Object.assign({},e,{children:o})):s===xa.C.HASH?(0,l.jsx)(hg,Object.assign({},e,{children:o})):s===xa.C.LINK&&t.value?(0,l.jsx)(pg,Object.assign({},e,{children:o})):o}function gg(e){const t=e.textParser.parse(e.text),n=d()("text-box-text",e.className);return(0,l.jsx)("div",Object.assign({className:n},{children:t.map(((t,n)=>(0,l.jsx)(mg,{keyPrefix:`${t.blockType}${n}`,block:t,linksActive:!!e.linksActive,onClick:e.onClick,markers:e.markers},`${t.blockType}${n}`)))}))}cg=lg([_n.Z],cg);const{REUSABLES:fg}=g.Z;function vg({phraseKey:e,url:t}){const n=_(),i=e?n.t(e):n.t(fg.FEEDBACK_LINK_LABEL);return(0,l.jsx)("div",Object.assign({className:"feedback-link"},{children:(0,l.jsxs)("a",Object.assign({className:"link",href:t,target:"_blank",rel:"noopener"},{children:[i,(0,l.jsx)("span",{className:"icon icon-comment-outline"})]}))}))}const{LAYERS:bg}=g.Z.WORKSHOP;function yg(){const e=function(){const e=ta();return!!e&&e.isViewsPolicyEnabled()}(),t=vi($o.Pe,!1),n=_(),{analytics:i,commandBinder:s}=(0,r.useContext)(m.I),o=(0,r.useCallback)((e=>{const{tagName:t}=e.target||{};"A"===t&&(i.trackToolGuiEvent("layers","views_interest_click"),s.issueCommand(new ui.Bz(di.P.VIEWS_OPT_IN,!0)))}),[s,i]);if(!e||t)return null;const a=n.t(bg.VIEWS_INTEREST_BANNER_MESSAGE);return(0,l.jsx)("div",Object.assign({className:"views-banner views-interest-banner",onClick:o},{children:(0,l.jsx)(it,Object.assign({layout:"horizontal"},{children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})}))}))}const{NOTES:Sg}=g.Z.SHOWCASE;var Eg;!function(e){e.TODAY="TODAY",e.YESTERDAY="YESTERDAY",e.THIS_WEEK="THIS_WEEK",e.ONE_WEEK_AGO="ONE_WEEK_AGO",e.TWO_WEEKS_AGO="TWO_WEEKS_AGO",e.THREE_WEEKS_AGO="THREE_WEEKS_AGO",e.OLDER="OLDER"}(Eg||(Eg={}));class NotesList extends r.Component{constructor(e){super(e),this.bindings=[],this.transitionTimeout=0,this.updateNoteFilter=()=>{const e=this.props.manager.dataMap.notesViewData;this.setState({filter:e.notesFilter})},this.transitionNoteOut=e=>{const{filter:t}=this.state,n=e.resolved&&t===Gm.$.OPEN?e.id:null;this.setState({filteringOutId:n}),window.clearTimeout(this.transitionTimeout),n&&(this.transitionTimeout=window.setTimeout((()=>{this.setState({filteringOutId:null})}),qo.g))},this.updateNoteGroups=()=>{const e=this.getSortedNoteGroups();this.setState({listGroups:e})},this.onSelectListItem=e=>{this.trackEvent("notes_list_open_note");const[t,n]=e.split("-"),i=t===_p.h.COMMENT;this.openListItem(n,i,!1)},this.editNote=e=>{this.trackEvent("notes_list_edit_note"),this.openListItem(e.id,!1,!0)},this.deleteNote=e=>{this.trackEvent("notes_list_delete_note"),this.context.commandBinder.issueCommand(new Tp.sG(e.id))},this.openNotesIntro=e=>{e.stopPropagation(),this.context.commandBinder.issueCommand(new ui.Bz(di.P.NOTES_INTRO,!0))},this.onFilterChange=e=>{if(e){const t=e;this.trackEvent("notes_list_change_filter"),this.props.manager.dataMap.notesViewData.setNotesFilter(t)}},this.getMenuOptions=(e,t,n)=>{const i=[];if(t){const t=()=>this.editNote(e);i.push([Sg.EDIT_LIST_ITEM_OPTION_CTA,t])}if(n){const t=()=>this.deleteNote(e);i.push([Sg.DELETE_LIST_ITEM_OPTION_CTA,t])}return i},this.state={listGroups:{},filter:Gm.$.OPEN,filteringOutId:null}}componentDidMount(){const{notesViewData:e}=this.props.manager.dataMap,{messageBus:t}=this.context;this.bindings.push(e.onNotesFilterChanged(this.updateNoteFilter),t.subscribe(Vs.hY,this.transitionNoteOut)),this.textParser=new ja.v({links:!0,hashtags:!0,users:this.context.userData}),this.updateNoteGroups(),this.updateNoteFilter()}componentWillUnmount(){window.clearTimeout(this.transitionTimeout);for(const e of this.bindings)e.cancel()}componentDidUpdate(e,t){e.noteListViews===this.props.noteListViews&&t.filter===this.state.filter&&e.searchBlock===this.props.searchBlock||this.updateNoteGroups()}trackEvent(e){this.context.analytics.trackToolGuiEvent("notes",e)}getSortedNoteGroups(){const e={};return this.props.noteListViews.forEach((t=>{const n=this.getDateBucket(t.createdTime);e[n]||(e[n]={dateBucket:n,items:[]}),e[n].items.push(t)})),e}getDateBucket(e){const t=new Date(e),n=new Date;n.setHours(0,0,0,0),t.setHours(0,0,0,0);const i=(n.getTime()-t.getTime())/864e5;if(0===i)return Eg.TODAY;if(1===i)return Eg.YESTERDAY;if(i<7)return Eg.THIS_WEEK;const s=Math.floor(i/7);return 1===s?Eg.ONE_WEEK_AGO:2===s?Eg.TWO_WEEKS_AGO:3===s?Eg.THREE_WEEKS_AGO:Eg.OLDER}openListItem(e,t,n){this.context.commandBinder.issueCommand(new Tp.Zd(e,t,n))}getEmptyMessage(){const{searchBlock:e}=this.props,{filter:t}=this.state;return this.context.locale.t(e?Sg.NO_MATCHES:t===Gm.$.OPEN?Sg.HAVE_NONE_OPEN:t===Gm.$.RESOLVED?Sg.HAVE_NONE_RESOLVED:Sg.HAVE_NONE)}getAnnotationText(e){let t=e.text;if(""===t){const n=e.numAttachments,i=e.numComments-1;n>0?t=this.context.locale.t(Sg.NUM_ATTACHMENTS,n):0===i&&(t=this.context.locale.t(Sg.CONTENT_DELETED))}return t}getTitleNode(){return(0,l.jsx)(Es.hU,{iconClass:"icon-question",buttonStyle:Es.Dd.PLAIN,onClick:this.openNotesIntro})}renderAnnotationSummary(e){const t=this.getAnnotationText(e);return(0,l.jsx)("div",Object.assign({className:d()("note-text",{"note-summary-info":!e.text})},{children:(0,l.jsx)(gg,{text:t,textParser:this.textParser,linksActive:!1})}))}renderItem(e,t){const{filteringOutId:n}=this.state,{searchBlock:i}=this.props,{id:s,user:r,color:o,assetType:a,numComments:c}=e,u=`${a}-${s}`,{userData:h}=this.context,p=(0,Op.C)(h,Yc.J.NOTE,e.user),m=(0,Op.K)(h,Yc.J.NOTE,e.user),g=this.getMenuOptions(e,p,m),f=r?h.getUserDisplay(r.email):null,v=c-1,b=this.context.locale.t(Sg.REPLIES,v),y=d()("note-header",{"accordion-item-with-options":g.length,"accordion-item-closing":s===n});return(0,l.jsxs)(cg,Object.assign({sid:u,className:y,enabled:!0,selected:!1,onSelect:this.onSelectListItem},{children:[(0,l.jsx)(td,{badgeStyle:{backgroundColor:o,borderColor:o},iconClass:"icon-comment"}),(0,l.jsxs)("div",Object.assign({className:"note-details"},{children:[f&&(0,l.jsx)("span",Object.assign({className:"note-user"},{children:f.name})),v>0&&!i&&(0,l.jsx)("span",Object.assign({className:"note-summary-info note-replies"},{children:b})),this.renderAnnotationSummary(e)]})),!i&&g.length>0&&(0,l.jsx)(OptionsButton,{id:s,menu:g,accordion:!0})]}),u)}renderGroups(){const{listGroups:e,filteringOutId:t}=this.state,n=[];for(const i in e){const s=e[i];n.push((0,l.jsx)(ag,Object.assign({id:i,header:this.context.locale.t(Sg[s.dateBucket]),open:!0,doubleLine:!0,naturalHeight:!!t},{children:s.items.map(((e,t)=>this.renderItem(e,t)))}),i))}return n}renderFilter(){const{filter:e}=this.state,t=[{text:this.context.locale.t(Sg.FILTER_UNRESOLVED),value:Gm.$.OPEN,selected:e===Gm.$.OPEN},{text:this.context.locale.t(Sg.FILTER_RESOLVED),value:Gm.$.RESOLVED,selected:e===Gm.$.RESOLVED},{text:this.context.locale.t(Sg.FILTER_ALL),value:Gm.$.ALL,selected:e===Gm.$.ALL}];return(0,l.jsx)("div",Object.assign({className:"list-menu note-filter"},{children:(0,l.jsx)(SelectMenu_SelectMenu,{className:"filter-note-select",menuStyle:Gi.DROPDOWN,onChange:this.onFilterChange,options:t})}))}renderNotesAndComments(){const{noteListViews:e}=this.props;if(0===e.length){const e=this.getEmptyMessage();return(0,l.jsx)("div",Object.assign({className:"empty-message"},{children:e}))}return(0,l.jsx)(ig,{children:this.renderGroups()})}renderBanner(){const{searchBlock:e}=this.props;return e?null:(0,l.jsx)(yg,{})}renderSearchHeader(){const{searchBlock:e,onCancelSearch:t}=this.props;return e?(0,l.jsxs)("div",Object.assign({className:"list-search"},{children:[(0,l.jsx)("span",Object.assign({className:"search-term"},{children:e.text})),(0,l.jsx)(Ts.zx,Object.assign({buttonStyle:Ts.ZJ.PLAIN,onClick:t},{children:"Clear"}))]})):null}renderSubheader(){return(0,l.jsxs)("div",Object.assign({className:"list-subheaders"},{children:[this.renderBanner(),this.renderSearchHeader(),this.renderFilter()]}))}render(){const{active:e,searchBlock:t,noteListViews:n}=this.props,i=!!t&&t.blockType===xa.C.USER,s=!!t&&t.blockType===xa.C.HASH,r=n.length,o=this.context.locale.t(t?Sg.RESULTS:Sg.NOTES,r);return(0,l.jsxs)(tg,Object.assign({active:e,toolId:p.w1.NOTES,className:"annotations-list-panel",title:o,titleNode:this.getTitleNode(),subheader:this.renderSubheader()},{children:[(0,l.jsx)("div",Object.assign({className:d()("list-contents","annotations-list",{"search-results-user":i,"search-results-hash":s})},{children:this.renderNotesAndComments()})),(0,l.jsx)(vg,{url:"https://forms.gle/LkkQ1kphFKGtBFfUA"})]}))}}NotesList.contextType=m.I;var Tg=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Og=class NotesPanel extends r.Component{constructor(e){super(e),this.bindings=[],this.detailPanelClosedTimeout=0,this.updateListViews=()=>{const e=this.props.manager.dataMap.notesViewData.noteListViews;this.setState({noteListViews:e.values()})},this.updateNotesPhase=()=>{this.setState({notesPhase:this.props.manager.dataMap.notesViewData.notesPhase})},this.pinPlaced=e=>{e.pinType===zc.Er.NOTE&&this.startOpeningNoteWidget()},this.startClosingDetailPanel=()=>{this.state.detailPanelClosing||(this.setState({detailPanelClosing:!0}),this.detailPanelClosedTimeout=window.setTimeout((()=>{this.setState({currentNote:null,detailPanelClosing:!1})}),qo.El))},this.updateCurrentNote=async()=>{const{currentNote:e}=this.state,{notesPhase:t,openNoteView:n}=this.props.manager.dataMap.notesViewData;window.clearTimeout(this.detailPanelClosedTimeout),t===Ep.U.CREATING?(null==e?void 0:e.id)!==(null==n?void 0:n.id)&&this.startClosingDetailPanel():!e&&n?this.startOpeningNoteWidget():e&&!n?this.startClosingDetailPanel():this.setState({currentNote:n})},this.updateSearchTerm=()=>{const e=this.props.manager.dataMap.notesViewData;this.setState({searchBlock:e.searchBlock})},this.onCancelSearch=()=>{this.context.commandBinder.issueCommand(new Tp.av)},this.state={detailPanelClosing:!1,noteListViews:[],notesPhase:Ep.U.CLOSED,currentNote:null,searchBlock:null}}componentDidMount(){const{notesViewData:e}=this.props.manager.dataMap,{messageBus:t}=this.context;this.bindings.push(e.onNotesPhaseChanged(this.updateNotesPhase),e.onOpenNoteViewChanged(this.updateCurrentNote),e.noteListViews.onChanged(this.updateListViews),e.onSearchBlockChanged(this.updateSearchTerm),t.subscribe(Sp.b0,this.pinPlaced)),this.updateListViews(),this.updateCurrentNote(),this.updateNotesPhase(),this.updateSearchTerm()}componentWillUnmount(){window.clearTimeout(this.detailPanelClosedTimeout);for(const e of this.bindings)e.cancel()}startOpeningNoteWidget(){const e=this.props.manager.dataMap.notesViewData;window.clearTimeout(this.detailPanelClosedTimeout),this.setState({currentNote:e.openNoteView,detailPanelClosing:!1})}render(){const{toolPanelLayout:e,manager:t,modalOpen:n}=this.props,{notesViewData:i}=t.dataMap,{detailPanelClosing:s,searchBlock:r,noteListViews:o,notesPhase:a,currentNote:c}=this.state,d=s||!c,u=i.isNewNote;return(0,l.jsxs)("div",Object.assign({className:"tool-panel notes-panel"},{children:[(0,l.jsx)(Vm,{manager:t,closing:s,note:c,modalOpen:n,toolPanelLayout:e,notesPhase:a,creatingNote:u,noteListViews:o}),(0,l.jsx)(NotesList,{manager:t,active:d,noteListViews:o,searchBlock:r,onCancelSearch:this.onCancelSearch})]}))}};Og.contextType=m.I,Og=Tg([_n.Z],Og);const _g=P("openNoteView",(function(){const e=Xc(),[t,n]=(0,r.useState)(e?e.openNoteView:null);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onOpenNoteViewChanged(n);return n(e.openNoteView),()=>t.cancel()}),[e]),t}));var Ag,wg=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{NOTES:Ng}=g.Z.SHOWCASE;let Pg=Ag=class NotesOverlay extends r.Component{constructor(e){super(e),this.bindings=[],this.touchDevice=(0,ts.Jm)(),this.showNudgeTimeout=0,this.dismissNudgeTimeout=0,this.isUnmounting=!1,this.updateNotesPhase=()=>{this.isUnmounting||this.setState({notesPhase:this.props.manager.dataMap.notesViewData.notesPhase})},this.updateActiveAnnotation=()=>{if(this.isUnmounting)return;const e=this.props.manager.dataMap.notesViewData.activeNotation;this.setState({activeNotation:e})},this.updateForPinChanges=()=>{if(this.isUnmounting)return;const e=this.props.manager.dataMap.pinsViewData;this.setState({pinEditorState:e.pinEditorState,creationProgress:e.progress,screenPosition:e.screenPosition,canPlace:e.canPlace,canAdd:e.canAdd})},this.showNudge=()=>{this.isUnmounting||(this.setState({showAddNudge:!0}),this.dismissNudgeTimeout=window.setTimeout(this.dismissNudge,Ag.DISMISS_NUDGE_TIMEOUT))},this.dismissNudge=()=>{this.isUnmounting||(this.context.settings.setLocalStorageProperty(Hn.F.NotesAddNudgeSeen,!0),this.setState({showAddNudge:!1}))},this.clickCTAButton=e=>{this.dismissNudge(),this.hasCancelCta()?(e.stopPropagation(),this.props.manager.dataMap.notesViewData.isNewNote&&this.context.commandBinder.issueCommand(new Tp.gc)):this.onStartAddingNote(e)},this.savePinAppearance=e=>{const{openNoteView:t}=this.props;t&&this.context.commandBinder.issueCommand(new Tp.oE(t.id,e))},this.onStartAddingNote=e=>{e.stopPropagation(),this.trackEvent("notes_overlay_click_add"),this.context.commandBinder.issueCommand(new Tp.VI)},this.deleteNote=()=>{const{openNoteView:e}=this.props;e&&(this.trackEvent("notes_overlay_click_delete"),this.context.commandBinder.issueCommand(new Tp.sG(e.id)))},this.closeEditor=()=>{this.context.commandBinder.issueCommand(new Tp.df(!1))},this.toggleColorPicker=e=>{e.stopPropagation();const{notesPhase:t}=this.state,n=t===Ep.U.EDITING;this.context.commandBinder.issueCommand(new Tp.df(!n)),this.setState({showAddNudge:!1})},this.state={showAddNudge:!1,notesPhase:Ep.U.CLOSED,pinEditorState:zc.V8.IDLE,activeNotation:null,screenPosition:null,creationProgress:0,canPlace:!0,canAdd:!0}}componentDidMount(){const{notesViewData:e,pinsViewData:t}=this.props.manager.dataMap;this.bindings.push(e.onNotesPhaseChanged(this.updateNotesPhase),e.onActiveNotationChanged(this.updateActiveAnnotation),t.onChanged(this.updateForPinChanges)),this.setNudge(),this.updateNotesPhase(),this.updateForPinChanges(),this.updateActiveAnnotation()}componentDidUpdate(e){var t,n;(null===(t=e.openNoteView)||void 0===t?void 0:t.id)!==(null===(n=this.props.openNoteView)||void 0===n?void 0:n.id)&&this.dismissNudge()}componentWillUnmount(){this.isUnmounting=!0,window.clearTimeout(this.showNudgeTimeout),window.clearTimeout(this.dismissNudgeTimeout);for(const e of this.bindings)e.cancel()}setNudge(){this.context.settings.tryGetProperty(Hn.F.NotesAddNudgeSeen,!1)||this.showNudgeTimeout||(this.showNudgeTimeout=window.setTimeout(this.showNudge,Ag.SHOW_NUDGE_TIMEOUT))}trackEvent(e){this.context.analytics.trackToolGuiEvent("notes",e)}hasCancelCta(){const{pinEditorState:e}=this.state;return e===zc.V8.CREATING||e===zc.V8.PLACING}renderOverlayMessage(){const{pinEditorState:e,canPlace:t}=this.state;if(e===zc.V8.CREATING||!this.touchDevice&&e===zc.V8.PLACING||!t){const e=this.context.locale.t(this.touchDevice?Ng.OVERLAY_ADD_TOUCH:Ng.OVERLAY_ADD_CLICK),n=this.context.locale.t(this.touchDevice?Ng.OVERLAY_PLACE_TOUCH:Ng.OVERLAY_PLACE_CLICK),i=t?e:n;return(0,l.jsxs)("div",Object.assign({className:"overlay-message"},{children:[(0,l.jsx)("div",{className:"icon icon-notes"}),(0,l.jsx)("span",Object.assign({className:"message"},{children:i}))]}))}return null}renderProgressCircle(){const{creationProgress:e,screenPosition:t,pinEditorState:n}=this.state;if(!(n===zc.V8.PRESSING&&e>0&&this.touchDevice)||!t)return null;const i={left:t.x-Ag.PROGRESS_RADIUS/2+"px",top:t.y-Ag.PROGRESS_RADIUS/2+"px"};return(0,l.jsx)("div",Object.assign({className:"point-button-wrapper",style:i},{children:(0,l.jsx)(Dc,Object.assign({progress:100*e,innerRadius:Ag.PROGRESS_RADIUS,barWidth:Ag.PROGRESS_WIDTH},{children:(0,l.jsx)("circle",{className:"point",cx:"0",cy:"0",r:"22",transform:"rotate(-90)",fill:"#fff"})}))}))}renderTopBar(e){const{notesPhase:t}=this.state,{openNoteView:n,toolPanelLayout:i,manager:s}=this.props,{notesViewData:r}=s.dataMap,o=i===p.wS.SIDE_PANEL,a=r.isNewNote;if(o||a)return this.renderOverlayMessage();if(n&&e){const e=t!==Ep.U.OPENING&&!!n,i=t===Ep.U.EDITING?Ts.BN.ACTIVE:e?Ts.BN.ENABLED:Ts.BN.DISABLED;return(0,l.jsx)("div",Object.assign({className:"overlay-bar overlay-top-right"},{children:(0,l.jsx)(Es.hU,{iconClass:"icon-stem-height",buttonStyle:Es.Dd.OVERLAY,buttonState:i,onClick:this.toggleColorPicker})}))}return null}renderCta(e){const{showAddNudge:t,canAdd:n}=this.state,i=this.hasCancelCta(),s=n?Ts.BN.ENABLED:Ts.BN.DISABLED,r=!n||t?void 0:this.context.locale.t(i?Ng.CANCEL_TOOLTIP:Ng.ADD_TOOLTIP);return(0,l.jsx)(Es.hU,Object.assign({className:"overlay-cta-btn",buttonStyle:Es.Dd.PRIMARY,buttonState:s,tooltipMsg:r,tooltipPosition:e,onClick:this.clickCTAButton},{children:(0,l.jsx)("div",Object.assign({className:d()("overlay-cta-rotate-btn",{"overlay-cta-cancel":i})},{children:(0,l.jsx)("span",{className:"icon icon-plus"})}))}))}renderActionBar(e){const{openNoteView:t}=this.props,{showAddNudge:n,notesPhase:i,activeNotation:s,pinEditorState:r}=this.state;if(i===Ep.U.CLOSED||s)return null;const{toolPanelLayout:o}=this.props,a=r===zc.V8.CREATING||r===zc.V8.PLACING,c=i===Ep.U.EDITING,u=i===Ep.U.OPENING,h=o===p.wS.SIDE_PANEL,m=this.context.locale.t(Ng.COLOR_STEM_TOOLTIP),g=this.context.locale.t(Ng.DELETE_TOOLTIP);if(h){const i=!a&&!u&&!!t,s=c?Ts.BN.ACTIVE:i?Ts.BN.ENABLED:Ts.BN.DISABLED;return(0,l.jsxs)("div",Object.assign({className:"overlay-cta"},{children:[e&&(0,l.jsx)(Es.hU,{className:d()("overlay-cta-button-outer","overlay-cta-button-outer-left"),iconClass:"icon-stem-height",buttonStyle:Es.Dd.OVERLAY,buttonState:s,tooltipMsg:m,tooltipPosition:Vo.lZ.DOWN,onClick:this.toggleColorPicker}),(0,l.jsx)(Nn,{className:"tooltip-simple-medium",open:n,message:(0,l.jsx)("span",{children:this.context.locale.t(Ng.ADD_CTA_TOOLTIP)}),arrowPos:On.BOTTOM_CENTER}),this.renderCta(Vo.lZ.DOWN),e&&(0,l.jsx)(Es.hU,{className:"overlay-cta-button-outer",buttonStyle:Es.Dd.OVERLAY,iconClass:"icon-delete",tooltipMsg:g,tooltipPosition:Vo.lZ.DOWN,buttonState:i?Ts.BN.ENABLED:Ts.BN.DISABLED,onClick:this.deleteNote})]}))}return(0,l.jsx)("div",Object.assign({className:"overlay-cta"},{children:this.renderCta(Vo.lZ.UP)}))}render(){const{toolPanelLayout:e,openModal:t,openNoteView:n,unaligned:i}=this.props;if(t)return null;const{notesPhase:s}=this.state,{userData:r}=this.context,o=r.isCommenter(),a=!!n&&(0,Op.C)(r,Yc.J.NOTE,n.user),c=s===Ep.U.EDITING,d=e===p.wS.SIDE_PANEL;return(0,l.jsxs)("div",Object.assign({className:"overlay"},{children:[this.renderTopBar(a),o&&!i&&this.renderActionBar(a),n&&d&&a&&(0,l.jsx)(Fm,{pin:n,id:n.id,pinType:zc.Er.NOTE,onSave:this.savePinAppearance,onClose:this.closeEditor,open:c,colors:Fs.ZP.colors,toolPanelLayout:e}),this.renderProgressCircle()]}))}};Pg.contextType=m.I,Pg.PROGRESS_RADIUS=132,Pg.PROGRESS_WIDTH=8,Pg.SHOW_NUDGE_TIMEOUT=5e3,Pg.DISMISS_NUDGE_TIMEOUT=5e3,Pg=Ag=wg([_n.Z],Pg);const Ig=_g(Pg);function kg(){const e=Pr(),t=Nr(),n=C();return e||t?null:(0,l.jsx)("div",Object.assign({className:"overlay tags-overlay"},{children:(0,l.jsx)("div",Object.assign({className:"overlay-top-center"},{children:(0,l.jsx)("div",Object.assign({className:"overlay-info"},{children:(0,l.jsx)(fp,{toolPanelLayout:n,overlay:!0,analyticAction:"tags_navigate_in_canvas"})}))}))}))}var Cg=n(64792),Lg=n(4559),Mg=n(63930),Dg=n(5947);function Rg({children:e,className:t}){const n=(0,r.useCallback)((e=>{e.stopPropagation()}),[]);return(0,l.jsx)("div",Object.assign({className:d()("settings-container settings-box",t),onClick:n},{children:e}))}function xg({label:e,children:t,className:n}){return(0,l.jsxs)("div",Object.assign({className:d()("settings-toggle",n)},{children:[(0,l.jsx)("div",Object.assign({className:"settings-label"},{children:e})),t]}))}function jg(e){const{id:t,onToggle:n,labelledBy:i,className:s,onOffLabel:o,enabled:a,toggled:c}=e,u=_(),h=(0,r.useCallback)((e=>{a&&n(e)}),[n,a]),p=u.t(g.Z.ON),m=u.t(g.Z.OFF),f=c?p:m;return(0,l.jsxs)("div",Object.assign({className:d()("reusable-toggle",s,{"toggle-on":c,enabled:a}),id:t,onClick:h,role:"checkbox","aria-checked":c,"aria-labelledby":i},{children:[o&&(0,l.jsx)("span",Object.assign({className:"toggle-label"},{children:f})),(0,l.jsx)("div",{className:"track"}),(0,l.jsx)("div",{className:"thumb"})]}))}var Ug=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Hg=class RadioButton extends r.Component{constructor(e){super(e),this.onChange=e=>{this.props.onChange(e)}}render(){const{id:e,name:t,value:n,checked:i,children:s,enabled:r}=this.props,o=!r;return(0,l.jsxs)("div",Object.assign({className:d()("radio-element","radio-button",{disabled:o})},{children:[(0,l.jsx)("input",{type:"radio",id:e,name:t,value:n,checked:i,onChange:this.onChange}),(0,l.jsx)("label",Object.assign({htmlFor:e},{children:s}))]}))}};function Fg(){const{settings:e}=(0,r.useContext)(m.I),t=_(),n=vi(Hn.F.UnitType,ec.M.METRIC),i=vi(Hn.F.MeasurementSnapping,!1),s=vi(Hn.F.MeasurementContinuousLines,!1),o=(0,r.useCallback)((t=>{t.stopPropagation();const i=n===ec.M.IMPERIAL?ec.M.METRIC:ec.M.IMPERIAL;e.setLocalStorageProperty(Hn.F.UnitType,i)}),[e,n]),a=(0,r.useCallback)((t=>{t.stopPropagation(),e.setLocalStorageProperty(Hn.F.MeasurementSnapping,!i)}),[e,i]),c=(0,r.useCallback)((t=>{t.stopPropagation(),e.setLocalStorageProperty(Hn.F.MeasurementContinuousLines,!s)}),[e,s]),d=t.t(g.Z.MEASUREMENT_CONTINUOUS_LINES),u=t.t(g.Z.MEASUREMENT_SNAPPING),h=t.t(g.Z.MEASUREMENT_UNITS),p=t.t(g.Z.MEASUREMENT_IMPERIAL),f=t.t(g.Z.MEASUREMENT_METRIC),v=n===ec.M.METRIC;return(0,l.jsxs)(Rg,{children:[(0,l.jsx)(xg,Object.assign({label:u},{children:(0,l.jsx)(jg,{onToggle:a,enabled:!0,onOffLabel:!0,toggled:i})})),(0,l.jsx)(xg,Object.assign({label:d},{children:(0,l.jsx)(jg,{onToggle:c,enabled:!0,onOffLabel:!0,toggled:s})})),(0,l.jsx)(xg,Object.assign({label:h,className:"units-setting"},{children:(0,l.jsxs)("div",Object.assign({className:"radio-group radio-buttons"},{children:[(0,l.jsx)(Hg,Object.assign({name:"unit",value:ec.M.IMPERIAL,id:"unit-imperial",enabled:!0,checked:!v,onChange:o},{children:p})),(0,l.jsx)(Hg,Object.assign({name:"unit",value:ec.M.METRIC,id:"unit-metric",enabled:!0,checked:v,onChange:o},{children:f}))]}))}))]})}function Bg({onOpenPopup:e,overlay:t}){const n=_().t(g.Z.MEASUREMENT_SETTINGS);return(0,l.jsx)(Km,Object.assign({icon:"settings",tooltip:n,overlay:t,analytic:"measurements_settings_click",className:"measurement-settings",popupSize:"large",onOpenPopup:e},{children:(0,l.jsx)(Fg,{})}))}Hg=Ug([_n.Z],Hg);const Vg={[Cg.au.CREATING]:!0,[Cg.au.CONFIRMING_POINT]:!0},Gg={[Cg.au.IDLE]:!0,[Cg.au.CREATING]:!0,[Cg.au.CREATING_NEXT_POINT]:!0},Wg=(Cg.au.CREATING,Cg.au.CONFIRMING_POINT,{[Cg.au.IDLE]:!0,[Cg.au.CREATING]:!0,[Cg.au.CREATING_NEXT_POINT]:!0}),zg="measurement-mode-add-tooltip",Kg="measurement-mode-desktop-help",Yg="measurement-mode-mobile-help";var qg,$g=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Zg=qg=class MeasurementsOverlay extends r.Component{constructor(e,t){super(e),this.bindings=[],this.propertiesToRefreshUi=[Hn.F.UnitType,Hn.F.MeasurementSnapping,Hn.F.MeasurementContinuousLines,zg,Kg,Yg],this.isUnmounting=!1,this.onMeasurementModeDataChanged=()=>{const{measurementModeData:e}=this.props.manager.dataMap,t=e.selectedGroupInfo,n=e.phase,i=e.pressProgress>=.95?1:e.pressProgress;n===Cg.au.CLOSED?(this.closeMeasurementHelpModal(),this.dismissAddTooltip()):n===Cg.au.IDLE&&this.updateAddTooltipVisibility(),this.setState({phase:n,pressProgress:i,selectedGroup:t,pointPosition:e.pointPosition})},this.updatePerSettings=()=>{const e=this.context.settings;this.setState({units:e.tryGetProperty(Hn.F.UnitType,ec.M.METRIC),snapping:e.tryGetProperty(Hn.F.MeasurementSnapping,!1),continuousLines:e.tryGetProperty(Hn.F.MeasurementContinuousLines,!1),addTooltipShown:e.tryGetProperty(zg,!1),desktopHelpShown:e.tryGetProperty(Kg,!1),mobileHelpShown:e.tryGetProperty(Yg,!1)})},this.updateAddTooltipVisibility=()=>{this.state.addTooltipShown||this.context.editMode||this.isUnmounting||(this.setState({showAddTooltip:!0}),window.clearTimeout(this.startAddingTooltip),this.startAddingTooltip=window.setTimeout((()=>{this.dismissAddTooltip()}),qg.START_ADDING_TOOLTIP_TIMEOUT))},this.dismissAddTooltip=()=>{this.isUnmounting||(this.setState({showAddTooltip:!1}),this.context.settings.setProperty(zg,!0))},this.getOverlayComponents=()=>{const{mobile:e,openModal:t}=this.props,{mobileHelpShown:n,desktopHelpShown:i,phase:s}=this.state,{editMode:r}=this.context,o=t===di.P.MEASUREMENT_HELP,{closeString:a,helpString:c}=this.locale,u=r?"overlay-top-center":"overlay-bar",h=s!==Cg.au.IDLE&&s!==Cg.au.CLOSED,p=[(0,l.jsxs)("div",Object.assign({className:d()(u,{"active-phase":h})},{children:[!r&&(0,l.jsx)("div",{className:"overlay-bar-filler"}),(0,l.jsx)("div",Object.assign({className:"overlay-bar-center"},{children:this.renderOverlayInfo()})),!r&&(0,l.jsxs)(st,Object.assign({className:"overlay-bar-right",spacing:"small"},{children:[(0,l.jsx)(Bg,{onOpenPopup:this.settingsOpened,overlay:!0}),(0,l.jsx)(nt,{className:"measurement-help-btn",variant:et.FAB,theme:"overlay",icon:"help",active:o,onClick:this.toggleHelpOpen,tooltip:!o&&c||void 0,tooltipOptions:{placement:"bottom"}}),(0,l.jsx)(nt,{icon:"close",variant:et.FAB,theme:"overlay",tooltip:a,tooltipOptions:{placement:"bottom"},onClick:this.onCloseMeasurementTool})]}))]}),"top-bar")];if(!i||!n){const t=e?this.getMobileHelp():this.getDesktopHelp();p.push(t)}return p},this.getMobileHelp=()=>{const{phase:e}=this.state,{pressHoldStart:t,pressHoldEnd:n,dragEdit:i}=this.locale.mobileHelp;let s,r;switch(e){case Cg.au.CREATING_NEXT_POINT:s=(0,l.jsx)("div",{className:"icon icon-drag-edit"}),r=(0,l.jsx)("span",Object.assign({className:"message"},{children:n}));break;case Cg.au.EDITING:case Cg.au.POINT_PLACED:s=(0,l.jsx)("div",{className:"icon icon-finger-drag"}),r=(0,l.jsx)("span",Object.assign({className:"message"},{children:i}));break;case Cg.au.CREATING:s=(0,l.jsx)("div",{className:"icon icon-press-hold"}),r=(0,l.jsx)("span",Object.assign({className:"message"},{children:t}))}return(0,l.jsxs)("div",Object.assign({className:"overlay-message"},{children:[s,r]}),"mobile-help")},this.getDesktopHelp=()=>{const{phase:e,selectedGroup:t}=this.state,{clickAnywhereString:i,escapeString:s}=this.locale.desktopHelp;let r,o;switch(e){case Cg.au.CREATING:r=(0,l.jsx)("div",{className:"icon icon-draw-lines"}),o=(0,l.jsx)("span",Object.assign({className:"message"},{children:i}));break;case Cg.au.CREATING_NEXT_POINT:t&&t.count>=3&&(r=(0,l.jsx)("div",Object.assign({className:"escape-key"},{children:(0,l.jsx)("img",{src:n(78899)})})),o=(0,l.jsx)("span",Object.assign({className:"message escape-message"},{children:s})))}return(0,l.jsxs)("div",Object.assign({className:"overlay-message"},{children:[r,o]}),"desktop-help")},this.clickCTAButton=e=>{const{phase:t}=this.state;t===Cg.au.IDLE?this.onStartPointPlacement(e):this.onStopPointPlacement(e)},this.onDeleteMeasurement=e=>{e&&e.stopPropagation(),this.context.commandBinder.issueCommand(new Lg.Ev)},this.onStartPointPlacement=e=>{e&&e.stopPropagation(),this.context.commandBinder.issueCommand(new Mg.c),this.dismissAddTooltip()},this.onStopPointPlacement=e=>{e&&e.stopPropagation(),this.context.commandBinder.issueCommand(new Dg.B)},this.onCloseMeasurementTool=async e=>{e&&e.stopPropagation(),this.closeMeasurementHelpModal(),await this.context.commandBinder.issueCommand(new hi.tT(p.w1.MEASUREMENTS,!1)),this.dismissAddTooltip()},this.settingsOpened=()=>{this.closeMeasurementHelpModal()},this.toggleHelpOpen=e=>{const{openModal:t}=this.props,n=t===di.P.MEASUREMENT_HELP;e.stopPropagation(),n||this.context.analytics.trackToolGuiEvent("measurements","measure_mode_help_clicked"),this.context.commandBinder.issueCommand(new ui.Bz(di.P.MEASUREMENT_HELP,!n))},this.locale={startAddingString:t.locale.t(g.Z.MEASUREMENT_START_ADDING),continuousLinesString:t.locale.t(g.Z.MEASUREMENT_CONTINUOUS_LINES),snappingString:t.locale.t(g.Z.MEASUREMENT_SNAPPING),unitsString:t.locale.t(g.Z.MEASUREMENT_UNITS),imperialString:t.locale.t(g.Z.MEASUREMENT_IMPERIAL),metricString:t.locale.t(g.Z.MEASUREMENT_METRIC),desktopHelp:{clickAnywhereString:t.locale.t(g.Z.MEASUREMENT_HELP_CLICK_ANYWHERE),escapeString:t.locale.t(g.Z.MEASUREMENT_HELP_ESCAPE)},mobileHelp:{pressHoldStart:t.locale.t(g.Z.MEASUREMENT_HELP_PRESS_START),dragEdit:t.locale.t(g.Z.MEASUREMENT_HELP_DRAG_EDIT),pressHoldEnd:t.locale.t(g.Z.MEASUREMENT_HELP_PRESS_END)},helpString:t.locale.t(g.Z.HELP),closeString:t.locale.t(g.Z.CLOSE)},this.state={units:ec.M.METRIC,snapping:!1,continuousLines:!1,phase:Cg.au.CLOSED,selectedGroup:null,pressProgress:0,pointPosition:null,showAddTooltip:!1,desktopHelpShown:!1,mobileHelpShown:!1,addTooltipShown:!1}}async componentDidMount(){const{measurementModeData:e}=this.props.manager.dataMap;this.bindings.push(e.onChanged(this.onMeasurementModeDataChanged),e.onDataChanged(this.onMeasurementModeDataChanged));for(const e of this.propertiesToRefreshUi)this.bindings.push(this.context.settings.onPropertyChanged(e,this.updatePerSettings));this.onMeasurementModeDataChanged(),this.updatePerSettings()}componentWillUnmount(){this.isUnmounting=!0;for(const e of this.bindings)e.cancel()}componentDidUpdate(){const{mobile:e}=this.props,{continuousLines:t,selectedGroup:n}=this.state;if(e)this.isCheckVisible()&&this.context.settings.setProperty(Yg,!0);else if(null!==n){const e=n.count;(t?e>3:2===e)&&this.context.settings.setProperty(Kg,!0)}}renderProgressCircle(){const{mobile:e}=this.props,{pressProgress:t,pointPosition:n,phase:i}=this.state;if(!e||null===n||t<=0||!Vg[i])return null;const s={left:n.x-qg.pointButtonRadius/2+"px",top:n.y-qg.pointButtonRadius/2+"px"};return(0,l.jsx)("div",Object.assign({className:"point-button-wrapper",style:s},{children:(0,l.jsx)(Dc,Object.assign({className:d()({complete:1===t,reset:0===t}),progress:100*t,innerRadius:qg.pointButtonRadius,barWidth:qg.pressProgressBarThickness},{children:(0,l.jsx)("circle",{className:"point",cx:"0",cy:"0",r:"22",transform:"rotate(-90)",fill:"#fff"})}))}))}renderOverlayInfo(){const{selectedGroup:e,units:t}=this.state;if(null===e)return null;const n=e.info.text?` ${e.info.text}`:"",i=`${((e,t)=>{if(t===ec.M.METRIC)return`${e.toFixed(2)}m`;const{feet:n,inches:i}=(0,Jl.XJ)(e);return n>0?`${n}' ${i}"`:`${i}"`})(e.length,t)} ${n}`;return(0,l.jsx)("div",Object.assign({className:"overlay-info"},{children:i}))}render(){return(0,l.jsxs)("div",Object.assign({className:"overlay measurements-overlay"},{children:[this.getOverlayComponents(),this.renderProgressCircle(),this.renderOverlayCta()]}))}hasCancelCta(){if(this.isCheckVisible())return!1;const{phase:e,selectedGroup:t}=this.state,n=e===Cg.au.CREATING&&(!t||0===t.count),i=e===Cg.au.CREATING_NEXT_POINT&&!!t&&2===t.count;return n||i}isCheckVisible(){const{phase:e,continuousLines:t}=this.state;return this.isCompleteMeasurement()&&(t?e===Cg.au.CREATING_NEXT_POINT:e===Cg.au.CREATING)}isCompleteMeasurement(){const{continuousLines:e,selectedGroup:t}=this.state;if(null===t)return!1;const n=t.count;return e?n>2:2===n}renderOverlayCta(){const{startAddingString:e}=this.locale,{mobile:t,unaligned:n}=this.props,{phase:i,showAddTooltip:s,selectedGroup:r}=this.state,o=i===Cg.au.EDITING,a=r&&r.count>0&&(t?!!Gg[i]:!!Wg[i])?Ts.BN.ENABLED:Ts.BN.DISABLED,c=this.isCheckVisible()?"icon-checkmark":"icon-plus",u=n||o?Ts.BN.DISABLED:Ts.BN.ENABLED,h=d()("overlay-cta-btn",{"overlay-cta-cancel":this.hasCancelCta()});return(0,l.jsxs)("div",Object.assign({className:"overlay-cta"},{children:[(0,l.jsx)(Nn,{className:"tooltip-simple-medium",open:s,message:(0,l.jsx)("span",{children:e}),arrowPos:On.BOTTOM_CENTER}),(0,l.jsx)(Es.hU,{className:h,iconClass:c,buttonStyle:Es.Dd.PRIMARY,buttonState:u,onClick:this.clickCTAButton}),(0,l.jsx)(Es.hU,{className:"overlay-cta-button-outer",buttonStyle:Es.Dd.OVERLAY,iconClass:"icon-delete",buttonState:a,onClick:this.onDeleteMeasurement})]}))}closeMeasurementHelpModal(){const{openModal:e}=this.props;e===di.P.MEASUREMENT_HELP&&this.context.commandBinder.issueCommand(new ui.Bz(e,!1))}};Zg.contextType=m.I,Zg.pointButtonRadius=132,Zg.pressProgressBarThickness=8,Zg.START_ADDING_TOOLTIP_TIMEOUT=5e3,Zg=qg=$g([_n.Z],Zg);var Qg=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let Xg=class VrEnterButtonControls extends r.Component{constructor(e){super(e),this.isUnmounting=!1,this.startWebXR=()=>{const{analytics:e,commandBinder:t}=this.context;t.issueCommand(new Uu.j({type:"immersive-vr",features:["local-floor"]})).then((t=>{if(t){e.trackGuiEvent("vr_enter_app");const n=()=>{e.trackGuiEvent("vr_exit_app"),t.removeEventListener("end",n)};t.addEventListener("end",n)}else e.trackGuiEvent("vr_present_error"),this.updatePlatformState()})).catch((t=>{e.trackGuiEvent("vr_present_error")}))},this.state={vrPlatform:null}}async componentDidMount(){ju.Z.apiExists()&&navigator.xr.addEventListener("ondevicechange",this.updatePlatformState),await this.updatePlatformState()}componentWillUnmount(){this.isUnmounting=!0,ju.Z.apiExists()&&navigator.xr.removeEventListener("ondevicechange",this.updatePlatformState)}async updatePlatformState(){const e=await(0,xu.pl)();this.isUnmounting||this.setState({vrPlatform:e})}render(){return this.state.vrPlatform===xu.bk.webxr?this.renderOverlayCta():null}renderOverlayCta(){const{locale:e}=this.context;return(0,l.jsx)("div",Object.assign({id:"vr-overlay-layer",className:"overlay"},{children:(0,l.jsx)("div",Object.assign({className:"overlay-cta"},{children:(0,l.jsx)(Ts.zx,Object.assign({buttonSize:Ts.qE.LARGE,buttonState:Ts.BN.ENABLED,buttonStyle:Ts.ZJ.OVERLAY,className:d()("inline-block","confirm"),onClick:this.startWebXR},{children:e.t(g.Z.VR_ENTER)}))}))}))}};Xg.contextType=m.I,Xg=Qg([_n.Z],Xg);var Jg=n(91845),ef=n(9740);const tf=w(ef.r),nf=new Zn.f(null);const sf=["<mark>","</mark>"];function rf(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function of(e,t){const[n,i]=sf,s=`${n}|${i}`;let r=!1;if(e.match(new RegExp(s))&&(e=e.replace(new RegExp(`(${s})`,"g"),((e,t)=>t.split("").join("‌"))),r=!0),t){let s;s=r?t.split("").map(rf).join("[‌]?"):rf(t),e=e.replace(new RegExp(`(${s})`,"gi"),((e,t)=>`${n}${t}${i}`))}return e}const af=of;function lf(e,t){return of(function(e,t){var n;const i=e.toLowerCase(),[s,r,o]=[i.indexOf(t),e.length,(null===(n=i.match(new RegExp(`${rf(t)}`,"g")))||void 0===n?void 0:n.length)||1];let a=e,l=s;if(r>20&&l>0){if(1===o){const e=Math.floor((20-t.length)/2);e>0&&l>e&&(l-=e)}a=`...${a.substr(l)}`,a.length<20&&(l-=20-a.length,l>0&&(a=`...${e.substr(l)}`))}return a}(e,t),t)}function cf(e){const{item:t,searchText:n}=e,i=function(){const e=tf();return $n(e?e.selectedSearchResult:nf)}(),s=t.id,o=t.color,a=!!i&&s===i.id,c=function(){const[,e]=(0,r.useState)(0);return(0,r.useCallback)((()=>{e((e=>e+1))}),[])}();let d=t.title;d&&(d=af(d,n));let u=t.description;u&&(u=lf(u,n));const h=[];if(t.actions)for(const e of t.actions)h.push((0,l.jsx)(nt,{icon:e.icon,onClick:t=>{e.handler(t),c()}},s));const p=(0,l.jsxs)(st,{children:[t.actions&&h,t.menuActions&&(0,l.jsx)(OptionsButton,{id:s,disabled:!1,menu:t.menuActions,closeOnMenuItemClick:!0,accordion:!0})]}),m=(0,l.jsx)(td,{badgeStyle:void 0!==o?{background:o,borderColor:o}:{},iconClass:t.icon}),g=(0,l.jsxs)("div",Object.assign({className:"item-details"},{children:[(0,l.jsx)("div",Object.assign({className:"item-header"},{children:(0,l.jsx)(gg,{text:d||"",textParser:t.textParser,markers:sf})})),t.textParser&&(0,l.jsx)("div",Object.assign({className:"item-description"},{children:(0,l.jsx)(gg,{text:u||"",textParser:t.textParser,markers:sf})}))]}));return(0,l.jsxs)(cg,Object.assign({sid:s,enabled:t.enabled,selected:a,onSelect:()=>{e.onSelect(),t.onSelect()}},{children:[m,g,p]}),s)}const df=zn(ef.r,"grouping",Jg.l.TYPE),uf=P("grouping",df),{SEARCH:hf}=g.Z.SHOWCASE;class SearchPanelList extends r.Component{groupItems(){const{grouping:e}=this.props;switch(e){case Jg.l.TYPE:return this.groupByType();case Jg.l.FLOOR:return this.groupByFloor();default:return this.groupByType()}}groupByType(){const{searchResults:e,searchGroups:t}=this.props,n={};for(const i of e){const e=t[i.groupId].groupPhraseKey,s=this.context.locale.t(e),r=t[i.groupId].groupMenuActions,o=t[i.groupId].sortOrder,a=(0,l.jsx)(st,{children:r&&(0,l.jsx)(OptionsButton,{id:i.groupId,disabled:!1,menu:r,closeOnMenuItemClick:!0,accordion:!0})});e in n||(n[e]={header:s,items:[],actions:a,sortOrder:o}),n[e].items.push(this.renderItem(i))}return n}groupByFloor(){const{searchResults:e,floorsViewData:t}=this.props,n={};for(const i of e){const e=i.floorId,s=t.getFloorName(e);e in n||(n[e]={header:s,items:[]}),n[e].items.push(this.renderItem(i))}return n}renderItem(e){return(0,l.jsx)(cf,{item:e,onSelect:this.props.onSelect,searchText:this.props.searchText},e.id)}render(){const e=[],t=this.groupItems(),n=[];for(const[e,i]of Object.entries(t))n.push({key:e,group:i});n.sort(((e,t)=>(e.group.sortOrder||0)-(t.group.sortOrder||0)));for(const{key:t,group:i}of n){const n=0===i.items.length,{header:s,items:r,actions:o}=i;e.push((0,l.jsx)(ag,Object.assign({id:t,header:`${s} (${r.length})`,open:!0,doubleLine:!0,collapsible:!n,emptyMessage:this.context.locale.t(hf.EMPTY_LIST_MESSAGE),actions:o},{children:i.items}),t))}return(0,l.jsx)(ig,{children:e})}}SearchPanelList.contextType=m.I;const pf=uf(Ki(SearchPanelList));var mf=n(20725);const{SEARCH:gf}=g.Z.SHOWCASE;function ff(){const e=df(),{commandBinder:t,locale:n}=(0,r.useContext)(m.I),i=(0,r.useCallback)((e=>{if(e){const n=e;t.issueCommand(new vu.SN(n))}}),[t]),s=[{text:n.t(gf.GROUP_TYPE),selectedText:n.t(gf.GROUP_TYPE_SELECTED),value:Jg.l.TYPE,selected:e===Jg.l.TYPE},{text:n.t(gf.GROUP_FLOOR),selectedText:n.t(gf.GROUP_FLOOR_SELECTED),value:Jg.l.FLOOR,selected:e===Jg.l.FLOOR}];return(0,l.jsx)(ut,Object.assign({className:"search-groupings"},{children:(0,l.jsx)(SelectMenu_SelectMenu,{menuStyle:Gi.DROPDOWN,onChange:i,options:s})}))}function vf(e){const{collapsedToBottom:t,query:n,queryKeywords:i=[],toolPanelLayout:s}=e,{locale:o,analytics:a,editMode:c,settings:d}=(0,r.useContext)(m.I),[u,h]=(0,r.useState)(!1),f=c||d.tryGetProperty(Lr.Yo,!1),v=(0,r.useCallback)((()=>{!function(e,t){const n=(0,cu.rI)(),i=new URLSearchParams(window.location.search);(0,cu.on)(i);const s=encodeURIComponent(e);if(i.set("q",s),t.length>0){const e=encodeURIComponent(t.join(","));i.set("qK",e)}n.search=i.toString(),lu(n.toString())}(n,i),h(!0);const e=c?"workshop_gui":"showcase_gui";a.track(e,{gui_action:"space_search_share_link_clicked"})}),[n,i,c,a]);if((0,r.useEffect)((()=>{if(!u)return()=>{};const e=window.setTimeout((()=>h(!1)),2500);return()=>window.clearTimeout(e)}),[u]),u)return(0,l.jsx)("span",Object.assign({className:"link-copied"},{children:o.t(g.Z.SHARE_COPIED)}));const b=s===p.wS.SIDE_PANEL||!t;return f?(0,l.jsx)(Es.hU,Object.assign({onClick:v,buttonStyle:Es.Dd.PLAIN,buttonSize:Ts.qE.SMALL},{children:b?(0,l.jsx)(Vo.oO,Object.assign({content:o.t(g.Z.COPY_URL),position:Vo.lZ.DOWN,tooltipTimeout:2e3},{children:(0,l.jsx)("span",{className:"icon icon-share"})})):(0,l.jsx)("span",{className:"icon icon-share"})})):null}const{SEARCH:bf}=g.Z.SHOWCASE;function yf(){const{locale:e}=(0,r.useContext)(m.I),[t,n]=(0,r.useState)(!1),i=(0,r.useCallback)((()=>{n(!t)}),[t]);return(0,l.jsxs)("div",Object.assign({className:"search-advanced-hint"},{children:[(0,l.jsx)("span",Object.assign({className:"search-advanced-label"},{children:e.t(bf.ADVANCED_SEARCH_TITLE)})),(0,l.jsxs)("a",Object.assign({className:"link",onClick:i},{children:[e.t(bf.ADVANCED_SEARCH_HELP_BUTTON),(0,l.jsx)(Nn,{open:t,message:(0,l.jsx)("p",{children:e.t(bf.ADVANCED_SEARCH_INSTRUCTIONS)}),tooltipId:"search-advanced-help-tooltip",className:"search-advanced-help",arrowPos:On.TOP_RIGHT,onClose:i})]}))]}))}const Sf=w(qc.A);function Ef(){const e=Sf(),[t,n]=(0,r.useState)(e?e.dockedAnnotation:null);return(0,r.useEffect)((()=>{if(!e)return()=>{};function t(){n(e?e.dockedAnnotation:null)}const i=e.onChanged(t);return t(),()=>i.cancel()}),[e]),t}P("dockedAnnotation",Ef);const Tf=P("dockedTag",(function(){const e=rp(),t=Ef();return(null==e?void 0:e.id)===(null==t?void 0:t.id)?e:null}));const Of=P("creatingTag",(function(){const e=nu(),[t,n]=(0,r.useState)(!!e&&e.creatingTag);return(0,r.useEffect)((()=>{if(!e)return()=>{};const t=e.onPropertyChanged("creatingTag",n);return n(e.creatingTag),()=>t.cancel()}),[e]),t})),_f=w(wp.b);function Af(e){return!!e&&e.uploads.values.length>0}const wf=P("uploading",(function(){const e=_f(),[t,n]=(0,r.useState)(Af(e));return(0,r.useEffect)((()=>{if(!e)return()=>{};function t(){n(Af(e))}const i=e.uploads.onChanged(t);return t(),()=>i.cancel()}),[e]),t}));function Nf({current:e,min:t,max:n}){const i=void 0!==t&&e<t||e>n;return(0,l.jsxs)("div",Object.assign({className:d()("text-counter",{error:i})},{children:[e,"/",n]}))}const Pf=/[&?,%]/,If=`Keyword may not include these characters: "${(e=>{const t=e.toString();return t.substring(t.indexOf("[")+1,t.lastIndexOf("]")).split("").join('", "')})(Pf)}"`,kf=e=>({id:e,text:e}),Cf=e=>Pf.test(e)?If:void 0,Lf=(0,r.forwardRef)((({initialKeywords:e,availableKeywords:t,onChange:n},i)=>{const s=(0,r.useCallback)((e=>{n&&n(e.map((e=>e.text)))}),[n]);return(0,l.jsx)(En,{placeholder:"Add keywords",initialTokens:e.map(kf),options:t.map(kf),onChange:s,ref:i,maxLength:30,maxTokens:10,maxTokensValidationMsg:"Maximum keywords added",helpMessage:"Keywords will display in search",validateNewToken:Cf})}));var Mf=n(95987),Df=n(89463);const Rf=Df.U.cerulean,xf=Object.entries(Df.U).map((([e,t])=>({text:e,id:t,value:t}))),jf=({selectedColor:e,onChange:t})=>(0,l.jsx)(dn,{onChange:t,options:xf,selectedColor:e||Rf,size:tt.LARGE,align:en.JUSTIFY,noSelectionText:"Choose a color...",selectMenuClassName:"pin-color-select-menu"}),Uf=w(Kc.B),Hf="_recent",Ff="_space",Bf=(e,t)=>{const[,n,...i]=e.split("_"),s=i[i.length-1],r=1===(o=s).length?`Character ${o}`:o;var o;return{id:e,text:r,tooltip:r,group:t||n}},Vf=e=>e.startsWith("public_")&&dt.includes(e),Gf=dt.filter((e=>e.startsWith("public_"))).map((e=>Bf(e))),Wf=(0,r.forwardRef)((({initialValue:e,onChange:t},n)=>{const i=Uf(),[s,o]=vo("matterport_recent_icons",[]),a=(0,r.useCallback)((e=>{if(t&&t(e),e&&!s.includes(e)){const t=[e,...s];t.length=Math.min(t.length,14),o(t)}}),[t,s,o]),c=(0,r.useCallback)((()=>{t&&t(void 0)}),[t]),{allOptions:d,hasRecentOptions:u,hasSpaceOptions:h}=(0,r.useMemo)((()=>{const e=[];null==i||i.iteratePins((t=>{t.icon&&!e.includes(t.icon)&&e.push(t.icon)}));const t=e.filter(Vf).map((e=>Bf(e,Ff))),n=s.filter(Vf).map((e=>Bf(e,Hf)));return{hasRecentOptions:n.length>0,hasSpaceOptions:t.length>0,allOptions:[...Gf,...n,...t]}}),[s,i]),p=(0,r.useMemo)((()=>[u&&{id:Hf,icon:"public_symbols_clock",displayText:"Recently used"},h&&{id:Ff,icon:"public_symbols_cube",displayText:"Used in this space"},{id:"people",icon:"public_people_face-smile",displayText:"People"},{id:"furniture",icon:"public_furniture_chair",displayText:"Furniture & Appliances"},{id:"buildings",icon:"public_buildings_buildings",displayText:"Buildings"},{id:"objects",icon:"public_objects_box",displayText:"Objects & Food"},{id:"symbols",icon:"public_symbols_shapes",displayText:"Shapes & Symbols"},{id:"characters",icon:"public_characters_circle-1",displayText:"Numbers & Letters"}].filter((e=>!!e))),[u,h]),m=(0,r.useCallback)((e=>`No icons found for "${e}"`),[]);return(0,l.jsx)(pn,{options:d,selectedIcon:e,onChange:a,groups:p,align:en.JUSTIFY,placeholder:"Default icon",searchPlaceholder:"Search icons",getNoResultsText:m,allowClear:!0,onClear:c,scrollbarComponent:hp,selectMenuClassName:"pin-icon-select-menu"})})),zf=({label:e="Appearance",pinAppearance:t,onChange:n,tagIconsEnabled:i,hideStemEditor:s})=>{const o=(0,Mo.z)(),a=(0,r.useCallback)((e=>{o.trackGuiEvent("pin_change_icon"),n({icon:e})}),[n,o]),c=(0,r.useCallback)((e=>{o.trackGuiEvent("pin_change_color"),n({color:e})}),[n,o]),d=(0,r.useCallback)((e=>{o.trackGuiEvent(e?"pin_show_stem":"pin_hide_stem"),n({stemEnabled:e})}),[n,o]),u=(0,r.useCallback)((e=>{o.trackGuiEvent("pin_change_stem_height"),n({stemLength:e})}),[n,o]);return(0,l.jsxs)("div",Object.assign({className:"pin-appearance-editor"},{children:[(0,l.jsx)("div",Object.assign({className:"h6"},{children:e})),i&&(0,l.jsx)(Wf,{initialValue:t.icon,onChange:a}),(0,l.jsx)(jf,{onChange:c,selectedColor:t.color}),!s&&(0,l.jsx)(StemEditor,{stemLength:t.stemLength||.3048,stemEnabled:t.stemEnabled||!1,onLengthUpdate:u,onLengthChanged:u,onStemEnabledChanged:d,variant:"inline-value"})]}))};var Kf=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{MATTERTAGS:Yf,OBJECT_TAG_SUGGESTION:qf}=g.Z.WORKSHOP;let $f=class TagEditor extends r.Component{constructor(e){super(e),this.uploadTooltipTimeout=0,this.bindings=[],this.keywordInput=(0,r.createRef)(),this.isUnmounting=!1,this.revertPendingAppearanceChanges=()=>{const{tag:e,manager:t}=this.props;e&&this.isAppearanceDirty()&&t.dataMap.tagsViewData.getTagView(e.id)&&this.context.commandBinder.issueCommand(new jm.tE(e.id,zc.Er.MATTERTAG,{color:e.color,stemEnabled:e.stemEnabled,stemLength:e.stemLength,icon:e.icon}))},this.updateAttachments=()=>{if(this.isUnmounting||this.state.closing)return;const{tag:e,manager:t}=this.props,{attachmentsData:n}=t.dataMap,i=n.getPendingAttachmentsForAsset(e.id,Ap.ud.MATTERTAG),s=n.getRemovedAttachmentsForAsset(e.id,Ap.ud.MATTERTAG),r=n.failures.values,o=n.uploads.values;this.setState({pendingAttachments:i,removedAttachments:s,failures:r,uploads:o},(()=>{this.updateEmbed(),this.updateDirtyState(),this.updateAttachmentViewer()}))},this.isAppearanceDirty=()=>{const{tag:e}=this.props,{pendingAppearance:t}=this.state;return Object.keys(t).some((n=>e[n]!==t[n]))},this.getIsProcessing=()=>{const{uploads:e,isProcessingMedia:t}=this.state;return e.length>0||t},this.onDescriptionInput=e=>{this.setState({descriptionLength:e.length},(()=>this.updateDirtyState()))},this.handleDescriptionFocusChange=e=>{this.setState({isDescFocused:e})},this.onLabelInput=e=>{this.setState({label:e},(()=>this.updateDirtyState()))},this.handleKeywordsChanged=e=>{this.setState({keywords:e},(()=>this.updateDirtyState()))},this.onCancel=()=>{this.state.closing||(this.setState({closing:!0}),this.props.creating?this.context.commandBinder.issueCommand(new au.$g):this.closeTag())},this.onSave=async()=>{var e,t;if(this.state.closing)return;if(this.setState({closing:!0}),this.isEmpty())return void this.onCancel();const{tag:n,manager:i}=this.props,{label:s,keywords:r,pendingAppearance:o,showOnlyInSearch:a}=this.state,{commandBinder:l}=this.context,{attachmentsData:c}=i.dataMap,d=this.getDescriptionMarkdown(),{id:u,anchorPosition:h,stemNormal:p,floorId:m,objectAnnotationId:g}=n,f={position:h,normal:p,floorId:m,description:d,label:s,keywords:r,color:new Uc.Color(o.color||n.color),stemHeight:null!==(e=o.stemLength)&&void 0!==e?e:n.stemLength,stemVisible:null!==(t=o.stemEnabled)&&void 0!==t?t:n.stemEnabled,icon:o.icon,enabled:!0,objectAnnotationId:g},v=e=>e.category===rd.G$.UPLOAD,b=c.getPendingAttachmentsForAsset(u,Ap.ud.MATTERTAG).filter(v),y=c.getRemovedAttachmentsForAsset(u,Ap.ud.MATTERTAG).filter(v),S=this.getCurrentEmbed();a?(await l.issueCommand(new jm.OL(u,zc.Er.MATTERTAG)),await l.issueCommand(new mu.I2(u,f,b,S))):await l.issueCommand(new au.QG(u,f,b,y,S)),g&&l.issueCommand(new vu.s7),this.setState({pendingAppearance:{}})},this.openLinkEditor=()=>{!(this.props.openModal===di.P.LINK_EDITOR)&&this.textEditor&&(this.trackEvent("tags_editor_add_link"),this.textEditor.prepareLinkForEdit())},this.onClickBlock=e=>{e.blockType===xa.C.LINK&&(this.setState({selectedBlock:e}),this.context.commandBinder.issueCommand(new ui.Bz(di.P.LINK_EDITOR,!0)))},this.closeLinkEditor=async()=>this.context.commandBinder.issueCommand(new ui.Bz(di.P.LINK_EDITOR,!1)),this.onCancelLink=async()=>{await this.closeLinkEditor(),this.textEditor&&this.textEditor.cancelLink()},this.onRemoveLink=()=>{this.trackEvent("tags_editor_remove_link"),this.onSaveLink("","")},this.onSaveLink=(e,t)=>{const{openModal:n}=this.props;n===di.P.LINK_EDITOR&&this.textEditor&&(this.trackEvent("tags_editor_save_link"),this.textEditor.saveLink(e,t),this.updateDirtyState(),this.closeLinkEditor())},this.onFileUpload=e=>{const{tag:t}=this.props,n=Array.from(e),i=this.getAttachmentCount(!1);e.length+i>Np.yk&&n.splice(Np.yk-i),this.context.commandBinder.issueCommand(new sd.It(t.id,Ap.ud.MATTERTAG,n))},this.onDrop=e=>{this.trackEvent("tags_files_dropped"),this.onFileUpload(e)},this.onFilesChosen=e=>{this.trackEvent("tags_files_chosen"),this.onFileUpload(e)},this.onEmbed=async e=>{this.trackEvent("tags_editor_save_embed");const t=this.getCurrentEmbed(e.id);t&&await this.context.commandBinder.issueCommand(new sd.$T(t))},this.handleEmbedCleared=()=>{this.trackEvent("tags_editor_clear_embed");const e=this.getCurrentEmbed();e&&this.context.commandBinder.issueCommand(new sd.$T(e))},this.handleEmbedEditorValidationChange=e=>{const t=e===$p.ERROR||e===$p.INVALID_URL_SYNTAX;this.setState({isValid:!t,isProcessingMedia:e===$p.LOADING},(()=>this.updateDirtyState()))},this.onViewAttachments=e=>{const t=this.getCurrentAttachments();t.length&&(this.trackEvent("tags_editor_view_attachment"),this.context.commandBinder.issueCommand(new sd.xW(!0,t,e)))},this.onToggleShowOnlyInSearch=()=>{this.setState({showOnlyInSearch:!this.state.showOnlyInSearch})},this.setTextEditorRef=e=>this.textEditor=e,this.handlePinAppearanceChange=e=>{const{tag:t}=this.props,{pendingAppearance:n}=this.state;if(!t)return;const i=Object.assign(Object.assign({},n),e);this.context.commandBinder.issueCommand(new jm.tE(t.id,zc.Er.MATTERTAG,i)),this.setState({pendingAppearance:i},(()=>this.updateDirtyState()))},this.state={saveable:!1,closing:!1,showOnlyInSearch:!1,selectedBlock:null,label:e.tag.label,keywords:e.tag.keywords||[],descriptionLength:this.getDescriptionMarkdown().length,mediaSrc:"",pendingAttachments:[],removedAttachments:[],uploads:[],failures:[],pendingAppearance:{color:e.tag.color,stemEnabled:e.tag.stemEnabled,stemLength:e.tag.stemLength,icon:e.tag.icon},isDescFocused:!1,isValid:!0,isProcessingMedia:!1}}componentDidMount(){const{attachmentsData:e}=this.props.manager.dataMap;this.bindings.push(e.onChanged(this.updateAttachments)),this.updateAttachments()}componentWillUnmount(){this.revertPendingAppearanceChanges(),this.isUnmounting=!0,window.clearTimeout(this.uploadTooltipTimeout);for(const e of this.bindings)e.cancel()}componentDidUpdate(e,t){const{tag:n,openModal:i}=this.props;n.id!==e.tag.id&&(this.setState({saveable:!1,label:n.label,descriptionLength:n.description.length,pendingAppearance:{}}),this.updateAttachments()),e.openModal===di.P.LINK_EDITOR&&e.openModal!==i&&this.setState({selectedBlock:null})}trackEvent(e){this.context.analytics.trackToolGuiEvent("tags",e)}updateEmbed(){const e=this.getCurrentEmbed();this.setState({mediaSrc:e?e.src:""})}isEmpty(){return""===this.getDescriptionMarkdown()&&""===this.state.label.trim()&&0===this.getAttachmentCount(!1)}getDirtyState(){const{tag:e,creating:t}=this.props;if(t)return!0;const{pendingAttachments:n,removedAttachments:i,uploads:s,label:r,keywords:o}=this.state,a=this.getDescriptionMarkdown()!==e.description,l=r!==e.label,c=!(0,Mf.E8)(o,e.keywords),d=this.isAppearanceDirty();return a||l||c||d||i.length>0||n.length>0||s.length>0}updateDirtyState(){const e=this.getDirtyState(),t=this.getIsProcessing(),n=this.isEmpty(),i=!e||t||n;this.setState({saveable:!i}),this.props.manager.setDirtyTagState(e||t)}closeTag(){this.context.commandBinder.issueCommand(new au.xb)}getDescriptionMarkdown(){const{tag:e}=this.props;let t;return t=this.textEditor?this.textEditor.getMarkdown():e.description,t.trim()}getCurrentEmbed(e=""){const t=t=>t.category===rd.G$.EXTERNAL&&t.id!==e,n=this.state.pendingAttachments.find(t);if(n)return n;const{tag:i,manager:s}=this.props,{attachmentsData:r}=s.dataMap,o=i.attachments.filter((e=>t(e)&&!(r&&r.removals.get(e.id))));return o.length>0?o[0]:null}getAttachmentCount(e){const{tag:t}=this.props,{pendingAttachments:n,removedAttachments:i,uploads:s}=this.state;let r=t.attachments.length+n.length+s.length-i.length;return e&&(r-=this.getCurrentAttachments(rd.G$.EXTERNAL).length),r}isAtMaxAttachments(){return this.getAttachmentCount(!1)>=Np.yk}getCurrentAttachments(e){const{tag:t,manager:n}=this.props,{attachmentsData:i}=n.dataMap,{pendingAttachments:s}=this.state;return t.attachments.concat(s).filter((t=>!(e&&t.category!==e||i&&i.removals.get(t.id))))}updateAttachmentViewer(){const{openModal:e}=this.props,{commandBinder:t}=this.context;if(e===di.P.ATTACHMENT){const e=this.getCurrentAttachments();e.length?t.issueCommand(new sd.xW(!0,e)):t.issueCommand(new ui.Bz(di.P.ATTACHMENT,!1))}}renderLinkOption(){const{locale:e}=this.context,{descriptionLength:t}=this.state,n=e.t(Yf.LINK_TOOLTIP_MESSAGE),i=t>=Oa.Us;return(0,l.jsx)("div",Object.assign({className:"annotation-button-bar"},{children:(0,l.jsx)("div",Object.assign({className:"annotation-editors"},{children:(0,l.jsx)(nt,{icon:"add-link",ariaLabel:n,tooltip:n,tooltipOptions:{placement:"bottom"},size:tt.LARGE,variant:et.TERTIARY,disabled:i,onClick:this.openLinkEditor})}))}))}renderEmbed(){const{tag:e}=this.props,{mediaSrc:t}=this.state,n=t?this.getCurrentEmbed():null;return(0,l.jsxs)("div",Object.assign({className:"tag-editor-embeds"},{children:[(0,l.jsx)(Zp,{url:t,parentId:e.id,parentType:Ap.ud.MATTERTAG,onEmbed:this.onEmbed,onEmbedCleared:this.handleEmbedCleared,onValidationPhaseChange:this.handleEmbedEditorValidationChange}),n&&(0,l.jsx)(Wd,{canDelete:!0,inline:!1,attachments:[n],onViewAttachment:this.onViewAttachments})]}))}renderUploadButton(e,t,n){const{tag:i}=this.props,{locale:s}=this.context,{uploads:r}=this.state,o=r.length>0,a=n?s.t(Yf.MAX_ATTACHMENTS_MESSAGE,Np.yk):o?s.t(Yf.UPLOAD_IN_PROGRESS):e?void 0:s.t(Yf.UPLOAD_FILE),c=s.t(Yf.ADD_FILE),u=d()("file-upload-btn","mp-nova-btn","mp-nova-btn-dark",{"mp-nova-btn-icon":!e,"mp-nova-btn-disabled":!t,"mp-nova-btn-large":!e,"mp-nova-btn-small":e,"mp-nova-btn-primary":e,"mp-nova-btn-multi":e});return(0,l.jsx)(Mp,Object.assign({id:`file-upload-tag-${i.id}`,multi:!0,enabled:t,onUpload:this.onFilesChosen,tooltip:a},{children:(0,l.jsxs)("div",Object.assign({className:u},{children:[(0,l.jsx)(M,{name:"plus"}),e&&(0,l.jsx)("span",{children:c})]}))}))}renderFileAttachments(){const{uploads:e,failures:t}=this.state,{locale:n}=this.context,i=this.isAtMaxAttachments(),s=0===this.getAttachmentCount(!0)&&0===t.length,r=e.length>0,o=!i&&!r,a=this.getCurrentAttachments(rd.G$.UPLOAD),c=this.renderUploadButton(s,o,i),u=n.t(Yf.DROP_FILES_MESSAGE);return(0,l.jsxs)(Rp,Object.assign({className:d()("tag-attachments",{empty:s}),onDropped:this.onDrop,disabled:!o},{children:[(0,l.jsx)(Wd,Object.assign({inline:!0,canDelete:!0,attachments:a,uploads:e,failures:t,onViewAttachment:this.onViewAttachments},{children:!s&&c})),s&&(0,l.jsxs)(l.Fragment,{children:[c,(0,l.jsx)("div",Object.assign({className:"upload-msg"},{children:(0,l.jsx)("div",{children:u})}))]})]}))}renderDescription(){const{manager:e,tag:t}=this.props,{locale:n}=this.context,i=n.t(Yf.DESCRIPTION_PLACEHOLDER);return(0,l.jsx)(Cp,{className:"placeholder",ref:this.setTextEditorRef,textParser:e.textParser,text:t.description,active:!0,clickToEdit:!1,focusOnMount:!1,maxLength:Oa.Us,placeholder:i,onClickBlock:this.onClickBlock,onInput:this.onDescriptionInput,onFocusChange:this.handleDescriptionFocusChange,onCancelEditing:this.onCancel})}renderButtons(){const{locale:e}=this.context,{saveable:t,closing:n,isValid:i}=this.state,s=this.getIsProcessing(),r=!t||s||n||!i,o=s,a=e.t(Yf.EDIT_BILLBOARD_CANCEL_CTA),c=e.t(Yf.SAVE),u=e.t(Yf.SAVE_PROCESSING),h=e.t(Yf.SAVE_INVALID);return(0,l.jsxs)("div",Object.assign({className:"button-sticky-footer"},{children:[(0,l.jsxs)(st,{children:[(0,l.jsx)(nt,{label:a,variant:et.TERTIARY,size:tt.SMALL,disabled:o,onClick:this.onCancel}),(0,l.jsx)(nt,{label:c,variant:et.PRIMARY,size:tt.SMALL,disabled:r,onClick:this.onSave})]}),(!i||s)&&(0,l.jsx)("div",Object.assign({className:d()("tag-editor-status",{"tag-validation-error":!i,"tag-processing":s})},{children:i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M,{name:"info"})," ",u]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M,{name:"error"})," ",h]})}))]}))}renderShowOnlyInSearchCheckbox(){const{locale:e}=this.context,t=e.t(qf.SHOW_ONLY_IN_SEARCH);return(0,l.jsx)(zr,{checked:this.state.showOnlyInSearch,onChange:this.onToggleShowOnlyInSearch,stopPropagation:!0,label:t})}render(){const{selectedBlock:e,label:t,descriptionLength:n,isDescFocused:i,pendingAppearance:s}=this.state,{tag:r,availableKeywords:o,creating:a,activeModelView:c}=this.props,{locale:u,settings:h}=this.context,p=u.t(Yf.TITLE_PLACEHOLDER),m=u.t(Yf.TITLE_DESC_LABEL),g=u.t(Yf.ATTACHMENTS_LABEL),f=u.t(Yf.APPEARANCE_LABEL),v=u.t(Yf.KEYWORDS_LABEL),b=this.props.manager.areObjectTagsEnabled(),y=h.tryGetProperty(_a.RV,!1),S=!!r.objectAnnotationId,E=c.viewType===Lo.X.USER;let T="",O="";return e&&e.blockType===xa.C.LINK&&(T=e.text,O=e.value||""),(0,l.jsxs)("div",Object.assign({className:"tag-editor"},{children:[(0,l.jsx)("div",Object.assign({className:"h6"},{children:m})),(0,l.jsx)(tl,{text:t,placeholder:p,maxLength:Oa.ZF,focusOnMount:!0,onInput:this.onLabelInput,onCancel:this.onCancel}),(0,l.jsx)(Nf,{current:t.length,max:Oa.ZF}),(0,l.jsxs)("div",Object.assign({className:d()("annotation-text-box annotating editor-box",i&&"has-focus")},{children:[this.renderDescription(),this.renderLinkOption()]})),(0,l.jsx)(Nf,{current:n,max:Oa.Us}),(0,l.jsx)("div",Object.assign({className:"h6"},{children:g})),this.renderFileAttachments(),this.renderEmbed(),(0,l.jsx)(zf,{label:f,onChange:this.handlePinAppearanceChange,pinAppearance:s,tagIconsEnabled:y,hideStemEditor:S}),(0,l.jsxs)("div",Object.assign({className:"annotation-keyword-input"},{children:[(0,l.jsx)("div",Object.assign({className:"h6"},{children:v})),(0,l.jsx)(Lf,{ref:this.keywordInput,initialKeywords:r.keywords||[],availableKeywords:o,onChange:this.handleKeywordsChanged})]})),a&&b&&!E&&(0,l.jsx)("div",Object.assign({className:"tag-editor-search-only-checkbox"},{children:this.renderShowOnlyInSearchCheckbox()})),this.renderButtons(),(0,l.jsx)(zp,{linkText:T,linkUrl:O,onCancelLink:this.onCancelLink,onSaveLink:this.onSaveLink,onRemoveLink:this.onRemoveLink})]}))}};$f.contextType=m.I,$f=Kf([_n.Z],$f);const Zf=ia(Ir($f));var Qf=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{MATTERTAGS:Xf}=g.Z.WORKSHOP,{TAGS:Jf}=g.Z.SHOWCASE;let ev=class TagWidget extends r.Component{constructor(e){super(e),this.deleteTag=async()=>{const{tag:e}=this.props;return this.context.analytics.trackToolGuiEvent("tags","tags_click_delete_tag"),this.props.manager.confirmAndDeleteTag(e.id,"tags_detail_panel_widget")},this.closeTag=async()=>this.props.manager.closeTag(),this.state={cancellingCreation:!1}}shouldComponentUpdate(){return!this.state.cancellingCreation}render(){const{locale:e,editMode:t}=this.context,{tag:n,manager:i,uploading:s,creatingTag:r}=this.props,o=e.t(Xf.BACK),a=e.t(Xf.DELETE_LIST_ITEM_OPTION_CTA),c=e.t(Jf.SHARE_TAG_LABEL);return(0,l.jsxs)("div",Object.assign({className:d()("tag-widget","annotating",{creating:r})},{children:[!r&&(0,l.jsxs)("div",Object.assign({className:"detail-panel-header"},{children:[(0,l.jsx)(nt,{label:o,className:"return-btn",icon:"back",size:tt.SMALL,variant:et.TERTIARY,disabled:s,onClick:this.closeTag}),(0,l.jsxs)("div",Object.assign({className:"tag-header-buttons"},{children:[!t&&(0,l.jsx)(pu,{prefix:"tag",pin:n,id:n.id,label:c,includeCameraView:!0,analyticAction:"tags_copy_share_link"}),(0,l.jsx)(nt,{label:a,className:"delete-btn",icon:"delete",size:tt.SMALL,variant:et.TERTIARY,disabled:s,onClick:this.deleteTag})]}))]})),(0,l.jsx)("div",Object.assign({className:"tag"},{children:(0,l.jsx)(Zf,{tag:n,manager:i,availableKeywords:i.getAvailableKeywords(),creating:r},n.id)}))]}))}};ev.contextType=m.I,ev=Qf([_n.Z],ev);const tv=wf(Of(ev));var nv=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let iv=class TagDetailsPanel extends r.Component{constructor(e){super(e),this.setToolPanelRef=e=>{e&&(this.toolPanel=e)}}componentDidUpdate(e){var t;const{modalOpen:n,tag:i}=this.props;this.toolPanel&&((null===(t=e.tag)||void 0===t?void 0:t.id)!==(null==i?void 0:i.id)||e.modalOpen&&!n)&&this.toolPanel.resetScrollTop()}render(){const{tag:e,closing:t,modalOpen:n,toolPanelLayout:i,manager:s}=this.props,r=i===p.wS.BOTTOM_PANEL,o=!(!e||t||r&&n);return(0,l.jsx)(DetailPanel,Object.assign({ref:this.setToolPanelRef,open:o,toolPanelLayout:i,scrollingDisabled:!1},{children:e&&(0,l.jsx)(tv,{manager:s,tag:e},e.id)}))}};iv.contextType=m.I,iv=nv([_n.Z],iv);var sv=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const{SEARCH:rv}=g.Z.SHOWCASE;let ov=class SearchPanel extends r.Component{constructor(e){super(e),this.bindings=[],this.detailPanelClosedTimeout=0,this.setTextInputRef=e=>this.textInputRef=e,this.focus=()=>{this.textInputRef&&!(0,ts.Jm)()&&this.textInputRef.focus()},this.updateCurrentTag=async()=>{const{currentTag:e}=this.state,{dockedTag:t}=this.props;window.clearTimeout(this.detailPanelClosedTimeout),e&&!t?this.startClosingDetailPanel():t?this.startOpeningTagWidget(t):this.setState({currentTag:null})},this.searchResultsOnChange=e=>{this.setState({searchResults:e.getResults(),searchGroups:e.groups,validationError:e.getValidationError(),searchText:e.getQuery(),queryKeywords:e.getQueryKeywords(),isAdvancedQuery:e.getIsAdvancedQuery()})},this.sendQuery=async e=>{this.context.commandBinder.issueCommand(new vu.H1(e))},this.onDone=e=>{this.isCollapsedToBottom()&&this.context.commandBinder.issueCommand(new hi.Fg(!1)),this.focused=!1},this.selectItem=()=>{this.isCollapsedToBottom()&&this.context.commandBinder.issueCommand(new hi.Fg(!0))},this.onClearSearch=()=>{this.sendQuery(""),this.focus()},this.scrollToInputOnResize=()=>{this.focused&&this.isCollapsedToBottom()&&(0,ts.Jm)()&&this.textInputRef.scrollIntoView()},this.handleFocused=()=>{this.focused=!0},this.state={active:!0,searchText:"",queryKeywords:[],searchResults:[],searchGroups:{},validationError:null,isAdvancedQuery:!1,linkCopied:!1,currentTag:e.dockedTag,detailPanelClosing:!1}}componentDidMount(){const{engine:e}=this.context;this.bindings.push(e.subscribe(mf.a,this.scrollToInputOnResize)),e.market.waitForData(ef.r).then((e=>{this.searchResultsOnChange(e),this.bindings.push(e.onChanged(this.searchResultsOnChange))}))}componentDidUpdate(e){e.dockedTag!==this.props.dockedTag&&this.updateCurrentTag()}startOpeningTagWidget(e){window.clearTimeout(this.detailPanelClosedTimeout),this.setState({currentTag:e,detailPanelClosing:!1})}startClosingDetailPanel(){this.state.detailPanelClosing||(this.setState({detailPanelClosing:!0}),this.detailPanelClosedTimeout=window.setTimeout((()=>{this.setState({currentTag:null,detailPanelClosing:!1})}),qo.El))}componentWillUnmount(){this.bindings.forEach((e=>e.cancel()))}renderSearchResults(){const{searchResults:e,searchText:t,searchGroups:n}=this.state;return this.state.searchResults.length>0?(0,l.jsx)(pf,{searchText:t,searchResults:e,searchGroups:n,onSelect:this.selectItem}):this.renderEmptyMessage()}renderEmptyMessage(){const e=this.context.locale.t(rv.EMPTY_LIST_MESSAGE);return(0,l.jsx)("p",Object.assign({className:"search-empty-message"},{children:e}))}renderSubheader(){const{locale:e}=this.context,{validationError:t,isAdvancedQuery:n}=this.state,i=!this.isCollapsedToBottom();return(0,l.jsxs)("div",Object.assign({className:"list-subheaders"},{children:[this.renderSearchHeader(),t&&(0,l.jsx)("div",Object.assign({className:"search-validation-error"},{children:e.t(rv.VALIDATION_MESSAGE)})),n&&(0,l.jsx)(yf,{}),i&&(0,l.jsx)(ff,{})]}))}isCollapsedToBottom(){const{toolPanelLayout:e,toolCollapsed:t}=this.props;return t&&e===p.wS.BOTTOM_PANEL}renderSearchHeader(){const{searchText:e,queryKeywords:t,validationError:n}=this.state,{locale:i}=this.context,{toolPanelLayout:s}=this.props,r=i.t(rv.QUERY_PLACEHOLDER),o=i.t(rv.CLEAR_SEARCH).toLocaleUpperCase(),a=t.length>0||""!==e;return(0,l.jsxs)("div",Object.assign({className:d()("list-search",!!n&&"has-validation-msg")},{children:[(0,l.jsx)("span",{className:d()("search-header-icon","icon","icon-magnifying-glass",{"search-header-icon-active":a})}),(0,l.jsx)(tl,{text:e,onInput:this.sendQuery,onDone:this.onDone,placeholder:r,onFocus:this.handleFocused,ref:this.setTextInputRef,focusOnMount:s===p.wS.SIDE_PANEL}),(0,l.jsxs)("div",Object.assign({className:"search-header-button-container"},{children:[""!==e&&(0,l.jsx)(Ts.zx,Object.assign({onClick:this.onClearSearch,buttonStyle:Ts.ZJ.PLAIN,buttonSize:Ts.qE.STANDARD},{children:o})),a&&(0,l.jsx)(vf,{query:e,queryKeywords:t,collapsedToBottom:this.isCollapsedToBottom(),toolPanelLayout:s})]}))]}))}getListTitle(){const{searchResults:e}=this.state,t=e.length;return this.context.locale.t(rv.ITEMS,t)}render(){const{active:e,currentTag:t,detailPanelClosing:n}=this.state,{toolPanelLayout:i,toolsData:s}=this.props,r=s.getTool(p.w1.TAGS),o=t&&t.objectAnnotationId;return(0,l.jsxs)("div",Object.assign({className:"tool-panel search-panel"},{children:[r&&o&&(0,l.jsx)(iv,{closing:n,manager:r.manager,modalOpen:!1,tag:t,toolPanelLayout:i}),(0,l.jsx)(tg,Object.assign({active:e,toolId:p.w1.SEARCH,title:this.getListTitle(),subheader:this.renderSubheader(),subheaderCollapsedHeight:qo._U},{children:(0,l.jsx)(SingleScrollbar,Object.assign({direction:us.vertical},{children:(0,l.jsx)("div",Object.assign({className:"list-contents"},{children:this.renderSearchResults()}))}))}))]}))}};ov.contextType=m.I,ov=sv([_n.Z],ov);const av=k(tp(Tf((lv=ov,cv=Xo,e=>cv()?(0,l.jsx)(lv,Object.assign({},e)):null))));var lv,cv;const dv=(e,t)=>e.text.localeCompare(t.text),uv=new Zn.f({}),hv=new ni.d,pv={fixtures:"KEYWORDS_FIXTURES"};const mv=()=>{const e=function(){var e,t;const n=_(),i=tf(),s=ti(null!==(e=null==i?void 0:i.queryKeywords)&&void 0!==e?e:hv),o=$n(null!==(t=null==i?void 0:i.keywords)&&void 0!==t?t:uv);return(0,r.useMemo)((()=>Object.values(o).map((e=>Object.assign({isSelected:s.includes(e.id),text:pv[e.id]?n.t(pv[e.id]):e.id},e))).sort(dv)),[o,s,n])}(),t=function(e,t){const{engine:n}=(0,r.useContext)(m.I);return(0,r.useCallback)(((...i)=>{const s=t?Array.isArray(t)?t:t(...i):[];n.commandBinder.issueCommand(new e(...s))}),[e,t,n])}(vu.M8,(e=>[e.id]));return(0,l.jsx)(fn,{className:"search-keyword-summary",tokens:e,onTokenClick:t,maxVisibleTruncated:5,allowSelect:!0})},gv=({isNarrowScreen:e})=>{const t=Kn(ef.r,"isKeywordSummaryEnabled",!1);return(0,l.jsx)("div",Object.assign({className:d()("search-tool-overlay",e&&"narrow-screen")},{children:t&&(e?(0,l.jsx)(SingleScrollbar,Object.assign({direction:us.horizontal},{children:(0,l.jsx)(mv,{})})):(0,l.jsx)(mv,{}))}))};var fv=n(56396),vv=n(57494);const{SUBSCRIBER_PROMPT:bv}=g.Z.SHOWCASE,yv=e=>{e.preventDefault()},Sv=()=>{const e=(0,Mo.z)(),t=_(),[n,i]=(0,r.useState)(!0),s=(0,r.useCallback)((t=>{e.trackGuiEvent("subscriber_prompt_b_banner_click"),window.open(xo.Sm,"_blank")}),[e]);return(0,r.useEffect)((()=>(n&&(e.trackGuiEvent("subscriber_prompt_b_banner_viewed"),i(!1)),()=>{})),[e,n]),(0,l.jsxs)("div",Object.assign({className:"subscriber-prompt-banner",onClick:s},{children:[(0,l.jsx)("img",{className:"matterport-logo",alt:"Matterport",src:vv}),(0,l.jsx)("a",Object.assign({className:"link",target:"_blank",onClick:yv,href:xo.Sm},{children:t.t(bv.BANNER_CTA_LINK_TEXT)}))]}))},Ev=P("isSubscriberBannerVisible",(()=>{const e=ea();return jo().bannerEnabled&&e})),{SUMMARY:Tv}=g.Z.SHOWCASE,Ov=qo.MN/1.6;class SummaryContent extends r.Component{constructor(e){super(e),this.getImageURL=e=>{const t=new URL(e);return t.searchParams.set("width",String(qo.MN)),t.searchParams.delete("height"),t.searchParams.delete("fit"),t.searchParams.set("crop","16:10"),t.searchParams.set("dpr",String(window.devicePixelRatio)),t.href},this.onExternalLinkClicked=e=>{this.context.analytics.track("showcase_share_origin_link_clicked")},this.state={thumbnail:void 0}}componentDidMount(){const{market:e}=this.context.engine;e.waitForData(fv.O).then((e=>{e.thumb&&e.thumb.get().then((e=>{try{this.setState({thumbnail:this.getImageURL(e)})}catch(e){this.setState({thumbnail:void 0})}}))}))}getFilteredValue(e,t,n,i){return!this.context.settings.tryGetProperty(t,n)||i&&!this.props.brandingEnabled?"":e}render(){const{modelDetails:e,showExternalUrl:t,isSubscriberBannerVisible:n}=this.props,{thumbnail:i}=this.state,{locale:s}=this.context,{name:r,presentedBy:o,summary:a,formattedAddress:c,contact:d,externalUrl:u}=e,h=t?u:"",p=this.getFilteredValue(r,Ln.gx.DetailsModelName,!0,!1),m=this.getFilteredValue(a,Ln.gx.DetailsSummary,!1,!1),f=this.getFilteredValue(c,Ln.gx.DetailsAddress,!1,!1),v=this.getFilteredValue(o,Ln.gx.PresentedBy,!1,!0),b=this.getFilteredValue(d.name,Ln.gx.DetailsName,!1,!0),y=this.getFilteredValue(d.email,Ln.gx.DetailsEmail,!1,!0),S=this.getFilteredValue(d.phone,Ln.gx.DetailsPhone,!1,!0),E=this.getFilteredValue(d.formattedPhone,Ln.gx.DetailsPhone,!1,!0),T=E||S;return(0,l.jsx)("div",Object.assign({className:"summary-content"},{children:(0,l.jsxs)(SingleScrollbar,Object.assign({direction:us.vertical},{children:[i?(0,l.jsx)("img",{className:"summary-image",width:qo.MN,height:Ov,src:i,alt:`Photo of "${p}"`}):null,n&&(0,l.jsx)(Sv,{}),(0,l.jsxs)("div",Object.assign({className:"summary-text-content"},{children:[p&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",Object.assign({className:"section-header"},{children:s.t(Tv.LABEL_LOCATION)})),(0,l.jsx)("div",Object.assign({className:"location"},{children:p}))]}),f&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",Object.assign({className:"section-header"},{children:s.t(Tv.LABEL_ADDRESS)})),(0,l.jsx)("div",Object.assign({className:"section-body"},{children:f}))]}),v&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",Object.assign({className:"section-header"},{children:this.context.locale.t(g.Z.PRESENTED_BY)})),(0,l.jsx)("div",Object.assign({className:"section-body"},{children:v}))]}),(b||S||y)&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",Object.assign({className:"section-header"},{children:s.t(Tv.LABEL_CONTACT)})),(0,l.jsxs)("div",Object.assign({className:"section-body"},{children:[b&&(0,l.jsx)("div",{children:b}),y&&(0,l.jsx)("div",{children:(0,l.jsx)("a",Object.assign({className:"link",href:"mailto:"+y},{children:y}))}),T&&(0,l.jsx)("div",{children:T})]}))]}),m&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",Object.assign({className:"section-header"},{children:s.t(Tv.LABEL_INFORMATION)})),(0,l.jsx)("div",Object.assign({className:"section-body"},{children:m}))]}),h&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",Object.assign({className:"section-header"},{children:s.t(Tv.LABEL_LEARN_MORE)})),(0,l.jsxs)("div",Object.assign({className:"external-link-wrapper"},{children:[(0,l.jsx)("i",Object.assign({className:"icon-ext-link"},{children:" "})),(0,l.jsx)("a",Object.assign({className:"section-body link",onClick:this.onExternalLinkClicked,href:h,target:"_blank",rel:"noopener"},{children:h}))]}))]})]}))]}))}))}}SummaryContent.contextType=m.I;const _v=Ev(SummaryContent),{SUMMARY:Av}=g.Z.SHOWCASE;class SummaryPanel extends r.Component{constructor(){super(...arguments),this.handleCloseClick=()=>{const{commandBinder:e}=this.context;e.issueCommand(new hi.tT(p.w1.SUMMARY,!1))}}render(){const{modelDetails:e,brandingEnabled:t,showExternalUrl:n}=this.props,{locale:i}=this.context;return(0,l.jsxs)("div",Object.assign({className:"summary-panel list-panel active"},{children:[(0,l.jsxs)("div",Object.assign({className:"summary-panel-header panel-header"},{children:[(0,l.jsx)(Wm,Object.assign({className:"summary-panel-title"},{children:i.t(Av.HEADING)})),(0,l.jsx)("div",{children:(0,l.jsx)(Es.hU,{iconClass:"icon-close",buttonStyle:Es.Dd.PLAIN,onClick:this.handleCloseClick})})]})),(0,l.jsx)(_v,{modelDetails:e,brandingEnabled:t,showExternalUrl:n})]}))}}SummaryPanel.contextType=m.I;const{TOURS:wv}=g.Z.SHOWCASE;function Nv(e){const{locale:t,messageBus:n,settings:i,commandBinder:s}=(0,r.useContext)(m.I),{highlights:o,tourPlaying:a,narrowLayout:c}=e,u=t.t(wv.TOUR_CONTROLS_TITLE),h=t.t(wv.TOUR_CONTROLS_CTA),p=0===o.length,[g,f]=(0,r.useState)(!1),v=(0,r.useCallback)((async e=>{p||(e.stopPropagation(),await s.issueCommand(new T.r2))}),[p,s]),b=(0,r.useCallback)((async e=>{p||(e.stopPropagation(),await s.issueCommand(new T.Ri))}),[p,s]);return(0,r.useEffect)((()=>{const e=[];let t=0;const i=()=>{f(!1)};return e.push(n.subscribe(ci.oR,(()=>{})),n.subscribe(ci.NR,i)),()=>{e.forEach((e=>e.cancel())),clearInterval(t)}}),[n,i,c]),(0,l.jsxs)("div",Object.assign({className:d()("tour-story-controls-mobile",{prompt:g,tourPlaying:a})},{children:[(0,l.jsx)("div",Object.assign({className:"tour-story-help-title"},{children:u})),(0,l.jsx)("div",Object.assign({className:"tour-story-help-cta"},{children:h})),(0,l.jsx)("div",Object.assign({className:"tour-story-prev",onClick:b},{children:(0,l.jsx)("div",{className:"icon icon-dpad-left"})})),(0,l.jsx)("div",Object.assign({className:"tour-story-next",onClick:v},{children:(0,l.jsx)("div",{className:"icon icon-dpad-right"})}))]}))}const Pv=new O.Z("showcase-ui"),Iv=(0,v.FU)();class ShowcaseUi extends r.Component{constructor(e,t){super(e,t),this.bindings=[],this.mobile=(0,ts.tq)(),this.propertiesToRefreshUi=[Ln.gx.Measurements,Ln.gx.DetailsModelName,Ji.ws,Ln.gx.FloorSelect],this.isUnmounting=!1,this.initialToolLoaded=!1,this.getModeChange=e=>({viewmode:(0,E.ty)(e.toMode)}),this.updateToolPanelLayout=()=>{const{toolsData:e,mainDiv:t}=this.context,n=e.toolPanelLayout;this.setState({toolPanelLayout:n}),sp(t,n)},this.showHelpOnPlaying=e=>{e.phase===h.nh.PLAYING&&(this.context.commandBinder.issueCommand(new ui.Bz(di.P.CTA,!0)),this.context.messageBus.unsubscribe(u.LZ,this.showHelpOnPlaying))},this.updateTools=()=>{const{toolsData:e}=this.context,{toolsLoaded:t}=this.state;e.toolsMap.length>0&&!t&&this.setState({toolsLoaded:!0}),this.initialToolLoaded||this.showInitialTool()},this.updatePerSettings=()=>{this.setState({measurementsModeEnabled:this.isMeasurementsEnabled(),notesEnabled:this.isNotesEnabled(),newTagsEnabled:this.isNewTagsEnabled()})},this.updateTourState=()=>{this.tourData&&this.setState({tourState:this.tourData.getCurrentTourState()})},this.updateTourMode=()=>{this.toursViewData&&this.setState({tourMode:this.toursViewData.currentTourMode})},this.isVrButtonEnabled=()=>(0,xu.hX)(this.context.settings),this.updateActiveTool=()=>{const{tourState:e}=this.state,{toolsData:t,commandBinder:n,mainDiv:i}=this.context,s=t.activeToolName;this.setState({activeTool:s}),window.clearTimeout(this.panelCloseTimeout),s?i.classList.add("tool-open"):this.panelCloseTimeout=window.setTimeout((()=>{i.classList.remove("tool-open")}),400),s&&e.tourPlaying&&n.issueCommand(new T.vy,!1)},this.updateToolCollapsed=()=>{const{toolsData:e,mainDiv:t}=this.context;e.toolCollapsed?t.classList.add("tool-collapsed"):t.classList.remove("tool-collapsed")},this.openModalChanged=()=>{const{toolsData:e,commandBinder:t,mainDiv:n}=this.context,{tourState:i}=this.state,s=e.openModal;s?n.classList.add("modal-open"):n.classList.remove("modal-open"),s&&i.tourPlaying&&t.issueCommand(new T.vy,!1),this.setState({openModal:s})},this.renderLeftPanels=()=>{const{modelDetails:e,brandingEnabled:t,toolPanelLayout:n,showExternalUrl:i}=this.state;return(0,l.jsxs)(ip,Object.assign({sidePanelCollapsible:!1,className:"side-panel-left"},{children:[!!e&&(0,l.jsx)(SummaryPanel,{modelDetails:e,brandingEnabled:t,showExternalUrl:i},p.w1.SUMMARY),(0,l.jsx)(av,{toolPanelLayout:n},p.w1.SEARCH)]}))},this.glCanvas=document.getElementsByClassName("webgl-canvas")[0],this.state={viewmode:E.g,activeTool:null,openModal:null,toolsLoaded:!1,toolPanelLayout:t.toolsData.toolPanelLayout,tourState:{},tourMode:Vn.zz.NONE,modelDetails:null,measurementsModeEnabled:!1,notesEnabled:!1,newTagsEnabled:!1,vrEnabled:!1,brandingEnabled:!1,shareEnabled:!1,unaligned:!0,showExternalUrl:!1}}async componentDidMount(){const{settings:e,messageBus:t,market:n,toolsData:i}=this.context;for(const t of this.propertiesToRefreshUi)e.onPropertyChanged(t,this.updatePerSettings);try{this.cancelBindings(),this.bindings=[i.onToolsLoadedChanged(this.updateTools),i.onToolChanged(this.updateActiveTool),i.onOpenModalChanged(this.openModalChanged),i.onToolPanelLayoutChanged(this.updateToolPanelLayout),i.onToolCollapsedChanged(this.updateToolCollapsed),i.toolsMap.onChanged(this.updatePerSettings)],this.handleStartUpHelp();const[e,s,r,o,a]=await Promise.all([n.waitForData(Mr.T),n.waitForData(y.O),n.waitForData(du.Z),n.waitForData(Yn.k),n.waitForData(_i.T)]);if(this.isUnmounting)return;this.bindings.push(t.subscribe(Hc.Z,(e=>this.setState(Object.assign(Object.assign({},this.getModeChange(e)),this.getUnalignedSweepState())))),t.subscribe(ci.NR,this.updateTourState),t.subscribe(ci.oR,this.updateTourState),t.subscribe(ci.Vx,this.updateTourState),t.subscribe(ci.Mt,this.updateTourState),t.subscribe(ci.dW,this.updateTourState),o.getReel().onChanged(this.updateTourState),a.onPropertyChanged("currentTourMode",this.updateTourMode),r.makeSweepChangeSubscription((()=>this.setState(this.getUnalignedSweepState()))));const l=(0,E.ty)(s.currentMode||ji.Ey.Panorama);this.tourData=o,this.toursViewData=a,this.sweepData=r,this.viewmodeData=s,this.setState(Object.assign({viewmode:l,modelDetails:e.model.details,brandingEnabled:this.isBrandingEnabled()&&!this.isMlsEnabled(),shareEnabled:this.isShareEnabled()&&!this.isMlsEnabled(),showExternalUrl:this.isBrandingEnabled()&&!this.isMlsEnabled(),vrEnabled:this.isVrButtonEnabled()},this.getUnalignedSweepState())),this.props.onAppReadyChanged(!0,!1)}catch(e){Pv.debug(e)}this.updateTourState(),this.updateTourMode(),this.updateActiveTool(),this.updateToolCollapsed(),this.updateTools(),this.updatePerSettings()}async componentWillUnmount(){this.isUnmounting=!0;for(const e of this.propertiesToRefreshUi)this.context.settings.removeOnPropertyChanged(e,this.updatePerSettings);this.cancelBindings(),this.props.onAppReadyChanged(!1,!1)}handleStartUpHelp(){const{settings:e,messageBus:t,commandBinder:n}=this.context,i=e.tryGetProperty("help",0);if(1===i||2===i){const i=1===e.tryGetProperty("ts",0),s=!0===e.tryGetProperty("quickstart",!1);i||(s?n.issueCommand(new ui.Bz(di.P.CTA,!0)):t.subscribe(u.LZ,this.showHelpOnPlaying))}}showInitialTool(){const{toolsData:e,settings:t}=this.context,n=t.tryGetProperty(_a.RY,!1),i=t.tryGetProperty(Fs.IA,!1),s=(0,Zh.u)(t,n,i);s&&e.hasTool(s)&&(this.initialToolLoaded=!0,window.setTimeout((()=>{(0,Zh.a)(s,this.context)}),750))}getUnalignedSweepState(){if(!this.sweepData||!this.viewmodeData)return{unaligned:this.state.unaligned};return{unaligned:this.viewmodeData.isInside()&&this.sweepData.isSweepUnaligned(this.sweepData.currentSweep)}}cancelBindings(){for(const e of this.bindings)e.cancel()}isNotesEnabled(){const{settings:e,toolsData:t}=this.context;return e.tryGetProperty(Fs.IA,!1)&&!!t.getTool(p.w1.NOTES)}isNewTagsEnabled(){const{settings:e,toolsData:t}=this.context;return e.tryGetProperty(_a.RY,!1)&&!!t.getTool(p.w1.TAGS)}isMeasurementsEnabled(){const{settings:e,toolsData:t}=this.context;return e.tryGetProperty(Ln.gx.Measurements,!0)&&!!t.getTool(p.w1.MEASUREMENTS)}isShareEnabled(){const{settings:e}=this.context,t=e.tryGetProperty(Lr.Yo,!1)&&e.tryGetProperty("is_public",!1),n=(0,ts.SP)()&&"0"===Iv.share;return t&&!n}isMlsEnabled(){return this.context.settings.tryGetProperty(Lr.sX,!1)}isBrandingEnabled(){const{settings:e}=this.context;return e.tryGetProperty(Lr.L,!0)}renderToolPanels(){const{notesEnabled:e,newTagsEnabled:t,openModal:n,toolPanelLayout:i}=this.state;if(!e&&!t)return null;const{toolsData:s}=this.context,r=e&&s.getTool(p.w1.NOTES),o=t&&s.getTool(p.w1.TAGS);return(0,l.jsxs)(ip,Object.assign({sidePanelCollapsible:!1,className:"side-panel-right"},{children:[r&&(0,l.jsx)(Og,{manager:r.manager,modalOpen:!!n,toolPanelLayout:i},p.w1.NOTES),o&&(0,l.jsx)(yp,{},p.w1.TAGS)]}))}renderToolOverlay(e){const{toolsData:t}=this.context,{openModal:n,activeTool:i,unaligned:s,toolPanelLayout:r}=this.state,o=t.toolsMap.get(p.w1.MEASUREMENTS),a=t.toolsMap.get(p.w1.NOTES);return(0,l.jsxs)("div",Object.assign({className:"tool-overlay"},{children:[!i&&(0,l.jsx)(Xg,{}),i===p.w1.MEASUREMENTS&&o&&(0,l.jsx)(Zg,{mobile:this.mobile,openModal:n,unaligned:s,manager:o.manager}),i===p.w1.NOTES&&a&&(0,l.jsx)(Ig,{openModal:n,toolPanelLayout:r,unaligned:s,manager:a.manager}),(0,l.jsx)(kg,{}),i===p.w1.SEARCH&&(0,l.jsx)(gv,{isNarrowScreen:e})]}))}render(){const{viewmode:e,unaligned:t,tourState:n,modelDetails:i,measurementsModeEnabled:s,notesEnabled:r,shareEnabled:o,brandingEnabled:a,vrEnabled:c,openModal:u,toolsLoaded:h,toolPanelLayout:m,activeTool:g,tourMode:f}=this.state,{tourPlaying:v,activeStep:b,currentStep:y,highlights:S}=n,E=g===p.w1.SEARCH,T=f===Vn.zz.STORIES,O=m===p.wS.NARROW||m===p.wS.BOTTOM_PANEL;return(0,l.jsxs)("div",Object.assign({id:"gui",className:d()({"search-mode":E})},{children:[!!i&&(0,l.jsx)(Ea,{showing:!u&&!g,modelDetails:i,tourState:n,brandingEnabled:a,activeTool:g}),(0,l.jsx)(Modals,{viewmode:e,glCanvas:this.glCanvas,openModal:u,shareEnabled:o}),(0,l.jsxs)("div",Object.assign({className:"showcase-ui-overlay"},{children:[this.renderLeftPanels(),(0,l.jsxs)("div",Object.assign({className:"scene-overlay"},{children:[T&&(0,l.jsx)(Lu,{currentStep:y,activeStep:b,highlights:S}),T&&(0,l.jsx)(Nv,{highlights:S,tourPlaying:v,narrowLayout:O}),(0,l.jsx)(OverlayUi,{viewmode:e,openModal:u,tourState:n,mobile:this.mobile}),h&&this.renderToolOverlay(O),(0,l.jsx)(Co,{openModal:u,openTool:g,unaligned:t,viewmode:e,tourState:n,tourMode:f,measurementsModeEnabled:s,notesEnabled:r,shareEnabled:o,vrEnabled:c,toolPanelLayout:m})]})),this.renderToolPanels(),(0,l.jsx)(Jh,{})]}))]}))}}ShowcaseUi.contextType=m.I;var kv=n(61903),Cv=n(29410),Lv=n(6058),Mv=n(24486),Dv=n(14279),Rv=n(8483),xv=n(2753),jv=n(97082),Uv=n(34e3),Hv=n(57073);class MeasurementsManager{constructor(e,t){this.engine=e,this.initialized=!1,this.disabledAssets={[Dv.U]:!1,[Mv.s]:!1,[Ta.Nj]:!1,[Oa.re]:!1,[Fs.Mp]:!1},this.settingsToggler=new Lv.u(t,this.disabledAssets)}async activate(){if(!this.initialized){this.initialized=!0;const e=this.engine,[t,n,i,s]=await Promise.all([e.market.waitForData(Hv.X),e.market.waitForData(S.c),e.market.waitForData(du.Z),e.market.waitForData(y.O)]);this.dataMap={measurementModeData:t,floorsViewData:n,sweepData:i,viewmodeData:s}}this.settingsToggler.toggle(!0),await this.engine.commandBinder.issueCommandWhenBound(new Rv.O(!0,!0))}async deactivate(){this.settingsToggler.toggle(!1),this.dataMap.measurementModeData.setSelectedGroupIndex(-1),await this.engine.commandBinder.issueCommand(new Rv.O(!1))}async hasPendingEdits(){switch(this.dataMap.measurementModeData.phase){case Cg.au.CLOSED:case Cg.au.IDLE:return!1;default:return!0}}in360view(){const e=this.dataMap.sweepData.currentSweep?this.dataMap.sweepData.currentSweep:"";return this.dataMap.viewmodeData.isInside()&&this.dataMap.sweepData.isSweepUnaligned(e)}getSelectedMeasurement(){return this.dataMap.measurementModeData.selectedGroupSid}renameMeasurement(e,t){return this.engine.commandBinder.issueCommand(new xv.R(e,t))}setMeasurementVisibility(e,...t){return this.engine.commandBinder.issueCommand(new jv.W(e,...t))}async batchDeleteMeasurement(e){return this.engine.commandBinder.issueCommand(new Lg.JM(...e)),!0}async deleteMeasurement(e){await this.engine.commandBinder.issueCommand(new Lg.JM(e))}async toggleSelected(e){await this.engine.commandBinder.issueCommand(new Uv.l(e))}}var Fv=n(69670);class NotesManager{constructor(e,t){this.engine=e,this.initialized=!1,this.disabledAssets={[Dv.U]:!1,[Ta.Nj]:!1,[Mv.s]:!1,[Oa.re]:!1},this.settingsToggler=new Lv.u(t,this.disabledAssets),this.initPromise=this.init()}async init(){const e=this.engine.market;return Promise.all([e.waitForData(Qc.X),e.waitForData(Fv.c),e.waitForData(wp.b),e.waitForData(qc.A),e.waitForData(Kc.B)]).then((([e,t,n,i,s])=>(this.dataMap={notesViewData:e,hashtagData:t,attachmentsData:n,annotationsViewData:i,pinsViewData:s},!0)))}async activate(){this.initialized||(this.initialized=!0,await this.initPromise),this.settingsToggler.toggle(!0),await this.engine.commandBinder.issueCommand(new Tp.yK(!0))}async hasPendingEdits(){const{notesPhase:e,activeNotation:t}=this.dataMap.notesViewData;switch(e){case Ep.U.IDLE:case Ep.U.CLOSED:return!1;case Ep.U.EDITING:case Ep.U.CREATING:return!0;default:return!!t}}async deactivate(){await this.engine.commandBinder.issueCommand(new Tp.yK(!1)),this.settingsToggler.toggle(!1)}getTextParser(){return this.dataMap.notesViewData.getTextParser()}getLinkHandler(){return this.dataMap.notesViewData.getLinkHandler()}}const{MATTERTAGS:Bv,MODAL:Vv}=g.Z.WORKSHOP;class TagsManager{constructor(e,t){this.engine=e,this.initialized=!1,this.bindings=[],this.textParser=new ja.v({links:!0}),this.disabledEditorAssets={[Dv.U]:!1,[Ta.Nj]:!1,[Mv.s]:!1,[Fs.Mp]:!1},this.settingsToggler=new Lv.u(t,this.disabledEditorAssets),this.initPromise=this.init()}async init(){const e=this.engine.market;return Promise.all([e.waitForData(tu.n),e.waitForData(wp.b),e.waitForData(S.c),e.waitForData(qc.A),e.waitForData(Kc.B)]).then((([e,t,n,i,s])=>(this.dataMap={tagsViewData:e,attachmentsData:t,floorsViewData:n,annotationsViewData:i,pinsViewData:s},!0)))}async activate(){const e=this.engine;if(this.initialized)for(const e of this.bindings)e.renew();else this.initialized=!0,await this.initPromise;this.settingsToggler.toggle(!0),await e.commandBinder.issueCommand(new au.yU(!0))}async deactivate(){this.settingsToggler.toggle(!1),await this.engine.commandBinder.issueCommand(new au.yU(!1))}async hasPendingEdits(){const{dirtyTagState:e,creatingTag:t}=this.dataMap.tagsViewData;return e||t}creatingTag(){return this.dataMap.tagsViewData.creatingTag}getAvailableKeywords(){var e,t;return null===(t=null===(e=this.dataMap)||void 0===e?void 0:e.tagsViewData)||void 0===t?void 0:t.getAvailableKeywords()}areObjectTagsEnabled(){var e,t;return(null===(t=null===(e=this.dataMap)||void 0===e?void 0:e.tagsViewData)||void 0===t?void 0:t.objectTagsEnabled)||!1}async confirmAndDeleteTag(e,t){const n=((e=1)=>({title:Bv.DELETE_TAGS_MODAL_TITLE,titleLocalizationOptions:e,message:Bv.DELETE_TAGS_MODAL_MESSAGE,messageLocalizationOptions:e,cancellable:!0,cancelPhraseKey:Vv.NO,confirmPhraseKey:Vv.YES}))();if(await this.engine.commandBinder.issueCommand(new qh.EW(qh.Rx.DISPLAY,n))!==qh.Uc.CLOSE)return this.deleteTag(e,t)}closeTag(){return this.engine.commandBinder.issueCommand(new au.xb)}deleteTag(e,t){return this.engine.commandBinder.issueCommand(new au.T3(e,t))}editTag(e){return this.engine.commandBinder.issueCommand(new au.zt(e))}setDirtyTagState(e){return this.engine.commandBinder.issueCommand(new au.q4(e))}setTagVisibility(e,t){this.engine.commandBinder.issueCommand(new au.bg(e,t))}}var Gv=n(36154),Wv=n(3786),zv=n(11325);const{TOOLS:Kv}=g.Z;class ShowcaseGui extends a.Y{constructor(){super(),this.name="showcase-gui-module",this.onSaveError=e=>{const{error:t}=e;this.engine.commandBinder.issueCommand(new Wv.I(g.Z.ERRORS.UNABLE_TO_SAVE_CHANGES_ERROR_MESSAGE,{throttle:30,timeout:10,type:zv.N.ERROR,error:t}))},this.onForbiddenError=e=>{const{error:t}=e;this.engine.commandBinder.issueCommand(new Wv.I(g.Z.ERRORS.UNAUTHORIZED_ERROR_MESSAGE,{throttle:0,timeout:0,type:zv.N.ERROR,error:t}))},this.loadUi=this.loadUi.bind(this)}async init(e,t){this.engine=t,[this.settingsData,this.toolsData]=await Promise.all([t.market.waitForData(kv.e),t.market.waitForData(A.t)]),this.bindings.push(t.subscribe(Gv.dz,this.onSaveError),t.subscribe(Gv.hu,this.onForbiddenError))}async loadUi(e,t,n,i,s,a,l,c,d,u,h,p){const g={editMode:!1,locale:e,analytics:t,settings:n,toolsData:this.toolsData,userData:i,mainDiv:s,engine:l,messageBus:c,market:d,commandBinder:u,queue:p};this.reactRoot=(0,o.s)(a),this.reactRoot.render((0,r.createElement)(m.I.Provider,{value:g},[(0,r.createElement)(ShowcaseUi,{key:"showcase-ui",onAppReadyChanged:h})])),this.initializeTools()}async unloadUi(){return!!this.reactRoot&&(this.reactRoot.unmount(),!0)}initializeTools(){const e=[new Cv.U({id:p.w1.NOTES,namePhraseKey:Kv.NOTES,panel:!0,icon:"icon-comment-outline",analytic:"notes_mode",toolbar:!1,dimmed:!1,enabled:this.settingsData.tryGetProperty(Fs.IA,!1),hidesAppBar:!0,manager:new NotesManager(this.engine,this.settingsData)}),new Cv.U({id:p.w1.MEASUREMENTS,namePhraseKey:Kv.MEASUREMENTS,panel:!1,icon:"icon-tape-measure",analytic:"measure_mode",toolbar:!1,dimmed:!1,enabled:this.settingsData.tryGetProperty(Ln.gx.Measurements,!0),manager:new MeasurementsManager(this.engine,this.settingsData)}),new Cv.U({id:p.w1.SUMMARY,namePhraseKey:Kv.SUMMARY,panel:!0,panelLeft:!0,analytic:"summary_panel",toolbar:!1,dimmed:!1,enabled:!0,hidesAppBar:!0,manager:{activate:async()=>{},deactivate:async()=>{}}})];this.settingsData.tryGetProperty(_a.RY,!1)&&e.push(new Cv.U({id:p.w1.TAGS,namePhraseKey:Kv.TAGS,panel:!0,icon:"icon-toolbar-mattertags",analytic:"mattertag",toolbar:!1,dimmed:!1,enabled:!0,hidesAppBar:!0,manager:new TagsManager(this.engine,this.settingsData)})),this.engine.commandBinder.issueCommand(new hi.MV(e))}}},19590:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>LoadingGui});var i=n(57227),s=n(14877),r=n(41907),o=n(9986),a=n(97966),l=n(10854),c=n(2252),d=n(87100),u=n(81402),h=n(31013),p=n(90831),m=n(4117);class ShowcaseExpansionMessage extends m.v{constructor(e){super(),this.expanded=e}}var g=n(43585);class ProgressRadial{constructor(e){this.lastProgress=0,this.currentProgress=0,this.webpackChunks=[],this.meshAlloc={alloc:2e6,loaded:0},this.showingProgress=!1,this.progressElm=document.getElementById("bar"),window.addEventListener("WebpackChunkProgress",this.onWebpackChunkProgress.bind(this)),this.engine=e,this.meshProgressBinding=this.onMeshLoadProgress.bind(this),this.engine.subscribe(g.Z,this.meshProgressBinding)}showProgress(){this.showingProgress=!0,this.setProgress(this.currentProgress)}setDone(){this.currentProgress=100,this.setProgress(this.currentProgress),this.engine.unsubscribe(g.Z,this.meshProgressBinding)}setProgress(e){if(!this.progressElm||isNaN(e))return;this.lastProgress=Math.max(this.lastProgress,e),e=this.lastProgress;const t=Number.parseFloat(this.progressElm.getAttribute("r")||"0"),n=Math.PI*(2*t),i=(100-(e=Math.max(Math.min(e,100),0)))/100*n;this.progressElm.style.strokeDashoffset=i.toString(10)}calcProgress(){let e=0,t=0;this.webpackChunks.forEach((n=>{e+=n.loaded,t+=n.total})),e+=this.meshAlloc.loaded,t+=this.meshAlloc.alloc,this.currentProgress=75*Math.min(e/t,1),this.showingProgress&&this.setProgress(this.currentProgress)}onWebpackChunkProgress(e){this.webpackChunks[e.chunkID]?this.webpackChunks[e.chunkID].loaded=e.loaded:this.webpackChunks[e.chunkID]={loaded:e.loaded,total:e.total},this.calcProgress()}onMeshLoadProgress(e){this.meshAlloc.loaded=e.loaded/e.total*this.meshAlloc.alloc,this.calcProgress()}}var f=n(93037);class ShowcaseStartCommand extends f.m{}ShowcaseStartCommand.id="SHOWCASE_START";class ShowcaseStopCommand extends f.m{}ShowcaseStopCommand.id="SHOWCASE_STOP";class ShowcaseReadyCommand extends f.m{}ShowcaseReadyCommand.id="SHOWCASE_READY";class StartApplicationCommand extends f.m{constructor(e){super(),this.payload={startup:e}}}StartApplicationCommand.id="START_APPLICATION";class ExpandIframeCommand extends f.m{constructor(e){super(),this.payload={expand:e}}}ExpandIframeCommand.id="EXPAND_APP";var v=n(16534),b=n(61903),y=n(36507);function S(e,t){var n;let i=function(e){return document.querySelector(`link[rel=${e}]`)}(e);i||(i=document.createElement("link"),null===(n=document.getElementsByTagName("head")[0])||void 0===n||n.appendChild(i)),i.setAttribute("rel",e),i.setAttribute("href",t)}class LoadingGui extends i.Y{constructor(){super(...arguments),this.name="loading-ui",this.playPromise=new h.Q,this.resolvePlayPromise=async(e,t)=>{if(this.config.allowPlayInIframe||!this.config.startNewTab){if((0,c.yL)())if(t&&(this.config.allowPlayInIframe||1===(0,d.eY)("expand",0)))this.toggleIframeExpansion(!0);else if(!this.config.allowPlayInIframe){const e=(0,d.kD)();t&&e.set("edit","1"),e.set("back","1"),e.delete("cloudEdit");const n=e.toString(),i=`${window.location.origin}${window.location.pathname}?${n}`;try{return void(window.top&&(window.top.location.href=i))}catch(e){this.log.debug("Couldn't set top window location; was Showcase sandboxed?"),this.log.debug(e)}}t&&this.settings.setProperty("quickstart",!0),e&&(this.config.noUi||(this.playIcon.classList.add("hidden"),this.progressUI.showProgress()),this.playPromise.resolve())}else{const e=(0,y.m5)(window.location.href);window.open(e,"_blank")}},this.toggleIframeExpansion=e=>{const t=e?new ShowcaseStartCommand:new ShowcaseStopCommand;this.engine.commandBinder.issueCommand(t),this.engine.broadcast(new ShowcaseExpansionMessage(e))},this.onAppPhaseChangeMessage=async e=>{e.phase!==o.nh.STARTING&&e.phase!==o.nh.PLAYING&&e.phase!==o.nh.ERROR||(this.progressUI.setDone(),this.config.quickstart?this.showQuickstartUI():this.uiRoot.classList.add("faded-out"),this.engine.unsubscribe(r.LZ,this.onAppPhaseChangeMessage))}}async init(e,t){this.engine=t,this.config=e,this.locale=await t.getModuleBySymbol(s.y.LOCALE),this.settings=await t.market.waitForData(b.e);const n=await t.market.waitForData(a.T);this.model=n.model.details,this.updateHtmlMetadata(n,this.settings),this.bindings.push(t.commandBinder.addBinding(StartApplicationCommand,(async e=>{this.resolvePlayPromise(e.startup,!0)})),t.commandBinder.addBinding(ExpandIframeCommand,(async e=>{this.toggleIframeExpansion(e.expand)}))),e.noUi||(this.bindings.push(this.settings.onPropertyChanged(v.DU,(()=>this.renderTitle())),this.settings.onPropertyChanged(v.L,(()=>this.renderBranding())),this.settings.onPropertyChanged(v.sX,(()=>this.renderBranding())),t.subscribe(r.LZ,this.onAppPhaseChangeMessage)),this.progressUI=new ProgressRadial(t),this.loadUi(),this.getLoadingElements(),this.renderSplashScreen())}get waitForPlaying(){return this.playPromise.nativePromise()}loadUi(){if(this.uiRoot=document.getElementById("loading-gui"),!this.uiRoot)throw Error("Loading GUI root not found");this.uiRoot.classList.remove("hidden"),this.config.quickstart&&(this.uiRoot.style.pointerEvents="none")}getPresentationOptions(){const{hideTitle:e,hideBranding:t,quickstart:n}=this.config,i=!n&&(void 0!==e?!e:this.settings.tryGetProperty(v.DU,!0)),s=this.settings.tryGetProperty(v.sX,!1),r=this.settings.tryGetProperty(v.L,!0);return{title:i,presentedBy:void 0!==t?!t:r&&!s}}getLoadingElements(){this.presentedBy=document.getElementById("loading-presented-by"),this.poweredBy=document.getElementById("loading-powered-by"),this.mpLogo=document.getElementById("loading-mp-logo"),this.mpLogo.src=p,this.mpLogo.alt=this.locale.t(l.Z.ALT_MATTERPORT_LOGO),this.circleLoader=document.getElementById("circleLoader"),this.nameHeader=document.getElementById("loading-header"),this.background=document.getElementById("loading-background"),this.tint=document.getElementById("tint"),this.playIcon=document.getElementById("showcase-play")}addCobrand(){var e;if(null===(e=this.model)||void 0===e?void 0:e.presentedBy){const e=this.presentedBy.querySelector(".loading-label");e&&(e.textContent=this.locale.t(l.Z.PRESENTED_BY_CAPS));const t=this.presentedBy.querySelector(".subheader");t&&(t.textContent=this.model.presentedBy),this.presentedBy.classList.remove("hidden")}}hidePlayButtonUI(){this.background.style.backgroundImage="none",this.presentedBy.style.transition="none",this.presentedBy.classList.remove("faded-in"),this.poweredBy.style.transition="none",this.poweredBy.classList.remove("faded-in"),this.nameHeader.classList.add("hidden"),this.tint.classList.add("hidden"),this.circleLoader.classList.add("hidden"),this.uiRoot.classList.add("quickstart")}async showQuickstartUI(){this.background.classList.add("faded-out"),await(0,u.gw)(500),this.presentedBy.style.transition="",this.presentedBy.classList.add("faded-in"),this.poweredBy.style.transition="",this.poweredBy.classList.add("faded-in"),await(0,u.gw)(2500),this.presentedBy.classList.remove("faded-in"),this.poweredBy.classList.remove("faded-in"),this.uiRoot.classList.add("faded-out")}showLoadingUI(e){const t=document.createAttribute("data-status");t.value=this.locale.t(l.Z.LOADING);const n=document.getElementById("loader-cont");n.attributes.setNamedItem(t),n.classList.add(this.locale.languageCode),n.classList.add("loading"),e.classList.add("faded-out"),this.presentedBy.classList.add("faded-in")}renderTitle(){const{title:e}=this.getPresentationOptions();this.nameHeader.classList.toggle("hidden",!e)}renderBranding(){const{presentedBy:e}=this.getPresentationOptions();e?this.addCobrand():this.presentedBy.classList.add("hidden")}renderSplashScreen(){this.renderTitle(),this.renderBranding(),this.config.hidePoweredBy&&this.poweredBy.classList.add("hidden"),this.nameHeader.textContent=this.model.name,this.poweredBy.classList.add("faded-in"),this.tint.classList.add("faded-in");const e=document.getElementById("play-prompt");this.playPromise.then((()=>{this.config.quickstart?this.hidePlayButtonUI():this.showLoadingUI(e)})),this.config.autoplay?(this.progressUI.showProgress(),this.playPromise.resolve()):(e.classList.remove("hidden"),e.innerText=this.locale.t(l.Z.EXPLORE_3D_SPACE),this.playIcon.classList.remove("hidden"),this.uiRoot.addEventListener("click",(()=>this.resolvePlayPromise(!0,!1)))),this.renderBackground(),this.config.allowPlayInIframe||window.scrollTo(0,0)}renderBackground(){const e=window.devicePixelRatio||1,t=Math.max(window.innerWidth,400);this.background.style.backgroundImage=`url(${this.config.baseUrl}/api/v1/player/models/${this.config.viewId}/thumb?width=${t}&dpr=${e}&disable=upscale)`}updateHtmlMetadata(e,t){const n=t.tryGetProperty(v.r4,null);if(e.hasDiscoverUrl()&&n){S("canonical",`${n}${e.model.sid}`)}}}},1390:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ShowcaseAnalytics});var i=n(57227),s=n(14877),r=n(90403),o=n(60661),a=n(42238),l=n(63408),c=n(2252),d=n(87100),u=n(83535);const h=e=>`${e}_3.0`,p=()=>{var e,t,n,i,s;const r=null!==(e=window.MP_PLATFORM_METADATA)&&void 0!==e?e:{};return{org_id:null!==(t=r.org_id)&&void 0!==t?t:"",pme:null!==(n=r.pme)&&void 0!==n&&n,client_id:null!==(i=r.client_id)&&void 0!==i?i:"",pme_session_id:null!==(s=r.pme_session_id)&&void 0!==s?s:""}},m=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}},g=()=>{const e=(new a.UAParser).getResult();let t=e.os.name,n=e.browser.name;const i=Object.assign({},e.device);return c._1()&&(t="iPadOS",i.vendor="Apple",i.model="iPad",i.type="tablet","Safari"===n&&(n="Mobile Safari")),{browser:{name:n,major:e.browser.major,version:e.browser.version,language:navigator.language||"",languages:navigator.languages?navigator.languages.join(", "):""},os:{name:t,version:e.os.version},device:{vendor:i.vendor,model:i.model,type:i.type}}};function f(e,t){return{app:{name:h(t),version:"3.1.75.3-0-gba9de22f6d"},locale:e,screen:{width:window.screen.width,height:window.screen.height,density:window.devicePixelRatio},timezone:m(),location:{}}}const v=o.K.Logging;var b=n(36742),y=n(59057);class InteractionmodeAnalytics{constructor(){this.handlers=[{msgType:b.m,func:(e,t,n)=>{const i=n.tryGetData(y.Z);i&&e.track("interaction_mode_changed",{interaction_mode_prev:t.fromMode,interaction_mode:t.mode,interaction_source:i.source})}}]}}var S=n(36589),E=n(50566);class AnnotationAnalytics{constructor(){this.handlers=[{msgType:E.iP,func:(e,t,n)=>{const{blockType:i}=t.block;if(i===S.C.TEXT)return;let s=t.block.text;i===S.C.LINK&&(s=t.block.value||""),i===S.C.USER&&(s=t.block.id||""),e.track("annotation_block_clicked",{block_type:i,block_value:s,annotation_type:t.annotationType,annotation_id:t.id})}}]}}var T,O=n(65171),_=n(38950),A=n(72699),w=n(94772);function N(e,t){switch(e){case w.z9.ALIGNED:return 1;case w.z9.UNALIGNED:return 2}switch(t){case w.hU.MANUAL:return 3}return 0}!function(e){e.USER="self-guided",e.TOUR="tour"}(T||(T={}));class CameraDataAnalytics{constructor(){this.startLoadTime=Date.now(),this.endLoadTime=Date.now(),this.panosViewed=0,this.handlers=[{msgType:O.Z,func:(e,t,n)=>{this.onMoveToSweepBegin(t.timestamp)}},{msgType:_.Z,func:(e,t,n)=>{const i=n.tryGetData(y.Z),s=n.tryGetData(A.k);this.endLoadTime=Date.now();const r=this.endLoadTime-this.startLoadTime;e.track("pano_viewed",{pano_id:t.toSweep,pano_view_count:++this.panosViewed,alignment_type:N(t.alignmentType,t.placementType),navigation_source:s&&s.tourPlaying?T.TOUR:T.USER,interaction_source:i?i.source:y.Z.defaultSource,interaction_mode:i?i.mode:y.Z.defaultMode,load_time:r/1e3})}}]}onMoveToSweepBegin(e){this.startLoadTime=e}}var P=n(50084);class ViewmodeAnalytics{constructor(){this.handlers=[{msgType:P.Z,func:(e,t,n)=>{const i=n.tryGetData(y.Z),s={view_mode:t.toMode};i&&(s.interaction_source=i.source,s.interaction_mode=i.mode),e.track("mode_changed",s)}}]}}var I=n(69098),k=n(32548),C=n(4117);class SweepFloorOverrideMessage extends C.v{constructor(e,t,n){super(),this.sweep=e,this.from=t,this.to=n}}var L=n(39823);const M=(e,t)=>{const n=t.tryGetData(L.i);if(!e||!n)return-1;return n.getFloor(e).index};class FloorChangeAnalytics{constructor(){this.handlers=[{msgType:k.P,func:(e,t,n)=>{const i=n.tryGetData(y.Z);e.track("floor_changed",{floor_id:t.floorName,interaction_source:i?i.source:y.Z.defaultSource,interaction_mode:i?i.mode:y.Z.defaultMode})}},{msgType:SweepFloorOverrideMessage,func:(e,t,n)=>{const i=n.tryGetData(y.Z);e.track("sweep_floor_fixup",{sweep_index:t.sweep.index,sweep_alignment:t.sweep.alignmentType,sweep_placement:t.sweep.placementType,sweep_floor_from:M(t.from,n),sweep_floor_to:M(t.to,n),interaction_source:i?i.source:y.Z.defaultSource,interaction_mode:i?i.mode:y.Z.defaultMode})}}]}}var D=n(49665),R=n(53549);class ZoomAnalytics{constructor(){this.firstZoom=!0,this.fromZoom=1,this.toZoom=1,this.handlers=[{msgType:D.Z,func:(e,t,n)=>{this.analytics||(this.analytics=e);const i=n.tryGetData(R.Z);i&&i.currentSweep!==this.currentPano&&(this.firstZoom=!0,this.currentPano=i.currentSweep,this.fromZoom=1),this.toZoom=t.zoomLevel,clearTimeout(this.sendTimeout),this.sendTimeout=window.setTimeout(this.trackZoomEvent.bind(this),150)}}]}trackZoomEvent(){const e=this.firstZoom?"initial":"followup";this.analytics.track("zoom_"+e,{from:this.fromZoom,to:this.toZoom,pano:this.currentPano}),this.firstZoom=!1,this.fromZoom=this.toZoom}}var x=n(41907),j=n(9986),U=n(35424);class TimingData extends U.V{constructor(){super(...arguments),this.name="timing",this.modelLoadingStartTime=0,this.waitingStartTime=0,this.appPlayingTime=0,this.appStartedTime=0}get totalTimeToAppStarting(){let e=this.appStartedTime-performance.timing.navigationStart;return this.modelLoadingStartTime&&this.waitingStartTime&&(e-=this.modelLoadingStartTime-this.waitingStartTime),e}get totalTimeToAppPlaying(){let e=this.appPlayingTime-performance.timing.navigationStart;return this.modelLoadingStartTime&&this.waitingStartTime&&(e-=this.modelLoadingStartTime-this.waitingStartTime),e}}var H=n(5477),F=n(8428),B=n(96557);const V=new H.Z("showcase-session"),G=new TimingData;class ShowcaseSessionAnalytics{constructor(e,t){this.analytics=e,this.engine=t,this.handlers=[{msgType:x.LZ,func:async(e,t,n)=>{var i,r;switch(t.phase){case j.nh.WAITING:G.waitingStartTime=Date.now(),G.commit(),e.track("impression",{url_params:c.UD(),visible:!0});break;case j.nh.LOADING:G.modelLoadingStartTime=Date.now(),G.commit();break;case j.nh.STARTING:{G.appStartedTime=Date.now(),G.commit(),V.info("First render, model loaded "+G.totalTimeToAppStarting/1e3);const t=this.engine.market.tryGetData(F.af);this.renderer=await this.engine.getModuleBySymbol(s.y.WEBGL_RENDERER);const n=this.renderer.getCapabilities(),i={has_hlr:!t||t.options.highlight_reel,duration:Date.now()-G.modelLoadingStartTime,duration_from_navigation_start:Date.now()-performance.timing.navigationStart,gl_v2:n.gl_v2,gl_max_textures:n.gl_max_textures,gl_max_texture_size:n.gl_max_texture_size,gl_max_cubemap_size:n.gl_max_cubemap_size,gl_instancing:n.gl_instancing,gl_oes_texture_float:n.gl_oes_texture_float,gl_oes_texture_half_float:n.gl_oes_texture_half_float,gl_depth_texture:n.gl_depth_texture,gl_draw_buffers:n.gl_draw_buffers,gl_oes_fbo_render_mip_map:n.gl_oes_fbo_render_mip_map,gl_shader_texture_lod:n.gl_shader_texture_lod,gl_oes_vertex_array_obj:n.gl_oes_vertex_array_obj,gl_ovr_multi_view:n.gl_ovr_multi_view,gl_color_buffer_float:n.gl_color_buffer_float,gl_astc_supported:n.gl_astc_supported,gl_etc1_supported:n.gl_etc1_supported,gl_etc2_supported:n.gl_etc2_supported,gl_dxt_supported:n.gl_dxt_supported,gl_bptc_supported:n.gl_bptc_supported,gl_pvrtc_supported:n.gl_pvrtc_supported};e.track("model_loaded",i);break}case j.nh.PLAYING:G.appPlayingTime=Date.now(),G.commit(),V.info("Playing, session started "+G.totalTimeToAppPlaying/1e3),e.track("session_started"),window.addEventListener("unload",this.sessionEnded),e.track("load_times",{time_to_app_start:G.totalTimeToAppStarting,time_to_app_playing:G.totalTimeToAppPlaying});break;case j.nh.ERROR:{const t=await n.waitForData(j.pu),{error:s}=t,o=s&&s.name?s.name:s&&s.constructor?s.constructor.name:null,a=s?s.message:null,l=s&&s.stack?s.stack.split("\n"):[],c=l.length>=2?l[1].match(/\s+at\s+([^\s]+)/):null,u=(0,B.zg)(s),h=!!(0,d.eY)("oops",""),p=null!==(r=null===(i=this.renderer)||void 0===i?void 0:i.estimatedGPUMemoryAllocated())&&void 0!==r?r:-1,m={error_dialog:"oops",error_type:o||"",exception:{message:`${o}: ${a}`,function:c?c[1]:null,stack:l.slice(1,5).join("\n")},duration:G.modelLoadingStartTime>0?Date.now()-G.modelLoadingStartTime:void 0,duration_from_navigation_start:Date.now()-performance.timing.navigationStart,gpu_memory:p<0?void 0:p,mock_error:h};u&&(m.error_code=u),e.track("error_displayed",m);break}}}}],this.sessionEnded=()=>{this.analytics.trackAsync("session_ended",{duration:Date.now()-G.appPlayingTime})}}dispose(){window.removeEventListener("unload",this.sessionEnded)}}var W=n(92214),z=n(81402),K=n(31117),Y=n(22878),q=n(37363),$=n(62029);const Z=new H.Z("/index.js");let Q,X=0,J=1/0,ee=null,te=null,ne=window.devicePixelRatio||1;const ie={},se=new K.P(1e3),re=new K.P(1e3);class RenderingPerformanceAnalytics{constructor(e){this.engine=e,this.handlers=[{msgType:W.Z,func:(e,t,n)=>{te!==j.nh.STARTING&&te!==j.nh.PLAYING||oe(e,Y.Ey[t.toMode],1e4)}},{msgType:x.LZ,func:async(e,t,n)=>{const i=n.tryGetData(q.O);t.phase===j.nh.LOADING?oe(e,"Loading",6e4):t.phase===j.nh.STARTING?(Q=await this.engine.getModuleBySymbol(s.y.WEBGL_RENDERER),oe(e,"Starting",6e4)):t.phase===j.nh.PLAYING&&i&&i.currentMode&&oe(e,Y.Ey[i.currentMode],1e4),te=t.phase}},{msgType:$.Vx,func:(e,t,n)=>{ne=t.pixelRatio}}]}}function oe(e,t,n){t!==ee&&(ee&&(le(e),ae()),ie[t]||(ee=t,J=n,ie[ee]=!0))}const ae=()=>{ee=null,se.clear(),re.clear(),X=0},le=e=>{const t=se.getList(),n=re.getList();if(0!==t.length)try{const i=ce(t,n);e.track("performance",i)}catch(e){Z.warn("Could not send performance metrics",e)}},ce=(e,t)=>{let n=0,i=0,s=0,r=0,o=0,a=0;for(const t of e)n+=t,t<0||(t<=16.7?i+=t:t<=33.3?s+=t:t<=100?r+=t:t<=1e3?o+=t:a+=t);if(n<=0)throw Error("No positive timings, cannot calculate performance data");const l=n/e.length;i/=n,s/=n,r/=n,o/=n,a/=n;let c=e.slice();const d=(0,z.Pe)(c,50),u=(0,z.Pe)(c,95,!1),h=c[c.length-1];let p,m,g,f,v;return t.length&&(c=t.slice(),f=(0,z.Pe)(c,50,!0),v=(0,z.Pe)(c,95,!1),g=Math.round((0,z.Y8)(t)),p=c[0],m=c[c.length-1]),{phase:ee,frame_delta:l,frame_delta_avg:l,frame_delta_median:d,frame_delta_95th:u,frame_delta_max:h,duration:n,time_60_fps:i,time_60_30_fps:s,time_30_10_fps:r,time_10_1_fps:o,time_1_0_fps:a,gpu_memory_min:p,gpu_memory_max:m,gpu_memory_avg:g,gpu_memory_median:f,gpu_memory_95th:v,pixel_ratio:ne}};var de=n(61903),ue=n(24133),he=n(56044);const pe=(e,t)=>{const n=t.tryGetData(he.c);if(!n)return-1;return(e?n.floors.getFloor(e):n.getHighestVisibleFloor()).index};class MeasurementAnalytics{constructor(){this.handlers=[{msgType:ue.rf,func:(e,t,n)=>{const i={measure_sid:t.data.sid,start_position:t.data.startPosition,end_position:t.data.endPosition,length:t.data.totalLength,segments:t.data.segments,temporary:t.data.temporary,viewmode:t.data.viewmode,floor:pe(t.data.floorId,n),feature_type:t.data.featureType,constraint_style:t.data.constraint,continuous:t.data.continuous};e.track("measure_segment_add",i)}},{msgType:ue.u6,func:(e,t,n)=>{const i={measure_sid:t.data.sid,length:t.data.totalLength,segments:t.data.segments,temporary:t.data.temporary,viewmode:t.data.viewmode,floor:pe(t.data.floorId,n),feature_type:t.data.featureType,measure_type:t.data.type,constraint_style:t.data.constraint,continuous:t.data.continuous};e.track("measure_add",i)}},{msgType:ue.ty,func:(e,t)=>{const n={measure_sid:t.sid,measure_text:t.text};e.track("measure_add_title",n)}},{msgType:ue.mM,func:(e,t)=>{const n={measure_sid:t.sid,measure_old_text:t.oldText,measure_new_text:t.newText};e.track("measure_update_title",n)}},{msgType:ue.$Z,func:(e,t,n)=>{const i={measure_sid:t.data.sid,length:t.data.totalLength,segments:t.data.segments,temporary:t.data.temporary,viewmode:t.data.viewmode,floor:pe(t.data.floorId,n),measure_count:t.data.count,continuous:t.data.continuous};e.track("measure_remove",i)}},{msgType:ue.av,func:(e,t,n)=>{const i={measure_sid:t.data.sid,length:t.data.totalLength,segments:t.data.segments,temporary:t.data.temporary,viewmode:t.data.viewmode,floor:pe(t.data.floorId,n),feature_type:t.data.featureType,constraint_style:t.data.constraint,continuous:t.data.continuous};e.track("measure_update",i)}},{msgType:ue.$n,func:(e,t)=>{const n=t.opened?"measure_mode_enter":"measure_mode_exit",i={viewmode:t.viewmode,measure_count:t.count};e.track(n,i)}},{msgType:ue.ff,func:(e,t)=>{e.track("measure_cancelled",{})}}]}}var me=n(58575);class ActivityAnalytics{constructor(){this.handlers=[{msgType:me.i,func:(e,t)=>{const n={duration_dollhouse:t.durationDollhouse,duration_floorplan:t.durationFloorplan,duration_inside:t.durationInside,duration:t.durationDollhouse+t.durationFloorplan+t.durationInside,main_mode:t.mainMode,bytes_downloaded:t.totalBytesDownloaded,tiles_downloaded:t.tilesDownloaded};e.track("activity_ping",n)}}]}}var ge,fe=n(3035),ve=n(76922),be=n(94113),ye=n(70399),Se=n(69054),Ee=n(12622),Te=n(41403);!function(e){e.UNINITIALIZED="uninitialized",e.INACTIVE="inactive",e.ACTIVE="active"}(ge||(ge={}));class ShowcaseActivityTracking{constructor(){this.name="activity-analytics",this._state=ge.UNINITIALIZED,this.activeModeMap=new Map,this.totalTilesDownloaded=0,this.onTileDownloaded=()=>{this.totalTilesDownloaded++}}async init(e,t,n){this.engine=e,this.requestQueue=n,[this.input,this.viewmodeData,this.applicationData]=await Promise.all([await e.getModuleBySymbol(s.y.INPUT),await e.market.waitForData(q.O),await e.market.waitForData(j.pu)]);const i=[],r=[fe.R,ve._t,be.e,ye.er,Se.G],o=()=>this.active=!0;this.applicationData.phase===j.nh.PLAYING?this._state=ge.INACTIVE:i.push(e.subscribe(x.LZ,(()=>{this.applicationData.phase===j.nh.PLAYING&&(this._state=ge.INACTIVE)}))),i.push(...(()=>{const e=[];return r.forEach((t=>{e.push(this.input.registerUnfilteredHandler(t,o))})),e})()),i.push(e.subscribe(P.Z,(e=>{const t=e.fromMode,n=e.toMode;t&&t!==Y.Ey.Transition&&this.applicationData.phase===j.nh.PLAYING&&this.handleModeChange(t,n)}))),i.push(this.engine.subscribe(Te.o,this.onTileDownloaded)),t(i)}get active(){return this._state===ge.ACTIVE}set active(e){this._state!==ge.UNINITIALIZED&&(e&&this._state===ge.INACTIVE&&this.startActivityTimeout(),this._state=e?ge.ACTIVE:ge.INACTIVE)}handleModeChange(e,t){this.activeModeMap.has(t)?this.updateActivityTimeForMode(t,!0):this.activeModeMap.set(t,{previousTime:Date.now(),totalTimeinMS:0}),this.updateActivityTimeForMode(e)}updateActivityTimeForMode(e,t){const n=this.activeModeMap.get(e);if(void 0===n)return;const{previousTime:i,totalTimeinMS:s}=n;t?this.activeModeMap.set(e,{previousTime:Date.now(),totalTimeinMS:s}):this.activeModeMap.set(e,{previousTime:Date.now(),totalTimeinMS:s+(Date.now()-i)})}startActivityTimeout(){this.activeModeMap.set(Y.Ey.Dollhouse,{previousTime:Date.now(),totalTimeinMS:0}),this.activeModeMap.set(Y.Ey.Floorplan,{previousTime:Date.now(),totalTimeinMS:0}),this.activeModeMap.set(Y.Ey.Panorama,{previousTime:Date.now(),totalTimeinMS:0}),window.setTimeout(this.notifyActivityAnalytic.bind(this),ShowcaseActivityTracking.ACTIVITY_INTERVAL)}notifyActivityAnalytic(){if(this.viewmodeData.currentMode&&this.viewmodeData.currentMode!==Y.Ey.Transition&&this.updateActivityTimeForMode(this.viewmodeData.currentMode),this.active){let e=0,t=Y.Ey.Panorama;this.activeModeMap.forEach(((n,i)=>{n.totalTimeinMS>e&&(t=i,e=n.totalTimeinMS)})),this.active=!1;const[n,i,s]=[this.activeModeMap.get(Y.Ey.Dollhouse),this.activeModeMap.get(Y.Ey.Floorplan),this.activeModeMap.get(Y.Ey.Panorama)].map((e=>e?e.totalTimeinMS:0));this.engine.broadcast(new me.i(n,i,s,Ee.KP[t],this.requestQueue.totalBytesDownloaded,this.totalTilesDownloaded))}}}ShowcaseActivityTracking.ACTIVITY_INTERVAL=15e3;var Oe,_e=n(38182);!function(e){e.USER="self-guided",e.TOUR="tour"}(Oe||(Oe={}));class RoomDataAnalytics{constructor(){this.handlers=[{msgType:_e.D,func:(e,t,n)=>{const i=n.tryGetData(y.Z),s=n.tryGetData(A.k),r={room_id:t.roomId,room_index:t.meshSubgroup,room_type:t.roomType,viewmode:t.viewmode?Ee.KP[t.viewmode]:t.viewmode,room_visit_count:t.visitCount,room_count:t.roomCount,navigation_source:s&&s.tourPlaying?Oe.TOUR:Oe.USER,interaction_source:i?i.source:y.Z.defaultSource,interaction_mode:i?i.mode:y.Z.defaultMode};e.track("room_visited",r)}}]}}var Ae=n(98142);class ShowcaseLabelAnalytics{constructor(){this.handlers=[{msgType:Ae.V,func:(e,t,n)=>{e.track("internal_warning",{warningType:"rtl_disabled_roomnav"})}}]}}var we=n(19582);const Ne=e=>e.sort(((e,t)=>e.localeCompare(t)));class ModelRatingAnalytics{constructor(){this.handlers=[{msgType:we.E,func:(e,t)=>{const{happiness:n,quality:i,navigation:s,feedback:r}=t.rating,o={};n&&(o.happiness=+n),(s&&s.length>0||i&&i.length>0)&&(o.issue_types=function(e=[],t=[]){const n=[];return Ne(t).forEach((e=>n.push(`navigation-${e.trim()}`))),Ne(e).forEach((e=>n.push(`quality-${e.trim()}`))),n.join(",")}(i||[],s||[])),r&&r.length>0&&(o.feedback=r),Object.keys(o).length>0&&e.track("model_rated",o)}}]}}class ShowcaseAnalytics extends i.Y{constructor(){super(...arguments),this.name="showcase-analytics",this.loaded=!1,this.handlers=[],this.track=(e,t)=>{this.analytics.track(e,t)}}async init(e,t){this.analytics=await t.getModuleBySymbol(s.y.ANALYTICS),this.apiClient=(await t.getModuleBySymbol(s.y.API)).getApi();const n=await t.market.waitForData(de.e),i=await t.getModuleBySymbol(s.y.LOCALE);this.addMessageHandlers(this.analytics,t),this.context=function(e,t,n){const i=f(t,n);return(0,l.Z)(e).then((e=>{i.location={city:e.city,country:e.country_name,region:e.region}})),i}(e.apiQueue,i.languageCode,e.appName),this.options=Object.assign({mds_enabled:!0},{model_id:(0,d.eY)("model")||(0,d.eY)("m")||"",start_source:(0,d.eY)("play",!1)?"autoplay":c.yL()?"click":"fullpage",autoplay:(0,d.eY)("play",!1)||!c.yL(),quickstart:1===(0,d.eY)("qust",0)||1===(0,d.eY)("qs",0),language_tag:(0,d.eY)("lang",null),is_mobile:c.tq(),iframe:c.yL(),aspect_ratio:c.dy(),session_id:(0,u.D)(),window:{height:window.innerHeight,width:window.innerWidth},platform:g(),pme:p()}),this.activityTracking=new ShowcaseActivityTracking,this.activityTracking.init(t,this.registerBindings.bind(this),e.apiQueue);const r=await this.createAnalyticsConfigs(e,n);this.analytics.load(r,e.analyticsQueue,this.options,this.context,this.apiClient.user).then((()=>{this.loaded=!0}))}addMessageHandlers(e,t){this.addMessageHandler(new ShowcaseSessionAnalytics(e,t),t),this.addMessageHandler(new ViewmodeAnalytics,t),this.addMessageHandler(new CameraDataAnalytics,t),this.addMessageHandler(new InteractionmodeAnalytics,t),this.addMessageHandler(new FloorChangeAnalytics,t),this.addMessageHandler(new I.s,t),this.addMessageHandler(new ZoomAnalytics,t),this.addMessageHandler(new MeasurementAnalytics,t),this.addMessageHandler(new RenderingPerformanceAnalytics(t),t),this.addMessageHandler(new ActivityAnalytics,t),this.addMessageHandler(new RoomDataAnalytics,t),this.addMessageHandler(new ShowcaseLabelAnalytics,t),this.addMessageHandler(new ModelRatingAnalytics,t),this.addMessageHandler(new AnnotationAnalytics,t)}addMessageHandler(e,t){this.handlers.push(e),e.handlers.forEach(((e,n)=>{this.bindings.push(t.subscribe(e.msgType,(n=>{e.func(this.analytics,n,t.market)})))}))}registerBindings(e){this.bindings.push(...e)}async createAnalyticsConfig(e,t){if(((e,t)=>{const n=Object.keys(e);for(const i of n)if(e[i]===t)return!0;return!1})(o.K,e)){const{apiClient:n}=this,i=r.H[e],s=null!==i.key?await n.getAppKey(t,i.key):null,o=null!==i.url?await n.getAppKey(t,i.url):null;if(null===i.key||null!==s&&null===i.url||null!==o)return{provider:e,token:s,url:o}}return null}async createAnalyticsConfigs(e,t){const n=e.appName,i=void 0!==e.provider?e.provider:await this.apiClient.getAppKey(n,"analytics_provider"),s=[];if(!i)return s;const r=i.split(",");for(const e of r){const t=await this.createAnalyticsConfig(e,n);null!==t?s.push(t):this.log.warn(`Failed to set up ${e}, token/url required but not found in config`)}return s.length<1&&s.push({provider:v,token:null,url:null}),s}onUpdate(e){this.loaded&&((e,t)=>{var n;if(!ee)return;se.push(t);const i=null!==(n=null==Q?void 0:Q.estimatedGPUMemoryAllocated())&&void 0!==n?n:-1;i>-1&&re.push(i),X+=t,X>=J&&(le(e),ae())})(this.analytics,e)}dispose(e){super.dispose(e);for(const e of this.handlers)e.dispose&&e.dispose();this.handlers=[]}getSessionId(){return this.options.session_id||""}trackGuiEvent(e,t={}){const{tool:n,interactionSource:i,panoId:s}=t,r={gui_action:e};n&&Object.assign(r,{tool:n}),i&&Object.assign(r,{interaction_source:i}),s&&Object.assign(r,{pano_id:s}),this.track("showcase_gui",r)}trackToolGuiEvent(e,t,n={}){this.trackGuiEvent(t,Object.assign({tool:e},n))}}},58575:(e,t,n)=>{"use strict";n.d(t,{i:()=>ActivityPingMessage});var i=n(4117);class ActivityPingMessage extends i.v{constructor(e,t,n,i,s,r){super(),this.durationDollhouse=e,this.durationFloorplan=t,this.durationInside=n,this.mainMode=i,this.totalBytesDownloaded=s,this.tilesDownloaded=r}}},22299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ShowcasePasswordModule});var i=n(14877),s=n(67294),r=n(20745),o=n(57227),a=n(95430),l=n(93487),c=n(85893),d=n(94184),u=n.n(d),h=n(10854),p=n(60405),m=n(90831);class PoweredBy extends s.Component{render(){const{attributionLinkText:e,attributionLinkUrl:t}=this.props,{locale:n}=this.context;return(0,c.jsxs)("div",Object.assign({className:"powered-by"},{children:[(0,c.jsx)("p",Object.assign({className:"powered-by-label"},{children:n.t(h.Z.POWERED_BY)})),(0,c.jsx)("img",{className:"powered-by-logo",alt:"Matterport",src:m,width:"150",height:"32"}),t&&(0,c.jsx)("a",Object.assign({href:t,className:"powered-by-link"},{children:e||t}))]}))}}PoweredBy.contextType=p.I;var g=n(5477),f=n(24877),v=n(40603);class InvalidPasswordException extends v.y{constructor(e="Invalid password"){super(e),this.name="InvalidPassword"}}class TooManyAttemptsException extends v.y{constructor(e="Too many attempts, please try again in a few minutes"){super(e),this.name="TooManyAttempts"}}const b=new g.Z("showcase-password");class ShowcasePasswordUi extends s.Component{constructor(e){super(e),this.isUnmounting=!1,this.onInputChange=e=>{const{name:t,value:n}=e.target;"password"===t&&this.setState({password:n,hasError:!1})},this.onSubmit=async e=>{e.preventDefault(),this.setState({formEnabled:!1}),await this.authenticate(),this.isUnmounting||this.setState({formEnabled:!0})},this.state={formEnabled:!0,hasError:!1,tooManyAttempts:!1,password:""}}componentWillUnmount(){this.isUnmounting=!0}async authenticate(){const{authenticate:e}=this.props,{password:t}=this.state;b.debug("Validating password input...");const n=await e(t).catch((e=>(e instanceof TooManyAttemptsException&&this.setState({hasError:!0,tooManyAttempts:!0}),!1)));this.isUnmounting||this.setState({hasError:!n})}stopPropagation(e){e.stopPropagation()}renderLockout(){const{locale:e}=this.context;return(0,c.jsxs)("div",Object.assign({className:"sc-password-modal sc-password-lockout"},{children:[(0,c.jsx)("header",Object.assign({className:"modal-header"},{children:(0,c.jsx)("h1",Object.assign({className:"modal-title"},{children:e.t(h.Z.SC_LOCKOUT_TITLE)}))})),(0,c.jsx)("p",Object.assign({className:"modal-body"},{children:e.t(h.Z.SC_LOCKOUT_MESSAGE)}))]}))}renderLoginForm(){const{hasError:e,password:t,formEnabled:n}=this.state,{locale:i}=this.context;return(0,c.jsxs)("div",Object.assign({className:"sc-password-modal sc-password-login"},{children:[(0,c.jsx)("header",Object.assign({className:"modal-header"},{children:(0,c.jsx)("h1",Object.assign({className:"modal-title"},{children:i.t(h.Z.SC_PASSWORD_TITLE)}))})),(0,c.jsxs)("div",Object.assign({className:"modal-body"},{children:[(0,c.jsxs)("form",Object.assign({onSubmit:this.onSubmit,className:"sc-password-form"},{children:[(0,c.jsx)("input",{type:"password",name:"password",placeholder:i.t(h.Z.SC_PASSWORD_PLACEHOLDER),onInput:this.onInputChange,onKeyDown:this.stopPropagation,onKeyPress:this.stopPropagation,onKeyUp:this.stopPropagation,disabled:!n,value:t,className:u()("sc-password-input",{error:e}),autoComplete:"on"}),(0,c.jsx)("button",Object.assign({type:"submit",disabled:!n,className:"sc-password-submit"},{children:i.t(h.Z.SC_PASSWORD_SUBMIT)}))]})),e&&(0,c.jsxs)("p",Object.assign({className:"help-text error"},{children:[(0,c.jsx)("span",{className:"icon icon-error"}),i.t(h.Z.SC_PASSWORD_INVALID)]})),!e&&(0,c.jsx)("p",{className:"help-text"})]}))]}))}render(){const{hasError:e,tooManyAttempts:t}=this.state,n=e&&t?this.renderLockout():this.renderLoginForm();return(0,c.jsxs)("div",Object.assign({className:"sc-password-ui",style:{backgroundImage:`url(${f})`}},{children:[(0,c.jsx)("div",Object.assign({className:"sc-password-content"},{children:n})),(0,c.jsx)("footer",Object.assign({className:"sc-password-footer"},{children:(0,c.jsx)(PoweredBy,{})}))]}))}}ShowcasePasswordUi.contextType=p.I;var y=n(81637),S=n(29991);class ShowcasePasswordModule extends o.Y{constructor(){super(...arguments),this.name="showcase-password",this.authenticated=!1}async init(e,t){this.config=e,this.engine=t;const n=e.baseUrl||window.location.origin;this.auth=new a.L(n)}showPasswordScreen(){this.loadUi()}hidePasswordScreen(){this.unloadUi()}async loadUi(){const{container:e}=this.config,t=await this.engine.getModuleBySymbol(i.y.LOCALE),n=Object.assign(Object.assign({},S.O),{locale:t});this.reactContainer=document.createElement("div"),this.reactContainer.id="showcase-password-container",e.appendChild(this.reactContainer),this.reactRoot=(0,r.s)(this.reactContainer),this.reactRoot.render((0,s.createElement)(p.I.Provider,{value:n},[(0,s.createElement)(ShowcasePasswordUi,{key:"showcase-password",authenticate:e=>this.authenticate(e)})]))}async unloadUi(){var e;return!!this.reactRoot&&(this.reactRoot.unmount(),null===(e=this.reactContainer)||void 0===e||e.remove(),delete this.reactContainer,!0)}async authenticate(e){const{modelId:t}=this.config;if(!await this.auth.authenticate(t,e)){switch(this.engine.broadcast(new y.s(this.auth.errorType)),this.auth.errorType){case l.s.INVALID_CREDENTIALS:throw new InvalidPasswordException;case l.s.TOO_MANY_ATTEMPTS:throw new TooManyAttemptsException}return!1}return this.log.debug("Password authentication was successful"),this.engine.broadcast(new y.L),!0}}},81637:(e,t,n)=>{"use strict";n.d(t,{L:()=>PasswordAuthenticationSuccess,s:()=>PasswordAuthenticationFail});var i=n(4117);class PasswordAuthenticationSuccess extends i.v{}class PasswordAuthenticationFail extends i.v{constructor(e){super(),this.errorType=e}}},76482:(e,t,n)=>{"use strict";n.d(t,{b:()=>FlyInCommand,Q:()=>GotoStartLocationCommand});var i=n(93037);class FlyInCommand extends i.m{constructor(e){super(),this.payload={pose:e}}}FlyInCommand.id="START_LOCATION_FLY_IN_COMMAND";class GotoStartLocationCommand extends i.m{}GotoStartLocationCommand.id="START_LOCATION_GOTO_COMMAND"},21284:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ShowcaseWebGLContextLoss});var i=n(57227),s=n(14877),r=n(62029),o=n(40529);class ShowcaseWebGLContextLoss extends i.Y{constructor(){super(...arguments),this.name="showcase-webgl-context-loss",this.contextLostEvent=null,this.framesWithLostContext=0}async init(e,t){this.config=e,this.engine=t,this.bindings.push(t.subscribe(r.zq,(e=>{this.contextLostEvent=e.event})),t.subscribe(r.Xq,(()=>{this.contextLostEvent=null,this.framesWithLostContext=0,t.getModuleBySymbol(s.y.ERROR_UI).then((e=>{e.currentErrorType===o.ErrorType.WEBGL_CONTEXT_LOST&&e.hideError()}))})))}onUpdate(e){const{contextLostEvent:t}=this;if(t){++this.framesWithLostContext===this.config.notificationDelayFrames&&(this.engine.getModuleBySymbol(s.y.ERROR_UI).then((e=>{e.currentErrorType||e.showError(o.ErrorType.WEBGL_CONTEXT_LOST)})),this.engine.getModuleBySymbol(s.y.ANALYTICS).then((e=>{!function(e,t){e.track("error_displayed",{error_dialog:"oops",error_type:"WebGLContextLost",exception:{message:`WebGL context lost: ${t.statusMessage||"no status given"}`},mock_error:!1})}(e,t)})))}}}},95703:(e,t,n)=>{"use strict";n.d(t,{M:()=>Matrix});var i=n(84428);class ROMatrix{constructor(e){this.elements=[],e?(e=>void 0!==e.elements)(e)?this.elements=e.elements.slice():i.Matrix4.prototype.set.apply(this,e):i.Matrix4.prototype.set.apply(this,ROMatrix.identity)}equals(e){return i.Matrix4.prototype.equals.call(this,e)}clone(){return new ROMatrix(this)}}ROMatrix.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class Matrix extends ROMatrix{constructor(e){e instanceof Array||e?super(e):super(),this.threeMatrix=new i.Matrix4}set(e,t,n,s,r,o,a,l,c,d,u,h,p,m,g,f){return i.Matrix4.prototype.set.call(this,e,t,n,s,r,o,a,l,c,d,u,h,p,m,g,f),this}makeScale(e,t,n){return i.Matrix4.prototype.makeScale.call(this,e,t,n),this}copy(e){for(let t=0;t<this.elements.length;t++)this.elements[t]=e.elements[t];return this}clone(){return(new Matrix).copy(this)}transpose(){return i.Matrix4.prototype.transpose.call(this)}lookAt(e,t,n){return i.Matrix4.prototype.lookAt.call(this,e,t,n),this}setPosition(e){return i.Matrix4.prototype.setPosition.call(this,e.x,e.y,e.z),this}extractRotation(e){return i.Matrix4.prototype.extractRotation.call(this,e),this}makePerspective(e,t,n,s,r,o){return i.Matrix4.prototype.makePerspective.call(this,e,t,n,s,r,o),this}makePerspectiveFov(e,t,n=.1,s=1e3){const r=n*Math.tan(e*(Math.PI/180)/2),o=-r,a=r*t,l=-a;return i.Matrix4.prototype.makePerspective.call(this,l,a,r,o,n,s),this}makeOrthographic(e,t,n,s,r,o){return i.Matrix4.prototype.makeOrthographic.call(this,e,t,n,s,r,o),this}identity(){return this.set.apply(this,ROMatrix.identity)}makeRotationFromQuaternion(e){return i.Matrix4.prototype.makeRotationFromQuaternion.call(this,e),this}makeRotationFromEuler(e){return i.Matrix4.prototype.makeRotationFromEuler.call(this,e),this}getInverse(e){return i.Matrix4.prototype.copy.call(this,e),i.Matrix4.prototype.invert.call(this),this}premultiply(e){return i.Matrix4.prototype.premultiply.call(this,e),this}multiplyMatrices(e,t){return i.Matrix4.prototype.multiplyMatrices.call(this,e,t),this}scale(e){return i.Matrix4.prototype.scale.call(this,e),this}compose(e,t,n){return i.Matrix4.prototype.compose.call(this,e,t,n),this}asThreeMatrix4(){return this.threeMatrix.set(this.elements[0],this.elements[4],this.elements[8],this.elements[12],this.elements[1],this.elements[5],this.elements[9],this.elements[13],this.elements[2],this.elements[6],this.elements[10],this.elements[14],this.elements[3],this.elements[7],this.elements[11],this.elements[15])}}},85111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({signedUrlDefaultExpireTime:24e4,signedUrlCheckInterval:1e4,signedUrlRefreshBuffer:15e3,visionTilingStartDate:new Date("8/26/2016"),visionTilingStartVersion:"1.1.407.13667",epsilon:1e-5,skyboxMeshGroup:"_group_skybox_",skysphereMeshGroup:"_group_skysphere_"})},93037:(e,t,n)=>{"use strict";n.d(t,{m:()=>Command});class Command{}},64177:(e,t,n)=>{"use strict";n.d(t,{B:()=>CommandBinder});var i=n(15697),s=n(31013);const r=new(n(5477).Z)("command-binder");class CommandBinder{constructor(){this.typeLookup=new i.cj,this.bindings={},this.queuedCommands={},this.hookedCommands={},this.resetHooks=()=>{this.hookedCommands={}},this.issueCommand=this.issueCommand.bind(this),this.issueCommandWhenBound=this.issueCommandWhenBound.bind(this)}addBinding(e,t){const n=this.typeLookup.getKeyByType(e,!0);if(this.bindings[n])throw Error(`Command ${n} already bound to a callback`);this.bindings[n]=t,this.callQueuedCommands(n);return{renew:()=>{this.bindings[n]!==t&&this.addBinding(e,t)},cancel:()=>this.removeBinding(e,t),active:this.bindings[n]===t}}removeBinding(e,t){const n=this.typeLookup.getKeyByType(e);if(!n)return void r.debug("Trying to unbind unbound command");this.bindings[n]===t?delete this.bindings[n]:r.debug("Trying to unbind unbound callback")}issueCommand(e,t=!0){const n=this.typeLookup.getKeyByInstance(e),i=this.bindings[n];return i?this.issueCommandHelper(e,n,i,t):Promise.reject("Command not bound: "+e.id)}issueCommandHelper(e,t,n,i=!0){return this.hookedCommands[t]&&!this.hookedCommands[t].resolving?this.issueHookCommand(e,t):n(e.payload)}issueCommandWhenBound(e){const t=new s.Q;return this.issueCommand(e).then((e=>t.resolve(e))).catch((n=>{const i=this.typeLookup.getKeyByInstance(e,!0);this.queuedCommands[i]||(this.queuedCommands[i]=[]),this.queuedCommands[i].push({command:e,deferred:t})})),t.nativePromise()}callQueuedCommands(e){const t=[];this.queuedCommands[e]&&(this.queuedCommands[e].forEach((e=>{t.push(this.issueCommand(e.command).then((t=>e.deferred.resolve(t))))})),Promise.all(t).then((()=>{delete this.queuedCommands[e]})))}hookCommand(e,t,n){const i=this.typeLookup.getKeyByType(e,!0);if(this.hookedCommands[i]){if(t&&null!==this.hookedCommands[i].preCommandCallback)throw Error(`Command ${e.name} has already been pre hooked`);if(!t&&null!==this.hookedCommands[i].postCommandCallback)throw Error(`Command ${e.name} has already been post hooked`)}else this.hookedCommands[i]={preCommandCallback:null,postCommandCallback:null,resolving:!1};t?this.hookedCommands[i].preCommandCallback=n:this.hookedCommands[i].postCommandCallback=n}async issueHookCommand(e,t){const n=this.hookedCommands[t],i=this.bindings[t],s=e.payload,r=n.preCommandCallback,o=n.postCommandCallback;try{r&&await r(s),n.resolving=!0;const a=await this.issueCommandHelper(e,t,i,!0);return n.resolving=!1,o&&await o(s),a}catch(e){throw Error(`Could not completely issueHookCommand - ${e}`)}}}},35424:(e,t,n)=>{"use strict";n.d(t,{V:()=>Data});var i=n(98254);class Data extends i.T{}},37008:(e,t,n)=>{"use strict";var i,s;n.d(t,{p3:()=>i,Jj:()=>NullGeneratorResult,M8:()=>WaitForPromiseGeneratorResult,ZP:()=>EngineGenerators}),function(e){e[e.None=0]="None",e[e.Duration=1]="Duration",e[e.Phase=2]="Phase",e[e.Promise=3]="Promise"}(i||(i={}));class EngineGeneratorResult{constructor(e){this.type=e}}class NullGeneratorResult extends EngineGeneratorResult{constructor(){super(i.None)}}class WaitDurationGeneratorResult extends EngineGeneratorResult{constructor(e){super(i.Duration),this.duration=e,this.startTime=Date.now()}}class WaitForPhaseGeneratorResult extends EngineGeneratorResult{constructor(e){super(i.Phase),this.phase=e}}!function(e){e[e.Pending=0]="Pending",e[e.Fulfilled=1]="Fulfilled",e[e.Rejected=2]="Rejected"}(s||(s={}));class WaitForPromiseGeneratorResult extends EngineGeneratorResult{constructor(e){super(i.Promise),this.promise=e,this.promiseState=s.Pending,e.then((()=>{this.promiseState=s.Fulfilled})).catch((()=>{this.promiseState=s.Rejected}))}}class EngineGenerator{constructor(e,t=!0){this.generator=e,t&&this.start()}start(){this.started||(this.iterator=this.generator()),this.started=!0}iterate(){const e=this.iterator.next();this.currentResult=e.value,e.done&&(this.started=!1)}}class EngineGenerators{constructor(){this.generators=[]}startGenerator(e){let t=this.generators.length;for(let n=0;n<this.generators.length;n++){this.generators[n].generator===e&&(t=n)}this.generators[t]=new EngineGenerator(e)}stopGenerator(e){for(const t of this.generators)t.generator===e&&(t.started=!1)}processGenerators(e,t){for(const n of this.generators)if(n.started)switch(e){case i.None:(!n.currentResult||n.currentResult instanceof NullGeneratorResult)&&n.iterate();break;case i.Phase:if(n.currentResult instanceof WaitForPhaseGeneratorResult){const e=n.currentResult;void 0!==t&&e.phase===t&&n.iterate()}break;case i.Promise:if(n.currentResult instanceof WaitForPromiseGeneratorResult){n.currentResult.promiseState===s.Fulfilled&&n.iterate()}break;case i.Duration:if(n.currentResult instanceof WaitDurationGeneratorResult){const e=n.currentResult;Date.now()-e.startTime>=e.duration&&n.iterate()}}}}},4117:(e,t,n)=>{"use strict";n.d(t,{v:()=>Message});class Message{constructor(){this.msgId=-1}setID(e){if(-1!==this.msgId)throw Error("Message.msgId can only be set once.");this.msgId=e}}},79013:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a,Y:()=>MessageBus});var i=n(15697),s=n(5477),r=n(91183);const o=new s.Z("message-bus");var a;!function(e){e[e.PERMANENT=0]="PERMANENT",e[e.ONCE=1]="ONCE"}(a||(a={}));class MessageBus{constructor(){this.typeLookup=new i.cj,this.callbacks={},this.messageQueue=[],this.messageCount=0}subscribe(e,t,n=a.PERMANENT){return(0,r.k1)((()=>this._subscribe(e,t,n)),(()=>this.unsubscribe(e,t)),!0,(0,i.HS)(e))}_subscribe(e,t,n=a.PERMANENT){const i=this.typeLookup.getKeyByType(e,!0);this.callbacks[i]||(this.callbacks[i]=[]),this.callbacks[i].push({type:n,callback:t})}unsubscribe(e,t){const n=this.typeLookup.getKeyByType(e);n?this.unsubscribeByIndex(n,t):o.debug(`Message callback not bound for Type: ${e.name}`)}unsubscribeByIndex(e,t){const n=this.callbacks[e].findIndex((e=>e.callback===t));-1!==n?this.callbacks[e].splice(n,1):o.debug(`Message callback not bound for TypeIndex: ${e}`)}broadcast(e){if(e.setID(this.messageCount++),this.messageQueue.push(e),1===this.messageQueue.length){for(const e of this.messageQueue){const t=this.typeLookup.getKeyByInstance(e);if(!t)continue;const n=this.callbacks[t].slice();for(const i of n)i.callback(e),i.type===a.ONCE&&this.unsubscribeByIndex(t,i.callback)}this.messageQueue=[]}}}},57227:(e,t,n)=>{"use strict";n.d(t,{Y:()=>Module});var i=n(5477);class Module{constructor(){this.bindings=[]}init(e,t){return Promise.resolve()}onUpdate(e){}dispose(e){for(const e of this.bindings)null==e||e.cancel();this.bindings=[]}get log(){return this._logger||(this._logger=new i.Z(this.name||"module")),this._logger}}},33299:(e,t,n)=>{"use strict";n.d(t,{o:()=>RenderLayers});class RenderLayer{constructor(e){this._mask=e}get mask(){return this._mask}addLayers(e){this._mask|=e.mask}removeLayers(e){return this._mask&=~e.mask}clone(){return new RenderLayer(this._mask)}}class RenderLayers{constructor(){this.layerRegistry=[],this.unusedLayers=[];for(let e=1;e<32;e++)this.unusedLayers.push(e)}static get ALL(){return new RenderLayer(-1)}static get NONE(){return new RenderLayer(0)}static get DEFAULT(){return new RenderLayer(1)}claimLayer(e){const t=this.getLayer(e);if(t.mask)return t;if(0===this.unusedLayers.length)throw Error("All render layers have already been claimed");const n=this.unusedLayers[0];return this.layerRegistry[n]=e,this.unusedLayers.shift(),new RenderLayer(1<<n)}getLayer(e){const t=this.layerRegistry.indexOf(e);return-1!==t?new RenderLayer(1<<t):RenderLayers.NONE}disposeLayer(e){const t=this.layerRegistry.indexOf(e);-1!==t&&this.unusedLayers.push(t)}}},15697:(e,t,n)=>{"use strict";n.d(t,{z$:()=>i,oL:()=>s,HS:()=>r,cj:()=>TypeLookup});const i=e=>e.prototype.constructor.name,s=e=>e.constructor,r=e=>{if("string"==typeof e)return e;if(e&&e.name)return e.name;const t=e.toString();return t.substring(0,t.indexOf("\n")).split(" ")[1]};class TypeLookup{constructor(){this.typeLookupMap={}}getKey(e){return"string"==typeof e?e:e.name}addType(e){if(!e)throw Error("Cannot index undefined type");const t=this.getKey(e);if(this.typeLookupMap[t])throw Error(`Type ${t} already registered`);return this.typeLookupMap[t]=e,t}getKeyByType(e,t){if(!e)throw Error("Cannot index undefined type");const n=this.getKey(e);let i=this.typeLookupMap[n];return!i&&t&&(i=e,this.addType(i)),i?n:""}getKeyByInstance(e,t){if(!e)throw Error("Cannot index undefined data");const n=e.constructor.name;let i=this.typeLookupMap[n];return!i&&t&&(i=e.constructor,this.addType(i)),i?n:""}getTypeByKey(e){const t=this.typeLookupMap[e];if(!t)throw Error("Key not found");if("string"==typeof t)throw Error("non type keyed result not supported");return t}getKnownTypes(){return Object.values(this.typeLookupMap)}}},70446:(e,t,n)=>{"use strict";var i;n.d(t,{A:()=>i}),function(e){e[e.Begin=0]="Begin",e[e.Logic=1]="Logic",e[e.Render=2]="Render",e[e.End=3]="End"}(i||(i={}))},80051:(e,t,n)=>{"use strict";n.d(t,{k:()=>PlayerMovedMessage});var i=n(4117);class PlayerMovedMessage extends i.v{constructor(e,t){super(),this.x=e,this.y=t}}},20725:(e,t,n)=>{"use strict";n.d(t,{a:()=>PlayerResizedMessage});var i=n(4117);class PlayerResizedMessage extends i.v{constructor(e,t){super(),this.width=e,this.height=t}}},9986:(e,t,n)=>{"use strict";n.d(t,{nh:()=>i,Mx:()=>s,pu:()=>ApplicationData});var i,s,r=n(35424),o=n(36013),a=n(31013);!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.WAITING=1]="WAITING",e[e.LOADING=2]="LOADING",e[e.STARTING=3]="STARTING",e[e.PLAYING=4]="PLAYING",e[e.ERROR=5]="ERROR"}(i||(i={})),function(e){e.UNKNOWN="unknown",e.WEBVR="webvr",e.SHOWCASE="showcase",e.WORKSHOP="workshop"}(s||(s={}));class ApplicationData extends r.V{constructor(e,t=s.UNKNOWN){super(),this.name="app",this.phases=i,this.playingPromise=new a.Q,this.phase=e,this.application=t,this.phaseTimes=(0,o.$)({[i.UNINITIALIZED]:0,[i.WAITING]:0,[i.LOADING]:0,[i.STARTING]:0,[i.PLAYING]:0,[i.ERROR]:0}),this.error=null,this.onPhase((()=>{this.playingPromise.resolve()}),i.PLAYING)}getName(){return this.application.toString()}getVersion(){return"3.1.75.3-0-gba9de22f6d"}onPhase(e,t){return this.onPropertyChanged("phase",(n=>{t&&n!==t||e()}))}get waitForPlaying(){return this.playingPromise.nativePromise()}toString(){return JSON.stringify({application:this.getName(),version:this.getVersion(),error:this.error,phaseTimes:this.phaseTimes})}}},87278:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>AppPhaseModule});var i=n(57227),s=n(9986),r=n(41907),o=n(93287),a=n(74372);class AppPhaseModule extends i.Y{constructor(){super(...arguments),this.name="app-phase"}async init(e,t){this.market=t.market,this.broadcast=t.broadcast.bind(t),this.tasks=e.tasks,this.appState=new s.pu(s.nh.UNINITIALIZED),this.appState.phase=s.nh.UNINITIALIZED,this.appState.phaseTimes[s.nh.UNINITIALIZED]=Date.now(),this.appState.application=s.Mx.SHOWCASE,this.market.register(this,s.pu,this.appState),this.watchTasks(this.appState.phase),this.watchErrors(),this.updateAppHeaders(),this.bindings.push(this.appState.onPropertyChanged("application",(()=>this.updateAppHeaders())))}async watchTasks(e){if(e>=s.nh.PLAYING)return;const t=e+1;try{await Promise.all(this.tasks[t])}catch(e){this.error(e)}t===s.nh.PLAYING&&this.broadcast(new r.pB(this.appState.application)),this.appState.phase!==s.nh.ERROR&&e!==s.nh.ERROR&&(this.updateCurrentPhase(t),this.watchTasks(t))}async watchErrors(){try{await Promise.all(this.tasks[s.nh.ERROR])}catch(e){this.error(e)}}updateCurrentPhase(e){this.appState.phase=e,this.appState.phaseTimes[e]=Date.now(),this.log.info(this.appState.toString()),this.appState.commit(),this.broadcast(new r.LZ(e))}error(e){this.appState.error=e,this.updateCurrentPhase(s.nh.ERROR)}updateActiveApp(e){this.appState.application=e,this.appState.commit(),this.broadcast(new r.bS(e))}getData(){return this.appState}updateAppHeaders(){(0,o.l)(this.appState.getName()),(0,a.t)(this.appState.getVersion())}}},41907:(e,t,n)=>{"use strict";n.d(t,{LZ:()=>AppPhaseChangeMessage,bS:()=>ApplicationChangeMessage,pB:()=>ApplicationLoadedMessage});var i=n(4117);class AppPhaseChangeMessage extends i.v{constructor(e){super(),this.phase=e}}class ApplicationChangeMessage extends i.v{constructor(e){super(),this.application=e}}class ApplicationLoadedMessage extends i.v{constructor(e){super(),this.application=e}}},46686:(e,t,n)=>{"use strict";n.d(t,{l:()=>SdkObservable,W:()=>SdkObserver});class SdkObservable{constructor(e,t,n){this.dependencies=e,this.subscriptionFactory=t,this.observers=new Set,this.currentData=n.create(),this.freshDataCache=n.create()}static async create(e,t,n){const i=await e.getDependencies();return new SdkObservable(i,t,n)}getData(){return this.currentData.data}subscribe(e){return this.addObserver(e),new class ObserverSubscription{constructor(e){this.sdkObservable=e,this.renew()}renew(){this.sdkObservable.addObserver(e)}cancel(){this.sdkObservable.removeObserver(e)}}(this)}addObserver(e){if(!this.observers.has(e)){class SdkObservableFacade{constructor(e){this.observable=e}onChanged(){this.observable.onChanged()}}this.observers.add(e),1===this.observers.size&&(this.currentData.update(...this.dependencies),this.changeSubscription=this.subscriptionFactory.create(new SdkObservableFacade(this),...this.dependencies)),e.dirty=!0}}removeObserver(e){0!==this.observers.size&&(this.observers.delete(e),0===this.observers.size&&this.changeSubscription.cancel())}onChanged(){if(this.freshDataCache.update(...this.dependencies),!this.currentData.equals(this.freshDataCache)){this.currentData.copy(this.freshDataCache);for(const e of this.observers)e.dirty=!0}}}class SdkObserver{constructor(){this.dirty=!1}}},92216:(e,t,n)=>{"use strict";n.d(t,{I:()=>SdkData});var i=n(35424);class SdkData extends i.V{constructor(){super(...arguments),this.name="sdk",this.applicationKey=null}}},29819:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CommunicationMethod:()=>c,Sdk:()=>Sdk,default:()=>Sdk});var i,s,r=n(57227),o=n(92216),a=n(84759);!function(e){e.EMBED="sdk.embed",e.BUNDLE="sdk.bundle"}(i||(i={})),function(e){e.CONNECTION="sdk.connection",e.DISCONNECT="sdk.disconnect",e.MESSAGED="sdk.messaged",e.SUBSCRIBED="sdk.subscribed",e.UNSUBSCRIBED="sdk.unsubscribed",e.OBSERVABLE_SUB="sdk.obs.subscribe",e.OBSERVABLE_UNSUB="sdk.obs.unsubscribe",e.COLLECTION_SUB="sdk.coll.subscribe",e.COLLECTION_UNSUB="sdk.coll.unsubscribe"}(s||(s={}));class AnalyticsProxy{constructor(e,t){this.analytics=e,this.sdkType=t,this.trackedEvents=new a.X}track(e,t,n){this.trackedEvents.has(e,t)||(this.trackedEvents.add(e,t),this.analytics.track(e,Object.assign({sdkType:this.sdkType},n)))}alwaysTrack(e,t,n){this.trackedEvents.add(e,t),this.analytics.track(e,Object.assign({sdkType:this.sdkType},n))}}class ClientCallAnalyticsHandler{constructor(e,t){this.analytics=e,this.getApplicationKey=t,this.messageType="client call"}onMessage(e,t){const{namespace:n,name:i}=e,s={applicationKey:this.getApplicationKey(),namespace:n,name:i,method:t.communicationMethod};this.analytics.track("sdk_call",n+i,s)}}var l=n(31013);class IdGenerator{constructor(){this.usedIds=new Set,this.usedIds.add(0)}generate(){let e;do{e=Math.floor(1e6*Math.random())}while(this.usedIds.has(e));return this.usedIds.add(e),e}isInUse(e){return this.usedIds.has(e)}}var c,d=n(6015);!function(e){e.POSTMESSAGE="postmessage",e.DIRECT="direct",e.WEBSOCKET="websocket"}(c||(c={}));var u,h,p,m=n(40470);class PostMessageConnectHandler{constructor(e,t,n,i){this.hostWindow=e,this.hostId=t,this.idGenerator=n,this.connectionReceiver=i,this.inFlightClients=new Set,this.connectionHandler=new d.TY(t,new d.R9(window)),this.connectionHandler.addObserver(new m.OR({onConnectionReceived:(e,t)=>this.onConnectionReceived(e,t)}))}init(){this.connectionHandler.init()}dispose(){this.connectionHandler.dispose()}onConnectionReceived(e,t){if(this.inFlightClients.has(t.id))return;e=e||{},this.inFlightClients.add(t.id);const n=e&&e.bootstrapVersion?this.idGenerator.generate():t.id,i=this.hostId,s=t.source,r=this.hostWindow,o=new d.l(i,r,n,s).createMessenger();this.connectionReceiver.onConnectionReceived(t.origin,e.options,{applicationKey:e.applicationKey,id:n,messenger:o,communicationMethod:c.POSTMESSAGE},{accept(e,t){o.send(new m.U7(e,t,n,i,window.location.origin))},handshake(){o.send(new m.RS)},reject(e){o.send(new m.HX(e)),o.dispose()}},e.applicationKey)}}class DirectConnectHandler{constructor(e,t,n){this.hostId=e,this.idGenerator=t,this.connectionReceiver=n,this.hostNode=new d.Ej(window.location.origin),this.connectionHandler=new d.TY(e,new d.tY(this.hostNode)),this.connectionHandler.addObserver(new m.OR({onConnectionReceived:(e,t)=>this.onConnectionReceived(e,t)}))}init(){this.connectionHandler.init()}dispose(){this.connectionHandler.dispose()}onConnectionReceived(e,t){const n=t.id,i=this.hostId,s=t.source,r=this.hostNode,o=s.origin,a=new d.UX(i,r,n,s).createMessenger(),l=new d.UX(i,r,n,s).createMessenger();this.connectionReceiver.onConnectionReceived(o,e.options,{id:n,applicationKey:e.applicationKey,messenger:a,communicationMethod:c.DIRECT},{accept(e,t){l.send(new m.U7(e,t,n,i,o)),l.dispose()},handshake(){l.send(new m.RS)},reject(e){l.send(new m.HX(e)),l.dispose()}})}connect(e,t){const n=this.idGenerator.generate(),i=this.hostId,s=new d.Ej(e),r=this.hostNode,o=new d.UX(n,s,i,r);return new Promise(((r,a)=>{const l=new d.UX(n,s,i,this.hostNode).createMessenger();l.init();const c=new class ConnectResponseHandler{accept(t,n,i,s,a){r({targetOrigin:e,sourceId:t,targetId:s,scriptUrl:n,serializedInterface:i,messengerFactory:o}),l.dispose()}reject(e){a(e),l.dispose()}};l.addObserver(new m.fE(c)),l.addObserver(new m.MJ(c)),l.send(new m.HE("direct",t))}))}}!function(e){e.EVENT="postmessage.event",e.RESPONSE="postmessage.response",e.OBSERVATION="postmessage.observation",e.COLLECTION_UPDATE="collection.updated",e.PRIVATE_MESSAGE="private.message"}(u||(u={})),function(e){e.ITEM_ADDED="collection.item.added",e.ITEM_REMOVED="collection.item.removed",e.ITEM_UPDATED="collection.item.updated",e.COLL_UPDATED="collection.coll.updated"}(h||(h={}));!function(e){e.DISCONNECT="sdk.client.disconnect",e.ACTION="postmessage.action",e.EVENT_SUB="postmessage.subscribe",e.EVENT_UNSUB="postmessage.unsubscribe",e.OBSERVABLE_SUB="postmessage.observe",e.OBSERVABLE_UNSUB="postmessage.unobserve",e.COLLECTION_SUB="collection.sub",e.COLLECTION_UNSUB="collection.unsub",e.PRIVATE_MESSAGE="private.message"}(p||(p={}));var g=n(31511);Math.PI;g.AR.Mode.DOLLHOUSE,new Float32Array(16);var f=n(29497);f.h.Success,g.kJ.AStarStatus.SUCCESS,f.h.NoPath,g.kJ.AStarStatus.NO_PATH,f.h.Timeout,g.kJ.AStarStatus.TIMEOUT;Symbol.iterator;var v;n(6157),n(90614);!function(e){e.map=new Map}(v||(v={}));n(44155);class ResponseMessage{constructor(e,t,n,i){this.type=u.RESPONSE,this.payload={uid:e,message:t,success:n,error:i},this.uid=e,this.message=t,this.success=n,this.error=i}}class EventMessage{constructor(e,t){this.type=u.EVENT,this.payload={eventType:e,eventData:t},this.eventType=e,this.eventData=t}}class ObservationMessage{constructor(e,t){this.type=u.OBSERVATION,this.payload={observableKey:e,observableData:t}}}class CollectionItemAddedMessage{constructor(e,t,n,i){this.type=u.COLLECTION_UPDATE,this.payload={operation:e,collectionKey:t,collectionIndex:n,item:i}}}class CollectionItemRemovedMessage{constructor(e,t,n){this.type=u.COLLECTION_UPDATE,this.payload={operation:e,collectionKey:t,collectionIndex:n}}}class CollectionItemUpdatedMessage{constructor(e,t,n,i){this.type=u.COLLECTION_UPDATE,this.payload={operation:e,collectionKey:t,collectionIndex:n,item:i}}}class CollectionUpdatedMessage{constructor(e,t){this.type=u.COLLECTION_UPDATE,this.payload={operation:e,collectionKey:t}}}class PrivateMessage_PrivateMessage{constructor(e,t){this.type=u.PRIVATE_MESSAGE,this.payload={messageType:e,messagePayload:t}}}class FunctionCallMessageObserver{constructor(e,t){this.receiver=e,this.clientInfo=t,this.messageType=p.ACTION}notify(e){this.receiver.onActionReceived(e,this.clientInfo)}}class EventSubscribeMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.EVENT_SUB}notify(e){this.observer.onEventSubReceived(e,this.clientInfo)}}class EventUnsubscribeMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.EVENT_UNSUB}notify(e){this.observer.onEventUnsubReceived(e,this.clientInfo)}}class ObservableSubMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.OBSERVABLE_SUB}notify(e){this.observer.onObservableSubReceived(e,this.clientInfo)}}class ObservableUnsubMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.OBSERVABLE_UNSUB}notify(e){this.observer.onObservableUnsubReceived(e,this.clientInfo)}}class CollectionSubMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.COLLECTION_SUB}notify(e){this.observer.onCollectionSubReceived(e,this.clientInfo)}}class CollectionUnsubMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.COLLECTION_UNSUB}notify(e){this.observer.onCollectionUnsubReceived(e,this.clientInfo)}}class PrivateMessageObserver_PrivateMessageObserver{constructor(e,t){this.observer=e,this.clientInfo=t,this.messageType=p.PRIVATE_MESSAGE}notify(e){this.observer.onPrivateMessageReceived(e,this.clientInfo)}}var b=n(46686),y=n(14877);const S=new(n(5477).Z)("sdk");class Sdk extends r.Y{constructor(){super(...arguments),this.name="sdk",this.hostId=Math.floor(1e6*Math.random()),this.triedLoadingInterface=!1,this.connectionHandlers=[],this.clientInterface={functions:{},commands:{},enums:{},observables:{},collections:{}},this.perOriginInterfaces=new Map,this.perSdkTypeInterfaces=new Map,this.clientConnections=new Map,this.eventToClientSubMap=new a.X,this.clientToEventSubMap=new a.X,this.observableToClientSubMap=new a.X,this.clientToObservableSubMap=new Map,this.collectionToClientSubMap=new a.X,this.clientToCollectionSubMap=new Map,this.privateMessageHandlers=new a.X,this.valueToClientInterface={},this.commandCreators={},this.commands={},this.asyncCommands={},this.observables={},this.collections={},this.firstTimeCollectionSubs=new a.X}async init(e,t){this.config=e,this.applicationKey=e.applicationKey,this.validationUrl=e.validationUrl,this.facade=new Sdk.MessengerHostFacade(this),this.clientIdGenerator=new IdGenerator,this.directConnectHandler=new DirectConnectHandler(this.hostId,this.clientIdGenerator,this.facade),this.connectionHandlers.push(new PostMessageConnectHandler(window,this.hostId,this.clientIdGenerator,this.facade),this.directConnectHandler),this.analytics=new AnalyticsProxy(await t.getModuleBySymbol(y.y.ANALYTICS),i.BUNDLE),this.clientFilter=e.clientFilter||(()=>!0),this.issueCommand=t.commandBinder.issueCommand.bind(t.commandBinder),this.interfacePromise=new l.Q,this.getSdkConfig=e.getSdkConfig,this.requestQueue=e.queue,this.data=new o.I,t.market.register(this,o.I,this.data),this.addPrivateMessageHandler(new ClientCallAnalyticsHandler(this.analytics,(()=>this.applicationKey))),this.enableHandshaking()}dispose(){for(const e of this.connectionHandlers)e.dispose();this.clearInterface()}connect(e,t={applicationKey:""}){return this.directConnectHandler.connect(e,t)}enableHandshaking(){for(const e of this.connectionHandlers)e.init()}async setupInterface(){if(!this.triedLoadingInterface)try{this.triedLoadingInterface=!0,await this.config.setupExternalSdk(this),this.interfacePromise.resolve()}catch(e){this.interfacePromise.reject(e.message)}}clearInterface(){this.clientInterface.functions={},this.clientInterface.commands={},this.clientInterface.enums={},this.clientInterface.observables={},this.clientInterface.collections={},this.commandCreators={}}onUpdate(){for(const[e,t]of this.clientToObservableSubMap)for(const[n,[i,s]]of t)i.dirty&&(this.notifyObservableUpdate(n,s.getData(),e),i.dirty=!1);for(const[e,t]of this.clientToCollectionSubMap)for(const[n,[,i]]of t)i.dirty&&this.notifyCollectionUpdates(n,i.readDiff(),e)}addCommandCreator(e,t){const n=this.getInterfaceIndex(e);if(this.clientInterface.functions.hasOwnProperty(n)&&S.debug(`Overwriting ${n} function in sdk interface`),e.sdkTypes)for(const t of e.sdkTypes){const i=this.perSdkTypeInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};i.functions[n]=Object.assign({},e),this.perSdkTypeInterfaces.set(t,i)}if(e.origins)for(const t of e.origins){const i=this.perOriginInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};i.functions[n]=Object.assign({},e),this.perOriginInterfaces.set(t,i)}this.clientInterface.functions[n]=e,this.commandCreators[n]=t}addEnumToInterface(e){const t=this.getInterfaceIndex(e);if(this.clientInterface.functions.hasOwnProperty(t)&&S.debug(`Overwriting ${t} enum in sdk interface`),e.sdkTypes)for(const n of e.sdkTypes){const i=this.perSdkTypeInterfaces.get(n)||{functions:{},commands:{},enums:{},observables:{},collections:{}};i.enums[t]=Object.assign({},e),this.perSdkTypeInterfaces.set(n,i)}if(e.origins)for(const n of e.origins){const i=this.perOriginInterfaces.get(n)||{functions:{},commands:{},enums:{},observables:{},collections:{}};i.enums[t]=Object.assign({},e),this.perOriginInterfaces.set(n,i)}if(this.clientInterface.enums[t]=Object.assign(Object.assign({},e),{values:Object.assign({},e.values)}),"Event"===e.name){const t=Object.keys(e.values);for(const n in t){this.valueToClientInterface;const i=e.values[t[n]];this.valueToClientInterface.hasOwnProperty(i)?S.warn(`Duplicate event detected for ${JSON.stringify(e)}`):this.valueToClientInterface[i]=e}}}async addCommandToInterface(e,t){const n=this.getInterfaceIndex(e);if(this.addCommand(n,t),e.sdkTypes)for(const t of e.sdkTypes){const i=this.perSdkTypeInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};i.commands[n]=Object.assign({},e),this.perSdkTypeInterfaces.set(t,i)}if(e.origins)for(const t of e.origins){const i=this.perOriginInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};i.commands[n]=Object.assign({},e),this.perOriginInterfaces.set(t,i)}this.clientInterface.commands[n]=e}async addAsyncCommandToInterface(e,t,...n){const i=this.getInterfaceIndex(e);if(this.addCommand(i,t,!0),e.sdkTypes)for(const t of e.sdkTypes){const n=this.perSdkTypeInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};n.commands[i]=Object.assign({},e),this.perSdkTypeInterfaces.set(t,n)}if(e.origins)for(const t of e.origins){const n=this.perOriginInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};n.commands[i]=Object.assign({},e),this.perOriginInterfaces.set(t,n)}this.clientInterface.commands[i]=Object.assign({},e)}async addCommand(e,t,n=!1){this.clientInterface.commands.hasOwnProperty(e);const i=this;return n?(this.asyncCommands[e]=t,{dispose(){delete i.asyncCommands[e]}}):(this.commands[e]=await t,{dispose(){delete i.commands[e]}})}addObservableToInterface(e,t,...n){const i=this.getInterfaceIndex(e);if(this.addObservable(i,t),e.sdkTypes)for(const t of e.sdkTypes){const n=this.perSdkTypeInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};n.observables[i]=Object.assign({},e),this.perSdkTypeInterfaces.set(t,n)}if(e.origins)for(const t of e.origins){const n=this.perOriginInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};n.observables[i]=Object.assign({},e),this.perOriginInterfaces.set(t,n)}this.clientInterface.observables[i]=Object.assign({},e)}addObservable(e,t){this.clientInterface.observables.hasOwnProperty(e),this.observables[e]=t;const n=this;return{dispose(){n.removeObservable(e)}}}removeObservable(e){var t;delete this.observables[e];for(const n of this.observableToClientSubMap.getValuesAtKey(e))null===(t=this.clientToObservableSubMap.get(n.id))||void 0===t||t.delete(e);this.observableToClientSubMap.removeKey(e)}addCollectionToInterface(e,t,...n){const i=this.getInterfaceIndex(e);if(this.addCollection(i,t),e.sdkTypes)for(const t of e.sdkTypes){const n=this.perSdkTypeInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};n.collections[i]=Object.assign({},e),this.perSdkTypeInterfaces.set(t,n)}if(e.origins)for(const t of e.origins){const n=this.perOriginInterfaces.get(t)||{functions:{},commands:{},enums:{},observables:{},collections:{}};n.collections[i]=Object.assign({},e),this.perOriginInterfaces.set(t,n)}this.clientInterface.collections[i]=Object.assign({},e)}addCollection(e,t){this.clientInterface.collections.hasOwnProperty(e),this.collections[e]=t;const n=this;return{dispose(){n.removeCollection(e)}}}removeCollection(e){var t;delete this.collections[e];for(const n of this.collectionToClientSubMap.getValuesAtKey(e))null===(t=this.clientToCollectionSubMap.get(n.id))||void 0===t||t.delete(e);this.collectionToClientSubMap.removeKey(e)}addPrivateMessageHandler(e){const{privateMessageHandlers:t}=this;return t.add(e.messageType,e),{dispose(){t.remove(e.messageType,e)}}}getInterfaceIndex(e){let t=`${e.name}`;return e.namespace&&(t=`${e.namespace}.${t}`),t}sendPrivateMessage(e,t){for(const[,n]of this.clientConnections)n.messenger.send(new PrivateMessage_PrivateMessage(e,t))}broadcast(e,t,n){for(const[,i]of this.clientConnections)if(t){const s=t(n);i.messenger.send(new EventMessage(e,s||[]))}else i.messenger.send(new EventMessage(e,[]))}notifyObservableUpdate(e,t,n){for(const i of this.observableToClientSubMap.getValuesAtKey(e))i.id===n&&i.messenger.send(new ObservationMessage(e,t))}notifyCollectionUpdates(e,t,n){const{added:i,removed:s,updated:r}=t,o=i.size>0,a=s.size>0,l=r.size>0,c=this.clientConnections.get(n);if(c){const t=c.id;if(o)for(const[t,n]of i)c.messenger.send(new CollectionItemAddedMessage(h.ITEM_ADDED,e,t,n));if(a)for(const[t]of s)c.messenger.send(new CollectionItemRemovedMessage(h.ITEM_REMOVED,e,t));if(l)for(const[t,n]of r)c.messenger.send(new CollectionItemUpdatedMessage(h.ITEM_UPDATED,e,t,n));(o||a||l||this.firstTimeCollectionSubs.has(t,e))&&(c.messenger.send(new CollectionUpdatedMessage(h.COLL_UPDATED,e)),this.firstTimeCollectionSubs.remove(t,e))}}verifyConnection(e){const t={cache:!1,headers:{"X-Matterport-Application-Key":this.applicationKey,"X-Matterport-Referrer":e}};return this.requestQueue.get(this.validationUrl,t)}async onConnectionReceived(e,t,n,i,s){if(!this.clientFilter(e))return i.reject("Connection refused");this.applicationKey=s||this.applicationKey||null;try{await this.verifyConnection(e)}catch(e){return i.reject("key/referrer mismatch")}const r=async()=>{const t=new URL(e).hostname,s=this.perOriginInterfaces.get(t.toLowerCase()),r=this.perSdkTypeInterfaces.get(n.communicationMethod),o={enums:{},functions:{},observables:{},collections:{}},a=function(e,t,n,i){const s=e[t].sdkTypes,r=e[t].origins;if(!s&&!r)return!0;const o=s&&r&&(null==n?void 0:n[t])&&(null==i?void 0:i[t]),a=s&&!r&&(null==n?void 0:n[t]),l=!s&&r&&(null==i?void 0:i[t]);return o||a||l};for(const e in this.clientInterface.enums)a(this.clientInterface.enums,e,null==r?void 0:r.enums,null==s?void 0:s.enums)&&(o.enums[e]=this.clientInterface.enums[e]);for(const e in this.clientInterface.observables)a(this.clientInterface.observables,e,null==r?void 0:r.observables,null==s?void 0:s.observables)&&(o.observables[e]=this.clientInterface.observables[e]);for(const e in this.clientInterface.collections)a(this.clientInterface.collections,e,null==r?void 0:r.collections,null==s?void 0:s.collections)&&(o.collections[e]=this.clientInterface.collections[e]);for(const e in this.clientInterface.functions)a(this.clientInterface.functions,e,null==r?void 0:r.functions,null==s?void 0:s.functions)&&(o.functions[e]=this.clientInterface.functions[e]);for(const e in this.clientInterface.commands)a(this.clientInterface.commands,e,null==r?void 0:r.commands,null==s?void 0:s.commands)&&(o.functions[e]=this.clientInterface.commands[e]);this.onConnectionAccepted(e,n),i.accept((await this.getSdkConfig).client,o)};i.handshake();try{this.config.onClientConnect(null==t?void 0:t.auth),await this.setupInterface(),await this.interfacePromise,await r(),this.data.atomic((()=>{this.data.applicationKey=this.applicationKey,this.data.commit()}))}catch(e){i.reject(e)}}onConnectionAccepted(e,t){const n=t.id,i=t.messenger,s={id:n,applicationKey:t.applicationKey,origin:e,communicationMethod:t.communicationMethod,messenger:i};this.clientConnections.set(n,s);const r=this.facade;i.addObserver(new FunctionCallMessageObserver(r,s)),i.addObserver(new EventSubscribeMessageObserver(r,s)),i.addObserver(new EventUnsubscribeMessageObserver(r,s)),i.addObserver(new ObservableSubMessageObserver(r,s)),i.addObserver(new ObservableUnsubMessageObserver(r,s)),i.addObserver(new CollectionSubMessageObserver(r,s)),i.addObserver(new CollectionUnsubMessageObserver(r,s)),i.addObserver(new PrivateMessageObserver_PrivateMessageObserver(r,s)),i.init(),this.trackSdkConnect(s)}onDisconnectReceived(e,t){const n=this.clientToEventSubMap.getValuesAtKey(t.id),i=this.clientToObservableSubMap.get(t.id)||[],s=this.clientToCollectionSubMap.get(t.id)||[];for(const e of n)this.eventToClientSubMap.remove(e,t);for(const[e]of i)this.observableToClientSubMap.remove(e,t);for(const[e]of s)this.collectionToClientSubMap.remove(e,t);this.clientToEventSubMap.removeKey(t.id),this.clientToObservableSubMap.delete(t.id),this.clientToCollectionSubMap.delete(t.id)}onActionReceived(e,t){if(this.tryActionThroughCommand(e,t))return;const n=this.commandCreators[e.targetFunction];if(n){this.trackSdkCall(e,t.id);try{this.issueCommand(n(e.params,t)).then((n=>t.messenger.send(new ResponseMessage(e.uid,n,!0,"")))).catch((n=>t.messenger.send(new ResponseMessage(e.uid,{},!1,n.message||n))))}catch(n){S.debug(n),t.messenger.send(new ResponseMessage(e.uid,{},!1,n.message))}}else t.messenger.send(new ResponseMessage(e.uid,{},!1,`${e.targetFunction} is not a valid command`))}tryActionThroughCommand(e,t){if(this.tryActionThroughAsyncCommand(e,t))return!0;const n=this.commands[e.targetFunction];if(!n)return!!this.clientInterface.commands.hasOwnProperty(e.targetFunction)&&(t.messenger.send(new ResponseMessage(e.uid,{},!1,`${e.targetFunction} is not ready to be called`)),!0);this.trackSdkCall(e,t.id);try{const i=new ReturnObserver({onSuccess(n){t.messenger.send(new ResponseMessage(e.uid,n,!0,""))},onFail(n){t.messenger.send(new ResponseMessage(e.uid,{},!1,n))}});n.exec(e.params,i,t)}catch(n){S.debug(n),t.messenger.send(new ResponseMessage(e.uid,{},!1,n.message))}return!0}tryActionThroughAsyncCommand(e,t){const n=this.asyncCommands[e.targetFunction];return!!n&&(n.then((n=>{try{const i=new ReturnObserver({onSuccess(n){t.messenger.send(new ResponseMessage(e.uid,n,!0,""))},onFail(n){t.messenger.send(new ResponseMessage(e.uid,{},!1,n))}});n.exec(e.params,i,t)}catch(n){S.debug(n),t.messenger.send(new ResponseMessage(e.uid,{},!1,n.message))}})),!0)}onEventSubReceived(e,t){this.eventToClientSubMap.add(e.subscription,t),this.trackSdkEvent(s.SUBSCRIBED,e,t)}onEventUnsubReceived(e,t){this.eventToClientSubMap.remove(e.subscription,t),this.trackSdkEvent(s.UNSUBSCRIBED,e,t)}async onObservableSubReceived(e,t){const n=e.observableKey,i=this.observables[n];if(i){const r=await i;if(!this.observables[n])return;if(!this.observableToClientSubMap.has(n,t)){const i=new b.W,o=r.subscribe(i);this.observableToClientSubMap.add(n,t);const a=this.clientToObservableSubMap.get(t.id)||new Map;a.set(n,[i,r,o]),this.clientToObservableSubMap.set(t.id,a),this.trackClientObservableSub(s.OBSERVABLE_SUB,e,t)}}else S.error(n,"is not a valid, registered observable")}onObservableUnsubReceived(e,t){const n=e.observableKey;this.observableToClientSubMap.remove(n,t);const i=this.clientToObservableSubMap.get(t.id);if(i){const r=i.get(n);if(r){const[,,o]=r;o.cancel(),i.delete(n),this.trackClientObservableSub(s.OBSERVABLE_UNSUB,e,t)}}}async onCollectionSubReceived(e,t){const n=e.collectionKey,i=this.collections[n];if(i){const r=await i;if(!this.collections[n])return;if(!this.collectionToClientSubMap.has(n,t)){const i=r.subscribe(t),o=[r,i];this.collectionToClientSubMap.add(n,t);const a=this.clientToCollectionSubMap.get(t.id)||new Map;a.set(n,o),this.clientToCollectionSubMap.set(t.id,a),this.firstTimeCollectionSubs.add(t.id,n),this.trackClientCollectionSub(s.COLLECTION_SUB,e,t)}}else S.error(n,"is not a valid, registered collection")}onCollectionUnsubReceived(e,t){const n=e.collectionKey;this.collectionToClientSubMap.remove(n,t);const i=this.clientToCollectionSubMap.get(t.id);if(i){const r=i.get(n);if(r){const[,o]=r;o.cancel(),i.delete(n),this.trackClientCollectionSub(s.COLLECTION_UNSUB,e,t)}}}onPrivateMessageReceived(e,t){const{messageType:n,messagePayload:i}=e;for(const e of this.privateMessageHandlers.getValuesAtKey(n))e.onMessage(i,t)}trackSdkConnect(e){if(!this.analytics)return;const t={origin:e.origin,applicationKey:this.applicationKey,method:e.communicationMethod};this.analytics.track("sdk_connect","connect",t)}trackSdkEvent(e,t,n){if(!this.analytics)return;const i=e===s.SUBSCRIBED?"on":"off",r=this.valueToClientInterface[t.subscription];if(!r)return;const o=Object.keys(r.values),a=o.find(((e,n)=>{const i=o[n];return r.values[i]===t.subscription}));if(!a)return;const l={origin:n.origin,applicationKey:this.applicationKey,name:i,namespace:r.namespace,eventType:a,count:this.eventToClientSubMap.valuesPerKey(t.subscription),method:n.communicationMethod};this.analytics.track("sdk_event",t.subscription,l)}trackSdkCall(e,t){const n=this.clientConnections.get(t);if(!n)return;const i=this.clientInterface.functions[e.targetFunction]||this.clientInterface.commands[e.targetFunction],s=Object.assign(Object.assign({origin:n.origin,applicationKey:this.applicationKey},i),{method:n.communicationMethod});this.analytics.track("sdk_call",e.targetFunction,s)}trackClientObservableSub(e,t,n){const i=e===s.OBSERVABLE_SUB,r=this.clientInterface.observables[t.observableKey],o=Object.assign(Object.assign({origin:n.origin,applicationKey:this.applicationKey},r),{is_collection:!1,action:i?"subscribe":"cancel",method:n.communicationMethod});this.analytics.track("sdk_subscribe",t.observableKey,o)}trackClientCollectionSub(e,t,n){const i=e===s.COLLECTION_SUB,r=this.clientInterface.collections[t.collectionKey],o=Object.assign(Object.assign({origin:n.origin,applicationKey:this.applicationKey},r),{is_collection:!0,action:i?"subscribe":"cancel",method:n.communicationMethod});this.analytics.track("sdk_subscribe",t.collectionKey,o)}}Sdk.MessengerHostFacade=class{constructor(e){this.messageHandler=e}onConnectionReceived(e,t,n,i,s){this.messageHandler.onConnectionReceived(e,t,n,i,s)}onDisconnectReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onDisconnectReceived(e,n)}onActionReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onActionReceived(e,n)}onEventSubReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onEventSubReceived(e,n)}onEventUnsubReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onEventUnsubReceived(e,n)}onObservableSubReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onObservableSubReceived(e,n)}onObservableUnsubReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onObservableUnsubReceived(e,n)}onCollectionSubReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onCollectionSubReceived(e,n)}onCollectionUnsubReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onCollectionUnsubReceived(e,n)}onPrivateMessageReceived(e,t){const n=this.messageHandler.clientConnections.get(t.id);n&&this.messageHandler.onPrivateMessageReceived(e,n)}};class ReturnObserver{constructor(e){this.action=e}return(e){this.action.onSuccess(e)}throw(e){this.action.onFail(e)}}},17423:(e,t,n)=>{"use strict";var i;n.d(t,{F:()=>i}),function(e){e.UnitType="user_preference/unit_type",e.MeasurementSnapping="user_preference/measurement_snapping",e.MeasurementContinuousLines="user_preference/measurement_continuous",e.MeasurementUserNudgeSeen="user_preference/measurement_nudge",e.HighlightReelSettingsTab="user_preference/highlight_reel_settings_tab",e.NotesModeNudgeSeen="user_preference/notes_mode_nudge",e.NotesAddNudgeSeen="user_preference/notes_add_nudge",e.NotesIntroModalSeen="user_preference/notes_intro_seen",e.LastRatingPromptTime="user_preference/model_rating_last_prompt_time",e.TagsAddNudgeSeen="user_preference/tags_add_nudge",e.SubscriberPromptDismissed="user_preference/subscriber_prompt_dismissed",e.DollhouseUserNudgeSeen="user_preference/dollhouse_nudge",e.TourTextNudgeDismissed="user_preference/tour_text_nudge_dismissed",e.TourMobileNavigationPromptSeen="user_preference/tour_mobile_nav_prompt_seen",e.ViewsOptInPromptOnPublish="view_opt_in_prompt_on_publish"}(i||(i={}))},6058:(e,t,n)=>{"use strict";n.d(t,{u:()=>SettingsToggler});class SettingsToggler{constructor(e,t){this.settingsData=e,this.settings=t,this.cache={},this.toggle=e=>{e?this.apply():this.reset()}}apply(){this.cache={};for(const e of Object.keys(this.settings)){const t=this.settingsData.tryGetProperty(e,void 0);t!==this.settings[e]&&(this.cache[e]=t,this.settingsData.setProperty(e,this.settings[e]))}}reset(){for(const e of Object.keys(this.cache)){const t=this.cache[e];this.settingsData.setProperty(e,void 0!==t&&t)}this.cache={}}}},61903:(e,t,n)=>{"use strict";n.d(t,{e:()=>SettingsData});var i=n(35424),s=n(66910),r=n(253);class SettingsData extends i.V{constructor(){super(...arguments),this.name="settings",this.properties=(0,s.q)()}setProperty(e,t){const n=this.properties.get(e);null!=t&&n===t||(this.properties.set(e,t),this.commit([e]))}notifyPropertyObserver(e,t){e(this.properties.get(t))}setLocalStorageProperty(e,t){(0,r.m8)(e,t),this.setProperty(e,t)}hasProperty(e){return this.properties.has(e)}tryGetProperty(e,t){return this.hasProperty(e)?this.properties.get(e):t}getProperty(e){if(this.hasProperty(e))return this.properties.get(e);throw new Error("SettingsData: "+e+" not found")}checkUrlParam(e,t,n=0){const i=this.tryGetProperty(e,n);return"number"==typeof i?i===t:parseInt(i,10)===t}iterate(e){for(const t of this.properties.keys)e(t,this.getProperty(t))}}},81242:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SettingPersistence:()=>a,default:()=>SettingsModule});var i,s=n(84428),r=n(81402),o=n(31013);!function(e){e[e.Init=0]="Init",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded"}(i||(i={}));class SettingsGUI{constructor(e){this.onChange=e,this.settings={},this.helperObject={colors:{},vectors:{},quaternions:{}},this.initPromise=new o.Q,this.loadState=i.Init,this.uninitError="ControlKit not yet initialized",this.lastKeys=[],this.lastKeysBufferLength=0,this.controlKit=void 0,this.updateRequired=!1,this.panels=[],this.onToggleCallbacks={},this.onKeyDown=e=>{this.lastKeys.unshift(e.keyCode),this.lastKeys.length>this.lastKeysBufferLength&&this.lastKeys.pop();for(let e=0;e<this.panels.length;e++){const t=this.panels[e].activationSequence;(0,r.Jq)(this.lastKeys,t)&&this.toggle(e)}},this.getPanelId=e=>{for(const t of this.panels)if(e===t.header)return t.index;return-1},this.getSubGroup=(e,t)=>{const n=this.panels[e];n.guiPanel||(n.guiPanel=n.makeGuiPanel()),n.allowSubGroups||(t="");let i=n.subGroups.get(t||"");if(!i){n.guiPanel.addSubGroup({label:t,enable:!n.allowSubGroups});const e=n.guiPanel._groups[n.guiPanel._groups.length-1],s=e._subGroups[e._subGroups.length-1];i=new SubGroupWrapper(n.guiPanel,e,s),n.subGroups.set(t||"",i)}return i},this.addColor=(e,t,n,i)=>{this.updateHelperObject(t+n,i),e.addColor(this.helperObject.colors,t+n,{label:n,colorMode:"hex",onChange:e=>{this.settings[t+n].setHex(parseInt(e.substring(1),16));const i={};i[n]=this.settings[t+n],this.onChange(i)}})},this.addVector3=(e,t,n,i)=>{this.updateHelperObject(e+n,i);const r=this.getSubGroup(e,`${t}: ${n}`),o=["x","y","z"];for(const t in o)r.addNumberInput(this.helperObject.vectors[e+n],o[t],{label:o[t],onChange:()=>{this.settings[e+n]=new s.Vector3(this.helperObject.vectors[n].x,this.helperObject.vectors[n].y,this.helperObject.vectors[n].z);const t={};t[n]=this.settings[e+n],this.onChange(t)}})},this.addQuaternion=(e,t,n,i)=>{this.updateHelperObject(e+n,i);const r=this.getSubGroup(e,`${t}: ${n}`),o=["x","y","z","w"];for(const t in o)r.addNumberInput(this.helperObject.quaternions[e+n],o[t],{label:o[t],onChange:()=>{this.settings[e+n]=new s.Quaternion(this.helperObject.quaternions[e+n].x,this.helperObject.quaternions[e+n].y,this.helperObject.quaternions[e+n].z,this.helperObject.quaternions[e+n].w);const t={};t[n]=this.settings[e+n],this.onChange(t)}})}}init(){}async loadGuiPackage(){return this.loadState===i.Init&&(n.e(66).then(n.t.bind(n,94810,23)).then((e=>{const t=document.createElement("div");t.id="controlKitElement",(document.getElementById("control-kit-wrapper")||document.body).appendChild(t);const n=e=>e.stopPropagation();t.addEventListener("keydown",n),t.addEventListener("keyup",n),t.addEventListener("keypress",n),this.controlKit=new e.default({opacity:.9,enable:!1,parentDomElementId:"controlKitElement"}),this.controlKit.setShortcutEnable(""),this.controlKit.enable(),this.initPromise.resolve(),this.loadState=i.Loaded})),this.loadState=i.Loading),this.loadPromise}get loadPromise(){return this.initPromise.nativePromise()}get isLoaded(){return void 0!==this.controlKit}addPanel(e,t,n={}){for(void 0===n.width&&(n.width=250),void 0===n.allowSubGroups&&(n.allowSubGroups=!0),void 0===n.ratio&&(n.ratio=60),this.lastKeysBufferLength=Math.max(this.lastKeysBufferLength,t.length);this.lastKeysBufferLength>this.lastKeys.length;)this.lastKeys.unshift(-1);return this.panels.push({index:this.panels.length,header:e,guiPanel:null,makeGuiPanel:()=>this.controlKit.addPanel({label:e,align:"right",ratio:n.ratio,width:n.width}),subGroups:new Map,allowSubGroups:n.allowSubGroups,activationSequence:t.reverse()}),this.panels.length-1}isVisible(e){if(!this.controlKit)throw new Error(this.uninitError);return this.panels[e].guiPanel._enabled}toggle(e){this.controlKit?this.toggleVisibility(e):this.loadGuiPackage().then((()=>{this.toggleVisibility(e)}))}onToggle(e,t){this.onToggleCallbacks[e]||(this.onToggleCallbacks[e]=[]),this.onToggleCallbacks[e].push(t)}toggleVisibility(e){if(!this.controlKit)throw new Error(this.uninitError);const t=this.panels[e].guiPanel._enabled;if(t?this.panels[e].guiPanel.disable():this.panels[e].guiPanel.enable(),this.onToggleCallbacks[e])for(const n of this.onToggleCallbacks[e])n(!t)}dispose(){const e=document.getElementById("controlKit");e&&e.remove(),this.controlKit=void 0}activate(e){window.addEventListener("keydown",this.onKeyDown)}deactivate(e){this.controlKit&&this.controlKit.disable(),window.removeEventListener("keydown",this.onKeyDown)}render(){this.controlKit&&this.updateRequired&&(this.updateRequired=!1,this.controlKit.update())}updateSetting(e,t,n){if(!this.controlKit)throw new Error(this.uninitError);const i=e+t,s=this.settings[i];n&&"function"==typeof n.equals&&"function"==typeof n.copy&&s&&"function"==typeof s.equals&&"function"==typeof s.copy?n.equals(this.settings[i])||(this.settings[i].copy(n),this.updateHelperObject(i,n),this.updateRequired=!0):n!==this.settings[e+t]&&(this.settings[i]=n,this.updateRequired=!0)}getSetting(e,t){return this.settings[e+t]}isRegistered(e,t){return void 0!==this.settings[e+t]}addControl(e,t,n,i,r,o=2,a){if(!this.controlKit)throw new Error(this.uninitError);const l=`${e}${n}`;this.settings[l]=i;let c=typeof i;if(("string"===c&&"true"===i||"false"===i)&&(c="boolean"),i instanceof s.Color)this.addColor(this.getSubGroup(e,t),e,n,i);else if(i instanceof s.Vector3)this.addVector3(e,t,n,i);else if(i instanceof s.Quaternion)this.addQuaternion(e,t,n,i);else{const s=this.getSubGroup(e,t);switch(c){case"string":Array.isArray(a)?(this.settings[l]={options:a,selected:i},s.addSelect(this.settings[l],"options",{target:"selected",label:n,onChange:e=>{const t={[n]:a[e]};this.onChange(t)}})):s.addStringInput(this.settings,e+n,{label:n,onChange:t=>{const i={};this.settings[e+n]=t,i[n]=this.settings[e+n],this.onChange(i)}});break;case"number":this.settings[`${e+n}_range`]=r||[0,10],s.addSlider(this.settings,e+n,`${e+n}_range`,{label:n,onChange:()=>{const t={};t[n]=this.settings[e+n],this.onChange(t)},dp:o});break;case"boolean":s.addCheckbox(this.settings,e+n,{label:n,ratio:10,onChange:()=>{const t={};t[n]=this.settings[e+n],this.onChange(t)}});break;default:s.addStringOutput(this.settings,e+n,{label:n})}}}addButton(e,t,n,i){if(!this.controlKit)throw new Error(this.uninitError);this.getSubGroup(e,t).addButton(n,i,{label:"none",ratio:100})}addSlider(e,t,n,i,s,r,o){if(!this.controlKit)throw new Error(this.uninitError);const a=this.getSubGroup(e,t);this.settings[e+n]=i,this.settings[e+n+"_range"]=[s,r],a.addSlider(this.settings,e+n,e+n+"_range",{label:n,dp:o,onChange:()=>{const t={};t[n]=this.settings[e+n],this.onChange(t)}})}updateHelperObject(e,t){t instanceof s.Color?this.helperObject.colors[e]="#"+t.getHexString():t instanceof s.Vector3?(this.helperObject.vectors[e]={},this.helperObject.vectors[e].x=t.x,this.helperObject.vectors[e].y=t.y,this.helperObject.vectors[e].z=t.z):t instanceof s.Quaternion&&(this.helperObject.quaternions[e]={},this.helperObject.quaternions[e].x=t.x,this.helperObject.quaternions[e].y=t.y,this.helperObject.quaternions[e].z=t.z,this.helperObject.quaternions[e].w=t.w)}}class SubGroupWrapper{constructor(e,t,n){this.panel=e,this.group=t,this.subGroup=n}addButton(...e){this.invoke("addButton",e)}addSlider(...e){this.invoke("addSlider",e)}addSelect(...e){this.invoke("addSelect",e)}addCheckbox(...e){this.invoke("addCheckbox",e)}addColor(...e){this.invoke("addColor",e)}addStringInput(...e){this.invoke("addStringInput",e)}addStringOutput(...e){this.invoke("addStringOutput",e)}addNumberInput(...e){this.invoke("addNumberInput",e)}invoke(e,t){const n=this.panel._groups,i=this.group._subGroups,s=n.indexOf(this.group),r=i.indexOf(this.subGroup);n.splice(s,1),n.push(this.group),i.splice(r,1),i.push(this.subGroup);try{this.panel[e](...t)}finally{n.splice(s,0,n.pop()),i.splice(r,0,i.pop())}}}var a,l=n(57227),c=n(61903),d=n(2252),u=n(253),h=n(87100);function p(e){if(""===e)return e;const t=+e;return isNaN(t)?e:t}!function(e){e[e.NONE=0]="NONE",e[e.LOCAL_STORAGE=1]="LOCAL_STORAGE"}(a||(a={}));class SettingsModule extends l.Y{constructor(){super(...arguments),this.name="settings",this.queuedControls=[],this.queuedButtons=[],this.secretWord=[38,38,40,40,37,39,37,39,66,65,72],this.panelID=-1,this.addPanel=(e,t,n)=>{const i=this.getPanelId(e);return-1===i?this.settingsGUI.addPanel(e,t,n):i},this.getPanelId=e=>this.settingsGUI.getPanelId(e)}async init(e,t){this.engine=t,this.settings=new c.e,this.engine.market.register(this,c.e,this.settings),e.useGUI&&(this.settingsGUI=new SettingsGUI((e=>{this.updateSettings(e)})),t.addComponent(this,this.settingsGUI),this.panelID=this.settingsGUI.addPanel("3.1.75.3-0-gba9de22f6d",this.secretWord));(0,h.kD)().forEach(((t,n)=>{let i=t;"string"==typeof i&&(i=p(i)),this.settings.setProperty(n,i),e.useGUI&&this.queuedControls.push({panelId:this.panelID,group:"Engine Config",settingName:n,value:i})})),e.useGUI&&this.settingsGUI.loadPromise.then((()=>{for(const e of this.queuedControls)this.settingsGUI.addControl(e.panelId,e.group,e.settingName,e.value,e.range,e.rangePrecision,e.options);for(const e of this.queuedButtons)this.settingsGUI.addButton(e.panelId,e.group,e.buttonName,e.callback);this.settingsGUI.toggle(this.panelID)}))}get settingsData(){return this.settings}get loadPromise(){return this.settingsGUI.loadPromise}getSettingsGui(){return this.settingsGUI}getMainPanelId(){return this.panelID}updateSetting(e,t,n=this.panelID){t&&t.clone&&"function"==typeof t.clone?this.settings.setProperty(e,t.clone()):this.settings.setProperty(e,t),this.settingsGUI&&this.settingsGUI.isLoaded&&this.settingsGUI.updateSetting(n,e,t)}updateSettings(e){for(const t in e)this.updateSetting(t,e[t])}registerSetting(e,t,n,i=!0,s=a.NONE,r,o=this.panelID,l=2,c){if(this.settingsGUI&&this.settingsGUI.isRegistered(o,t))return void this.log.warn(`Duplicate setting ${t} registered. Is a module being used twice?`);let d;d=n&&n.clone&&"function"==typeof n.clone?n.clone():n,this.settingsGUI&&i&&(this.settingsGUI.isLoaded?this.settingsGUI.addControl(o,e,t,d,r,l,c):this.queuedControls.push({panelId:o,group:e,settingName:t,value:n,range:r,rangePrecision:l,options:c}));const h=s===a.LOCAL_STORAGE?(0,u.fp)(t,n):n;this.updateSetting(t,h)}registerMenuEntry(e){const{header:t,setting:n,initialValue:i,persist:s,displayInUi:r,range:o,panel:a,onChange:l,rangePrecision:c,options:u,urlParam:m}=e;let g=i();const f=encodeURIComponent(n);if(m){const e=(0,h.eY)(f,null);null!==e&&(g="true"===e||"false"!==e&&p(e))}if(this.registerSetting(t,n,g,r,s,o,a,c,u),!l&&!m)return null;if(l&&l(g),m){const e=i(),t=t=>{const n=(0,h.kD)();n.has(f)&&t===e?n.delete(f):n.set(f,t),(0,d.Vf)(n.toString(),!0),l&&l(t)};return this.settings.onPropertyChanged(n,t)}return l?this.settings.onPropertyChanged(n,l):null}registerMenuButton(e){const{header:t,buttonName:n,panel:i,callback:s}=e;this.registerButton(t,n,s,i)}registerButton(e,t,n,i=this.panelID){this.settingsGUI&&(this.settingsGUI.isLoaded?this.settingsGUI.addButton(i,e,t,n):this.queuedButtons.push({panelId:i,group:e,buttonName:t,callback:n}))}hasProperty(e){return this.settings.hasProperty(e)}getProperty(e){return this.settings.getProperty(e)}tryGetProperty(e,t){return this.settings.tryGetProperty(e,t)}toggleMenu(){this.settingsGUI&&this.settingsGUI.toggle(0)}disposeGui(){this.settingsGUI.dispose()}}},18537:(e,t,n)=>{"use strict";var i;n.d(t,{E:()=>i}),function(e){e[e.Immediate=0]="Immediate",e[e.NextFrame=1]="NextFrame",e[e.Duration=2]="Duration",e[e.Manual=3]="Manual"}(i||(i={}))},60673:(e,t,n)=>{"use strict";n.d(t,{KI:()=>i,AQ:()=>ChangeRecord,Z8:()=>CollectionMonitor});var i,s=n(95987),r=n(18537),o=n(70446);!function(e){e.added="added",e.removed="removed",e.updated="updated"}(i||(i={}));class ChangeRecord{constructor(e,t,n){this.index=e,this.action=t,this.diff=n}}class CollectionMonitor{constructor(e,t){if(this.changedHandlers=[],this.awaitingInvoke=!1,this.diffRecord=[],this.targetMonitors={},this.triggerChangeHandlers=this.invokeChangeHandlers.bind(this),this.config=e,this.updatePhaseSync=t,this.config.aggregationType===r.E.NextFrame){if(!t)throw Error("UpdatePhaseSync required for NextFrame aggregation")}else if(this.config.aggregationType===r.E.Duration)throw Error("Aggregation Type not implemented")}hasDiffRecord(){return this.diffRecord.length>0}clearDiffRecord(){this.diffRecord=[];for(const e in this.targetMonitors){const t=this.targetMonitors[e];t.hasDiffRecord()&&t.clearDiffRecord()}}onChanged(e){this.changedHandlers.push(e)}removeOnChanged(e){(0,s.bX)(this.changedHandlers,e)}invokeCallbacks(e){if(this.changedHandlers.length>0)for(const t of this.changedHandlers)t(e)}invokeChangeHandlers(e){switch(this.config.aggregationType){case r.E.Immediate:this.invokeCallbacks(e);break;case r.E.NextFrame:this.awaitingInvoke||(this.awaitingInvoke=!0,this.updatePhaseSync.after(o.A.End).then((()=>{this.awaitingInvoke=!1,this.invokeCallbacks(e)})));break;case r.E.Manual:}}}},67495:(e,t,n)=>{"use strict";n.d(t,{c:()=>MapMonitor});var i=n(60673),s=n(65834),r=n(54929);class MapMonitor extends i.Z8{constructor(e,t,n){super(t,n),this.target=e;for(const i of e.keys){const r=e.get(i),o=new s.u(r,t,n);o.onChanged(this.triggerChangeHandlers),this.targetMonitors[i]=o}const o={onAdded:(e,o)=>{const a=new s.u(e,t,n);a.onChanged(this.triggerChangeHandlers),this.targetMonitors[o]=a;const l=this.diffRecord.findIndex((e=>e.index===o));-1!==l&&this.diffRecord.splice(l,1);const c=new i.AQ(o,i.KI.added,(0,r.p$)(e));-1===l&&this.diffRecord.push(c),this.triggerChangeHandlers(c)},onRemoved:(e,t)=>{delete this.targetMonitors[t];const n=this.diffRecord.findIndex((e=>e.index===t));-1!==n&&this.diffRecord.splice(n,1);const s=new i.AQ(t,i.KI.removed,(0,r.p$)(e));-1===n&&this.diffRecord.push(s),this.triggerChangeHandlers(s)}};this.target.onElementChanged(o)}commitChanges(){this.invokeCallbacks(this.getDiffRecord())}getDiffRecord(){const e=[];for(const t in this.targetMonitors){const n=this.targetMonitors[t];if(n.hasDiffRecord()){const s=n.getDiffRecord(),o=this.diffRecord.findIndex((e=>e.index===t));-1!==o?(0,r.TS)(this.diffRecord[o].diff,s):e.push(new i.AQ(t,i.KI.updated,s))}}return this.diffRecord.concat(e)}}},65834:(e,t,n)=>{"use strict";n.d(t,{u:()=>Monitor});var i=n(18537),s=n(54929),r=n(70446),o=n(95987);class Monitor{constructor(e,t,n){this.updatePhaseSync=n,this.target=e,this.clearDiffRecord(),this.target.onChanged((()=>{this.diffRecord=(0,s.br)(this.originalData,(0,s.p$)(this.target),t.shallow),this.handleAggregation()})),this.aggregationType=t.aggregationType,this.changedHandlers=[]}hasDiffRecord(){return Object.keys(this.diffRecord).length>0}getDiffRecord(){return this.diffRecord}clearDiffRecord(){this.originalData=(0,s.p$)(this.target),this.diffRecord={}}onChanged(e){this.changedHandlers.push(e)}removeOnChanged(e){(0,o.bX)(this.changedHandlers,e)}commitChanges(){this.triggerChangeHandlers(this.diffRecord)}handleAggregation(){switch(this.aggregationType){case i.E.Immediate:this.triggerChangeHandlers(this.diffRecord);break;case i.E.NextFrame:if(!this.updatePhaseSync)throw new Error("handleAggregation() -> Next frame aggregation requested, but updatePhaseSync is null");this.nextFramePromise||(this.nextFramePromise=this.updatePhaseSync.after(r.A.Begin).then((()=>{this.triggerChangeHandlers(this.diffRecord)})).finally((()=>{this.nextFramePromise=void 0})));break;case i.E.Duration:throw new Error("AggregationType.Duration: Please implement me :)");case i.E.Manual:}}triggerChangeHandlers(e){if(this.changedHandlers.length>0)for(const t of this.changedHandlers)t(e)}}},15183:(e,t,n)=>{"use strict";n.d(t,{y:()=>Observable});var i=n(91183);class Observable{constructor(){this.isObservable=!0,this._dirtyObservable=!1,this._activeObservable=!0,this._observerNotifying=!1,this._changeObservers=new Set,this._parentObservables=new Set,this._childObservables=new Set,Object.defineProperties(this,{isObservable:{value:this.isObservable,writable:!1,enumerable:!1},_dirtyObservable:{value:this._dirtyObservable,enumerable:!1},_activeObservable:{value:this._activeObservable,enumerable:!1},_observerNotifying:{value:this._observerNotifying,enumerable:!1},_changeObservers:{value:this._changeObservers,writable:!1,enumerable:!1},_childObservables:{value:this._childObservables,writable:!1,enumerable:!1},_parentObservables:{value:this._parentObservables,writable:!1,enumerable:!1}})}onChanged(e){if(this._changeObservers.has(e))throw new Error("This observer function is already observing this Observable, and double subscriptions are not supported.");return(0,i.k1)((()=>this._changeObservers.add(e)),(()=>this.removeOnChanged(e)),!0)}removeOnChanged(e){this._changeObservers.delete(e)}notifyObservers(){if(this._dirtyObservable&&!this._observerNotifying&&this._activeObservable){this._observerNotifying=!0;for(const e of this._changeObservers)this.notifyObserver(e);this._dirtyObservable=!1,this._observerNotifying=!1}}notifyObserver(e){e(void 0)}notifyDown(){for(const e of this._childObservables)e.notifyDown();this.notifyObservers()}notifyUp(){for(const e of this._parentObservables)e.notifyUp();this.notifyObservers()}setDirty(e=!0){this.setDirtyUp(),e&&this.notifyUp()}setDirtyUp(){if(!this._dirtyObservable){this._dirtyObservable=!0;for(const e of this._parentObservables)e.setDirtyUp()}}addChildObservable(e){Observable.isObservable(e)&&(this._childObservables.add(e),e._parentObservables.add(this))}removeChildObservables(e){Observable.isObservable(e)&&(this._childObservables.delete(e),e._parentObservables.delete(this))}atomic(e){if(!this._activeObservable)return e();try{this.setActive(!1),e()}finally{this.setActive(!0)}}setActive(e){const t=this._activeObservable;this._activeObservable=e,!t&&e&&this.notifyObservers();for(const t of this._childObservables)t.setActive(e)}deepCopy(){throw Error("deepCopy is only implemented in subclasses of Observable")}static isObservable(e){return e&&e.isObservable}}},29984:(e,t,n)=>{"use strict";n.d(t,{d:()=>ObservableArray,C:()=>r});var i=n(15183),s=n(54929);class ObservableArray extends i.y{constructor(){super(),this.isObservableArray=!0,this.elements=[]}push(e){return this.elements.push(e),this.addChildObservable(e),this.setDirty(),this.length}concat(e){const t=this.elements.length;this.elements=this.elements.concat(e);for(let e=t;e<this.elements.length;e++)this.addChildObservable(this.elements[e]);return this.setDirty(),this.length}replace(e){for(const e of this.elements)this.removeChildObservables(e);return this.elements=[],this.concat(e)}remove(e){if(e<0||e>=this.length)throw new Error(`Index ${e} not in range of ObservableArray`);const[t]=this.elements.splice(e,1);this.removeChildObservables(t),this.setDirty()}update(e,t){const n=this.elements[e];n!==t&&(this.elements[e]=t,this.removeChildObservables(n),this.addChildObservable(t),this.setDirty())}get length(){return this.elements.length}set length(e){if(e<this.elements.length){for(let t=this.elements.length-1;t>=e;t--){const e=this.elements[t];this.removeChildObservables(e)}this.elements.length=e,this.setDirty()}}values(){return[...this.elements]}filter(e){return this.elements.filter(e)}find(e){return this.elements.find(e)}*[Symbol.iterator](){for(const e of this.elements)yield e}map(e,t){return this.elements.map(e,t)}forEach(e,t){this.elements.forEach(e,t)}sort(e){this.elements.sort(e)}get(e){return this.elements[e]}findIndex(e,t){return this.elements.findIndex(e,t)}indexOf(e){return this.elements.indexOf(e)}splice(e,t,...n){let i;if(n.length){i=this.elements.splice(e,t,...n);for(const e of n)this.addChildObservable(e)}else i=this.elements.splice(e,t);for(const e of i)this.removeChildObservables(e);return this.setDirty(),i}insert(e,t){if(e>this.elements.length)throw new Error(`Tried to insert at index ${e} in an array that's only ${this.elements.length} long`);e!==this.elements.length?(this.elements.splice(e,0,t),this.addChildObservable(t),this.setDirty()):this.push(t)}shift(){const e=this.elements.shift();return e&&(this.removeChildObservables(e),this.setDirty()),e}move(e,t){if(t>this.elements.length-1)throw Error("Index to move to is out of bounds");const n=this.elements[e];this.elements.splice(e,1),this.elements.splice(t,0,n),this.setDirty()}includes(e,t){return this.elements.includes(e,t)}some(e,t){return this.elements.some(e,t)}every(e,t){return this.elements.every(e,t)}onElementChanged(e){let t=this.elements.slice();return this.onChanged((()=>{for(const n in t){const i=parseInt(n,10);e.onRemoved&&void 0===this.get(i)&&e.onRemoved(t[i],i)}for(const n in this.elements){const s=parseInt(n,10),r=this.get(s);void 0===t[s]?e.onAdded&&e.onAdded(r,s):(i.y.isObservable(r)&&r._dirtyObservable||r!==t[s])&&(e.onUpdated?e.onUpdated(r,s):e.onRemoved&&null===r&&e.onRemoved(t[s],s))}t=this.elements.slice()}))}deepCopy(){return this.map((e=>(0,s.p$)(e)))}}const r=e=>{const t=new ObservableArray;return e&&t.concat(e),t}},66910:(e,t,n)=>{"use strict";n.d(t,{v:()=>ObservableMap,q:()=>o});var i=n(15183),s=n(54929);function r(e){return(0,s.hj)(e)?""+e:e}class ObservableMap extends i.y{constructor(){super(),this.map={},this._keysSet=new Set,this._keysList=[]}get keys(){return this._keysList.slice()}get values(){return this._keysList.map((e=>this.get(e)))}entries(){const e=[];for(const t in this.map)e.push([t,this.map[t]]);return e}get length(){return this._keysList.length}*[Symbol.iterator](){for(const e of this._keysList)yield this.get(e)}get(e){return this.map[e]}has(e){return void 0!==this.map[e]}set(e,t){e=r(e);this.map[e]!==t&&(this.removeChildObservables(this.map[e]),this.addChildObservable(t),this.map[e]=t,this._keysSet.has(e)||(this._keysList.push(e),this._keysSet.add(e)),this.setDirty())}clear(){if(this.length>0){for(const e in this.map)this.removeChildObservables(this.map[e]);this.map={},this._keysSet.clear(),this._keysList=[],this.setDirty()}}replace(e){this.clear();for(const t in e)this.set(t,e[t])}delete(e){e=r(e),this.removeChildObservables(this.map[e]);const t=this.map.hasOwnProperty(e);return delete this.map[e],t&&(this._keysSet.delete(e),this._keysList.splice(this._keysList.indexOf(e),1),this.setDirty()),t}onElementChanged(e){let t=Object.assign({},this.map);return this.onChanged((()=>{for(const n in t)e.onRemoved&&!this.has(n)&&e.onRemoved(t[n],n);for(const n of this._keysList){const s=this.get(n);void 0===t[n]?e.onAdded&&e.onAdded(s,n):(i.y.isObservable(s)&&s._dirtyObservable||s!==t[n])&&(e.onUpdated&&null!==s?e.onUpdated(s,n):e.onRemoved&&null===s&&e.onRemoved(t[n],n))}t=Object.assign({},this.map)}))}deepCopy(){const e={};for(const t of this._keysList)e[t]=(0,s.p$)(this.map[t]);return e}}const o=(e={})=>{const t=new ObservableMap;return t.replace(e),t}},98254:(e,t,n)=>{"use strict";n.d(t,{T:()=>ObservableObject});var i=n(15183),s=n(54929),r=n(87100),o=n(5477),a=n(91183);const l=new o.Z("ObservableObject"),c=1===(0,r.eY)("debug",0);class ObservableObject extends i.y{constructor(){super(),this._propertyObservables={},this._valueCache={},this._dirtyKeys=new Set,Object.defineProperties(this,{_propertyObservables:{value:this._propertyObservables,writable:!1,enumerable:!1},_valueCache:{value:this._valueCache,writable:!1,enumerable:!1},_dirtyKeys:{value:this._dirtyKeys,writable:!1,enumerable:!1}}),c&&setTimeout((()=>{!function(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n],e._valueCache[n]=e[n],Object.defineProperty(e,n,{get:()=>t[n],set:s=>{const r=e._valueCache[n];(r!==s||i.y.isObservable(r)&&r._dirtyObservable)&&u(e,n),t[n]=s},enumerable:!0}))}(this)}),1)}onPropertyChanged(e,t){if(this._propertyObservables[e]||(this._propertyObservables[e]=[]),-1!==this._propertyObservables[e].indexOf(t))throw new Error("This observer function is already observing this Observable, and double subscriptions are not supported.");return(0,a.k1)((()=>this._propertyObservables[e].push(t)),(()=>this.removeOnPropertyChanged(e,t)),!0,e)}removeOnPropertyChanged(e,t){const n=this._propertyObservables[e].indexOf(t);n>=0&&this._propertyObservables[e].splice(n,1)}commit(e=[]){for(const t of e)this._dirtyKeys.add(t);this.setDirtyUp(),this.notifyUp()}setDirtyUp(){for(const e in this){if(!this.hasOwnProperty(e))continue;const t=this._valueCache[e],n=this[e],s=typeof n,r="undefined"===s||"string"===s||"number"===s||"boolean"===s||null===n;if(this._propertyObservables[e]&&!r&&!i.y.isObservable(n))throw new Error(`Property ${e} has property listeners, but has a value that is not observable or a primitive!`);t!==n?(this.removeChildObservables(t),this.addChildObservable(n),this._valueCache[e]=n,this._dirtyKeys.add(e)):i.y.isObservable(t)&&t._dirtyObservable&&this._dirtyKeys.add(e)}super.setDirtyUp()}notifyObservers(){if(this._dirtyObservable&&!this._observerNotifying&&this._activeObservable){this._observerNotifying=!0;for(const e of this._dirtyKeys){for(const t of this._propertyObservables[e]||[])this.notifyPropertyObserver(t,e);c&&h(this,e)}this._observerNotifying=!1,this._dirtyKeys.clear()}super.notifyObservers()}notifyPropertyObserver(e,t){e(this._valueCache[t])}notifyObserver(e){e(this)}deepCopy(){const e={};for(const t in this)this.hasOwnProperty(t)&&(e[t]=(0,s.p$)(this[t]));return e}}const d=new Map;function u(e,t){d.has(e)||d.set(e,{});d.get(e)[t]=Error()}function h(e,t){if(d.has(e)){const n=d.get(e);n[t]&&delete n[t]}}if(c){const e=setInterval((()=>{(function(){for(const e of d.values())for(const t in e)return l.error(`ObservableObject property "${t}" was still dirty after one tick! Did you forget a .commit()?`),l.error("See stack trace of the property write below:"),l.error(e[t].stack),!0;return!1})()&&void 0!==e&&clearInterval(e)}),16)}},36013:(e,t,n)=>{"use strict";n.d(t,{$:()=>l});var i=n(15183),s=n(67779),r=n(54929);function o(e,t){const n=Object.getOwnPropertyNames(t);for(const i of n)void 0===e[i]&&("function"==typeof t[i]?Object.defineProperty(e,i,{value:t[i].bind(e)}):Object.defineProperty(e,i,{value:t[i],writable:!0}));null!==Object.getPrototypeOf(Object.getPrototypeOf(t))&&o(e,Object.getPrototypeOf(t))}var a=n(98254);const l=e=>{if(!e||0===Object.keys(e).length)throw new Error("createObservableProxy() only works on objects that has predefined keys. Did you mean createObservableMap or createObservableArray?");if(e instanceof a.T)throw new Error("Using ObservableProxy on an ObservableObject is a BUG!");if(e.isObservableProxy)return e;const t={},n=new i.y,l=Object.create(e);Object.defineProperties(l,{isObservableProxy:{value:!0},onPropertyChanged:{value:(e,n)=>t[e].onChanged(n)},removeOnPropertyChanged:{value:(e,n)=>t[e].removeOnChanged(n)},deepCopy:{value:()=>(0,r.p$)(e)}}),o(l,n);for(const n in e)if(e.hasOwnProperty(n)){const i=(0,s.Y)(e[n]);t[n]=i,l.addChildObservable(i),Object.defineProperty(l,n,{get:()=>e[n],set:i=>{e[n]=i,t[n].value=i},enumerable:!0})}return Object.seal(l),l}},67779:(e,t,n)=>{"use strict";n.d(t,{f:()=>ObservableValue,Y:()=>r});var i=n(15183),s=n(54929);class ObservableValue extends i.y{constructor(e){super(),this.value=e}notifyObserver(e){e(this.value)}get value(){return this._value}set value(e){this._value!==e&&(this.removeChildObservables(this._value),this.addChildObservable(e),this._value=e,this.setDirty())}deepCopy(){return(0,s.p$)(this._value)}}const r=e=>new ObservableValue(e)},97428:(e,t,n)=>{"use strict";n.d(t,{$:()=>PureObservable});class PureObservable{constructor(){this.observers=new Set}observe(e){this.observers.add(e);const t=this;return{renew(){t.observers.add(e)},cancel(){t.removeObserver(e)}}}removeObserver(e){this.observers.delete(e)}notify(){for(const e of this.observers)e.notify()}}},52549:(e,t,n)=>{"use strict";var i;n.d(t,{g:()=>i}),function(e){e.BLURS="blurs",e.BLUR_SUGGESTIONS="blur-suggestions",e.FLOORS="floors",e.HIGHLIGHTS="highlights",e.LABELS="labels",e.MATTERTAGS="mattertags",e.MEASUREMENTS="measurements",e.NOTES="notes",e.ORDERED_LISTS="orderedLists",e.PHOTOS="photos",e.SETTINGS="settings",e.START_LOCATION="startlocation",e.SWEEPS="sweeps",e.LAYERS="layers"}(i||(i={}))},36032:(e,t,n)=>{"use strict";n.d(t,{V:()=>AggregateSubscription});class AggregateSubscription{constructor(...e){this.subs=e}renew(){for(const e of this.subs)e.renew()}cancel(){for(const e of this.subs)e.cancel()}}},91183:(e,t,n)=>{"use strict";n.d(t,{gm:()=>Catalog,ne:()=>DataCatalog,k1:()=>s});const i=new(n(5477).Z)("Subscription");class Catalog{constructor(e,t,n){this.watchedData=e,this.registerSubscription=t,this.unregisterSubscription=n}createSubscription(e,t){return new Subscription((()=>this.registerSubscription(e)),(()=>this.unregisterSubscription(e)),t)}getData(){return this.watchedData()}}class DataCatalog{constructor(e,t,n){this.watchedData=e,this.registerSubscription=t,this.unregisterSubscription=n}createSubscription(e,t){const n=()=>e(this.watchedData());return new Subscription((()=>this.registerSubscription(n)),(()=>this.unregisterSubscription(n)),t)}getData(){return this.watchedData()}}class Subscription{constructor(e,t,n=!1,i=""){this.startSubscription=e,this.endSubscription=t,this.id=i,this.isSubbed=!1,n&&this.renew()}renew(){this.isSubbed?i.debugWarn(`Duplicate subscription renew ${this.id}`):(this.startSubscription(),this.isSubbed=!0)}cancel(){this.isSubbed&&(this.endSubscription(),this.isSubbed=!1)}get active(){return this.isSubbed}}function s(e,t,n=!0,i=""){return new Subscription(e,t,n,i)}},54929:(e,t,n)=>{"use strict";n.d(t,{p$:()=>s,TS:()=>r,br:()=>o,NK:()=>a,hj:()=>l});const i=e=>"propertyObservers"===e||"changeObservers"===e||"isObservable"===e||"childChangeFunctions"===e||"isObservableProxy"===e||"diffRoot"===e||"elementChangedHandlers"===e||"knownKeysMap"===e||"knownKeysList"===e||"isVector2"===e||"isVector3"===e||"isQuaternion"===e||"onPropertyChanged"===e||"removeOnPropertyChanged"===e||"onChanged"===e||"target"===e,s=(e,t=[])=>{if(void 0!==e){if(t.includes(e))return Array.isArray(e)||ArrayBuffer.isView(e)?[]:{};if(e instanceof Date)return new Date(e);if(null===e)return null;if(e.deepCopy)return e.deepCopy();if(e.isQuaternion)return{x:e.x,y:e.y,z:e.z,w:e.w};if("object"==typeof e){const n=Array.isArray(e)||ArrayBuffer.isView(e)?[]:{};for(const r in e){if(i(r))continue;const o=e[r];o instanceof Date?n[r]=new Date(o):"function"!=typeof o&&(t.push(e),n[r]="object"==typeof o?s(o,t):o,t.pop())}return n}return e}},r=(e,t)=>{for(const n in t){if("function"==typeof t[n])continue;if(i(n)&&!e.hasOwnProperty(n))continue;const o=t[n];if(e.hasOwnProperty(n)){const t=e[n];(null===t?null:typeof t)!==(null===o?null:typeof o)?e[n]=s(o):"object"==typeof t?t instanceof Date?e[n]=new Date(o):r(t,o):e[n]=o}else e[n]=s(o)}},o=(e,t,n=!1)=>{const i={};for(const s in e){const r=e[s],l=t[s];a(r,l)&&(void 0===r||void 0===l||typeof r!=typeof l||"object"!=typeof r?i[s]=l:Array.isArray(l)?a(r,l)&&(i[s]=l):i[s]=n?l:o(r,l))}for(const n in t)n in e||(i[n]=t[n]);return i},a=(e,t)=>{if(null===e||"object"!=typeof e)return e!==t;if(!t)return!0;for(const n in t)if(!(n in e))return!0;for(const n in e)if(a(e[n],t[n]))return!0;return!1};function l(e){return"number"==typeof e}},91754:(e,t,n)=>{"use strict";var i;n.d(t,{h:()=>i}),function(e){e.NOTE="note",e.COMMENT="comment",e.MATTERTAG="mattertag"}(i||(i={}))},77364:(e,t,n)=>{"use strict";n.d(t,{I:()=>Color});var i=n(84428);class Color{}Color.MP_BRAND=new i.Color("rgb(255, 49, 88)"),Color.MATTERTAG_BLUE=new i.Color("rgb(3, 104, 125)"),Color.WHITE=new i.Color("rgb(255, 255, 255)"),Color.BLACK=new i.Color("rgb(0, 0, 0)"),Color.RED=new i.Color(16711680),Color.GREEN=new i.Color(65280),Color.BLUE=new i.Color(255),Color.YELLOW=new i.Color(16776960)},95891:(e,t,n)=>{"use strict";var i;n.d(t,{Z:()=>s}),function(e){e[e.GL_TEXTURE_CUBE_MAP_POSITIVE_X=0]="GL_TEXTURE_CUBE_MAP_POSITIVE_X",e[e.GL_TEXTURE_CUBE_MAP_NEGATIVE_X=1]="GL_TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.GL_TEXTURE_CUBE_MAP_POSITIVE_Y=2]="GL_TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y=3]="GL_TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.GL_TEXTURE_CUBE_MAP_POSITIVE_Z=4]="GL_TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z=5]="GL_TEXTURE_CUBE_MAP_NEGATIVE_Z"}(i||(i={}));const s=i},99295:(e,t,n)=>{"use strict";var i;n.d(t,{z:()=>i}),function(e){e[e.boundingSkybox=-100]="boundingSkybox",e[e.default=0]="default",e[e.panoMarker=4]="panoMarker",e[e.reticule=5]="reticule",e[e.grid=5]="grid",e[e.meshTrims=5]="meshTrims",e[e.pins360=6]="pins360",e[e.portals=9]="portals",e[e.rotators=10]="rotators",e[e.pins=14]="pins",e[e.pinSelectedHalo=15]="pinSelectedHalo",e[e.lines=20]="lines",e[e.endpoints=21]="endpoints",e[e.labels=22]="labels",e[e.gizmos=23]="gizmos",e[e.ghostFloorDepthPrepass=50]="ghostFloorDepthPrepass",e[e.ghostFloor=51]="ghostFloor",e[e.colorOverlay=1e3]="colorOverlay"}(i||(i={}))},36589:(e,t,n)=>{"use strict";var i;n.d(t,{C:()=>i}),function(e){e.TEXT="text",e.LINK="link",e.HASH="hash",e.USER="user"}(i||(i={}))},77280:(e,t,n)=>{"use strict";n.d(t,{f:()=>Vectors,e:()=>i});var i,s=n(84428);class Vectors{}Vectors.UP=new s.Vector3(0,1,0),Vectors.DOWN=new s.Vector3(0,-1,0),Vectors.LEFT=new s.Vector3(-1,0,0),Vectors.RIGHT=new s.Vector3(1,0,0),Vectors.FORWARD=new s.Vector3(0,0,-1),Vectors.BACK=new s.Vector3(0,0,1),Vectors.ZERO=new s.Vector3(0,0,0),Vectors.UNIT=new s.Vector3(1,1,1),Vectors.HORIZONTAL_PLANE=new s.Vector3(1,0,1),function(e){e.NONE="NONE",e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e.FORWARD="FORWARD",e.BACK="BACK",e.ZERO="ZERO",e.UNIT="UNIT",e.HORIZONTAL_PLANE="HORIZONTAL_PLANE"}(i||(i={}))},40603:(e,t,n)=>{"use strict";n.d(t,{y:()=>BaseException});var i=n(96557);class BaseException extends Error{constructor(e,t){super(e instanceof Error?e.message:e),this.name="BaseException",t&&(this.code=t),e instanceof Error&&(this.originalError=e,(0,i.Ad)(e)&&(this.isMock=!0))}}},62631:(e,t,n)=>{"use strict";n.d(t,{n:()=>NotImplementedError});var i=n(40603);class NotImplementedError extends i.y{constructor(e="Not implemented"){super(e),this.name="NotImplemented"}}},18050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>OutOfRangeException});var i=n(40603);class OutOfRangeException extends i.y{constructor(e="Out of range"){super(e),this.name="OutOfRangeException"}}},96557:(e,t,n)=>{"use strict";function i(e){return!!(e&&e instanceof Error&&e.code)}function s(e){return!!(e&&e instanceof Error&&e.originalError)}function r(e){return!!(e&&e instanceof Error&&e.isMock)}function o(e){return i(e)?e.code:""}function a(e){const t=[];let n=e;for(;n;)i(n)&&t.push(n.code),n=s(n)?n.originalError:void 0;return t}n.d(t,{bh:()=>i,Ad:()=>r,zg:()=>o,UX:()=>a})},97236:(e,t,n)=>{"use strict";n.d(t,{U:()=>MaasAttachmentsStore});var i=n(62631),s=n(33762),r=n(5005),o=n(12621);class MaasAttachmentsStore{constructor(e={readonly:!0}){const{baseUrl:t}=e;this.config=e,this.client=new s.w({baseUrl:t,server:o.wO})}async create(...e){throw new i.n}async read(e={}){throw new i.n}async update(...e){throw new i.n}async delete(...e){throw new i.n}async query(e,t,n={}){if(!MaasAttachmentsStore.baseViewId)throw new r.SN("Cannot read Attachments, no model view configured");return this.client.query(e,t,n)}async mutate(e,t,n){const{readonly:i}=this.config;if(i)throw new r.pp("Cannot write Attachments, model is in read-only mode");if(!MaasAttachmentsStore.baseViewId)throw new r.SN("Cannot write Attachments, no model view configured");return this.client.mutate(e,t,n)}static setBaseViewId(e){MaasAttachmentsStore.baseViewId=e}}MaasAttachmentsStore.baseViewId=null},66225:(e,t,n)=>{"use strict";n.d(t,{u:()=>MdsStore});var i=n(62631),s=n(33762),r=n(5005),o=n(5477),a=n(87100),l=n(91183);const c=new o.Z("MdsStore");class MdsStore{constructor(e={readonly:!0}){this.viewId=null,this.newDataCallbacks=new Set;const{baseUrl:t,viewId:n}=e;this.config=e,this.client=new s.w({baseUrl:t}),n&&(this.viewId=n)}dispose(){MdsStore.refreshableStores.has(this)&&MdsStore.refreshableStores.delete(this)}async create(...e){throw new i.n}async read(e={}){throw new i.n}async update(...e){throw new i.n}async delete(...e){throw new i.n}onNewData(e){MdsStore.refreshableStores.add(this);return(0,l.k1)((()=>this.newDataCallbacks.add(e)),(()=>this.newDataCallbacks.delete(e)))}async refresh(){const e=await this.read();return await Promise.all(Array.from(this.newDataCallbacks.values()).map((t=>t(e)))),e}async query(e,t,n={}){if(!this.getViewId())throw new r.SN("No model view specified for query");const i=Object.assign({fetchPolicy:"cache-first",prefetchKey:this.prefetchKey},n),{fetchPolicy:s}=n;let o;if("no-cache"!==s)for(const n of MdsStore.sharedCache)if(o=await n.read(e,t,i),void 0!==o){c.debug(`Using cached response for ${i.prefetchKey}`);break}return o||this.client.query(e,t,i)}async mutate(e,t,n){const{readonly:i}=this.config;if(i)throw new r.pp("Cannot mutate in read-only mode");if(!this.getViewId())throw new r.SN("Cannot mutate, no view was specified");return this.client.mutate(e,t,n).then((e=>{const t="53100"===(0,a.eY)("error","");if(!s.w.isOk(e)||t){const n=new r.w0(s.w.getErrorMessage(e));throw t&&(n.isMock=!0),n}return e}))}setStoreViewId(e){this.viewId=e}getViewId(){return this.viewId||MdsStore.currentViewId||MdsStore.baseViewId}static async setCurrentViewId(e){const t=Array.from(MdsStore.refreshableStores.values());MdsStore.currentViewId=e,await Promise.all(t.map((e=>e.refresh())))}static setBaseViewId(e){MdsStore.baseViewId=e}static addSharedCache(e){MdsStore.sharedCache.add(e)}static removeSharedCache(e){MdsStore.sharedCache.delete(e)}}MdsStore.baseViewId=null,MdsStore.currentViewId=null,MdsStore.sharedCache=new Set,MdsStore.refreshableStores=new Set},33762:(e,t,n)=>{"use strict";n.d(t,{w:()=>ModelApiClient});var i=n(29474),s=n(23564),r=n(81707),o=n(80496);var a=n(73957),l=n(5477),c=n(90778),d=n(5005),u=n(12621),h=n(78804);const p=new l.Z("model-api-client");class ModelApiClient{constructor(e={}){const t=e.baseUrl||window.location.origin,n=e.server||u.fH;this.graphUrl=e.url||`${t}${n}`,p.debug(`Initialized Model API client for ${this.graphUrl}`);const a=(0,i.createHttpLink)({uri:this.graphUrl}),l=(c=(e,{headers:t={}})=>((0,h.m)(this.graphUrl,t),{headers:t}),new r.i0((function(e,t){var n=(0,s._T)(e,[]);return new o.y$((function(i){var s;return Promise.resolve(n).then((function(t){return c(t,e.getContext())})).then(e.setContext).then((function(){s=t(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})})).catch(i.error.bind(i)),function(){s&&s.unsubscribe()}}))})));var c;this.apollo=new i.fe({link:l.concat(a),cache:new i.h4})}async query(e,t,n={}){const i=Object.assign(Object.assign({errorPolicy:"all"},n),{query:e,variables:t,fetchPolicy:"no-cache"});return this.apollo.query(i).then((e=>{const{data:t,errors:n}=e;return{data:t,errors:n}})).catch((e=>{throw p.error(e),new d.Zb(e,this.getApolloErrorCode(e))}))}async mutate(e,t,n={}){const i=Object.assign(Object.assign({errorPolicy:"all"},n),{mutation:e,variables:t});return this.apollo.mutate(i).then((e=>{const{data:t,errors:n}=e;return{data:t,errors:n}})).catch((e=>{throw p.error(e),new d.w0(e,this.getApolloErrorCode(e))}))}async upload(e,t,n,i){const s={};let r=0;(0,a.y)(n,((e,t,n)=>{if(e&&((i=e).filename&&i.blob&&i.blob instanceof Blob)){const i="file"+r++;s[i]=e,n[t]=`multipart:${i}`}var i}));const o=new FormData;for(const[e,t]of Object.entries(s))o.append(e,t.blob,t.filename);o.append("query",(0,c.S)(e)),o.append("operation",t),o.append("variables",JSON.stringify(n));const l=(0,h.m)(this.graphUrl,{});return this.uploadFormData(o,l,i).then((e=>{if(!ModelApiClient.isOk(e)){const t=ModelApiClient.getErrorCode(e)||"54200";throw new d.BR(ModelApiClient.getErrorMessage(e),t)}return e}))}getApolloErrorCode(e){var t;if(e instanceof i.cA){const n=null===(t=e.networkError)||void 0===t?void 0:t.statusCode;if(n)return`61${n}`}return"61000"}async uploadFormData(e,t,n){const i=new XMLHttpRequest;i.open("POST",this.graphUrl,!0),i.responseType="json",i.setRequestHeader("Accept","application/json"),n&&(i.upload.onprogress=n);for(const e in t)i.setRequestHeader(e,t[e]);return new Promise(((t,n)=>{i.onreadystatechange=()=>{4===i.readyState&&(200===i.status?t(i.response):0!==i.status&&n(new d.BR(`${i.status} ${i.statusText}`,`54${i.status}`)))},i.onerror=()=>{n(new d.BR("Network error","54002"))},i.send(e)}))}static isOk(e,t){if(t){const n=t.split(".");return 0===(e.errors||[]).filter((e=>{if(!e.path)return!0;for(let t=0;t<Math.min(e.path.length,n.length);t++)if(e.path[t]!==n[t])return!1;return!0})).length}return!(null==e?void 0:e.errors)||0===e.errors.length}static getErrorCode({errors:e}){var t;return(null==e?void 0:e.length)&&(null===(t=e[0].extensions)||void 0===t?void 0:t.code)||""}static getErrorMessage({errors:e}){let t="";return Array.isArray(e)&&e[0]&&(t=e[0].message||e[0].toString(),e.length>1&&(t+=` (+${e.length-1})`)),t}}ModelApiClient.version="2020.05.28"},55900:(e,t,n)=>{"use strict";var i;n.d(t,{h:()=>i}),function(e){e.CACHE="cache",e.PRELOAD="preload",e.NONE="none"}(i||(i={}))},5005:(e,t,n)=>{"use strict";n.d(t,{Zb:()=>MdsReadError,w0:()=>MdsWriteError,BR:()=>MdsUploadError,SN:()=>InvalidViewError,pp:()=>ReadOnlyError});var i=n(40603);class MdsReadError extends i.y{constructor(e,t="62001"){super(e),this.name="MdsReadError",this.code=t}}class MdsWriteError extends i.y{constructor(e,t="63001"){super(e),this.name="MdsWriteError",this.code=t}}class MdsUploadError extends i.y{constructor(e,t="63002"){super(e),this.name="MdsUploadError",this.code=t}}class InvalidViewError extends i.y{constructor(e,t="52404"){super(e),this.name="InvalidView",this.code=t}}class ReadOnlyError extends i.y{constructor(e,t="53001"){super(e),this.name="ReadOnly",this.code=t}}},64069:(e,t,n)=>{"use strict";var i,s,r,o,a,l,c,d,u,h,p,m,g,f,v,b,y,S,E,T,O,_,A,w,N,P,I,k,C,L,M,D,R,x,j,U,H,F,B,V,G,W,z,K,Y,q,$,Z,Q,X,J,ee,te,ne,ie,se,re,oe,ae,le,ce,de,ue,he,pe,me,ge,fe,ve;n.d(t,{l5:()=>l,EV:()=>d,km:()=>T,Z1:()=>A,L0:()=>I,eR:()=>k,XR:()=>C,X$:()=>L,x6:()=>M,rq:()=>D,gb:()=>V,LU:()=>W,Y6:()=>K,bW:()=>Y,Mk:()=>q,ud:()=>Z,EG:()=>Q,uI:()=>X,BE:()=>ee,d7:()=>ie,J1:()=>le,y8:()=>pe,nL:()=>me,wO:()=>fe}),function(e){e.EMPTY="empty",e.PARSED="parsed",e.RAW="raw",e.VERIFIED="verified"}(i||(i={})),function(e){e.FULL="full",e.NONE="none",e.PARTIAL="partial"}(s||(s={})),function(e){e.IMPRESSION="impression",e.MODELLOADED="modelLoaded"}(r||(r={})),function(e){e.LAST7DAYS="last7Days",e.LAST30DAYS="last30Days",e.LIFETIME="lifetime"}(o||(o={})),function(e){e.LZMA="lzma",e.NONE="none"}(a||(a={})),function(e){e.AVAILABLE="available",e.LOCKED="locked",e.UNAVAILABLE="unavailable"}(l||(l={})),function(e){e.EXTERNAL="external",e.UPLOAD="upload"}(c||(c={})),function(e){e.IMAGE="image",e.PDF="pdf",e.RICH="rich",e.VIDEO="video",e.ZIP="zip"}(d||(d={})),function(e){e.DELETED="deleted",e.PROVISIONED="provisioned",e.TRASHED="trashed"}(u||(u={})),function(e){e.LOCKED="locked",e.UNAVAILABLE="unavailable",e.UNLOCKED="unlocked"}(h||(h={})),function(e){e.COMPLETED="completed",e.FAILED="failed",e.INPROGRESS="inprogress",e.ORDERED="ordered",e.PLACED="placed",e.PREVIEWABLE="previewable"}(p||(p={})),function(e){e.DOLLHOUSE="dollhouse",e.FLOORPLAN="floorplan",e.OUTDOOR="outdoor",e.PANORAMA="panorama",e.TRANSITION="transition",e.UNKNOWN="unknown"}(m||(m={})),function(e){e.WALL="wall",e.WINDOW="window"}(g||(g={})),function(e){e.HANDHELD="handheld",e.OTHER="other",e.PRO="pro",e.SPHERICAL="spherical"}(f||(f={})),function(e){e.DUPLICATE="duplicate",e.FAIL="fail",e.REPLACE="replace",e.SKIP="skip"}(v||(v={})),function(e){e.CREATED="created",e.MODIFIED="modified"}(b||(b={})),function(e){e.FAST="fast",e.NORMAL="normal",e.URGENT="urgent"}(y||(y={})),function(e){e.KILOMETERS="kilometers",e.MILES="miles"}(S||(S={})),function(e){e.MATTERTAGS="Mattertags",e.NOTECOMMENTS="NoteComments",e.NOTES="Notes"}(E||(E={})),function(e){e.BLOCKED="blocked",e.DISABLED="disabled",e.GATED="gated",e.UNLOCKED="unlocked"}(T||(T={})),function(e){e.MAY="may",e.MUST="must",e.MUST_NOT="must_not"}(O||(O={})),function(e){e.ALPHA="alpha",e.COLORED_ROOMS="colored_rooms",e.MEASUREMENTS="measurements",e.PHOTOGRAMY="photogramy",e.SCHEMATIC="schematic"}(_||(_={})),function(e){e.REEL="reel",e.STORY="story"}(A||(A={})),function(e){e.COMPLETED="completed",e.CREATED="created",e.FAILED="failed",e.INPROGRESS="inprogress"}(w||(w={})),function(e){e.ANCHORLOCATION="AnchorLocation",e.HIGHLIGHTREEL="HighlightReel",e.LABEL="Label",e.MATTERTAG="Mattertag",e.MEASUREMENTPATH="MeasurementPath",e.MODELFLOOR="ModelFloor",e.MODELROOM="ModelRoom",e.NOTE="Note",e.OBJECTANNOTATION="ObjectAnnotation",e.ORDEREDLIST="OrderedList",e.PANORAMICIMAGELOCATION="PanoramicImageLocation",e.PHOTO="Photo"}(N||(N={})),function(e){e.SHOWCASE="showcase"}(P||(P={})),function(e){e.PHOTO="photo",e.RICH="rich",e.VIDEO="video"}(I||(I={})),function(e){e.LINETYPE_2D="linetype_2D",e.LINETYPE_3D="linetype_3D"}(k||(k={})),function(e){e.DISABLED="disabled",e.MEASURE="measure",e.MEASUREANDVIEW="measureAndView"}(C||(C={})),function(e){e.FLOORS="floors",e.HIGHLIGHTREEL="highlightReel",e.IMAGE="image",e.LABELS="labels",e.MATTERTAGS="mattertags",e.MEASUREMENTPATHS="measurementPaths",e.ORDEREDLISTS="orderedLists",e.PLAYEROPTIONS="playerOptions",e.SWEEPS="sweeps"}(L||(L={})),function(e){e.FULL="full",e.PUBLIC="public",e.VIEWER="viewer"}(M||(M={})),function(e){e.BLACK="black",e.GREY="grey",e.WHITE="white"}(D||(D={})),function(e){e.DEFAULT="default",e.MLS="mls",e.UNBRANDED="unbranded"}(R||(R={})),function(e){e.BUNDLE_COMPLETED="bundle_completed",e.BUNDLE_REQUESTED="bundle_requested",e.DELETED="deleted",e.INSERTED="inserted",e.PROCESSED="processed",e.REPLACED="replaced",e.UPDATED="updated",e.UPLOADED="uploaded"}(x||(x={})),function(e){e.ID="id",e.INTERNALID="internalId",e.MLSID="mlsId"}(j||(j={})),function(e){e.DEFAULT="default",e.VR="vr"}(U||(U={})),function(e){e.ADDRESS="address",e.CAMERA="camera",e.CAMERAMANUFACTURER="cameraManufacturer",e.CAMERAMODEL="cameraModel",e.EXTENSIONTAG="extensiontag",e.GEODISTANCE="geoDistance",e.GEOREGION="geoRegion",e.ID="id",e.NAME="name",e.STANDARD="standard",e.SUMMARY="summary"}(H||(H={})),function(e){e.CREATED="created",e.LAST7IMPRESSIONSEVENTCOUNT="last7ImpressionsEventCount",e.LAST7MODELSLOADEDEVENTCOUNT="last7ModelsLoadedEventCount",e.LAST7MODELSLOADEDUSERCOUNT="last7ModelsLoadedUserCount",e.LAST30IMPRESSIONSEVENTCOUNT="last30ImpressionsEventCount",e.LAST30MODELSLOADEDEVENTCOUNT="last30ModelsLoadedEventCount",e.LAST30MODELSLOADEDUSERCOUNT="last30ModelsLoadedUserCount",e.LIFETIMEIMPRESSIONSEVENTCOUNT="lifetimeImpressionsEventCount",e.LIFETIMEMODELSLOADEDEVENTCOUNT="lifetimeModelsLoadedEventCount",e.LIFETIMEMODELSLOADEDUSERCOUNT="lifetimeModelsLoadedUserCount",e.MODIFIED="modified",e.SCORE="score"}(F||(F={})),function(e){e.COPY="copy",e.EDITED="edited",e.ORIGINAL="original",e.UNKNOWN="unknown"}(B||(B={})),function(e){e.ACTIVATING="activating",e.ACTIVATION_PENDING="activation_pending",e.ACTIVE="active",e.FAILED="failed",e.INACTIVATING="inactivating",e.INACTIVATION_PENDING="inactivation_pending",e.INACTIVE="inactive",e.PROCESSING="processing",e.STAGING="staging"}(V||(V={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(G||(G={})),function(e){e.PRIVATE="private",e.PUBLIC="public"}(W||(W={})),function(e){e.SERIAL="serial"}(z||(z={})),function(e){e.AUTO="auto",e.LEFT="left",e.RIGHT="right"}(K||(K={})),function(e){e.AUTO="auto",e.MANUAL="manual",e.UNPLACED="unplaced"}(Y||(Y={})),function(e){e.UPLOAD="upload",e.VISION="vision"}(q||(q={})),function(e){e.CYLINDRICAL="cylindrical",e.EQUIRECTANGULAR="equirectangular",e.SKYBOX="skybox"}($||($={})),function(e){e.COMMENT="comment",e.MATTERTAG="mattertag"}(Z||(Z={})),function(e){e.SNAPSHOT="snapshot",e.TOUR="tour"}(Q||(Q={})),function(e){e.USER="user",e.VISION="vision"}(X||(X={})),function(e){e.ICON="icon",e.ORIGINAL="original",e.PRESENTATION="presentation",e.PREVIEW="preview",e.THUMBNAIL="thumbnail",e.WEB="web"}(J||(J={})),function(e){e.EQUIRECTANGULAR="equirectangular",e.PHOTO2D="photo2D"}(ee||(ee={})),function(e){e.AVAILABILITY="availability",e.FLAG="flag",e.QUOTA="quota",e.VALUE="value"}(te||(te={})),function(e){e.COMPLETE="complete",e.FAILED="failed",e.INPROGRESS="inprogress",e.STAGING="staging"}(ne||(ne={})),function(e){e.OPEN="open",e.RESOLVED="resolved"}(ie||(ie={})),function(e){e.ALIGNED="aligned",e.FAILED="failed",e.UNALIGNED="unaligned"}(se||(se={})),function(e){e.ANCHOR="anchor",e.ID="id",e.LOCATION="location"}(re||(re={})),function(e){e.FACE_BLURRING="face_blurring",e.FIDUCIAL_DETECTION="fiducial_detection",e.FIDUCIAL_REMOVAL="fiducial_removal"}(oe||(oe={})),function(e){e.DEMO="demo",e.DISCOVERABLE="discoverable",e.FLAGGED="flagged",e.INACTIVE="inactive"}(ae||(ae={})),function(e){e.DEFAULT="default",e.DISABLED="disabled",e.ENABLED="enabled"}(le||(le={})),function(e){e.ASC="asc",e.DESC="desc"}(ce||(ce={})),function(e){e.ACCEPTED="accepted",e.DISMISSED="dismissed",e.REJECTED="rejected",e.UNREVIEWED="unreviewed"}(de||(de={})),function(e){e.HIGH="high",e.LOW="low"}(ue||(ue={})),function(e){e.AFTERNOON="afternoon",e.DAWN="dawn",e.DUSK="dusk",e.MORNING="morning",e.NIGHT="night"}(he||(he={})),function(e){e.FADE_TO_BLACK="fade_to_black",e.INSTANT="instant",e.INTERPOLATE="interpolate"}(pe||(pe={})),function(e){e.IMPERIAL="imperial",e.METRIC="metric"}(me||(me={})),function(e){e.CREATED="created",e.EMAIL="email",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.MODIFIED="modified"}(ge||(ge={})),function(e){e.DOLLHOUSE="dollhouse",e.FLOORPLAN="floorplan",e.MESH="mesh",e.PANORAMA="panorama"}(fe||(fe={})),function(e){e.BASIC="basic",e.NONE="none",e.TOKEN="token"}(ve||(ve={}))},12621:(e,t,n)=>{"use strict";n.d(t,{fH:()=>i,wO:()=>s,AR:()=>r,SJ:()=>o});const i="/api/mp/models/graph",s="/api/mp/attachments/graph",r="features/mds_prefetch",o="data.model.views"},60661:(e,t,n)=>{"use strict";var i;n.d(t,{K:()=>i}),function(e){e.Segment="segment",e.Logging="logging",e.Matterport="mp"}(i||(i={}))},90403:(e,t,n)=>{"use strict";n.d(t,{H:()=>g});var i=n(60661),s=n(5477);const r=new s.Z("segment");const o=new s.Z("log-analytics");var a=n(83535),l=n(63336),c=n(19718),d=n(253),u=n(36507);const h=new s.Z("mp-analytics"),p="ajs_anonymous_id",m="sc_anonymous_id";const g={[i.K.Segment]:{class:class SegmentAnalyticsProvider{constructor(e){this.token=e,this.endpointType=i.K.Segment,this.options={}}init(e,t){return this.setOptions(e),this.context=t,this.token?(window.analytics&&window.analytics.initialize&&(window.analytics=null),window.analytics||function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(t,n){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s),e._loadOptions=n},e.SNIPPET_VERSION="4.15.2"}}(),window.analytics.load(this.token),new Promise(((e,t)=>{window.analytics.ready(e)}))):Promise.resolve()}identify(e){window.analytics.identify(e.id,{first_name:e.firstName,last_name:e.lastName,email:e.email})}track(e,t,n){s.Z.level>=3&&r.debug(e,t?JSON.stringify(t).replace('\\"','"'):t),t=Object.assign(t||{},this.options);const i=this.context.integrations?Object.assign({},this.context.integrations):{};i.Intercom=!!n;try{window.analytics.track(e,t,Object.assign(Object.assign({},this.context),{integrations:i}))}catch(t){r.error(`Failed to send data to segment for ${e}`)}}trackAsync(e,t,n){if(t=t||{},navigator.sendBeacon)try{navigator.sendBeacon("https://api.segment.io/v1/t",JSON.stringify({event:e,anonymousId:window.analytics.user().anonymousId(),properties:Object.assign({data:t},this.options),integrations:{Intercom:!!n},writeKey:this.token,sentAt:Date.now(),type:"track",context:this.context}))}catch(e){r.error("Failed to send async segment request")}}setOptions(e){Object.assign(this.options,e)}},key:"segment_key",url:null},[i.K.Logging]:{class:class LoggingAnalyticsProvider{init(e,t){return o.debug("logging analytics to console",{options:e,context:t}),Promise.resolve()}identify(e){o.debug("identify as",e)}track(e,t,n){o.debug({eventName:e,data:t,intercom:n})}trackAsync(e,t,n){o.debug({eventName:e,data:t,intercom:n})}setOptions(e){o.debug("set options",e)}},key:null,url:null},[i.K.Matterport]:{class:class MatterportAnalyticsProvider{constructor(e,t,n){this.token=e,this.url=t,this.queue=n,this.options={},this.segmentStylePayload=(e,t,n)=>({timestamp:(0,l.U)(new Date),integrations:{Intercom:!!n},context:this.segmentStyleContext(this.context),properties:t,event:e,messageId:(0,a.D)(),anonymousId:this.anonymousId,type:"track",userId:this.user?this.user.id:null,sentAt:(0,l.U)(new Date)}),this.segmentStyleContext=e=>{const t={page:{path:window.location.pathname,referrer:(0,u.an)(),search:window.location.search,title:window.document.title,url:window.location.href},userAgent:navigator.userAgent,library:{name:"showcase",version:"1"},campaign:{}};return Object.assign(Object.assign({},e),t)};const i=(0,d.fp)(m);if(i)this.anonymousId=i;else{const e=(0,c.$)(p);this.anonymousId=e?e.replace(/%22/g,""):(0,a.D)(),(0,d.m8)(m,this.anonymousId)}this.headers={"X-API-Key":this.token,"Content-Type":"application/json",Accept:"application/json"}}init(e,t){return this.setOptions(e),this.context=t,h.debug("init",{options:this.options,context:this.segmentStyleContext(this.context)}),Promise.resolve()}identify(e){h.debug("identify as",e),this.user=e}track(e,t,n){s.Z.level>=3&&h.debug(e,t?JSON.stringify(t).replace('\\"','"'):t),t=Object.assign(t||{},this.options);const i=this.segmentStylePayload(e,t,n);this.queue.post(this.url,{body:i,headers:this.headers})}trackAsync(e,t,n){if(t=Object.assign(t||{},this.options),navigator.sendBeacon)try{const i=this.segmentStylePayload(e,t,n);navigator.sendBeacon(`${this.url}?api_key=${this.token}`,JSON.stringify(i))}catch(e){h.error("Failed to sendBeacon analytics request")}}setOptions(e){Object.assign(this.options,e)}},key:"analytics_mp_key",url:"analytics_mp_url"}}},80312:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var i=n(67294),s=n(60405);function r(){const{analytics:e}=(0,i.useContext)(s.I);return e}},29782:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Analytics:()=>AnalyticsModule,default:()=>a,useAnalytics:()=>o.z});var i=n(90403),s=n(57227),r=n(81402);class AnalyticsModule extends s.Y{constructor(){super(...arguments),this.name="analytics",this.endpoints=[],this.loaded=!1,this.bufferedData=[],this.options={},this.track=(e,t,n)=>this.loaded?(0,r.gw)(0).then((()=>{this.endpoints.forEach((i=>{i.track(e,t,n)}))})):(this.bufferedData.push({event:e,data:t}),Promise.resolve()),this.trackAsync=(e,t,n)=>{this.loaded?this.endpoints.forEach((i=>{i.trackAsync(e,t,n)})):this.bufferedData.push({event:e,data:t})}}async load(e,t,n,s,r){this.loaded=!1,Object.assign(this.options,n);for(const n of e){const{provider:e,token:o,url:a}=n;if(void 0===i.H[e])continue;const l=new(0,i.H[e].class)(o,a,t);await l.init(this.options,s),r&&r.loggedIn&&l.identify(r),this.endpoints.push(l),this.loaded=!0}return this.loaded&&this.flushBufferedData(),this.loaded}setOptions(e){Object.assign(this.options,e),this.endpoints.forEach((t=>{t.setOptions(e)}))}trackFeatures(...e){this.options.ab_tests||(this.options.ab_tests=[]);const t=this.options.ab_tests;t.push(...e);const n=new Map(t.map((e=>e.split(":")))),i={ab_tests:Array.from(n,(([e,t])=>`${e}:${t}`))};this.endpoints.forEach((e=>{e.setOptions(i)}))}flushBufferedData(){for(const e of this.bufferedData)this.endpoints.forEach((t=>{t.track(e.event,e.data,e.intercom)}));this.bufferedData.length=0}}var o=n(80312);const a=AnalyticsModule},49315:(e,t,n)=>{"use strict";n.d(t,{A:()=>AnnotationsViewData});var i=n(35424),s=n(67779);class AnnotationsViewData extends i.V{constructor(){super(),this.name="annotations-view-data",this.dockedAnnotationObservable=(0,s.Y)(null),this.billboardAnnotationObservable=(0,s.Y)(null),this.billboardSelectedObservable=(0,s.Y)(!1),this.capabilities=new Map}setDockedAnnotation(e,t){const n=e&&t?{id:e,annotationType:t}:null;this.isEqual(n,this.dockedAnnotation)||this.atomic((()=>{this.dockedAnnotationObservable.value=n,n&&this.billboardSelected&&(this.billboardSelectedObservable.value=!1)}))}get dockedAnnotation(){return this.dockedAnnotationObservable.value}onDockedAnnotationChanged(e){return this.dockedAnnotationObservable.onChanged(e)}setBillboardAnnotation(e,t,n){const i=e&&t?{id:e,annotationType:t}:null;this.atomic((()=>{this.isEqual(i,this.billboardAnnotation)||(this.billboardAnnotationObservable.value=i),void 0===n&&i||(this.billboardSelectedObservable.value=!!n,n&&this.dockedAnnotation&&(this.dockedAnnotationObservable.value=null))}))}get billboardAnnotation(){return this.billboardAnnotationObservable.value}get billboardSelected(){return this.billboardSelectedObservable.value}get selectedAnnotation(){return this.billboardSelected?this.billboardAnnotation:null}updateCapabilities(e,t){this.capabilities.set(e,Object.assign({},t))}getCapabilities(e){const t={dock:!0,preview:!0,select:!0};this.capabilities.has(e)||this.capabilities.set(e,t);const n=this.capabilities.get(e)||t;return Object.assign({},n)}isEqual(e,t){return(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(null==e?void 0:e.annotationType)===(null==t?void 0:t.annotationType)}}},18236:(e,t,n)=>{"use strict";n.d(t,{bd:()=>DockAnnotationCommand,oM:()=>SelectAnnotationCommand,Kw:()=>PreviewAnnotationCommand,G5:()=>CloseBillboardCommand,yL:()=>CloseOtherAnnotationsCommand,Aj:()=>CloseAnnotationCommand});var i=n(93037);class DockAnnotationCommand extends i.m{constructor(e,t){super(),this.payload={id:e,annotationType:t}}}class SelectAnnotationCommand extends i.m{constructor(e,t){super(),this.payload={id:e,annotationType:t}}}class PreviewAnnotationCommand extends i.m{constructor(e,t){super(),this.payload={id:e,annotationType:t}}}class CloseBillboardCommand extends i.m{}class CloseOtherAnnotationsCommand extends i.m{constructor(e,t){super(),this.payload={exceptType:e,exceptId:t}}}class CloseAnnotationCommand extends i.m{constructor(e,t){super(),this.payload={id:e,annotationType:t}}}},47357:(e,t,n)=>{"use strict";var i;n.d(t,{J:()=>i}),function(e){e.NOTE="note",e.TAG="tag",e.OBJECT="object"}(i||(i={}))},50566:(e,t,n)=>{"use strict";n.d(t,{do:()=>AnnotationOpeningMessage,Ps:()=>AnnotationClosedMessage,qk:()=>AnnotationAttachmentClickedMessage,iP:()=>AnnotationBlockClickedMessage});var i=n(4117);class AnnotationOpeningMessage extends i.v{constructor(e,t,n){super(),this.annotationType=e,this.id=t,this.docked=n}}class AnnotationClosedMessage extends i.v{constructor(e,t){super(),this.annotationType=e,this.id=t}}class AnnotationAttachmentClickedMessage extends i.v{constructor(e,t,n){super(),this.annotationType=e,this.id=t,this.attachmentId=n}}class AnnotationBlockClickedMessage extends i.v{constructor(e,t,n){super(),this.block=n,this.id=t,this.annotationType=e}}},13912:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,K:()=>o});var i=n(47357);function s(e,t){return t===e.getCurrentUserId()}function r(e,t,n){if(t===i.J.NOTE){return e.isCommenter()&&!!n&&s(e,n.id)}return e.isEditor()}function o(e,t,n){if(t===i.J.NOTE){return e.isCommenter()&&!!n&&s(e,n.id)||e.isOrgAdmin()}return e.isEditor()}},76092:(e,t,n)=>{"use strict";var i;n.d(t,{X:()=>i}),function(e){e.ACCESS_TOKEN_REQUIRED="object.access.token.required",e.FORBIDDEN="spaces.public.access.password.forbidden",e.INVALID_PASSWORD="spaces.public.access.invalid_password",e.TOO_MANY_ATTEMPTS="spaces.public.access.too_many_attempts",e.UNAUTHORIZED="user.unauthorized",e.NOT_FOUND="not.found",e.PASSWORD_REQUIRED="model.unauthorized"}(i||(i={}))},93487:(e,t,n)=>{"use strict";var i;n.d(t,{s:()=>i}),function(e){e.INVALID_CREDENTIALS="invalidcredentials",e.TOO_MANY_ATTEMPTS="toomanyattempts",e.UNKNOWN="unknown"}(i||(i={}))},83711:(e,t,n)=>{"use strict";n.d(t,{r:()=>MpModelTokenAuthentication});var i=n(87100);class MpModelTokenAuthentication{constructor(){const e=(0,i.eY)("auth","");this.authenticate(e)}isAuthenticated(){return!!MpModelTokenAuthentication.token}authenticate(e){return!(!e||"string"!=typeof e)&&(MpModelTokenAuthentication.token=e.replace(","," "),!0)}getAuthorizationHeader(){return MpModelTokenAuthentication.token?MpModelTokenAuthentication.token:""}}},95430:(e,t,n)=>{"use strict";n.d(t,{L:()=>MpPasswordAuthentication});var i=n(5477),s=n(93487),r=n(76092),o=n(78804);const a=new i.Z("mp-password-authentication");class MpPasswordAuthentication{constructor(e=window.location.origin){this.baseUrl=e,this.errorType=s.s.UNKNOWN}async authenticate(e,t){if(!e.match(/[a-zA-Z0-9]+/))return a.error(`Invalid Model ID ${e}`),!1;const n=`${this.baseUrl}/api/v2/models/${e}/public-access/`;return this.fetchToken(n,t).then((async e=>{let t={};return e&&(t=await e.json(),e.ok&&t.token)?(this.login(t.token),!0):(this.errorType=MpPasswordAuthentication.getErrorType(t.code),this.logout(),!1)}))}isAuthenticated(){return void 0!==MpPasswordAuthentication.token}login(e){MpPasswordAuthentication.token=e}logout(){MpPasswordAuthentication.token=void 0}getAuthorizationHeader(){return MpPasswordAuthentication.token?`Matterport-Object-Access ${MpPasswordAuthentication.token}`:""}async fetchToken(e,t){const n=JSON.stringify({password:t}),i={"Content-Type":"application/json"};return(0,o.m)(e,i),fetch(e,{method:"POST",cache:"no-cache",headers:i,body:n})}static getErrorType(e){switch(e){case r.X.TOO_MANY_ATTEMPTS:return s.s.TOO_MANY_ATTEMPTS;case r.X.INVALID_PASSWORD:return s.s.INVALID_CREDENTIALS}return s.s.UNKNOWN}}},81052:(e,t,n)=>{"use strict";n.d(t,{w:()=>MpSdkAuthentication});class MpSdkAuthentication{static setToken(e){MpSdkAuthentication.token="Bearer "+e}isAuthenticated(){return!!MpSdkAuthentication.token}authenticate(e){return!(!e||"string"!=typeof e)}getAuthorizationHeader(){return MpSdkAuthentication.token?MpSdkAuthentication.token:""}}},36407:(e,t,n)=>{"use strict";var i,s;n.d(t,{SL:()=>i,AB:()=>s,eE:()=>r,Qf:()=>o}),function(e){e.BASE="base",e.STANDARD="standard",e.HIGH="high",e.ULTRAHIGH="ultrahigh"}(i||(i={})),function(e){e[e.BASE=512]="BASE",e[e.STANDARD=1024]="STANDARD",e[e.HIGH=2048]="HIGH",e[e.ULTRAHIGH=4096]="ULTRAHIGH"}(s||(s={}));const r={[i.BASE]:s.BASE,[i.STANDARD]:s.STANDARD,[i.HIGH]:s.HIGH,[i.ULTRAHIGH]:s.ULTRAHIGH},o={[s.BASE]:i.BASE,[s.STANDARD]:i.STANDARD,[s.HIGH]:i.HIGH,[s.ULTRAHIGH]:i.ULTRAHIGH}},8428:(e,t,n)=>{"use strict";n.d(t,{af:()=>PlayerOptionsData,gx:()=>i});var i,s=n(35424),r=n(98254),o=n(95655),a=n(93510),l=n(11620);class PlayerOptionsData extends s.V{constructor(e={}){super(),this.name="player-options",this.options=new PlayerOptions(e)}resetDefaultTourOptions(){this.options.fast_transitions=l.LI,this.options.transition_speed=l.p$,this.options.transition_time=l.rd,this.options.pan_speed=l.tu,this.options.dollhouse_pan_speed=l.nr,this.options.zoom_duration=l.we,this.options.pan_angle=l.Cj,this.options.pan_direction=l.y6,this.options.commit()}}class PlayerOptions extends r.T{constructor(e){super(),this.presented_by=!1,this.highlight_reel=!0,this.floor_plan=!0,this.tour_buttons=!0,this.labels=!0,this.labels_dh=!0,this.floor_select=!0,this.space_search=!0,this.measurements=!0,this.measurements_saved=!0,this.dollhouse=!0,this.contact_email=!1,this.address=!1,this.contact_name=!1,this.model_summary=!1,this.contact_phone=!1,this.model_name=!1,this.external_url=!1,this.unit_type=a.M.IMPERIAL,this.background_color=o.z.default,this.fast_transitions=l.LI,this.transition_speed=l.p$,this.transition_time=l.rd,this.pan_speed=l.tu,this.dollhouse_pan_speed=l.nr,this.zoom_duration=l.we,this.pan_angle=l.Cj,this.pan_direction=l.y6,e&&this.copy(e)}copy(e){this.presented_by=!!e.presented_by,this.highlight_reel=!!e.highlight_reel,this.floor_plan=!!e.floor_plan,this.tour_buttons=!!e.tour_buttons,this.labels=!!e.labels,this.space_search=!!e.space_search,this.dollhouse=!!e.dollhouse,this.fast_transitions=!!e.fast_transitions,this.contact_email=!!e.contact_email,this.address=!!e.address,this.contact_name=!!e.contact_name,this.model_summary=!!e.model_summary,this.contact_phone=!!e.contact_phone,this.model_name=!!e.model_name,this.external_url=!!e.external_url,void 0!==e.measurements&&(this.measurements=e.measurements),void 0!==e.labels_dh&&(this.labels_dh=e.labels_dh),void 0!==e.floor_select&&(this.floor_select=e.floor_select),void 0!==e.measurements_saved&&(this.measurements_saved=e.measurements_saved),void 0!==e.unit_type&&(this.unit_type=e.unit_type),void 0!==e.background_color&&void 0!==o.z[e.background_color]&&(this.background_color=e.background_color),void 0!==e.transition_speed&&(this.transition_speed=e.transition_speed),void 0!==e.transition_time&&(this.transition_time=e.transition_time),void 0!==e.pan_speed&&(this.pan_speed=e.pan_speed),void 0!==e.dollhouse_pan_speed&&(this.dollhouse_pan_speed=e.dollhouse_pan_speed),void 0!==e.zoom_duration&&(this.zoom_duration=e.zoom_duration),void 0!==e.pan_angle&&(this.pan_angle=e.pan_angle),void 0!==e.pan_direction&&(this.pan_direction=e.pan_direction)}}!function(e){e.PresentedBy="presented_by",e.HighlightReel="highlight_reel",e.FloorPlan="floor_plan",e.TourButtons="tour_buttons",e.Labels="labels",e.LabelsDollhouse="labels_dh",e.Measurements="measurements",e.FloorSelect="floor_select",e.SavedMeasurements="measurements_saved",e.Dollhouse="dollhouse",e.InstantTransitions="fast_transitions",e.TransitionSpeed="transition_speed",e.TransitionTime="transition_time",e.PanSpeed="pan_speed",e.DollhousePanSpeed="dollhouse_pan_speed",e.ZoomDuration="zoom_duration",e.PanAngle="pan_angle",e.PanDirection="pan_direction",e.Units="unit_type",e.DetailsEmail="contact_email",e.DetailsAddress="address",e.DetailsName="contact_name",e.DetailsSummary="model_summary",e.DetailsPhone="contact_phone",e.DetailsModelName="model_name",e.DetailsExternalUrl="external_url",e.BackgroundColor="background_color",e.SpaceSearch="space_search"}(i||(i={}))},87393:(e,t,n)=>{"use strict";n.d(t,{Z:()=>SweepTextureLoader});var i=n(84428),s=n(5477),r=n(36407),o=n(81402);const a=new s.Z("api"),l={[r.SL.BASE]:256,[r.SL.STANDARD]:1024,[r.SL.HIGH]:2048,[r.SL.ULTRAHIGH]:4096};class SweepTextureLoader{constructor(e){this.urls=e,this.sweepCubeTextures={}}useTexture(e){const t=this.getTexture(e);if(!t)throw Error("Texture for sweep not loaded before using");return t}loadFace(e,t,n,s){return this.loadFaceImage(e,t,n,s).then((e=>{const t=new i.Texture(e);return t.needsUpdate=!0,t}))}load(e,t=r.SL.STANDARD){const n=this.sweepCubeTextures[e.id];if(n)return a.debug("Skipping load of pano, already loaded"),new Promise((function(e,t){e(n)}));const s=[2,4,0,5,1,3].map((n=>this.loadFaceImage(e,t,n))),o=Promise.all(s).then((t=>{const n=new i.CubeTexture(t);return n.flipY=!1,n.needsUpdate=!0,this.sweepCubeTextures[e.id]=n,n}));return o.catch((()=>{a.error(`Downloading cubemap for pano ${e.id} failed`)})),o}unload(e){var t;const n=this.sweepCubeTextures[e];if(!n)throw Error("Texture for sweep not loaded before unloading");n.dispose(),null===(t=n.images)||void 0===t||t.forEach((e=>{var t,n;null===(n=(t=e).close)||void 0===n||n.call(t)})),this.sweepCubeTextures[e]=null}unloadAll(e){const t=(0,o.ow)(e);for(const e of Object.keys(this.sweepCubeTextures))this.sweepCubeTextures[e]&&!t[e]&&this.unload(e)}async loadFaceImage(e,t,n,i){const s=l[t],r=await e.getFaceUrl(t,n);return this.urls.getImageBitmap(r,s,s,i)}getTexture(e){return this.sweepCubeTextures[e]}}},95655:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,z:()=>r});const i={bgPrimary:"#0F1011",bgSecondary:"#1e2023",gridPrimary:"#2d3035",gridSecondary:"#171a1c"},s={black:i,grey:{bgPrimary:"#c9cbcc",bgSecondary:"#9d9d9e",gridPrimary:"#c9cbcc",gridSecondary:"#b0b1b1"},white:{bgPrimary:"#fcfdff",bgSecondary:"#ced0d3",gridPrimary:"#fcfdff",gridSecondary:"#e2e3e5"},default:i};var r;!function(e){e.black="black",e.grey="grey",e.white="white",e.default="black"}(r||(r={}))},90237:(e,t,n)=>{"use strict";n.d(t,{GT:()=>UnauthorizedException,V2:()=>ForbiddenException,TR:()=>NotFoundException});var i=n(40603);class ApiException extends i.y{constructor(e="Api Exception"){super(e),this.name="ApiException"}}class UnauthorizedException extends ApiException{constructor(e="Unauthorized"){super(e),this.name="Unauthorized"}}class ForbiddenException extends ApiException{constructor(e="Forbidden"){super(e),this.name="Forbidden"}}class NotFoundException extends ApiException{constructor(e="Not Found"){super(e),this.name="NotFound"}}},63408:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(17403),s=n(14909);async function r(e){return(0,s.mM)(window.location.href)?e.get("https://static.matterport.com/geoip/",{responseType:"json",priority:i.RequestPriority.LOW}):{city:"",country_code:"",country_name:"",region:""}}},76576:(e,t,n)=>{"use strict";n.d(t,{P8:()=>r,gM:()=>o,PT:()=>a});var i=n(92280);let s=null;const r=e=>{s=e},o=()=>s,a=(e,t)=>(s&&(0,i.S)(e)&&(t["x-matterport-application-key"]=s),t)},93287:(e,t,n)=>{"use strict";n.d(t,{l:()=>r,I:()=>o});var i=n(92280);let s=null;const r=e=>{s=e},o=(e,t)=>(s&&(0,i.S)(e)&&(t["x-matterport-application-name"]=s),t)},74372:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,X:()=>o});var i=n(92280);let s=null;const r=e=>{s=e},o=(e,t)=>(s&&(0,i.S)(e)&&(t["x-matterport-application-version"]=s),t)},78804:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var i=n(93287),s=n(74372),r=n(76576),o=n(95430),a=n(83711),l=n(81052);const c=[new a.r,new l.w,new o.L];var d=n(92280);const u=[(e,t,n=c)=>{const i=n.map((e=>e.getAuthorizationHeader())).find(Boolean);return i&&(0,d.S)(e)&&(t.authorization=i),t},i.I,s.X,r.PT],h=(e,t,n=u)=>(n.forEach((n=>n(e,t))),t)},92280:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const i=["matterport.com","matterportvr.cn","localhost"],s=["/api/"],r=e=>{let t;try{t=new URL(e.toLowerCase())}catch(e){return!1}const{hostname:n,pathname:r}=t,o=i.some((e=>n===e||n.endsWith(`.${e}`))),a=s.some((e=>r.startsWith(e)));return o&&a}},13350:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ApiClient});var i=n(5477),s=n(17403),r=n(76092),o=n(90237);class Organization{constructor(e){this.blurEnabled=!1,e&&Object.assign(this,e)}}var a,l=n(63408),c=n(87100);!function(e){e.USER="user",e.ADMIN="admin"}(a||(a={}));class User{constructor(e){this.loggedIn=!1,this.flags=new Set,this.memberships=[],e&&Object.assign(this,e)}getFlags(e=""){if(this.memberships){const e=(0,c.eY)("organization","");for(const t of this.memberships)if(""===e||t.organizationId===e)for(const e of t.flags)this.flags.add(e)}const t=new Set;return this.flags.forEach((n=>{if(0===n.indexOf(e)){const i=n.replace(e,"");t.add(i)}})),t}hasFlag(e,t="showcase"){return this.getFlags().has(`${t}/${e}`)}isOrganizationAdmin(e){const t=this.getMembership(e);return!!(null==t?void 0:t.roles.includes(a.ADMIN))}getMembershipFlags(e){const t=this.getMembership(e);return t?t.flags:[]}getMembership(e){return this.memberships.find((t=>t.organizationId===e))}hasMembershipFlag(e,t){return this.getMembershipFlags(e).includes(t)}getMembershipFeature(e,t){const n=this.getMembership(e);return(null==n?void 0:n.features[t])||!1}hasMembership(e){return this.memberships.some((t=>t.organizationId===e))}}class Membership{constructor(e){this.features={},e&&Object.assign(this,e)}}var d=n(16752);const u=new i.Z("user.serializers");function h(e,t="3.1.75.3-0-gba9de22f6d"){const n=[];for(let i of e){const e=i.match(/^.*\-(\d+(?:\.\d+)*)$/);if(e&&e[1]){if(i=i.replace(/-(\d+(?:\.\d+)*)$/,""),d.o.lt(t,e[1])){u.debug(`Dropping feature flag ${i}, version >= ${e[1]} required`);continue}u.debug(`Enabled versioned feature flag ${i}`)}n.push(i)}return n}var p=n(78804),m=n(2252);const g=new i.Z("ImageBitmapSupport"),f=(0,c.eY)("imageBitmap",null);let v=null;function b(){return"1"===f||(null===v&&function(){if(v=!1,(0,m.vU)()){const e=(0,m.rI)();e.major<=95&&(g.error(`Firefox/${e.major} issue, Disabling ImageBitmap support, upgrade to 96 for better performance.`),v=!0)}}(),!v&&("createImageBitmap"in window?"0"!==f:"1"===f))}var y=n(83711),S=n(33762),E=n(66225),T=n(26965),O=n(54929);class IndividualQueryCache{constructor(e,t,n){this.query=e,this.variables=t,this.response=n}read(e,t,n){return e!==this.query||(0,O.NK)(t,this.variables)?Promise.resolve(void 0):Promise.resolve(this.response)}}const _=new i.Z("api"),A=Object.freeze({cacheClearTimeout:6e4});class Api{constructor(e=new s.RequestQueue,t=new s.RequestQueue,n={},i=window.location.origin){this.apiQueue=e,this.storeQueue=t,this.prefetchedData=n,this.baseUrl=i,this._configCache={},this._userCache={},this._organizationCache={},setTimeout((()=>{this.prefetchedData={}}),A.cacheClearTimeout)}async init(e){const t=[this.getUser().then((e=>this.user=e))];e&&t.push(this.getConfigs(e)),await Promise.all(t)}getOnStoreQueue(e,t={}){return this.get(e,t,this.storeQueue)}get(e,t={},n=this.apiQueue){const{headers:i={},prefetchFrom:s}=t;return s&&this.prefetchedData[s]?Promise.resolve(this.prefetchedData[s]):(t.headers=(0,p.m)(e,i),n.get(e,t).then((e=>{if(null===e)throw Error("Data from get was null, possibly unparsable JSON");return e})))}getImage(e,t){return this.get(e,Object.assign(Object.assign({},t),{responseType:"image"}))}async getImageBitmap(e,t,n,i={}){if(b()){const s=-1!==e.indexOf("?"),r=e+(s?"&":"?")+"imgopt=1",o=await this.get(r,Object.assign(Object.assign({},i),{responseType:"blob"}));return createImageBitmap(o,0,0,t,n,{imageOrientation:i.flipY?"flipY":"none"})}return this.getImage(e,i)}async getConfigs(e,t){if(e=e.toLowerCase(),!t&&this._configCache[e])return this._configCache[e];const n=t?{responseType:"json"}:{responseType:"json",prefetchFrom:"config"};let i={};const s=this.baseUrl+`/api/v1/config/${e}`;try{i=await this.get(s,n)}catch(e){_.warn(`Failed to load config from ${s}, ignoring`)}return t||(this._configCache[e]=i),i||{}}async getAppKey(e,t,n){if(""===e||""===t)return null;const i=await this.getConfigs(e,n);return i.hasOwnProperty(t)?i[t]:null}async getGeoIpLocation(){return(0,l.Z)(this.apiQueue)}async modelExists(e,t={ignorePrefetch:!1}){var n,i,s,a,l,c,d,u,h;const{ignorePrefetch:p}=t;if(!p&&this.prefetchedData&&this.prefetchedData.model){const{model:t,queries:c}=this.prefetchedData,d=null===(i=null===(n=null==c?void 0:c.GetModelPrefetch)||void 0===n?void 0:n.data)||void 0===i?void 0:i.model;if(!(null==d?void 0:d.id)&&t.has_public_access_password)throw new o.GT("Model requires a password");if(!(new y.r).isAuthenticated()){const t=null===(a=null===(s=null==c?void 0:c.GetModelPrefetch)||void 0===s?void 0:s.errors)||void 0===a?void 0:a.find((e=>{var t;return(null===(t=null==e?void 0:e.path)||void 0===t?void 0:t.length)&&"model"===(null==e?void 0:e.path[0])}));if((null===(l=null==t?void 0:t.extensions)||void 0===l?void 0:l.code)===r.X.NOT_FOUND)throw new o.TR("Model not found (404)");if(d&&(null==d?void 0:d.id)!==e)throw new o.V2("Access denied (403)")}}const m=await this.modelQuery(e);if(null===(c=m.errors)||void 0===c?void 0:c.length){switch(null===(d=m.errors[0].extensions)||void 0===d?void 0:d.code){case r.X.PASSWORD_REQUIRED:throw new o.GT("Access token required (401)");case r.X.NOT_FOUND:throw new o.TR("Model not found (404)");default:throw new o.V2("Access denied (403)")}}else if((null===(h=null===(u=m.data)||void 0===u?void 0:u.model)||void 0===h?void 0:h.id)!==e)throw new o.V2("Access denied (403)")}async getOrganization(e){if(e in this._organizationCache)return this._organizationCache[e];const t=`${this.baseUrl}/api/v2/organizations/${e}`,n=await this.get(t,{responseType:"json"}).catch((e=>{_.error(e)}));let i=null;return n&&(i=new Organization({id:n.sid,name:n.company_name||"",blurEnabled:!!n.manual_blur})),this._organizationCache[e]=i,i}async getUser(e){if(e&&e in this._userCache)return this._userCache[e];const t=`${this.baseUrl}/api/v2/users/${e||"current"}`,n=function(e){if(!e)return new User;const t=(e.memberships||[]).map((t=>new Membership({userId:e.user_sid,organizationId:t.organization_sid,name:t.name,flags:h(t.flags||[]),roles:t.roles||[],features:t.features||{}})));return new User({id:e.user_sid,firstName:e.first_name,lastName:e.last_name,email:e.email,loggedIn:e.is_authenticated,flags:new Set(h(e.flags)),memberships:t})}(await this.get(t,{responseType:"json"}).catch((e=>{_.error(e)})));return n.id&&(this._userCache[n.id]=n),n}async modelQuery(e){const t=new S.w({baseUrl:this.baseUrl}),n=await t.query(T.GetModelPolicies,{modelId:e}),i=(n.errors||[]).filter((e=>{var t;return 1===(null===(t=e.path)||void 0===t?void 0:t.length)&&"model"===e.path[0]}));return 0===i.length&&(this.modelDetailCache&&E.u.removeSharedCache(this.modelDetailCache),this.modelDetailCache=new IndividualQueryCache(T.GetModelPolicies,{modelId:e},n),E.u.addSharedCache(this.modelDetailCache)),{data:n.data,errors:i}}}var w=n(57227);class ApiClient extends w.Y{constructor(){super(...arguments),this.name="api-client"}async init(e,t){this.api=new Api(e.apiQueue,e.storeQueue,e.prefetchedData,e.baseUrl),await this.api.init(e.preloadConfig)}getApi(){return this.api}}},11620:(e,t,n)=>{"use strict";n.d(t,{gj:()=>r,LI:()=>o,p$:()=>a,rd:()=>l,tu:()=>c,nr:()=>d,we:()=>u,Cj:()=>h,y6:()=>p});var i=n(84347),s=n(77866);const r="TransitionType",o=!0,a=s.Mk,l=s.mL,c=s.pn,d=s.su,u=s._c,h=s.BA,p=i.kw.Auto},67731:(e,t,n)=>{"use strict";n.d(t,{P:()=>Attachment});var i=n(98254),s=n(48452);class Attachment extends i.T{constructor(e){super(),this.category=s.G$.EXTERNAL,this.mediaType=s.DD.IMAGE,this.mimeType="",this.src="",this.height=0,this.width=0,e&&Object.assign(this,e)}copy(e){return this.id=e.id,this.src=e.src,this.url=e.url,this.thumbnailUrl=e.thumbnailUrl,this.height=e.height,this.width=e.width,this.created=e.created,this.category=e.category,this.mediaType=e.mediaType,this.parentId=e.parentId||"",this.parentType=e.parentType,this.filename=e.filename,this.bytes=e.bytes,this.mimeType=e.mimeType||"",this}}},4752:(e,t,n)=>{"use strict";n.d(t,{b:()=>AttachmentsData});var i=n(35424),s=n(66910),r=n(67731);class AttachmentsData extends i.V{constructor(){super(),this.name="attachments-data",this.pendingAttachments=(0,s.q)(),this.removedAttachments=(0,s.q)(),this.currentUploads=(0,s.q)(),this.failedUploads=(0,s.q)()}iteratePending(e){for(const t of this.pendingAttachments)e(t)}iterateRemoved(e){for(const t of this.removedAttachments)e(t)}get pendings(){return this.pendingAttachments}get removals(){return this.removedAttachments}getPendingAttachment(e){return this.pendingAttachments.get(e)}getRemovedAttachment(e){return this.removedAttachments.get(e)}addPending(e){this.pendingAttachments.set(e.id,e)}removePendingAttachment(e){this.pendingAttachments.has(e)&&this.pendingAttachments.delete(e)}clearPending(){this.pendingAttachments.clear()}getPendingAttachmentsForAsset(e,t){const n=[];return this.iteratePending((i=>{i.parentType===t&&i.parentId===e&&n.push(i)})),n}getRemovedAttachmentsForAsset(e,t){const n=[];return this.iterateRemoved((i=>{i.parentType===t&&i.parentId===e&&n.push(i)})),n}markAttachmentForDelete(e){const t=new r.P(e);this.removedAttachments.set(t.id,t)}clearRemovals(){this.removedAttachments.clear()}get uploads(){return this.currentUploads}addUpload(e){this.uploads.set(e.id,e)}updateUpload(e){this.uploads.has(e.id)&&this.uploads.set(e.id,e)}removeUpload(e){this.uploads.has(e)&&this.uploads.delete(e)}clearUploads(){this.uploads.clear()}get failures(){return this.failedUploads}addFailure(e){this.failures.set(e.id,e)}removeFailure(e){this.failures.has(e)&&this.failures.delete(e)}clearFailures(){this.failures.clear()}}},87443:(e,t,n)=>{"use strict";n.d(t,{wu:()=>EmbedMediaCommand,st:()=>LoadEmbeddedMediaCommand,It:()=>UploadAttachmentsCommand,iu:()=>ConfirmAttachmentChangesCommand,Ze:()=>CancelAttachmentChangesCommand,x9:()=>ResetAttachmentChangesCommand,xW:()=>AttachmentViewerCommand,$T:()=>RemoveAttachmentCommand,Rh:()=>RemoveFailureCommand});var i=n(93037);class EmbedMediaCommand extends i.m{constructor(e,t,n){super(),this.id="EMBED_MEDIA",this.payload={parentId:e,parentType:t,src:n}}}class LoadEmbeddedMediaCommand extends i.m{constructor(e){super(),this.id="LOAD_ATTACHMENT_EMBED",this.payload={attachment:e}}}class UploadAttachmentsCommand extends i.m{constructor(e,t,n){super(),this.id="UPLOAD_ATTACHMENTS",this.payload={parentId:e,parentType:t,files:n}}}class ConfirmAttachmentChangesCommand extends i.m{constructor(e,t,n){super(),this.id="CONFIRM_ATTACHMENT_CHANGES",this.payload={parentId:e,parentType:t,prevParentId:n}}}class CancelAttachmentChangesCommand extends i.m{constructor(){super(...arguments),this.id="CANCEL_ATTACHMENT_CHANGES"}}class ResetAttachmentChangesCommand extends i.m{constructor(){super()}}class AttachmentViewerCommand extends i.m{constructor(e,t,n){super(),this.payload={open:e,attachments:t,attachmentId:n}}}class RemoveAttachmentCommand extends i.m{constructor(e){super(),this.id="ATTACHMENT_REMOVE",this.payload={attachment:e}}}class RemoveFailureCommand extends i.m{constructor(e){super(),this.id="ATTACHMENT_REMOVE_FAILED_UPLOAD",this.payload={id:e}}}},48452:(e,t,n)=>{"use strict";var i,s,r,o;n.d(t,{kV:()=>i,_V:()=>s,DD:()=>r,G$:()=>o}),function(e){e.FILE_TOO_LARGE="oversize",e.EMPTY_FILE="empty",e.OVER_QUOTA="overQuota",e.UPLOAD_FAILED="failed",e.PERMISSION_DENIED="permission"}(i||(i={})),function(e){e.EMBED_FAIL="embedFail",e.EMBED_SUCCESS="success"}(s||(s={})),function(e){e.IMAGE="image",e.PDF="pdf",e.VIDEO="video",e.RICH="rich",e.ZIP="zip",e.TEXT="text",e.AUDIO="audio",e.MODEL="model",e.APPLICATION="application"}(r||(r={})),function(e){e.EXTERNAL="external",e.UPLOAD="upload",e.SANDBOX="sandbox"}(o||(o={}))},96372:(e,t,n)=>{"use strict";n.d(t,{O:()=>ViewAttachmentsMessage,Rd:()=>CloseAttachmentViewerMessage,Vj:()=>AttachmentUploadProgressMessage,RE:()=>AttachmentUploadDoneMessage,v8:()=>EmbeddingDoneMessage});var i=n(4117);class ViewAttachmentsMessage extends i.v{constructor(e,t){super(),this.attachments=e,this.attachmentId=t}}class CloseAttachmentViewerMessage extends i.v{}class AttachmentUploadProgressMessage extends i.v{constructor(e){super(),this.upload=e}}class AttachmentUploadDoneMessage extends i.v{constructor(e){super(),this.upload=e}}class EmbeddingDoneMessage extends i.v{constructor(e,t,n,i){super(),this.attachment=e,this.status=t,this.parentId=n,this.parentType=i}}},10047:(e,t,n)=>{"use strict";n.d(t,{yk:()=>i,z6:()=>s,Aw:()=>r,t8:()=>o});const i=25,s=524288e3,r=["image/gif","image/png","image/jpeg","image/webp","image/bmp"],o=["image/gif","image/png","image/jpeg","image/webp"]},18482:(e,t,n)=>{"use strict";n.d(t,{Uq:()=>o,lV:()=>a,Ug:()=>l,ae:()=>c,id:()=>d,bY:()=>u,m:()=>h,VV:()=>p});var i=n(48452),s=n(10047),r=n(64069);function o(e){return!(e.category!==i.G$.UPLOAD||!e.mimeType)&&s.t8.includes(e.mimeType)}function a(e){return e.category===i.G$.EXTERNAL||e.category===i.G$.SANDBOX||!!e.mimeType&&s.Aw.includes(e.mimeType)}function l(e){return e.filter((e=>a(e)))}function c(e){return e.filter((e=>!a(e)))}function d(e){return e.startsWith("image")?i.DD.IMAGE:e.startsWith("video")?i.DD.VIDEO:e.startsWith("audio")?i.DD.AUDIO:e.startsWith("model")?i.DD.MODEL:e.startsWith("text")?i.DD.TEXT:"application/pdf"===e?i.DD.PDF:i.DD.APPLICATION}function u(e){switch(e){case r.EV.IMAGE:return i.DD.IMAGE;case r.EV.PDF:return i.DD.PDF;case r.EV.VIDEO:return i.DD.VIDEO;case r.EV.RICH:return i.DD.RICH;case r.EV.ZIP:return i.DD.ZIP;default:throw Error(`Unknown attachment media type ${e}`)}}function h(e){switch(e){case i.DD.IMAGE:return r.EV.IMAGE;case i.DD.PDF:return r.EV.PDF;case i.DD.VIDEO:return r.EV.VIDEO;case i.DD.RICH:return r.EV.RICH;case i.DD.ZIP:return r.EV.ZIP;default:throw Error(`Unknown media type ${e}`)}}function p(e){if(!e)return"0";const t=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),3),n=["B","kB","MB","GB"][t];return`${Number((e/Math.pow(1e3,t)).toFixed(1))}${n}`}},15099:(e,t,n)=>{"use strict";n.d(t,{M_:()=>CameraData,rw:()=>h});var i=n(41674),s=n(35424),r=n(41252),o=n(84428);const a=(e,t)=>e&&t?e.equals(t):e===t;var l=n(26517),c=n(95703),d=n(98254),u=n(994);class CameraPoseData extends d.T{constructor(e){super(),this.position=new o.Vector3,this.rotation=new o.Quaternion,this.focalDistance=-1,this.projection=(0,i.AN)(e)}aspect(){return this.projection.elements[5]/this.projection.elements[0]}clone(e=new CameraPoseData(this.aspect())){return e.position.copy(this.position),e.rotation.copy(this.rotation),e.focalDistance=this.focalDistance,e.projection.copy(this.projection),e}isOrtho(){return(0,l.Pp)(this.projection)}fovX(){return 2*Math.atan(1*this.aspect()/this.projection.elements[5])}fovY(){return 2*Math.atan(1/this.projection.elements[5])}}class CameraTransition extends d.T{constructor(){super(...arguments),this.startTime=0,this.duration=0,this.active=!1,this.type=null,this.progress=new r.z(0),this.blackoutProgress=new r.z(0),this.from={position:new o.Vector3,rotation:new o.Quaternion,projection:new c.M},this.to={position:new o.Vector3,rotation:new o.Quaternion,projection:new c.M},this.rotationDelay=0,this.rotationDuration=1,this.matrixDelay=0,this.matrixDuration=1,this.activeInternal=!1,this.promise=null}}const h=(e,t,n=!0)=>{t.position=p(e.position,t.position,n),t.rotation=p(e.rotation,t.rotation,n),t.projection=p(e.projection,t.projection,n),t.focalDistance=e.focalDistance},p=(e,t,n=!0)=>(e&&!t?t=e.clone():e&&t?t.copy(e):n&&(t=void 0),t);class CameraData extends s.V{constructor(e,t){super(),this._width=e,this._height=t,this.name="camera",this._baseProjection=new c.M,this._orthoMatrix=new c.M,this._lastOrthoZoom=1,this._perspectiveMatrix=new c.M,this.pose=new CameraPoseData(e/t),this.transition=new CameraTransition,this.setCameraDimensions(e,t),this._baseFovY=u.Ue*i.oR.fov}setCameraDimensions(e,t){if(void 0===e||void 0===t)return;this._width=e,this._height=t;const n=e/t,s=this.isOrtho()?(0,i.aH)(e,t,t/(2*this.orthoZoom()),this._orthoMatrix):this._perspectiveMatrix.makePerspectiveFov(u.MN*this.fovY(),n,i.oR.near,i.oR.far);if(this.pose.projection.copy(s),this.transition.active&&this.transition.to.projection)if((0,l.Pp)(this.transition.to.projection)){const n=(0,l.S3)(this.transition.to.projection);this.transition.to.projection.copy((0,i.aH)(e,t,t/(2*n)))}else{const e=2*u.MN*Math.atan(1/this.transition.to.projection.elements[5]);this.transition.to.projection.makePerspectiveFov(e,n,i.oR.near,i.oR.far)}this.pose.commit()}setBaseProjection(e){this._baseProjection=e}get width(){return this._width}get height(){return this._height}get baseFovY(){return this._baseFovY}aspect(){return this.pose.aspect()}fovY(){return this.pose.fovY()}fovX(){return this.pose.fovX()}isOrtho(){return this.pose.isOrtho()}baseZoom(){return this.pose.projection.elements[0]/2}defaultZoom(){return(0,l.Pp)(this._baseProjection)?(0,l.S3)(this._baseProjection):this.perspectiveZoom()}zoom(){return this.isOrtho()?this.orthoZoom():this.perspectiveZoom()}orthoZoom(){const e=(0,l.S3)(this.pose.projection);return isNaN(e)?this._lastOrthoZoom:(this._lastOrthoZoom=e,e)}perspectiveZoom(){return this.baseFovY/this.fovY()}copyTransition(e){this.transition.active=e.active,this.transition.activeInternal=e.activeInternal,this.transition.type=e.type,this.transition.startTime=e.startTime,this.transition.duration=e.duration,this.transition.rotationDelay=e.rotationDelay,this.transition.rotationDuration=e.rotationDuration,this.transition.matrixDelay=e.matrixDelay,this.transition.matrixDuration=e.matrixDuration,e.progress&&this.transition.progress.copy(e.progress),e.blackoutProgress&&this.transition.blackoutProgress.copy(e.blackoutProgress),e.from&&h(e.from,this.transition.from),e.to&&h(e.to,this.transition.to),this.transition.promise=e.promise}canTransition(){return!this.transition.active}clone(){const e=new CameraData(this.width,this.height);return e.copy(this),e}copy(e){this.pose.position.copy(e.pose.position),this.pose.rotation.copy(e.pose.rotation),this.pose.focalDistance=e.pose.focalDistance,this.pose.projection.copy(e.pose.projection),this.pose.commit(),this._baseFovY=e.baseFovY,this.copyTransition(e.transition),this.transition.commit(),this._width=e.width,this._height=e.height}shallowIsEqual(e){return this.pose.position.equals(e.pose.position)&&this.pose.rotation.equals(e.pose.rotation)&&this.pose.projection.equals(e.pose.projection)&&this.pose.focalDistance===e.pose.focalDistance&&this.baseFovY===e.baseFovY}isEqual(e){return this.shallowIsEqual(e)&&this.transitionIsEqual(e.transition)}transitionIsEqual(e){return this.transition.active===e.active&&this.transition.type===e.type&&this.transition.progress.equals(e.progress)&&this.transition.blackoutProgress.equals(e.blackoutProgress)&&this.transition.rotationDelay===e.rotationDelay&&this.transition.rotationDuration===e.rotationDuration&&this.transition.matrixDelay===e.matrixDelay&&this.transition.matrixDuration===e.matrixDuration&&this.transition.activeInternal===e.activeInternal&&a(this.transition.from.position,e.from.position)&&a(this.transition.from.rotation,e.from.rotation)&&a(this.transition.from.projection,e.from.projection)&&a(this.transition.to.position,e.to.position)&&a(this.transition.to.rotation,e.to.rotation)&&a(this.transition.to.projection,e.to.projection)&&this.transition.startTime===e.startTime&&this.transition.duration===e.duration}}},41674:(e,t,n)=>{"use strict";n.d(t,{oR:()=>s,AN:()=>r,aH:()=>o});var i=n(95703);const s={fov:75,near:.1,far:3e3},r=(e,t)=>(t||(t=new i.M),t.makePerspectiveFov(s.fov,e,s.near,s.far)),o=(e,t,n=1,r)=>{r||(r=new i.M);const o=e/2,a=t/2,l=r.makeOrthographic(-o,o,a,-a,s.near,s.far);return l.elements[0]*=n,l.elements[5]*=n,l}},62344:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TRANSITION_DISTANCE_MULTIPLIER:()=>S,baseTransitionSpeedKey:()=>E,default:()=>CameraModule});var i=n(84428);var s=n(34629),r=n(26517),o=n(20725),a=n(57227),l=n(15099),c=n(4117);class BeginCameraMoveMessage extends c.v{constructor(e,t){super(),this.from=t,this.to=e,this.timestamp=Date.now()}}class EndCameraMoveMessage extends BeginCameraMoveMessage{}var d=n(31013),u=n(65270),h=n(18984),p=n(61903),m=n(82722),g=n(74170),f=n(37008),v=n(14832),b=n(93037);class ResetPitchCommand extends b.m{}const y={[v.n.Instant]:{blackoutTime:0,transitionTime:0},[v.n.FadeToBlack]:{blackoutTime:h.Z.camera.transitionBlackoutTime,transitionTime:2*h.Z.camera.transitionBlackoutTime},[v.n.Interpolate]:{blackoutTime:0,transitionTime:h.Z.camera.transitionFadeTime},[v.n.MoveToBlack]:{blackoutTime:h.Z.camera.transitionBlackoutTime,transitionTime:h.Z.camera.transitionFadeTime}},S=166,E="Transition time";class CameraModule extends a.Y{constructor(){super(...arguments),this.name="camera-data",this.transitionSpeed=h.Z.camera.transitionSpeed,this.baseTransitionTime=h.Z.camera.baseTransitionTime,this.eulerCache=new i.Euler,this.quaternionCache=new i.Quaternion}async init(e,t){this.engine=t,this.market=t.market,this.canvas=await t.market.waitForData(m.W),this.cameraData=new l.M_(this.canvas.width,this.canvas.height),this.market.register(this,l.M_,this.cameraData),t.market.waitForData(p.e).then((e=>{this.bindings.push(e.onPropertyChanged(E,(e=>{this.baseTransitionTime=e})))})),this.bindings.push(t.commandBinder.addBinding(ResetPitchCommand,(async()=>this.resetPitch())),t.subscribe(o.a,(e=>this.cameraData.setCameraDimensions(e.width,e.height))))}getData(e=!0){return e?Object.freeze(this.cameraData.clone()):this.cameraData}onUpdate(e){}fromPose(){return{position:this.cameraData.pose.position.clone(),rotation:this.cameraData.pose.rotation.clone(),projection:this.cameraData.pose.projection.clone(),focalDistance:this.cameraData.pose.focalDistance}}updateCameraPosition(e){this.cameraData.pose.position.copy(e),this.cameraData.pose.commit()}updateCameraProjection(e){this.cameraData.pose.projection.copy(e),this.cameraData.pose.commit()}updateCameraFocus(e){this.cameraData.pose.focalDistance=e,this.cameraData.pose.commit()}updateCameraRotation(e){this.cameraData.pose.rotation.copy(e),this.cameraData.pose.commit()}resetPitch(){this.eulerCache.setFromQuaternion(this.cameraData.pose.rotation,"YXZ"),this.eulerCache.x=0,this.eulerCache.z=0,this.quaternionCache.setFromEuler(this.eulerCache),this.updateCameraRotation(this.quaternionCache)}canTransition(){return this.cameraData.canTransition()}moveTo(e){if(!this.canTransition())return d.Q.reject("Cannot move while the camera is already moving");const t=y[e.transitionType],n=e.pose.rotation,i=e.pose.position;let s=e.projection;e.pose.zoom&&(s&&(0,r.Pp)(s)||this.cameraData.isOrtho())&&(s=this.adjustProjectionZoom(s||this.cameraData.pose.projection.clone(),e.pose.zoom));const o=void 0!==e.blackoutTime?e.blackoutTime:t.blackoutTime,a=e.transitionType,l=e.transitionSpeedMultiplier?1/e.transitionSpeedMultiplier:1;let c=a===v.n.Instant?0:e.transitionTime;if(void 0===c)if(e.transitionType===v.n.Interpolate&&i){const e=i.distanceTo(this.cameraData.pose.position);c=this.baseTransitionTime+Math.log2(1+e)*S*this.transitionSpeed*l}else c=t.transitionTime;const u=this.fromPose();this.beginInternalTransition({transitionType:a,transitionTime:c,blackoutTime:o,pose:{position:i,rotation:n},projection:s,easing:e.easing,rotationDelay:e.rotationDelay||0,rotationDuration:e.rotationDuration||1,matrixDelay:e.matrixDelay||0,matrixDuration:e.matrixDuration||1,focalDistance:e.focalDistance||u.focalDistance});const h={position:e.pose.position?e.pose.position.clone():void 0,rotation:e.pose.rotation?e.pose.rotation.clone():void 0,projection:e.projection?e.projection.clone():void 0,focalDistance:e.focalDistance?e.focalDistance:void 0};this.engine.broadcast(new BeginCameraMoveMessage(h,u));const p=this.cameraData.transition.promise;if(!p)throw new Error("Expected promise to have been created.");const m=this.progressInternalTransition.bind(this),b=this.endInternalTransition.bind(this),E=this;return p.notify(0),this.engine.startGenerator((function*(){let t=16;for(t>=E.cameraData.transition.duration&&(p.notify(.5),yield new f.Jj);t<E.cameraData.transition.duration;){m(t,o);const e=(0,g.uZ)(t/E.cameraData.transition.duration,0,1);p.notify(e),yield new f.Jj,t=16+Date.now()-E.cameraData.transition.startTime}b(e.transitionType),E.cameraData.commit(),p.notify(1),p.resolve(),E.engine.broadcast(new EndCameraMoveMessage(h,u))})),p.promise()}async cancelTransition(){return this.cameraData.transition.active?new Promise((e=>{(0,l.rw)(this.cameraData.pose,this.cameraData.transition.to,!1);const t=Date.now()-this.cameraData.transition.startTime;this.cameraData.transition.duration=t,this.cameraData.transition.progress.stop(1),this.cameraData.pose.commit(),this.cameraData.transition.commit();const n=this.cameraData.transition.onPropertyChanged("active",(t=>{t||(n&&n.cancel(),e())}))})):Promise.resolve()}updateTransitionSpeed(e){if(this.cameraData.transition.active){const t=Date.now(),n=t-this.cameraData.transition.startTime,i=n/e,s=this.cameraData.transition.progress,r=(s.duration-n)/e+i;this.cameraData.transition.duration=r,this.cameraData.transition.startTime=t-i,s.modifyAnimation(s.value,s.endValue,r,s.easing,i),this.cameraData.transition.commit()}}beginExternalTransition(){this.cameraData.transition.activeInternal||(this.cameraData.transition.startTime=Date.now(),this.cameraData.transition.active=!0,this.cameraData.transition.promise=new d.Q,this.cameraData.transition.commit())}endExternalTransition(){var e;this.cameraData.transition.activeInternal||(this.cameraData.transition.active=!1,null===(e=this.cameraData.transition.promise)||void 0===e||e.resolve(),this.cameraData.transition.commit())}beginInternalTransition(e){const t=e.transitionTime||0;if(this.cameraData.transition.startTime=Date.now(),this.cameraData.transition.duration=t,this.cameraData.transition.active=!0,this.cameraData.transition.promise=new d.Q,this.cameraData.transition.activeInternal=!0,this.cameraData.transition.type=e.transitionType,this.cameraData.transition.progress.modifyAnimation(0,1,t,e.easing||u.to),this.cameraData.transition.rotationDelay=e.rotationDelay||0,this.cameraData.transition.rotationDuration=e.rotationDuration||1,this.cameraData.transition.matrixDelay=e.matrixDelay||0,this.cameraData.transition.matrixDuration=e.matrixDuration||1,e.transitionType===v.n.FadeToBlack&&this.cameraData.transition.blackoutProgress.modifyAnimation(0,1,e.blackoutTime,u.vG),e.transitionType===v.n.MoveToBlack){const e=500;this.cameraData.transition.blackoutProgress.modifyAnimation(0,1,t-2*e,u.aB,0,e)}this.cameraData.transition.from.position=this.cameraData.pose.position.clone(),this.cameraData.transition.from.rotation=this.cameraData.pose.rotation.clone(),this.cameraData.transition.from.projection=this.cameraData.pose.projection.clone(),this.cameraData.transition.from.focalDistance=this.cameraData.pose.focalDistance,this.cameraData.transition.to.position=e.pose.position?e.pose.position.clone():void 0,this.cameraData.transition.to.rotation=e.pose.rotation?e.pose.rotation.clone():void 0,this.cameraData.transition.to.projection=e.projection?e.projection.clone():void 0,this.cameraData.transition.to.focalDistance=e.focalDistance?e.focalDistance:void 0,this.cameraData.transition.commit()}progressInternalTransition(e,t){if(this.cameraData.transition.active){if(this.cameraData.transition.progress.updateAbsolute(e),this.cameraData.transition.type===v.n.Interpolate)this.updateInterpolateTransition();else if(this.cameraData.transition.type===v.n.FadeToBlack){let n=0;const i=this.cameraData.transition.duration;e<=t?n=e:((0,l.rw)(this.cameraData.transition.to,this.cameraData.pose,!1),n=e>=i-t?i-e:t),this.cameraData.transition.blackoutProgress.updateAbsolute(n),this.cameraData.transition.progress.updateAbsolute(e<=t?0:i)}else if(this.cameraData.transition.type===v.n.MoveToBlack){const t=this.cameraData.transition.blackoutProgress;this.updateInterpolateTransition(),t.updateAbsolute(e-t.delay)}this.cameraData.pose.commit(),this.cameraData.transition.commit()}}updateInterpolateTransition(){const e=this.cameraData.transition.from,t=this.cameraData.transition.to;if(t.position&&e.position&&this.cameraData.pose.position.copy(e.position).lerp(t.position,this.cameraData.transition.progress.value),t.focalDistance&&e.focalDistance&&(this.cameraData.pose.focalDistance=(0,s.t)(e.focalDistance,t.focalDistance,this.cameraData.transition.progress.value)),t.rotation&&e.rotation){const n=(0,u.e3)(this.cameraData.transition.progress.easing,this.cameraData.transition.progress.value,this.cameraData.transition.progress.elapsed,this.cameraData.transition.progress.duration*this.cameraData.transition.rotationDuration,this.cameraData.transition.rotationDelay);this.cameraData.pose.rotation.copy(e.rotation).slerp(t.rotation,n)}if(t.projection&&e.projection){const n=(0,u.e3)(u.w2,this.cameraData.transition.progress.value,this.cameraData.transition.progress.elapsed,this.cameraData.transition.progress.duration*this.cameraData.transition.matrixDuration,this.cameraData.transition.matrixDelay);!function(e,t,n,i){const s=i.elements,r=e.elements,o=t.elements;for(let e=0;e<16;e++)s[e]=r[e]*(1-n)+o[e]*n}(e.projection,t.projection,n,this.cameraData.pose.projection)}}endInternalTransition(e){(0,l.rw)(this.cameraData.transition.to,this.cameraData.pose,!1),this.cameraData.transition.type=null,this.cameraData.transition.active=!1,this.cameraData.transition.activeInternal=!1,this.cameraData.transition.progress.stop(1),e!==v.n.FadeToBlack&&e!==v.n.MoveToBlack||this.cameraData.transition.blackoutProgress.stop(0),this.cameraData.pose.commit(),this.cameraData.transition.commit()}adjustProjectionZoom(e,t){const n=1/t;return e.elements[0]=n/this.canvas.aspectRatio,e.elements[5]=n,e}setBaseProjection(e){this.cameraData.setBaseProjection(e)}}},14832:(e,t,n)=>{"use strict";var i;n.d(t,{n:()=>i}),function(e){e[e.Instant=0]="Instant",e[e.FadeToBlack=1]="FadeToBlack",e[e.Interpolate=2]="Interpolate",e[e.MoveToBlack=3]="MoveToBlack"}(i||(i={}))},18984:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,y:()=>a});var i=n(51167),s=n(14832),r=n(87100);const o=Object.freeze({camera:{transitionBlackoutTime:300,transitionFadeTime:800,baseTransitionTime:(0,r.eY)("btt",200),transitionSpeed:(0,r.eY)("tsp",3)}}),a={[i.s.Desktop]:s.n.Interpolate,[i.s.Mobile]:s.n.Interpolate,[i.s.VrOrientOnly]:s.n.FadeToBlack,[i.s.VrWithController]:s.n.FadeToBlack,[i.s.VrWithTrackedController]:s.n.FadeToBlack}},7692:(e,t,n)=>{"use strict";n.d(t,{q9:()=>r,bD:()=>o,D_:()=>a,z5:()=>c,st:()=>d,Kh:()=>u,fi:()=>h});var i=n(84428),s=n(77280);const r=(()=>{const e=new i.Matrix4,t=new i.Matrix4;return(n,s,r,o)=>(r=r||new i.Vector2,o=o||new i.Vector3,l(n.pose,t),e.copy(t),e.invert(),o.set(s.x,s.y,s.z).applyMatrix4(e).applyMatrix4(n.pose.projection.asThreeMatrix4()),h(n.width,n.height,o,r),{screenPosition:r,ndcPosition:o})})(),o=(()=>{const e=new i.Vector3,t=new i.Vector2;return(n,i,s,r,o,l)=>(e.copy(a(n,i,s,l)),h(r,o,e,t),t)})(),a=(()=>{const e=new i.Matrix4,t=new i.Matrix4,n=new i.Vector3;return(i,r,o,a)=>(e.compose(r,o,s.f.UNIT),t.copy(e),t.invert(),n.copy(i).applyMatrix4(t).applyMatrix4(a),n)})(),l=(e,t)=>(t=t||new i.Matrix4).compose(e.position,e.rotation,s.f.UNIT),c=(e,t,n,s,r)=>((r=r||new i.Vector2).x=e/n*2-1,r.y=-t/s*2+1,r),d=(e,t,n=.5,s)=>((s=s||new i.Vector3).x=t.x,s.y=t.y,s.z=n,u(e.pose,s)),u=(()=>{const e=new i.Matrix4,t=new i.Matrix4;return(n,s,r)=>((r=r||new i.Vector3).copy(s),t.copy(n.projection.asThreeMatrix4()),t.invert(),l(n,e),r.applyMatrix4(t).applyMatrix4(e))})(),h=(e,t,n,s)=>((s=s||new i.Vector2).set((n.x+1)*e/2,(1-n.y)*t/2),s)},56396:(e,t,n)=>{"use strict";n.d(t,{O:()=>CameraStartData,B:()=>CameraStartPose});var i=n(22878),s=n(35424);class CameraStartData extends s.V{constructor(e,t,n){super(),this.name="cam-start",this.icon=e,this.thumb=t,this.pose=new CameraStartPose,n&&this.pose.copy(n)}copy(e,t=!1){var n;return this.icon=e.icon,t?e.thumb&&(null===(n=this.thumb)||void 0===n||n.refreshFrom(e.thumb)):this.thumb=e.thumb,this.pose.copy(e.pose),this}get hasCameraPose(){return this.pose&&this.pose.camera&&void 0!==this.pose.camera.position}}class CameraStartPose{constructor(e=i.Ey.Panorama,t,n,s,r,o){this.mode=e,this.camera={position:t||void 0,rotation:n||void 0,zoom:s||void 0},this.pano=r||{uuid:void 0},this.floorVisibility=o||void 0}copy(e){return this.camera.position=r(e.camera.position,this.camera.position),this.camera.rotation=r(e.camera.rotation,this.camera.rotation),this.camera.zoom=e.camera.zoom,this.pano.uuid=e.pano.uuid?e.pano.uuid.slice():void 0,this.mode=e.mode,this.floorVisibility=e.floorVisibility?e.floorVisibility.slice():void 0,this}}const r=(e,t)=>e&&t?t.copy(e):e&&!t?e.clone():void 0},3922:(e,t,n)=>{"use strict";n.d(t,{K:()=>NavigationUrl});var i=n(84428),s=n(22878),r=n(87100),o=n(5477),a=n(63387),l=n(94293);const c=new o.Z("navurl");class InvalidViewmodeError extends Error{constructor(e,t){super(`view mode ${e} is invalid${t?` when ${t}`:""}`)}}class NavigationUrl{static encodeVector3(e,t=2){const{x:n,y:i,z:s}=e;return NavigationUrl.packFloats([n,i,s],t)}static decodeVector3(e){const t=NavigationUrl.unpackFloats(e,3);return t?new i.Vector3(...t):null}static encodeQuaternion(e,t=2){return NavigationUrl.packFloats([e.x,e.y,e.z,e.w],t)}static decodeQuaternion(e){const t=NavigationUrl.unpackFloats(e,4);return t&&!(0,l.mB)(t)?new i.Quaternion(...t):null}static encodeEuler(e,t=2){return NavigationUrl.packFloats([e.x,e.y,e.z],t)}static decodeEuler(e){const t=NavigationUrl.unpackFloats(e,3);return t?new i.Euler(t[0],t[1],t[2],"XYZ"):void 0}static packFloats(e,t=2){let n=e.map((e=>{const n=parseFloat(e.toFixed(t)).toString().replace(/^(\-)?0+.(\d+)/,"$1.$2");return"0"===n?"":n})).join(",");return n=n.replace(/,+$/,""),n}static unpackFloats(e,t=0){const n=e.split(",").map((e=>""===e?0:parseFloat(e)));if(!n||n.includes(NaN))return[];for(;n.length<t;)n.push(0);return n}static getQueryString(e,t=!0){return NavigationUrl.serialize(e,t).toString()}static serialize(e,t=!0){const n=NavigationUrl.removeNavigationKeys();try{if(t){const t=NavigationUrl.getShortPose(e);for(const[e,i]of Object.entries(t))n.set(e,i)}else{const t=NavigationUrl.getStartPose(e),i=JSON.stringify(t);n.set("start",i)}}catch(e){c.debug(e)}return n}static deserialize(e=window.location.href){const t=new URL(e).searchParams;try{const e=t.get("start");return e?NavigationUrl.parseStartObject(e):NavigationUrl.parseShortUrl(t)}catch(e){c.debug(e)}return null}static removeNavigationKeys(){const e=(0,r.kD)();for(const t of["start","sm","sp","sq","sr","ss","sf","sz"])e.delete(t);return e}static parseShortUrl(e){const t=e.get("sm"),n=e.get("sp"),r=e.get("sq"),o=e.get("sr"),l=e.get("ss"),d=e.get("sf"),u=e.get("sz"),h=NavigationUrl.parseViewmode(t),p=NavigationUrl.decodeEuler(o||"")||new i.Euler(0,0,0),m=NavigationUrl.decodeQuaternion(r||"")||new i.Quaternion(0,0,0,1),g=n?NavigationUrl.decodeVector3(n):void 0,f=l?parseInt(l,10)-1:void 0,v=d?NavigationUrl.unpackFloats(d,4):void 0,b=u?parseFloat(u):void 0;if((0,s.Bw)(h)&&void 0===f)throw new InvalidViewmodeError(h,"sweep index not defined");if(!(0,s.Bw)(h)&&!g)throw new InvalidViewmodeError(h,"position is falsy");let y=r?m:(new i.Quaternion).setFromEuler(p);(0,s.Bw)(h)&&(y=(0,a.Z)(y));const S={mode:h,quaternion:y,position:g||void 0,sweepIndex:f,floorVisibility:v,zoom:b};return c.debug("Parsed short URL pose data:",S),S}static parseStartObject(e){const t=JSON.parse(decodeURIComponent(e));if(!t.camera_quaternion)throw Error("Start override is missing camera_quaternion");if(!t.camera_position)throw Error("Start override is missing camera_position");const n=NavigationUrl.parseViewmode(t.camera_mode),s=(new i.Quaternion).copy(t.camera_quaternion),r={mode:n,panoId:t.scan_id,position:(new i.Vector3).copy(t.camera_position),quaternion:s,zoom:t.ortho_zoom,floorVisibility:t.floor_visibility};return c.debug("Parsed &start URL pose data:",r),r}static getShortPose({cameraData:e,viewmodeData:t,floorsViewData:n,sweepData:r}){const o=(new i.Euler).setFromQuaternion(e.pose.rotation,"XYZ"),a=r.currentSweepIndex,l={};if(t.isInside())o.z=0,l.sr=NavigationUrl.encodeEuler(o),void 0!==a&&(l.ss=a+1),t.currentMode===s.Ey.Mesh&&(l.sm=NavigationUrl.validateViewmode(t.currentMode));else{l.sm=NavigationUrl.validateViewmode(t.currentMode),l.sr=NavigationUrl.encodeEuler(o),l.sp=NavigationUrl.encodeVector3(e.pose.position);const i=n.getFloorsVisibility();i.length&&n.totalFloors>1&&(l.sf=i)}return t.currentMode===s.Ey.Floorplan&&(l.sz=parseFloat(e.zoom().toFixed(2))),l.sq=NavigationUrl.encodeQuaternion(e.pose.rotation),c.debug(`Short URL params for current location ${JSON.stringify(l)}`),delete l.sq,l}static getStartPose({cameraData:e,viewmodeData:t,floorsViewData:n,sweepData:i}){const r={x:0,y:0,z:0,w:1};r.x=e.pose.rotation.x,r.y=e.pose.rotation.y,r.z=e.pose.rotation.z,r.w=e.pose.rotation.w;const o={x:0,y:0,z:0};o.x=e.pose.position.x,o.y=e.pose.position.y,o.z=e.pose.position.z;const a={camera_mode:NavigationUrl.validateViewmode(t.currentMode),camera_position:o,camera_quaternion:r};return t.isInside()?a.scan_id=i.currentSweep:a.floor_visibility=n.getFloorsVisibility(),t.currentMode===s.Ey.Floorplan&&(a.ortho_zoom=e.zoom()),a}static parseViewmode(e){let t=NavigationUrl.DEFAULT_VIEW_MODE;return null!=e&&(t=parseInt(e,10)),NavigationUrl.validateViewmode(t)}static validateViewmode(e){if(null===e||!NavigationUrl.VALID_URL_VIEW_MODES.includes(e))throw new InvalidViewmodeError(e);return e}}NavigationUrl.DEFAULT_VIEW_MODE=s.Ey.Panorama,NavigationUrl.VALID_URL_VIEW_MODES=[s.Ey.Panorama,s.Ey.Dollhouse,s.Ey.Floorplan,s.Ey.Outdoor,s.Ey.Mesh]},99848:(e,t,n)=>{"use strict";n.d(t,{n:()=>SetCameraStartCommand,D:()=>SetMoveCameraOnViewChange});var i=n(93037);class SetCameraStartCommand extends i.m{constructor(e){super(),this.payload={snapshotSid:e}}}SetCameraStartCommand.id="SET_CAMERA_START";class SetMoveCameraOnViewChange extends i.m{constructor(e){super(),this.payload={moveCamera:e}}}SetMoveCameraOnViewChange.id="SET_MOVE_CAMERA_ON_VIEW_CHANGE"},1892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>CameraStartModule});var i=n(21938),s=n(14877),r=n(56396),o=n(57227),a=n(3922),l=n(22878),c=n(4117);class StartLocationSetMessage extends c.v{constructor(e){super(),this.is360=e}}var d=n(53549),u=n(63387),h=n(52549),p=n(48697),m=n(47063),g=n(66225),f=n(64927),v=n(82351);class MdsCameraStartPatchSerializer{serialize(e){return{image:e.sid}}}class MdsCameraStartStore extends g.u{constructor(e,t){super(e),this.baseModelId=t,this.deserializer=new v.f,this.serializer=new MdsCameraStartPatchSerializer,this.prefetchKey="data.model.image",this.readStartLocationIds=!1}async read(e){var t,n;const i={modelId:this.getViewId()},s=await this.query(f.GetModelImage,i,e),r=null===(n=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.model)||void 0===n?void 0:n.image;return this.readStartLocationIds&&await this.getStartLocationSweepIds(),{image:null==r?void 0:r.id,snapshot:this.deserializer.deserialize(r)}}async update(e){const t=this.getViewId(),n=this.serializer.serialize(e);if(0===Object.keys(n).length)throw new Error("No data to update?");return this.mutate(f.PatchModel,{modelId:t,patch:n}).then((async()=>{this.readStartLocationIds&&await this.getStartLocationSweepIds()}))}async getStartLocationSweepIds(){var e,t;this.readStartLocationIds=!0;const n={modelId:this.baseModelId},i=null===(t=null===(e=(await this.query(f.GetStartLocations,n,{fetchPolicy:"no-cache"})).data)||void 0===e?void 0:e.model)||void 0===t?void 0:t.views;return this.startLocationSweepIds=new Set,i?(i.forEach((e=>{var t,n,i,s;const r=null===(s=null===(i=null===(n=null===(t=e.model)||void 0===t?void 0:t.image)||void 0===n?void 0:n.snapshotLocation)||void 0===i?void 0:i.anchor)||void 0===s?void 0:s.id;r&&this.startLocationSweepIds&&this.startLocationSweepIds.add(r)})),this.startLocationSweepIds):this.startLocationSweepIds}isStartLocation(e){if(!this.startLocationSweepIds)throw new Error("StartLocation data not available!");return this.startLocationSweepIds.has(e)}}var b=n(99848),y=n(28129),S=n(37614);class CameraStartModule extends o.Y{constructor(){super(...arguments),this.name="camera-start",this.store=null,this._moveCameraOnViewChange=!0,this.duplicateViewData=new r.O(void 0,new y.n("",new Date)),this.processData=async e=>{var t,n,i;let s,o;const a=e.image,l=e.snapshot;if(l?(s=this.buildCameraStart(l),o=l.thumbnailUrl):a&&(await this.snapshotDataLoadPromise,s=null!==(t=this.getIconStartPose(a))&&void 0!==t?t:void 0,o=this.getIconThumbnail(a)),s||(s=null!==(n=this.getStartFallback())&&void 0!==n?n:void 0),null===(i=null==s?void 0:s.pano)||void 0===i?void 0:i.uuid){const e=this.sweepData.getSweep(s.pano.uuid);e&&!e.enabled&&(this.log.warn(`Enabled hidden start sweep ${s.pano.uuid}`),e.enabled=!0,e.commit())}this.data.atomic((()=>{this.data.icon=a,o&&this.data.thumb?this.data.thumb.refreshFrom(o):(this.data.thumb=o,o&&(o.onStale=async()=>{var e;await(null===(e=this.store)||void 0===e?void 0:e.refresh())})),this.data.pose.copy(null!=s?s:new r.B)})),this.data.commit()},this.beforeViewDuplicate=async()=>{this.duplicateViewData.copy(this.data,!0)},this.afterViewDuplicate=async()=>{this.data.copy(this.duplicateViewData,!0),this.data.commit(),await this.save()}}async init(e,t){const{readonly:n,baseUrl:o,baseModelId:l}=e;this.engine=t,[this.storage,this.sweepData]=await Promise.all([t.getModuleBySymbol(s.y.STORAGE),t.market.waitForData(d.Z)]),this.snapshotDataLoadPromise=t.market.waitForData(i.P).then((e=>{this.snapshotsData=e}));const c=a.K.deserialize();if(c){const e=this.parseNavigationPose(c);this.validStartPano(e)?(this.startingPose=new r.B,this.startingPose.copy(e),this.log.debug("Starting Camera Pose",this.startingPose)):this.log.error("Invalid start pose",e)}const{commandBinder:u}=this.engine;if(this.bindings.push(u.addBinding(b.n,(async e=>this.updateStartLocationFromSnapshot(e.snapshotSid))),u.addBinding(b.D,(async e=>{this._moveCameraOnViewChange=e.moveCamera}))),this.data=new r.O,this.store=new MdsCameraStartStore({readonly:n,baseUrl:o},l),this.store.onNewData(this.processData),await this.store.refresh(),!n){this.bindings.push(this.storage.onSave((()=>this.save()),{dataType:h.g.START_LOCATION}));const e=await t.market.waitForData(p.Q);e.setRevertableType(h.g.START_LOCATION),e.setPublishableType(h.g.START_LOCATION)}this.duplicateViewHelper={beforeDuplicate:this.beforeViewDuplicate,afterDuplicate:this.afterViewDuplicate},u.issueCommand(new S.Ch(this.duplicateViewHelper)),t.market.register(this,r.O,this.data)}dispose(e){e.commandBinder.issueCommand(new S.EO(this.duplicateViewHelper))}getStartingPose(){return this.startingPose||this.data.pose}parseNavigationPose(e){const{mode:t,quaternion:n,position:i,floorVisibility:s,sweepIndex:r,zoom:o}=e;let{panoId:a}=e;if(a&&!this.sweepData.containsSweep(a)){const e=this.sweepData.getSweepByUuid(a);e&&(a=e.id)}if(!a&&void 0!==r){const e=this.sweepData.getSweepByIndex(r);e?a=e.id:this.log.debug(`Failed to load sweep index ${r}`)}return{mode:t,camera:{position:i,rotation:n,zoom:o},pano:{uuid:a},floorVisibility:s}}async updateStartLocationFromSnapshot(e){const t=this.snapshotsData.get(e),n=this.buildCameraStart(t),i=new r.O(t.sid,t.thumbnailUrl,n);this.data.copy(i),this.data.commit(),this.engine.broadcast(new StartLocationSetMessage(t.is360)),await this.engine.commandBinder.issueCommand(new m.VQ({dataTypes:[h.g.START_LOCATION]}))}get moveCameraOnViewChange(){return this._moveCameraOnViewChange}getStartLocationSweepIds(){var e;return this.store?null===(e=this.store)||void 0===e?void 0:e.getStartLocationSweepIds():Promise.resolve(new Set)}isStartLocation(e){if(!this.store)throw new Error("MDSCameraStartStore not set!");return this.store.isStartLocation(e)}async save(){const e=this.data.icon;if(!e||!this.store)return void this.log.warn("Unable to save start location");const t=this.snapshotsData.get(e);return this.store.update(t)}buildCameraStart(e){const t={mode:e.metadata.cameraMode,camera:{position:e.metadata.cameraPosition,rotation:e.metadata.cameraQuaternion,zoom:e.metadata.orthoZoom},pano:{}};return(0,l.Bw)(t.mode)&&(t.pano={uuid:e.metadata.scanId}),t.floorVisibility=e.metadata.floorVisibility,t}defaultCameraStart(e){return{mode:l.Ey.Panorama,camera:{position:e.position,rotation:(0,u.Z)(e.rotation),zoom:0},pano:{uuid:e.id}}}validStartPano(e){return!!e&&(!(0,l.Bw)(e.mode)||!!e.pano.uuid&&this.sweepData.containsSweep(e.pano.uuid))}getStartFallback(){const e=this.sweepData.getFirstAlignedSweep()||this.sweepData.getFirstSweep();return void 0===e?null:this.defaultCameraStart(e)}getIconStartPose(e){let t=null;return e&&e in this.snapshotsData.collection&&(t=(new r.B).copy(this.buildCameraStart(this.snapshotsData.get(e)))),this.validStartPano(t)||(t=null),t}getIconThumbnail(e){if(e&&e in this.snapshotsData.collection)return this.snapshotsData.get(e).thumbnailUrl}}},99145:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>CanvasExtModule});var i=n(80051),s=n(20725),r=n(57227),o=n(82722),a=n(41510),l=n(1682),c=n(47475);class CanvasExtModule extends r.Y{constructor(){super(...arguments),this.name="canvas-ext"}async init(e,t){this._canvas=e.canvas,this.msgBus=t.msgBus,this.canvasBounds=this._canvas.getBoundingClientRect(),this.bindings.push(t.commandBinder.addBinding(a.M,(async function(){})),t.commandBinder.addBinding(l.L,(async function(){})),t.commandBinder.addBinding(c.n,(async function(){}))),this.data=new o.W(this.canvasBounds.width,this.canvasBounds.height),t.market.register(this,o.W,this.data)}get element(){return this._canvas}get width(){return this.canvasBounds.width}get height(){return this.canvasBounds.height}get x(){return this.canvasBounds.left}get y(){return this.canvasBounds.top}onUpdate(){this.canvasBounds=this._canvas.getBoundingClientRect();const e=this.data.width!==this.width||this.data.height!==this.height,t=this.data.x!==this.x||this.data.y!==this.y;e&&(this.data.width=this.width,this.data.height=this.height,this.data.commit(),this.msgBus.broadcast(new s.a(this.width,this.height))),t&&(this.data.x=this.x,this.data.y=this.y,this.data.commit(),this.msgBus.broadcast(new i.k(this.x,this.y)))}}},47475:(e,t,n)=>{"use strict";n.d(t,{n:()=>BlurCanvasCommand});var i=n(93037);class BlurCanvasCommand extends i.m{constructor(e,t){super(),this.name="blur-canvas",this.payload={duration:e,pixelBlur:t}}}},41510:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,M:()=>ResizeCanvasCommand});var i,s=n(93037);!function(e){e.left="left",e.top="top",e.width="width",e.height="height"}(i||(i={}));class ResizeCanvasCommand extends s.m{constructor(e){super(),this.name="resize-canvas",this.payload=Object.assign({},e)}}},1682:(e,t,n)=>{"use strict";n.d(t,{L:()=>ScreenToCanvasPointCommand});var i=n(93037);class ScreenToCanvasPointCommand extends i.m{constructor(e){super(),this.name="screen-to-canvas-point",this.payload=Object.assign({},e)}}},82722:(e,t,n)=>{"use strict";n.d(t,{W:()=>CanvasData});var i=n(35424);class CanvasData extends i.V{constructor(e,t){super(),this.name="canvas",this.x=0,this.y=0,this.width=e||0,this.height=t||0}get aspectRatio(){const e=this.width/this.height;return isFinite(e)?e:1}}},3555:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>CanvasModule});var i=n(57227),s=n(82722),r=n(20725),o=n(80051),a=n(41510),l=n(31013),c=n(1682),d=n(81402),u=n(47475),h=n(44450),p=n(40603);class CanvasMountError extends p.y{}const m={[a.P.width]:"width",[a.P.height]:"height",[a.P.top]:"top",[a.P.left]:"left"};class CanvasModule extends i.Y{constructor(){super(...arguments),this.name="canvas",this.getNewX=()=>0,this.getNewY=()=>0,this.getNewWidth=e=>e.width,this.getNewHeight=e=>e.height,this.activeTransitions=[],this.activeTransitionMap={left:null,top:null,width:null,height:null},this.onResize=e=>{e.propertyName in a.P&&(this.resolveActiveTransition(e.propertyName),this._canvas.style.transitionDuration=this.stringifyTransitionDurations())},this.onWindowResize=()=>{this.transitionDurations.left=this.transitionDurations.top=this.transitionDurations.width=this.transitionDurations.height="0s",this._canvas.style.transitionDuration=this.stringifyTransitionDurations(),this.applySize(),this.applyPosition(),this.activeTransitions.forEach(this.resolveActiveTransition.bind(this)),this._canvas.style.transitionDuration=this.stringifyTransitionDurations()},this.resizeCanvas=async e=>{if(0!==e.resizeDimensions.length)return this.activeTransitions.forEach(this.resolveActiveTransition.bind(this)),e.resizeDimensions.forEach((e=>{const{property:t,setDimension:n,duration:i=0}=e,s=m[t],r=this._canvas.style[s];switch(t){case a.P.height:this.setHeight(n,i);break;case a.P.width:this.setWidth(n,i);break;case a.P.top:this.setY(n,i);break;case a.P.left:this.setX(n,i)}if(this._canvas.style[s]!==r&&i>0){const e=new l.Q;e.then((()=>{clearTimeout(n)}));const n=setTimeout((()=>{this.resolveActiveTransition(t)}),i+500);this.activeTransitionMap[t]=e,this.activeTransitions.push(t)}})),this.hasActiveTransitions()||(this.canvasBounds=this._canvas.getBoundingClientRect()),this.getTransitionPromise()}}async init(e,t){if(this.engine=t,!e.container)throw new CanvasMountError;this.container=e.container,this.container.appendChild(e.canvas),this.containerBounds=this.container.getBoundingClientRect(),this._canvas=e.canvas,this._canvas.setAttribute("tabindex","-1"),this._canvas.style.position="absolute",this._canvas.style.left="0",this._canvas.style.top="0",this.transitionDurations={left:"0s",top:"0s",width:"0s",height:"0s",filter:"0.4s"},this._canvas.style.transitionProperty=Object.keys(this.transitionDurations).join(","),this._canvas.style.transitionDuration=this.stringifyTransitionDurations(),this.updateTransitions(),this.bindings.push((0,h.kp)(h.g_.RESIZE,this.onWindowResize),t.commandBinder.addBinding(a.M,this.resizeCanvas),this.makeTransitionEndSubscription(),t.commandBinder.addBinding(c.L,(async e=>this.screenToCanvasPoint(e.x,e.y))),t.commandBinder.addBinding(u.n,this.blur.bind(this)));for(const e of this.bindings)e.renew();this.canvasBounds=this._canvas.getBoundingClientRect(),this.containerBounds=this.container.getBoundingClientRect(),this.data=new s.W(this.canvasBounds.width,this.canvasBounds.height),t.market.register(this,s.W,this.data)}makeTransitionEndSubscription(){let e=!1;return{renew:()=>{e||(this.element.addEventListener("transitionend",this.onResize),e=!0)},cancel:()=>{e&&(this.element.removeEventListener("transitionend",this.onResize),e=!1)}}}dispose(e){super.dispose(e)}get element(){return this._canvas}get width(){return this.canvasBounds.width}get height(){return this.canvasBounds.height}get x(){return this.canvasBounds.left}get y(){return this.canvasBounds.top}onUpdate(){const e=this.container.getBoundingClientRect(),t=this.containerHasChanged(e);t&&(this.containerBounds=e,this.updateTransitions()),(t||this.hasActiveTransitions())&&(this.canvasBounds=this._canvas.getBoundingClientRect());const n=this.data.width!==this.width||this.data.height!==this.height,i=this.data.x!==this.x||this.data.y!==this.y;n&&(this.data.width=this.width,this.data.height=this.height,this.data.commit(),this.engine.broadcast(new r.a(this.width,this.height))),i&&(this.data.x=this.x,this.data.y=this.y,this.data.commit(),this.engine.broadcast(new o.k(this.x-this.containerBounds.left,this.y-this.containerBounds.top)))}containerHasChanged(e){return e.left!==this.containerBounds.left||e.top!==this.containerBounds.top||e.width!==this.containerBounds.width||e.height!==this.containerBounds.height}setX(e,t=0){this.getNewX="number"==typeof e?()=>e:e,this.transitionDurations.left=`${t}ms`,this.updateTransitions()}setY(e,t=0){this.getNewY="number"==typeof e?()=>e:e,this.transitionDurations.top=`${t}ms`,this.updateTransitions()}setWidth(e,t=0){this.getNewWidth="number"==typeof e?()=>e:e,this.transitionDurations.width=`${t}ms`,this.updateTransitions()}setHeight(e,t=0){this.getNewHeight="number"==typeof e?()=>e:e,this.transitionDurations.height=`${t}ms`,this.updateTransitions()}screenToCanvasPoint(e,t){return{x:e-this.x,y:t-this.y}}async blur(e){this.transitionDurations.filter=`${e.duration}ms`,this._canvas.style.transitionDuration=this.stringifyTransitionDurations(),this._canvas.style.filter=`blur(${e.pixelBlur}px)`,await(0,d.gw)(e.duration),0===e.pixelBlur&&(this._canvas.style.filter="")}getTransitionPromise(){return Promise.all(this.activeTransitions.map((e=>this.activeTransitionMap[e])).filter((e=>!!e)))}updateTransitions(){this._canvas.style.transitionDuration=this.stringifyTransitionDurations(),this.applySize(),this.applyPosition()}applySize(){this._canvas.style.width=`${this.getNewWidth(this.containerBounds)}px`,this._canvas.style.height=`${this.getNewHeight(this.containerBounds)}px`}applyPosition(){this._canvas.style.left=`${this.getNewX(this.containerBounds)}px`,this._canvas.style.top=`${this.getNewY(this.containerBounds)}px`}stringifyTransitionDurations(){return Object.keys(this.transitionDurations).map((e=>this.transitionDurations[e])).join(",")}resolveActiveTransition(e){this.canvasBounds=this._canvas.getBoundingClientRect();const t=this.activeTransitions.indexOf(e);-1!==t&&this.activeTransitions.splice(t,1);const n=this.activeTransitionMap[e];n&&n.resolve(),this.activeTransitionMap[e]=null,this.transitionDurations[e]="0s"}hasActiveTransitions(){return this.activeTransitions.length>0}}},64969:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});const i="features/current_sweep_indicator"},47076:(e,t,n)=>{"use strict";n.d(t,{Z:()=>GetFloorIntersectCommand});var i=n(93037);class GetFloorIntersectCommand extends i.m{constructor(e){super(),this.payload=Object.assign({},e)}}},32548:(e,t,n)=>{"use strict";n.d(t,{P:()=>EndMoveToFloorMessage});var i=n(4117);class EndMoveToFloorMessage extends i.v{constructor(e,t){super(),this.floorId=e,this.floorName=t}}},64038:(e,t,n)=>{"use strict";n.d(t,{S:()=>StartMoveToFloorMessage});var i=n(4117);class StartMoveToFloorMessage extends i.v{constructor(e,t){super(),this.from=e,this.to=t}}},39823:(e,t,n)=>{"use strict";n.d(t,{i:()=>FloorsData});var i=n(35424),s=n(91183),r=n(66910),o=n(7688);class FloorsData extends i.V{constructor(e){super(),this.name="floors",this.floors=(0,r.q)(e)}onNameChange(e){let t=[];return(0,s.k1)((()=>{this.getOrderedValues().forEach(((n,i)=>{t.push(n.onPropertyChanged("name",e))}))}),(()=>{t.forEach((e=>e.cancel())),t=[]}),!0)}getFloor(e){if(!this.floors.has(e))throw new o.H;return this.floors.get(e)}hasFloor(e){return this.floors.has(e)}getFloorAtIndex(e){return this.floors.values.find((t=>t.index===e))}getFloorByMeshGroup(e){return this.floors.values.find((t=>t.meshGroup===e))}getFloorCount(){return this.floors.length}getCollection(){return this.floors}iterate(e){return this.getOrderedValues().forEach(e)}getTopFloor(){const e=this.getOrderedValues();if(!e.length)throw new o.H("Cannot get top floor, model has no floors");return e[e.length-1]}getBottomFloor(){const e=this.getOrderedValues();if(!e.length)throw new o.H("Cannot get bottom floor, model has no floors");return e[0]}getFloorAtHeight(e,t=!1){const n=this.getOrderedValues();t&&n.reverse();for(const t of n){const n=t.boundingBox;if(n.min.y<=e&&e<=n.max.y)return t}const i=this.getBottomFloor();return e<i.boundingBox.min.y?i:this.getTopFloor()}getClosestFloorAtHeight(e){let t,n=1/0;for(const i of this.floors){const s=Math.abs(i.medianSweepHeight()-e);n>s&&(n=s,t=i)}return t}rename(e,t){if(!this.floors.has(e))return;const n=this.floors.get(e);n.name=t,n.commit()}getOrderedValues(){return this.floors.values.sort(((e,t)=>e.index-t.index))}}},7688:(e,t,n)=>{"use strict";n.d(t,{H:()=>InvalidFloorException});var i=n(40603);class InvalidFloorException extends i.y{constructor(e="Invalid Floor"){super(e),this.name="InvalidFloorException"}}},56044:(e,t,n)=>{"use strict";n.d(t,{c:()=>FloorsViewData});var i=n(41252),s=n(35424),r=n(10854),o=n(67779),a=n(94772),l=n(98254);class FloorState extends l.T{constructor(){super(...arguments),this.hidden=!1,this.navigable=!0,this.hasEnabledAlignedSweeps=!1,this.hasEnabledUnalignedSweeps=!1}}var c=n(66910),d=n(29984),u=n(9986);class FloorsStateHelper{constructor(e,t,n,i,s){this.floors=e,this.viewmodeData=t,this.sweepData=n,this.applicationData=i,this.currentFloorObservable=s,this.bindings=[],this.states=new c.v,this._navigableFloorIds=new d.d,this.hasEnabledAlignedSweeps=!1,this.updateFloorSweepData=()=>{const e=this.sweepData;this.isEditMode()||(this.states.values.forEach((e=>{e.hasEnabledAlignedSweeps=!1,e.hasEnabledUnalignedSweeps=!1})),e.iterate((e=>{if(null!==e.floorId){let t=this.getState(e.floorId);t||(t=this.initializeFloorState(e.floorId)),e.alignmentType===a.z9.ALIGNED?t.hasEnabledAlignedSweeps||(t.hasEnabledAlignedSweeps=e.enabled):t.hasEnabledUnalignedSweeps||(t.hasEnabledUnalignedSweeps=e.enabled),t.commit(),this.hasEnabledAlignedSweeps||(this.hasEnabledAlignedSweeps=e.enabled)}}))),this.updateNavigable()},this.updateHidden=()=>{const e=!this.currentFloorId,t=this.isViewingAlignedPano();this.states.keys.forEach((n=>{const i=!!n&&n===this.currentFloorId,s=this.getState(n);s.hidden=!(e||i||t),s.commit()}))},this.updateNavigable=()=>{const e=this.isEditMode(),t=this.isViewingAlignedPano(),n=this.viewmodeData.isDollhouse()||this.viewmodeData.isFloorplan();this.states.keys.forEach((i=>{const s=this.getState(i);s.navigable=!!e||(t?s.hasEnabledAlignedSweeps:!!n||(s.hasEnabledAlignedSweeps||s.hasEnabledUnalignedSweeps)),s.commit()}));const i=[];this.floors.iterate((e=>{this.getState(e.id).navigable&&i.push(e.id)})),this._navigableFloorIds.replace(i)},this.bindings.push(t.makeModeChangeSubscription(this.updateHidden),n.makeSweepChangeSubscription(this.updateHidden),s.onChanged(this.updateHidden),t.makeModeChangeSubscription(this.updateNavigable),n.makeSweepChangeSubscription(this.updateNavigable),i.onPropertyChanged("application",this.updateFloorSweepData)),this.initializeFloorStates(),this.updateFloorSweepData(),this.updateHidden()}getState(e){return this.states.get(e)}get navigableFloorIds(){return this._navigableFloorIds.values()}onNavigableFloorIdsChanged(e){return this._navigableFloorIds.onChanged(e)}isViewingAlignedPano(){return this.viewmodeData.isInside()&&void 0!==this.sweepData.currentAlignedSweepObject}isEditMode(){return this.applicationData.application===u.Mx.WORKSHOP}get currentFloorId(){return this.currentFloorObservable.value?this.currentFloorObservable.value.id:null}initializeFloorStates(){this.floors.iterate((e=>this.initializeFloorState(e.id)))}initializeFloorState(e){const t=new FloorState;return this.states.set(e,t),t}}var h=n(43543);function p(e,t){return e}const m={floorChangesEnabled:()=>!0,roomNavFeatureEnabled:()=>!0};class FloorsViewData extends s.V{constructor(e,t,n,s,r,a){super(),this.name="floors-view",this.floorSelectable=!1,this.currentFloorObservable=new o.f(null),this.transitionObservable=new o.f({from:null,to:null,progress:new i.z(0),promise:Promise.resolve()}),this._observableFloorsSelectMode=new o.f(!1),this._observableRoomSelectMode=new o.f(!1),this._showFloorSelection=new o.f(!1),this.getFloorMin=e=>{const t=e||(this.currentFloorId||this.bottomFloorId);return this.floors.getFloor(t).bottom},this.isHidden=e=>this.stateHelper.getState(e).hidden,this.isNavigable=e=>this.stateHelper.getState(e).navigable,this.getHighestVisibleFloor=()=>this.currentFloor?this.currentFloor:this.floors.getTopFloor(),this.getHighestVisibleFloorId=()=>this.getHighestVisibleFloor().id,this.updateViewData=()=>{this.floors.iterate((e=>{this.derivedData[e.id]={id:e.id,index:e.index,name:this.getFloorName(e.id)}})),this.commit()},this.getViewData=e=>{if(!this.derivedData[e]){const t=this.floors.getFloor(e);this.derivedData[e]={id:t.id,index:t.index,name:this.getFloorName(t.id)}}return this.derivedData[e]},this.getAllViewData=()=>{const e=[];return this.floors.iterate((t=>{e.push(this.getViewData(t.id))})),e},this.getFloor=e=>this.floors.getFloor(e),this.floors=e,this.config=null!=a?a:m,this.localize=null!=r?r:p,this.derivedData={},this.stateHelper=new FloorsStateHelper(e,t,n,s,this.currentFloorObservable),this.updateViewData()}isCurrentOrAllFloors(e){return!e||!this.currentFloorId||e===this.currentFloorId}isCurrentMeshGroupOrAllFloors(e){return this.currentFloorMeshGroup===h.eh||this.currentFloorMeshGroup===e}makeFloorChangeSubscription(e){return this.currentFloorObservable.onChanged(e)}get currentFloor(){return this.currentFloorObservable.value}get currentFloorId(){var e;return(null===(e=this.currentFloorObservable.value)||void 0===e?void 0:e.id)||null}get currentFloorIndex(){return this.currentFloorObservable.value?this.currentFloorObservable.value.index:h.qE}get currentFloorMeshGroup(){return this.currentFloorObservable.value?this.currentFloorObservable.value.meshGroup:h.eh}getFloorIndexForMeshGroup(e){if(e===h.eh)return h.qE;const t=this.floors.getFloorByMeshGroup(e);return t?t.index:h.qE}get bottomFloorId(){return this.floors.getBottomFloor().id}get topFloorId(){return this.floors.getTopFloor().id}get singleFloor(){if(1===this.floors.getFloorCount())return this.floors.getFloorAtIndex(0)}isMultifloor(){return this.floors.getFloorCount()>1}get nearestFloorId(){return this.transitionActive?this.transition.progress.value>.5?this.transition.to:this.transition.from:this.currentFloorId}get nearestFloor(){const e=this.nearestFloorId;return e?this.floors.getFloor(e):void 0}get transitionActive(){return this.transition.progress.active}get transition(){return this.transitionObservable.value}transitionToFloorInstant(e){this.currentFloorObservable.value=e?this.floors.getFloor(e):null,this.commit()}transitionToFloor(e,t,n,i){const s=this.transitionObservable.value.progress;s.modifyAnimation(0,1,n),this.transitionObservable.value={from:e,to:t,progress:s,promise:i},this.commit(),i.then((()=>{this.transitionToFloorInstant(t)}))}get totalFloors(){return this.floorsEnabled?this.floors.getFloorCount():1}hasEnabledAlignedSweeps(e){return null!==e?this.stateHelper.getState(e).hasEnabledAlignedSweeps:this.stateHelper.hasEnabledAlignedSweeps}getNavigableFloorIds(){return this.stateHelper.navigableFloorIds}onNavigableFloorIdsChanged(e){return this.stateHelper.onNavigableFloorIdsChanged(e)}getFloorIdMap(){const e={};return this.iterate((t=>{e[t.id]={id:t.id,name:t.name,items:[]}})),e}iterate(e){this.floors.iterate((t=>{const n=this.getViewData(t.id);n&&e(n)}))}getFloorNames(){const e=[];return this.floorsEnabled?(this.floors.iterate((t=>{e[t.index]=this.getFloorName(t.id)})),e):e}getFloorName(e){if(!e)return this.localize(r.Z.FLOOR_ALL);const t=this.floors.getFloor(e);return void 0!==t.name&&""!==t.name?t.name:this.getDefaultFloorName(e)}getDefaultFloorName(e){const t=this.floors.getFloor(e);return this.localize(r.Z.SHOWCASE.FLOORS.DEFAULT_NAME,t.index+1)}getFloorsVisibility(){if(this.currentFloorId){const e=[];return this.floors.iterate((t=>{e[t.index]=t.id===this.currentFloorId?1:0})),e}return[]}get floorsEnabled(){return this.config.floorChangesEnabled()}get floorSelectModeEnabled(){return this.config.roomNavFeatureEnabled()}get floorSelectModeActive(){return this._observableFloorsSelectMode.value}set floorSelectModeActive(e){const t=e&&this.floorsEnabled&&this.floorSelectModeEnabled;t!==this._observableFloorsSelectMode.value&&(this._observableFloorsSelectMode.value=t,this.commit())}onFloorSelectModeChange(e){return this._observableFloorsSelectMode.onChanged(e)}get showFloorSelection(){return this._showFloorSelection.value}set showFloorSelection(e){(e&&this.floorSelectModeEnabled)!==this._showFloorSelection.value&&(this._showFloorSelection.value=e&&this.floorSelectModeEnabled,this.commit())}onShowFloorSelectionChanged(e){return this._showFloorSelection.onChanged(e)}get roomSelectModeActive(){return this._observableRoomSelectMode.value}set roomSelectModeActive(e){const t=e&&this.floorSelectModeEnabled||!this.floorSelectModeEnabled;t!==this._observableRoomSelectMode.value&&(this._observableRoomSelectMode.value=t,this.commit())}onRoomSelectModeChange(e){return this._observableRoomSelectMode.onChanged(e)}}},37632:(e,t,n)=>{"use strict";n.d(t,{Vw:()=>MoveToFloorCommand,h9:()=>MoveToFloorIndexCommand,EU:()=>ShowAllFloorsCommand});var i=n(93037);class MoveToFloorCommand extends i.m{constructor(e,t=!1,n,i){super(),this.id="MOVETO_FLOOR",this.payload={floorId:e,suppressCameraMovement:t,transitionTime:n,focusPoint:i}}}class MoveToFloorIndexCommand extends i.m{constructor(e,t=!1,n,i){super(),this.id="MOVETO_FLOOR_NUMBER",this.payload={floorIndex:e,suppressCameraMovement:t,transitionTime:n,focusPoint:i}}}class ShowAllFloorsCommand extends i.m{constructor(e){super(),this.id="SHOW_ALL_FLOORS",this.payload=e}}},43543:(e,t,n)=>{"use strict";n.d(t,{qE:()=>i,eh:()=>s,cw:()=>r});const i=-1,s=-1,r=500},32683:(e,t,n)=>{"use strict";n.d(t,{Q5:()=>i,ws:()=>s,u_:()=>r,gu:()=>o});const i="features/roomnav",s="features/floorselect",r="features/current_floor_indicator",o="features/floor_name_overlay"},3786:(e,t,n)=>{"use strict";n.d(t,{I:()=>GuiErrorCommand});var i=n(93037);class GuiErrorCommand extends i.m{constructor(e,t){super(),this.id="DEFAULT_ERROR",this.payload={messagePhraseKey:e,options:t}}}},71843:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>ToggleModalCommand,rE:()=>CloseModalCommand,Mn:()=>ToggleIconToolbarCommand});var i=n(93037);class ToggleModalCommand extends i.m{constructor(e,t){super(),this.payload={modal:e,open:t}}}ToggleModalCommand.id="TOGGLE_MODAL";class CloseModalCommand extends i.m{constructor(){super()}}CloseModalCommand.id="CLOSE_MODAL";class ToggleIconToolbarCommand extends i.m{constructor(e){super(),this.payload={open:e}}}ToggleIconToolbarCommand.id="TOGGLE_ICON_TOOLBAR"},60591:(e,t,n)=>{"use strict";n.d(t,{Uc:()=>i,Rx:()=>s,EW:()=>ConfirmModalCommand});var i,s,r=n(93037);!function(e){e[e.CONFIRM=0]="CONFIRM",e[e.CLOSE=1]="CLOSE"}(i||(i={})),function(e){e[e.CLOSE=0]="CLOSE",e[e.DISPLAY=1]="DISPLAY",e[e.UPDATE=2]="UPDATE"}(s||(s={}));const o={message:"",title:"",modalClass:"",cancellable:!0,closeButton:!0,confirmDisabled:!1};class ConfirmModalCommand extends r.m{constructor(e,t){if(super(),e&&!t)throw new Error("Cannot open empty modal");this.payload={action:e,properties:Object.assign(Object.assign({},o),t)}}}ConfirmModalCommand.id="CONFIRM_MODAL"},36616:(e,t,n)=>{"use strict";var i;n.d(t,{P:()=>i}),function(e){e.ADD_FROM_PHOTOS="add_from_photos",e.ATTACHMENT="attachmentViewer",e.CONFIRM="confirm",e.CTA="cta",e.HELP="help",e.HIGHLIGHT_EDITOR="highlight_editor",e.LINK_EDITOR="link_editor",e.MATTERTAG_PHOTO="mattertag",e.MEASUREMENT_HELP="measurementModeHelp",e.MODEL_VIEW_ADD="model_view_add",e.MODEL_VIEW_EDITOR="model_view_editor",e.MODEL_VIEW_DUPLICATE="model_view_duplicate",e.NOTES_INTRO="notes_intro",e.RATING_THANK_YOU="rating_thank_you",e.REVERT_CHANGES="revert_unpublished_modal",e.SETTINGS="settings",e.SHARE="share",e.TERMS="terms",e.TOUR_SETTINGS="hlr_settings",e.VIEWS_OPT_IN="views_opt_in",e.VR_SELECT="vrSelect"}(i||(i={}))},89463:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});const i=Object.freeze({pink:"#f78da7",plum:"#9c4b92",purple:"#673ab7",teal:"#03687d",cerulean:"#03a9f4",ocean:"#00bcd4",fog:"#abb8c3",iron:"#607d8b",forest:"#417505",emerald:"#51a868",mint:"#37d67a",lime:"#cddc39",canary:"#fbcd00",sunflower:"#ffac17",tangerine:"#ff6900",sunset:"#f44336",sierra:"#d44441",magenta:"#e91e63"})},29991:(e,t,n)=>{"use strict";n.d(t,{O:()=>U});var i=n(17403);const s=()=>{},r=()=>null,o=()=>!1,a=()=>Promise.reject(),l=()=>Promise.resolve(),c=()=>"",d=()=>({}),u=()=>[],h=()=>({renew:s,cancel:s}),p={register:s,unregister:s,waitForData:a,tryGetData:r,getModuleNameFromData:()=>""},m={subscribe:h,unsubscribe:s,broadcast:s};var g=n(64177);class NoopCommandBinder extends g.B{constructor(){super(...arguments),this.addBinding=h,this.removeBinding=s,this.issueCommand=a,this.issueCommandWhenBound=a,this.hookCommand=s,this.resetHooks=s}}const f=new NoopCommandBinder,v={mask:0,addLayers:s,removeLayers:s,clone:()=>v},b=()=>v;const y={market:p,msgBus:m,commandBinder:f,getModule:a,getModuleBySymbol:a,getModuleBySymbolSync:function(){throw new Error("getModuleBySymbolSync not supported")},tryGetModuleBySymbolSync:r,getModuleSync:()=>{throw new Error("cannot get module with mock engine")},tryGetModuleSync:r,addComponent:l,removeComponent:l,getComponentByType:r,getComponents:function*(){},claimRenderLayer:b,getRenderLayer:b,subscribe:h,unsubscribe:s,broadcast:s,disposeRenderLayer:s,startGenerator:s,stopGenerator:s,after:l,getXrFrame:()=>{},toggleRendering:s};var S=n(1390);class NoopShowcaseAnalytics extends S.default{constructor(){super(...arguments),this.init=l,this.onUpdate=s,this.dispose=s,this.track=s,this.trackGuiEvent=s,this.trackToolGuiEvent=s,this.getSessionId=c}}const E=new NoopShowcaseAnalytics;var T=n(39142);class NoopLocale extends T.default{constructor(){super(...arguments),this.t=e=>e}get languageCode(){return"en"}}const O=new NoopLocale;var _=n(59114);const A=(0,n(48342).Q)(""),w=()=>A;class NoopUserData extends _.m{constructor(){super(...arguments),this.getUserInfoByEmail=r,this.getUserInfoById=r,this.getUserDisplay=w,this.iterate=s,this.getUsersWhoMayNeedAccess=d,this.getKnownUsers=u,this.getCurrentUser=w,this.isLoggedIn=o,this.isOrgAdmin=o,this.isInviter=o,this.isEditor=o,this.isCommenter=o,this.getCurrentUserId=()=>A.id,this.onUsersChanged=h}}const N=new NoopUserData(A,!1,!1);var P=n(77677),I=n(66910),k=n(29410),C=n(23676);const L={activate:l,deactivate:l},M=new k.U({id:C.w1.LABELS,namePhraseKey:"",panel:!1,panelLeft:!1,hidesAppBar:!1,icon:"",analytic:"",toolbar:!1,dimmed:!1,enabled:!1,manager:L,ui:{}}),D=new I.v;class NoopToolsData extends P.t{constructor(){super(...arguments),this.addTools=s,this.iterate=s,this.getTool=()=>M,this.removeTool=s,this.removeAllTools=s,this.setOpenAsset=s,this.onOpenAssetChanged=h,this.getActiveTool=r,this.onToolChanged=h,this.setOpenModal=s,this.onOpenModalChanged=h,this.onToolsLoadedChanged=h,this.setToolAccess=s,this.onToolAssetAccessChanged=h,this.isPanelOpen=o,this.isToolCollapsedToBottom=o,this.setToolPanelLayout=s,this.onToolPanelLayoutChanged=h,this.onToolCollapsedChanged=h,this.setToolCollapsed=s}get toolsMap(){return D}get openAsset(){return null}get activeToolName(){return null}get openModal(){return null}get toolsLoaded(){return!1}get toolAccess(){return C.X$.SCENE}get toolPanelLayout(){return C.wS.NORMAL}get toolCollapsed(){return!1}}const R=new NoopToolsData;var x=n(61903);class NoopSettingsData extends x.e{constructor(){super(...arguments),this.setProperty=s,this.setLocalStorageProperty=s,this.hasProperty=o,this.tryGetProperty=s,this.getProperty=s,this.checkUrlParam=o,this.iterate=s}}const j=new NoopSettingsData,U={editMode:!1,mainDiv:document.createElement("div"),queue:new i.RequestQueue,messageBus:m,userData:N,toolsData:R,settings:j,analytics:E,engine:y,market:p,commandBinder:f,locale:O}},60405:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var i=n(67294),s=n(29991);const r=(0,i.createContext)(s.O)},27436:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Gui});var i=n(57227),s=n(14877),r=n(67294),o=n(20745),a=n(60405),l=n(29991),c=n(85893),d=n(3786),u=n(94184),h=n.n(u),p=n(4117);class AlertNotificationMessage extends p.v{constructor(e){super(),this.open=e}}var m=n(70329),g=n(5477),f=n(11325);const v=new g.Z("alert-notification");class AlertNotification extends r.Component{constructor(e){super(e),this.throttledMessages=new Map,this.onClose=()=>{clearTimeout(this.alertTimer),this.setState({open:!1})},this.state={open:!1}}componentDidMount(){this.update()}componentWillUnmount(){this.state.open&&this.props.messageBus.broadcast(new AlertNotificationMessage(!1))}UNSAFE_componentWillReceiveProps(e){this.update(e)}componentDidUpdate(e,t){this.state.open!==t.open&&this.props.messageBus.broadcast(new AlertNotificationMessage(this.state.open))}update(e=this.props){const{show:t,timeout:n,message:i,throttle:s,type:r}=e,{analytics:o}=this.context;if(t){if(s>0){if(this.throttledMessages.has(i)&&this.throttledMessages.get(i)>Date.now())return void v.debug(`Suppressed alert dialog due to message throttling: ${i}`);this.throttledMessages.set(i,Date.now()+1e3*s)}clearTimeout(this.alertTimer),this.setState({open:!0}),n>0&&(this.alertTimer=window.setTimeout(this.onClose,1e3*n)),o&&o.track("alert_gui",{alert_action:"show",alert_type:r,alert_message:i})}}render(){const{title:e,message:t,type:n}=this.props,{open:i}=this.state,s={active:i,[`notification-${n}`]:!0};return(0,c.jsxs)("aside",Object.assign({className:h()("alert-notification",s)},{children:[(0,c.jsxs)("div",Object.assign({className:"notification-body"},{children:[e&&(0,c.jsx)("h3",Object.assign({className:"notification-title"},{children:e})),(0,c.jsx)("p",Object.assign({className:"notification-text"},{children:t}))]})),(0,c.jsx)(m.P,{buttonStyle:m.A.LIGHT,onClose:this.onClose,hideTooltip:!0})]}))}}AlertNotification.contextType=a.I,AlertNotification.defaultProps={type:f.N.INFO,show:!1,timeout:10,throttle:0};var b=n(96557);class ErrorBar extends r.Component{constructor(e){super(e),this.bindings=[],this.state={guiError:!1,errorMessagePhraseKey:""}}componentDidMount(){const{commandBinder:e}=this.context;this.bindings.push(e.addBinding(d.I,(async e=>{this.showErrorMessage(e.messagePhraseKey,e.options)})))}componentWillUnmount(){this.bindings.forEach((e=>e.cancel())),this.bindings.length=0}componentDidUpdate(e,t){const{guiError:n}=this.state;n&&this.setState({guiError:!1})}showErrorMessage(e,t){this.setState({guiError:!0,errorMessagePhraseKey:e,errorOptions:t})}render(){const{messageBus:e,locale:t}=this.context,{guiError:n,errorMessagePhraseKey:i,errorOptions:s}=this.state;let r=i&&t.t(i);const{error:o}=s||{};return o&&(0,b.bh)(o)&&(r=`${r} (${o.code})`),(0,c.jsx)(AlertNotification,Object.assign({messageBus:e,show:n,message:r},s))}}ErrorBar.contextType=a.I;var y=n(61903),S=n(59114);class Gui extends i.Y{constructor(){super(...arguments),this.name="gui",this.workshopApp=!1,this.onAppReadyChanged=(e,t)=>{this.workshopApp&&(t&&e?this.mainDiv.classList.add("edit-mode"):this.mainDiv.classList.remove("edit-mode"))}}async init(e,t){this.workshopApp=e.workshopApp,this.mainDiv=e.mainDiv,this.container=e.container,this.reactContainer=e.reactContainer,this.queue=e.queue,this.engine=t,this.messageBus=t,this.market=t.market,this.commandBinder=t.commandBinder;const n=t.getModuleBySymbol(s.y.LOCALE),i=t.getModuleBySymbol(s.y.SHOWCASE_ANALYTICS),r=t.market.waitForData(S.m),o=t.market.waitForData(y.e);this.mainArgs=await Promise.all([n,i,o,r]),this.loadErrorBar(this.mainArgs)}dispose(e){this.bindings.forEach((e=>{e.cancel()})),this.bindings=[]}async loadUi(e){let t=[];return t=t.concat(this.mainArgs),t=t.concat([this.mainDiv,this.reactContainer,this.engine,this.messageBus,this.market,this.commandBinder,this.onAppReadyChanged,this.queue]),e.apply(this,t)}loadErrorBar(e){((e,t,n,i,s,c,d)=>{const u=document.createElement("div");u.className="error-bar",i.insertBefore(u,i.firstElementChild);const h=Object.assign(Object.assign({},l.O),{messageBus:e,commandBinder:t,market:n,analytics:s,settings:c,locale:d});(0,o.s)(u).render((0,r.createElement)(a.I.Provider,{value:h},[(0,r.createElement)(ErrorBar,{key:"error-bar"})]))})(this.engine,this.commandBinder,this.market,this.container,e[1],e[2],e[0])}}},56829:(e,t,n)=>{"use strict";n.d(t,{nV:()=>ModalToggledMessage,nZ:()=>PopupMenuOpenedMessage,Z_:()=>LoadIndicatorMessage,bN:()=>LoadIndicatorSuppressMessage,SN:()=>TextBoxFocusMessage});var i=n(4117);class ModalToggledMessage extends i.v{constructor(e,t){super(),this.modal=e,this.open=t}}class PopupMenuOpenedMessage extends i.v{constructor(e){super(),this.id=e}}class LoadIndicatorMessage extends i.v{constructor(e){super(),this.isOpen=e}}class LoadIndicatorSuppressMessage extends i.v{constructor(e){super(),this.suppress=e}}class TextBoxFocusMessage extends i.v{constructor(e,t){super(),this.textElement=e,this.focused=t}}},11325:(e,t,n)=>{"use strict";var i;n.d(t,{N:()=>i}),function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error"}(i||(i={}))},78576:(e,t,n)=>{"use strict";n.d(t,{lZ:()=>i,ig:()=>s,oO:()=>u});var i,s,r=n(85893),o=n(67294),a=n(57340),l=n(94184),c=n.n(l),d=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.UP_LEFT="up-left",e.UP_RIGHT="up-right",e.DOWN_LEFT="down-left",e.DOWN_RIGHT="down-right"}(i||(i={})),function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e.XLARGE="xlarge",e.FIT="fit"}(s||(s={}));let u=class DataBalloon extends o.Component{constructor(e){super(e),this.onClick=e=>{this.props.showOnClick&&this.setState((e=>({persist:!e.persist}))),void 0!==this.props.tooltipTimeout&&window.setTimeout((()=>{this.setState({tooltipEnabled:!1})}),this.props.tooltipTimeout)},this.onMouseEnter=e=>{this.enableTooltip(),this.adjustBalloonPosIfNeeded(e)},this.enableTooltip=()=>{this.setState({tooltipEnabled:!0})},this.state={currentPosition:null,tooltipEnabled:!0,persist:!1}}render(){const{children:e,position:t,content:n,className:i,tooltipWidth:s}=this.props,{currentPosition:o,tooltipEnabled:a,persist:l}=this.state;return(0,r.jsx)("div",Object.assign({role:"button","data-balloon":n,"data-balloon-pos":o||t,"data-balloon-width":s,"data-balloon-persist":l||void 0,className:c()("data-balloon",i,{disabled:!a}),onClick:this.onClick,onTouchStart:this.enableTooltip,onMouseEnter:this.onMouseEnter},{children:e}))}adjustBalloonPosIfNeeded(e){const{currentPosition:t}=this.state;if(null===t){const t=e.target,{position:n}=this.props;let s=n;if(n!==i.LEFT&&n!==i.RIGHT){const e=window.getComputedStyle(t,":after"),r=e.width?parseInt(e.width,10):0;if(r>0){const e=t.getBoundingClientRect(),o=(r-e.width)/2,a=n===i.UP||n===i.UP_RIGHT||n===i.UP_LEFT;e.left-o<=0?s=a?i.UP_RIGHT:i.DOWN_RIGHT:(n===i.UP_LEFT||n===i.DOWN_LEFT)&&e.left-r<=0?s=a?i.UP:i.DOWN:e.right+o>=window.innerWidth?s=a?i.UP_LEFT:i.DOWN_LEFT:(n===i.UP_RIGHT||n===i.DOWN_RIGHT)&&e.right+r>=window.innerWidth&&(s=a?i.UP:i.DOWN)}}this.setState({currentPosition:s})}}};u=d([a.Z],u)},87982:(e,t,n)=>{"use strict";n.d(t,{Dd:()=>s,hU:()=>m});var i,s,r=n(85893),o=n(67294),a=n(94184),l=n.n(a),c=n(57340),d=n(2252),u=n(78576),h=n(61445),p=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.CLEAR="clear",e.PLAIN="plain",e.OVERLAY="overlay",e.PRIMARY="primary",e.SOCIAL="social",e.TOOLBAR="toolbar"}(s||(s={}));let m=i=class IconButton extends o.Component{constructor(e){super(e),this.onClick=e=>{const t=this.props.buttonState;t!==h.BN.BUSY&&t!==h.BN.DISABLED&&this.props.onClick&&this.props.onClick(e)},this.onMouseDown=e=>{const{onMouseDown:t,onClick:n,buttonState:s}=this.props;if(t)t(e);else if(i.iMobile&&n&&s!==h.BN.BUSY&&s!==h.BN.DISABLED){const t=document.activeElement;t&&e.cancelable&&(t.blur(),e.preventDefault())}}}render(){const{ariaLabel:e,breakoutTooltip:t,buttonSize:n,buttonState:i,buttonStyle:o,children:a,className:c,dataValue:d,iconClass:p,id:m,onClick:g,onMouseUp:f,tooltipMsg:v,tooltipPersist:b,tooltipPosition:y,tooltipPreformatted:S,tooltipWidth:E}=this.props,T=i===h.BN.DISABLED,O=i===h.BN.BUSY,_=i===h.BN.DECORATIVE,A=!T&&!O&&!_,w=v?y||u.lZ.DOWN:void 0,N=v?!!S:void 0,P={"button-small":n===h.qE.SMALL,"button-large":n===h.qE.LARGE,"button-disabled":T,"button-dimmed":i===h.BN.DIMMED,"button-active":i===h.BN.ACTIVE,"button-busy":O,"button-interactive":A,"icon-button-primary":o===s.PRIMARY,"icon-button-overlay":o===s.OVERLAY,"icon-button-plain":o===s.PLAIN,"icon-button-social":o===s.SOCIAL,"icon-button-toolbar":o===s.TOOLBAR,"icon-button-breakout-tooltip":t},I={id:m,role:"button","aria-label":e||v,"aria-disabled":T,"data-value":d,className:l()("icon-button",P,c),onClick:g?this.onClick:void 0,onMouseUp:f,onMouseDown:this.onMouseDown},k={"data-balloon":v,"data-balloon-pos":w,"data-balloon-width":E,"data-balloon-pre":N,"data-balloon-persist":b};return t||Object.assign(I,k),(0,r.jsxs)("div",Object.assign({},I,{children:[t&&(0,r.jsx)("div",Object.assign({className:"icon-button-breakout-tooltip-container"},{children:(0,r.jsx)("div",Object.assign({className:"icon-button-breakout-tooltip-trigger"},k))})),p&&(0,r.jsx)("span",{className:`icon ${p}`}),a]}))}};m.iMobile=(0,d.Tt)()||(0,d._1)(),m=i=p([c.Z],m)},77477:(e,t,n)=>{"use strict";n.d(t,{L:()=>ShowToastrCommand,Q:()=>HideToastrCommand});var i=n(93037);class ShowToastrCommand extends i.m{constructor(e){super(),this.id="SHOW_TOASTR",this.payload=e}}class HideToastrCommand extends i.m{constructor(){super(...arguments),this.id="HIDE_TOASTR"}}},61445:(e,t,n)=>{"use strict";n.d(t,{BN:()=>s,qE:()=>r,ZJ:()=>o,zx:()=>m});var i,s,r,o,a=n(85893),l=n(67294),c=n(94184),d=n.n(c),u=n(57340),h=n(2252),p=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.ENABLED="enabled",e.DISABLED="disabled",e.DECORATIVE="decorative",e.DIMMED="dimmed",e.ACTIVE="active",e.BUSY="busy"}(s||(s={})),function(e){e[e.STANDARD=0]="STANDARD",e[e.MINI=1]="MINI",e[e.SMALL=2]="SMALL",e[e.LARGE=3]="LARGE"}(r||(r={})),function(e){e[e.PRIMARY=0]="PRIMARY",e[e.SECONDARY=1]="SECONDARY",e[e.TERTIARY=2]="TERTIARY",e[e.OUTLINE=3]="OUTLINE",e[e.OVERLAY=4]="OVERLAY",e[e.LIGHT=5]="LIGHT",e[e.SECONDARY_LIGHT=6]="SECONDARY_LIGHT",e[e.CLEAR=7]="CLEAR",e[e.TOOLBAR=8]="TOOLBAR",e[e.PLAIN=9]="PLAIN"}(o||(o={}));let m=i=class Button extends l.Component{constructor(e){super(e),this.handlingClick=!1,this.mouseupTimeout=0,this.onMouseDown=e=>{if(this.handlingClick=!1,this.props.onMouseDown)this.props.onMouseDown(e);else if(i.iMobile&&this.props.onClick){const t=document.activeElement;t&&e.cancelable&&(this.handlingClick=!0,e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),t.blur(),window.addEventListener("mouseup",(t=>{this.handlingClick&&(this.handleClick(e),window.clearTimeout(this.mouseupTimeout))}),{once:!0}),this.mouseupTimeout=window.setTimeout((()=>{this.handlingClick=!1}),300))}},this.onClick=e=>{this.handlingClick||this.handleClick(e)}}handleClick(e){const{buttonState:t,onClickArgs:n=[]}=this.props,i=t===s.DISABLED,r=t===s.BUSY,o=t===s.DECORATIVE;!this.props.onClick||i||r||o?e.stopPropagation():this.props.onClick(e,...n)}render(){const{ariaLabel:e,buttonSize:t,buttonState:n,buttonStyle:i,children:l,className:c,dataValue:u,id:h,multiline:p,onMouseEnter:m,onMouseLeave:g,tooltipMsg:f,tooltipPosition:v,tooltipPreformatted:b}=this.props,y=n===s.DISABLED,S=n===s.BUSY,E=n===s.DECORATIVE,T=i===o.SECONDARY||i===o.SECONDARY_LIGHT,O=i===o.TERTIARY,_=i===o.LIGHT||i===o.SECONDARY_LIGHT,A={"button-small":t===r.SMALL,"button-large":t===r.LARGE,"button-mini":t===r.MINI,"button-secondary":T,"button-tertiary":O,"button-outline":i===o.OUTLINE,"button-light":_,"button-primary":i===o.PRIMARY,"button-overlay":i===o.OVERLAY,"button-clear":i===o.CLEAR,"button-plain":i===o.PLAIN,"button-toolbar":i===o.TOOLBAR,"button-active":n===s.ACTIVE,"button-dimmed":n===s.DIMMED,"button-busy":S,"button-disabled":y,"button-decorative":E,"button-multiline":p,"button-with-tooltip":!!f};return(0,a.jsx)("div",Object.assign({id:h,role:"button","aria-label":e||f,"aria-disabled":y,className:d()("button",A,c),"data-value":u,onClick:this.onClick,onMouseEnter:m,onMouseLeave:g,onMouseDown:this.onMouseDown,"data-balloon":f||null,"data-balloon-pre":!!b,"data-balloon-pos":v||null},{children:l}))}};m.iMobile=(0,h.Tt)()||(0,h._1)(),m=i=p([u.Z],m)},70329:(e,t,n)=>{"use strict";n.d(t,{A:()=>h,P:()=>CloseButton});var i=n(85893),s=n(67294),r=n(94184),o=n.n(r),a=n(87982),l=n(78576),c=n(10854),d=n(60405);const{CLOSE_BUTTON_TOOLTIP_MESSAGE:u}=c.Z.REUSABLES;var h;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LIGHT=1]="LIGHT",e[e.SHADOW=2]="SHADOW",e[e.OVERLAY=3]="OVERLAY",e[e.TOOLBAR=4]="TOOLBAR"}(h||(h={}));class CloseButton extends s.Component{constructor(){super(...arguments),this.handleMouseDown=e=>{const{closeOnMouseDown:t,onClose:n}=this.props;t&&n&&n(e)}}getIconButtonStyle(){switch(this.props.buttonStyle){case h.LIGHT:case h.SHADOW:return a.Dd.CLEAR;case h.OVERLAY:return a.Dd.OVERLAY;case h.TOOLBAR:return a.Dd.TOOLBAR;default:return a.Dd.PLAIN}}render(){const{locale:e}=this.context,{buttonStyle:t,buttonState:n,onClose:s,hideTooltip:r}=this.props,c=r?void 0:e.t(u),d=r?e.t(u):void 0,p=o()("close-button",{"close-button-shadow":t===h.SHADOW,"close-button-light":t===h.LIGHT});return(0,i.jsx)(a.hU,{className:p,ariaLabel:d,iconClass:"icon-close",buttonStyle:this.getIconButtonStyle(),buttonState:n,tooltipMsg:c,tooltipPosition:l.lZ.DOWN,onClick:s,onMouseDown:this.handleMouseDown})}}CloseButton.contextType=d.I},64921:(e,t,n)=>{"use strict";n.d(t,{o:()=>i,v:()=>TextParser});var i,s=n(36589),r=n(2252);!function(e){e.TEXT="",e.LINK="link-url",e.HASH="link-hashtag",e.USER="link-user"}(i||(i={}));class TextParser{constructor(e){this.serialize=e=>{const t=[],n=[].slice.call(e.childNodes);for(const e of n)switch(e.nodeName){case"#text":t.push(this.serializeText(e));break;case"A":t.push(this.serializeAnchor(e));break;case"P":case"DIV":t.push(this.serializeElement(e,!0));break;case"SPAN":t.push(this.serializeElement(e,!1));break;case"BR":t.push(this.serializeBreak(e));break;default:t.push(this.serialize(e))}return t.join("")},this.deserialize=(e,t,n,i=this.markers)=>{const s=this.parse(e).map((e=>this.createNode(e,t,n)));return i?this.parseMarkers(s,i):s},this.serializeHTMLToMarkdown=e=>{const t=document.createElement("div");t.innerHTML=e;const n=this.serialize(t);return t.remove(),n},this.serializeText=e=>{let t=this.sanitizeText(e.textContent||"");if(this.links){const e=new RegExp(/https?:\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?/gi),n=document.createElement("a");t=t.replace(e,(e=>(n.href=e,`[${e}](${n.href})`))),n.remove()}return this.hashtags&&(t=t.replace(/(#\w*)/,(e=>`[${e}]`))),t.replace(/\<\s*br\s*\/?>/gi,"\n")},this.serializeAnchor=e=>{const t=e.dataset.blocktype,n=this.sanitizeText(e.innerText||"");let i=n;switch(t){case s.C.HASH:i=`[${n}]`;break;case s.C.USER:if(this.users){let t=e.dataset.id||"",n=e.dataset.value||"";if(!t&&!n&&(n="@"===i[0]?i.substr(1):i,n)){const e=this.users.getUserInfoByEmail(n);e&&(t=e.id)}(t||this.validateEmail(n))&&(i=`[@${t}](${n})`)}break;case s.C.LINK:const t=e.dataset.value||e.href;t&&(i=`[${n}](${t})`);break;default:e.href&&(i=`[${n}](${e.href})`)}return i},this.serializeElement=(e,t)=>{let n=t?"\n":" ";return e.childNodes.length>0&&(n+=this.serialize(e)),n},this.serializeBreak=e=>"\n",this.validateEmail=(()=>{const e=/\S+@\S+\.\S+/,t=document.createElement("input");return t.type="email",t.required=!0,n=>(t.value=n,"function"==typeof t.checkValidity?t.checkValidity():e.test(n))})();const{links:t,hashtags:n,users:i,markers:r}=e;this.links=t||!1,this.hashtags=n||!1,this.users=i,this.markers=r}parseMarkers(e,t){const[n,i]=t;let s=!1;const r=new RegExp(n+"|"+i);for(let t=0;t<e.length;t++){const n=e[t],{nodeType:i,textContent:o}=n,a=3===i;if(!o)continue;a?e.splice(t,1):n.textContent=null;const l=o.split(r);l.forEach(((i,r)=>{if(""!==i){let r;if(s){const e=document.createElement("span");e.setAttribute("data-blocktype","marker"),r=e,r.textContent=i}else r=document.createTextNode(i);a?e.splice(t++,0,r):n.appendChild(r)}r<l.length-1&&(s=!s)})),a&&t--}return e}createNode(e,t,n){switch(e.blockType){case s.C.USER:const r=document.createElement(n?"a":"span");if(r.setAttribute("data-blocktype",e.blockType),n){const t=r;t.className=`link-annotation ${i.USER}`,t.removeAttribute("href"),n&&(t.onclick=n);const s=e.id||"",o=e.value||"";s&&t.setAttribute("data-id",s),o&&t.setAttribute("data-value",o)}return r.textContent=`${e.text}`,r;case s.C.HASH:const o=document.createElement(n?"a":"span");if(o.setAttribute("data-blocktype",e.blockType),n){const e=o;e.className=`link-annotation ${i.HASH}`,e.removeAttribute("href"),n&&(e.onclick=n)}return o.textContent=`${e.text}`,o;case s.C.LINK:if(e.value){const s=document.createElement(n||t?"a":"span");if(s.setAttribute("data-blocktype",e.blockType),s.setAttribute("data-value",e.value),n||t){const r=s;t&&(r.href=`${e.value}`),r.target="_blank",r.className=`link-annotation ${i.LINK}`,n&&(r.onclick=n)}return s.textContent=`${e.text}`,s}}return document.createTextNode(""+e.text)}parse(e){const t=[];if(!e)return[];const n=e.split("[").map(((e,t)=>0===t?e:"["+e));let i=0;for(;i<n.length;){const e=this.parseIntoBlocks(n[i],t);e&&n.splice(i+1,0,e),i++}return t}getPlainText(e){return this.parse(e).map((e=>e.text)).join("")}searchMarkdown(e,t){let n=-1,i=0,s=0;const r=this.parse(e).map((e=>{let r;return this.matchTextBlock(e,t)?(s++,-1===n&&(n=i),r=e.markdown):r=e.text,i+=e.text.length,r}));return-1===n?null:{markdown:r.join(""),matchIndex:n,textLength:i,numMatches:s}}getUserMentions(e){return this.parse(e).filter((e=>e.blockType===s.C.USER&&e.value)).map((e=>e.value||""))}matchTextBlock(e,t){if(e.blockType===t.blockType)if(e.blockType===s.C.USER){if(e.id===t.id)return!0;if(e.value===t.value)return!0}else if(e.blockType===s.C.HASH)return e.text===t.text;return!1}getHTMLWithoutSelection(e,t){let n=!1,i="",s=!1,r="";return e.childNodes.forEach((e=>{const o=e instanceof HTMLElement?e.outerHTML:e.nodeValue;o&&(n&&s&&(r+=o),e===t.startContainer&&(i+=o.slice(0,t.startOffset),n=!0),e===t.endContainer&&(r+=o.slice(t.endOffset,o.length),s=!0),n||s||(i+=o))})),[i,r]}parseIntoBlocks(e,t){if(this.users){const n=this.getUserBlock(e);if(n)return t.push(n),e.slice(n.markdown.length)}if(this.links){const n=this.getLinkBlock(e);if(n&&n.value&&-1===n.value.indexOf("javascript:"))return t.push(n),e.slice(n.markdown.length)}if(this.hashtags){const n=this.getHashBlock(e);if(n)return t.push(n),e.slice(n.markdown.length)}const n=this.getTextBlock(e);return n&&t.push(n),null}getTextBlock(e){return 0===e.length?null:{blockType:s.C.TEXT,text:e,markdown:e}}getHashBlock(e){const t=e.match(TextParser.hashRegex);return!t||t.length<2?null:{blockType:s.C.HASH,markdown:t[0],text:t[1]}}getUserBlock(e){if(!this.users)return null;const t=e.match(TextParser.userRegex);if(!t||t.length<3)return null;let n=t[1].substr(1),i=t[2];const r=i?this.users.getUserInfoByEmail(i):this.users.getUserInfoById(n),o=r?r.name:"";return n=r?r.id:n,i=r?r.email:i,{blockType:s.C.USER,markdown:t[0],id:n,value:i,text:`@${o||i}`}}getLinkBlock(e){const t=e.match(TextParser.linkRegEx);if(!t)return null;const n=t[2];let i=1,r=0;for(;r<n.length&&("("===n[r]?i++:")"===n[r]&&i--,0!==i);)r++;const o=n.length-r;let a=this.conditionallyEncode(t[2].substring(0,r));return-1===a.indexOf("://")&&(a="http://"+a),{blockType:s.C.LINK,markdown:t[0].substring(0,t[0].length-o),text:t[1],value:a}}conditionallyEncode(e){return this.needsEncoding(e)?encodeURI(e):e}needsEncoding(e){if(e.match(r.jx))return!0;let t=e;try{t=decodeURI(e)}catch(e){}return!1}sanitizeText(e){return e.replace(/\]\(/g,"]&zwnj;(").replace(/[\u200B]/g,"").replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')}}TextParser.hashRegex=/\[(#(\w|-)*)\]/,TextParser.userRegex=/\[(@\w*)\]\(([^\)\(\[\]]*)\)/,TextParser.linkRegEx=/\[([^\]]*)\]\((.*)\)/},20585:(e,t,n)=>{"use strict";n.d(t,{MN:()=>i,OR:()=>s,Eb:()=>r,LH:()=>o,oO:()=>a,_U:()=>l,g:()=>c,El:()=>d,Bg:()=>u});const i=767,s=()=>window.innerWidth>i,r=576,o=375,a=55,l=70,c=500,d=750,u="features/newUi_8.2"},98878:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Animation});var i=n(65270);class Animation{constructor(e){this.isAnimating=!0,this.duration=e.duration,this.startValue=e.startValue,this.changeValue=e.endValue-this.startValue,this.easingFunction=e.easingFunction||i.to}getUpdatedValue(){this.startTime||(this.startTime=Date.now());const e=Date.now()-this.startTime;return e>this.duration&&(this.isAnimating=!1),this.easingFunction(Math.min(e,this.duration),this.startValue,this.changeValue,this.duration)}}},94805:(e,t,n)=>{"use strict";n.d(t,{u:()=>v,a:()=>b});var i=n(14832),s=n(23676),r=n(34612),o=n(38562),a=n(8765),l=n(69826),c=n(19822),d=n(77477),u=n(87100),h=n(10854),p=n(3922),m=n(84428);const{TAGS:g,NOTES:f}=h.Z.SHOWCASE,v=function(e,t,n){const i=e.tryGetProperty("tool","").toUpperCase();return t&&e.tryGetProperty("tag","")?s.w1.TAGS:n&&e.tryGetProperty("note","")?s.w1.NOTES:i||null},b=function(e,t){const{commandBinder:n,market:h,settings:v}=t,b=(t,s,r,o,a,l)=>{if(e===t){const e=v.tryGetProperty(s,"");if(e)return v.setProperty(s,""),h.waitForData(r).then((t=>{const s=o(t,e);if(s){const t=(new m.Vector3).copy(s.stemNormal).setLength(s.stemLength).add(s.anchorPosition),n=p.K.decodeVector3(v.tryGetProperty("pin-pos",p.K.encodeVector3(t))),r=n&&n.distanceTo(t)>.1||null===p.K.deserialize()?i.n.FadeToBlack:null;a(e,r)}else{const e={messagePhraseKey:l,timeout:4e3,dismissesOnAction:!0};n.issueCommand(new d.L(e))}})),!0}return!1};b(s.w1.NOTES,"note",o.X,((e,t)=>e.getNoteView(t)),((e,t)=>{n.issueCommand(new a.yW(e,!0,(0,u.FU)().comment,t))}),f.MISSING_MESSAGE)||b(s.w1.TAGS,"tag",l.n,((e,t)=>e.getTagView(t)),((e,t)=>{n.issueCommand(new c.lt(e,t,!0))}),g.MISSING_MESSAGE)||e&&(v.setProperty("tool",""),n.issueCommandWhenBound(new r.tT(e,!0)))}},95847:(e,t,n)=>{"use strict";n.d(t,{z:()=>HoverEvent,A:()=>UnhoverEvent});var i=n(59017);class HoverEvent extends i.G{constructor(){super(...arguments),this.type="hover"}}class UnhoverEvent extends i.G{constructor(){super(...arguments),this.type="unhover"}}},59017:(e,t,n)=>{"use strict";n.d(t,{G:()=>InputEvent});class InputEvent{constructor(){this.eventType="input"}}},3035:(e,t,n)=>{"use strict";n.d(t,{T:()=>ClickCancelEvent,R:()=>ClickEvent});var i=n(7928);class ClickCancelEvent extends i.C{constructor(e,t){super(),this.position=e,this.buttons=t}}class ClickEvent extends i.C{constructor(e,t){super(),this.position=e,this.button=t}}},76922:(e,t,n)=>{"use strict";n.d(t,{E0:()=>DragBeginEvent,_t:()=>DragEvent,_R:()=>DragEndEvent,u4:()=>DragGestureStartEvent,Zv:()=>DragGestureEndEvent});var i=n(7928);class DragBeginEvent extends i.C{constructor(e,t){super(),this.position=e,this.buttons=t}}class DragEvent extends i.C{constructor(e,t,n,i){super(),this.position=e,this.clientPosition=i,this.delta=t,this.buttons=n}}class DragEndEvent extends i.C{constructor(e,t,n,i,s){super(),this.position=e,this.delta=t,this.buttons=n,this.timeSinceLastMove=i,this.fullDelta=s}}class DragGestureStartEvent extends i.C{constructor(e,t){super(),this.position=e,this.pointer=t}}class DragGestureEndEvent extends i.C{constructor(e,t){super(),this.position=e,this.fullDelta=t}}},7928:(e,t,n)=>{"use strict";n.d(t,{C:()=>GestureEvent});var i=n(59017);class GestureEvent extends i.G{}},94267:(e,t,n)=>{"use strict";n.d(t,{DG:()=>LongPressMoveEvent,PC:()=>LongPressProgressEvent,Vh:()=>LongPressStartEvent,$b:()=>LongPressSuccessEvent,pt:()=>LongPressEndEvent});var i=n(7928);class LongPressMoveEvent extends i.C{constructor(e,t,n,i){super(),this.position=e,this.clientPosition=t,this.delta=n,this.buttons=i}}class LongPressProgressEvent extends i.C{constructor(e,t,n,i,s){super(),this.position=e,this.clientPosition=t,this.delta=n,this.buttons=i,this.progress=s}}class LongPressStartEvent extends i.C{constructor(e,t,n){super(),this.position=e,this.clientPosition=t,this.buttons=n}}class LongPressSuccessEvent extends i.C{constructor(e,t){super(),this.position=e,this.clientPosition=t}}class LongPressEndEvent extends i.C{constructor(e,t,n){super(),this.position=e,this.clientPosition=t,this.cancelled=n}}},46158:(e,t,n)=>{"use strict";n.d(t,{d:()=>MultiSwipeEvent,h:()=>MultiSwipeEndEvent});var i=n(7928);class MultiSwipeEvent extends i.C{constructor(e,t,n){super(),this.pointerCount=e,this.position=Object.assign({},t),this.delta=Object.assign({},n)}}class MultiSwipeEndEvent extends i.C{constructor(e,t,n,i){super(),this.pointerCount=e,this.position=Object.assign({},t),this.delta=Object.assign({},n),this.timeSinceLastMove=i}}},69054:(e,t,n)=>{"use strict";n.d(t,{G:()=>PinchEvent,i:()=>PinchEndEvent});var i=n(7928);class PinchEvent extends i.C{constructor(e){super(),this.pinchDelta=e}}class PinchEndEvent extends i.C{constructor(e,t){super(),this.pinchDelta=e,this.timeSinceLastMove=t}}},36540:(e,t,n)=>{"use strict";n.d(t,{h:()=>RawPointersEvent});var i=n(7928);class RawPointersEvent extends i.C{constructor(e){super(),this.pointers=e}}},93145:(e,t,n)=>{"use strict";n.d(t,{D:()=>RotateEvent,u:()=>RotateEndEvent});var i=n(7928);class RotateEvent extends i.C{constructor(e){super(),this.rotateDelta=e}}class RotateEndEvent extends i.C{constructor(e,t){super(),this.rotateDelta=e,this.timeSinceLastMove=t}}},17921:(e,t,n)=>{"use strict";n.d(t,{a:()=>ScrollEvent});var i=n(7928);class ScrollEvent extends i.C{constructor(e,t){super(),this.position=e,this.delta=t}}},51573:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>InputIni});var i=n(57227),s=n(15697),r=n(5314),o=n(8054),a=n(70399),l=n(37917),c=n(81402),d=n(2252);class InputPointer{constructor(e,t,n,i){if(this.config=e,this.canvasData=n,this.handledTouchesAsPointer=0,this.lastTouchEnd=0,this.activeButtons=o.r3.NONE,this.preventDoubleTap=e=>{e.cancelable&&e.timeStamp-this.lastTouchEnd<=InputPointer.doubleTapThreshold&&e.preventDefault(),this.lastTouchEnd=e.timeStamp},this.preventMultiTouchGesture=e=>{const t=e.touches&&e.touches.length>1,n="scale"in e&&1!==e.scale;(t||n)&&e.cancelable&&e.preventDefault()},this.onEventCallback=i,window.PointerEvent||(t.addEventListener("mousedown",(e=>this.onMouseDown(e))),t.addEventListener("mouseup",(e=>this.onMouseUp(e))),t.addEventListener("mousemove",(e=>this.onMouseMove(e))),t.addEventListener("mouseenter",(e=>this.onMouseEnter(e)))),t.addEventListener("contextmenu",(e=>e.preventDefault())),t.addEventListener("touchstart",(e=>this.onTouchStart(e))),t.addEventListener("touchend",(e=>this.onTouchEnd(e))),t.addEventListener("touchmove",(e=>this.onTouchMove(e))),t.addEventListener("touchcancel",(e=>this.onTouchEnd(e))),t.addEventListener("pointerdown",(e=>this.onPointerDown(e))),t.addEventListener("pointerup",(e=>this.onPointerUp(e))),t.addEventListener("pointermove",(e=>this.onPointerMove(e))),t.addEventListener("pointercancel",(e=>this.onPointerUp(e))),t.addEventListener("pointerenter",(e=>this.onMouseEnter(e))),(0,d.Tt)()||(0,d._1)()){const e=!!l.h&&{passive:!1};document.addEventListener("touchmove",this.preventMultiTouchGesture,e),document.addEventListener("touchend",this.preventDoubleTap,e)}}onMouseDown(e){e.currentTarget.focus(),this.tryPreventDefault(e),this.activeButtons|=1<<e.button;const{ndc:t,client:n}=this.getPointerPosition(e);this.onEventCallback(new a.er(this.getPointerId(e),t,n,e.button,!0,a._A.MOUSE))}onMouseUp(e){this.tryPreventDefault(e),this.activeButtons&=~(1<<e.button);const{ndc:t,client:n}=this.getPointerPosition(e);this.onEventCallback(new a.er(this.getPointerId(e),t,n,e.button,!1,a._A.MOUSE))}onMouseMove(e){this.tryPreventDefault(e);const{ndc:t,client:n}=this.getPointerPosition(e);this.onEventCallback(new a.mE(this.getPointerId(e),t,n,this.activeButtons,a._A.MOUSE))}onMouseEnter(e){const t=(0,c.lY)(e.buttons,o.MP.MIDDLE,o.MP.SECONDARY),n=(this.activeButtons^t)&~t;for(let t=o.MP.PRIMARY;t<o.MP.COUNT;++t){const i=(0,o.AF)(t);if(i&&(n&i)>0){const{ndc:n,client:i}=this.getPointerPosition(e);this.onEventCallback(new a.er(this.getPointerId(e),n,i,t,!1,a._A.MOUSE))}}this.activeButtons=t}onTouchStart(e){if(e.currentTarget.focus(),e.cancelable&&e.preventDefault(),this.handledTouchesAsPointer)--this.handledTouchesAsPointer;else for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches.item(t),{ndc:i,client:s}=this.getTouchPosition(n);this.onEventCallback(new a.er(n.identifier,i,s,o.MP.PRIMARY,!0,a._A.TOUCH))}}onTouchEnd(e){if(e.cancelable&&e.preventDefault(),this.handledTouchesAsPointer)--this.handledTouchesAsPointer;else for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches.item(t),{ndc:i,client:s}=this.getTouchPosition(n);this.onEventCallback(new a.er(n.identifier,i,s,o.MP.PRIMARY,!1,a._A.TOUCH))}}onTouchMove(e){if(e.cancelable&&e.preventDefault(),this.handledTouchesAsPointer)--this.handledTouchesAsPointer;else for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches.item(t),{ndc:i,client:s}=this.getTouchPosition(n),r=new a.mE(n.identifier,i,s,o.r3.PRIMARY,a._A.TOUCH);this.onEventCallback(r)}}onPointerDown(e){switch(this.tryPreventDefault(e),e.pointerType){case a._A.MOUSE:this.onMouseDown(e);break;case a._A.GAMEPAD:case a._A.TOUCH:++this.handledTouchesAsPointer;const{ndc:t,client:n}=this.getPointerPosition(e);this.onEventCallback(new a.er(e.pointerId,t,n,o.MP.PRIMARY,!0,e.pointerType))}}onPointerUp(e){switch(this.tryPreventDefault(e),e.pointerType){case a._A.MOUSE:this.onMouseUp(e);break;case a._A.GAMEPAD:case a._A.TOUCH:++this.handledTouchesAsPointer;const{ndc:t,client:n}=this.getPointerPosition(e);this.onEventCallback(new a.er(e.pointerId,t,n,o.MP.PRIMARY,!1,e.pointerType))}}onPointerMove(e){switch(this.tryPreventDefault(e),e.pointerType){case a._A.MOUSE:-1!==e.button?this.activeButtons<e.buttons?this.onMouseDown(e):this.activeButtons>e.buttons&&this.onMouseUp(e):this.onMouseMove(e);break;case a._A.GAMEPAD:case a._A.TOUCH:++this.handledTouchesAsPointer;const{ndc:t,client:n}=this.getPointerPosition(e);this.onEventCallback(new a.mE(e.pointerId,t,n,o.r3.PRIMARY,e.pointerType))}}getPointerId(e){return(0,r.bX)(e)?e.pointerId:0}getPointerPosition(e){return{ndc:this.normalizePosition(e.clientX,e.clientY),client:{x:e.clientX-this.canvasData.x,y:e.clientY-this.canvasData.y}}}getTouchPosition(e){return{ndc:this.normalizePosition(e.clientX,e.clientY),client:{x:e.clientX-this.canvasData.x,y:e.clientY-this.canvasData.y}}}normalizePosition(e,t){return{x:2*(e-this.canvasData.x)/this.canvasData.width-1,y:-2*(t-this.canvasData.y)/this.canvasData.height+1}}tryPreventDefault(e){this.config.pointerPreventDefault&&e.cancelable&&e.preventDefault()}}InputPointer.doubleTapThreshold=300;var u,h=n(43985),p=n(19926),m=n(94113);!function(e){e[e.SEMICOLON=59]="SEMICOLON",e[e.PLUSEQUALS=61]="PLUSEQUALS",e[e.DASHUNDERSCORE=173]="DASHUNDERSCORE"}(u||(u={}));class InputKey{constructor(e){this.keysDown={},this.onEventCallback=e,this.bindHandlers()}bindHandlers(){if(window&&window.document){const e=window.document;window.addEventListener("blur",(()=>{Object.keys(this.keysDown).forEach((e=>this.keysDown[e]=!1))})),e.addEventListener("keydown",(e=>{if(!e.ctrlKey&&!e.metaKey){e.preventDefault();const t=this.translateFirefoxKeys(e.which||e.keyCode);this.keysDown[t]=!0,this.onEventCallback(new m.e(t,p.M.DOWN,e))}})),e.addEventListener("keyup",(e=>{if(!e.ctrlKey&&!e.metaKey){e.preventDefault();const t=this.translateFirefoxKeys(e.which||e.keyCode);this.keysDown[t]&&this.onEventCallback(new m.e(t,p.M.PRESSED,e)),this.keysDown[t]=!1,this.onEventCallback(new m.e(t,p.M.UP,e))}}))}}translateFirefoxKeys(e){switch(e){case u.SEMICOLON:return h.R.SEMICOLON;case u.PLUSEQUALS:return h.R.PLUSEQUALS;case u.DASHUNDERSCORE:return h.R.DASHUNDERSCORE}return e}}var g,f=n(84428);!function(e){e[e.WAITING=0]="WAITING",e[e.WAITINGTOEXCEEDTHRESHOLD=1]="WAITINGTOEXCEEDTHRESHOLD",e[e.GESTURING=2]="GESTURING"}(g||(g={}));var v=n(3035);class ClickGesturer{constructor(e=.04,t=300){this.startPosition=new f.Vector2,this.pointerDelta=new f.Vector2,this.activeButtons=o.r3.NONE,this.state=g.WAITING,this.dragLimit=e,this.holdLimit=t}start(e){if(this.state===g.WAITING&&this.startPosition.copy(e.position),0==(e.buttons&e.buttons-1))this.startTime=Date.now(),this.activeButtons=e.buttons,this.state=g.WAITINGTOEXCEEDTHRESHOLD;else if(this.activeButtons)return this.state=g.GESTURING,new v.T(e.position,this.activeButtons)}stop(){let e;return this.state===g.WAITINGTOEXCEEDTHRESHOLD&&Date.now()-this.startTime<this.holdLimit&&(e=new v.R(this.startPosition.add(this.pointerDelta),(0,o.L2)(this.activeButtons)),this.pointerDelta.set(0,0)),this.state=g.WAITING,e}onMove(e){if(this.state===g.WAITINGTOEXCEEDTHRESHOLD&&(this.pointerDelta.copy(e.position).sub(this.startPosition),this.pointerDelta.length()>this.dragLimit))return this.state=g.GESTURING,new v.T(e.position,e.buttons)}compareState(e){return e===this.state}}var b=n(76922);class DragGesturer{constructor(e,t=.04){this.onEventCallback=e,this.startPosition=new f.Vector2,this.previousPosition=new f.Vector2,this.pointerDelta=new f.Vector2,this.lastPointerMove=Date.now(),this.state=g.WAITING,this.threshold=t}start(e){return this.state===g.WAITING&&(this.startPosition.copy(e.position),this.previousPosition.copy(this.startPosition),this.state=g.WAITINGTOEXCEEDTHRESHOLD),new b.E0(e.position,e.buttons)}stop(){const e=(new f.Vector2).copy(this.previousPosition).sub(this.startPosition);this.state===g.GESTURING&&this.onEventCallback(new b.Zv(this.startPosition,e)),this.state===g.WAITING&&this.pointerDelta.set(0,0),this.state=g.WAITING;const t=Date.now()-this.lastPointerMove;return new b._R(this.previousPosition,this.pointerDelta,o.r3.NONE,t,e)}onMove(e){let t;return this.state===g.WAITINGTOEXCEEDTHRESHOLD&&(this.pointerDelta.copy(e.position).sub(this.startPosition),this.pointerDelta.length()>this.threshold&&(this.state=g.GESTURING,this.onEventCallback(new b.u4(this.startPosition,e)))),this.state===g.GESTURING&&(this.pointerDelta.copy(e.position).sub(this.previousPosition),this.pointerDelta.length()>0&&(t=new b._t(this.previousPosition,this.pointerDelta,e.buttons,e.clientPosition))),this.previousPosition.copy(e.position),this.lastPointerMove=Date.now(),t}compareState(e){return e===this.state}compareStartPoint(e){return e.equals(this.startPosition)}compareDelta(e){return e.equals(this.pointerDelta)}}var y=n(69054);class PointerMovement{constructor(e=new f.Vector2,t=new f.Vector2,n=0){this.lastPosition=e,this.velocity=t,this.samePositionTicks=n}start(e){this.lastPosition.copy(e),this.velocity.set(0,0),this.samePositionTicks=0}update(e){if(this.lastPosition.distanceTo(e)<=.01){if(this.samePositionTicks++,this.samePositionTicks<2)return}else this.samePositionTicks=0;this.velocity.copy(this.lastPosition).sub(e),this.lastPosition.copy(e)}stationary(){return this.samePositionTicks>=2||this.velocity.length()<.01}}const S=2*Math.SQRT2;class PinchGesturer{constructor(e=.04){this.threshold=e,this.startDistance=0,this.previousDistance=0,this.pointerDelta=new f.Vector2,this.lastPointerMove=Date.now(),this.pinchDelta=0,this.state=g.WAITING,this.pointerMovement1=new PointerMovement,this.pointerMovement2=new PointerMovement}start(e,t){this.state===g.WAITING&&(this.restart(e,t),this.pointerMovement1.start(e.position),this.pointerMovement2.start(t.position))}stop(){this.state=g.WAITING;const e=Date.now()-this.lastPointerMove;return new y.i(this.pinchDelta,e)}onMove(e,t){this.pointerMovement1.update(e.position),this.pointerMovement2.update(t.position);if(!(this.pointerMovement1.stationary()||this.pointerMovement2.stationary()||this.pointerMovement1.velocity.dot(this.pointerMovement2.velocity)<0))return void this.restart(e,t);this.pointerDelta.copy(e.position).sub(t.position);const n=this.pointerDelta.length()/S;if(this.state===g.WAITINGTOEXCEEDTHRESHOLD){const e=n-this.startDistance;Math.abs(e)>this.threshold&&(this.state=g.GESTURING)}let i;if(this.state===g.GESTURING){const e=n-this.previousDistance;Math.abs(e)>0&&(this.pinchDelta=e,i=new y.G(e))}return this.previousDistance=n,this.lastPointerMove=Date.now(),i}restart(e,t){this.state=g.WAITINGTOEXCEEDTHRESHOLD,this.startDistance=e.position.distanceTo(t.position)/S,this.previousDistance=this.startDistance}}var E=n(74170),T=n(93145);class RotateGesturer{constructor(e=.1){this.startPointerDelta=new f.Vector2,this.previousPointerDelta=new f.Vector2,this.pointerDelta=new f.Vector2,this.lastPointerMove=Date.now(),this.angleWithDirection=0,this.state=g.WAITING,this.threshold=e}start(e,t){this.state===g.WAITING&&(this.state=g.WAITINGTOEXCEEDTHRESHOLD,this.startPointerDelta.copy(e.position).sub(t.position).normalize(),this.pointerDelta.copy(this.startPointerDelta),this.previousPointerDelta.copy(this.pointerDelta))}stop(){this.state=g.WAITING;const e=Date.now()-this.lastPointerMove;return new T.u(this.angleWithDirection,e)}onMove(e,t){if(this.pointerDelta.copy(e.position).sub(t.position).normalize(),this.state===g.WAITINGTOEXCEEDTHRESHOLD){Math.acos((0,E.uZ)(this.pointerDelta.dot(this.startPointerDelta),-1,1))>this.threshold&&(this.state=g.GESTURING)}let n;if(this.state===g.GESTURING){const e=Math.acos((0,E.uZ)(this.pointerDelta.dot(this.previousPointerDelta),-1,1));if(e>0){const t=this.previousPointerDelta.x*this.pointerDelta.y-this.previousPointerDelta.y*this.pointerDelta.x;this.angleWithDirection=t>=0?e:-e,n=new T.D(this.angleWithDirection)}}return this.previousPointerDelta.copy(this.pointerDelta),this.lastPointerMove=Date.now(),n}compareState(e){return e===this.state}}var O=n(28861),_=n(46158);class MultiSwipeGesturer{constructor(e=.04){this.startEpicenter=new f.Vector2,this.previousEpicenter=new f.Vector2,this.deltaEpicenter=new f.Vector2,this.currentEpicenter=new f.Vector2,this.pointerCount=0,this.lastPointerMove=Date.now(),this.state=g.WAITING,this.pointerMovements=[],this.threshold=e}start(e){this.state===g.WAITING&&(this.restart(e),this.pointerMovements=e.map((e=>new PointerMovement)),e.forEach(((e,t)=>{this.pointerMovements[t].start(e.position)})))}stop(){this.state=g.WAITING;const e=this.pointerCount;this.pointerCount=0;const t=Date.now()-this.lastPointerMove;return new _.h(e,this.currentEpicenter,this.deltaEpicenter,t)}onMove(e){(0,O.V)(this.getPointerPositions(e),this.currentEpicenter),e.forEach(((e,t)=>{this.pointerMovements[t].update(e.position)}));if(this.pointerMovements.find((e=>e.stationary())))return void this.restart(e);const t=this.pointerMovements[0].velocity;if(this.pointerMovements.find((e=>t.dot(e.velocity)<0)))return void this.restart(e);if(this.state===g.WAITINGTOEXCEEDTHRESHOLD){this.currentEpicenter.distanceTo(this.startEpicenter)>this.threshold&&(this.state=g.GESTURING)}let n;return this.state===g.GESTURING&&(this.deltaEpicenter.copy(this.currentEpicenter).sub(this.previousEpicenter),n=new _.d(e.length,this.currentEpicenter,this.deltaEpicenter)),this.previousEpicenter.copy(this.currentEpicenter),this.lastPointerMove=Date.now(),n}getPointerPositions(e){return e.map((e=>e.position))}restart(e){(0,O.V)(this.getPointerPositions(e),this.startEpicenter),this.previousEpicenter.copy(this.startEpicenter),this.currentEpicenter.copy(this.previousEpicenter),this.state=g.WAITINGTOEXCEEDTHRESHOLD,this.pointerCount=e.length}}var A=n(17921),w=n(94267);const N=new(n(5477).Z)("longpress");var P;!function(e){e[e.IDLE=0]="IDLE",e[e.WAITING=1]="WAITING",e[e.STARTED=2]="STARTED",e[e.SUCCESSFUL=3]="SUCCESSFUL"}(P||(P={}));class LongPressGesturer{constructor(e,t=500){this.onEventCallback=e,this.state=P.IDLE,this.ndcStartPosition=new f.Vector2,this.pointerDelta=new f.Vector2,this.ndcPosition=new f.Vector2,this.clientPosition=new f.Vector2,this.pressConfirmThreshold=this.pressStartThreshold=Math.max(t,1e-4)}start(e){this.state!==P.IDLE&&this.stop(),this.state===P.IDLE&&0==(e.buttons&e.buttons-1)&&(this.ndcStartPosition.copy(e.position),this.state=P.WAITING,this.buttons=e.buttons,this.pointerDelta.set(0,0),this.ndcPosition.copy(e.position),this.clientPosition.copy(e.clientPosition),this.holdTimeout=window.setTimeout((()=>{this.state=P.STARTED,N.debug("STARTED"),this.startTime=Date.now(),this.progress(0),this.onEventCallback(new w.Vh(e.position,e.clientPosition,e.buttons)),this.successTimeout=window.setTimeout((()=>{N.debug("SUCCESSFUL"),this.state=P.SUCCESSFUL,this.progress(1),this.onEventCallback(new w.$b(this.ndcPosition,this.clientPosition))}),this.pressConfirmThreshold)}),this.pressStartThreshold))}stop(){const e=this.state;if(this.state=P.IDLE,window.clearTimeout(this.holdTimeout),window.clearTimeout(this.successTimeout),e>P.WAITING){N.debug("DONE, cancelled:",e<P.SUCCESSFUL);const t=e<P.SUCCESSFUL;this.onEventCallback(new w.pt(this.ndcPosition,this.clientPosition,t))}}onMove(e){const t=this.state===P.STARTED||this.state===P.WAITING,n=this.state===P.STARTED||this.state===P.SUCCESSFUL;(t||n)&&(this.ndcPosition.copy(e.position),this.clientPosition.copy(e.clientPosition),this.pointerDelta.copy(this.ndcPosition).sub(this.ndcStartPosition)),t&&this.pointerDelta.length()>.1?this.stop():n&&this.onEventCallback(new w.DG(this.ndcPosition,this.clientPosition,this.pointerDelta,this.buttons))}tick(){if(this.state===P.STARTED){const e=1-(this.pressStartThreshold-(Date.now()-this.startTime))/this.pressStartThreshold;this.progress(Math.min(1,e))}}progress(e){this.onEventCallback(new w.PC(this.ndcPosition,this.clientPosition,this.pointerDelta,this.buttons,e))}}var I=n(36540),k=n(14877);class InputDebugMenu{constructor(){this.displayTouches=!1,this.touches=new Map}async init(e){const[t]=await Promise.all([e.getModuleBySymbol(k.y.SETTINGS)]);t.registerMenuButton({header:"Input",buttonName:"Toggle pointer visualization",callback:()=>{this.displayTouches=!this.displayTouches}})}addPointer(e,t){this.displayTouches&&(this.touches.set(e,this.createPointer(t)),this.movePointer(e,t))}removePointer(e){const t=this.touches.get(e);t&&(document.body.removeChild(t),this.touches.delete(e))}movePointer(e,t){const n=this.touches.get(e);n&&(n.style.left=t.x-25+"px",n.style.top=t.y-25+"px")}createPointer(e){const t=document.createElement("div");return t.style.position="fixed",t.style.backgroundColor="#aa11aa",t.style.width="50px",t.style.height="50px",t.style.zIndex="99999",t.style.pointerEvents="none",t.style.touchAction="none",t.style.borderRadius="50px",document.body.appendChild(t),t}}var C;!function(e){e[e.NONE=0]="NONE",e[e.CLICK_DRAG_LONGPRESS=1]="CLICK_DRAG_LONGPRESS",e[e.PINCH_ROTATE=2]="PINCH_ROTATE",e[e.MULTI_SWIPE_ONLY=3]="MULTI_SWIPE_ONLY"}(C||(C={}));class InputGesture{constructor(){this.activeGesture=C.NONE,this.pointers=[],this.couldBeClick=!1}async init(e,t,n){this.onEventCallback=t,this.clicker=new ClickGesturer(e.dragThreshold),this.longPress=new LongPressGesturer(t,e.holdThreshold),this.dragger=new DragGesturer(t,e.dragThreshold),this.pincher=new PinchGesturer(e.pinchThreshold),this.rotater=new RotateGesturer(e.rotateThreshold),this.multiswiper=new MultiSwipeGesturer(e.dragThreshold);const i=await n.getModuleBySymbol(k.y.CANVAS);e.disableWheel||this.bindWheelHandlers(i.element),this.inputDebug=new InputDebugMenu,this.inputDebug.init(n)}get activePointers(){return this.pointers.length}onPointerChange(e){this.isMoveEvent(e)?this.onPointerMove(e):this.onPointerButton(e)}isMoveEvent(e){return!e.hasOwnProperty("down")}onPointerMove(e){this.movePointer(e.id,e.position,e.clientPosition,e.buttons),this.inputDebug.movePointer(e.id,e.clientPosition)}onPointerButton(e){e.down?(this.addPointer(e.id,e.position,e.clientPosition,e.button),this.inputDebug.addPointer(e.id,e.clientPosition)):(this.removePointer(e.id,e.button),this.inputDebug.removePointer(e.id))}bindWheelHandlers(e){e.addEventListener("wheel",(e=>{e.preventDefault(),this.onEventCallback(new A.a({x:e.clientX,y:e.clientY},{x:this.normalizeWheelDelta(e.deltaMode,e.deltaX),y:this.normalizeWheelDelta(e.deltaMode,e.deltaY)}))}))}normalizeWheelDelta(e,t){if(e===WheelEvent.DOM_DELTA_LINE){return.7*t*t*t+13*t}return t}addPointer(e,t,n,i){const s=(0,o.AF)(i);if(!s)return;const r=this.getPointer(e);r&&0==(r.buttons&s)?(r.buttons|=s,r.activeButtons++):this.pointers.push({id:e,position:new f.Vector2(t.x,t.y),clientPosition:new f.Vector2(n.x,n.y),buttons:s,activeButtons:1}),this.toggleGestures()}removePointer(e,t){const n=(0,o.AF)(t);if(!n)return;const i=this.getPointerIndex(e);if(-1!==i){const e=this.pointers[i];0!=(e.buttons&n)&&(e.buttons&=~n,e.activeButtons--),e.activeButtons||this.pointers.splice(i,1),this.toggleGestures()}}movePointer(e,t,n,i){const s=this.getPointer(e);if(s)switch(s.position.copy(t),s.clientPosition.copy(n),s.buttons!==i?this.updateOffscreenPointer(s,i):this.onEventCallback(new I.h(this.pointers)),this.activeGesture){case C.CLICK_DRAG_LONGPRESS:const e=this.clicker.onMove(s);e&&this.onEventCallback(e);const t=this.dragger.onMove(s);t&&this.onEventCallback(t),this.longPress.onMove(s);break;case C.PINCH_ROTATE:const n=this.pincher.onMove(this.pointers[0],this.pointers[1]),i=this.rotater.onMove(this.pointers[0],this.pointers[1]);n&&this.onEventCallback(n),i&&this.onEventCallback(i);case C.MULTI_SWIPE_ONLY:const r=this.multiswiper.onMove(this.pointers);r&&this.onEventCallback(r)}}getPointer(e){const t=this.getPointerIndex(e);if(-1!==t)return this.pointers[t]}toggleGestures(){this.onEventCallback(new I.h(this.pointers));const e=this.activeGesture;if(this.activeGesture=this.pointers.length,e===C.CLICK_DRAG_LONGPRESS&&this.activeGesture===C.NONE&&this.couldBeClick){const e=this.clicker.stop();e&&this.onEventCallback(e)}if(this.couldBeClick=e===C.NONE&&this.activeGesture===C.CLICK_DRAG_LONGPRESS,this.activeGesture===C.CLICK_DRAG_LONGPRESS){const e=this.clicker.start(this.pointers[0]);e&&this.onEventCallback(e);const t=this.dragger.start(this.pointers[0]);t&&this.onEventCallback(t),this.longPress.start(this.pointers[0])}else if(e===C.CLICK_DRAG_LONGPRESS){const e=this.dragger.stop();this.longPress.stop(),this.onEventCallback(e)}this.activeGesture===C.PINCH_ROTATE?(this.pincher.start(this.pointers[0],this.pointers[1]),this.rotater.start(this.pointers[0],this.pointers[1]),this.multiswiper.start(this.pointers)):e===C.PINCH_ROTATE&&(this.onEventCallback(this.pincher.stop()),this.onEventCallback(this.rotater.stop()),this.onEventCallback(this.multiswiper.stop())),this.activeGesture===C.MULTI_SWIPE_ONLY?this.multiswiper.start(this.pointers):e===C.MULTI_SWIPE_ONLY&&this.onEventCallback(this.multiswiper.stop())}getPointerIndex(e){for(let t=0;t<this.pointers.length;t++){if(this.pointers[t].id===e)return t}return-1}updateOffscreenPointer(e,t){if(e.buttons=t,0===t){const t=this.getPointerIndex(e.id);this.pointers.splice(t,1),this.toggleGestures()}}tick(){this.longPress.tick()}}var L=n(89741),M=n(95847),D=n(82722);class InputSubscription{constructor(e,t,n){this._renew=e,this._cancel=t,this.active=n}renew(){this.active()||this._renew()}cancel(){this.active()&&this._cancel()}}class InputIni extends i.Y{constructor(){super(...arguments),this.name="input-ini",this.fallbackHandlerMap={},this.meshHandlerMap={},this.priorityHandlerMap={},this.unfilteredHandlerMap={},this.captureHandlerMap={},this.gesturing=!1,this.gestureCapture=new L.Z((e=>e.object.id)),this.activeIntersections=new L.Z((e=>e.object.id)),this.eventTypeLookup=new s.cj,this.meshTypeLookup=new s.cj,this.hoveredMesh={object:null,instanceId:void 0,index:void 0},this.registerUnfilteredHandler=(e,t)=>{this.insertHandler(e,this.unfilteredHandlerMap,t);const n=this.eventTypeLookup.getKeyByType(e);return new InputSubscription((()=>this.registerUnfilteredHandler(e,t)),(()=>this.unregisterUnfilteredHandler(e,t)),(()=>-1!==this.unfilteredHandlerMap[n].indexOf(t)))},this.registerMesh=(e,t,n)=>{this.raycaster.targets.addTarget(e,t,n)},this.unregisterMesh=e=>{this.raycaster.targets.removeTarget(e)},this.onPointerEvent=e=>{const t=!e.hasOwnProperty("down"),n=!t&&e.down,i=!n&&!t;if(t||n){this.raycaster.pointer.updatePointer(e.position),this.activeIntersections.clear();for(const e of this.raycaster.pointer.cast())this.activeIntersections.add(e);if(!this.gesturing){this.gestureCapture.clear();for(const e of this.activeIntersections)this.gestureCapture.add(e);this.updateHoveredMesh()}n&&(this.gesturing=!0),this.onEvent(e)}this.inputGesture.onPointerChange(e),i&&this.onEvent(e),0===this.inputGesture.activePointers&&(this.activeIntersections.clear(),this.gestureCapture.clear(),this.gesturing&&this.updateHoveredMesh(),this.gesturing=!1)},this.onEvent=e=>{const t=this.eventTypeLookup.getKeyByInstance(e),n=this.captureHandlerMap[t];if(n&&n.length>0){for(const t of n)t(e);return void(n.length=0)}const i=this.unfilteredHandlerMap[t];if(i)for(const t of i)t(e);const s=this.iterateMeshCallbacks(e,this.gesturing?this.gestureCapture:this.activeIntersections),r=this.fallbackHandlerMap[t];if(!s&&r)for(const t of r)t(e)}}async init(e,t){const n={disableWheel:!!e.disableWheel},i=await t.getModuleBySymbol(k.y.CANVAS),s=await t.market.waitForData(D.W);this.raycaster=await t.getModuleBySymbol(k.y.RAYCASTER),new InputPointer({pointerPreventDefault:e.pointerPreventDefault},i.element,s,this.onPointerEvent),new InputKey(this.onEvent),this.inputGesture=new InputGesture,this.inputGesture.init(n,this.onEvent,t)}registerHandler(e,t){this.insertHandler(e,this.fallbackHandlerMap,t);const n=this.eventTypeLookup.getKeyByType(e,!0);return new InputSubscription((()=>this.registerHandler(e,t)),(()=>this.unregisterHandler(e,t)),(()=>-1!==this.fallbackHandlerMap[n].indexOf(t)))}unregisterHandler(e,t){this.removeHandler(e,this.fallbackHandlerMap,t)}registerMeshHandler(e,t,n){return this._registerMeshHandler(e,{comparator:t,callback:n})}_registerMeshHandler(e,t){const n=this.eventTypeLookup.getKeyByType(e,!0);this.meshHandlerMap[n]||(this.meshHandlerMap[n]=[]);const i=this.meshHandlerMap[n];return i.push(t),new InputSubscription((()=>this._registerMeshHandler(e,t)),(()=>this.unregisterMeshHandler(e,t)),(()=>-1!==i.indexOf(t)))}unregisterMeshHandler(e,t){const n=this.eventTypeLookup.getKeyByType(e,!0);if(this.meshHandlerMap[n]){const e=this.meshHandlerMap[n],i=e.indexOf(t);i>-1&&e.splice(i,1)}}registerPriorityHandler(e,t,n){const i=this.eventTypeLookup.getKeyByType(e,!0),r=this.meshTypeLookup.getKeyByType(t,!0);this.priorityHandlerMap[i]||(this.priorityHandlerMap[i]={});const o=this.priorityHandlerMap[i];if(o[r]){const n=(0,s.z$)(e),i=(0,s.z$)(t);throw Error(`${n} already has a priority handler registered for mesh type: ${i}`)}return o[r]=n,new InputSubscription((()=>this.registerPriorityHandler(e,t,n)),(()=>this.unregisterPriorityHandler(e,t,n)),(()=>void 0!==o[r]))}unregisterPriorityHandler(e,t,n){const i=this.eventTypeLookup.getKeyByType(e),s=this.priorityHandlerMap[i];if(s){const e=this.meshTypeLookup.getKeyByType(t),i=s[e];i&&n===i&&delete s[e]}}unregisterUnfilteredHandler(e,t){this.removeHandler(e,this.unfilteredHandlerMap,t)}captureNext(e,t){return this.insertHandler(e,this.captureHandlerMap,t),t}removeCaptureHandler(e,t){this.removeHandler(e,this.captureHandlerMap,t)}registerSnappingMeshGeometry(e,t,n,i){this.raycaster.snapping.addMeshGeometry(e,t,n,i)}unregisterSnappingMeshGeometry(e){this.raycaster.snapping.removeMeshGeometry(e)}updateHoveredMesh(){const e=this.activeIntersections.getByIndex(0),t=e&&e.object===this.hoveredMesh.object&&e.instanceId===this.hoveredMesh.instanceId&&e.index===this.hoveredMesh.index;let n=!1;if(this.hoveredMesh.object&&(void 0===e||!t)){const t=this.getMeshHandler(M.A,(0,s.oL)(this.hoveredMesh.object),this.priorityHandlerMap);if(t&&(n=t(new M.A,this.hoveredMesh.object,e)||!1),!n){const t=this.meshHandlerMap[this.eventTypeLookup.getKeyByType(M.A)];if(t)for(const n of t)n.comparator.compare(this.hoveredMesh.object)&&n.callback(new M.A,this.hoveredMesh.object,e)}}let i=!1;if(e&&!t){const t=this.getMeshHandler(M.z,(0,s.oL)(e.object),this.priorityHandlerMap);if(t&&(i=t(new M.z,e.object,e)||!1),!i){const t=this.meshHandlerMap[this.eventTypeLookup.getKeyByType(M.z)];if(t)for(const n of t)n.comparator.compare(e.object)&&n.callback(new M.z,e.object,e)}}this.hoveredMesh.object=e&&e.object||null,this.hoveredMesh.instanceId=null==e?void 0:e.instanceId,this.hoveredMesh.index=null==e?void 0:e.index}iterateMeshCallbacks(e,t){let n=!1;const i=this.eventTypeLookup.getKeyByInstance(e);for(let s=0;s<t.count();s++){const r=t.getByIndex(s);if(!r)continue;if(n)break;const o=r.object,a=this.activeIntersections.get(o.id)||r;for(const t in this.priorityHandlerMap[i])if(r.object instanceof this.meshTypeLookup.getTypeByKey(t)){const s=this.priorityHandlerMap[i]&&this.priorityHandlerMap[i][t];if(s&&(n=!0,s(e,o,a)))return!0}const l=this.meshHandlerMap[i];if(l)for(const t of l)if(t.comparator.compare(o)){const i=t.callback(e,o,a);(i||void 0===i)&&(n=!0)}}return n}insertHandler(e,t,n){const i=this.eventTypeLookup.getKeyByType(e,!0);t[i]||(t[i]=[]),t[i].push(n)}removeHandler(e,t,n){const i=t[this.eventTypeLookup.getKeyByType(e)];if(i)for(let e=0;e<i.length;e++)if(i[e]===n){i.splice(e,1);break}}getMeshHandler(e,t,n){const i=n[this.eventTypeLookup.getKeyByType(e)];if(i){return i[this.meshTypeLookup.getKeyByType(t)]}return null}onUpdate(){this.inputGesture.tick()}}},94113:(e,t,n)=>{"use strict";n.d(t,{e:()=>KeyEvent});var i=n(59017);class KeyEvent extends i.G{constructor(e,t,n){super(),this.key=e,this.state=t,this.modifiers=n}}},19926:(e,t,n)=>{"use strict";var i;n.d(t,{M:()=>i}),function(e){e[e.DOWN=0]="DOWN",e[e.PRESSED=1]="PRESSED",e[e.UP=2]="UP"}(i||(i={}))},43985:(e,t,n)=>{"use strict";var i;n.d(t,{R:()=>i}),function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.RETURN=13]="RETURN",e[e.SHIFT=16]="SHIFT",e[e.CONTROL=17]="CONTROL",e[e.ALT=18]="ALT",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.HASH=35]="HASH",e[e.LEFTARROW=37]="LEFTARROW",e[e.UPARROW=38]="UPARROW",e[e.RIGHTARROW=39]="RIGHTARROW",e[e.DOWNARROW=40]="DOWNARROW",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.AT=64]="AT",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.SEMICOLON=186]="SEMICOLON",e[e.PLUSEQUALS=187]="PLUSEQUALS",e[e.DASHUNDERSCORE=189]="DASHUNDERSCORE",e[e.OPENBRACKET=219]="OPENBRACKET"}(i||(i={}))},8054:(e,t,n)=>{"use strict";var i,s;n.d(t,{MP:()=>i,r3:()=>s,AF:()=>r,L2:()=>o}),function(e){e[e.PRIMARY=0]="PRIMARY",e[e.MIDDLE=1]="MIDDLE",e[e.SECONDARY=2]="SECONDARY",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e[e.COUNT=5]="COUNT"}(i||(i={})),function(e){e[e.NONE=0]="NONE",e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=4]="SECONDARY",e[e.MIDDLE=2]="MIDDLE",e[e.BACK=8]="BACK",e[e.FORWARD=16]="FORWARD",e[e.ALL=31]="ALL"}(s||(s={}));const r=e=>{const t=s[i[e]];return"number"==typeof t?t:void 0},o=e=>{const t=i[s[e]];return"number"==typeof t?t:void 0}},70399:(e,t,n)=>{"use strict";n.d(t,{_A:()=>i,er:()=>PointerButtonEvent,mE:()=>PointerMoveEvent});var i,s=n(59017);class PointerEvent extends s.G{}!function(e){e.MOUSE="mouse",e.TOUCH="touch",e.PEN="pen",e.GAMEPAD="gamepad"}(i||(i={}));class PointerButtonEvent extends PointerEvent{constructor(e,t,n,i,s,r){super(),this.id=e,this.position=t,this.clientPosition=n,this.button=i,this.down=s,this.device=r}}class PointerMoveEvent extends PointerEvent{constructor(e,t,n,i,s){super(),this.id=e,this.position=t,this.clientPosition=n,this.buttons=i,this.device=s}}},51167:(e,t,n)=>{"use strict";var i,s;n.d(t,{s:()=>i,f:()=>s}),function(e){e.Desktop="desktop",e.Mobile="mobile",e.VrOrientOnly="xr.orientonly",e.VrWithController="xr.controller",e.VrWithTrackedController="xr.trackedcontroller"}(i||(i={})),function(e){e.None="interaction.none",e.Direct="interaction.direct",e.Key="interaction.key",e.Gui="interaction.gui",e.Mouse="interaction.mouse",e.Touch="interaction.touch",e.Pen="interaction.pen",e.XRController="interaction.xr.controller",e.XRGaze="interaction.xr.gaze",e.XRScreen="interaction.xr.screen"}(s||(s={}))},59057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>InteractionmodeData});var i=n(35424),s=n(51167);class InteractionmodeData extends i.V{constructor(){super(...arguments),this.name="interaction",this._source=InteractionmodeData.defaultSource,this._mode=InteractionmodeData.defaultMode}static get defaultMode(){return s.s.Desktop}static get defaultSource(){return s.f.None}get mode(){return this._mode}get source(){return this._source}updateSource(e){this._source=e}updateMode(e){this._mode=e}hasController(e=this.mode){return e===s.s.VrWithController||e===s.s.VrWithTrackedController}isVR(e=this.mode){return e===s.s.VrOrientOnly||e===s.s.VrWithController||e===s.s.VrWithTrackedController}isMobile(e=this.mode){return e===s.s.Mobile}}},36742:(e,t,n)=>{"use strict";n.d(t,{m:()=>InteractionModeChangeMessage,a:()=>InteractionSourceChangeMessage});var i=n(4117);class InteractionModeChangeMessage extends i.v{constructor(e,t){super(),this.mode=e,this.fromMode=t}}class InteractionSourceChangeMessage extends i.v{constructor(e){super(),this.source=e}}},88507:(e,t,n)=>{"use strict";n.d(t,{D:()=>LabelData});var i=n(35424),s=n(66910),r=n(81402);const o=new(n(5477).Z)("label-data");class LabelData extends i.V{constructor(e){super(),this.name="label",this.has=e=>this.map.has(e),this.getLabel=e=>this.map.get(e),this.map=(0,s.q)(e||{})}getCount(){return this.map.length}add(e){let t=e.sid;return this.map.has(t)&&o.warn("Label already tracked:",{sid:t,label:e,existing:this.getLabel(t)}),t=t||this.generateSid(),e.sid=t,e.commit(),this.map.set(e.sid,e),t}generateSid(){let e="";for(;!e||this.map.has(e);)e=(0,r.O1)(11);return e}remove(e){return!!this.map.has(e)&&(this.map.delete(e),!0)}clear(){this.map.clear()}replace(e){this.map.replace(e)}getCollection(){return this.map}iterate(e){for(const t of this.map.keys)e(this.map.get(t),t)}isEqual(e){if(this.map.length!==e.map.length)return!1;for(const t of this.map){const n=e.map.get(t.sid);if(!n||!LabelData.labelsAreEqual(t,n))return!1}return!0}static labelsAreEqual(e,t){return e.floorId===t.floorId&&e.roomId===t.roomId&&e.position.x===t.position.x&&e.position.y===t.position.y&&e.position.z===t.position.z&&e.sid===t.sid&&e.text===t.text&&e.floorId===t.floorId&&e.roomId===t.roomId&&e.visible===t.visible}getLabelsForRoom(e){const t=[];return this.iterate((n=>{n.roomId===e&&t.push(n)})),t}}},65453:(e,t,n)=>{"use strict";n.d(t,{Nj:()=>i,Cu:()=>s});const i="features/labels",s="features/3d_labels_enabled"},98142:(e,t,n)=>{"use strict";n.d(t,{V:()=>RTLDisabledRoomnavMessage});var i=n(4117);class RTLDisabledRoomnavMessage extends i.v{}},67233:(e,t,n)=>{"use strict";n.d(t,{R:()=>LayersData});var i=n(35424),s=n(5477),r=n(29984),o=n(5005),a=n(21396),l=n(9295),c=n(33669);const d=new s.Z("layers-data");class LayersData extends i.V{constructor(e,t){super(),this.currentViewId="",this.initialViewId="",this.initialViewId=e.id,this.policy=t||l.Od.DISABLED,this.viewsObservable=(0,r.C)([e])}isViewsPolicyEnabled(){return[l.Od.VIEWS_OPT_IN,l.Od.VIEWS_ENABLED,l.Od.VIEWS_AND_LAYERS].includes(this.policy)}isViewsOptIn(){return this.policy===l.Od.VIEWS_OPT_IN}isDataLayersEnabled(){return[l.Od.LAYERS_ONLY,l.Od.VIEWS_AND_LAYERS].includes(this.policy)}setCurrentView(e){if(e===this.currentViewId)return;const t=this.getView(e);if(!t)throw new o.SN("Model View not found");d.debug(`Active view set to ${e} (${t.viewType})`),this.currentViewId=e,this.commit()}getCurrentView(){const e=this.getView(this.currentViewId);if(!e)throw new o.SN("Missing current model view");return e}getCurrentViewId(){return this.currentViewId}getInitialView(){const e=this.getView(this.initialViewId);if(!e)throw new o.SN("Missing initial model view");return e}addView(e){this.viewsObservable.push(e)}canDeleteView(e){const t=this.getView(e);return t&&t.viewType===a.X.USER}canDeleteActiveView(){return this.canDeleteView(this.getCurrentViewId())}canDisableView(e){const t=this.getView(e);return t&&t.viewType===a.X.USER}canDisableActiveView(){return this.canDisableView(this.getCurrentViewId())}validateViewName(e){return e.length>0&&e.length<c.ty}setViews(e){this.viewsObservable.replace(e)}getView(e){const t=this.viewsObservable.find((t=>t.id===e));if(!t)throw new o.SN(`Model View not found: ${e}`);return t}deleteView(e){const t=this.viewsObservable.findIndex((t=>t.id===e));-1!==t&&this.viewsObservable.remove(t)}getStandardModelViews(){return this.viewsObservable.filter((e=>e.viewType===a.X.BASE||e.viewType===a.X.USER))}getEnabledStandardModelViews(){return this.getStandardModelViews().filter((e=>e.enabled))}onModelViewsChanged(e){return this.viewsObservable.onChanged(e)}getWorkshopSessionView(){return this.viewsObservable.find((e=>e.viewType===a.X.SESSION))}isWorkshopSessionView(){var e;return(null===(e=this.getWorkshopSessionView())||void 0===e?void 0:e.id)===this.getCurrentViewId()}getBaseModelView(){return this.viewsObservable.find((e=>e.viewType===a.X.BASE))}getBaseModelId(){var e;return(null===(e=this.getBaseModelView())||void 0===e?void 0:e.id)||this.initialViewId}getNonworkshopViewId(){const e=this.getCurrentView();return e.viewType!==a.X.SESSION?e.id:this.getBaseModelId()}}},37614:(e,t,n)=>{"use strict";n.d(t,{zD:()=>OptIntoViewsCommand,jT:()=>ExposeEnabledViewsCommand,wG:()=>SetActiveModelViewCommand,Bv:()=>AddUserViewCommand,qP:()=>DeleteUserViewCommand,xi:()=>RenameUserViewCommand,Xg:()=>SetUserViewEnabledCommand,Ru:()=>DuplicateUserViewCommand,vM:()=>RegisterConfirmViewChangeCommand,Ch:()=>RegisterDuplicateViewHelperCommand,EO:()=>UnregisterDuplicateViewHelperCommand});var i=n(93037);class IDOnlyCommand extends i.m{constructor(e){super(),this.payload={viewId:e}}}class IDNameCommand extends i.m{constructor(e,t){super(),this.payload={viewId:e,name:t}}}class OptIntoViewsCommand extends i.m{constructor(){super(...arguments),this.id="VIEWS_OPT_IN_COMMAND"}}class ExposeEnabledViewsCommand extends i.m{constructor(){super(...arguments),this.id="VIEWS_EXPOSE_ENABLED_COMMAND"}}class SetActiveModelViewCommand extends IDOnlyCommand{constructor(){super(...arguments),this.id="MODEL_VIEW_SET_COMMAND"}}class AddUserViewCommand extends i.m{constructor(e){super(),this.id="USER_VIEW_ADD_COMMAND",this.payload={name:e}}}class DeleteUserViewCommand extends IDOnlyCommand{constructor(){super(...arguments),this.id="USER_VIEW_DELETE_COMMAND"}}class RenameUserViewCommand extends IDNameCommand{constructor(){super(...arguments),this.id="USER_VIEW_RENAME_COMMAND"}}class SetUserViewEnabledCommand extends i.m{constructor(e,t){super(),this.id="USER_VIEW_TOGGLE_ENABLE_COMMAND",this.payload={viewId:e,enabled:t}}}class DuplicateUserViewCommand extends IDNameCommand{constructor(){super(...arguments),this.id="USER_VIEW_DUPLICATE_COMMAND"}}class RegisterConfirmViewChangeCommand extends i.m{constructor(e){super(),this.id="REGISTER_CONFIRM_VIEW_CHANGE",this.payload={confirmViewChange:e}}}class RegisterDuplicateViewHelperCommand extends i.m{constructor(e){super(),this.id="REGISTER_DUPLICATE_VIEW_HELPER_COMMAND",this.payload=e}}class UnregisterDuplicateViewHelperCommand extends i.m{constructor(e){super(),this.id="UNREGISTER_DUPLICATE_VIEW_HELPER_COMMAND",this.payload=e}}},21396:(e,t,n)=>{"use strict";var i;n.d(t,{X:()=>i}),function(e){e.BASE="base",e.TRUEPLAN="trueplan",e.SESSION="session",e.USER="user",e.SYNDICATION="syndication"}(i||(i={}))},9295:(e,t,n)=>{"use strict";n.d(t,{Od:()=>s,uB:()=>o});var i=n(87100);var s;!function(e){e.DISABLED="disabled",e.VIEWS_OPT_IN="user_views",e.VIEWS_ENABLED="views_enabled",e.VIEWS_AND_LAYERS="views_layers",e.LAYERS_ONLY="layers"}(s||(s={}));var r;function o(e){const t=function(){switch((0,i.FU)().layers){case r.DISABLED:return s.DISABLED;case r.VIEWS_OPT_IN:return s.VIEWS_OPT_IN;case r.VIEWS_ENABLED:return s.VIEWS_ENABLED;case r.VIEWS_AND_LAYERS:return s.VIEWS_AND_LAYERS;case r.LAYERS_ONLY:return s.LAYERS_ONLY}}();if(void 0!==t)return t;const n=e.getPolicy("spaces.webgl.layers.mode");return n&&n.value?n.value:s.DISABLED}!function(e){e.DISABLED="0",e.VIEWS_OPT_IN="1",e.VIEWS_ENABLED="2",e.VIEWS_AND_LAYERS="3",e.LAYERS_ONLY="4"}(r||(r={}))},76061:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AddUserViewCommand:()=>i.Bv,DeleteUserViewCommand:()=>i.qP,DuplicateUserViewCommand:()=>i.Ru,ExposeEnabledViewsCommand:()=>i.jT,LayersData:()=>o.R,LayersModule:()=>LayersModule,LayersViewError:()=>LayersViewError,ModelView:()=>ModelView,ModelViewType:()=>s.X,OptIntoViewsCommand:()=>i.zD,RegisterConfirmViewChangeCommand:()=>i.vM,RegisterDuplicateViewHelperCommand:()=>i.Ch,RenameUserViewCommand:()=>i.xi,SetActiveModelViewCommand:()=>i.wG,SetUserViewEnabledCommand:()=>i.Xg,UnregisterDuplicateViewHelperCommand:()=>i.EO,default:()=>LayersModule});var i=n(37614),s=n(21396),r=n(40603);class LayersViewError extends r.y{constructor(e,t="80001"){super(e),this.name="LayersViewError",this.code=t}}var o=n(67233),a=n(57227);var l=n(14877),c=n(36032),d=n(87066),u=n(61903),h=n(66225),p=n(97236),m=n(55900),g=n(36616),f=n(71843),v=n(9295),b=n(98254);class ModelView extends b.T{constructor(e={}){super(),this.viewType=null,this.rawViewType="",this.enabled=!0,this._name="",Object.assign(this,e)}get name(){return this.viewType===s.X.BASE&&""===this._name?ModelView.defaultName:this._name}set name(e){this._name=e}static setDefaultName(e){ModelView.defaultName=e}}ModelView.defaultName="Untitled View";var y=n(20585),S=n(33669),E=n(17423),T=n(5005),O=n(38636),_=n(5477),A=n(63336);const w=new _.Z("mds-modelview-deserializer");class ModelViewDeserializer{deserialize(e){return e&&e.id&&e.type?new ModelView({id:e.id,viewType:this.getModelViewType(e),rawViewType:e.type,name:e.name||"",enabled:!!e.enabled,created:(0,A.p)(e.created),modified:(0,A.p)(e.modified)}):(w.debug("Deserialized invalid ModelView data from MDS",e),null)}getModelViewType(e){const t={"matterport.workshop.session":s.X.SESSION,"matterport.model.default":s.X.BASE,"trueplan.session":s.X.TRUEPLAN,"matterport.user.view":s.X.USER,"matterport.syndication":s.X.SYNDICATION};return e.type in t?t[e.type]:null}}var N=n(54232),P=n(12621);const I=new _.Z("MdsModelViewStore");class MdsModelViewStore extends h.u{constructor(e){super(e),this.prefetchKey=P.SJ,this.deserializer=new ModelViewDeserializer}async read(){if(!this.viewId)throw new T.SN("Cannot read Views, no initial view configured");const e=await this.query(N.GetViews,{modelId:this.viewId}).catch((e=>{throw new T.Zb(e)})),t=(0,O.q)(e,"data.model.views"),n=[];if(t)for(const e of t){const t=this.deserializer.deserialize(e);t&&n.push(t)}return n.sort(((e,t)=>e.created.getTime()-t.created.getTime())),n}async create(e){const t=h.u.baseViewId;return this.mutate(N.AddUserView,{modelId:t,name:e}).then((e=>this.deserializer.deserialize((0,O.q)(e,"data.addView"))))}async delete(e){const t=h.u.baseViewId;if(e===t)throw new T.SN("Cannot delete the base view");const n=await this.mutate(N.DeleteUserView,{modelId:t,viewId:e}),i=(0,O.q)(n,"data.deleteView")||!1;return i||I.error("View deletion failed!"),i}async rename(e,t){const n=await this.mutate(N.RenameUserView,{viewId:e,name:t}),i=(0,O.q)(n,"data.patchView");return this.deserializer.deserialize(i)}async setEnabled(e,t){const n=await this.mutate(N.SetUserViewEnabled,{viewId:e,enabled:t}),i=(0,O.q)(n,"data.patchView");return this.deserializer.deserialize(i)}async duplicate(e,t,n,i){const s=await this.mutate(N.DuplicateUserView,{modelId:e,viewId:t,name:n,enabled:i}),r=(0,O.q)(s,"data.addView");return this.deserializer.deserialize(r)}async hasWorkshopChanges(e){const t=await this.client.query(N.GetMergeDiff,{viewId:e}).catch((e=>{throw new T.Zb(e)})),n=(0,O.q)(t,"data.model.mergeDiff.typesModified");return n&&n.length>0}}var k=n(18884),C=n(82591),L=n(47063),M=n(36154),D=n(52549),R=n(2252),x=n(87100),j=n(16695),U=n(10854);class LayersModule extends a.Y{constructor(){super(...arguments),this.name="layers",this.viewChangeConfirmers=[],this.duplicateHelpers=new Set,this.onHistoryPop=()=>{if(this.data.getCurrentView().viewType===s.X.SESSION)return;const e=(0,x.kD)(),t=e.get("m")||e.get("model");t&&t!==this.data.currentViewId&&this.setActiveModelView(t)}}async init(e,t){const{baseUrl:n,readonly:s,viewId:r}=e,{commandBinder:a,market:m}=t,[b,y]=await Promise.all([t.market.waitForData(u.e),t.market.waitForData(d.n)]);t.getModuleBySymbol(l.y.LOCALE).then((e=>{ModelView.setDefaultName(e.t(U.Z.WORKSHOP.LAYERS.DEFAULT_VIEW_NAME))})),this.settingsData=b,this.config=e,this.store=new MdsModelViewStore({readonly:s,baseUrl:n,viewId:r}),this.engine=t,this.data=new o.R(new ModelView({id:r}),(0,v.uB)(y)),await this.loadViews(),await this.setInitialView();const T=this.data.getBaseModelId();h.u.setBaseViewId(T),p.U.setBaseViewId(T),window.addEventListener("popstate",this.onHistoryPop);const O=()=>{if(this.data.isViewsPolicyEnabled()){if(this.data.isViewsOptIn()){this.settingsData.tryGetProperty(E.F.ViewsOptInPromptOnPublish,!1)&&this.engine.commandBinder.issueCommand(new f.Bz(g.P.VIEWS_OPT_IN,!0))}else this.exposeViews()}};if(!this.config.readonly&&this.data.isViewsPolicyEnabled()){this.bindings.push(t.subscribe(M.zK,O),a.addBinding(i.zD,this.modifyInsideSaveCommand((e=>this.optIntoViews())))),this.editHandlers=new c.V(a.addBinding(i.Bv,this.modifyInsideSaveCommand((e=>this.addUserView(e.name)))),a.addBinding(i.qP,this.modifyInsideSaveCommand((e=>this.deleteUserView(e.viewId)))),a.addBinding(i.xi,this.modifyInsideSaveCommand((e=>this.renameUserView(e.viewId,e.name)))),a.addBinding(i.Xg,this.modifyInsideSaveCommand((e=>this.setUserViewEnabled(e.viewId,e.enabled)))),a.addBinding(i.Ru,this.modifyInsideSaveCommand((e=>this.duplicateUserView(e.viewId,e.name)))));this.settingsData.tryGetProperty(S.Pe,!1)||this.editHandlers.cancel()}this.bindings.push(a.addBinding(i.jT,(async()=>this.exposeViews())),a.addBinding(i.wG,(e=>this.setActiveModelView(e.viewId))),a.addBinding(i.vM,(async e=>this.registerConfirmViewChange(e.confirmViewChange))),a.addBinding(i.Ch,(async e=>this.duplicateHelpers.add(e))),a.addBinding(i.EO,(async e=>this.duplicateHelpers.delete(e)))),m.register(this,o.R,this.data),this.setupDebugMenu(t)}dispose(e){super.dispose(e),this.editHandlers.cancel(),window.removeEventListener("popstate",this.onHistoryPop)}setInitialView(){const{viewId:e,inWorkshop:t}=this.config,n=this.data.isViewsPolicyEnabled();let i=n,s=e;const r=this.settingsData.tryGetProperty(y.Bg,!1);if((o=s)&&11===o.length&&t){const e=this.data.getWorkshopSessionView();e&&e.enabled?(s=e.id,i=!1):n||(this.log.warn("No Publishing or Views..."),r||this.settingsData.setProperty(y.Bg,!0))}var o;n&&!r&&this.settingsData.setProperty(y.Bg,!0),this.setViewsFeatureSetting(i),this.setActiveModelView(s)}exposeViews(){var e;if(!this.data.isViewsPolicyEnabled())return;if(this.settingsData.tryGetProperty(S.Pe,!1))return;const t=!!(null===(e=this.data.getWorkshopSessionView())||void 0===e?void 0:e.enabled),n=this.data.isViewsOptIn();t&&n||(this.setViewsFeatureSetting(!0),this.editHandlers&&this.editHandlers.renew(),this.setActiveModelView(this.data.getBaseModelId()))}setViewsFeatureSetting(e){this.settingsData.setProperty(S.Pe,e),this.engine.getModuleBySymbol(l.y.ANALYTICS).then((t=>{t.trackFeatures(`${S.Uo}:${e}`)}))}async loadViews(){const e=await this.store.read();e.length>0&&(this.data.setViews(e),this.log.debug("Loaded views",e))}async setActiveModelView(e){const t=this.data.getCurrentViewId();if(e===t||!await this.canChangeView())return;const n=this.data.getView(e);if(n){const i=t;this.log.debug(`Switching to view: ${n.id} (${n.viewType}), from: ${i}`),this.data.setCurrentView(n.id);const s=new k.R({baseUrl:this.config.baseUrl,prefetchPolicy:m.h.PRELOAD,query:C.GetModelViewPrefetch,variables:{modelId:n.id,includeDisabled:!this.config.readonly},initialData:void 0});h.u.addSharedCache(s),await s.preload()?(await h.u.setCurrentViewId(e),this.updateBrowserOnViewChange(n),i?(h.u.removeSharedCache(s),this.engine.broadcast(new j.Y)):this.config.modulesLoadedPromise.then((()=>{h.u.removeSharedCache(s)}))):i&&this.data.setCurrentView(i)}else this.log.warn(`Missing model view '${e}'`)}async canChangeView(){for(const e of this.viewChangeConfirmers)if(!await e())return!1;return!0}registerConfirmViewChange(e){this.viewChangeConfirmers.push(e)}updateBrowserOnViewChange(e){if(e.viewType===s.X.SESSION)return;const t=(0,x.kD)(),n=t.get("m")||t.get("model");e.id!==n&&(t.has("model")?t.set("model",e.id):t.set("m",e.id),(0,R.Vf)(t.toString(),!0))}async optIntoViews(){const e=this.data.getWorkshopSessionView();if(!e)throw new LayersViewError("No Workshop Session View!");const t=await this.store.setEnabled(e.id,!1);if(!t)throw new LayersViewError("Unable to disable Workshop Session View!");Object.assign(e,t),e.commit(),this.exposeViews()}async addUserView(e){if(!this.data.validateViewName(e))throw new LayersViewError("Invalid view name!");const t=await this.store.create(e);t&&(this.data.addView(t),this.log.debug("Added new view"),await this.setActiveModelView(t.id))}async deleteUserView(e){if(!this.data.canDeleteView(e))throw new LayersViewError("Cannot delete model view");const t=e===this.data.currentViewId;await this.store.delete(e)&&this.data.atomic((()=>{if(this.data.deleteView(e),this.log.debug("Deleted user view"),t){const e=this.data.getBaseModelId();if(!e)throw new LayersViewError("No base view");this.setActiveModelView(e)}}))}async renameUserView(e,t){const n=this.data.getView(e);if(!n)throw new LayersViewError("View does not exist");if(!this.data.validateViewName(t))throw new LayersViewError("Invalid view name!");const i=await this.store.rename(e,t);if(!i)throw new LayersViewError("Unable to rename view!");Object.assign(n,i),n.commit()}async setUserViewEnabled(e,t){const n=this.data.getView(e);if(!n)throw new LayersViewError("View does not exist");if(!this.data.canDisableView(e))throw new LayersViewError("Unable to enable/disable view");const i=await this.store.setEnabled(e,t);if(!i)throw new LayersViewError("Unable to enable/disable view!");Object.assign(n,i),n.commit()}async duplicateUserView(e,t){const n=this.data.getView(e);if(!n)throw new LayersViewError("Cannot duplicate, view does not exist");const i=Array.from(this.duplicateHelpers.keys());await Promise.all(i.map((e=>e.beforeDuplicate())));const s=await this.store.duplicate(this.data.getBaseModelId(),e,t,n.enabled);if(!s)throw new LayersViewError("Unable to duplicate view!");this.data.addView(s),await this.setActiveModelView(s.id),await Promise.all(i.map((e=>e.afterDuplicate())))}modifyInsideSaveCommand(e){return async(...t)=>{await this.engine.commandBinder.issueCommand(new L.VQ({dataTypes:[D.g.LAYERS],onCallback:()=>e(...t),skipDirtyUpdate:!0}))}}setupDebugMenu(e){e.getModuleBySymbol(l.y.SETTINGS).then((e=>{const t=this.data.getWorkshopSessionView();if(!t)return;const n=t.enabled?"Not Opt-In":"Opt-In";e.registerButton("Layers",`Reset Opt-in (Currently ${n})`,(async()=>{await this.store.setEnabled(t.id,!0),window.location.reload()}))}))}}},16695:(e,t,n)=>{"use strict";n.d(t,{Y:()=>ModelViewChangeCompleteMessage});var i=n(4117);class ModelViewChangeCompleteMessage extends i.v{}},33669:(e,t,n)=>{"use strict";n.d(t,{Pe:()=>i,Uo:()=>s,ty:()=>r,Sw:()=>o,RF:()=>a});const i="model-views-feature",s="views",r=50,o="views",a="0"},10854:(e,t,n)=>{"use strict";var i;n.d(t,{Z:()=>s}),function(e){e.LOADING="LOADING",e.PRESENTED_BY_CAPS="PRESENTED_BY_CAPS",e.EXPLORE_3D_SPACE="EXPLORE_3D_SPACE",e.POWERED_BY="POWERED_BY",e.SC_LOCKOUT_MESSAGE="SC_LOCKOUT_MESSAGE",e.SC_LOCKOUT_TITLE="SC_LOCKOUT_TITLE",e.SC_PASSWORD_TITLE="SC_PASSWORD_TITLE",e.SC_PASSWORD_INVALID="SC_PASSWORD_INVALID",e.SC_PASSWORD_PLACEHOLDER="SC_PASSWORD_PLACEHOLDER",e.SC_PASSWORD_SUBMIT="SC_PASSWORD_SUBMIT",e.VIEW_INSIDE="VIEW_INSIDE",e.VIEW_INSIDE_MESH="VIEW_INSIDE_MESH",e.VIEW_DOLLHOUSE="VIEW_DOLLHOUSE",e.VIEW_FLOORPLAN="VIEW_FLOORPLAN",e.VIEW_FULLSCREEN="VIEW_FULLSCREEN",e.EXIT_FULLSCREEN="EXIT_FULLSCREEN",e.OPEN_HIGHLIGHTS="OPEN_HIGHLIGHTS",e.CLOSE_HIGHLIGHTS="CLOSE_HIGHLIGHTS",e.PAUSE="PAUSE",e.SOCIAL_SHARING="SOCIAL_SHARING",e.VIEW_IN_VR="VIEW_IN_VR",e.FLOOR_NAME="FLOOR_NAME",e.FLOOR_ALL="FLOOR_ALL",e.PRESENTED_BY="PRESENTED_BY",e.MORE="MORE",e.LESS="LESS",e.LEARN_MORE="LEARN_MORE",e.FEEDBACK="FEEDBACK",e.TERMS="TERMS",e.HELP="HELP",e.ALT_MATTERPORT_LOGO="ALT_MATTERPORT_LOGO",e.TERMS_FAIL="TERMS_FAIL",e.HELP_NAVIGATION_TAB="HELP_NAVIGATION_TAB",e.HELP_MORE_HELP_TAB="HELP_MORE_HELP_TAB",e.HELP_DESKTOP_360_2A="HELP_DESKTOP_360_2A",e.HELP_DESKTOP_360_2B="HELP_DESKTOP_360_2B",e.HELP_DESKTOP_DOLLHOUSE_1A="HELP_DESKTOP_DOLLHOUSE_1A",e.HELP_DESKTOP_DOLLHOUSE_1B="HELP_DESKTOP_DOLLHOUSE_1B",e.HELP_DESKTOP_DOLLHOUSE_2A="HELP_DESKTOP_DOLLHOUSE_2A",e.HELP_DESKTOP_DOLLHOUSE_3A="HELP_DESKTOP_DOLLHOUSE_3A",e.HELP_DESKTOP_FLOORPLAN_1A="HELP_DESKTOP_FLOORPLAN_1A",e.HELP_DESKTOP_FLOORPLAN_2A="HELP_DESKTOP_FLOORPLAN_2A",e.HELP_DESKTOP_FLOORPLAN_2B="HELP_DESKTOP_FLOORPLAN_2B",e.HELP_DESKTOP_FLOORPLAN_3A="HELP_DESKTOP_FLOORPLAN_3A",e.HELP_DESKTOP_FLOORPLAN_3B="HELP_DESKTOP_FLOORPLAN_3B",e.HELP_DESKTOP_MORE_360_B="HELP_DESKTOP_MORE_360_B",e.HELP_DESKTOP_MORE_DOLLHOUSE_B="HELP_DESKTOP_MORE_DOLLHOUSE_B",e.HELP_DESKTOP_MORE_FLOORS_B="HELP_DESKTOP_MORE_FLOORS_B",e.HELP_DESKTOP_MORE_FULLSCREEN_B="HELP_DESKTOP_MORE_FULLSCREEN_B",e.HELP_DESKTOP_MORE_HLR_B="HELP_DESKTOP_MORE_HLR_B",e.HELP_DESKTOP_MORE_INSIDE_B="HELP_DESKTOP_MORE_INSIDE_B",e.HELP_DESKTOP_MORE_MATTERTAG_B="HELP_DESKTOP_MORE_MATTERTAG_B",e.HELP_DESKTOP_MORE_TOUR_B="HELP_DESKTOP_MORE_TOUR_B",e.HELP_DESKTOP_MORE_VR_B="HELP_DESKTOP_MORE_VR_B",e.HELP_DESKTOP_MORE_ZOOM_B="HELP_DESKTOP_MORE_ZOOM_B",e.HELP_DESKTOP_PANORAMA_1A="HELP_DESKTOP_PANORAMA_1A",e.HELP_DESKTOP_PANORAMA_1B="HELP_DESKTOP_PANORAMA_1B",e.HELP_DESKTOP_PANORAMA_2A="HELP_DESKTOP_PANORAMA_2A",e.HELP_DESKTOP_PANORAMA_2B="HELP_DESKTOP_PANORAMA_2B",e.HELP_DESKTOP_PANORAMA_3A="HELP_DESKTOP_PANORAMA_3A",e.HELP_DESKTOP_PANORAMA_3B="HELP_DESKTOP_PANORAMA_3B",e.HELP_MOBILE_3="HELP_MOBILE_3",e.HELP_MOBILE_360_2="HELP_MOBILE_360_2",e.HELP_MOBILE_DOLLHOUSE_1="HELP_MOBILE_DOLLHOUSE_1",e.HELP_MOBILE_DOLLHOUSE_2="HELP_MOBILE_DOLLHOUSE_2",e.HELP_MOBILE_FLOORPLAN_1="HELP_MOBILE_FLOORPLAN_1",e.HELP_MOBILE_FLOORPLAN_2="HELP_MOBILE_FLOORPLAN_2",e.HELP_MOBILE_MORE_360_B="HELP_MOBILE_MORE_360_B",e.HELP_MOBILE_MORE_DOLLHOUSE_B="HELP_MOBILE_MORE_DOLLHOUSE_B",e.HELP_MOBILE_MORE_INSIDE_B="HELP_MOBILE_MORE_INSIDE_B",e.HELP_MOBILE_MORE_MATTERTAG_B="HELP_MOBILE_MORE_MATTERTAG_B",e.HELP_MOBILE_MORE_VR_B="HELP_MOBILE_MORE_VR_B",e.HELP_MOBILE_PANORAMA_1="HELP_MOBILE_PANORAMA_1",e.HELP_MOBILE_PANORAMA_2="HELP_MOBILE_PANORAMA_2",e.HELP_MORE_360_A="HELP_MORE_360_A",e.HELP_MORE_DOLLHOUSE_A="HELP_MORE_DOLLHOUSE_A",e.HELP_MORE_FLOORS_A="HELP_MORE_FLOORS_A",e.HELP_MORE_FLOORPLAN_A="HELP_MORE_FLOORPLAN_A",e.HELP_MORE_FULLSCREEN_A="HELP_MORE_FULLSCREEN_A",e.HELP_MORE_HLR_A="HELP_MORE_HLR_A",e.HELP_MORE_INSIDE_A="HELP_MORE_INSIDE_A",e.HELP_MORE_MATTERTAG_A="HELP_MORE_MATTERTAG_A",e.HELP_MORE_TOUR_A="HELP_MORE_TOUR_A",e.HELP_MORE_VR_A="HELP_MORE_VR_A",e.HELP_MORE_ZOOM_A="HELP_MORE_ZOOM_A",e.VR_APP_INSTRUCT="VR_APP_INSTRUCT",e.VR_APP_RECCOMMENDED="VR_APP_RECCOMMENDED",e.VR_ENTER="VR_ENTER",e.VR_LEARN_MORE_CAPS="VR_LEARN_MORE_CAPS",e.VR_QUEST="VR_QUEST",e.VR_RECOMMENDED="VR_RECOMMENDED",e.VR_SUPPORTS="VR_SUPPORTS",e.VR_VIEW_SPACE="VR_VIEW_SPACE",e.ERROR_WEBGL_UNSUPPORTED_PROBLEM="ERROR_WEBGL_UNSUPPORTED_PROBLEM",e.ERROR_BROWSER_SOLUTION="ERROR_BROWSER_SOLUTION",e.ERROR_BROWSER_EXPLANATION="ERROR_BROWSER_EXPLANATION",e.ERROR_CONTEXT_LOST_PROBLEM="ERROR_CONTEXT_LOST_PROBLEM",e.ERROR_CONTEXT_LOST_ACTIONS="ERROR_CONTEXT_LOST_ACTIONS",e.ERROR_LOADING_FAILED_PROBLEM="ERROR_LOADING_FAILED_PROBLEM",e.ERROR_LOADING_FAILED_ACTIONS="ERROR_LOADING_FAILED_ACTIONS",e.ERROR_GENERIC_PROBLEM="ERROR_GENERIC_PROBLEM",e.ERROR_GENERIC_SOLUTION="ERROR_GENERIC_SOLUTION",e.ERROR_GENERIC_ACTIONS="ERROR_GENERIC_ACTIONS",e.ERROR_GENERIC_ACTIONS_MOBILE="ERROR_GENERIC_ACTIONS_MOBILE",e.CTA_TOUR_COMPLETE="CTA_TOUR_COMPLETE",e.CTA_EXPLORE_SPACE="CTA_EXPLORE_SPACE",e.CTA_RESTART_TOUR="CTA_RESTART_TOUR",e.CTA_SHARE="CTA_SHARE",e.DESKTOP_SHORT_CTA="DESKTOP_SHORT_CTA",e.MOBILE_SHORT_CTA="MOBILE_SHORT_CTA",e.ROTATE="ROTATE",e.MOVE="MOVE",e.PLAY="PLAY",e.NEXT="NEXT",e.PREVIOUS="PREVIOUS",e.INSIDE="INSIDE",e.ZOOM="ZOOM",e.MEASUREMENT="MEASUREMENT",e.MEASUREMENT_START_ADDING="MEASUREMENT_START_ADDING",e.MEASUREMENT_CONTINUOUS_LINES="MEASUREMENT_CONTINUOUS_LINES",e.MEASUREMENT_SNAPPING="MEASUREMENT_SNAPPING",e.MEASUREMENT_UNITS="MEASUREMENT_UNITS",e.MEASUREMENT_IMPERIAL="MEASUREMENT_IMPERIAL",e.MEASUREMENT_METRIC="MEASUREMENT_METRIC",e.MEASUREMENT_SETTINGS="MEASUREMENT_SETTINGS",e.MEASUREMENT_HELP_CLICK_ANYWHERE="MEASUREMENT_HELP_CLICK_ANYWHERE",e.MEASUREMENT_HELP_ESCAPE="MEASUREMENT_HELP_ESCAPE",e.MEASUREMENT_HELP_PRESS_START="MEASUREMENT_HELP_PRESS_START",e.MEASUREMENT_HELP_DRAG_EDIT="MEASUREMENT_HELP_DRAG_EDIT",e.MEASUREMENT_HELP_PRESS_END="MEASUREMENT_HELP_PRESS_END",e.MEASUREMENT_MODE="MEASUREMENT_MODE",e.MEASUREMENT_HELP_MODAL_SUB_HEADER="MEASUREMENT_HELP_MODAL_SUB_HEADER",e.MEASUREMENT_HELP_MODAL_BODY_1="MEASUREMENT_HELP_MODAL_BODY_1",e.MEASUREMENT_HELP_MODAL_BODY_2="MEASUREMENT_HELP_MODAL_BODY_2",e.MEASUREMENT_NUDGE_TITLE="MEASUREMENT_NUDGE_TITLE",e.MEASUREMENT_NUDGE_MESSAGE="MEASUREMENT_NUDGE_MESSAGE",e.NOTES_MODE="NOTES_MODE",e.NOTES_NUDGE_TITLE="NOTES_NUDGE_TITLE",e.NOTES_NUDGE_MESSAGE="NOTES_NUDGE_MESSAGE",e.ON="ON",e.OFF="OFF",e.CLOSE="CLOSE",e.COPY="COPY",e.COPY_URL="COPY_URL",e.COPY_LINK="COPY_LINK",e.SHARE="SHARE",e.SHARE_COPIED="SHARE_COPIED",e.SHARE_CURRENT_LOCATION="SHARE_CURRENT_LOCATION",e.SHARE_DEFAULT_LOCATION="SHARE_DEFAULT_LOCATION",e.SHARE_ERROR_SWEEP_DISABLED="SHARE_ERROR_SWEEP_DISABLED",e.SHARE_EXPLORE="SHARE_EXPLORE",e.SHARE_LINK_TO_LOCATION="SHARE_LINK_TO_LOCATION",e.SHARE_AT="SHARE_AT",e.SHARE_WITH="SHARE_WITH",e.SHARE_3D="SHARE_3D",e.SHARE_MODAL_TITLE="SHARE_MODAL_TITLE",e.SHARED_TITLE="SHARED_TITLE",e.SHARED_MESSAGE="SHARED_MESSAGE",e.SHARED_MESSAGE_HASHTAG="SHARED_MESSAGE_HASHTAG",e.DOLLHOUSE_NUDGE_TITLE="DOLLHOUSE_NUDGE_TITLE",e.DOLLHOUSE_NUDGE_MESSAGE="DOLLHOUSE_NUDGE_MESSAGE"}(i||(i={})),function(e){let t,n,i,s,r,o,a,l;!function(e){e.UNABLE_TO_SAVE_CHANGES_ERROR_MESSAGE="ERRORS.UNABLE_TO_SAVE_CHANGES_ERROR_MESSAGE",e.UNAUTHORIZED_ERROR_MESSAGE="ERRORS.UNAUTHORIZED_ERROR_MESSAGE"}(t=e.ERRORS||(e.ERRORS={})),function(e){e.COLLAPSE_PANEL="PANELS.COLLAPSE_PANEL",e.EXPAND_PANEL="PANELS.EXPAND_PANEL"}(n=e.PANELS||(e.PANELS={})),function(e){e.CLOSE_BUTTON_TOOLTIP_MESSAGE="REUSABLES.CLOSE_BUTTON_TOOLTIP_MESSAGE",e.HELP_BUTTON_TOOLTIP_MESSAGE="REUSABLES.HELP_BUTTON_TOOLTIP_MESSAGE",e.EMOJI_ALT_DISAPPOINTED="REUSABLES.EMOJI_ALT_DISAPPOINTED",e.EMOJI_ALT_UNSATISFIED="REUSABLES.EMOJI_ALT_UNSATISFIED",e.EMOJI_ALT_NEUTRAL="REUSABLES.EMOJI_ALT_NEUTRAL",e.EMOJI_ALT_SATISFIED="REUSABLES.EMOJI_ALT_SATISFIED",e.EMOJI_ALT_HAPPY="REUSABLES.EMOJI_ALT_HAPPY",e.FEEDBACK_LINK_LABEL="REUSABLES.FEEDBACK_LINK_LABEL",e.BETA_FEEDBACK_LINK_LABEL="REUSABLES.BETA_FEEDBACK_LINK_LABEL"}(i=e.REUSABLES||(e.REUSABLES={})),function(e){e.PINK="COLORS.PINK",e.PLUM="COLORS.PLUM",e.PURPLE="COLORS.PURPLE",e.COBALT="COLORS.COBALT",e.CERULEAN="COLORS.CERULEAN",e.TEAL="COLORS.TEAL",e.FOG="COLORS.FOG",e.IRON="COLORS.IRON",e.FOREST="COLORS.FOREST",e.EMERALD="COLORS.EMERALD",e.MINT="COLORS.MINT",e.LIME="COLORS.LIME",e.CANARY="COLORS.CANARY",e.SUNFLOWER="COLORS.SUNFLOWER",e.TANGERINE="COLORS.TANGERINE",e.SUNSET="COLORS.SUNSET",e.SIERRA="COLORS.SIERRA",e.MAGENTA="COLORS.MAGENTA"}(s=e.COLORS||(e.COLORS={})),function(e){let t,n,i,s,r,o,a,l,c,d,u,h,p,m;!function(e){e.UPLOAD_TOOLTIP="SHOWCASE.ANNOTATIONS.UPLOAD_TOOLTIP",e.EMBED_TOOLTIP="SHOWCASE.ANNOTATIONS.EMBED_TOOLTIP",e.MAX_ATTACHMENTS_TOOLTIP="SHOWCASE.ANNOTATIONS.MAX_ATTACHMENTS_TOOLTIP",e.LINK_TOOLTIP="SHOWCASE.ANNOTATIONS.LINK_TOOLTIP",e.ADD_CTA="SHOWCASE.ANNOTATIONS.ADD_CTA",e.SAVE_CTA="SHOWCASE.ANNOTATIONS.SAVE_CTA",e.CANCEL_CTA="SHOWCASE.ANNOTATIONS.CANCEL_CTA",e.CONTENT_DELETED="SHOWCASE.ANNOTATIONS.CONTENT_DELETED",e.READ_MORE_MESSAGE="SHOWCASE.ANNOTATIONS.READ_MORE_MESSAGE"}(t=e.ANNOTATIONS||(e.ANNOTATIONS={})),function(e){e.ERROR_UPLOAD_FAIL="SHOWCASE.ATTACHMENTS.ERROR_UPLOAD_FAIL",e.ERROR_FILE_TOO_LARGE="SHOWCASE.ATTACHMENTS.ERROR_FILE_TOO_LARGE",e.ERROR_EMPTY_FILE="SHOWCASE.ATTACHMENTS.ERROR_EMPTY_FILE",e.ERROR_OVER_QUOTA="SHOWCASE.ATTACHMENTS.ERROR_OVER_QUOTA",e.ERROR_PERMISSION_DENIED="SHOWCASE.ATTACHMENTS.ERROR_PERMISSION_DENIED",e.REMOVE_TOOLTIP="SHOWCASE.ATTACHMENTS.REMOVE_TOOLTIP",e.CLOSE_TOOLTIP="SHOWCASE.ATTACHMENTS.CLOSE_TOOLTIP",e.DELETE_ATTACHMENT_TOOLTIP="SHOWCASE.ATTACHMENTS.DELETE_ATTACHMENT_TOOLTIP",e.DOWNLOAD_TOOLTIP="SHOWCASE.ATTACHMENTS.DOWNLOAD_TOOLTIP",e.EXPAND_ATTACHMENT_TOOLTIP="SHOWCASE.ATTACHMENTS.EXPAND_ATTACHMENT_TOOLTIP",e.VIEWER_INDEX_COUNT="SHOWCASE.ATTACHMENTS.VIEWER_INDEX_COUNT",e.FAILED_TO_LOAD_MESSAGE="SHOWCASE.ATTACHMENTS.FAILED_TO_LOAD_MESSAGE",e.ERROR_200_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_200_MESSAGE",e.ERROR_401_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_401_MESSAGE",e.ERROR_403_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_403_MESSAGE",e.ERROR_404_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_404_MESSAGE",e.ERROR_429_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_429_MESSAGE",e.ERROR_4XX_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_4XX_MESSAGE",e.ERROR_5XX_MESSAGE="SHOWCASE.ATTACHMENTS.ERROR_5XX_MESSAGE"}(n=e.ATTACHMENTS||(e.ATTACHMENTS={})),function(e){e.DEFAULT_NAME="SHOWCASE.FLOORS.DEFAULT_NAME"}(i=e.FLOORS||(e.FLOORS={})),function(e){e.ALT_GESTURE_DRAG="SHOWCASE.HELP.ALT_GESTURE_DRAG",e.ALT_GESTURE_DRAGTWOFINGER="SHOWCASE.HELP.ALT_GESTURE_DRAGTWOFINGER",e.ALT_GESTURE_POSITION="SHOWCASE.HELP.ALT_GESTURE_POSITION",e.ALT_GESTURE_PINCH="SHOWCASE.HELP.ALT_GESTURE_PINCH",e.ALT_GESTURE_PLAY="SHOWCASE.HELP.ALT_GESTURE_PLAY",e.ALT_GESTURE_POSITIONTWOFINGER="SHOWCASE.HELP.ALT_GESTURE_POSITIONTWOFINGER",e.ALT_GESTURE_TAP="SHOWCASE.HELP.ALT_GESTURE_TAP",e.ALT_GESTURE_TAPINSIDE="SHOWCASE.HELP.ALT_GESTURE_TAPINSIDE",e.ALT_KEYBOARD_ALL="SHOWCASE.HELP.ALT_KEYBOARD_ALL",e.ALT_KEYBOARD_INSIDE="SHOWCASE.HELP.ALT_KEYBOARD_INSIDE",e.ALT_KEYBOARD_LEFTRIGHT="SHOWCASE.HELP.ALT_KEYBOARD_LEFTRIGHT",e.ALT_KEYBOARD_UPDOWN="SHOWCASE.HELP.ALT_KEYBOARD_UPDOWN",e.ALT_KEYBOARD_ZOOM="SHOWCASE.HELP.ALT_KEYBOARD_ZOOM",e.ALT_MOUSE_CLICK="SHOWCASE.HELP.ALT_MOUSE_CLICK",e.ALT_MOUSE_CLICKINSIDE="SHOWCASE.HELP.ALT_MOUSE_CLICKINSIDE",e.ALT_MOUSE_DRAGLEFT="SHOWCASE.HELP.ALT_MOUSE_DRAGLEFT",e.ALT_MOUSE_DRAGRIGHT="SHOWCASE.HELP.ALT_MOUSE_DRAGRIGHT",e.ALT_MOUSE_PLAY="SHOWCASE.HELP.ALT_MOUSE_PLAY",e.ALT_MOUSE_POSITIONLEFT="SHOWCASE.HELP.ALT_MOUSE_POSITIONLEFT",e.ALT_MOUSE_POSITIONRIGHT="SHOWCASE.HELP.ALT_MOUSE_POSITIONRIGHT",e.ALT_MOUSE_ZOOM="SHOWCASE.HELP.ALT_MOUSE_ZOOM"}(s=e.HELP||(e.HELP={})),function(e){e.EMPTY_REEL_TITLE="SHOWCASE.HLR.EMPTY_REEL_TITLE",e.EMPTY_REEL_MESSAGE="SHOWCASE.HLR.EMPTY_REEL_MESSAGE",e.EMPTY_REEL_LEARN_MORE="SHOWCASE.HLR.EMPTY_REEL_LEARN_MORE"}(r=e.HLR||(e.HLR={})),function(e){e.SEARCH_GROUP_HEADER="SHOWCASE.LABELS.SEARCH_GROUP_HEADER"}(o=e.LABELS||(e.LABELS={})),function(e){e.SEARCH_GROUP_HEADER="SHOWCASE.MEASUREMENTS.SEARCH_GROUP_HEADER"}(a=e.MEASUREMENTS||(e.MEASUREMENTS={})),function(e){e.TODAY="SHOWCASE.NOTES.TODAY",e.YESTERDAY="SHOWCASE.NOTES.YESTERDAY",e.THIS_WEEK="SHOWCASE.NOTES.THIS_WEEK",e.ONE_WEEK_AGO="SHOWCASE.NOTES.ONE_WEEK_AGO",e.TWO_WEEKS_AGO="SHOWCASE.NOTES.TWO_WEEKS_AGO",e.THREE_WEEKS_AGO="SHOWCASE.NOTES.THREE_WEEKS_AGO",e.OLDER="SHOWCASE.NOTES.OLDER",e.NO_MATCHES="SHOWCASE.NOTES.NO_MATCHES",e.HAVE_NONE="SHOWCASE.NOTES.HAVE_NONE",e.HAVE_NONE_OPEN="SHOWCASE.NOTES.HAVE_NONE_OPEN",e.HAVE_NONE_RESOLVED="SHOWCASE.NOTES.HAVE_NONE_RESOLVED",e.CONTENT_DELETED="SHOWCASE.NOTES.CONTENT_DELETED",e.RESULTS="SHOWCASE.NOTES.RESULTS",e.NUM_ATTACHMENTS="SHOWCASE.NOTES.ATTACHMENTS",e.NOTES="SHOWCASE.NOTES.NOTES",e.REPLIES="SHOWCASE.NOTES.REPLIES",e.FILTER_RESOLVED="SHOWCASE.NOTES.FILTER_RESOLVED",e.FILTER_UNRESOLVED="SHOWCASE.NOTES.FILTER_UNRESOLVED",e.FILTER_ALL="SHOWCASE.NOTES.FILTER_ALL",e.CANCEL="SHOWCASE.NOTES.CANCEL",e.DELETE="SHOWCASE.NOTES.DELETE",e.EDIT="SHOWCASE.NOTES.EDIT",e.MARK_AS_RESOLVED="SHOWCASE.NOTES.MARK_AS_RESOLVED",e.UNRESOLVE="SHOWCASE.NOTES.UNRESOLVE",e.FEEDBACK="SHOWCASE.NOTES.FEEDBACK",e.NAV_BACK="SHOWCASE.NOTES.NAV_BACK",e.NAV_CLOSE="SHOWCASE.NOTES.NAV_CLOSE",e.REPLY_PLACEHOLDER="SHOWCASE.NOTES.REPLY_PLACEHOLDER",e.EDIT_LIST_ITEM_OPTION_CTA="SHOWCASE.NOTES.EDIT_LIST_ITEM_OPTION_CTA",e.DELETE_LIST_ITEM_OPTION_CTA="SHOWCASE.NOTES.DELETE_LIST_ITEM_OPTION_CTA",e.MISSING_MESSAGE="SHOWCASE.NOTES.MISSING_MESSAGE",e.MODAL_TITLE="SHOWCASE.NOTES.MODAL_TITLE",e.MODAL_COPY="SHOWCASE.NOTES.MODAL_COPY",e.MODAL_CTA="SHOWCASE.NOTES.MODAL_CTA",e.ADD_CTA_TOOLTIP="SHOWCASE.NOTES.ADD_CTA_TOOLTIP",e.ADD_TOOLTIP="SHOWCASE.NOTES.ADD_TOOLTIP",e.CANCEL_TOOLTIP="SHOWCASE.NOTES.CANCEL_TOOLTIP",e.COLOR_STEM_TOOLTIP="SHOWCASE.NOTES.COLOR_STEM_TOOLTIP",e.DELETE_TOOLTIP="SHOWCASE.NOTES.DELETE_TOOLTIP",e.OVERLAY_ADD_TOUCH="SHOWCASE.NOTES.OVERLAY_ADD_TOUCH",e.OVERLAY_ADD_CLICK="SHOWCASE.NOTES.OVERLAY_ADD_TOUCH",e.OVERLAY_PLACE_TOUCH="SHOWCASE.NOTES.OVERLAY_ADD_TOUCH",e.OVERLAY_PLACE_CLICK="SHOWCASE.NOTES.OVERLAY_ADD_TOUCH",e.SEARCH_GROUP_HEADER="SHOWCASE.NOTES.SEARCH_GROUP_HEADER"}(l=e.NOTES||(e.NOTES={})),function(e){e.CLOSE_TAG_LABEL="SHOWCASE.TAGS.CLOSE_TAG_LABEL",e.DOCK_TAG_LABEL="SHOWCASE.TAGS.DOCK_TAG_LABEL",e.EDIT_TAG_LABEL="SHOWCASE.TAGS.EDIT_TAG_LABEL",e.MISSING_MESSAGE="SHOWCASE.TAGS.MISSING_MESSAGE",e.SEARCH_GROUP_HEADER="SHOWCASE.TAGS.SEARCH_GROUP_HEADER",e.SHARE_TAG_LABEL="SHOWCASE.TAGS.SHARE_TAG_LABEL",e.UNDOCK_TAG_LABEL="SHOWCASE.TAGS.UNDOCK_TAG_LABEL",e.NAV_BACK_LABEL="SHOWCASE.TAGS.NAV_BACK_LABEL"}(c=e.TAGS||(e.TAGS={})),function(e){e.QUERY_PLACEHOLDER="SHOWCASE.SEARCH.QUERY_PLACEHOLDER",e.CLEAR_SEARCH="SHOWCASE.SEARCH.CLEAR_SEARCH",e.GROUP_FLOOR="SHOWCASE.SEARCH.GROUP_FLOOR",e.GROUP_FLOOR_SELECTED="SHOWCASE.SEARCH.GROUP_FLOOR_SELECTED",e.GROUP_TYPE="SHOWCASE.SEARCH.GROUP_TYPE",e.GROUP_TYPE_SELECTED="SHOWCASE.SEARCH.GROUP_TYPE_SELECTED",e.ITEMS="SHOWCASE.SEARCH.ITEMS",e.EMPTY_LIST_MESSAGE="SHOWCASE.SEARCH.EMPTY_LIST_MESSAGE",e.VALIDATION_MESSAGE="SHOWCASE.SEARCH.VALIDATION_MESSAGE",e.ADVANCED_SEARCH_INSTRUCTIONS="SHOWCASE.SEARCH.ADVANCED_SEARCH_INSTRUCTIONS",e.ADVANCED_SEARCH_HELP_BUTTON="SHOWCASE.SEARCH.ADVANCED_SEARCH_HELP_BUTTON",e.ADVANCED_SEARCH_TITLE="SHOWCASE.SEARCH.ADVANCED_SEARCH_TITLE"}(d=e.SEARCH||(e.SEARCH={})),function(e){e.BANNER_CTA_LINK_TEXT="SHOWCASE.SUBSCRIBER_PROMPT.BANNER_CTA_LINK_TEXT",e.POPUP_CTA_HEADING="SHOWCASE.SUBSCRIBER_PROMPT.POPUP_CTA_HEADING",e.POPUP_CTA_LINK_TEXT="SHOWCASE.SUBSCRIBER_PROMPT.POPUP_CTA_LINK_TEXT"}(u=e.SUBSCRIBER_PROMPT||(e.SUBSCRIBER_PROMPT={})),function(e){e.HEADING="SHOWCASE.SUMMARY.HEADING",e.LABEL_ADDRESS="SHOWCASE.SUMMARY.LABEL_ADDRESS",e.LABEL_CONTACT="SHOWCASE.SUMMARY.LABEL_CONTACT",e.LABEL_INFORMATION="SHOWCASE.SUMMARY.LABEL_INFORMATION",e.LABEL_LOCATION="SHOWCASE.SUMMARY.LABEL_LOCATION",e.LABEL_LEARN_MORE="SHOWCASE.SUMMARY.LABEL_LEARN_MORE"}(h=e.SUMMARY||(e.SUMMARY={})),function(e){e.TOUR_BUTTON_LABEL="SHOWCASE.TOURS.TOUR_BUTTON_LABEL",e.TOUR_CONTROLS_TITLE="SHOWCASE.TOURS.TOUR_CONTROLS_TITLE",e.TOUR_CONTROLS_CTA="SHOWCASE.TOURS.TOUR_CONTROLS_CTA"}(p=e.TOURS||(e.TOURS={})),function(e){e.VIEW_SELECTOR_START_LOCATION_TOOLTIP="SHOWCASE.VIEWS.VIEW_SELECTOR_START_LOCATION_TOOLTIP"}(m=e.VIEWS||(e.VIEWS={}))}(r=e.SHOWCASE||(e.SHOWCASE={})),function(e){e.BLUR="TOOLS.BLUR",e.BLUR_HELP_MESSAGE="TOOLS.BLUR_HELP_MESSAGE",e.HLR="TOOLS.HLR",e.HLR_HELP_MESSAGE="TOOLS.HLR_HELP_MESSAGE",e.LABELS="TOOLS.LABELS",e.LABELS_HELP_MESSAGE="TOOLS.LABELS_HELP_MESSAGE",e.LAYERS="TOOLS.LAYERS",e.LAYERS_HELP_MESSAGE="TOOLS.LAYERS_HELP_MESSAGE",e.MATTERTAGS="TOOLS.MATTERTAGS",e.MATTERTAGS_HELP_MESSAGE="TOOLS.MATTERTAGS_HELP_MESSAGE",e.MEASUREMENTS="TOOLS.MEASUREMENTS",e.MEASUREMENTS_HELP_MESSAGE="TOOLS.MEASUREMENTS_HELP_MESSAGE",e.MESH_TRIM="TOOLS.MESH_TRIM",e.MESH_TRIM_HELP_MESSAGE="TOOLS.MESH_TRIM_HELP_MESSAGE",e.NOTES="TOOLS.NOTES",e.PHOTOS="TOOLS.PHOTOS",e.PHOTOS_HELP_MESSAGE="TOOLS.PHOTOS_HELP_MESSAGE",e.SCANS_3D="TOOLS.SCANS_3D",e.SCANS_3D_HELP_MESSAGE="TOOLS.SCANS_3D_HELP_MESSAGE",e.SETTINGS_PANEL="TOOLS.SETTINGS_PANEL",e.START_LOCATION="TOOLS.START_LOCATION",e.START_LOCATION_HELP_MESSAGE="TOOLS.START_LOCATION_HELP_MESSAGE",e.SUMMARY="TOOLS.SUMMARY",e.TAGS="TOOLS.TAGS",e.TAGS_HELP_MESSAGE="TOOLS.TAGS_HELP_MESSAGE",e.TOURS="TOOLS.TOURS",e.TOURS_HELP_MESSAGE="TOOLS.TOURS_HELP_MESSAGE",e.VIEW_360="TOOLS.VIEW_360",e.VIEW_360_HELP_MESSAGE="TOOLS.VIEW_360_HELP_MESSAGE",e.VR_PATH="TOOLS.VR_PATH",e.VR_PATH_HELP_MESSAGE="TOOLS.VR_PATH_HELP_MESSAGE",e.SEARCH="TOOLS.SEARCH",e.UNSAVED_CHANGES_TITLE="TOOLS.UNSAVED_CHANGES_TITLE",e.UNSAVED_CHANGES_MESSAGE="TOOLS.UNSAVED_CHANGES_MESSAGE",e.UNSAVED_CHANGES_CONFIRM="TOOLS.UNSAVED_CHANGES_CONFIRM",e.UNSAVED_CHANGES_CANCEL="TOOLS.UNSAVED_CHANGES_CANCEL"}(o=e.TOOLS||(e.TOOLS={})),function(e){e.INVITE_USER="USERS.INVITE_USER",e.INVITE_USER_FAILED="USERS.INVITE_USER_FAILED",e.INVITE_BUTTON="USERS.INVITE_BUTTON",e.INVITE_USERS="USERS.INVITE_USERS",e.INVITE_USERS_FAILED="USERS.INVITE_USERS_FAILED",e.INVITE_VISIBLE_MSG="USERS.INVITE_VISIBLE_MSG",e.UNKNOWN_USER="USERS.UNKNOWN_USER",e.UNKNOWN_USERS="USERS.UNKNOWN_USERS"}(a=e.USERS||(e.USERS={})),function(e){let t,n,i,s,r,o,a,l,c,d,u,h,p,m,g,f,v,b,y,S,E,T,O;!function(e){e.DELETE_SELECTED_CTA="WORKSHOP.ACCORDION.DELETE_SELECTED_CTA",e.SELECT_ALL_CTA="WORKSHOP.ACCORDION.SELECT_ALL_CTA",e.ENTER_SELECT_MODE_CTA="WORKSHOP.ACCORDION.ENTER_SELECT_MODE_CTA",e.EXIT_SELECT_MODE_CTA="WORKSHOP.ACCORDION.EXIT_SELECT_MODE_CTA",e.DELETE_FOOTER_CTA="WORKSHOP.ACCORDION.DELETE_FOOTER_CTA",e.TOGGLE_VISIBILITY_FOOTER_CTA="WORKSHOP.ACCORDION.TOGGLE_VISIBILITY_FOOTER_CTA",e.BATCH_DELETE_MODAL_TITLE="WORKSHOP.ACCORDION.BATCH_DELETE_MODAL_TITLE",e.BATCH_DELETE_MODAL_MESSAGE="WORKSHOP.ACCORDION.BATCH_DELETE_MODAL_MESSAGE",e.RENAME_HEADER_OPTION_CTA="WORKSHOP.ACCORDION.RENAME_HEADER_OPTION_CTA"}(t=e.ACCORDION||(e.ACCORDION={})),function(e){e.CHANGES_SAVED_MESSAGE="WORKSHOP.APP_SWITCH.CHANGES_SAVED_MESSAGE",e.EDIT_CTA="WORKSHOP.APP_SWITCH.EDIT_CTA",e.UNSUPPORTED_TOOLTIP_MESSAGE="WORKSHOP.APP_SWITCH.UNSUPPORTED_TOOLTIP_MESSAGE",e.UNSUPPORTED_TOOLTIP_TITLE="WORKSHOP.APP_SWITCH.UNSUPPORTED_TOOLTIP_TITLE",e.PUBLIC_PUBLISH_TOOLTIP_TITLE="WORKSHOP.APP_SWITCH.PUBLIC_PUBLISH_TOOLTIP_TITLE",e.PRIVATE_PUBLISH_TOOLTIP_TITLE="WORKSHOP.APP_SWITCH.PRIVATE_PUBLISH_TOOLTIP_TITLE",e.PUBLIC_PUBLISH_TOOLTIP_MESSAGE="WORKSHOP.APP_SWITCH.PUBLIC_PUBLISH_TOOLTIP_MESSAGE",e.PRIVATE_PUBLISH_TOOLTIP_MESSAGE="WORKSHOP.APP_SWITCH.PRIVATE_PUBLISH_TOOLTIP_MESSAGE",e.PUBLISH_CHANGES_CTA="WORKSHOP.APP_SWITCH.PUBLISH_CHANGES_CTA",e.PUBLISHING_CHANGES_CTA="WORKSHOP.APP_SWITCH.PUBLISHING_CHANGES_CTA",e.REVERT_CHANGES_MODAL_TITLE="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_TITLE",e.REVERT_CHANGES_MODAL_HEADER="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_HEADER",e.REVERT_CHANGES_MODAL_EXPLANATION="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_EXPLANATION",e.REVERT_CHANGES_MODAL_WARNING="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_WARNING",e.REVERT_CHANGES_MODAL_LEARN_MORE_CTA="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_LEARN_MORE_CTA",e.REVERT_CHANGES_MODAL_CANCEL_CTA="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_CANCEL_CTA",e.REVERT_CHANGES_MODAL_REVERT_CTA="WORKSHOP.APP_SWITCH.REVERT_CHANGES_MODAL_REVERT_CTA",e.FLOORS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.FLOORS_CHECKBOX_LABEL",e.MEASUREMENTS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.MEASUREMENTS_CHECKBOX_LABEL",e.MATTERTAGS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.MATTERTAGS_CHECKBOX_LABEL",e.TAGS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.TAGS_CHECKBOX_LABEL",e.LABELS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.LABELS_CHECKBOX_LABEL",e.HIGHLIGHTS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.HIGHLIGHTS_CHECKBOX_LABEL",e.START_LOCATION_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.START_LOCATION_CHECKBOX_LABEL",e.SETTINGS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.SETTINGS_CHECKBOX_LABEL",e.SWEEPS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.SWEEPS_CHECKBOX_LABEL",e.BLURS_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.BLURS_CHECKBOX_LABEL",e.NO_UNPUBLISHED_CHANGES_CHECKBOX_LABEL="WORKSHOP.APP_SWITCH.NO_UNPUBLISHED_CHANGES_CHECKBOX_LABEL",e.EXIT_EDIT_MODE_CTA="WORKSHOP.APP_SWITCH.EXIT_EDIT_MODE_CTA",e.EXIT_EDIT_MODE_TOOLTIP_MESSAGE="WORKSHOP.APP_SWITCH.EXIT_EDIT_MODE_TOOLTIP_MESSAGE",e.DISCARD_CHANGES_TOOLTIP_MESSAGE="WORKSHOP.APP_SWITCH.DISCARD_CHANGES_TOOLTIP_MESSAGE",e.PREVIEW_CHANGES_CTA="WORKSHOP.APP_SWITCH.PREVIEW_CHANGES_CTA",e.TIMESTAMP_UNPUBLISHED_CHANGES="WORKSHOP.APP_SWITCH.TIMESTAMP_UNPUBLISHED_CHANGES",e.TIMESTAMP_GREATER_THAN_ONE_MONTH="WORKSHOP.APP_SWITCH.TIMESTAMP_GREATER_THAN_ONE_MONTH",e.TIMESTAMP_DAY="WORKSHOP.APP_SWITCH.TIMESTAMP_DAY",e.TIMESTAMP_HOUR="WORKSHOP.APP_SWITCH.TIMESTAMP_HOUR",e.TIMESTAMP_MINUTE="WORKSHOP.APP_SWITCH.TIMESTAMP_MINUTE",e.TIMESTAMP_LESS_THAN_ONE_MINUTE="WORKSHOP.APP_SWITCH.TIMESTAMP_LESS_THAN_ONE_MINUTE",e.TIMESTAMP_LAST_PUBLISHED_MESSAGE="WORKSHOP.APP_SWITCH.TIMESTAMP_LAST_PUBLISHED_MESSAGE",e.UNABLE_TO_PUBLISH_CHANGES_ERROR_MESSAGE="WORKSHOP.APP_SWITCH.UNABLE_TO_PUBLISH_CHANGES_ERROR_MESSAGE",e.UNABLE_TO_REVERT_CHANGES_ERROR_MESSAGE="WORKSHOP.APP_SWITCH.UNABLE_TO_REVERT_CHANGES_ERROR_MESSAGE"}(n=e.APP_SWITCH||(e.APP_SWITCH={})),function(e){e.ACCEPT_ALL_SUGGESTIONS="WORKSHOP.BLURS.ACCEPT_ALL_SUGGESTIONS",e.ACCEPT_SUGGESTION_TOOLTIP="WORKSHOP.BLURS.ACCEPT_SUGGESTION_TOOLTIP",e.ALREADY_PROCESSING_ALERT_MESSAGE="WORKSHOP.BLURS.ALREADY_PROCESSING_ALERT_MESSAGE",e.ALREADY_PROCESSING_ALERT_TITLE="WORKSHOP.BLURS.ALREADY_PROCESSING_ALERT_TITLE",e.APPLY_BLURS_CTA="WORKSHOP.BLURS.APPLY_BLURS_CTA",e.APPLYING="WORKSHOP.BLURS.APPLYING",e.APPLY_MODAL_CONFIRM="WORKSHOP.BLURS.APPLY_MODAL_CONFIRM",e.APPLY_MODAL_NUDGE_CANCEL="WORKSHOP.BLURS.APPLY_MODAL_NUDGE_CANCEL",e.APPLY_MODAL_MESSAGE="WORKSHOP.BLURS.APPLY_MODAL_MESSAGE",e.APPLY_MODAL_NUDGE_MESSAGE="WORKSHOP.BLURS.APPLY_MODAL_NUDGE_MESSAGE",e.APPLY_MODAL_RETRY="WORKSHOP.BLURS.APPLY_MODAL_RETRY",e.APPLY_MODAL_TITLE="WORKSHOP.BLURS.APPLY_MODAL_TITLE",e.APPLY_MODAL_NUDGE_TITLE="WORKSHOP.BLURS.APPLY_MODAL_NUDGE_TITLE",e.APPLY_MODAL_TRUNCATED="WORKSHOP.BLURS.APPLY_MODAL_TRUNCATED",e.APPLY_MODAL_WARNING="WORKSHOP.BLURS.APPLY_MODAL_WARNING",e.BATCH_SELECT="WORKSHOP.BLURS.BATCH_SELECT",e.BLUR_STATUS="WORKSHOP.BLURS.BLUR_STATUS",e.BLUR_STATUS_ALL="WORKSHOP.BLURS.BLUR_STATUS_ALL",e.BLUR_STATUS_APPLIED="WORKSHOP.BLURS.BLUR_STATUS_APPLIED",e.BLUR_STATUS_FAILED="WORKSHOP.BLURS.BLUR_STATUS_FAILED",e.BLUR_STATUS_PENDING="WORKSHOP.BLURS.BLUR_STATUS_PENDING",e.BLUR_STATUS_PROCESSING="WORKSHOP.BLURS.BLUR_STATUS_PROCESSING",e.BLUR_STATUS_SUGGESTED="WORKSHOP.BLURS.BLUR_STATUS_SUGGESTED",e.BRUSH_TOOLTIP_MESSAGE="WORKSHOP.BLURS.BRUSH_TOOLTIP_MESSAGE",e.BRUSH_TOOLTIP_TITLE="WORKSHOP.BLURS.BRUSH_TOOLTIP_TITLE",e.CLOSE_SUGGESTIONS="WORKSHOP.BLURS.CLOSE_SUGGESTIONS",e.CREATE_TOOLTIP_MESSAGE="WORKSHOP.BLURS.CREATE_TOOLTIP_MESSAGE",e.CREATE_TOOLTIP_TITLE="WORKSHOP.BLURS.CREATE_TOOLTIP_TITLE",e.DEFAULT_ALERT_CONFIRMATION="WORKSHOP.BLURS.DEFAULT_ALERT_CONFIRMATION",e.DEFAULT_ALERT_TITLE="WORKSHOP.BLURS.DEFAULT_ALERT_TITLE",e.DEFAULT_BLUR_NAME="WORKSHOP.BLURS.DEFAULT_BLUR_NAME",e.DELETE_BLUR_CTA="WORKSHOP.BLURS.DELETE_BLUR_CTA",e.GROUP_BY="WORKSHOP.BLURS.GROUP_BY",e.GROUP_BY_FLOOR="WORKSHOP.BLURS.GROUP_BY_FLOOR",e.GROUP_BY_SCAN="WORKSHOP.BLURS.GROUP_BY_SCAN",e.HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.BLURS.HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.MULTI_FLOOR_EMPTY_MESSAGE="WORKSHOP.BLURS.MULTI_FLOOR_EMPTY_MESSAGE",e.NO_BLURS="WORKSHOP.BLURS.NO_BLURS",e.NO_SUGGESTIONS="WORKSHOP.BLURS.NO_SUGGESTIONS",e.NO_SUGGESTIONS_ON_FLOOR="WORKSHOP.BLURS.NO_SUGGESTIONS_ON_FLOOR",e.NUM_BLUR_SUGGESTIONS="WORKSHOP.BLURS.NUM_BLUR_SUGGESTIONS",e.NUM_TYPE="WORKSHOP.BLURS.NUM_TYPE",e.OTHER_GROUP_LABEL="WORKSHOP.BLURS.OTHER_GROUP_LABEL",e.OVERLAY_MESSAGE="WORKSHOP.BLURS.OVERLAY_MESSAGE",e.OVERLAY_MESSAGE_TOUCH="WORKSHOP.BLURS.OVERLAY_MESSAGE_TOUCH",e.REJECT_ALL_SUGGESTIONS="WORKSHOP.BLURS.REJECT_ALL_SUGGESTIONS",e.REJECT_SUGGESTION_TOOLTIP="WORKSHOP.BLURS.REJECT_SUGGESTION_TOOLTIP",e.SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.BLURS.SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.SINGLE_FLOOR_EMPTY_MESSAGE="WORKSHOP.BLURS.SINGLE_FLOOR_EMPTY_MESSAGE",e.SORT="WORKSHOP.BLURS.SORT",e.SORT_CREATED_ASC="WORKSHOP.BLURS.SORT_CREATED_ASC",e.SORT_CREATED_DESC="WORKSHOP.BLURS.SORT_CREATED_DESC",e.STATUS="WORKSHOP.BLURS.STATUS",e.SUGGESTED_BLUR="WORKSHOP.BLURS.SUGGESTED_BLUR",e.SUGGESTIONS_AVAILABLE_MESSAGE="WORKSHOP.BLURS.SUGGESTIONS_AVAILABLE_MESSAGE",e.SUGGESTIONS_FOUND_MESSAGE="WORKSHOP.BLURS.SUGGESTIONS_FOUND_MESSAGE",e.TYPE="WORKSHOP.BLURS.TYPE",e.VIEW_SUGGESTIONS="WORKSHOP.BLURS.VIEW_SUGGESTIONS"}(i=e.BLURS||(e.BLURS={})),function(e){e.TYPE="WORKSHOP.SUGGESTIONS.TYPE"}(s=e.SUGGESTIONS||(e.SUGGESTIONS={})),function(e){e.HELP_LINK="WORKSHOP.EDIT_BAR.HELP_LINK",e.BETA_TAG="WORKSHOP.EDIT_BAR.BETA_TAG",e.COLLAPSE_LIST_TOOLTIP_MESSAGE="WORKSHOP.EDIT_BAR.COLLAPSE_LIST_TOOLTIP_MESSAGE",e.EXPAND_LIST_TOOLTIP_MESSAGE="WORKSHOP.EDIT_BAR.EXPAND_LIST_TOOLTIP_MESSAGE",e.NEW_BADGE="WORKSHOP.EDIT_BAR.NEW_BADGE"}(r=e.EDIT_BAR||(e.EDIT_BAR={})),function(e){e.APPLY_CTA="WORKSHOP.EMBED.APPLY_CTA",e.HELP_CTA="WORKSHOP.EMBED.HELP_CTA",e.ERROR_MESSAGE="WORKSHOP.EMBED.ERROR_MESSAGE",e.LOADING_MESSAGE="WORKSHOP.EMBED.LOADING_MESSAGE",e.INVALID_URL_MESSAGE="WORKSHOP.EMBED.INVALID_URL_MESSAGE",e.SUPPORTED_FORMATS_MESSAGE="WORKSHOP.EMBED.SUPPORTED_FORMATS_MESSAGE",e.MEDIA_LINK_LABEL="WORKSHOP.EMBED.MEDIA_LINK_LABEL",e.PROVIDER_NOT_SUPPORTED_MESSAGE="WORKSHOP.EMBED.PROVIDER_NOT_SUPPORTED_MESSAGE",e.LINK_TYPE_NOT_SUPPORTED_MESSAGE="WORKSHOP.EMBED.LINK_TYPE_NOT_SUPPORTED_MESSAGE"}(o=e.EMBED||(e.EMBED={})),function(e){e.ADD_FROM_PHOTOS_TOOLTIP_MESSAGE="WORKSHOP.HLR.ADD_FROM_PHOTOS_TOOLTIP_MESSAGE",e.ADD_HIGHLIGHT_CTA="WORKSHOP.HLR.ADD_HIGHLIGHT_CTA",e.ADD_HIGHLIGHT_DISABLED_CTA="WORKSHOP.HLR.ADD_HIGHLIGHT_DISABLED_CTA",e.ADD_HIGHLIGHT_INSTRUCTIONS="WORKSHOP.HLR.ADD_HIGHLIGHT_INSTRUCTIONS",e.APPLY_TO_ALL_CTA="WORKSHOP.HLR.APPLY_TO_ALL_CTA",e.CLEAR_HLR_MODAL_MESSAGE="WORKSHOP.HLR.CLEAR_HLR_MODAL_MESSAGE",e.CLEAR_HLR_MODAL_TITLE="WORKSHOP.HLR.CLEAR_HLR_MODAL_TITLE",e.CLEAR_REEL_CTA="WORKSHOP.HLR.CLEAR_REEL_CTA",e.CLOSE_SETTINGS_CTA="WORKSHOP.HLR.CLOSE_SETTINGS_CTA",e.DELETE_HIGHLIGHT_TOOLTIP_MESSAGE="WORKSHOP.HLR.DELETE_HIGHLIGHT_TOOLTIP_MESSAGE",e.DISMISS_TOOLTIP_CTA="WORKSHOP.HLR.DISMISS_TOOLTIP_CTA",e.DOLLHOUSE_ROTATION_SPEED_SETTING_LABEL="WORKSHOP.HLR.DOLLHOUSE_ROTATION_SPEED_SETTING_LABEL",e.EDIT_HIGHLIGHT_TOOLTIP_MESSAGE="WORKSHOP.HLR.EDIT_HIGHLIGHT_TOOLTIP_MESSAGE",e.EDIT_SETTINGS_TOOLTIP_MESSAGE="WORKSHOP.HLR.EDIT_SETTINGS_TOOLTIP_MESSAGE",e.HIGHLIGHT_CAPTION_HINT="WORKSHOP.HLR.HIGHLIGHT_CAPTION_HINT",e.HIGHLIGHT_CAPTION_PLACEHOLDER="WORKSHOP.HLR.HIGHLIGHT_CAPTION_PLACEHOLDER",e.HIGHLIGHT_DESCRIPTION_HINT="WORKSHOP.HLR.HIGHLIGHT_DESCRIPTION_HINT",e.HIGHLIGHT_DESCRIPTION_PLACEHOLDER="WORKSHOP.HLR.HIGHLIGHT_DESCRIPTION_PLACEHOLDER",e.HIGHLIGHT_SCENE_HINT="WORKSHOP.HLR.HIGHLIGHT_SCENE_HINT",e.HIGHLIGHT_SCENE_PLACEHOLDER="WORKSHOP.HLR.HIGHLIGHT_SCENE_PLACEHOLDER",e.HIGHLIGHT_TITLE_HINT="WORKSHOP.HLR.HIGHLIGHT_TITLE_HINT",e.HIGHLIGHT_TITLE_PLACEHOLDER="WORKSHOP.HLR.HIGHLIGHT_TITLE_PLACEHOLDER",e.INDIVIDUAL_PAN_DIRECTION_SETTING_LABEL="WORKSHOP.HLR.INDIVIDUAL_PAN_DIRECTION_SETTING_LABEL",e.INDIVIDUAL_TRANSITION_SETTING_LABEL="WORKSHOP.HLR.INDIVIDUAL_TRANSITION_SETTING_LABEL",e.NUM_TYPE="WORKSHOP.HLR.NUM_TYPE",e.PANNING_SETTINGS_TAB_TITLE="WORKSHOP.HLR.PANNING_SETTINGS_TAB_TITLE",e.PAN_DIRECTION_SETTING_AUTO="WORKSHOP.HLR.PAN_DIRECTION_SETTING_AUTO",e.PAN_DIRECTION_SETTING_LABEL="WORKSHOP.HLR.PAN_DIRECTION_SETTING_LABEL",e.PAN_DIRECTION_SETTING_LEFT="WORKSHOP.HLR.PAN_DIRECTION_SETTING_LEFT",e.PAN_DIRECTION_SETTING_RIGHT="WORKSHOP.HLR.PAN_DIRECTION_SETTING_RIGHT",e.PANEL_COLLAPSE="WORKSHOP.HLR.PANEL_COLLAPSE",e.PANEL_EXPAND="WORKSHOP.HLR.PANEL_EXPAND",e.PREVIEW_SETTINGS_CTA="WORKSHOP.HLR.PREVIEW_SETTINGS_CTA",e.PRESENTATION_SETTINGS_TAB_TITLE="WORKSHOP.HLR.PRESENTATION_SETTINGS_TAB_TITLE",e.REMOVE_HIGHLIGHT_TOOLTIP_MESSAGE="WORKSHOP.HLR.REMOVE_HIGHLIGHT_TOOLTIP_MESSAGE",e.RESTORE_DEFAULTS_CTA="WORKSHOP.HLR.RESTORE_DEFAULTS_CTA",e.ROTATION_ANGLE_SETTING_LABEL="WORKSHOP.HLR.ROTATION_ANGLE_SETTING_LABEL",e.ROTATION_SPEED_SETTING_LABEL="WORKSHOP.HLR.ROTATION_SPEED_SETTING_LABEL",e.SCAN_GENERIC_HIDDEN_TOOLTIP_TITLE="WORKSHOP.HLR.SCAN_GENERIC_HIDDEN_TOOLTIP_TITLE",e.SCAN_NOT_HIDDEN_TOOLTIP_TITLE="WORKSHOP.HLR.SCAN_NOT_HIDDEN_TOOLTIP_TITLE",e.SCAN_NUMBER_HIDDEN_TOOLTIP_TITLE="WORKSHOP.HLR.SCAN_NUMBER_HIDDEN_TOOLTIP_TITLE",e.SETTINGS_MODAL_TITLE="WORKSHOP.HLR.SETTINGS_MODAL_TITLE",e.SLIDESHOW_SPEED_SETTING_LABEL="WORKSHOP.HLR.SLIDESHOW_SPEED_SETTING_LABEL",e.SPEED_SETTING_FAST="WORKSHOP.HLR.SPEED_SETTING_FAST",e.SPEED_SETTING_MEDIUM="WORKSHOP.HLR.SPEED_SETTING_MEDIUM",e.SPEED_SETTING_SLOW="WORKSHOP.HLR.SPEED_SETTING_SLOW",e.TOAST_ERROR_CTA="WORKSHOP.HLR.TOAST_ERROR_CTA",e.TOAST_ERROR_MESSAGE="WORKSHOP.HLR.TOAST_ERROR_MESSAGE",e.TOUR_EDITOR_BEHAVIORS_TAB="WORKSHOP.HLR.TOUR_EDITOR_BEHAVIORS_TAB",e.TOUR_EDITOR_LABELS_TAB="WORKSHOP.HLR.TOUR_EDITOR_LABELS_TAB",e.TOUR_EDITOR_EMPTY_MESSAGE="WORKSHOP.HLR.TOUR_EDITOR_EMPTY_MESSAGE",e.TOUR_EDITOR_EMPTY_TITLE="WORKSHOP.HLR.TOUR_EDITOR_EMPTY_TITLE",e.TOUR_EDITOR_TITLE_DESCRIPTION_HELPER="WORKSHOP.HLR.TOUR_EDITOR_TITLE_DESCRIPTION_HELPER",e.TOUR_EDITOR_TITLE_DESCRIPTION_TIP="WORKSHOP.HLR.TOUR_EDITOR_TITLE_DESCRIPTION_TIP",e.TOUR_EDITOR_TITLE_DESCRIPTION_TIP_LINK="WORKSHOP.HLR.TOUR_EDITOR_TITLE_DESCRIPTION_TIP_LINK",e.TOUR_SETTINGS_LABEL="WORKSHOP.HLR.TOUR_SETTINGS_LABEL",e.TOUR_SETTINGS_MOVED_HEADER="WORKSHOP.HLR.TOUR_SETTINGS_MOVED_HEADER",e.TOUR_SETTINGS_MOVED_MESSAGE="WORKSHOP.HLR.TOUR_SETTINGS_MOVED_MESSAGE",e.TRANSITION_AFTER_360_DISABLED_MESSAGE="WORKSHOP.HLR.TRANSITION_AFTER_360_DISABLED_MESSAGE",e.TRANSITION_EDITOR_TITLE="WORKSHOP.HLR.TRANSITION_EDITOR_TITLE",e.TRANSITION_IS_360_DISABLED_MESSAGE="WORKSHOP.HLR.TRANSITION_IS_360_DISABLED_MESSAGE",e.TRANSITION_NO_ROTATION_DISABLED_MESSAGE="WORKSHOP.HLR.TRANSITION_NO_ROTATION_DISABLED_MESSAGE",e.TRANSITION_SAME_SWEEP_DISABLED_MESSAGE="WORKSHOP.HLR.TRANSITION_SAME_SWEEP_DISABLED_MESSAGE",e.TRANSITION_SETTINGS_TAB_TITLE="WORKSHOP.HLR.TRANSITION_SETTINGS_TAB_TITLE",e.TRANSITION_SETTING_LABEL="WORKSHOP.HLR.TRANSITION_SETTING_LABEL",e.TRANSITION_SETTING_SLIDESHOW="WORKSHOP.HLR.TRANSITION_SETTING_SLIDESHOW",e.TRANSITION_SETTING_WALKTHROUGH="WORKSHOP.HLR.TRANSITION_SETTING_WALKTHROUGH",e.TYPE="WORKSHOP.HLR.TYPE",e.WALKTHROUGH_SPEED_SETTING_LABEL="WORKSHOP.HLR.WALKTHROUGH_SPEED_SETTING_LABEL",e.ZOOM_SPEED_SETTING_LABEL="WORKSHOP.HLR.ZOOM_SPEED_SETTING_LABEL"}(a=e.HLR||(e.HLR={})),function(e){e.TYPE="WORKSHOP.LABELS.TYPE",e.NUM_TYPE="WORKSHOP.LABELS.NUM_TYPE",e.EDIT_TEXT_CANCEL_CTA="WORKSHOP.LABELS.EDIT_TEXT_CANCEL_CTA",e.EDIT_TEXT_DONE_CTA="WORKSHOP.LABELS.EDIT_TEXT_DONE_CTA",e.INPUT_PLACEHOLDER="WORKSHOP.LABELS.INPUT_PLACEHOLDER",e.MOBILE_OVERLAY_MESSAGE="WORKSHOP.LABELS.MOBILE_OVERLAY_MESSAGE",e.ADD_LABEL_TOOLTIP_MESSAGE="WORKSHOP.LABELS.ADD_LABEL_TOOLTIP_MESSAGE",e.RENAME_LIST_ITEM_OPTION_CTA="WORKSHOP.LABELS.RENAME_LIST_ITEM_OPTION_CTA",e.DELETE_LIST_ITEM_OPTION_CTA="WORKSHOP.LABELS.DELETE_LIST_ITEM_OPTION_CTA",e.LIST_ITEM_INPUT_PLACEHOLDER="WORKSHOP.LABELS.LIST_ITEM_INPUT_PLACEHOLDER",e.MULTI_FLOOR_EMPTY_MESSAGE="WORKSHOP.LABELS.MULTI_FLOOR_EMPTY_MESSAGE",e.SINGLE_FLOOR_EMPTY_MESSAGE="WORKSHOP.LABELS.SINGLE_FLOOR_EMPTY_MESSAGE",e.HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.LABELS.HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.LABELS.SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.EDIT_LABEL="WORKSHOP.LABELS.EDIT_LABEL"}(l=e.LABELS||(e.LABELS={})),function(e){e.KITCHEN="WORKSHOP.LABEL_SUGGESTIONS.KITCHEN",e.PRIMARY_BEDROOM="WORKSHOP.LABEL_SUGGESTIONS.PRIMARY_BEDROOM",e.BEDROOM="WORKSHOP.LABEL_SUGGESTIONS.BEDROOM",e.PRIMARY_BATHROOM="WORKSHOP.LABEL_SUGGESTIONS.PRIMARY_BATHROOM",e.BATHROOM="WORKSHOP.LABEL_SUGGESTIONS.BATHROOM",e.LIVING_ROOM="WORKSHOP.LABEL_SUGGESTIONS.LIVING_ROOM",e.FAMILY_ROOM="WORKSHOP.LABEL_SUGGESTIONS.FAMILY_ROOM",e.DINING_ROOM="WORKSHOP.LABEL_SUGGESTIONS.DINING_ROOM",e.PATIO="WORKSHOP.LABEL_SUGGESTIONS.PATIO",e.BALCONY="WORKSHOP.LABEL_SUGGESTIONS.BALCONY",e.BACKYARD="WORKSHOP.LABEL_SUGGESTIONS.BACKYARD",e.FRONT_YARD="WORKSHOP.LABEL_SUGGESTIONS.FRONT_YARD",e.HALLWAY="WORKSHOP.LABEL_SUGGESTIONS.HALLWAY",e.LAUNDRY="WORKSHOP.LABEL_SUGGESTIONS.LAUNDRY",e.PANTRY="WORKSHOP.LABEL_SUGGESTIONS.PANTRY",e.CLOSET="WORKSHOP.LABEL_SUGGESTIONS.CLOSET",e.GARAGE="WORKSHOP.LABEL_SUGGESTIONS.GARAGE",e.DRIVEWAY="WORKSHOP.LABEL_SUGGESTIONS.DRIVEWAY",e.BASEMENT="WORKSHOP.LABEL_SUGGESTIONS.BASEMENT",e.FACADE="WORKSHOP.LABEL_SUGGESTIONS.FACADE",e.GARDEN="WORKSHOP.LABEL_SUGGESTIONS.GARDEN",e.LOBBY="WORKSHOP.LABEL_SUGGESTIONS.LOBBY",e.OFFICE="WORKSHOP.LABEL_SUGGESTIONS.OFFICE",e.POOL="WORKSHOP.LABEL_SUGGESTIONS.POOL",e.UNFURNISHED="WORKSHOP.LABEL_SUGGESTIONS.UNFURNISHED",e.STAIRWAY="WORKSHOP.LABEL_SUGGESTIONS.STAIRWAY",e.ELEVATOR="WORKSHOP.LABEL_SUGGESTIONS.ELEVATOR",e.ESCALATOR="WORKSHOP.LABEL_SUGGESTIONS.ESCALATOR",e.STUDY="WORKSHOP.LABEL_SUGGESTIONS.STUDY",e.SPA="WORKSHOP.LABEL_SUGGESTIONS.SPA",e.RECEPTION="WORKSHOP.LABEL_SUGGESTIONS.RECEPTION",e.MEETING_ROOM="WORKSHOP.LABEL_SUGGESTIONS.MEETING_ROOM",e.STORAGE="WORKSHOP.LABEL_SUGGESTIONS.STORAGE",e.BREAK_ROOM="WORKSHOP.LABEL_SUGGESTIONS.BREAK_ROOM",e.LUNCH_ROOM="WORKSHOP.LABEL_SUGGESTIONS.LUNCH_ROOM",e.CONFERENCE_ROOM="WORKSHOP.LABEL_SUGGESTIONS.CONFERENCE_ROOM"}(c=e.LABEL_SUGGESTIONS||(e.LABEL_SUGGESTIONS={})),function(e){e.ADD_VIEW_MODAL_TITLE="WORKSHOP.LAYERS.ADD_VIEW_MODAL_TITLE",e.EDIT_VIEW_MODAL_TITLE="WORKSHOP.LAYERS.EDIT_VIEW_MODAL_TITLE",e.DUPLICATE_VIEW_MODAL_TITLE="WORKSHOP.LAYERS.DUPLICATE_VIEW_MODAL_TITLE",e.NEW_VIEW_NAME_PLACEHOLDER="WORKSHOP.LAYERS.NEW_VIEW_NAME_PLACEHOLDER",e.VIEW_DUPLICATE_NAME_SUFFIX="WORKSHOP.LAYERS.VIEW_DUPLICATE_NAME_SUFFIX",e.ADD_VIEW_ITEM="WORKSHOP.LAYERS.ADD_VIEW_ITEM",e.DELETE_VIEW_ITEM="WORKSHOP.LAYERS.DELETE_VIEW_ITEM",e.DELETE_VIEW_MODAL_TITLE="WORKSHOP.LAYERS.DELETE_VIEW_MODAL_TITLE",e.DELETE_VIEW_MODAL_MESSAGE="WORKSHOP.LAYERS.DELETE_VIEW_MODAL_MESSAGE",e.APPLY_TO_ALL_VIEWS_BLURS="WORKSHOP.LAYERS.APPLY_TO_ALL_VIEWS_BLURS",e.APPLY_TO_ALL_VIEWS_SCANS_3D="WORKSHOP.LAYERS.APPLY_TO_ALL_VIEWS_SCANS_3D",e.APPLY_TO_ALL_VIEWS_VIEW_360="WORKSHOP.LAYERS.APPLY_TO_ALL_VIEWS_VIEW_360",e.APPLY_TO_ALL_VIEWS_TRIM="WORKSHOP.LAYERS.APPLY_TO_ALL_VIEWS_TRIM",e.VIEW_PLACEHOLDER="WORKSHOP.LAYERS.VIEW_PLACEHOLDER",e.SHARED_ENABLED_VIEWS="WORKSHOP.LAYERS.SHARED_ENABLED_VIEWS",e.SHARE_THIS_VIEW="WORKSHOP.LAYERS.SHARE_THIS_VIEW",e.VIEWS_HELP="WORKSHOP.LAYERS.VIEWS_HELP",e.VIEW_RENAME="WORKSHOP.LAYERS.VIEW_RENAME",e.VIEW_DUPLICATE="WORKSHOP.LAYERS.VIEW_DUPLICATE",e.VIEW_ENABLED_MESSAGE="WORKSHOP.LAYERS.VIEW_ENABLED_MESSAGE",e.VIEW_DISABLED_MESSAGE="WORKSHOP.LAYERS.VIEW_DISABLED_MESSAGE",e.VIEW_PREVIEW="WORKSHOP.LAYERS.VIEW_PREVIEW",e.VIEW_PREVIEW_NARROW="WORKSHOP.LAYERS.VIEW_PREVIEW_NARROW",e.DEFAULT_VIEW_NAME="WORKSHOP.LAYERS.DEFAULT_VIEW_NAME",e.SWITCH_TO_VIEWS_TITLE="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_TITLE",e.SWITCH_TO_VIEWS_LIST_HEADER="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_LIST_HEADER",e.SWITCH_TO_VIEWS_LIST_ITEM_1="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_LIST_ITEM_1",e.SWITCH_TO_VIEWS_LIST_ITEM_2="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_LIST_ITEM_2",e.SWITCH_TO_VIEWS_LIST_ITEM_3="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_LIST_ITEM_3",e.SWITCH_TO_VIEWS_LIST_ITEM_4="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_LIST_ITEM_4",e.SWITCH_TO_VIEWS_SUMMARY="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_SUMMARY",e.SWITCH_TO_VIEWS_MUST_PUBLISH="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_MUST_PUBLISH",e.SWITCH_TO_VIEWS_LEARN_MORE="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_LEARN_MORE",e.SWITCH_TO_VIEWS_SKIP="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_SKIP",e.SWITCH_TO_VIEWS_USE="WORKSHOP.LAYERS.SWITCH_TO_VIEWS_USE",e.VIEWS_INTEREST_BANNER_MESSAGE="WORKSHOP.LAYERS.VIEWS_INTEREST_BANNER_MESSAGE"}(d=e.LAYERS||(e.LAYERS={})),function(e){e.ADD="WORKSHOP.MATTERTAGS.ADD",e.ADD_FILE="WORKSHOP.MATTERTAGS.ADD_FILE",e.ADD_MATTERTAG_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.ADD_MATTERTAG_TOOLTIP_MESSAGE",e.ATTACHMENTS_LABEL="WORKSHOP.MATTERTAGS.ATTACHMENTS_LABEL",e.APPEARANCE_LABEL="WORKSHOP.MATTERTAGS.APPEARANCE_LABEL",e.BACK="WORKSHOP.MATTERTAGS.BACK",e.COLOR_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.COLOR_TOOLTIP_MESSAGE",e.DEFAULT_LIST_ITEM_TEXT="WORKSHOP.MATTERTAGS.DEFAULT_LIST_ITEM_TEXT",e.DEFAULT_TAG_TITLE="WORKSHOP.MATTERTAGS.DEFAULT_TAG_TITLE",e.DELETE_LIST_ITEM_OPTION_CTA="WORKSHOP.MATTERTAGS.DELETE_LIST_ITEM_OPTION_CTA",e.DELETE_MATTERTAGS_MODAL_MESSAGE="WORKSHOP.MATTERTAGS.DELETE_MATTERTAGS_MODAL_MESSAGE",e.DELETE_MATTERTAGS_MODAL_TITLE="WORKSHOP.MATTERTAGS.DELETE_MATTERTAGS_MODAL_TITLE",e.DELETE_TAGS_MODAL_MESSAGE="WORKSHOP.MATTERTAGS.DELETE_TAGS_MODAL_MESSAGE",e.DELETE_TAGS_MODAL_TITLE="WORKSHOP.MATTERTAGS.DELETE_TAGS_MODAL_TITLE",e.DESCRIPTION_PLACEHOLDER="WORKSHOP.MATTERTAGS.DESCRIPTION_PLACEHOLDER",e.DISCARD_MATTERTAG_MODAL_MESSAGE="WORKSHOP.MATTERTAGS.DISCARD_MATTERTAG_MODAL_MESSAGE",e.DISCARD_MATTERTAG_MODAL_TITLE="WORKSHOP.MATTERTAGS.DISCARD_MATTERTAG_MODAL_TITLE",e.DROP_FILES_MESSAGE="WORKSHOP.MATTERTAGS.DROP_FILES_MESSAGE",e.EDIT_BILLBOARD_CANCEL_CTA="WORKSHOP.MATTERTAGS.EDIT_BILLBOARD_CANCEL_CTA",e.EDIT_BILLBOARD_DONE_CTA="WORKSHOP.MATTERTAGS.EDIT_BILLBOARD_DONE_CTA",e.EDIT_LIST_ITEM_OPTION_CTA="WORKSHOP.MATTERTAGS.EDIT_LIST_ITEM_OPTION_CTA",e.HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.HIDE_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.HIDE_TOOLTIP_MESSAGE",e.KEYWORDS_LABEL="WORKSHOP.MATTERTAGS.KEYWORDS_LABEL",e.LINK_DISABLED_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.LINK_DISABLED_TOOLTIP_MESSAGE",e.LINK_EDITOR_APPLY_CTA="WORKSHOP.MATTERTAGS.LINK_EDITOR_APPLY_CTA",e.LINK_EDITOR_INVALID_TIP="WORKSHOP.MATTERTAGS.LINK_EDITOR_INVALID_TIP",e.LINK_EDITOR_LINK_ADD_LABEL="WORKSHOP.MATTERTAGS.LINK_EDITOR_LINK_ADD_LABEL",e.LINK_EDITOR_LINK_EDIT_LABEL="WORKSHOP.MATTERTAGS.LINK_EDITOR_LINK_EDIT_LABEL",e.LINK_EDITOR_MAX_LENGTH_TIP="WORKSHOP.MATTERTAGS.LINK_EDITOR_MAX_LENGTH_TIP",e.LINK_EDITOR_PREVIEW_TIP="WORKSHOP.MATTERTAGS.LINK_EDITOR_PREVIEW_TIP",e.LINK_EDITOR_REMOVE_TIP="WORKSHOP.MATTERTAGS.LINK_EDITOR_REMOVE_TIP",e.LINK_EDITOR_TEXT_LABEL="WORKSHOP.MATTERTAGS.LINK_EDITOR_TEXT_LABEL",e.LINK_EDITOR_TEXT_PLACEHOLDER="WORKSHOP.MATTERTAGS.LINK_EDITOR_TEXT_PLACEHOLDER",e.LINK_EDITOR_TIP_TEXT="WORKSHOP.MATTERTAGS.LINK_EDITOR_TIP_TEXT",e.LINK_EDITOR_URL_LABEL="WORKSHOP.MATTERTAGS.LINK_EDITOR_URL_LABEL",e.LINK_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.LINK_TOOLTIP_MESSAGE",e.LIST_BY_FLOOR_ALPHABETICAL_LABEL="WORKSHOP.MATTERTAGS.LIST_BY_FLOOR_ALPHABETICAL_LABEL",e.LIST_BY_FLOOR_ORDERED_LABEL="WORKSHOP.MATTERTAGS.LIST_BY_FLOOR_ORDERED_LABEL",e.LIST_IN_TAG_ORDER_LABEL="WORKSHOP.MATTERTAGS.LIST_IN_TAG_ORDER_LABEL",e.MAX_ATTACHMENTS_MESSAGE="WORKSHOP.MATTERTAGS.MAX_ATTACHMENTS_MESSAGE",e.MEDIA_LINK_APPLY_CTA="WORKSHOP.MATTERTAGS.MEDIA_LINK_APPLY_CTA",e.MEDIA_LINK_ERROR_MESSAGE="WORKSHOP.MATTERTAGS.MEDIA_LINK_ERROR_MESSAGE",e.MEDIA_LINK_HELP_LINK="WORKSHOP.MATTERTAGS.MEDIA_LINK_HELP_LINK",e.MEDIA_LINK_INVALID_URL_MESSAGE="WORKSHOP.MATTERTAGS.MEDIA_LINK_INVALID_URL_MESSAGE",e.MEDIA_LINK_LABEL="WORKSHOP.MATTERTAGS.MEDIA_LINK_LABEL",e.MEDIA_LINK_LOADING_MESSAGE="WORKSHOP.MATTERTAGS.MEDIA_LINK_LOADING_MESSAGE",e.MEDIA_LINK_SUPPORTED_FORMATS_LINK="WORKSHOP.MATTERTAGS.MEDIA_LINK_SUPPORTED_FORMATS_LINK",e.MEDIA_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.MEDIA_TOOLTIP_MESSAGE",e.MOBILE_OVERLAY_MESSAGE="WORKSHOP.MATTERTAGS.MOBILE_OVERLAY_MESSAGE",e.MOBILE_REORDER_MODAL_MESSAGE="WORKSHOP.MATTERTAGS.MOBILE_REORDER_MODAL_MESSAGE",e.MOBILE_REORDER_MODAL_TITLE="WORKSHOP.MATTERTAGS.MOBILE_REORDER_MODAL_TITLE",e.MULTI_FLOOR_EMPTY_MESSAGE="WORKSHOP.MATTERTAGS.MULTI_FLOOR_EMPTY_MESSAGE",e.NUM_TYPE="WORKSHOP.MATTERTAGS.NUM_TYPE",e.SAVE="WORKSHOP.MATTERTAGS.SAVE",e.SAVE_PROCESSING="WORKSHOP.MATTERTAGS.SAVE_PROCESSING",e.SAVE_INVALID="WORKSHOP.MATTERTAGS.SAVE_INVALID",e.SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.SHOW_STEM_LABEL="WORKSHOP.MATTERTAGS.SHOW_STEM_LABEL",e.SHOW_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.SHOW_TOOLTIP_MESSAGE",e.SINGLE_FLOOR_EMPTY_MESSAGE="WORKSHOP.MATTERTAGS.SINGLE_FLOOR_EMPTY_MESSAGE",e.STEM_SLIDER_RESET_CTA="WORKSHOP.MATTERTAGS.STEM_SLIDER_RESET_CTA",e.STEM_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.STEM_TOOLTIP_MESSAGE",e.SUPPORTED_FORMATS_MESSAGE="WORKSHOP.MATTERTAGS.SUPPORTED_FORMATS_MESSAGE",e.TAG_NUM_TYPE="WORKSHOP.MATTERTAGS.TAG_NUM_TYPE",e.TAG_REORDER_ENTER_LABEL="WORKSHOP.MATTERTAGS.TAG_REORDER_ENTER_LABEL",e.TAG_REORDER_EXIT_LABEL="WORKSHOP.MATTERTAGS.TAG_REORDER_EXIT_LABEL",e.TAG_RESET_ORDER="WORKSHOP.MATTERTAGS.TAG_RESET_ORDER",e.TAG_TYPE="WORKSHOP.MATTERTAGS.TAG_TYPE",e.TAGS_EMPTY_MULTI_FLOOR_MESSAGE="WORKSHOP.MATTERTAGS.TAGS_EMPTY_MULTI_FLOOR_MESSAGE",e.TAGS_EMPTY_SINGLE_FLOOR_MESSAGE="WORKSHOP.MATTERTAGS.TAGS_EMPTY_SINGLE_FLOOR_MESSAGE",e.TAGS_HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.TAGS_HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.TAGS_ORDERED_BY_CUSTOM_LABEL="WORKSHOP.MATTERTAGS.TAGS_ORDERED_BY_CUSTOM_LABEL",e.TAGS_ORDERED_BY_LOCATION_LABEL="WORKSHOP.MATTERTAGS.TAGS_ORDERED_BY_LOCATION_LABEL",e.TAGS_RESET_MODAL_BODY="WORKSHOP.MATTERTAGS.TAGS_RESET_MODAL_BODY",e.TAGS_RESET_MODAL_TITLE="WORKSHOP.MATTERTAGS.TAGS_RESET_MODAL_TITLE",e.TAGS_SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.MATTERTAGS.TAGS_SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.TITLE_DESC_LABEL="WORKSHOP.MATTERTAGS.TITLE_DESC_LABEL",e.TITLE_PLACEHOLDER="WORKSHOP.MATTERTAGS.TITLE_PLACEHOLDER",e.TYPE="WORKSHOP.MATTERTAGS.TYPE",e.UPLOAD_FILE="WORKSHOP.MATTERTAGS.UPLOAD_FILE",e.UPLOAD_IN_PROGRESS="WORKSHOP.MATTERTAGS.UPLOAD_IN_PROGRESS"}(u=e.MATTERTAGS||(e.MATTERTAGS={})),function(e){e.TYPE="WORKSHOP.MEASUREMENTS.TYPE",e.NUM_TYPE="WORKSHOP.MEASUREMENTS.NUM_TYPE",e.HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.MEASUREMENTS.HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.MEASUREMENTS.SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.OTHER_GROUP_LABEL="WORKSHOP.MEASUREMENTS.OTHER_GROUP_LABEL",e.RENAME_LIST_ITEM_OPTION_CTA="WORKSHOP.MEASUREMENTS.RENAME_LIST_ITEM_OPTION_CTA",e.DELETE_LIST_ITEM_OPTION_CTA="WORKSHOP.MEASUREMENTS.DELETE_LIST_ITEM_OPTION_CTA",e.LIST_ITEM_INPUT_PLACEHOLDER="WORKSHOP.MEASUREMENTS.LIST_ITEM_INPUT_PLACEHOLDER",e.MULTI_FLOOR_EMPTY_MESSAGE="WORKSHOP.MEASUREMENTS.MULTI_FLOOR_EMPTY_MESSAGE",e.SINGLE_FLOOR_EMPTY_MESSAGE="WORKSHOP.MEASUREMENTS.SINGLE_FLOOR_EMPTY_MESSAGE"}(h=e.MEASUREMENTS||(e.MEASUREMENTS={})),function(e){e.ERROR_TITLE="WORKSHOP.MODAL.ERROR_TITLE",e.SAVING_ERROR_TITLE="WORKSHOP.MODAL.SAVING_ERROR_TITLE",e.SAVING_ERROR_MESSAGE="WORKSHOP.MODAL.SAVING_ERROR_MESSAGE",e.NO="WORKSHOP.MODAL.NO",e.YES="WORKSHOP.MODAL.YES",e.CANCEL="WORKSHOP.MODAL.CANCEL",e.OK="WORKSHOP.MODAL.OK",e.DISCARD="WORKSHOP.MODAL.DISCARD",e.SAVE="WORKSHOP.MODAL.SAVE"}(p=e.MODAL||(e.MODAL={})),function(e){e.HAPPINESS_TITLE="WORKSHOP.MODEL_RATING.HAPPINESS_TITLE",e.HAPPINESS_BODY="WORKSHOP.MODEL_RATING.HAPPINESS_BODY",e.QUALITY_ISSUES_TITLE="WORKSHOP.MODEL_RATING.QUALITY_ISSUES_TITLE",e.QUALITY_ISSUES_LIGHTING="WORKSHOP.MODEL_RATING.QUALITY_ISSUES_LIGHTING",e.QUALITY_ISSUES_3D_MESH="WORKSHOP.MODEL_RATING.QUALITY_ISSUES_3D_MESH",e.QUALITY_ISSUES_COLORING="WORKSHOP.MODEL_RATING.QUALITY_ISSUES_COLORING",e.QUALITY_ISSUES_IMAGE_QUALITY="WORKSHOP.MODEL_RATING.QUALITY_ISSUES_IMAGE_QUALITY",e.NAVIGATION_ISSUES_TITLE="WORKSHOP.MODEL_RATING.NAVIGATION_ISSUES_TITLE",e.NAVIGATION_ISSUES_BLOCKED_DOORWAYS="WORKSHOP.MODEL_RATING.NAVIGATION_ISSUES_BLOCKED_DOORWAYS",e.NAVIGATION_ISSUES_OBSTRUCTIONS="WORKSHOP.MODEL_RATING.NAVIGATION_ISSUES_OBSTRUCTIONS",e.NAVIGATION_ISSUES_MISALIGNED_SCANS="WORKSHOP.MODEL_RATING.NAVIGATION_ISSUES_MISALIGNED_SCANS",e.NAVIGATION_ISSUES_FLOOR_SEPARATION="WORKSHOP.MODEL_RATING.NAVIGATION_ISSUES_FLOOR_SEPARATION",e.NAVIGATION_ISSUES_DISAPPEARING_FLOORS="WORKSHOP.MODEL_RATING.NAVIGATION_ISSUES_DISAPPEARING_FLOORS",e.FEEDBACK_TITLE="WORKSHOP.MODEL_RATING.FEEDBACK_TITLE",e.FEEDBACK_LABEL="WORKSHOP.MODEL_RATING.FEEDBACK_LABEL",e.THANK_YOU_HEADING="WORKSHOP.MODEL_RATING.THANK_YOU_HEADING",e.THANK_YOU_BODY="WORKSHOP.MODEL_RATING.THANK_YOU_BODY",e.THANK_YOU_CTA="WORKSHOP.MODEL_RATING.THANK_YOU_CTA",e.THANK_YOU_CTA_LINK_TEXT="WORKSHOP.MODEL_RATING.THANK_YOU_CTA_LINK_TEXT",e.SAVE="WORKSHOP.MODEL_RATING.SAVE",e.NEXT="WORKSHOP.MODEL_RATING.NEXT",e.PROGRESS="WORKSHOP.MODEL_RATING.PROGRESS"}(m=e.MODEL_RATING||(e.MODEL_RATING={})),function(e){e.SEARCH_GROUP_HEADER="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_GROUP_HEADER",e.SEARCH_GROUP_HIDE_ALL="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_GROUP_HIDE_ALL",e.SEARCH_GROUP_SHOW_ALL="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_GROUP_SHOW_ALL",e.SEARCH_GROUP_DELETE_ALL="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_GROUP_DELETE_ALL",e.SEARCH_ITEM_HIDE_TOOLTIP="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_ITEM_HIDE_TOOLTIP",e.SEARCH_ITEM_SHOW_TOOLTIP="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_ITEM_SHOW_TOOLTIP",e.SEARCH_ITEM_EDIT="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_ITEM_EDIT",e.SEARCH_ITEM_DELETE="WORKSHOP.OBJECT_TAG_SUGGESTION.SEARCH_ITEM_DELETE",e.SHOW_ONLY_IN_SEARCH="WORKSHOP.OBJECT_TAG_SUGGESTION.SHOW_ONLY_IN_SEARCH"}(g=e.OBJECT_TAG_SUGGESTION||(e.OBJECT_TAG_SUGGESTION={})),function(e){e.TYPE="WORKSHOP.PHOTOS.TYPE",e.NUM_TYPE="WORKSHOP.PHOTOS.NUM_TYPE",e.ADD_PHOTOS_CTA="WORKSHOP.PHOTOS.ADD_PHOTOS_CTA",e.ADDING_PHOTOS_CTA="WORKSHOP.PHOTOS.ADDING_PHOTOS_CTA",e.MODAL_TITLE="WORKSHOP.PHOTOS.MODAL_TITLE",e.NUM_SELECTED="WORKSHOP.PHOTOS.NUM_SELECTED",e.SELECT_ALL_CTA="WORKSHOP.PHOTOS.SELECT_ALL_CTA",e.UNSELECT_ALL_CTA="WORKSHOP.PHOTOS.UNSELECT_ALL_CTA",e.SAVING_TOAST_MESSAGE="WORKSHOP.PHOTOS.SAVING_TOAST_MESSAGE",e.SAVED_TOAST_MESSAGE="WORKSHOP.PHOTOS.SAVED_TOAST_MESSAGE",e.SAVED_TOAST_CTA="WORKSHOP.PHOTOS.SAVED_TOAST_CTA",e.ERROR_MODAL_TITLE="WORKSHOP.PHOTOS.ERROR_MODAL_TITLE",e.ERROR_MODAL_MESSAGE="WORKSHOP.PHOTOS.ERROR_MODAL_MESSAGE",e.CAMERA_PITCH_RESET_MESSAGE="WORKSHOP.PHOTOS.CAMERA_PITCH_RESET_MESSAGE",e.ZOOM_RESET_MESSAGE="WORKSHOP.PHOTOS.ZOOM_RESET_MESSAGE",e.ZOOM_IN_MESSAGE="WORKSHOP.PHOTOS.ZOOM_IN_MESSAGE",e.ZOOM_OUT_MESSAGE="WORKSHOP.PHOTOS.ZOOM_OUT_MESSAGE",e.CANNOT_SAVE_TOOLTIP_MESSAGE="WORKSHOP.PHOTOS.CANNOT_SAVE_TOOLTIP_MESSAGE",e.CANNOT_SAVE_SCAN_NUMBER_TOOLTIP_MESSAGE="WORKSHOP.PHOTOS.CANNOT_SAVE_SCAN_NUMBER_TOOLTIP_MESSAGE",e.CANNOT_SAVE_TOOLTIP_TITLE="WORKSHOP.PHOTOS.CANNOT_SAVE_TOOLTIP_TITLE",e.CANNOT_SAVE_TOOLTIP_CTA="WORKSHOP.PHOTOS.CANNOT_SAVE_TOOLTIP_CTA",e.CAN_TAKE_2D_PHOTO_TOOLTIP_MESSAGE="WORKSHOP.PHOTOS.CAN_TAKE_2D_PHOTO_TOOLTIP_MESSAGE",e.CAN_TAKE_360_PHOTO_TOOLTIP_MESSAGE="WORKSHOP.PHOTOS.CAN_TAKE_360_PHOTO_TOOLTIP_MESSAGE",e.CANNOT_TAKE_360_PHOTO_TOOLTIP_MESSAGE="WORKSHOP.PHOTOS.CANNOT_TAKE_360_PHOTO_TOOLTIP_MESSAGE",e.PANO_CTA="WORKSHOP.PHOTOS.PANO_CTA",e.SETTINGS_TOOLTIP_MESSAGE="WORKSHOP.PHOTOS.SETTINGS_TOOLTIP_MESSAGE",e.ASSETS_SETTING_LABEL="WORKSHOP.PHOTOS.ASSETS_SETTING_LABEL",e.SHOW_GRID_SETTING_LABEL="WORKSHOP.PHOTOS.SHOW_GRID_SETTING_LABEL",e.SNAPSHOT_ERROR_TOAST_MESSAGE="WORKSHOP.PHOTOS.SNAPSHOT_ERROR_TOAST_MESSAGE",e.SNAPSHOT_ERROR_TOAST_CTA="WORKSHOP.PHOTOS.SNAPSHOT_ERROR_TOAST_CTA"}(f=e.PHOTOS||(e.PHOTOS={})),function(e){e.COLOR_STEM_EDITOR_TITLE="WORKSHOP.PINS.COLOR_STEM_EDITOR_TITLE"}(v=e.PINS||(e.PINS={})),function(e){e.TYPE="WORKSHOP.SCANS.TYPE",e.NUM_TYPE="WORKSHOP.SCANS.NUM_TYPE",e.BATCH_SHOW_CTA="WORKSHOP.SCANS.BATCH_SHOW_CTA",e.BATCH_HIDE_CTA="WORKSHOP.SCANS.BATCH_HIDE_CTA",e.HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.SCANS.HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.SCANS.SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.LIST_ITEM_TEXT="WORKSHOP.SCANS.LIST_ITEM_TEXT",e.FLOOR_EMPTY_MESSAGE="WORKSHOP.SCANS.FLOOR_EMPTY_MESSAGE",e.NO_HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.SCANS.NO_HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.HLR_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.SCANS.HLR_LIST_ITEM_TOOLTIP_MESSAGE",e.START_LOCATION_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.SCANS.START_LOCATION_LIST_ITEM_TOOLTIP_MESSAGE",e.OVERLAY_HIDE_CTA="WORKSHOP.SCANS.OVERLAY_HIDE_CTA",e.OVERLAY_SHOW_CTA="WORKSHOP.SCANS.OVERLAY_SHOW_CTA",e.OVERLAY_HIDE_SCAN_CTA="WORKSHOP.SCANS.OVERLAY_HIDE_SCAN_CTA",e.OVERLAY_SHOW_SCAN_CTA="WORKSHOP.SCANS.OVERLAY_SHOW_SCAN_CTA",e.OVERLAY_PANORAMA_INFO="WORKSHOP.SCANS.OVERLAY_PANORAMA_INFO",e.OVERLAY_INFO="WORKSHOP.SCANS.OVERLAY_INFO",e.START_LOCATION_TOOLTIP_TITLE="WORKSHOP.SCANS.START_LOCATION_TOOLTIP_TITLE",e.START_LOCATION_TOOLTIP_MESSAGE="WORKSHOP.SCANS.START_LOCATION_TOOLTIP_MESSAGE",e.START_LOCATION_TOOLTIP_CTA="WORKSHOP.SCANS.START_LOCATION_TOOLTIP_CTA",e.REMOVE_HLR_MODAL_TITLE="WORKSHOP.SCANS.REMOVE_HLR_MODAL_TITLE",e.REMOVE_HLR_MODAL_MESSAGE="WORKSHOP.SCANS.REMOVE_HLR_MODAL_MESSAGE",e.REMOVE_HLR_MODAL_BATCH_MESSAGE="WORKSHOP.SCANS.REMOVE_HLR_MODAL_BATCH_MESSAGE",e.REMOVE_HLR_MODAL_WARNING="WORKSHOP.SCANS.REMOVE_HLR_MODAL_WARNING",e.REMOVE_SCANS_FROM_HLR_MODAL_TITLE="WORKSHOP.SCANS.REMOVE_SCANS_FROM_HLR_MODAL_TITLE",e.REMOVE_SCAN_FROM_HLR_MODAL_MESSAGE="WORKSHOP.SCANS.REMOVE_SCAN_FROM_HLR_MODAL_MESSAGE",e.REMOVE_BATCH_FROM_HLR_MODAL_SCANS_MESSAGE="WORKSHOP.SCANS.REMOVE_BATCH_FROM_HLR_MODAL_SCANS_MESSAGE",e.REMOVE_BATCH_FROM_HLR_MODAL_HIGHLIGHTS_MESSAGE="WORKSHOP.SCANS.REMOVE_BATCH_FROM_HLR_MODAL_HIGHLIGHTS_MESSAGE"}(b=e.SCANS||(e.SCANS={})),function(e){e.ADVANCED_SPACE_SEARCH_LABEL="WORKSHOP.SETTINGS.ADVANCED_SPACE_SEARCH_LABEL",e.ADVANCED_SPACE_SEARCH_MESSAGE="WORKSHOP.SETTINGS.ADVANCED_SPACE_SEARCH_MESSAGE",e.ADVANCED_DOLLHOUSE_LABEL="WORKSHOP.SETTINGS.ADVANCED_DOLLHOUSE_LABEL",e.ADVANCED_DOLLHOUSE_MESSAGE="WORKSHOP.SETTINGS.ADVANCED_DOLLHOUSE_MESSAGE",e.ADVANCED_FLOORPLAN_LABEL="WORKSHOP.SETTINGS.ADVANCED_FLOORPLAN_LABEL",e.ADVANCED_FLOORPLAN_MESSAGE="WORKSHOP.SETTINGS.ADVANCED_FLOORPLAN_MESSAGE",e.ADVANCED_FLOOR_SELECTION_LABEL="WORKSHOP.SETTINGS.ADVANCED_FLOOR_SELECTION_LABEL",e.ADVANCED_FLOOR_SELECTION_MESSAGE="WORKSHOP.SETTINGS.ADVANCED_FLOOR_SELECTION_MESSAGE",e.ADVANCED_HEADER="WORKSHOP.SETTINGS.ADVANCED_HEADER",e.ADVANCED_MEASUREMENT_MODE_LABEL="WORKSHOP.SETTINGS.ADVANCED_MEASUREMENT_MODE_LABEL",e.ADVANCED_MEASUREMENT_MODE_MENU_LABEL="WORKSHOP.SETTINGS.ADVANCED_MEASUREMENT_MODE_MENU_LABEL",e.ADVANCED_MEASUREMENT_MODE_MESSAGE="WORKSHOP.SETTINGS.ADVANCED_MEASUREMENT_MODE_MESSAGE",e.ADVANCED_ROOM_LABELS_LABEL="WORKSHOP.SETTINGS.ADVANCED_ROOM_LABELS_LABEL",e.ADVANCED_ROOM_LABELS_MESSAGE="WORKSHOP.SETTINGS.ADVANCED_ROOM_LABELS_MESSAGE",e.ADVANCED_ROOM_LABELS_MENU_LABEL="WORKSHOP.SETTINGS.ADVANCED_ROOM_LABELS_MENU_LABEL",e.HIDE_LABELS_IN_DOLLHOUSE_OPTION="WORKSHOP.SETTINGS.HIDE_LABELS_IN_DOLLHOUSE_OPTION",e.HIDE_SAVED_MEASUREMENTS_OPTION="WORKSHOP.SETTINGS.HIDE_SAVED_MEASUREMENTS_OPTION",e.HLR_OPTION_LABEL="WORKSHOP.SETTINGS.HLR_OPTION_LABEL",e.HLR_OPTION_MESSAGE="WORKSHOP.SETTINGS.HLR_OPTION_MESSAGE",e.NAV_OPTION_ADVANCED="WORKSHOP.SETTINGS.NAV_OPTION_ADVANCED",e.NAV_OPTION_PRESENTATION="WORKSHOP.SETTINGS.NAV_OPTION_PRESENTATION",e.NAV_OPTION_TOUR_HLR="WORKSHOP.SETTINGS.NAV_OPTION_TOUR_HLR",e.NAV_OPTION_UNITS="WORKSHOP.SETTINGS.NAV_OPTION_UNITS",e.SHOW_SAVED_MEASUREMENTS_OPTION="WORKSHOP.SETTINGS.SHOW_SAVED_MEASUREMENTS_OPTION",e.SHOW_LABELS_IN_DOLLHOUSE_OPTION="WORKSHOP.SETTINGS.SHOW_LABELS_IN_DOLLHOUSE_OPTION",e.PRESENTATION_BACKGROUND_BLACK_LABEL="WORKSHOP.SETTINGS.PRESENTATION_BACKGROUND_BLACK_LABEL",e.PRESENTATION_BACKGROUND_GREY_LABEL="WORKSHOP.SETTINGS.PRESENTATION_BACKGROUND_GREY_LABEL",e.PRESENTATION_BACKGROUND_HEADER="WORKSHOP.SETTINGS.PRESENTATION_BACKGROUND_HEADER",e.PRESENTATION_BACKGROUND_SUBHEADER="WORKSHOP.SETTINGS.PRESENTATION_BACKGROUND_SUBHEADER",e.PRESENTATION_BACKGROUND_WHITE_LABEL="WORKSHOP.SETTINGS.PRESENTATION_BACKGROUND_WHITE_LABEL",e.PRESENTATION_HEADER="WORKSHOP.SETTINGS.PRESENTATION_HEADER",e.PRESENTATION_INFORMATION_EVERYTHING_LABEL="WORKSHOP.SETTINGS.PRESENTATION_INFORMATION_EVERYTHING_LABEL",e.PRESENTATION_INFORMATION_EVERYTHING_MESSAGE="WORKSHOP.SETTINGS.PRESENTATION_INFORMATION_EVERYTHING_MESSAGE",e.PRESENTATION_INFORMATION_COMPACT_LABEL="WORKSHOP.SETTINGS.PRESENTATION_INFORMATION_COMPACT_LABEL",e.PRESENTATION_INFORMATION_COMPACT_MESSAGE="WORKSHOP.SETTINGS.PRESENTATION_INFORMATION_COMPACT_MESSAGE",e.PRESENTATION_INFORMATION_HEADER="WORKSHOP.SETTINGS.PRESENTATION_INFORMATION_HEADER",e.PRESENTATION_INFORMATION_NONE_LABEL="WORKSHOP.SETTINGS.PRESENTATION_INFORMATION_NONE_LABEL",e.TOUR_AND_HLR_HEADER="WORKSHOP.SETTINGS.TOUR_AND_HLR_HEADER",e.TOUR_DEFAULT_SETTING_LOCATION="WORKSHOP.SETTINGS.TOUR_DEFAULT_SETTING_LOCATION",e.TOUR_MODE_LEGACY_LABEL="WORKSHOP.SETTINGS.TOUR_MODE_LEGACY_LABEL",e.TOUR_MODE_LEGACY_MESSAGE="WORKSHOP.SETTINGS.TOUR_MODE_LEGACY_MESSAGE",e.TOUR_MODE_NONE_LABEL="WORKSHOP.SETTINGS.TOUR_MODE_NONE_LABEL",e.TOUR_MODE_STORY_LABEL="WORKSHOP.SETTINGS.TOUR_MODE_STORY_LABEL",e.TOUR_MODE_STORY_MESSAGE="WORKSHOP.SETTINGS.TOUR_MODE_STORY_MESSAGE",e.TOUR_OPTION_LABEL="WORKSHOP.SETTINGS.TOUR_OPTION_LABEL",e.TOUR_OPTION_MESSAGE="WORKSHOP.SETTINGS.TOUR_OPTION_MESSAGE",e.UNITS_HEADER="WORKSHOP.SETTINGS.UNITS_HEADER",e.UNITS_IMPERIAL_CTA="WORKSHOP.SETTINGS.UNITS_IMPERIAL_CTA",e.UNITS_METRIC_CTA="WORKSHOP.SETTINGS.UNITS_METRIC_CTA",e.UNITS_SUBHEADER="WORKSHOP.SETTINGS.UNITS_SUBHEADER"}(y=e.SETTINGS||(e.SETTINGS={})),function(e){e.ENABLED_TOOLTIP_TITLE="WORKSHOP.START_LOCATION.ENABLED_TOOLTIP_TITLE",e.DISABLED_TOOLTIP_TITLE="WORKSHOP.START_LOCATION.DISABLED_TOOLTIP_TITLE",e.HIDDEN_SWEEP_MESSAGE="WORKSHOP.START_LOCATION.HIDDEN_SWEEP_MESSAGE",e.UNPLACED_360_MESSAGE="WORKSHOP.START_LOCATION.UNPLACED_360_MESSAGE",e.ENABLED_MESSAGE="WORKSHOP.START_LOCATION.ENABLED_MESSAGE",e.TOOLTIP_CTA="WORKSHOP.START_LOCATION.TOOLTIP_CTA",e.SET_NEW_LOCATION_CTA="WORKSHOP.START_LOCATION.SET_NEW_LOCATION_CTA",e.SETTING_NEW_LOCATION_CTA="WORKSHOP.START_LOCATION.SETTING_NEW_LOCATION_CTA",e.THUMBNAIL_PREVIEW_CTA="WORKSHOP.START_LOCATION.THUMBNAIL_PREVIEW_CTA",e.TAG_ORDER_RESET_TITLE="WORKSHOP.START_LOCATION.TAG_ORDER_RESET_TITLE",e.TAG_ORDER_RESET_MESSAGE="WORKSHOP.START_LOCATION.TAG_ORDER_RESET_MESSAGE",e.TAG_ORDER_RESET_CONFIRM="WORKSHOP.START_LOCATION.TAG_ORDER_RESET_CONFIRM",e.TAG_ORDER_RESET_CANCEL="WORKSHOP.START_LOCATION.TAG_ORDER_RESET_CANCEL"}(S=e.START_LOCATION||(e.START_LOCATION={})),function(e){e.NUM_TYPE="WORKSHOP.TRIM.NUM_TYPE",e.HIDE_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.TRIM.HIDE_LIST_ITEM_TOOLTIP_MESSAGE",e.SHOW_LIST_ITEM_TOOLTIP_MESSAGE="WORKSHOP.TRIM.SHOW_LIST_ITEM_TOOLTIP_MESSAGE",e.DELETE_LIST_ITEM_OPTION_CTA="WORKSHOP.TRIM.DELETE_LIST_ITEM_OPTION_CTA",e.RENAME_LIST_ITEM_OPTION_CTA="WORKSHOP.TRIM.RENAME_LIST_ITEM_OPTION_CTA",e.LIST_ITEM_INPUT_PLACEHOLDER="WORKSHOP.TRIM.LIST_ITEM_INPUT_PLACEHOLDER",e.DEFAULT_NAME="WORKSHOP.TRIM.DEFAULT_NAME",e.ALL_FLOORS="WORKSHOP.TRIM.ALL_FLOORS",e.EMPTY_FLOOR_MESSAGE="WORKSHOP.TRIM.EMPTY_FLOOR_MESSAGE",e.SIDE_POSE_CTA="WORKSHOP.TRIM.SIDE_POSE_CTA",e.TOP_POSE_CTA="WORKSHOP.TRIM.TOP_POSE_CTA",e.PERSPECTIVE_POSE_CTA="WORKSHOP.TRIM.PERSPECTIVE_POSE_CTA",e.SIDE_POSE_TOOLTIP="WORKSHOP.TRIM.SIDE_POSE_TOOLTIP",e.LEFT_SIDE_POSE_TOOLTIP="WORKSHOP.TRIM.LEFT_SIDE_POSE_TOOLTIP",e.RIGHT_SIDE_POSE_TOOLTIP="WORKSHOP.TRIM.RIGHT_SIDE_POSE_TOOLTIP",e.TOP_POSE_TOOLTIP="WORKSHOP.TRIM.TOP_POSE_TOOLTIP",e.PERSPECTIVE_POSE_TOOLTIP="WORKSHOP.TRIM.PERSPECTIVE_POSE_TOOLTIP",e.UNABLE_TO_SAVE_CHANGES_ERROR_MESSAGE="WORKSHOP.TRIM.UNABLE_TO_SAVE_CHANGES_ERROR_MESSAGE",e.ADD_INDIVIDUAL_FLOOR_TRIM_TOOLTIP="WORKSHOP.TRIM.ADD_INDIVIDUAL_FLOOR_TRIM_TOOLTIP",e.ADD_ALL_FLOORS_TRIM_TOOLTIP="WORKSHOP.TRIM.ADD_ALL_FLOORS_TRIM_TOOLTIP",e.MAX_INDIVIDUAL_FLOOR_TRIMS_TOOLTIP="WORKSHOP.TRIM.MAX_INDIVIDUAL_FLOOR_TRIMS_TOOLTIP",e.MAX_ALL_FLOORS_TRIMS_TOOLTIP="WORKSHOP.TRIM.MAX_ALL_FLOORS_TRIMS_TOOLTIP",e.MAX_TRIMS_ERROR_MESSAGE="WORKSHOP.TRIM.MAX_TRIMS_ERROR_MESSAGE",e.KEEP_TOGGLE="WORKSHOP.TRIM.KEEP_TOGGLE",e.REMOVE_TOGGLE="WORKSHOP.TRIM.REMOVE_TOGGLE",e.TOOL_ROTATION_CTA="WORKSHOP.TRIM.TOOL_ROTATION_CTA",e.TOOL_POSITION_CTA="WORKSHOP.TRIM.TOOL_POSITION_CTA",e.TOOL_SCALE_CTA="WORKSHOP.TRIM.TOOL_SCALE_CTA",e.TOOL_ROTATION_TOOLTIP="WORKSHOP.TRIM.TOOL_ROTATION_TOOLTIP",e.TOOL_POSITION_TOOLTIP="WORKSHOP.TRIM.TOOL_POSITION_TOOLTIP",e.TOOL_SCALE_TOOLTIP="WORKSHOP.TRIM.TOOL_SCALE_TOOLTIP",e.DELETE_TRIM="WORKSHOP.TRIM.DELETE_TRIM",e.COMPLETE_TRIM="WORKSHOP.TRIM.COMPLETE_TRIM",e.ADD_TRIM="WORKSHOP.TRIM.ADD_TRIM",e.RESET_ROTATION="WORKSHOP.TRIM.RESET_ROTATION",e.HIDE_PANO_LIST_ITEM_TOOLTIP="WORKSHOP.TRIM.HIDE_PANO_LIST_ITEM_TOOLTIP",e.SHOW_PANO_LIST_ITEM_TOOLTIP="WORKSHOP.TRIM.SHOW_PANO_LIST_ITEM_TOOLTIP",e.MOVE_TRIM_ALL_FLOORS="WORKSHOP.TRIM.MOVE_TRIM_ALL_FLOORS"}(E=e.TRIM||(e.TRIM={})),function(e){e.NUM_TYPE="WORKSHOP.VIEWS_360.NUM_TYPE",e.START_LOCATION_REMOVAL_MESSAGE="WORKSHOP.VIEWS_360.START_LOCATION_REMOVAL_MESSAGE",e.START_LOCATION_MARKER_MESSAGE="WORKSHOP.VIEWS_360.START_LOCATION_MARKER_MESSAGE",e.DEFAULT_NAME="WORKSHOP.VIEWS_360.DEFAULT_NAME",e.OVERLAY_MESSAGE="WORKSHOP.VIEWS_360.OVERLAY_MESSAGE",e.OVERLAY_INFO_MISSING_SWEEP="WORKSHOP.VIEWS_360.OVERLAY_INFO_MISSING_SWEEP",e.OVERLAY_INFO_CURRENT_SWEEP="WORKSHOP.VIEWS_360.OVERLAY_INFO_CURRENT_SWEEP",e.OVERLAY_INFO_SELECTED_SWEEP="WORKSHOP.VIEWS_360.OVERLAY_INFO_SELECTED_SWEEP",e.ROTATE_TOOLTIP_TITLE="WORKSHOP.VIEWS_360.ROTATE_TOOLTIP_TITLE",e.ROTATE_TOOLTIP_MESSAGE="WORKSHOP.VIEWS_360.ROTATE_TOOLTIP_MESSAGE",e.ROTATE_TOOLTIP_CTA="WORKSHOP.VIEWS_360.ROTATE_TOOLTIP_CTA",e.UNPLACED_CARD_MESSAGE="WORKSHOP.VIEWS_360.UNPLACED_CARD_MESSAGE",e.RENAME_ITEM_OPTION_CTA="WORKSHOP.VIEWS_360.RENAME_ITEM_OPTION_CTA",e.REMOVE_ITEM_OPTION_CTA="WORKSHOP.VIEWS_360.REMOVE_ITEM_OPTION_CTA",e.NO_VIEWS_MESSAGE="WORKSHOP.VIEWS_360.NO_VIEWS_MESSAGE"}(T=e.VIEWS_360||(e.VIEWS_360={})),function(e){e.TOAST_MESSAGE="WORKSHOP.VR.TOAST_MESSAGE",e.TOAST_CTA="WORKSHOP.VR.TOAST_CTA"}(O=e.VR||(e.VR={}))}(l=e.WORKSHOP||(e.WORKSHOP={}))}(i||(i={}));const s=i},93510:(e,t,n)=>{"use strict";var i;function s(e){return e.match(/us|mm|lr$/i)?i.IMPERIAL:i.METRIC}n.d(t,{M:()=>i,z:()=>s}),function(e){e.IMPERIAL="imperial",e.METRIC="metric"}(i||(i={}))},37367:(e,t,n)=>{"use strict";n.d(t,{i:()=>s,y:()=>r});var i=n(88599);function s(e){if(!e)return i.k$;if(r(e))return e;const t=e.toLocaleLowerCase();if(t in i.Xy)return i.Xy[t];const[n]=t.split("-");return n in i.Xy?i.Xy[n]:(i.E7.find((e=>e.startsWith(t))),i.k$)}function r(e){return i.E7.includes(e)}},39142:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>LocaleModule});var i=n(57227),s=n(14877),r=n(54078),o=n(88599);async function a(e,t){const n=function(e){return e===o.k$?"./locale/strings.json":`./locale/messages/strings_${e}.json`}(e),i=await t.get(n);return JSON.parse(i)}var l=n(2252),c=n(19718),d=n(87100),u=n(37367);class LocaleModule extends i.Y{constructor(){super(...arguments),this.name="locale"}async init(e,t){this._languageCode=function(e){var t;const n=(0,d.eY)("lang",""),i=(0,l.ht)(),s=null!==(t=(0,c.$)("SESSvl",""))&&void 0!==t?t:"",r=""===s||-1!==s.search(/^en/),o=n||(e?r?i:s:i);return(0,u.i)(o)}(e.isLoggedIn);const n=this._languageCode.substr(0,2);this.polyglot=new r({locale:n,interpolation:{prefix:"%{",suffix:"}"},onMissingKey:e=>(this.log.warn("Missing phrase key:"+e),LocaleModule.missingPrefix+e)});const i=await async function(e,t){const n=await a(e,t);if(e===o.k$)return n;const i=await a(o.k$,t);return Object.assign(Object.assign({},i),n)}(this._languageCode,e.queue);this.polyglot.extend(i),this.registerSettings(t)}t(e,t){return this.polyglot.t(e,t)}has(e){return this.polyglot.has(e)}get languageCode(){return this._languageCode}async registerSettings(e){(await e.getModuleBySymbol(s.y.SETTINGS)).registerSetting("Locale",o.Zs,this.languageCode,!1)}}LocaleModule.missingPrefix="FIX-"},88599:(e,t,n)=>{"use strict";n.d(t,{E7:()=>i,k$:()=>s,Xy:()=>r,Zs:()=>o});const i=["en-US","es","fr","de","ru","ja","zh-CN","zh-TW","ko","nl","it","pt"],s="en-US",r=Object.assign(Object.assign({},i.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.toLowerCase()]:t})),{})),{en:"en-US",zh:"zh-CN",cn:"zh-CN",jp:"ja"}),o="language_code"},95998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>LoginRedirect});var i=n(67294),s=n(20745),r=n(57227),o=n(31013),a=n(85893),l=n(94184),c=n.n(l),d=n(92759),u=n(61445);class LoginRedirectUi extends i.Component{constructor(e){super(e),this.signup=()=>{window.top&&(window.top.location.href=this.props.registerUrl)}}render(){const{loginUrl:e,backgroundUrl:t}=this.props,n=t||d;return(0,a.jsx)("div",Object.assign({className:"login-redirect-screen",style:{backgroundImage:`url(${n})`}},{children:(0,a.jsx)("div",Object.assign({className:c()("login-redirect",{skrim:!!t})},{children:(0,a.jsxs)("div",Object.assign({className:"login-redirect-body"},{children:[(0,a.jsx)("h1",Object.assign({className:"login-redirect-title"},{children:"You have been invited to this space, create an account to join the conversation."})),(0,a.jsx)("div",Object.assign({className:"login-redirect-create"},{children:(0,a.jsx)(u.zx,Object.assign({buttonSize:u.qE.LARGE,buttonStyle:u.ZJ.LIGHT,onClick:this.signup},{children:"Create an Account"}))})),(0,a.jsxs)("div",Object.assign({className:"login-redirect-link"},{children:["Already have an account?",(0,a.jsx)("a",Object.assign({className:"link",href:e},{children:"Sign in"}))]}))]}))}))}))}}var h=n(14877);class LoginRedirect extends r.Y{constructor(){super(...arguments),this.name="login-redirect",this.authenticated=!1}async init(e,t){this.config=e,this.engine=t}async loadUi(){var e;const{container:t,loginUrl:n,registerUrl:r}=this.config,a=await this.engine.getModuleBySymbol(h.y.LOCALE),l=encodeURIComponent((null===(e=window.top)||void 0===e?void 0:e.location.href)||"");return this.reactContainer=document.createElement("div"),this.reactContainer.id="login-redirect-container",t.appendChild(this.reactContainer),this.reactRoot=(0,s.s)(this.reactContainer),this.reactRoot.render((0,i.createElement)(LoginRedirectUi,{locale:a,backgroundUrl:this.getBackground(),loginUrl:`${n}?target=${l}`,registerUrl:`${r}?target=${l}`})),new o.Q}async unloadUi(){return!!this.reactContainer&&(this.reactRoot.unmount(),this.reactContainer.remove(),delete this.reactContainer,!0)}getBackground(){const{baseUrl:e,modelId:t}=this.config;if(!t||!e)return;const n=window.devicePixelRatio||1;return`${e}/api/v1/player/models/${t}/thumb?width=${Math.max(window.innerWidth,400)}&dpr=${n}&disable=upscale`}}},25551:(e,t,n)=>{"use strict";var i;n.d(t,{U:()=>i}),function(e){e[e.NAVIGATION=0]="NAVIGATION",e[e.MODEL=1]="MODEL",e[e.EXT_LINK=2]="EXT_LINK"}(i||(i={}));i.NAVIGATION,i.MODEL,i.EXT_LINK},11679:(e,t,n)=>{"use strict";var i;n.d(t,{z:()=>i}),function(e){e.text="text",e.link="link",e.photo="photo",e.video="video",e.rich="rich",e.none="none",e.error="error"}(i||(i={})),function(e){e.parse=t=>null!==t&&t in e?e[t]:e.none}(i||(i={}))},69098:(e,t,n)=>{"use strict";n.d(t,{V:()=>i,s:()=>MattertagDataAnalytics});var i,s=n(61709),r=n(81111),o=n(76641),a=n(11679);!function(e){e.OVERLAY="overlay",e.HOVER="hover",e.OPEN="open"}(i||(i={}));class MattertagDataAnalytics{constructor(){this.handlers=[{msgType:o.QY,func:(e,t,n)=>{const i=n.tryGetData(s.n),o=n.tryGetData(r.P5);if(!i||!o)return;const l=i.getTagCount(),c=o.getVisitedTags().length,d=o.getViewedTagCount(),u=i.getTag(t.sid);u&&e.track("tag_opened",{tag_count:l,tag_id:t.sid,tags_visited:c,tag_view_count:d,has_media:u.mediaType!==a.z.none})}},{msgType:o.dJ,func:(e,t,n)=>{const i=n.tryGetData(s.n),o=n.tryGetData(r.P5);if(!i||!o)return;const a=i.getTagCount(),l=o.getVisitedTags().length,c=o.getViewedTagCount(),d=i.getTag(t.sid);if(d){const n={mattertag_sid:t.sid,mattertag_view:t.view,mattertag_media:d.mediaType,mattertags_count:a,mattertags_total_views:c,mattertags_visited:l};e.track("mattertag_view",n)}}}]}}},23400:(e,t,n)=>{"use strict";n.d(t,{cH:()=>GetDiscPositionsCommand,Fz:()=>AddMattertagCommand,Gn:()=>RemoveMattertagCommand,Ek:()=>EditMattertagCommand,Mm:()=>SaveNewMattertagCommand,qq:()=>SaveMattertagChangesCommand});var i=n(93037);class GetDiscPositionsCommand extends i.m{constructor(e){super(),this.id="MATTERTAG_DISC_POSITIONS",this.payload={tags:e}}}class AddMattertagCommand extends i.m{constructor(e,t,n){super(),this.id="ADD_MATTERTAG",this.payload={positionOptions:e,standardOptions:t,mediaOptions:n}}}class RemoveMattertagCommand extends i.m{constructor(e){super(),this.id="DELETE_MATTERTAG",this.payload={sid:e}}}class EditMattertagCommand extends i.m{constructor(e,t,n,i){super(),this.payload={sid:e,standardOptions:t,mediaOptions:n,positionOptions:i}}}class SaveNewMattertagCommand extends i.m{constructor(e,t,n=[],i){super(),this.payload={id:e,properties:t,fileAttachments:n,embed:i}}}class SaveMattertagChangesCommand extends i.m{constructor(e,t,n=[],i=[],s){super(),this.payload={id:e,properties:t,pendingAttachments:n,removedAttachments:i,embed:s}}}},61709:(e,t,n)=>{"use strict";n.d(t,{n:()=>MattertagsData});var i=n(35424),s=n(66910),r=n(28129);class MattertagsData extends i.V{constructor(e){if(super(),this.name="tag",this.mattertags=(0,s.q)(),e)for(const t of e)this.mattertags.set(t.sid,t);this.commit()}clear(){for(const e of this.mattertags.keys)this.removeTag(e)}clone(){return(new MattertagsData).copy(this)}copy(e){return MattertagsData.copyTagCollection(this,e),this}static copyTagCollection(e,t){const n=e.mattertags,i=t.mattertags;for(const t of n.keys)i.has(t)||e.removeTag(t);for(const t of i)e.addTag(t)}get collection(){return this.mattertags}addTag(e){this.mattertags.has(e.sid)?this.mattertags.get(e.sid).copy(e):this.mattertags.set(e.sid,e.clone())}removeTag(e){return this.mattertags.delete(e)}getTag(e){return this.mattertags.get(e)}getTagList(){return this.mattertags.keys}getTagCount(){return this.mattertags.length}getTagKeywords(){let e=[];return this.iterate((t=>{t.enabled&&t.keywords.length&&(e=e.concat(t.keywords))})),e}iterate(e){for(const t of this.mattertags)e(t)}*[Symbol.iterator](){for(const e of this.mattertags)yield e}set onStale(e){this.hydrate=e}updateOnStaleCallbacks(e){if(!this.hydrate)return;const t=e?this.getTag(e):this.mattertags;(0,r.s)(t,(async()=>{const e=await this.hydrate();this.iterate((t=>{t.refresh(e)}))}))}}},76641:(e,t,n)=>{"use strict";n.d(t,{QY:()=>MattertagNavigatedMessage,Ik:()=>MattertagLinkOpenedMessage,dJ:()=>MattertagViewedMessage});var i=n(4117);class MattertagNavigatedMessage extends i.v{constructor(e){super(),this.sid=e}}class MattertagLinkOpenedMessage extends i.v{constructor(e){super(),this.url=e}}class MattertagViewedMessage extends i.v{constructor(e,t){super(),this.sid=e,this.view=t}}},18253:(e,t,n)=>{"use strict";n.d(t,{re:()=>i,lc:()=>s,Us:()=>r,ZF:()=>o});const i="features/mattertags",s="embedlyKey",r=1e3,o=60},90525:(e,t,n)=>{"use strict";n.d(t,{Y:()=>NavigateToMattertagCommand});var i=n(93037);class NavigateToMattertagCommand extends i.m{constructor(e,t,n=!1){super(),this.id="MATTERTAG_NAVIGATE",this.payload={sid:e,transition:t,navigateToDisabled:n}}}},81111:(e,t,n)=>{"use strict";n.d(t,{Pg:()=>i,rI:()=>s,P5:()=>MattertagsViewData,ZJ:()=>BillboardData});var i,s,r=n(35424),o=n(29984),a=n(67779),l=n(66910),c=n(98254);!function(e){e.UP="Up",e.DOWN="Down",e.LEFT="Left",e.LEFT_UP="LeftUp",e.LEFT_DOWN="LeftDown",e.RIGHT="Right",e.RIGHT_UP="RightUp",e.RIGHT_DOWN="RightDown"}(i||(i={})),function(e){e.CLOSED="closed",e.IDLE="idle",e.DISABLED="disabled",e.CREATING="creating",e.PRESSING="pressing",e.PLACING="placing",e.PLACED="placed",e.EDITING="editing"}(s||(s={}));class MattertagsViewData extends r.V{constructor(e){super(),this.mattertags=e,this.name="tag-view",this.visitedTags=new o.d,this.navigatingTag=(0,a.Y)(null),this.toolStateObservable=(0,a.Y)(s.CLOSED),this.openTagObservable=(0,a.Y)(null),this.selectedTagObservable=(0,a.Y)(null),this.uncommittedTagObservable=(0,a.Y)(null),this.progressObservable=new a.f(-1),this.screenPositionObservable=new a.f(null),this.viewedTags=0,this.suspendVisibilityUpdates=!1,this.creatingNewMattertag=!1,this.tagCapabilities={},this.getViewData=e=>{const t=this.mattertags.getTag(e),n=this.derivedData[e];return t&&!n&&this.makeViewData&&(this.derivedData[e]=this.makeViewData(t)),this.derivedData[e]},this.derivedData={},this.activeBillboards=(0,l.q)()}setViewDataFactory(e){this.makeViewData=e}openBillboard(e){this.openTag&&this.openTag!==e&&this.closeBillboard(this.openTag),this.openTag!==e&&this.setOpenTag(e)}hideBillboard(e){this.openTag===e&&this.setOpenTag(null)}closeBillboard(e){this.openTag===e&&this.setOpenTag(null),this.selectedTag===e&&this.setSelectedTag(null)}closeOpenBillboard(){this.openTag&&this.closeBillboard(this.openTag)}setTagCapabilities(e,t){const n=this.tagCapabilities[e]||{};n.opening=t.opening,n.navigating=t.navigating,this.tagCapabilities[e]=n,this.openTag!==e||this.tagCapabilities.opening||this.closeBillboard(e)}getTagCount(){return this.mattertags.collection.length}get navigating(){return this.navigatingTag.value}setNavigatingTag(e){this.navigatingTag.value=e}onNavigatingTagChanged(e){return this.navigatingTag.onChanged(e)}setSelectedTag(e){this.selectedTagObservable.value=e}get selectedTag(){return this.selectedTagObservable.value}onSelectedTagChanged(e){return this.selectedTagObservable.onChanged(e)}setUncommittedTag(e){this.uncommittedTagObservable.value=e}get uncommittedTag(){return this.uncommittedTagObservable.value}onUncommittedChanged(e){return this.uncommittedTagObservable.onChanged(e)}setProgress(e){this.progressObservable.value=e}get progress(){return this.progressObservable.value}onProgressChanged(e){return this.progressObservable.onChanged(e)}get screenPosition(){return this.screenPositionObservable.value}setScreenPosition(e){this.screenPositionObservable.value=e}onScreenPositionChanged(e){return this.screenPositionObservable.onChanged(e)}setToolState(e){switch(e){case s.CREATING:this.creatingNewMattertag=!0;break;case s.IDLE:case s.CLOSED:this.creatingNewMattertag=!1}this.toolStateObservable.value=e}get toolState(){return this.toolStateObservable.value}onToolStateChanged(e){return this.toolStateObservable.onChanged(e)}get openTag(){return this.openTagObservable.value}setOpenTag(e){this.openTagObservable.value=e}onOpenTagChanged(e){return this.openTagObservable.onChanged(e)}isCreatingNewMattertag(){return this.creatingNewMattertag}visitTag(e){this.viewedTags++,-1===this.visitedTags.indexOf(e)&&this.visitedTags.push(e)}getViewedTagCount(){return this.viewedTags}getVisitedTags(){return this.visitedTags.values()}setNavigatingPosition(e){this.navigatingPosition=e}getNavigatingPosition(){return this.navigatingPosition}}class BillboardData extends c.T{constructor(e){super(),this.sid=e,this.closing=!1,this.position=null,this.distance=0,this.timeoutId=0}}},57073:(e,t,n)=>{"use strict";n.d(t,{X:()=>MeasurementModeData});var i=n(35424),s=n(64792),r=n(67779),o=n(91183);class MeasurementModeData extends i.V{constructor(){super(...arguments),this.name="measure-mode",this._groups=[],this._groupMap={},this.onDataChangedCallbacks=new Set,this._editingGroupId=null,this._creatingGroupId=null,this.phaseObservable=(0,r.Y)(s.au.CLOSED),this.selectedGroupIndexObservable=new r.f(-1),this.pressProgressObservable=new r.f(-1),this.pointPositionObservable=new r.f(null)}modeActive(){return this.phase!==s.au.CLOSED}*groups(){for(const e of this._groups)yield e}get selectedGroupSid(){const e=this.selectedGroupInfo;return e&&e.info.sid?e.info.sid:null}get selectedGroupInfo(){return-1===this.selectedGroupIndex?null:this.getGroupInfo(this.selectedGroupIndex)}get phase(){return this.phaseObservable.value}get creatingGroupId(){return this._creatingGroupId}set creatingGroupId(e){this._creatingGroupId=e}get editingGroupId(){return this._editingGroupId}set editingGroupId(e){this._editingGroupId=e}setPhase(e){this.phase!==e&&(this.phaseObservable.value=e)}onPhaseChanged(e){return this.phaseObservable.onChanged(e)}notifyDataChanged(){this.onDataChangedCallbacks.forEach((e=>e()))}onDataChanged(e){return(0,o.k1)((()=>this.onDataChangedCallbacks.add(e)),(()=>this.onDataChangedCallbacks.delete(e)),!0)}get groupCount(){return this._groups.length}get selectedGroupIndex(){return this.selectedGroupIndexObservable.value}setSelectedGroupIndex(e){this.selectedGroupIndexObservable.value=e}onSelectedGroupIndexChanged(e){return this.selectedGroupIndexObservable.onChanged(e)}get pointPosition(){return this.pointPositionObservable.value}setPointPosition(e){this.pointPositionObservable.value=e}onPointPositionChanged(e){return this.pointPositionObservable.onChanged(e)}setPressProgress(e){this.pressProgressObservable.value=e}get pressProgress(){return this.pressProgressObservable.value}onPressProgressChanged(e){return this.pressProgressObservable.onChanged(e)}getGroupInfo(e){return e<0||e>=this._groups.length?null:this._groups[e]}getGroupInfoBySid(e){return e?this._groupMap[e]:null}repopulate(e){this.clear();for(const t of e){const e=t.clone();this._groups.push(e),this._groupMap[t.info.sid]=e}this.notifyDataChanged()}clear(){this._groups=[],this._groupMap={}}}},64792:(e,t,n)=>{"use strict";var i;n.d(t,{au:()=>i,Pj:()=>s,Ph:()=>r,q8:()=>o,WN:()=>a}),function(e){e[e.CLOSED=0]="CLOSED",e[e.IDLE=1]="IDLE",e[e.EDITING=2]="EDITING",e[e.CREATING=3]="CREATING",e[e.POINT_PLACED=4]="POINT_PLACED",e[e.CREATING_NEXT_POINT=5]="CREATING_NEXT_POINT",e[e.CONFIRMING_POINT=6]="CONFIRMING_POINT"}(i||(i={}));const s={mobile:{[i.POINT_PLACED]:!0,[i.EDITING]:!0},desktop:{[i.CREATING]:!0,[i.CREATING_NEXT_POINT]:!0,[i.EDITING]:!0}},r={mobile:{[i.CREATING_NEXT_POINT]:!0,[i.POINT_PLACED]:!0,[i.EDITING]:!0},desktop:{[i.CREATING]:!0,[i.CREATING_NEXT_POINT]:!0,[i.EDITING]:!0}},o={[i.IDLE]:!0,[i.EDITING]:!0},a={[i.IDLE]:!0,[i.EDITING]:!0}},4559:(e,t,n)=>{"use strict";n.d(t,{Ev:()=>MeasurementDeleteSelectedCommand,Tn:()=>MeasurementDeleteCommand,JM:()=>MeasurementListDeletionCommand});var i=n(93037);class MeasurementDeleteSelectedCommand extends i.m{}class MeasurementDeleteCommand extends i.m{constructor(e){super(),this.payload={index:e}}}class MeasurementListDeletionCommand extends i.m{constructor(...e){super(),this.payload={sids:e}}}},8483:(e,t,n)=>{"use strict";n.d(t,{O:()=>MeasurementModeToggle});var i=n(93037);class MeasurementModeToggle extends i.m{constructor(e,t,n=!0){super(),this.payload={on:e,dimWhileActive:void 0!==t?t:e,editable:n}}}},63930:(e,t,n)=>{"use strict";n.d(t,{c:()=>MeasurementNewline});var i=n(93037);class MeasurementNewline extends i.m{}},2753:(e,t,n)=>{"use strict";n.d(t,{R:()=>MeasurementRenameCommand});var i=n(93037);class MeasurementRenameCommand extends i.m{constructor(e,t=""){super(),this.id="RENAME_MEASUREMENT",this.payload={sid:e,text:t}}}},5947:(e,t,n)=>{"use strict";n.d(t,{B:()=>MeasurementStop});var i=n(93037);class MeasurementStop extends i.m{}},97082:(e,t,n)=>{"use strict";n.d(t,{W:()=>MeasurementVisibilityCommand});var i=n(93037);class MeasurementVisibilityCommand extends i.m{constructor(e,...t){super(),this.id="VISIBILITY_MEASUREMENT",this.payload={sids:t,visible:e}}}},34e3:(e,t,n)=>{"use strict";n.d(t,{l:()=>NavigateToMeasurementCommand});var i=n(93037);class NavigateToMeasurementCommand extends i.m{constructor(e){super(),this.payload={groupId:e}}}},24133:(e,t,n)=>{"use strict";n.d(t,{rf:()=>MeasurementSegmentCreatedMessage,u6:()=>MeasurementCreatedMessage,ff:()=>MeasurementCreationCancelledMessage,ty:()=>MeasurementTitleAddedMessage,mM:()=>MeasurementTitleChangedMessage,$Z:()=>MeasurementDeletedMessage,av:()=>MeasurementUpdatedMessage,$n:()=>MeasurementModeToggledMessage});var i=n(4117);class MeasurementSegmentCreatedMessage extends i.v{constructor(e){super(),this.data=e}}class MeasurementCreatedMessage extends i.v{constructor(e){super(),this.data=e}}class MeasurementCreationCancelledMessage extends i.v{}class MeasurementTitleAddedMessage extends i.v{constructor(e,t){super(),this.sid=e,this.text=t}}class MeasurementTitleChangedMessage extends i.v{constructor(e,t,n){super(),this.sid=e,this.oldText=t,this.newText=n}}class MeasurementDeletedMessage extends i.v{constructor(e){super(),this.data=e}}class MeasurementUpdatedMessage extends i.v{constructor(e){super(),this.data=e}}class MeasurementModeToggledMessage extends i.v{constructor(e,t,n){super(),this.opened=e,this.viewmode=t,this.count=n}}},54068:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});const i="features/measurements-nudge"},31991:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ModelDataLoadedMessage});var i=n(4117);class ModelDataLoadedMessage extends i.v{constructor(e,t){super(),this.sid=e,this.vrSupported=t}}},97966:(e,t,n)=>{"use strict";n.d(t,{T:()=>ModelData});var i=n(35424),s=n(53995);class ModelData extends i.V{constructor(e){super(),this.name="model",this.model=e}hasDiscoverUrl(){return[s.LU.PUBLIC,s.LU.UNLISTED].includes(this.model.visibility)}}},53995:(e,t,n)=>{"use strict";var i,s,r;n.d(t,{LU:()=>i,vz:()=>s,qU:()=>r}),function(e){e.PUBLIC="public",e.UNLISTED="unlisted",e.PASSWORD="password",e.PRIVATE="private",e.UNKNOWN="unknown"}(i||(i={})),function(e){e.MAX="max",e.LOD0="lod0",e.LOD1="lod1",e.LOD2="lod2",e.LOD3="lod3"}(s||(s={})),function(e){e.custom="custom",e.basic1="basic1",e.medium1="medium1"}(r||(r={}))},81685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ModelDataModule});var i=n(57227),s=n(14877),r=n(48697),o=n(17403),a=n(85111),l=n(5477),c=n(14909);const d=new l.Z("modelurls");class UrlContainerNoop{constructor(){this.version=3,this.baseUrl="",this.expires=0}validate(e){return!0}update(e){return Promise.resolve()}get(e){if(!this.isSigned(e))throw new Error("Tried getting relative model url with no signed urls configured.");return e}isSigned(e){if(!e.match(/^https?:/))return!1;const t=e.indexOf("?");if(-1===t)return!1;return new URLSearchParams(e.substr(t)).has("t")}}class UrlContainerV3 extends UrlContainerNoop{constructor(){super(...arguments),this.version=3,this.baseUrl="",this.absoluteUrl="",this.expires=0}validate(e){return e.templates&&e.catalog_file&&(!e.expires||1e3*e.expires>Date.now())}update(e){if(!e.templates)throw new Error("No templates found.");return this.baseUrl=e.templates[0],this.absoluteUrl=this.baseUrl.split("{{filename}}").shift()||"",e.expires?this.expires=1e3*e.expires:this.expires=Date.now()+a.Z.signedUrlDefaultExpireTime,Promise.resolve()}get(e){return this.baseUrl&&this.baseUrl.replace("{{filename}}",e.replace(this.absoluteUrl,""))}}class ModelUrls{constructor(e,t){this.api=e,this.endpoint=t,this.urlContainer=null,this.previousRefreshPromise=null,this.containerClasses=[UrlContainerNoop],t?this.containerClasses=[UrlContainerV3]:this.urlContainer=new UrlContainerNoop}needsRefresh(){if(null===this.endpoint)return!1;const e=this.urlContainer?this.urlContainer.expires:Date.now();return Date.now()+a.Z.signedUrlRefreshBuffer>e}refresh(){if(!this.needsRefresh())return Promise.resolve();if(!this.previousRefreshPromise){d.debug("Refreshing urls...");const e=this;this.previousRefreshPromise=this._refresh().then((function(){d.debug("Refreshed"),e.previousRefreshPromise=null}),(function(t){d.error("Failed url refresh, urls might go stale soon",t),e.previousRefreshPromise=null}))}return this.previousRefreshPromise}async _refresh(e=!0){const t=this.endpoint?await this.api.get(this.endpoint,{responseType:"json",prefetchFrom:e?"files":void 0,priority:o.RequestPriority.HIGHEST}):null;if(this.urlContainer&&this.urlContainer.validate(t))return this.urlContainer.update(t);for(const e of this.containerClasses){const n=new e;if(n.validate(t))return d.info("Using urls version "+n.version),this.urlContainer=n,this.urlContainer.update(t)}if(e)return this._refresh(!1);throw new Error("missing-urls")}isSigned(e){var t;return(null===(t=this.urlContainer)||void 0===t?void 0:t.isSigned(e))||!1}async getSignedUrl(e){if(e.startsWith("blob:"))return e;if(await this.refresh(),!this.urlContainer)throw new Error("Tried to use ModelUrls.get before urlContainer is established.");const t=this.urlContainer.get(e);if(!t)throw new Error(`Could not get signed URL for path ${e}`);return t}async getFile(e,t,n){const i=this.isSigned(e)?e:await this.getSignedUrl(e),s=(0,c.bf)(i,n);return this.api.getOnStoreQueue(s,t)}async getImage(e,t,n){const i=this.isSigned(e)?e:await this.getSignedUrl(e),s=(0,c.bf)(i,n);return this.api.getImage(s,t)}async getImageBitmap(e,t,n,i,s){const r=this.isSigned(e)?e:await this.getSignedUrl(e),o=(0,c.bf)(r,s);return this.api.getImageBitmap(o,t,n,i)}}var u=n(28129),h=n(97966),p=n(31991),m=n(64927),g=n(66225),f=n(63336),v=n(38636);class Model{constructor(){this.lastPublished=null}refresh(e){var t;for(const t in this.textures)e.textures[t]&&this.textures[t].refreshFrom(e.textures[t]);null===(t=this.meshUrls)||void 0===t||t.forEach(((t,n)=>{var i,s;const r=null===(s=null===(i=e.meshUrls)||void 0===i?void 0:i[n])||void 0===s?void 0:s.url;t.url&&r&&t.url.refreshFrom(r)})),this.tileset&&e.tileset&&this.tileset.urlTemplate.refreshFrom(e.tileset.urlTemplate)}}var b=n(64069),y=n(16534),S=n(87100),E=n(40603);class ModelLoadException extends E.y{constructor(e,t){super(e),this.name="ModelLoadException",this.code=t}}var T=n(16752),O=n(53995);const _=new l.Z("mds-snapshot-serializer");class MdsModelDeserializer{deserialize(e){var t,n,i;if(!e||!this.validate(e)||!e.publication)return _.debug("Deserialized invalid model data from MDS",e),null;const s=null!==(t=e.state)&&void 0!==t?t:b.gb.ACTIVE;if(s!==b.gb.ACTIVE)throw _.error(`model unavailable, status: ${s}`,e),new ModelLoadException("model unavailable",s);const r=e.publication,o=r.contact||{name:"",email:"",phoneNumber:""},a=e.options,l=new Model;l.sid=e.id,l.organizationId=e.organization||null,l.details={sid:e.id,name:e.name||"",presentedBy:r.presentedBy||"",summary:r.summary||"",formattedAddress:r.address||"",demo:!!e.demo,contact:{email:o.email||"",name:o.name||"",phone:o.phoneNumber||"",formattedPhone:o.phoneNumber||""},externalUrl:r.externalUrl||""},l.created=(0,f.p)(e.created,null),l.options={urlBranding:null===(n=null==a?void 0:a.urlBrandingEnabled)||void 0===n||n,socialSharing:!!(null==a?void 0:a.socialSharingEnabled),isPublic:!!r.published,isVR:!!(null==a?void 0:a.vrEnabled)},r.lastPublished&&(l.lastPublished=(0,f.p)(r.lastPublished,null));const c=w(e.assets.textures.filter((e=>"high"===e.quality))[0]),d=w(e.assets.textures.filter((e=>"low"===e.quality))[0]);l.textures={},c&&(l.textures.high=new u.n(c,(0,f.p)(c.validUntil,null))),d&&(l.textures.low=new u.n(d,(0,f.p)(d.validUntil,null)));const h=this.getDamFileUrls(e);(null==h?void 0:h.length)&&(l.meshUrls=h);const p=null===(i=e.assets.tilesets)||void 0===i?void 0:i[0];if(this.validateTileset(p)&&(l.tileset=this.getTileset(p,e.lod),l.textures.max=this.getTilesetTextures(p)),!l.meshUrls&&!l.tileset)throw _.error("No DAM or tileset info found for model",l),new ModelLoadException("No DAM or tileset info found for model",s);return l.visibility=this.getModelVisibility(e),l}validate(e){return["id","assets","publication"].every((t=>t in e))}getDamFileUrls(e){return((0,v.q)(e,"assets.meshes")||[]).reduce(((e,t)=>{if(t.status===b.l5.AVAILABLE&&t.url){const n={url:new u.n(t.url,(0,f.p)(t.validUntil,null)),suffix:t.resolution?`_${t.resolution}`:"",extension:t.format||""};"50k"===t.resolution?e.unshift(n):e.push(n)}return e}),[])}validateTileset(e){var t;if(!e)return!1;const n=T.o.lt(null!==(t=e.tilesetVersion)&&void 0!==t?t:"0","1.0.0");return e&&e.status===b.l5.AVAILABLE&&!n}getTileset(e,t){var n;const i=this.getTilesetMaxLOD(e,t),s=this.getRootTilesetFilename(e,t),r=this.getUrlTemplate(e);return{maxLOD:i,rootFilename:s,urlTemplate:new u.n(r,(0,f.p)(e.validUntil,null)),tilesetVersion:null!==(n=e.tilesetVersion)&&void 0!==n?n:"0"}}getTilesetMaxLOD(e,t){var n,i,s;let r=2;const o=T.o.gte(null!==(n=e.tilesetVersion)&&void 0!==n?n:"0","1.2.0"),a=!o&&e.tilesetPreset===O.qU.basic1,l=e.tilesetPreset===O.qU.custom,c=e.tilesetDepth;if(A(c)&&(o||l||!a))return c;switch(null===(i=null==t?void 0:t.options)||void 0===i?void 0:i[0]){case O.vz.MAX:r=A(c)?c:4,T.o.lt(null!==(s=e.tilesetVersion)&&void 0!==s?s:"0","1.1.0")&&(r=3);break;case O.vz.LOD3:r=3;break;case O.vz.LOD2:r=2;break;case O.vz.LOD1:r=1;break;case O.vz.LOD0:r=0}return 1===(0,S.eY)("debugTiles",0)&&(0,S.eY)("maxLOD",r)!==r&&(r=(0,S.eY)("maxLOD",r)),r}getRootTilesetFilename(e,t){if(1===(0,S.eY)("debugTiles",0)&&""!==(0,S.eY)("tilesetroot",""))return(0,S.eY)("tilesetroot","");if(e.tilesetPreset===O.qU.custom)return"tileset.json";return`${this.getTilesetMaxLOD(e,t)}.json`}getTilesetTextures(e){const t=this.getUrlTemplate(e);return new u.n({filename:null,id:"tiled",resolution:"*",quality:"max",format:"jpg",urlTemplate:t.replace(y.d_.urlTemplateToken,"<folder>/<texture>.jpg"),validUntil:e.validUntil},(0,f.p)(e.validUntil,null))}getUrlTemplate(e){var t;return y.d_.urlTemplateOverride?y.d_.urlTemplateOverride+y.d_.urlTemplateToken+"?t=fake":null!==(t=e.urlTemplate)&&void 0!==t?t:y.d_.urlTemplateToken}getModelVisibility(e){return void 0===e.visibility||e.visibility===b.LU.PUBLIC?e.discoverable?O.LU.PUBLIC:O.LU.UNLISTED:e.visibility===b.LU.PRIVATE?O.LU.PRIVATE:O.LU.UNKNOWN}}function A(e){return null!=e&&!isNaN(e)}function w(e){var t;return e.id&&e.resolution&&e.quality&&e.urlTemplate?{id:e.id,filename:null!==(t=e.filename)&&void 0!==t?t:null,format:e.format,validUntil:e.validUntil||"",resolution:e.resolution,quality:e.quality,urlTemplate:e.urlTemplate}:null}class MdsModelStore extends g.u{constructor(){super(...arguments),this.serializer=new MdsModelDeserializer}async read(e){var t;const n={modelId:this.getViewId()},i=await this.query(m.GetModelDetails,n,e);return this.serializer.deserialize(null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.model)}async refresh(){return this.refreshPromise||(this.refreshPromise=this.read({fetchPolicy:"no-cache"}).finally((()=>{this.refreshPromise=void 0}))),this.refreshPromise}}class ModelDataModule extends i.Y{constructor(){super(...arguments),this.name="model-data"}async init(e,t){this.engine=t;const{baseUrl:n,readonly:i,baseModelId:o}=e;this.store=new MdsModelStore({readonly:i,baseUrl:n,viewId:o});const a=await this.store.read();if(!a)throw Error("Could not fetch model data");(0,u.s)(a,(async()=>{const e=await this.store.refresh();e&&a.refresh(e)})),this.model=a;const l=new h.T(this.model);t.market.register(this,h.T,l),this.registerSettings(l),async function(e,t,n){(await n.getModuleBySymbol(s.y.ANALYTICS)).setOptions({model_mesh_type:e.model.tileset&&t.tiledMeshEnabled?"streamed":"dam"})}(l,e,t),t.market.waitForData(r.Q).then((e=>{a.lastPublished&&(e.lastPublished=a.lastPublished.getTime())}));const c=(await t.getModuleBySymbol(s.y.API)).getApi();this.signedUrls=new ModelUrls(c,null),this.signedUrls.meshUrls=this.model.meshUrls,t.broadcast(new p.Z(this.model.sid,this.model.vrSupported))}async registerSettings(e){const t=await this.engine.getModuleBySymbol(s.y.SETTINGS),n="Model Options",{urlBranding:i=!0,socialSharing:r,isPublic:o,isVR:a}=e.model.options||{};t.registerSetting(n,y.Yo,r),t.registerSetting(n,"is_public",o),t.registerSetting(n,"is_vr",a);const l=!i||!!(0,S.eY)("brand",!0),c=i?(0,S.eY)("mls","0"):"0",d=i?(0,S.eY)("title","1"):"1";t.registerSetting(n,y.Zz,"0"!==d&&"2"!==c),t.registerSetting(n,y.DU,"0"!==d&&"2"!==d),t.registerSetting(n,y.L,l),t.registerSetting(n,y.sX,"1"===c||"2"===c)}getSignedUrls(){return this.signedUrls}}},16534:(e,t,n)=>{"use strict";n.d(t,{Yo:()=>s,L:()=>r,sX:()=>o,DU:()=>a,Zz:()=>l,r4:()=>c,d_:()=>d});var i=n(87100);const s="social_sharing",r="branding_enabled",o="presentation_mls_mode",a="presentation_title",l="presentation_about",c="discover_space_url",d={urlTemplateToken:"<file>",urlTemplateOverride:(0,i.eY)("tiledtemplate",null)}},75977:(e,t,n)=>{"use strict";n.d(t,{S:()=>ModelColliderTarget});var i=n(84428);class ModelColliderTarget extends i.Mesh{constructor(){super(...arguments),this.raycastEnabled=!0}}},73694:(e,t,n)=>{"use strict";var i;n.d(t,{l:()=>i}),function(e){e[e.NONE=0]="NONE",e[e.RAYCAST=1]="RAYCAST"}(i||(i={}))},39808:(e,t,n)=>{"use strict";n.d(t,{_:()=>MeshData});var i=n(35424),s=n(84428),r=n(41252);const o=[-5,-5,-5,5,5,5];class MeshData extends i.V{constructor(e,t=o,n=o){super(),this.name="mesh-data",this.extendedBounds=new s.Box3,this.extendedSize=new s.Vector3,this.meshBounds=new s.Box3,this.meshCenter=new s.Vector3,this.meshSize=new s.Vector3,this.meshRadius=0,this.maxPlacementRadius=0,this._meshGroups={floors:new Set,rooms:new Map,roomsByFloor:new Map},this.meshGroupVisuals={floorOpacity:new Map},this.meshSubGroupsFromPoint=e=>{const t=[];for(const[n,i]of this.meshGroups.rooms)i.boundingBox.containsPoint(e)&&t.push(n);return t},this.meshTextureOpacity=new r.z(e),this.meshBounds.setFromArray(t),this.meshBounds.getCenter(this.meshCenter),this.meshBounds.getSize(this.meshSize),this.meshRadius=this.meshSize.clone().multiplyScalar(.5).length(),this.maxPlacementRadius=3*this.meshRadius,this.extendedBounds.setFromArray(n),this.extendedBounds.getSize(this.extendedSize)}get meshGroups(){return this._meshGroups}}},60050:(e,t,n)=>{"use strict";var i;n.d(t,{V:()=>i}),function(e){e[e.Min=0]="Min",e[e.Standard=1]="Standard",e[e.High=2]="High",e[e.Detail=3]="Detail"}(i||(i={}))},90697:(e,t,n)=>{"use strict";var i;n.d(t,{S:()=>i}),function(e){e[e.LOW=1]="LOW",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=3]="HIGH",e[e.ULTRA=4]="ULTRA"}(i||(i={}))},43816:(e,t,n)=>{"use strict";n.d(t,{T0:()=>r,Pv:()=>o,Nr:()=>a});var i=n(75977);const s=e=>e instanceof i.S,r=e=>s(e),o=e=>s(e)&&e.raycastEnabled&&e.visible,a=e=>{let t=e.visible;t&&e.traverseAncestors((e=>{t&&(t=e.visible)}));return!r(e)&&t||o(e)}},73201:(e,t,n)=>{"use strict";var i;n.d(t,{h:()=>i}),function(e){e.PanoTexture="PANO_TEXTURE",e.PanoTextureTransition="PANO_TEXTURE_TRANSITION",e.MeshTexture="MESH_TEXTURE",e.ColorOverlay="COLOR_OVERLAY",e.MeshPreviewSphere="MESH_PREVIEW_SPHERE",e.Wireframe="WIREFRAME",e.FlatShading="FLAT_SHADING",e.PanoOverlay="PANO_OVERLAY",e.PanoOverlayTransition="PANO_OVERLAY_TRANSITION",e.MeshTrimVertex="MESH_TRIM_VERTEX",e.MeshTrimPixel="MESH_TRIM_PIXEL"}(i||(i={}))},43585:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ModelLoadProgressMessage});var i=n(4117);class ModelLoadProgressMessage extends i.v{constructor(e,t){super(),this.loaded=e,this.total=t}}},56483:(e,t,n)=>{"use strict";n.d(t,{EJ:()=>s,ZP:()=>r,Lp:()=>o,iT:()=>a,xx:()=>l});var i=n(87100);const s={flipDownload:(0,i.eY)("flipDownload",!0),flipUpload:(0,i.eY)("flipUpload",!0),debugLOD:(0,i.eY)("debuglod",!1),debugRttQuality:(0,i.eY)("debugQuality",!1),debugRttScores:(0,i.eY)("debugScores",!1),debugRttClear:(0,i.eY)("debuglodrtt",!0),debugPauseTexStream:(0,i.eY)("textureStreamPause",!1),sightingMaxAge:(0,i.eY)("meshSightingMaxAge",600),textureTileSize:(0,i.eY)("chunkTileSize",512)},r=s,o="wireframeEnabled",a="features/tiled_mesh",l={FADE_OPAQUE:1,FADE_ABOVE:.05,FADE_BELOW:.2,FADE_TILE_VISIBLE_THRESHOLD:.6,FADE_CLICKABLE_THRESHOLD:.025,FADE_IN_VALUE:.2,FADE_IN_END_ANGLE:55,FADE_IN_START_ANGLE:35,FADE_IN_HOVER_BOOST_VALUE:.3,FADE_BELOW_START:0,FADE_BELOW_MULT:1}},81674:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,Z:()=>o});var i=n(84428),s=n(73201);const r=10,o={cube:{uniforms:{map:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:n(65723),fragmentShader:n(56128)},blurCube:{uniforms:{map:{type:"t",value:null},opacity:{type:"f",value:1},dir:{type:"v2",value:new i.Vector2(0,0)}},vertexShader:n(64937),fragmentShader:n(81254)},modelChunk:{uniforms:{[s.h.MeshTexture]:{map:{type:"t",value:null},meshOpacity:{type:"f",value:0},opacity:{type:"f",value:1}},[s.h.MeshTrimVertex]:{meshTrimMatrices:{type:"mat4array",value:[]},meshTrimsDiscardContents:{type:"barray",value:new Array(r).fill(!0)},hasKeepVolume:{type:"b",value:!1}},[s.h.MeshTrimPixel]:{meshTrimMatrices:{type:"mat4array",value:[]},meshTrimsDiscardContents:{type:"barray",value:new Array(r).fill(!0)},hasKeepVolume:{type:"b",value:!1}},[s.h.PanoTexture]:{pano0Map:{type:"t",value:null},pano0Position:{type:"v3",value:new i.Vector3},pano0Matrix1:{type:"m4",value:new i.Matrix4},pano0Matrix2:{type:"m4",value:new i.Matrix4},panoOpacity:{type:"f",value:1}},[s.h.PanoTextureTransition]:{progress:{type:"f",value:0},pano1Map:{type:"t",value:null},pano1Position:{type:"v3",value:new i.Vector3},pano1Matrix1:{type:"m4",value:new i.Matrix4},pano1Matrix2:{type:"m4",value:new i.Matrix4}},[s.h.PanoOverlay]:{overlay0Map:{type:"t",value:null},overlay0Matrix:{type:"m4",value:new i.Matrix4}},[s.h.PanoOverlayTransition]:{overlay1Map:{type:"t",value:null},overlay1Matrix:{type:"m4",value:new i.Matrix4}},[s.h.ColorOverlay]:{colorOverlay:{type:"v4",value:null}},[s.h.MeshPreviewSphere]:{meshPreviewCenter:{type:"v3",value:null},meshPreviewSize:{type:"f",value:.3}},[s.h.Wireframe]:{time:{type:"f",value:0},fill:{type:"c",value:new i.Color(16711680)},stroke:{type:"c",value:new i.Color(16777215)},dualStroke:{type:"b",value:!1},fillEnabled:{type:"b",value:!1},insideAltColor:{type:"b",value:!1},thickness:{type:"f",value:.1},secondThickness:{type:"f",value:.1},dashEnabled:{type:"b",value:!1},dashRepeats:{type:"f",value:10},dashOverlap:{type:"b",value:!1},dashLength:{type:"f",value:.1,range:[0,1]},dashAnimate:{type:"b",value:!1},squeeze:{type:"b",value:!1},squeezeMin:{type:"f",value:.1},squeezeMax:{type:"f",value:1},wireframeOpacity:{type:"f",value:1,range:[0,1]}}},vertexShader:n(17513),fragmentShader:n(36328)},modelOutside:{uniforms:{map:{type:"t",value:null},opacity:{type:"f",value:1},colorOverlay:{type:"v4",value:new i.Vector4(0,0,0,0)}},vertexShader:n(68842),fragmentShader:n(14522)},depth:{uniforms:{opacity:{type:"f",value:1},maxDistance:{type:"f",value:20}},vertexShader:n(2835),fragmentShader:n(51095)},depthPass:{uniforms:{},vertexShader:n(2835),fragmentShader:n(1033)}}},83229:(e,t,n)=>{"use strict";n.d(t,{O7:()=>g,qT:()=>h,Pm:()=>p});var i=n(28124),s=n(84428),r=n(60050),o=n(90697),a=n(63387),l=n(56483);class TextureQualityMap{constructor(){this._configs={},this._orders={},this._maxLod=-1/0,this._maxTs=1/0,this._streamAbove=0,this.resetOnNextRegisterOnce=!1,this.dynamic=!1}static encodeKey(e,t){return e-t}get maxLod(){return this._maxLod}get maxTexelSize(){return this._maxTs}limitStreamingBelow(e){this._streamAbove=e}order(e,t=!1){return t&&!this._orders[e]&&(this._orders[e]=[]),this._orders[e]}reset(){this._configs={},this._orders={},this.dynamic=!1,this._maxTs=1/0,this._maxLod=-1/0}get isDynamic(){return this.dynamic}valid(e){return e in this._configs}get(e){if(!this.valid(e))throw new Error("invalid quality level "+e);return this._configs[e]}max(e){return e<this._streamAbove?this.min(e):this.order(e)[this.order(e).length-1]}min(e){return this.order(e)[0]}fromPixelSize(e,t){const n=this.order(e),i=this.min(e);let s=this.max(e);for(let e=n.length-1;e>=0;e--)t>this.get(n[e]).texelSize&&n.indexOf(s)>n.indexOf(i)&&(s=n[e]);return s}moreDetailed(e,t){let n=this.min(e);const i=this.max(e),s=this.order(e),r=s.indexOf(t);return r+1===s.length?i:(-1!==r&&(n=Math.min(i,s[r+1%s.length])),n)}lessDetailed(e,t){const n=this.order(e),i=n.indexOf(t);let s=t;return-1!==i&&(s=n[Math.max(0,i-1)]),s}minSize(){return Object.values(this._configs).sort(c)[0]}maxSize(){const e=Object.values(this._configs).sort(c);return e[e.length-1]}nearestQuality(e,t){const n=this.order(e),i=this.max(e),s=(0,a.et)(t,1,4,0,n.length-1);return Math.min(i,n[Math.round(s)])}registerQualities(e,t,n,i,s="max"){this.dynamic=!0,this.resetOnNextRegisterOnce&&(this.reset(),this.resetOnNextRegisterOnce=!1);const r=this._configs,o=this.order(e,!0),a=t*i;for(let i=t,c=n;i>=a;i*=.5,c*=2){const n=TextureQualityMap.encodeKey(e,c),a=r[n];(!a||a&&a.assetSize<t)&&(this._maxTs=Math.min(this._maxTs,c),this._maxLod=Math.max(this._maxLod,e),r[n]={key:n,lod:e,texelSize:c,textureSize:i,assetSize:t,assetType:s,tileSize:Math.min(i,l.ZP.textureTileSize)}),-1===o.indexOf(n)&&o.push(n)}o.sort(((e,t)=>r[t].texelSize-r[e].texelSize))}}function c(e,t){return e.textureSize>t.textureSize?1:-1}const d=new TextureQualityMap;var u;(u=d).reset(),u.registerQualities(r.V.Standard,512,.048,.5,"low"),u.registerQualities(r.V.Standard,2048,.012,.5,"high"),u.dynamic=!1,u.resetOnNextRegisterOnce=!0;const h=()=>d;const p=e=>{const t=h();if(!t.isDynamic){const n=t.order(0).map(((e,n)=>({index:n,level:t.get(e)})));for(const{index:t,level:i}of n)if(i.textureSize===e)return t}throw new Error(`Not a valid texture size: ${e}`)},m={[o.S.LOW]:new s.Vector4(1,0,0,.5),[o.S.MEDIUM]:new s.Vector4(1,1,0,.5),[o.S.HIGH]:new s.Vector4(0,1,0,.5),[o.S.ULTRA]:new s.Vector4(0,1,1,.5)};function g(e){return e in m?m[e]:(0,i.G1)(.5,e)}},31055:(e,t,n)=>{"use strict";n.d(t,{P:()=>ModelRatingViewData});var i=n(35424),s=n(67779);class ModelRatingViewData extends i.V{constructor(){super(),this.name="model-rating-view-data",this.isDialogVisible=new s.f(!1),this.setDialogVisible=e=>{this.isDialogVisible.value=void 0!==e?e:!this.isDialogVisible.value}}onDialogVisibleChanged(e){return this.isDialogVisible.onChanged(e)}getIsDialogVisible(){return this.isDialogVisible.value}}},17116:(e,t,n)=>{"use strict";n.d(t,{m:()=>ToggleModelRatingDialogCommand,M:()=>SubmitModelRatingCommand});var i=n(93037);class ToggleModelRatingDialogCommand extends i.m{constructor(e){super(),this.payload={toVisible:e}}}ToggleModelRatingDialogCommand.id="TOGGLE_MODEL_RATING_DIALOG";class SubmitModelRatingCommand extends i.m{constructor(e,t=!1){super(),this.payload={rating:e,didFinish:t}}}SubmitModelRatingCommand.id="SUBMIT_MODEL_RATING"},19582:(e,t,n)=>{"use strict";n.d(t,{E:()=>ModelRatedMessage});var i=n(4117);class ModelRatedMessage extends i.v{constructor(e){super(),this.rating=e}}},7765:(e,t,n)=>{"use strict";n.d(t,{i:()=>i,j:()=>s});const i="features/model-rating-dialog",s="features/model-rating-dialog-prompt"},48730:(e,t,n)=>{"use strict";n.d(t,{ZK:()=>LockNavigationCommand,Lp:()=>UnlockNavigationCommand,Np:()=>NavigateToBox,zs:()=>FocusOnPointInsideCommand,OR:()=>FocusOnPinInsideCommand,ju:()=>NavigateToSweepCommand,Cs:()=>NavigateToLabelCommand,L4:()=>NavigateToPoseCommand});var i=n(93037);class LockNavigationCommand extends i.m{constructor(){super(),this.id="LOCK_NAVIGATION"}}class UnlockNavigationCommand extends i.m{constructor(){super(),this.id="UNLOCK_NAVIGATION"}}class NavigateToBox extends i.m{constructor(e){super(),this.payload=e,this.id="NAVIGATE_TO_BOX"}}class FocusOnPointInsideCommand extends i.m{constructor(e){super(),this.payload=e,this.id="FOCUS_ON_POINT_INSIDE"}}class FocusOnPinInsideCommand extends i.m{constructor(e){super(),this.payload=e,this.id="FOCUS_ON_PIN_INSIDE"}}class NavigateToSweepCommand extends i.m{constructor(e){super(),this.id="MOVE_TO_SWEEP",this.payload=Object.assign({},e)}}class NavigateToLabelCommand extends i.m{constructor(e){super(),this.payload=e,this.id="NAVIGATE_TO_LABEL"}}class NavigateToPoseCommand extends i.m{constructor(e){super(),this.id="NAVIGATE_TO_POSE",this.payload={pose:e}}}},69670:(e,t,n)=>{"use strict";n.d(t,{c:()=>HashtagData});var i=n(35424),s=n(29984);class HashtagData extends i.V{constructor(){super(...arguments),this.name="hashtag-data",this.hashtags=(0,s.C)([])}addHashtags(e){this.atomic((()=>{e.forEach((e=>{this.addHashtag(e)}))}))}addHashtag(e){const t=e.trim().toLowerCase();-1===this.hashtags.map((e=>e.trim().toLowerCase())).indexOf(t)&&this.hashtags.push(e)}getHashtags(){return this.hashtags.values()}}},57756:(e,t,n)=>{"use strict";var i;n.d(t,{U:()=>i}),function(e){e.CLOSED="closed",e.IDLE="idle",e.CREATING="creating",e.OPENING="opening",e.OPEN="open",e.EDITING="editing"}(i||(i={}))},38562:(e,t,n)=>{"use strict";n.d(t,{X:()=>NotesViewData});var i=n(35424),s=n(67779),r=n(29984),o=n(36589),a=n(91754),l=n(57756),c=n(77534),d=n(65143);class NotesViewData extends i.V{constructor(e,t,n,i){super(),this.data=e,this.textParser=t,this.linkHandler=n,this.backgroundTexture=i,this.name="notes-view-data",this.notes=(0,r.C)([]),this.noteListViewsObservable=(0,r.C)([]),this.creatingNewNote=!1,this.openNoteViewObservable=(0,s.Y)(null),this.focusedCommentObservable=(0,s.Y)(null),this.listIndexObservable=(0,s.Y)(-1),this.activeNotationObservable=(0,s.Y)(null),this.suspendVisibilityUpdates=!1,this.notesPhaseObservable=(0,s.Y)(l.U.CLOSED),this.notesFilterObservable=(0,s.Y)(c.$.OPEN),this.searchBlockObservable=(0,s.Y)(null),this.bindings=[],this.bindings.push(e.onChanged(this.updateViewData.bind(this))),this.updateViewData()}dispose(){this.bindings.forEach((e=>e.cancel())),this.bindings=[]}getNotesList(){return this.notes}onNotesChanged(e){return this.notes.onChanged(e)}getNoteView(e){const t=this.notes.findIndex((t=>t.id===e));return-1!==t?this.notes.get(t):null}getTextParser(){return this.textParser}getLinkHandler(){return this.linkHandler}getComment(e,t){const n=this.getNote(e);return(null==n?void 0:n.comments.find((e=>e.id===t)))||null}getAttachment(e,t,n){var i;const s=(null===(i=this.getNote(e))||void 0===i?void 0:i.comments.find((e=>e.id===t)))||null;return(null==s?void 0:s.attachments.find((e=>e.id===n)))||null}updateViewData(){const{searchBlock:e}=this,t=[];this.data.iterate((e=>{var n;const i=this.createNoteView(e);t.push(i),(null===(n=this.openNoteView)||void 0===n?void 0:n.id)===i.id&&this.setOpenNoteView(i)})),this.notes.replace(t);const n=this.getFilteredNotes(),i=e?this.getSearchResults(n,e):this.getNoteListViews(n);this.noteListViewsObservable.replace(i.sort(((e,t)=>t.createdTime-e.createdTime)))}createNoteView(e){return Object.assign(Object.assign({},e),{backgroundTexture:this.backgroundTexture,icon:d.Qk[d.Er.NOTE]})}get noteListViews(){return this.noteListViewsObservable}getFilteredNotes(){const e=this.notesFilter===c.$.ALL,t=this.notesFilter===c.$.RESOLVED,n=[];return this.notes.forEach((i=>{(e||i.resolved===t)&&n.push(i)})),n}getNoteListViews(e){return e.map((e=>{const t=e.comments.get(0);if(!t)throw new Error("No root comment in a note");return{id:e.id,text:t.text,user:e.user,color:e.color,createdTime:e.lastCommentMs,assetType:a.h.NOTE,numAttachments:t.attachments.length,numComments:e.comments.length,commentId:t.id}}))}getSearchResults(e,t){const n=[];return e.forEach((e=>{e.comments.forEach((i=>{const{text:s,user:r}=i;let l=this.getSearchSnippet(s,t);null===l&&t.blockType===o.C.USER&&t.id===r.id&&(l=this.textParser.getPlainText(s)),null!==l&&n.push({id:i.id,text:l,user:i.user,color:e.color,createdTime:i.created.getTime(),assetType:a.h.COMMENT,numAttachments:i.attachments.length,numComments:0,noteId:e.id})}))})),n}getCommentUserMentions(e,t){const n=[];return this.textParser.getUserMentions(e).forEach((e=>{const i=t[e];i&&n.push(i)})),n}getSearchSnippet(e,t){const n=this.textParser.searchMarkdown(e,t);if(!n)return null;const{textLength:i,numMatches:s,matchIndex:r,markdown:o}=n;let a=o,l=r;if(i>20&&l>0){if(1===s){const e=Math.floor((20-t.text.length)/2);e>0&&l>e&&(l-=e)}a=`...${a.substr(l)}`,a.length<20&&(l-=20-a.length,l>0&&(a=`...${o.substr(l)}`))}return a}getNote(e){const t=this.notes.findIndex((t=>t.id===e));return this.notes.get(t)}getNoteAttachments(e){const t=[],n=this.getNote(e);return n&&n.comments.forEach((e=>{t.push(...e.attachments)})),t}get isNewNote(){return this.creatingNewNote}setCreatingNote(e){this.creatingNewNote=e}getPendingNote(){return this.creatingNewNote&&this.openNoteView?this.openNoteView:null}setNotesPhase(e){this.notesPhaseObservable.value=e}get notesPhase(){return this.notesPhaseObservable.value}onNotesPhaseChanged(e){return this.notesPhaseObservable.onChanged(e)}setNotesFilter(e){this.notesFilterObservable.value=e}get notesFilter(){return this.notesFilterObservable.value}onNotesFilterChanged(e){return this.notesFilterObservable.onChanged(e)}setActiveNotation(e){this.activeNotationObservable.value=e}get activeNotation(){return this.activeNotationObservable.value}onActiveNotationChanged(e){return this.activeNotationObservable.onChanged(e)}setListIndex(e){this.listIndexObservable.value=e}get listIndex(){return this.listIndexObservable.value}onListIndexChanged(e){return this.listIndexObservable.onChanged(e)}setOpenNoteView(e){this.openNoteViewObservable.value=e}get openNoteView(){return this.openNoteViewObservable.value}onOpenNoteViewChanged(e){return this.openNoteViewObservable.onChanged(e)}resetOpenNoteView(){const e=this.openNoteView;if(e){const t=this.data.getNoteProperties(e.id);t&&this.updateOpenNoteView(t)}}updateOpenNoteView(e){const t=this.openNoteView;t&&Object.assign(t,e)}setFocusedComment(e){this.focusedCommentObservable.value=e}get focusedComment(){return this.focusedCommentObservable.value}onFocusedCommentChanged(e){return this.focusedCommentObservable.onChanged(e)}setSearchBlock(e){this.searchBlockObservable.value=e}get searchBlock(){return this.searchBlockObservable.value}onSearchBlockChanged(e){return this.searchBlockObservable.onChanged(e)}}},8765:(e,t,n)=>{"use strict";n.d(t,{yK:()=>NotesModeToggleCommand,yW:()=>OpenNoteToCommentCommand,VI:()=>StartNewNoteCommand,FB:()=>SaveNewNoteCommand,gc:()=>CancelNewNoteCommand,_N:()=>CloseNoteCommand,kd:()=>SaveNoteChangesCommand,oH:()=>CancelCommentChangesCommand,df:()=>ToggleNoteToolEditorCommand,oE:()=>SaveNoteAppearanceCommand,yp:()=>ResolveNoteCommand,sG:()=>DeleteNoteCommand,Zd:()=>OpenNoteListViewCommand,x4:()=>EditCommentCommand,Df:()=>AddCommentCommand,Uw:()=>UpdateCommentCommand,mH:()=>DeleteCommentCommand,av:()=>CancelCommentSearchCommand,Kr:()=>SuspendNoteVisibilityUpdates,qZ:()=>ResumeNoteVisibilityUpdates});var i=n(93037),s=n(14832);class NotesModeToggleCommand extends i.m{constructor(e){super(),this.payload={opened:e}}}class OpenNoteToCommentCommand extends i.m{constructor(e,t,n,i=s.n.FadeToBlack){super(),this.payload={noteId:e,docked:t,commentId:n,transitionType:i}}}class StartNewNoteCommand extends i.m{constructor(){super()}}class SaveNewNoteCommand extends i.m{constructor(e){super(),this.payload={text:e}}}class CancelNewNoteCommand extends i.m{constructor(){super()}}class CloseNoteCommand extends i.m{constructor(){super()}}class SaveNoteChangesCommand extends i.m{constructor(e,t){super(),this.payload={noteId:e,text:t}}}class CancelCommentChangesCommand extends i.m{}class ToggleNoteToolEditorCommand extends i.m{constructor(e){super(),this.payload={opened:e}}}class SaveNoteAppearanceCommand extends i.m{constructor(e,t){super(),this.payload={noteId:e,properties:t}}}class ResolveNoteCommand extends i.m{constructor(e,t){super(),this.payload={noteId:e,resolved:t}}}class DeleteNoteCommand extends i.m{constructor(e){super(),this.payload={noteId:e}}}class OpenNoteListViewCommand extends i.m{constructor(e,t,n){super(),this.payload={id:e,isComment:t,editText:n}}}class EditCommentCommand extends i.m{constructor(e){super(),this.payload={id:e}}}class AddCommentCommand extends i.m{constructor(e,t,n){super(),this.payload={noteId:e,text:t,replyId:n}}}class UpdateCommentCommand extends i.m{constructor(e,t,n){super(),this.payload={noteId:e,commentId:t,text:n}}}class DeleteCommentCommand extends i.m{constructor(e,t){super(),this.payload={noteId:e,commentId:t}}}class CancelCommentSearchCommand extends i.m{constructor(){super()}}class SuspendNoteVisibilityUpdates extends i.m{}class ResumeNoteVisibilityUpdates extends i.m{}},77534:(e,t,n)=>{"use strict";var i,s;n.d(t,{$:()=>i,Y:()=>s}),function(e){e.OPEN="open",e.RESOLVED="resolved",e.ALL="all"}(i||(i={})),function(e){e.DEFAULT="default",e.HIGHLIGHTED="highlighted",e.DIMMED="dimmed"}(s||(s={}))},51073:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>NotesModeOpenedMessage,hY:()=>NoteResolutionChangeMessage,JL:()=>FocusCommentMessage});var i=n(4117);class NotesModeOpenedMessage extends i.v{}class NoteResolutionChangeMessage extends i.v{constructor(e,t){super(),this.id=e,this.resolved=t}}class FocusCommentMessage extends i.v{constructor(e){super(),this.commentId=e}}},73156:(e,t,n)=>{"use strict";n.d(t,{IA:()=>s,Mp:()=>r,pE:()=>o,uE:()=>a,GR:()=>l,E8:()=>c,AT:()=>d,TM:()=>u,Ko:()=>h,Rn:()=>p,ZP:()=>m});var i=n(64069);const s="features/notes-mode",r="features/notes",o="features/notes-nudge",a="spaces.notes",l=30,c=15,d=i.x6.VIEWER,u=500,h=500,p="#5c7fff",m=Object.freeze({noteMesh:{scale:{nearBound:1.5,farBound:4.8,maxSize:80,minSize:40,baseViewportSize:800,responsiveness:100}},colors:["#d44441","#f44336","#e91e63","#f78da7","#9c4b92","#673ab7","#5c7fff","#03a9f4","#417505","#00bcd4","#51a868","#37d67a","#cddc39","#fbcd00","#ffac17","#ff6900","#abb8c3","#607d8b"],stem:{length:.23,width:1,opacity:1,transparent:!1,color:"white",alphaTest:.05},anchor:{size:.1},navigation:{anyDistance:!0,visibleDistance:8,cameraClearance:.1,tiltTolerance:25}})},91997:(e,t,n)=>{"use strict";n.d(t,{h:()=>ObjectTagSuggestionsData});var i=n(35424),s=n(67779);class ObjectTagSuggestionsData extends i.V{constructor(e){super(),this.store=e,this.suggestions=[],this.isLoadingObjects=(0,s.Y)(!1),this.classifications=[],this.removeObjectTag=e=>{const t=this.suggestions.findIndex((t=>t.id===e));return!(t<0)&&(this.suggestions.splice(t,1),!0)}}getTag(e){return this.suggestions.find((t=>t.id===e))}getObjectTagIds(){const e=[];for(const t of this.suggestions)e.push(t.id);return e}async create(e,t){return this.store.createObjectTag(e,t).then((t=>(t&&(e.id=t.id,this.add(e)),t)))}add(...e){this.atomic((()=>{for(const t of e)this.suggestions.push(t)})),this.commit()}async setEnabled(e,...t){return this.store.toggleEnabled(e,...t)}async delete(...e){const t=[];for(const n of e){if(await this.store.deleteObjectAnnotation(n)){const e=this.suggestions.find((e=>e.id===n));e&&t.push(e),this.removeObjectTag(n)}}return t}}},98461:(e,t,n)=>{"use strict";n.d(t,{yJ:()=>FilterObjectTagSuggestionCommand,w$:()=>NavigateToObjectTagSuggestionCommand,xN:()=>CloseSelectedTagSuggestionCommand,Bh:()=>ToggleObjectTagEnabledCommand,SO:()=>DeleteObjectTagsCommand,I2:()=>CreateObjectTagCommand,OD:()=>DockObjectTagCommand});var i=n(93037);class FilterObjectTagSuggestionCommand extends i.m{constructor(e){super(),this.id="FILTER_TAG_SUGGESTION",this.payload={ids:e}}}class NavigateToObjectTagSuggestionCommand extends i.m{constructor(e){super(),this.id="NAVIGATE_TO_TAG_SUGGESTION",this.payload={id:e}}}class CloseSelectedTagSuggestionCommand extends i.m{constructor(){super(),this.id="CLOSE_SELECTED_TAG_SUGGESTION"}}class ToggleObjectTagEnabledCommand extends i.m{constructor(e,...t){super(),this.id="TOGGLE_OBJECT_TAG_ENABLED",this.payload={ids:t,enabled:e}}}class DeleteObjectTagsCommand extends i.m{constructor(...e){super(),this.id="DISMISS_OBJECT_TAG",this.payload={ids:e}}}class CreateObjectTagCommand extends i.m{constructor(e,t,n,i){super(),this.id="CREATE_OBJECT_TAG",this.payload={id:e,options:t,pendingAttachments:n,embed:i}}}class DockObjectTagCommand extends i.m{constructor(e){super(),this.id="DOCK_OBJECT_TAG",this.payload={id:e}}}},91988:(e,t,n)=>{"use strict";n.d(t,{M:()=>i,K:()=>s});const i="spaces.object_detection",s=.065},87727:(e,t,n)=>{"use strict";n.d(t,{SI:()=>s,O8:()=>r,Gu:()=>o,bC:()=>a,JU:()=>l,Ct:()=>c,Tm:()=>d,TD:()=>u,mP:()=>h,jX:()=>p,N4:()=>m});var i=n(2252);const s=1e3/60,r=.05,o=.1/60,a=.02,l=25,c=3,d=3,u=.16,h=(0,i.V5)()?45:(0,i.Kr)()?20:35,p=.01,m=2},15019:(e,t,n)=>{"use strict";n.d(t,{z:()=>InstancedPinHeads});var i=n(99295),s=n(5477),r=n(84428),o=n(6244),a=n(45877);const l=new s.Z("InstancedPinHeads");class InstancedPinHeads extends r.InstancedMesh{constructor(e,t,n,s){const l=new r.PlaneBufferGeometry(a.l,a.l),c=new Float32Array(e),d=new r.InstancedBufferAttribute(c,1);l.setAttribute("instanceAlpha",d);const u=new Float32Array(2*e),h=new r.InstancedBufferAttribute(u,2),p=new Float32Array(e),m=new r.InstancedBufferAttribute(p,1),g=new Float32Array(e),f=new r.InstancedBufferAttribute(g,1);l.setAttribute("instanceUvOffset",h),l.setAttribute("instanceUvScale",m),l.setAttribute("instanceStrokeWidth",f);const v=s&&n?new o.Vp(t,n):new o.m0(t,!0);super(l,v,e),this.updateMaskTexture=e=>{if(this.material&&this.material instanceof o.Vp){const t=this.material.uniforms;t.mask.value!==e&&(t.mask.value=e,this.material.uniformsNeedUpdate=!0)}},this.material=v,this.maxCount=e,this.opacityArray=c,this.opacityAttrib=d,this.uvArray=u,this.uvAttrib=h,this.uvScaleArray=p,this.uvScaleAttrib=m,this.strokeWidthArray=g,this.strokeWidthAttrib=f,this.setColorAt(0,new r.Color),this.renderedPins=[],this.renderOrder=i.z.pins}update(e){let t=0;this.renderedPins.length=0;for(const n of e)n.visible&&(t>=this.maxCount?l.error("Instance count is too small!"):(this.setMatrixAt(t,n.pinHeadMatrix),this.setColorAt(t,n.pinColor),this.opacityArray[t]=n.opacity*n.opacityAnimation.value,this.strokeWidthArray[t]=n.pinStrokeWidth,n.pinIconUVOffset&&(this.uvArray[2*t+0]=n.pinIconUVOffset.u,this.uvArray[2*t+1]=n.pinIconUVOffset.v,this.uvScaleArray[t]=n.pinIconUVOffset.uvScale),t++,this.renderedPins.push(n)));this.count=t,this.visible=this.count>0,this.instanceMatrix.needsUpdate=!0,this.opacityAttrib.needsUpdate=!0,this.uvAttrib.needsUpdate=!0,this.uvScaleAttrib.needsUpdate=!0,this.strokeWidthAttrib.needsUpdate=!0,this.instanceColor?this.instanceColor.needsUpdate=!0:l.error("Instance color should be defined")}}},13773:(e,t,n)=>{"use strict";n.d(t,{$:()=>PinHeadMesh});var i=n(85111),s=n(99295),r=n(84428),o=n(78261),a=n(74170),l=n(45877);class PinHeadMesh extends r.Mesh{constructor(e,t,n,i){super(t,n),this.geomScale=new r.Vector3(1,1,1),this.userData.sid=e,this.worldPosition=new r.Vector3,this.cameraPosition=new r.Vector3,this.layers.mask=i.mask,this.renderOrder=s.z.pins,this.scale.set(.01,.01,.01)}dispose(){this.material.dispose(),this.geometry.dispose()}updatePosition(e){this.position.copy(e.stemNormal).setLength(Math.max(e.stemLength,.01))}update(e,t,n){const s=l.Z.pinHeadMesh.scale;this.getWorldPosition(this.worldPosition);const c=e.getWorldPosition(this.cameraPosition).distanceTo(this.worldPosition);this.quaternion.copy(e.quaternion);const d=s.maxSize-(s.maxSize-s.minSize)*(0,o.C)(c,s.nearBound,s.farBound),u=this.worldPosition.clone().project(e),h=new r.Vector3(n.width/2,n.height/2,1).multiply(u),p=new r.Vector3(d/2,0,0).add(h),m=new r.Vector3(2/n.width,2/n.height,1).multiply(p).clone().unproject(e).clone().distanceTo(this.worldPosition)*(1+s.responsiveness/100*(t-1)),g=(0,a.uZ)(m,i.Z.epsilon,m);this.scale.set(g*this.geomScale.x,g*this.geomScale.y,g*this.geomScale.z)}}},6244:(e,t,n)=>{"use strict";n.d(t,{Vp:()=>InstancedPinHeadMaterial,uW:()=>InstancedPinStemMaterial,m0:()=>PinHeadCustomMaterial,Nv:()=>PinHeadMaterial,Dx:()=>PinSelectedMaterial,l0:()=>PinStemMaterial});var i=n(84428),s=n(45877);const r={pinHead:{uniforms:{alpha:{type:"f",value:1},color:{type:"c",value:new i.Color},bg:{type:"t",value:null},mask:{type:"t",value:null}},vertexShader:n(27662),fragmentShader:n(12944)},pinStem:{uniforms:{pinHeadMatrix:{value:new i.Matrix4},resolution:{value:new i.Vector2},alpha:{value:1}},vertexShader:n(43934),fragmentShader:n(6324)},pinSelected:{vertexShader:n(36257),fragmentShader:n(6182)}};class PinHeadMaterial extends i.RawShaderMaterial{constructor(e,t,n,s){const o=i.UniformsUtils.clone(r.pinHead.uniforms);o.bg.value=t,o.mask.value=n,o.color.value.copy(e),o.alpha.value=s,super({fragmentShader:r.pinHead.fragmentShader,vertexShader:r.pinHead.vertexShader,uniforms:o,name:"PinHeadMaterial",transparent:!0})}}class PinStemMaterial extends i.RawShaderMaterial{constructor(){const e=i.UniformsUtils.clone(r.pinStem.uniforms);super({fragmentShader:r.pinStem.fragmentShader,vertexShader:r.pinStem.vertexShader,uniforms:e,name:"PinStemMaterial",linewidth:s.Z.stem.width,opacity:s.Z.stem.opacity,transparent:s.Z.stem.transparent,alphaTest:s.Z.stem.opacity*s.Z.stem.alphaTest})}}class InstancedPinStemMaterial extends i.RawShaderMaterial{constructor(){const e=i.UniformsUtils.clone(r.pinStem.uniforms);super({defines:{INSTANCED:!0},fragmentShader:r.pinStem.fragmentShader,vertexShader:r.pinStem.vertexShader,uniforms:e,name:"InstancedPinStemMaterial",linewidth:s.Z.stem.width,opacity:s.Z.stem.opacity,transparent:s.Z.stem.transparent,alphaTest:s.Z.stem.opacity*s.Z.stem.alphaTest})}}class InstancedPinHeadMaterial extends i.RawShaderMaterial{constructor(e,t){const n=i.UniformsUtils.clone(r.pinHead.uniforms);n.bg.value=e,n.mask.value=t,super({defines:{INSTANCED:!0},fragmentShader:r.pinHead.fragmentShader,vertexShader:r.pinHead.vertexShader,uniforms:n,name:"InstancedPinHeadMaterial",transparent:!0})}}class PinHeadCustomMaterial extends i.RawShaderMaterial{constructor(e,t){super({defines:{INSTANCED:t},vertexShader:n(64656),fragmentShader:n(87686),uniforms:{alpha:{value:1},tDiffuse:{value:e}},name:"InstancedPinHeadCustomMaterial",transparent:!0})}}class PinSelectedMaterial extends i.RawShaderMaterial{constructor(){super({depthTest:!0,depthWrite:!1,transparent:!0,side:i.DoubleSide,vertexShader:r.pinSelected.vertexShader,fragmentShader:r.pinSelected.fragmentShader})}}},40825:(e,t,n)=>{"use strict";n.d(t,{B:()=>PinsViewData});var i=n(35424),s=n(67779),r=n(65143);class PinsViewData extends i.V{constructor(){super(),this.name="pins-view-data",this.pins=new Map,this.creatingPin=!1,this.pinEditorStateObservable=(0,s.Y)(r.V8.IDLE),this.selectedPinObservable=(0,s.Y)(null),this.focusedPinObservable=(0,s.Y)(null),this.editableObservable=(0,s.Y)(!0),this.progressObservable=(0,s.Y)(-1),this.screenPositionObservable=(0,s.Y)(null),this.canPlaceObservable=(0,s.Y)(!0),this.canAddObservable=(0,s.Y)(!0),this.iteratePins=e=>{this.pins.forEach(e)}}updatePin(e){this.pins.set(e.id,e)}getPin(e){return this.pins.get(e)}removePin(e){this.pins.get(e)&&this.pins.delete(e)}removePinsByType(e){this.pins.forEach(((t,n)=>{t.pinType===e&&this.pins.delete(t.id)}))}get creatingNewPin(){return this.creatingPin}updateSelectedPin(e){const t=this.selectedPin;if(t){const n=Object.assign(Object.assign({},t),e);this.updatePin(n),this.setSelectedPin(n)}}setSelectedPin(e){this.selectedPinObservable.value=e}get selectedPin(){return this.selectedPinObservable.value}onSelectedPinChanged(e){return this.selectedPinObservable.onChanged(e)}setFocusedPin(e){this.focusedPinObservable.value=e}get focusedPin(){return this.focusedPinObservable.value}onFocusedPinChanged(e){return this.focusedPinObservable.onChanged(e)}setPinEditorState(e){switch(e){case r.V8.IDLE:this.creatingPin=!1;break;case r.V8.CREATING:this.creatingPin=!0}this.pinEditorStateObservable.value=e}get pinEditorState(){return this.pinEditorStateObservable.value}onPinEditorStateChanged(e){return this.pinEditorStateObservable.onChanged(e)}setProgress(e){this.progressObservable.value=e}get progress(){return this.progressObservable.value}onProgressChanged(e){const t=this.progressObservable.onChanged(e);return t.renew(),t}get screenPosition(){return this.screenPositionObservable.value}setScreenPosition(e){this.screenPositionObservable.value=e}onScreenPositionChanged(e){return this.screenPositionObservable.onChanged(e)}get isPinEditable(){return this.editableObservable.value}setEditablePin(e){this.editableObservable.value=e}onPinEditableChanged(e){return this.editableObservable.onChanged(e)}get canAdd(){return this.canAddObservable.value}setCanAdd(e){this.canAddObservable.value=e}onCanAddChanged(e){return this.canAddObservable.onChanged(e)}get canPlace(){return this.canPlaceObservable.value}setCanPlace(e){this.canPlaceObservable.value=e}onCanPlaceChanged(e){return this.canPlaceObservable.onChanged(e)}}},99380:(e,t,n)=>{"use strict";n.d(t,{Ki:()=>EnablePinCreationCommand,Ar:()=>SelectPinCommand,RH:()=>UnselectPinCommand,fM:()=>CreatePinCommand,tT:()=>CancelNewPinCommand,OL:()=>RemovePinCommand,zM:()=>RemovePinsByTypeCommand,mE:()=>UpdatePinViewsCommand,tE:()=>UpdatePinCommand,ik:()=>ChangePinVisibilityCommand,qN:()=>ChangePinVisibilityByTypeCommand,_Y:()=>ChangePinOpacityCommand,kb:()=>ChangePinOpacityByTypeCommand,yR:()=>ClickOffPinCommand,ip:()=>PlacePinCommand,I$:()=>MovePinCommand});var i=n(93037);class EnablePinCreationCommand extends i.m{constructor(e){super(),this.payload={enabled:e}}}class SelectPinCommand extends i.m{constructor(e,t,n){super(),this.payload={id:e,pinType:t,editable:n}}}class UnselectPinCommand extends i.m{constructor(e,t){super(),this.payload={id:e,pinType:t}}}class CreatePinCommand extends i.m{constructor(e,t,n,i){super(),this.payload={id:e,pin:t,pinType:n,backgroundTexture:i}}}class CancelNewPinCommand extends i.m{constructor(e,t){super(),this.payload={id:e,pinType:t}}}class RemovePinCommand extends i.m{constructor(e,t){super(),this.payload={id:e,pinType:t}}}class RemovePinsByTypeCommand extends i.m{constructor(e){super(),this.payload={pinType:e}}}class UpdatePinViewsCommand extends i.m{constructor(e){super(),this.payload={pinViews:e}}}class UpdatePinCommand extends i.m{constructor(e,t,n){super(),this.payload={id:e,pinType:t,properties:n}}}class ChangePinVisibilityCommand extends i.m{constructor(e,t,n){super(),this.payload={id:e,pinType:t,visible:n}}}class ChangePinVisibilityByTypeCommand extends i.m{constructor(e,t){super(),this.payload={pinType:e,visible:t}}}class ChangePinOpacityCommand extends i.m{constructor(e,t,n){super(),this.payload={id:e,pinType:t,opacity:n}}}class ChangePinOpacityByTypeCommand extends i.m{constructor(e,t,n=[]){super(),this.payload={pinType:e,opacity:t,skipIds:n}}}class ClickOffPinCommand extends i.m{constructor(){super()}}class PlacePinCommand extends i.m{constructor(){super()}}class MovePinCommand extends i.m{constructor(e,t,n){super(),this.payload={id:e,pos:t,previousPos:n}}}},65143:(e,t,n)=>{"use strict";var i;n.d(t,{Er:()=>i,Qk:()=>s,K_:()=>r,V8:()=>o,Od:()=>a}),function(e){e.MATTERTAG="mattertag",e.NOTE="note",e.OBJECT="object"}(i||(i={}));const s={[i.MATTERTAG]:"simple-tag-pin",[i.NOTE]:"comment-large",[i.OBJECT]:"simple-tag-small"};var r,o,a;!function(e){e.DEFAULT="default",e.HIGHLIGHTED="highlighted",e.DIMMED="dimmed"}(r||(r={})),function(e){e.IDLE="idle",e.CREATING="creating",e.PRESSING="pressing",e.PLACING="placing",e.PLACED="placed"}(o||(o={})),function(e){e.UP="up",e.UP_LEFT="up-left",e.UP_RIGHT="up-right",e.DOWN="down",e.DOWN_LEFT="down-left",e.DOWN_RIGHT="down-right",e.LEFT="left",e.RIGHT="right"}(a||(a={}))},57183:(e,t,n)=>{"use strict";n.d(t,{tP:()=>PinHoverChangeMessage,F7:()=>PinClickedMessage,b0:()=>PinPlacedMessage,cd:()=>NewPinReadyMessage,pe:()=>PinPlacementCancelledMessage,bV:()=>PinMovedMessage,WM:()=>PinUnselectedMessage,hu:()=>PinAddCancelledMessage,Q4:()=>PinSelectedMessage});var i=n(4117);class PinHoverChangeMessage extends i.v{constructor(e,t,n){super(),this.id=e,this.hovering=t,this.pinType=n}}class PinClickedMessage extends i.v{constructor(e,t){super(),this.id=e,this.pinType=t}}class PinPlacedMessage extends i.v{constructor(e,t,n){super(),this.id=e,this.pinType=t,this.pinPos=n}}class NewPinReadyMessage extends i.v{}class PinPlacementCancelledMessage extends i.v{}class PinMovedMessage extends i.v{constructor(e,t,n,i){super(),this.id=e,this.pinType=t,this.pinPos=n,this.previousPos=i}}class PinUnselectedMessage extends i.v{constructor(e,t){super(),this.id=e,this.pinType=t}}class PinAddCancelledMessage extends i.v{constructor(e,t){super(),this.id=e,this.pinType=t}}class PinSelectedMessage extends i.v{constructor(e,t){super(),this.id=e,this.pinType=t}}},45877:(e,t,n)=>{"use strict";n.d(t,{l:()=>i,Z:()=>s});const i=1,s=Object.freeze({anchor:{size:.1},stem:{length:.23,width:1,opacity:1,transparent:!0,color:"white",alphaTest:.05},pinHeadMesh:{scale:{nearBound:1.5,farBound:4.8,maxSize:80,minSize:40,baseViewportSize:800,responsiveness:100}}})},71266:(e,t,n)=>{"use strict";n.d(t,{k:()=>r,m:()=>o});var i=n(73996),s=n(65143);function r(e,t){switch(t){case s.K_.DEFAULT:return e.baseColor;case s.K_.DIMMED:return e.dimmedColor;case s.K_.HIGHLIGHTED:return e.hoverColor}}function o(e,t,n){const r=n?t:void 0;return r&&i.f[r]?r:s.Qk[e]}},51678:(e,t,n)=>{"use strict";n.d(t,{x:()=>PluginData});var i=n(35424),s=n(66910);const r=function(e){return`${e.applicationKey}.${e.pluginId}`};class PluginData extends i.V{constructor(){super(...arguments),this.plugins=(0,s.q)()}get(e){const t=r(e);return this.plugins.get(t)}set(e,t,n){const i=r(e);this.plugins.set(i,{applicationKey:e.applicationKey,module:t,pluginId:e.pluginId,disposeEnv:n})}delete(e){const t=r(e);this.plugins.delete(t)}}},43402:(e,t,n)=>{"use strict";n.d(t,{n:()=>Snapcaster,x:()=>SurfaceEdgeFinderCompleteMessage});var i=n(69910),s=n(84428);class LegacyThreeGeometry{constructor(){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[],[]],this.boundingBox=null,this.boundingSphere=null}}class Face3{constructor(e,t,n,i,r,o=0){this.a=e,this.b=t,this.c=n,this.materialIndex=o,this.a=e,this.b=t,this.c=n,this.normal=i&&!Array.isArray(i)&&i.isVector3?i:new s.Vector3,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&!Array.isArray(r)&&r.isColor?r:new s.Color,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o}clone(){return new Face3(this.a,this.b,this.c,this.normal,this.color).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}var r=n(5477),o=n(994);const a=new r.Z("surface-edge-finder"),l=new s.Triangle,c=["a","b","c"];class Face extends Face3{constructor(e,t,n,i){super(e.a,e.b,e.c,e.normal),this.va=t,this.vb=n,this.vc=i,this.area=l.set(this.va.vector,this.vb.vector,this.vc.vector).getArea(),this.midpoint=l.getMidpoint(new s.Vector3),this.vertices=[this.va,this.vb,this.vc],t.faces.push(this),n.faces.push(this),i.faces.push(this)}}class Vertex{constructor(e){this.vector=e,this.faces=[]}}class Surface{constructor(){this.area=0,this.normal=new s.Vector3,this.midpoint=new s.Vector3,this.faces=[],this.normalSum=new s.Vector3,this.midpointSum=new s.Vector3}add(e){e.surface&&e.surface.remove(e),this.faces.push(e),this.area+=e.area,this.midpointSum.add(e.midpoint),this.normalSum.add(e.normal),this.recalcFromSums(),e.surface=this}remove(e){e.surface&&(this.faces.splice(this.faces.indexOf(e),1),this.area-=e.area,this.midpointSum.sub(e.midpoint),this.normalSum.sub(e.normal),this.recalcFromSums()),e.surface=null}recalcFromSums(){this.normal.copy(this.normalSum).normalize(),this.midpoint.copy(this.midpointSum).divideScalar(this.faces.length)}mergeSurfaces(e){for(const t of e.faces)t.surface=this,this.faces.push(t);this.area+=e.area,this.normalSum.add(e.normalSum),this.midpointSum.add(e.midpointSum),this.recalcFromSums(),e.faces=[],e.area=0,e.normal.set(0,0,0),e.normalSum.set(0,0,0),e.midpointSum.set(0,0,0),e.midpoint.set(0,0,0)}getEdges(){const e={},t={};for(const t of this.faces)for(let n=0;n<3;n++){const i=t[c[n]],s=t[c[(n+1)%3]],r=Math.min(i,s)+","+Math.max(i,s);if(void 0===e[r]){const t={edge1:i,edge2:s,isEdge:!0};e[r]=t}else e[r].isEdge=!1}for(const{edge1:n,edge2:i,isEdge:s}of Object.values(e))s&&(t[n]||(t[n]=[]),t[n].push(i),t[i]||(t[i]=[]),t[i].push(n));return t}getCircularPaths(e){const t=this.getEdges(),n=new Set,i=[],s=Object.keys(t).map((e=>parseInt(e,10)));let r;for(;r=s.pop();){const s=[];for(;r;){let i;s.push(e[r]);let o=0;for(const s of t[r]){const t=Math.min(r,s)+","+Math.max(r,s);if(n.has(t))continue;const a=e[r].vector.distanceToSquared(this.midpoint);(void 0===i||a>o)&&(i=s,o=a)}if(!i)break;{const e=Math.min(r,i)+","+Math.max(r,i);n.add(e),r=i}}s.length>2&&i.push(s)}return i}}class SurfaceEdgeFinder{constructor(){this.surfaces=new Set,this.lines=[],this.points=[]}*run(e,t=[1,5,10],n=.2,r=.01,l=20){const c=function(e){const t=new LegacyThreeGeometry,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)throw Error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.");const r=i.position,o=i.normal,a=i.color,l=i.uv,c=i.uv2;void 0!==c&&(t.faceVertexUvs[1]=[]);for(let e=0;e<r.count;e++)t.vertices.push((new s.Vector3).fromBufferAttribute(r,e)),void 0!==a&&t.colors.push((new s.Color).fromBufferAttribute(a,e));function d(e,n,i,r=0){const d=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=void 0===o?[]:[(new s.Vector3).fromBufferAttribute(o,e),(new s.Vector3).fromBufferAttribute(o,n),(new s.Vector3).fromBufferAttribute(o,i)],h=new Face3(e,n,i,u,d,r);t.faces.push(h),void 0!==l&&t.faceVertexUvs[0].push((new s.Vector2).fromBufferAttribute(l,e),(new s.Vector2).fromBufferAttribute(l,n),(new s.Vector2).fromBufferAttribute(l,i)),void 0!==c&&t.faceVertexUvs[1].push((new s.Vector2).fromBufferAttribute(c,e),(new s.Vector2).fromBufferAttribute(c,n),(new s.Vector2).fromBufferAttribute(c,i))}const u=e.groups;if(u.length>0)for(let e=0;e<u.length;e++){const t=u[e],i=t.start;for(let e=i,s=i+t.count;e<s;e+=3)void 0!==n?d(n.getX(e),n.getX(e+1),n.getX(e+2),t.materialIndex):d(e,e+1,e+2,t.materialIndex)}else if(void 0!==n)for(let e=0;e<n.count;e+=3)d(n.getX(e),n.getX(e+1),n.getX(e+2));else for(let e=0;e<r.count;e+=3)d(e,e+1,e+2);return t}(e),d=c.vertices.map((e=>new Vertex(e))),u=[];for(const e of c.faces)u.push(new Face(e,d[e.a],d[e.b],d[e.c])),yield;for(let e=0,t=u.length;e<t;e++){const t=u[e];(new Surface).add(t)}for(const e of t)yield*this.mergeSurfacesByNormal(u,e);for(const e of u)this.surfaces.add(e.surface);let h=0;const p=[];for(const e of this.surfaces){if(e.area<=n)continue;const t=e.getCircularPaths(d);for(const e of t)this.cullPath(e,((e,t)=>{if(e.length()<r||t.length()<r)return h++,!1;const n=e.angleTo(t)*o.MN;return!(n<l||n>180-l)||(h++,!1)})),e.length>2&&p.push(e);yield}a.debug(`Culled ${h} path points`);const m=new Set,g=new Set,f=e=>`${e.x.toFixed(3)},${e.y.toFixed(3)},${e.z.toFixed(3)}`,v=e=>`${f(e.start)}:${f(e.end)}`,b=e=>`${f(e.end)}:${f(e.start)}`;for(const e of p)for(let t=0;t<e.length;t++){const n=e[t].vector,s=e[(t+1)%e.length].vector,r=new i.FM(n,s),o=v(r),a=b(r),l=f(n);g.has(o)||g.has(a)||(g.add(o),g.add(a),this.lines.push(r)),m.has(l)||(m.add(l),this.points.push(new i.UQ(n)))}yield}cullPath(e,t){const n=new s.Vector3,i=new s.Vector3;let r=!0;for(;r;){r=!1;for(let s=0;s<e.length&&e.length>2;s++){const o=e[0===s?e.length-1:s-1].vector,a=e[s].vector,l=e[(s+1)%e.length].vector;n.copy(o).sub(a),i.copy(l).sub(a),t(n,i)||(e.splice(s,1),r=!0,s--)}}}*mergeSurfacesByNormal(e,t,n=5){let i=-1,s=0;for(;0!==i&&s++<n;){a.debug(`Merging surfaces by normal angle threshold: ${t}`);const n=Math.cos(o.Ue*t);i=0;let s=0;for(const t of e){s++%1e3==0&&(yield);for(const e of t.vertices)for(const s of e.faces){const e=s.surface;t.surface!==e&&t.surface.normal.dot(e.normal)>=n&&(t.surface.faces.length>e.faces.length?t.surface.mergeSurfaces(e):e.mergeSurfaces(t.surface),i++)}}i&&a.debug(`Merged ${i} surfaces by normal...`)}}}var d=n(78767),u=n(19945),h=n(4117);const p=new r.Z("snapcaster");var m;!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.WORKING=1]="WORKING",e[e.READY=2]="READY"}(m||(m={}));class Snapcaster{constructor(e,t){this.cameraData=e,this.engine=t,this.meshes=new Map,this.newMeshes=new Set,this.raycaster=new s.Raycaster,this.filterSnapFeature=e=>{var t,n;const{meshName:i}=e;return!i||!1!==(null===(n=null===(t=this.meshes.get(i))||void 0===t?void 0:t.filter)||void 0===n?void 0:n.call(t,e))},this.cast=(e,t,n,r)=>{let o;n&&r&&(o=(new s.Plane).setFromNormalAndCoplanarPoint(r,n)),this.raycaster.set(e.origin,e.direction);const a=this.snappingOctree.raycast(this.raycaster,t,this.filterSnapFeature)||[],l=e=>{let t=(1+e.distance)*(1+e.distanceToRay)**2;return e.object instanceof i.UQ&&(t/=10),o&&o.distanceToPoint(e.point)<-.2&&(t+=10),t};return a.sort(((e,t)=>l(e)-l(t))),a},this.add=(...e)=>{for(const t of e)this.snappingOctree.add(t)},this.remove=(...e)=>{for(const t of e)this.snappingOctree.remove(t)}}get snappingOctree(){return this.preloadMeshSnapping(),this._snappingOctree}setupOctree(e){this._snappingOctree=new i.ZP(e)}async preloadMeshSnapping(){var e;!this.populateProcess&&this.newMeshes.size&&(this.populateProcess=await this.engine.commandBinder.issueCommand(new d.S("snapping",this.buildSnappingForMeshes(),6e4)),await(null===(e=this.populateProcess)||void 0===e?void 0:e.promise),this.populateProcess=null)}*buildSnappingForMeshes(){const e=new s.Vector3;for(;;){let t=null;for(const n of this.newMeshes){const i=this.meshes.get(n);if(i){const{geometry:s}=i;if(!s){p.error("No mesh to generate snapping information from!"),i.status=m.READY;continue}const r=(0,u.A5)(s).getCenter(e).distanceTo(this.cameraData.pose.position);(!t||r<t.distance)&&(t={meshName:n,geometry:s,distance:r,info:i})}}if(!t)break;this.newMeshes.delete(t.meshName),t.info.status=m.WORKING,yield*this.buildSnappingForGeometry(t.geometry,t.info),t.info.status=m.READY,t.info.geometry=null,yield}p.info(`Snapping found ${this._snappingOctree.pointCount} points and ${this._snappingOctree.lineCount} lines`)}*buildSnappingForGeometry(e,t){e.computeVertexNormals(),yield;const n=new SurfaceEdgeFinder;yield*n.run(e),p.debug(`Mesh done, added ${n.points.length} points and ${n.lines.length} lines`);for(const e of n.points)e.meshName=t.meshName,e.meta=t.meta,this._snappingOctree.add(e);for(const e of n.lines)e.meshName=t.meshName,e.meta=t.meta,this._snappingOctree.add(e);this.engine.broadcast(new SurfaceEdgeFinderCompleteMessage(n))}forEachSnapFeature(e,t=!1){this.snappingOctree.traverse((n=>{t&&!this.filterSnapFeature(n)||e(n)}))}addMeshGeometry(e,t,n,i){this.meshes.has(e)||(this.meshes.set(e,{meshName:e,geometry:t,status:m.UNINITIALIZED,meta:n,filter:i}),this.newMeshes.add(e))}removeMeshGeometry(e){const t=this.meshes.get(e);t&&t.status===m.UNINITIALIZED&&(this.meshes.delete(e),this.newMeshes.delete(e))}}class SurfaceEdgeFinderCompleteMessage extends h.v{constructor(e){super(),this.edgeFinder=e}}},368:(e,t,n)=>{"use strict";n.d(t,{P:()=>RaycasterData,E:()=>RaycastHit});var i=n(84428),s=n(35424);class RaycasterData extends s.V{constructor(){super(...arguments),this.name="pointer",this.hit=null,this.hits=[],this.pointerNdcPosition=new i.Vector2,this.pointerScreenPosition=new i.Vector2,this.pointerOrigin=new i.Vector3,this.pointerDirection=new i.Vector3,this.pointerRay=new i.Ray}}class RaycastHit{constructor(e,t,n,i){this.point=e,this.normal=t,this.object=n,this.intersection=i,this.face={normal:t}}}},97744:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>RaycasterModule});var i=n(57227),s=n(14877),r=n(84428);function o(e){return"excludeFromOctree"in e}var a=n(63387),l=n(19945);class ColliderNode{constructor(){this.parent=null,this.raycastDistance=1/0,this.distance=1/0}updateRaycastDistance(e){this.raycastDistance=this.bounds.distanceToPoint(e)}updateDistanceToBounds(e){this.distance=this.bounds.distanceToPoint(e)}}class ColliderMeshTarget extends ColliderNode{constructor(e){super(),this.mesh=e,this.bounds=(0,l.A5)(this.mesh.geometry).clone().applyMatrix4(this.mesh.matrixWorld),this.center=this.bounds.getCenter(new r.Vector3)}raycast(e,t){this.mesh.visible&&this.mesh.raycast(e,t)}nearestPointOnGeometry(e){const t=e.clone().applyMatrix4((new r.Matrix4).copy(this.mesh.matrixWorld).invert());let n;const i=this.mesh.geometry.boundsTree;return n=i?i.closestPointToPoint(t):(0,l.GO)(this.mesh.geometry,t),n?(n.point.applyMatrix4(this.mesh.matrixWorld),{object:this.mesh,point:n.point,distance:n.point.distanceTo(e),faceIndex:n.faceIndex}):null}}class ColliderOctreeNode extends ColliderNode{constructor(e,t,n){super(),this.level=t,this.leafMinSize=n,this.childNodes=[],this.children=[],this.listeners={},this.bounds=e.clone(),this.size=e.getSize(new r.Vector3),this.center=e.getCenter(new r.Vector3)}get depth(){return this.level}*addMeshes(e){e.updateMatrixWorld(!0);const t=[];e.traverse((e=>{!(e instanceof r.Mesh&&e.geometry)||o(e)&&e.excludeFromOctree||t.push(e)}));for(const e of t)this.addMesh(new ColliderMeshTarget(e))}removeMeshes(e){let t=!1;for(let n=0;n<this.children.length;n++){const i=this.children[n];i instanceof ColliderMeshTarget&&i.mesh.id===e.id&&(i.parent=null,this.children.splice(n,1),this.emit("removed",this,i),t=!0)}if(!t)throw new Error("Mesh that is being attempted removed does not exist in this node.")}addMesh(e){let t=!1;if(this.size.length()>this.leafMinSize){0===this.childNodes.length&&this.buildChildNodes();for(const n of this.childNodes)n.bounds.containsBox(e.bounds)&&(t=!0,n.addMesh(e))}t||this.add(e)}add(e){if(e.parent)throw new Error("ColliderNode already has a parent, remove before trying to add in another node");e.parent=this,this.children.push(e),this.emit("added",this,e)}buildChildNodes(){const e=this.size.multiplyScalar(.5);for(let t=0;t<2;t++)for(let n=0;n<2;n++)for(let i=0;i<2;i++){const s=this.bounds.min.x+e.x*i,o=s+e.x,a=this.bounds.min.y+e.y*t,l=a+e.y,c=this.bounds.min.z+e.z*n,d=c+e.z,u=new r.Box3(new r.Vector3(s,a,c),new r.Vector3(o,l,d)),h=new ColliderOctreeNode(u,this.level+1,this.leafMinSize);this.childNodes.push(h),this.add(h)}}raycast(e,t){if(!0===e.ray.intersectsBox(this.bounds))for(const n of this.children)n.raycast(e,t)}pick(e,t,n){if(!e.ray.intersectsBox(this.bounds))return t;for(const t of this.children)t.updateRaycastDistance(e.ray.origin);this.children.sort(((e,t)=>e.raycastDistance-t.raycastDistance));for(const i of this.children){if(t&&t.distance<i.raycastDistance)break;if(n(i))if(i instanceof ColliderOctreeNode)t=i.pick(e,t,n);else{const n=[];i.raycast(e,n);for(const e of n)(!t||t.distance>e.distance)&&(t=e)}}return t}nearestTo(e,t,n=null){for(const t of this.children)t.updateDistanceToBounds(e);this.children.sort(((e,t)=>e.distance-t.distance));for(const i of this.children){if(0!==i.distance&&n&&n.distance<i.distance)break;if(t(i))if(i instanceof ColliderOctreeNode)n=i.nearestTo(e,t,n);else if(i instanceof ColliderMeshTarget){const t=i.nearestPointOnGeometry(e);if(t){(!n||n.distance>t.distance)&&(n=t)}}}return n}getAllBounds(e,t=0,n=1/0,i=!1){for(const s of this.children)this.level>=t&&this.level<=n&&(i||e.push(s.bounds.clone())),s instanceof ColliderOctreeNode&&s.getAllBounds(e,t,n,i)}emit(e,...t){const n=this.listeners[e]||[];for(const e of n)e(...t);this.parent&&this.parent.emit(e,...t)}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}}class OctreeCollider{constructor(e,t){this.meshToNodes={},this._depth=0;const n=(0,a.rj)(e);this.root=new ColliderOctreeNode(n,0,t),this.root.on("added",((e,t)=>{e.depth>this._depth&&(this._depth=e.depth),t instanceof ColliderMeshTarget&&(this.meshToNodes[t.mesh.id]||(this.meshToNodes[t.mesh.id]=[]),this.meshToNodes[t.mesh.id].push(t))})),this.root.on("removed",((e,t)=>{if(t instanceof ColliderMeshTarget){const e=this.meshToNodes[t.mesh.id];for(let n=0;n<e.length;n++)e[n]===t&&e.splice(n,1)}}))}get depth(){return this._depth}*addMeshesAsync(e){yield*this.root.addMeshes(e)}addMeshes(e){for(const t of this.root.addMeshes(e));}removeMeshes(e){e.traverse((e=>{const t=this.meshToNodes[e.id]||[];for(const n of t)n.parent&&n.parent.removeMeshes(e)}))}raycast(e){const t=[];return this.root.raycast(e,t),t}getAllBounds(e=0,t=1/0,n=!1){const i=[];return this.root.getAllBounds(i,e,t,n),i}pick(e,t){const n=e.firstHitOnly;e.firstHitOnly=!0;const i=this.root.pick(e,null,(e=>!(t&&e instanceof ColliderMeshTarget)||t(e.mesh)));return e.firstHitOnly=n,i}nearestMeshTo(e,t){const n=this.root.bounds.clampPoint(e,new r.Vector3);return this.root.nearestTo(n,(e=>!(t&&e instanceof ColliderMeshTarget)||t(e.mesh)))}getDebugBoundsMesh(e=16777215,t=0,n=1/0,i=!1){const s=this.getAllBounds(t,n,i),o=new r.LineBasicMaterial({color:e});if(s.length>0){const e=[];for(const t of s){const n=new r.Box3Helper(t);n.updateMatrixWorld(!0),n.geometry.applyMatrix4(n.matrixWorld),e.push(n.geometry)}const t=(0,l.qf)(e);return new r.LineSegments(t,o)}return new r.LineSegments(new r.BufferGeometry,o)}}class Raycaster{constructor(e,t){this.camera=e,this.defaultRaycastFilter=t,this.meshes={},this.octreeEnabledMeshes={},this.meshFilters=new Map,this.raycaster=new r.Raycaster,this.prevRay=new r.Ray,this._hitCache=[],this.getOctree=()=>this.octree}init(){this.raycaster=new r.Raycaster,this.raycaster.camera=this.camera,this.raycaster.params.Line&&(this.raycaster.params.Line.threshold=.1)}dispose(){this._hitCache.length=0,this.meshes={}}cast(e,t,n){if(e&&t&&(this.prevRay.copy(this.raycaster.ray),this.raycaster.set(e,t)),!n&&this.prevRay.equals(this.raycaster.ray))return this._hitCache;if(this.raycaster.layers.mask=this.camera.layers.mask,this._hitCache.length=0,this.octree){const e=this.getRaycastFilter(c.OctreeMeshes,n),t=this.octree.pick(this.raycaster,e);t&&this._hitCache.push(t)}const i=this.getRaycastFilter(c.DynamicMeshes,n);for(const e in this.meshes){const t=this.meshes[e];if(i(t)){const e=this.raycaster.intersectObject(t,!0);this._hitCache=this._hitCache.concat(e)}}return this._hitCache.sort(this.sortIntersectionsByDistance),this.prevRay.copy(this.raycaster.ray),this._hitCache}pick(e,t,n){this.raycaster.set(e,t);const i=this.getRaycastFilter(c.OctreeMeshes,n);return this.octree.pick(this.raycaster,i)}nearest(e,t){return this.octree.nearestMeshTo(e,this.getRaycastFilter(c.OctreeMeshes,t))}setupOctree(e){this.octree=new OctreeCollider(e,.5);for(const e of Object.keys(this.meshes))if(this.octreeEnabledMeshes[e]){const t=this.meshes[e];this.octree.addMeshes(t)}return this.octree}addTarget(e,t,n){const i=e,s=i.collider?i.collider:e;this.meshes[e.id]=s,n&&this.meshFilters.set(s,n),this.octreeEnabledMeshes[e.id]=t,this.octree&&t&&(this.octree.addMeshes(e),e.traverse((e=>{!(e instanceof r.Mesh)||o(e)&&e.excludeFromOctree||(this.octreeEnabledMeshes[e.id]=t,n&&this.meshFilters.set(e,n))})))}removeTarget(e){this.octree&&this.octreeEnabledMeshes[e.id]&&(this.octree.removeMeshes(e),this.octreeEnabledMeshes[e.id]=!1,e.traverse((e=>{e instanceof r.Mesh&&(this.octreeEnabledMeshes[e.id]=!1,this.meshFilters.delete(e))})));const t=this.meshes[e.id];t&&(this.meshFilters.delete(t),delete this.meshes[e.id])}getRaycastFilter(e,t){const n=t||this.defaultRaycastFilter,i=t=>{const n=this.octreeEnabledMeshes[t.id];switch(e){case c.DynamicMeshes:return!n;case c.OctreeMeshes:return n}};return e=>i(e)&&n(e)&&this.checkMeshSpecificFilter(e)}checkMeshSpecificFilter(e){const t=this.meshFilters.get(e);return!t||t(e)}sortIntersectionsByDistance(e,t){return e.distance>t.distance?1:e.distance<t.distance?-1:0}render(){}activate(){}deactivate(){}}var c;!function(e){e[e.OctreeMeshes=0]="OctreeMeshes",e[e.DynamicMeshes=1]="DynamicMeshes"}(c||(c={}));var d=n(368),u=n(43402),h=n(7692);class RaycastPointerScreen{constructor(e,t){this.raycaster=e,this.cameraData=t,this.lastHits=[],this.lastRay=new r.Ray(new r.Vector3(1,1,1),new r.Vector3(0,1,0)),this.currentRay=new r.Ray,this.pointer=new r.Vector2(-2,-2),this.origin=new r.Vector3,this.direction=new r.Vector3,this.cast=e=>{const t=this.pointerRay;return!e&&this.lastRay.equals(t)||(this.lastHits=this.raycaster.cast(t.origin,t.direction,e).slice(),this.lastRay.copy(t)),this.lastHits},this.updatePointer=e=>{this.pointer.distanceToSquared(e)>2e-5&&this.pointer.set(e.x,e.y)}}get pointerRay(){const{origin:e,direction:t}=this.updateDirections();return this.currentRay.set(e,t)}get ndcPosition(){return this.pointer}updateDirections(){return(0,h.Kh)(this.cameraData.pose,this.origin.set(this.pointer.x,this.pointer.y,-1),this.origin),(0,h.Kh)(this.cameraData.pose,this.direction.set(this.pointer.x,this.pointer.y,1),this.direction),this.direction.sub(this.origin).normalize(),{origin:this.origin,direction:this.direction}}}class RaycastPointerDataUpdate{constructor(e,t,n){this.raycaster=e,this.data=t,this.cameraData=n,this.cache={normal4:new r.Vector4,normal:new r.Vector3,rotationMatrix:new r.Matrix4,ndc3:new r.Vector3}}beforeRender(){if(this.raycaster.pointer.pointerRay.equals(this.data.pointerRay))return;this.data.pointerRay.copy(this.raycaster.pointer.pointerRay),this.data.pointerOrigin.copy(this.data.pointerRay.origin),this.data.pointerDirection.copy(this.data.pointerRay.direction);const e=this.raycaster.pointer.cast();if(this.data.hits.length=0,this.data.hits.push(...e),this.data.pointerNdcPosition.copy(this.raycaster.pointer.ndcPosition),this.cache.ndc3.set(this.data.pointerNdcPosition.x,this.data.pointerNdcPosition.y,.5),this.data.pointerScreenPosition.copy((0,h.fi)(this.cameraData.width,this.cameraData.height,this.cache.ndc3)),e.length>0){const t=e[0];if(t&&t.face){const e=t.face.normal;this.cache.normal4.set(e.x,e.y,e.z,0),this.cache.rotationMatrix.extractRotation(t.object.matrixWorld),this.cache.normal4.applyMatrix4(this.cache.rotationMatrix),this.cache.normal.set(this.cache.normal4.x,this.cache.normal4.y,this.cache.normal4.z),this.data.hit=new d.E(t.point.clone(),this.cache.normal.clone(),t.object,t)}}else this.data.hit=null;this.data.commit()}init(){}render(){}dispose(){}activate(){}deactivate(){}}var p=n(15099),m=n(43816),g=n(69524),f=n(14547);class RaycasterModule extends i.Y{constructor(){super(...arguments),this.name="raycaster",this.raycasterPointerData=new d.P,this.overridePointer=null,this.setOverridePointer=e=>{this.overridePointer=e}}async init(e,t){t.market.register(this,d.P,this.raycasterPointerData);const[n,i]=await Promise.all([t.getModuleBySymbol(s.y.WEBGL_RENDERER),t.market.waitForData(p.M_)]),r=n.getCamera();this.raycaster=new Raycaster(r,m.Nr),t.addComponent(this,this.raycaster),this.defaultPointer=new RaycastPointerScreen(this.raycaster,i),this.snapcaster=new u.n(i,t);const o=new RaycastPointerDataUpdate(this,this.raycasterPointerData,i);t.addComponent(this,o),t.broadcast(new g.em(f.Y.Raycaster)),t.broadcast(new g.em(f.Y.Octree)),t.broadcast(new g.em(f.Y.Snapping))}dispose(){}setupOctree(e){this.raycaster.setupOctree(e),this.snapcaster.setupOctree(e)}getOctree(){return this.raycaster.getOctree()}get pointer(){return null!==this.overridePointer?this.overridePointer:this.defaultPointer}get targets(){return this.raycaster}get picking(){return this.raycaster}get snapping(){return this.snapcaster}}},93093:(e,t,n)=>{"use strict";n.d(t,{oM:()=>RequestRenderTargetCommand,sH:()=>Context2dCaptureCommand,vU:()=>ScreenCaptureCommand,sp:()=>RenderToCubemapCommand,fZ:()=>EquirectangularCommand,ep:()=>ComposeTargetsCommand});var i=n(93037);class RequestRenderTargetCommand extends i.m{constructor(){super(...arguments),this.id="RequestRenderTargetCommand"}}class Context2dCaptureCommand extends i.m{constructor(e,t){super(),this.payload={renderTarget:e,context:t}}}class ScreenCaptureCommand extends i.m{constructor(e,t,n){super(),this.payload={renderTarget:e,sceneObject:t,camera:n}}}class RenderToCubemapCommand extends i.m{constructor(e,t,n){super(),this.payload={renderTarget:e,sceneObject:t,camera:n}}}class EquirectangularCommand extends i.m{constructor(e,t,n=0){super(),this.payload={renderTarget:e,texture:t,heading:n}}}class ComposeTargetsCommand extends i.m{constructor(e,t){super(),this.payload={target1:e,target2:t}}}},17566:(e,t,n)=>{"use strict";n.d(t,{vP:()=>r,Xk:()=>o,jJ:()=>a,fY:()=>l});var i=n(81402);let s=null;const r=async(e,t)=>{const i=new Uint8Array(e.width*e.height*4);if(e.readRenderTargetData(i),!s){const e=await Promise.all([n.e(976),n.e(564),n.e(718)]).then(n.bind(n,2564));s=e.createJpegEncodeWorker()}const r=i.buffer,o=await s.exec({data:r,width:e.width,height:e.height,options:{exif:t,quality:85,flipY:!0}},[r]);return new Uint8Array(o.data)},o=e=>new Blob([e],{type:"image/jpeg"}),a=e=>"data:image/jpg;base64,"+(0,i.$B)(e),l=(e,t,n,i)=>'http://ns.adobe.com/xap/1.0/\0<?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?><x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:GPano="http://ns.google.com/photos/1.0/panorama/"><GPano:CroppedAreaImageHeightPixels>'+t+"</GPano:CroppedAreaImageHeightPixels><GPano:CroppedAreaImageWidthPixels>"+e+"</GPano:CroppedAreaImageWidthPixels><GPano:CroppedAreaLeftPixels>0</GPano:CroppedAreaLeftPixels><GPano:CroppedAreaTopPixels>0</GPano:CroppedAreaTopPixels><GPano:FullPanoHeightPixels>"+t+"</GPano:FullPanoHeightPixels><GPano:FullPanoWidthPixels>"+e+"</GPano:FullPanoWidthPixels><GPano:ProjectionType>equirectangular</GPano:ProjectionType><GPano:UsePanoramaViewer>True</GPano:UsePanoramaViewer><GPano:InitialViewHeadingDegrees>"+n+"</GPano:InitialViewHeadingDegrees><GPano:InitialViewPitchDegrees>"+i+'</GPano:InitialViewPitchDegrees><GPano:CaptureSoftware>Matterport Camera</GPano:CaptureSoftware><GPano:StitchingSoftware>Matterport Cloud</GPano:StitchingSoftware></rdf:Description></rdf:RDF></x:xmpmeta><?xpacket end="w"?>'},29755:(e,t,n)=>{"use strict";n.d(t,{Z:()=>RoomData});var i=n(35424),s=n(67779);class RoomData extends i.V{constructor(e){if(super(),this.name="rooms",this.selected=new s.f(null),this._rooms={},this.floorToRoomsMap=new Map,e)for(const t of Object.values(e))this.add(t)}add(e){this._rooms[e.id]=e;const t=this.floorToRoomsMap.get(e.floorId);t?t.push(e):this.floorToRoomsMap.set(e.floorId,[e])}remove(e){const t=this.get(e);if(!t)return;const n=this.floorToRoomsMap.get(t.floorId);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}delete this._rooms[e]}rooms(){const e=this._rooms,t=Object.keys(this._rooms);return function*(){for(const n of t)yield e[n]}()}get roomCount(){return Object.keys(this._rooms).length}get collection(){return this._rooms}get(e){return this._rooms[e]}getByMeshSubgroup(e){return Object.values(this._rooms).find((t=>t.meshSubgroup===e))}roomsByFloor(e){return this.floorToRoomsMap.get(e)||[]}}},38182:(e,t,n)=>{"use strict";n.d(t,{D:()=>RoomVisitedMessage});var i=n(4117);class RoomVisitedMessage extends i.v{constructor(e,t,n,i,s,r){super(),this.roomId=e,this.meshSubgroup=t,this.viewmode=n,this.visitCount=i,this.roomCount=s,this.roomType=r}}},78767:(e,t,n)=>{"use strict";n.d(t,{S:()=>ScheduleProcessCommand});var i=n(93037);class ScheduleProcessCommand extends i.m{constructor(e,t,n,i=1){super(),this.id="SCHEDULE_PROCESS_COMMAND",this.payload={type:e,func:t,maxDelay:n,steps:i}}}},28180:(e,t,n)=>{"use strict";n.d(t,{_:()=>ScheduleTaskCommand});var i=n(93037);class ScheduleTaskCommand extends i.m{constructor(e,t,n){super(),this.id="SCHEDULE_TASK_COMMAND";const i=function*(){return t()}();this.payload={type:e,func:i,maxDelay:n,steps:1}}}},32227:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>SchedulerModule});var i,s=n(57227),r=n(31117);class TaskType{constructor(e){this.name=e,this.taskDurations=new r.P(100),this.medianDuration=1}get typicalStepDuration(){return this.medianDuration}addTaskDuration(e){this.taskDurations.push(e),this.taskDurations.index%10==0&&(this.medianDuration=this.taskDurations.median())}}!function(e){e.WAITING="waiting",e.STARTED="started",e.DONE="done"}(i||(i={}));class Scheduler{constructor(){this.tasks=[],this.types={}}getType(e){return this.types[e]||(this.types[e]=new TaskType(e)),this.types[e]}addTask(e){this.tasks.push(e)}update(e){this.tasks=this.tasks.filter((e=>e.status!==i.DONE)),this.tasks.sort(((e,t)=>t.urgency-e.urgency));let t=0;e:for(const n of this.tasks)for(;n.status!==i.DONE;){const i=performance.now(),s=t+n.type.typicalStepDuration>e,r=i>=n.deadline;if(s&&!r)break e;const o=i;n.run();const a=performance.now()-o;n.type.addTaskDuration(a),t+=a}}}var o=n(28180),a=n(78767);class Task{constructor(e,t,n,s){this.type=e,this.func=t,this.deadline=n,this.steps=s,this.status=i.WAITING,this.promise=new Promise(((e,t)=>{this.onSuccess=e,this.onError=t}))}run(){let e;this.status=i.STARTED;try{e=this.func.next()}catch(e){return this.status=i.DONE,void this.onError(e)}this.steps-=1,e.done&&(this.status=i.DONE,this.onSuccess(e.value))}get estimatedDuration(){return this.steps*this.type.typicalStepDuration}get urgency(){const e=this.deadline-performance.now();return e<=0?1e6-e:this.estimatedDuration/e/e}}class SchedulerModule extends s.Y{constructor(){super(...arguments),this.name="scheduler-module",this.scheduler=new Scheduler}async init(e,t){this.engine=t,this.engine.commandBinder.addBinding(o._,(async e=>{const t=new Task(this.scheduler.getType(e.type),e.func,performance.now()+e.maxDelay,e.steps);return this.scheduler.addTask(t),t})),this.engine.commandBinder.addBinding(a.S,(async e=>{const t=new Task(this.scheduler.getType(e.type),e.func,performance.now()+e.maxDelay,e.steps);return this.scheduler.addTask(t),t}))}onUpdate(e){this.scheduler.update(4)}}},91845:(e,t,n)=>{"use strict";var i;n.d(t,{l:()=>i}),function(e){e.TYPE="type",e.FLOOR="floor"}(i||(i={}))},9740:(e,t,n)=>{"use strict";n.d(t,{r:()=>SearchResultsData});var i=n(35424),s=n(29984),r=n(67779),o=n(91845);const a=/(==|!=|>|<|>=|<=|~=)/;class SearchResultsData extends i.V{constructor(){super(...arguments),this.activated=!1,this.query="",this.queryKeywords=(0,s.C)(),this.grouping=o.l.TYPE,this.results=(0,s.C)([]),this.groups={},this.keywords=(0,r.Y)({}),this.validationError=null,this.isAdvancedSearchEnabled=!1,this.isKeywordSummaryEnabled=!1,this.selectedSearchResult=new r.f(null),this.getIsAdvancedQuery=()=>{const e=this.getQuery();return this.getIsAdvancedSearchEnabled()&&(e=>a.test(e||""))(e)},this.setSelectedSearchResult=e=>{this.selectedSearchResult.value=e}}getQuery(){return this.query}getQueryKeywords(){return this.queryKeywords.values()}hasActiveQuery(){return""!==this.query||this.queryKeywords.length>0}setQuery(e){this.query=e,this.commit()}setQueryKeywords(e){this.queryKeywords.replace(e),this.commit()}setKeywords(e){this.keywords.value=e,this.commit()}refreshResults(){this.commit()}getGrouping(){return this.grouping}setGrouping(e){this.grouping=e,this.commit()}getResults(){return this.results.values()}setResults(e){this.results.forEach((e=>e.cancelBindings())),this.results.replace(e),this.results.forEach((e=>e.registerBindings()))}getValidationError(){return this.validationError}setValidationError(e){this.validationError=e,this.commit()}setIsAdvancedSearchEnabled(e){this.isAdvancedSearchEnabled=e,this.commit()}getIsAdvancedSearchEnabled(){return this.isAdvancedSearchEnabled}setIsKeywordSummaryEnabled(e){this.isKeywordSummaryEnabled=e,this.commit()}getSelectedSearchResult(){return this.selectedSearchResult.value}getActivated(){return this.activated}setActivated(e){this.activated=e,this.commit()}onlyExecuteWhenActivated(e){let t=!1;const n=()=>{this.getActivated()?(e(),t=!1):t=!0};return this.onPropertyChanged("activated",(e=>{e&&t&&n()})),n}}},22149:(e,t,n)=>{"use strict";n.d(t,{Xv:()=>SearchModeToggleCommand,H1:()=>UpdateSearchQueryCommand,FZ:()=>UpdateSearchQueryKeywordsCommand,M8:()=>ToggleSearchQueryKeywordCommand,s7:()=>RefreshSearchResultsCommand,SN:()=>ChangeSearchGroupingCommand,Np:()=>UpdateGroupActionsCommand,IL:()=>SelectSearchResultCommand,c6:()=>RegisterSearchGroupCommand,Pe:()=>DeregisterSearchGroupCommand});var i=n(93037);class SearchModeToggleCommand extends i.m{constructor(e){super(),this.payload={opened:e}}}class UpdateSearchQueryCommand extends i.m{constructor(e){super(),this.payload={query:e}}}class UpdateSearchQueryKeywordsCommand extends i.m{constructor(e){super(),this.payload={keywords:e}}}class ToggleSearchQueryKeywordCommand extends i.m{constructor(e){super(),this.payload={keywordId:e}}}class RefreshSearchResultsCommand extends i.m{constructor(){super()}}class ChangeSearchGroupingCommand extends i.m{constructor(e){super(),this.payload={grouping:e}}}class UpdateGroupActionsCommand extends i.m{constructor(e,t){super(),this.payload={id:e,groupMenuActions:t}}}class SelectSearchResultCommand extends i.m{constructor(e){super(),this.payload={item:e}}}class RegisterSearchGroupCommand extends i.m{constructor(e){super(),this.payload=Object.assign({getSimpleMatches:()=>[],getAdvancedMatches:()=>[]},e)}}class DeregisterSearchGroupCommand extends i.m{constructor(e){super(),this.payload={id:e}}}},59867:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,l:()=>s});const i="features/space-search",s="features/space-search-advanced"},28528:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BoxVolume:()=>y.k,CylinderVolume:()=>S.X,SensorModule:()=>SensorModule,SourceType:()=>O,SphereVolume:()=>E.b,default:()=>T});var i=n(57227),s=n(14877),r=n(95703),o=n(77280),a=n(84428);class SensorObserver{constructor(){this.needsUpdate=!0}notify(){this.needsUpdate=!0}}var l=n(97428);class SensorObservable{constructor(e){this.observable=new l.$,this.notifier=new class{constructor(e){this.sensorObservable=e}notify(){this.sensorObservable.observable.notify()}}(this),this.dependencySub=e.sub(this.notifier)}dispose(){this.dependencySub.cancel()}observe(e){return this.observable.observe(e)}}class CameraFrustumVolume{constructor(e){this.cameraData=e,this._forward=new a.Vector3,this.frustum=new a.Frustum,this.frustumTransform=new r.M,this.frustumProjection=new r.M,this.forwardObserver=new SensorObserver,this.frustumObserver=new SensorObserver,this.frustumObservable=new SensorObservable(new CameraDataSubsriber(e)),this.frustumObservable.observe(this.forwardObserver),this.frustumObservable.observe(this.frustumObserver)}dispose(){this.frustumObservable.dispose()}get fovx(){return this.cameraData.fovX()}get fovy(){return this.cameraData.fovY()}get forward(){return this.forwardObserver.needsUpdate&&(this.forwardObserver.needsUpdate=!1,this._forward.copy(o.f.FORWARD),this._forward.applyQuaternion(this.cameraData.pose.rotation)),this._forward}observe(e){return this.frustumObservable.observe(e)}get origin(){return this.cameraData.pose.position}containsPoint(e){return this.updateVolume(),this.frustum.containsPoint(e)}updateVolume(){if(this.frustumObserver.needsUpdate){this.frustumObserver.needsUpdate=!1;const e=this.cameraData.pose;this.frustumTransform.compose(e.position,e.rotation,o.f.UNIT).getInverse(this.frustumTransform),this.frustumProjection.copy(this.cameraData.pose.projection),this.frustum.setFromProjectionMatrix(this.frustumTransform.multiplyMatrices(this.frustumProjection,this.frustumTransform).asThreeMatrix4())}}}class CameraDataSubsriber{constructor(e){this.cameraData=e}sub(e){return this.cameraData.onChanged((()=>e.notify()))}}var c=n(15099);class SensorUpdater{constructor(){this.sensors=new Set}addSensor(e){this.sensors.add(e)}removeSensor(e){this.sensors.delete(e)}update(){for(const e of this.sensors)e.update()}}class SensorDecorator{constructor(e,t,n){this.frustum=e,this.raycaster=t,this.sensorDisposer=n,this.volumeObserver=new SensorObserver,this.sources=new Set,this.dirtySources=new Set,this.sourceWatchers=new Map,this.readingsCache=new Map,this.readingObservable=new l.$,this.raycastDirection=new a.Vector3,this.volumeSub=e.observe(this.volumeObserver)}get origin(){return this.frustum.origin}dispose(){this.volumeSub.cancel(),this.sensorDisposer.disposeSensor(this)}addSource(...e){for(const t of e)this.sources.add(t),this.dirtySources.add(t),this.sourceWatchers.set(t,new SourceWatcher(this.dirtySources,t))}get readings(){return this.readingsCache}update(){this.volumeObserver.needsUpdate?(this.volumeObserver.needsUpdate=!1,this.recomputeAllReadings(),this.readingObservable.notify()):this.dirtySources.size>0&&(this.recomputeDirtyReadings(),this.readingObservable.notify())}recomputeAllReadings(){for(const e of this.sources)this.recomputeReading(e);this.dirtySources.clear()}recomputeDirtyReadings(){for(const e of this.dirtySources)this.recomputeReading(e);this.dirtySources.clear()}recomputeReading(e){this.raycastDirection.copy(e.origin).sub(this.frustum.origin).normalize();const t=this.frustum.origin.distanceToSquared(e.origin),n=this.readingsCache.get(e)||{direction:new a.Vector3};n.inRange=function(e,t){return t.volume.containsPoint(e.origin)}(this,e),n.inView=n.inRange&&this.frustum.containsPoint(e.origin)&&!function(e,t){return!!t&&e>t.distance**2}(t,this.raycaster.picking.pick(this.frustum.origin,this.raycastDirection)),n.direction.copy(this.raycastDirection),n.distanceSq=t,this.readingsCache.set(e,n)}onReadingsUpdated(e){return this.readingObservable.observe(e)}}class SourceWatcher{constructor(e,t){this.sub=t.volume.observe({notify(){e.add(t)}})}dispose(){this.sub.cancel()}}var d=n(95847),u=n(3035),h=n(16493);const p=(e,t)=>e.type===O.BOX?g(t):e.type===O.CYLINDER?function(e){const t=new a.CylinderBufferGeometry(.5,.5,1);t.translate(0,.5,0);const n=new a.Mesh(t,new a.MeshBasicMaterial);n.scale.set(.05,.1,.05);const i=new a.MeshBasicMaterial({transparent:!0,opacity:.1,side:a.DoubleSide,depthWrite:!1}),s=new a.Mesh(t,new a.MeshBasicMaterial({wireframe:!0})),r=new a.Mesh(t,i);return r.add(s),e.add(n),e.add(r),{interactionMesh:n,volumeMesh:r,dispose(){e.remove(n),e.remove(r),n.geometry.dispose(),n.material.dispose(),r.geometry.dispose(),r.material.dispose(),s.geometry.dispose(),s.material.dispose()},setColor(e){r.material.color.set(e),s.material.color.set(e)}}}(t):m(t),m=e=>{const t=new a.SphereBufferGeometry(1,20,20),n=new a.Mesh(t,new a.MeshBasicMaterial);n.scale.set(.5,.5,.5);const i=new a.Mesh(t,new a.MeshBasicMaterial({wireframe:!0})),s=new a.Mesh(t,new a.MeshBasicMaterial({transparent:!0,opacity:.1,side:a.DoubleSide,depthWrite:!1}));return s.add(i),e.add(n),e.add(s),{interactionMesh:n,volumeMesh:s,dispose:()=>{e.remove(n),e.remove(s),n.geometry.dispose(),n.material.dispose(),s.geometry.dispose(),s.material.dispose(),i.geometry.dispose(),i.material.dispose()},setColor:e=>{s.material.color.set(e),i.material.color.set(e)}}},g=e=>{const t=new a.BoxBufferGeometry(1,1,1),n=new a.Mesh(t,new a.MeshBasicMaterial);n.scale.set(.1,.1,.1);const i=new a.MeshBasicMaterial({transparent:!0,opacity:.1,side:a.DoubleSide,depthWrite:!1}),s=new a.Mesh(t,i),r=new a.LineSegments(new a.EdgesGeometry(t),new a.LineBasicMaterial);return s.add(r),e.add(n),e.add(s),{interactionMesh:n,volumeMesh:s,dispose:()=>{e.remove(n),e.remove(s),n.geometry.dispose(),n.material.dispose(),s.geometry.dispose(),s.material.dispose(),r.geometry.dispose(),r.material.dispose()},setColor:e=>{s.material.color.set(e),r.material.color.set(e)}}};const f=e=>{if(e.type===O.BOX){const t=e;return Object.assign({},t.volume.size)}if(e.type===O.CYLINDER){const t=e;return{x:t.volume.radius,y:t.volume.height,z:t.volume.radius}}{const t=e.volume.radius;return{x:t,y:t,z:t}}},v=(new a.Quaternion).identity();function b(e){if(e.type===O.BOX){return e.volume.orientation}return v}class VolumeVisualizer{constructor(e,t,n){this.source=e,this.scene=t,this.inputIni=n,this.subs=[],this.stickyHover=!1,this.sourceDirty=!0,this.meshes=p(e,this.scene.scene),this.meshes.interactionMesh.scale.set(.1,.1,.1),this.meshes.interactionMesh.position.copy(this.source.origin),this.meshes.interactionMesh.material.color.set(16724312),this.meshes.volumeMesh.scale.set(0,0,0),this.meshes.volumeMesh.position.copy(this.source.origin),this.meshes.volumeMesh.visible=!1;const i=b(e);this.meshes.volumeMesh.quaternion.copy(i);this.mixer=new a.AnimationMixer(this.meshes.volumeMesh);const s=f(e),r=new a.VectorKeyframeTrack(".scale",[0,.4],[0,0,0,s.x,s.y,s.z],a.InterpolateSmooth),o=new a.AnimationClip(void 0,.4,[r]);this.onHoverAction=this.mixer.clipAction(o),this.onHoverAction.clampWhenFinished=!0,this.onHoverAction.loop=a.LoopOnce;const l=()=>{const e=this.onHoverAction.time;this.onHoverAction.reset(),this.meshes.volumeMesh.visible=!0,this.onHoverAction.timeScale=1,this.onHoverAction.time=e,this.onHoverAction.play()},c=()=>{this.stickyHover=!this.stickyHover,this.stickyHover?this.meshes.interactionMesh.material.color.set(4473924):this.meshes.interactionMesh.material.color.set(16724312)};this.subs.push(this.inputIni.registerMeshHandler(d.z,h.s.isValue(this.meshes.interactionMesh),l)),this.subs.push(this.inputIni.registerMeshHandler(d.A,h.s.isValue(this.meshes.interactionMesh),(()=>{if(!this.stickyHover){const e=this.onHoverAction.time;this.onHoverAction.reset(),this.onHoverAction.time=e,this.onHoverAction.timeScale=-1,this.onHoverAction.play()}}))),this.subs.push(this.inputIni.registerMeshHandler(u.R,h.s.isValue(this.meshes.interactionMesh),c)),this.inputIni.registerMesh(this.meshes.interactionMesh,!1),l(),c(),this.subs.push(e.volume.observe(this))}notify(){this.sourceDirty=!0}update(e,t){if(this.sourceDirty){this.sourceDirty=!1,this.meshes.interactionMesh.position.copy(this.source.origin),this.meshes.volumeMesh.position.copy(this.source.origin),this.meshes.volumeMesh.quaternion.copy(b(this.source));const e=f(this.source),t=this.onHoverAction.getClip().tracks[0].values;t[3]=e.x,t[4]=e.y,t[5]=e.z}this.meshes.setColor(t.inRange?65280:16711680),this.mixer.update(e/1e3)}dispose(){this.meshes.dispose(),this.mixer.stopAllAction();for(const e of this.subs)e.cancel()}}class SensorRenderer{constructor(e,t,n){this.sensor=e,this.scene=t,this.inputIni=n,this.subs=[],this.visuals=new Map}init(){this.subs.push(this.sensor.onReadingsUpdated(this))}render(e){for(const[t,n]of this.sensor.readings){let i=this.visuals.get(t);i||(i=new VolumeVisualizer(t,this.scene,this.inputIni),this.visuals.set(t,i)),i.update(e,n)}}dispose(){}activate(){}deactivate(){for(const e of this.subs)e.cancel();for(const e of this.visuals.values())e.dispose();this.visuals.clear()}notify(){}}class SensorModule extends i.Y{constructor(){super(...arguments),this.name="sensor-module",this.sensorUpdater=new SensorUpdater,this.debugSensor=null,this.sensorDisposer=new class{constructor(e){this.sensors=e}disposeSensor(e){this.sensors.removeSensor(e)}}(this)}async init(e,t){[this.cameraData,this.raycaster,this.renderer,this.inputIni]=await Promise.all([await t.market.waitForData(c.M_),await t.getModuleBySymbol(s.y.RAYCASTER),await t.getModuleBySymbol(s.y.WEBGL_RENDERER),await t.getModuleBySymbol(s.y.INPUT)]),this.cameraVolume=new CameraFrustumVolume(this.cameraData);var n,i,r,o;this.sensorDebuggerFactory=(n=e=>{t.addComponent(this,e)},i=e=>{t.removeComponent(this,e)},r=this.renderer.getScene(),o=this.inputIni,e=>{const t=new SensorRenderer(e,r,o);return n(t),{dispose:()=>{i(t)}}})}dispose(){this.cameraVolume.dispose()}createSensor(e){const t=new SensorDecorator(e,this.raycaster,this.sensorDisposer);return this.sensorUpdater.addSensor(t),t}createCameraBoundSensor(){return this.createSensor(this.cameraVolume)}setDebugSensor(e){this.debugSensor&&(this.debugSensor.dispose(),this.debugSensor=null),e&&(this.debugSensor=this.sensorDebuggerFactory(e))}onUpdate(){this.sensorUpdater.update()}removeSensor(e){this.sensorUpdater.removeSensor(e)}}var y=n(39440),S=n(99160),E=n(7471);const T=SensorModule;var O;!function(e){e.SPHERE="sourcetype.sphere",e.BOX="sourcetype.box",e.CYLINDER="sourcetype.cylinder"}(O||(O={}))},39440:(e,t,n)=>{"use strict";n.d(t,{k:()=>BoxVolume});var i=n(84428),s=n(97428);class BoxVolume extends s.${constructor(){super(),this.box=new i.Box3,this.center=new i.Vector3,this.size=new i.Vector3(1/0,1/0,1/0),this.orientation=new i.Quaternion,this.inverseOrientation=new i.Quaternion,this.pointCache=new i.Vector3,this.transformNeedsUpdate=!1,this.box.setFromCenterAndSize(this.center,this.size)}get origin(){return this.center}updateCenter(e){this.center.copy(e),this.box.setFromCenterAndSize(this.center,this.size),this.transformNeedsUpdate=!0}updateDimensions(e){this.size.copy(e),this.box.setFromCenterAndSize(this.center,this.size)}updateOrientation(e){this.orientation.copy(e),this.transformNeedsUpdate=!0}containsPoint(e){return this.transformNeedsUpdate&&(this.transformNeedsUpdate=!1,this.inverseOrientation.copy(this.orientation).invert()),this.pointCache.copy(e).sub(this.center),this.pointCache.applyQuaternion(this.orientation),this.pointCache.add(this.center),this.box.containsPoint(this.pointCache)}}},99160:(e,t,n)=>{"use strict";n.d(t,{X:()=>CylinderVolume});var i=n(84428),s=n(97428);class CylinderVolume extends s.${constructor(){super(...arguments),this._basePoint=new i.Vector3,this._height=1/0,this._radius=1/0,this.pointCache=new i.Vector3}get origin(){return this._basePoint}get basePoint(){return this._basePoint}get height(){return this._height}get radius(){return this._radius}updateBasePoint(e){this.basePoint.set(e.x,e.y,e.z)}updateHeight(e){this._height=e}updateRadius(e){this._radius=e}containsPoint(e){return this.pointCache.set(e.x,this._basePoint.y,e.z),this._basePoint.distanceToSquared(this.pointCache)<=this.radius**2&&this._basePoint.y<=e.y&&e.y<=this._basePoint.y+this.height}}},7471:(e,t,n)=>{"use strict";n.d(t,{b:()=>SphereVolume});var i=n(84428),s=n(97428);class SphereVolume extends s.${constructor(){super(...arguments),this.origin=new i.Vector3,this.radius=1/0}updateRadius(e){this.radius=e}updateOrigin(e){this.origin.copy(e)}containsPoint(e){return this.origin.distanceToSquared(e)<=this.radius**2}}},2050:(e,t,n)=>{"use strict";n.d(t,{a:()=>Snapshot});var i=n(98254),s=n(22878),r=n(23107);class Snapshot extends i.T{constructor(){super(),this.category=r.i.USER}clone(){return(new Snapshot).copy(this)}copy(e){return this.sid=e.sid,this.thumbnailUrl=e.thumbnailUrl,this.imageUrl=e.imageUrl,this.name=e.name,this.is360=e.is360,this.category=e.category,this.height=e.height,this.width=e.width,this.created=e.created,this.modified=e.modified,this.visionLabel=e.visionLabel,this.visionName=e.visionName,this.imageBlob=e.imageBlob,this.metadata={cameraMode:e.metadata.cameraMode,cameraPosition:e.metadata.cameraPosition.clone(),cameraQuaternion:e.metadata.cameraQuaternion.clone(),scanId:e.metadata.scanId,orthoZoom:e.metadata.orthoZoom,ssZoom:e.metadata.ssZoom,floorId:e.metadata.floorId,floorVisibility:e.metadata.floorVisibility},this.commit(),this}isInsidePano(){return this.metadata.cameraMode===s.Ey.Panorama&&""!==this.metadata.scanId}refresh(e){this.thumbnailUrl.refreshFrom(e.thumbnailUrl),this.imageUrl.refreshFrom(e.imageUrl)}}},23107:(e,t,n)=>{"use strict";var i;n.d(t,{i:()=>i}),function(e){e.USER="user",e.PANORAMA="panorama",e.UNALIGNED="unaligned",e.AUTO="auto",e.TOUR="tour"}(i||(i={}))},1129:(e,t,n)=>{"use strict";n.d(t,{yz:()=>RenameSnapshotCommand,Ad:()=>DeleteSnapshotCommand,nM:()=>UploadSnapshotCommand});var i=n(93037);class RenameSnapshotCommand extends i.m{constructor(e,t){super(),this.id="RENAME_SNAPSHOT",this.payload={id:e,name:t}}}class DeleteSnapshotCommand extends i.m{constructor(e){super(),this.id="DELETE_SNAPSHOT",this.payload={id:e}}}class UploadSnapshotCommand extends i.m{constructor(e){super(),this.id="UPLOAD_SNAPSHOT",this.payload={snapshot:e}}}},21938:(e,t,n)=>{"use strict";n.d(t,{P:()=>SnapshotsData});var i=n(35424),s=n(81402),r=n(28129);class SnapshotsData extends i.V{constructor(e){super(),this.name="snapshots",this.snapshots={};for(const t in e)this.snapshots[t]=e[t].clone()}get(e){return this.snapshots[e]}get collection(){return this.snapshots}add(e){e.sid=this.validateSid(e.sid),this.snapshots[e.sid]=e,this.updateOnStaleCallbacks(),this.commit()}remove(e){delete this.snapshots[e]}validateSid(e){for(;!e||this.snapshots[e];)e=(0,s.O1)(11);return e}set onStale(e){this.hydrate=e,this.updateOnStaleCallbacks()}updateOnStaleCallbacks(){this.hydrate&&(0,r.s)(this.snapshots,(async()=>{const e=await this.hydrate();for(const t in this.snapshots)e&&e[t]&&this.snapshots[t].refresh(e[t])}))}}},89002:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>SnapshotsDataModule});var i=n(57227),s=n(22878),r=n(53549),o=n(21938),a=n(19642),l=n(66225),c=n(38636),d=n(82351),u=n(64069),h=n(63387),p=n(65),m=n(23107);const g={[s.Ey.Dollhouse]:u.wO.DOLLHOUSE,[s.Ey.Floorplan]:u.wO.FLOORPLAN,[s.Ey.Panorama]:u.wO.PANORAMA,[s.Ey.Outdoor]:u.wO.PANORAMA,[s.Ey.Transition]:u.wO.MESH,[s.Ey.Orthographic]:u.wO.MESH,[s.Ey.Mesh]:u.wO.MESH};class MdsSnapshotUploadSerializer{constructor(){}serialize(e,t){const n=[];for(const[i,s]of e.metadata.floorVisibility.entries())if(1===s){const e=t.floorsData.getFloorAtIndex(i);e&&n.push(e.id)}return{label:e.name,contents:{filename:`${e.name}.jpg`,blob:e.imageBlob},snapshotLocation:{anchorId:e.metadata.scanId,visibleFloorIds:n,position:(0,p.m)(h.ep.toVisionVector(e.metadata.cameraPosition)),rotation:(0,p.J5)(h.ep.toVisionCameraQuaternion(e.metadata.cameraQuaternion)),viewMode:g[e.metadata.cameraMode],zoom:e.metadata.cameraMode===s.Ey.Floorplan?e.metadata.orthoZoom:e.metadata.ssZoom},photoType:e.category===m.i.PANORAMA?u.BE.EQUIRECTANGULAR:u.BE.PHOTO2D}}}class MdsSnapshotStore extends l.u{constructor(){super(...arguments),this.deserializer=new d.f,this.serializer=new MdsSnapshotUploadSerializer,this.prefetchKey="data.model.assets.photos"}async read(e){const t={modelId:this.getViewId()};return this.query(a.GetSnapshots,t,e).then((e=>{var t,n,i;const s=((null===(i=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.model)||void 0===n?void 0:n.assets)||void 0===i?void 0:i.photos)||[]).map((e=>this.deserializer.deserialize(e))),r={};for(const e of s)e&&(r[e.sid]=e);return r}))}async refresh(){return this.refreshPromise||(this.refreshPromise=this.read({fetchPolicy:"no-cache"}).finally((()=>{this.refreshPromise=void 0}))),this.refreshPromise}async create(e,t){const n=l.u.baseViewId,i=e.category===m.i.TOUR,s=i?"UploadHighlightReelSnapshot":"UploadModelSnapshot",r=i?a.UploadHighlightReelSnapshot:a.UploadModelSnapshot,o=this.serializer.serialize(e,t);return this.client.upload(r,s,Object.assign(Object.assign({},o),{modelId:n})).then((e=>{var t;return this.deserializer.deserialize(null===(t=e.data)||void 0===t?void 0:t.snapshot)}))}async update(e){const t=l.u.baseViewId,n=await this.client.mutate(a.PatchPhoto,{modelId:t,photoId:e.sid,label:e.name}),i=(0,c.q)(n,"data.patchPhoto");return this.deserializer.deserialize(i)}async delete(e){const t=l.u.baseViewId,n=await this.client.mutate(a.DeletePhoto,{modelId:t,photoId:e});return(0,c.q)(n,"data.deletePhoto")||!1}}var f=n(1129),v=n(4117);class SnapshotCreatedMessage extends v.v{constructor(e){super(),this.snapshot=e}}var b=n(39823);class SnapshotsDataModule extends i.Y{constructor(){super(...arguments),this.name="snapshots-data"}async init(e,t){const{readonly:n,baseUrl:i,baseModelId:s}=e;this.engine=t,this.store=new MdsSnapshotStore({readonly:n,baseUrl:i,viewId:s});const a=await this.store.read()||{};this.sweepData=await t.market.waitForData(r.Z);for(const e in a)this.processSnapshot(a[e]);this.snapshotsData=new o.P(a),this.snapshotsData.onStale=()=>this.store.read(),t.market.register(this,o.P,this.snapshotsData),n||this.bindings.push(t.commandBinder.addBinding(f.nM,(({snapshot:e})=>this.uploadSnapshot(e))),t.commandBinder.addBinding(f.yz,(({id:e,name:t})=>this.renameSnapshot(e,t))),t.commandBinder.addBinding(f.Ad,(({id:e})=>this.deleteSnapshot(e))))}async uploadSnapshot(e){const t=await this.engine.market.waitForData(b.i),n=await this.store.create(e,{floorsData:t});return n&&(this.processSnapshot(n),this.snapshotsData.add(n),this.engine.broadcast(new SnapshotCreatedMessage(n))),n}async renameSnapshot(e,t){const n=this.snapshotsData.get(e);if(t!==n.name)return n.name=t,n.commit(),this.snapshotsData.commit(),this.store.update(n)}async deleteSnapshot(e){await this.store.delete(e).catch((t=>{this.log.debug(t),this.log.error(`Failed to delete snapshot ${e}`)}))&&(this.snapshotsData.remove(e),this.snapshotsData.commit())}processSnapshot(e){const t=e.metadata.cameraMode===s.Ey.Panorama,n=!this.sweepData.isSweepAligned(e.metadata.scanId);if(e.is360=t&&n,t){const t=this.sweepData.getSweep(e.metadata.scanId);t&&e.metadata.cameraPosition.copy(t.position)}e.name.match(/^[0-9.]+_[0-9.]+$/)&&(e.name="")}}},82351:(e,t,n)=>{"use strict";n.d(t,{f:()=>MdsSnapshotDeserializer});var i=n(84428),s=n(22878),r=n(5477),o=n(63387),a=n(38636),l=n(63336),c=n(2050),d=n(23107),u=n(28129),h=n(64069);const p=new r.Z("mds-snapshot-deserializer");class MdsSnapshotDeserializer{deserialize(e){var t;if(!e||!this.validate(e))return p.debug("Deserialized invalid Snapshot data from MDS",e),null;const n=new c.a;n.sid=e.id,n.thumbnailUrl=new u.n(e.thumbnailUrl||"",(0,l.p)(e.validUntil,null)),n.imageUrl=new u.n(e.presentationUrl||"",(0,l.p)(e.validUntil,null)),n.name=e.label||"",n.category=this.getCwfSnapshotCategory(e)||d.i.USER,n.width=e.width||0,n.height=e.height||0,n.created=(0,l.p)(e.created),n.modified=(0,l.p)(e.modified),n.visionLabel=e.classification||"";const r=(0,a.q)(e,"snapshotLocation.anchor.pano.placement");n.is360=!(!r||r===h.bW.AUTO);const{snapshotLocation:m}=e;if(m){const e=m.position?o.ep.fromVisionVector(m.position):new i.Vector3,r=m.rotation?o.ep.fromVisionCameraQuaternion(m.rotation):new i.Quaternion,a=this.getCwfViewmode(m.viewMode)||s.Ey.Panorama,l=[];for(const e of m.floorVisibility||[]){for(let t=0;t<e.sequence;t++)l[t]=l[t]||0;l[e.sequence]=1}n.metadata={cameraMode:a,cameraPosition:e,cameraQuaternion:r,scanId:m.anchor&&m.anchor.id||"",orthoZoom:a===s.Ey.Floorplan&&null!==(t=m.zoom)&&void 0!==t?t:-1,ssZoom:m.zoom||1,floorId:m.floorVisibility&&m.floorVisibility.length>0?m.floorVisibility[0].id:null,floorVisibility:l}}return n}validate(e){var t;if(!(null===(t=e.snapshotLocation)||void 0===t?void 0:t.position))return!1;const n=["id","snapshotLocation","thumbnailUrl","presentationUrl"].every((t=>t in e)),i=null!==this.getCwfSnapshotCategory(e);return n&&i}getCwfViewmode(e){const t={[h.wO.DOLLHOUSE]:s.Ey.Dollhouse,[h.wO.PANORAMA]:s.Ey.Panorama,[h.wO.FLOORPLAN]:s.Ey.Floorplan,[h.wO.MESH]:s.Ey.Panorama};return e&&e in t?t[e]:null}getCwfSnapshotCategory(e){if(e.category===h.EG.TOUR)return d.i.TOUR;if(e.origin===h.uI.VISION)return d.i.AUTO;if(e.type===h.BE.EQUIRECTANGULAR)return d.i.PANORAMA;const t=(0,a.q)(e,"snapshotLocation.anchor.pano.placement");return e.type===h.BE.PHOTO2D?t===h.bW.MANUAL?d.i.UNALIGNED:d.i.USER:null}}},18884:(e,t,n)=>{"use strict";n.d(t,{R:()=>PrefetchedQueryCache});var i=n(33762),s=n(55900),r=n(5477),o=n(38636);const a=new r.Z("PrefetchedQueryCache");class PrefetchedQueryCache{constructor(e){const{initialData:t,baseUrl:n}=e;this.client=new i.w({baseUrl:n}),this.config=e,t&&(this.data=t)}async read(e,t,n={}){const{prefetchKey:i,prefetchPolicy:r=this.config.prefetchPolicy}=n;if(!i||r===s.h.NONE)return;if((null==t?void 0:t.modelId)!==this.config.variables.modelId)return;r!==s.h.PRELOAD||this.preloadPromise||this.preload(),void 0===this.data&&this.preloadPromise&&await this.preloadPromise;const o=this.has(i);return a.debug(`Cache ${o?"hit":"miss"} for ${i}`),o?this.data:void 0}clear(){this.data=void 0}async preload(){return this.preloadPromise=(async()=>{const{query:e,variables:t}=this.config;try{return this.data=await this.client.query(e,t),!0}catch(e){return a.info(e),this.data={},!1}})(),this.preloadPromise}has(e){return void 0!==(0,o.q)(this.data,e)}}},48697:(e,t,n)=>{"use strict";n.d(t,{Q:()=>StorageData});var i=n(35424),s=n(52012);class StorageData extends i.V{constructor(e={}){super(),this.lastPublished=null,this.hasRevertableChanges=!1,this.hasPublishableChanges=!1,this.publishEnabled=!1,this.revertEnabled=!1,this.transactionState=s.g.IDLE,this.dirtyTypes=new Set,this.publishableTypes=new Set,this.revertableTypes=new Set,Object.assign(this,e)}setTransactionState(e){if(e!==this.transactionState){if(![this.transactionState,e].includes(s.g.IDLE))throw new Error(`Cannot transition from ${this.transactionState} to ${e}`);this.transactionState=e,this.commit()}}getDirtyTypes(){return[...this.dirtyTypes]}setDirtyType(...e){for(const t of e)this.dirtyTypes.add(t);this.onDataTypesChanged()}clearDirtyType(...e){if(e.length)for(const t of e)this.dirtyTypes.delete(t);else this.dirtyTypes.clear();this.onDataTypesChanged()}getPublishableTypes(){return[...this.publishableTypes]}setPublishableType(...e){for(const t of e)this.publishableTypes.add(t);this.onDataTypesChanged()}getRevertableTypes(){return[...this.revertableTypes]}setRevertableType(...e){for(const t of e)this.revertableTypes.add(t);this.onDataTypesChanged()}onDataTypesChanged(){this.hasRevertableChanges=[...this.dirtyTypes].some((e=>this.revertableTypes.has(e))),this.hasPublishableChanges=[...this.dirtyTypes].some((e=>this.publishableTypes.has(e))),this.commit()}}},47063:(e,t,n)=>{"use strict";n.d(t,{R_:()=>PublishCommand,qz:()=>RevertCommand,VQ:()=>SaveCommand,ff:()=>GetUnpublishedDeletionsCommand});var i=n(93037);class PublishCommand extends i.m{constructor(e={}){super(),this.id="PUBLISH_COMMAND",this.payload=e}}class RevertCommand extends i.m{constructor(e){super(),this.id="REVERT_COMMAND",this.payload=e}}class SaveCommand extends i.m{constructor(e){super(),this.id="SAVE_COMMAND",this.payload=e}}class GetUnpublishedDeletionsCommand extends i.m{constructor(){super(...arguments),this.id="GET_UNPUBLISHED_DELETIONS_COMMAND"}}},52012:(e,t,n)=>{"use strict";var i,s;n.d(t,{g:()=>i,Q:()=>s}),function(e){e.IDLE="idle",e.REVERTING="reverting",e.PUBLISHING="publishing",e.SAVING="saving"}(i||(i={})),function(e){e.ON="on",e.BEFORE="before",e.AFTER="after"}(s||(s={}))},7164:(e,t,n)=>{"use strict";n.d(t,{AE:()=>StorageError,lY:()=>ForbiddenError,pd:()=>SaveError,gO:()=>PublishError,P8:()=>RevertError,DT:()=>r});var i=n(40603),s=n(52549);class StorageError extends i.y{constructor(e,t="50001"){super(e),this.name="StorageError",this.code=t}}class ForbiddenError extends i.y{constructor(e,t="53100"){super(e),this.name="ForbiddenError",this.code=t}}class SaveError extends i.y{constructor(e,t="53100"){super(e),this.name="SaveError",this.code=t}}class PublishError extends i.y{constructor(e,t="53200"){super(e),this.name="PublishError",this.code=t}}class RevertError extends i.y{constructor(e,t="53300"){super(e),this.name="RevertError",this.code=t}}function r(e){return{[s.g.BLUR_SUGGESTIONS]:"12",[s.g.BLURS]:"01",[s.g.FLOORS]:"02",[s.g.HIGHLIGHTS]:"03",[s.g.LABELS]:"04",[s.g.MATTERTAGS]:"05",[s.g.MEASUREMENTS]:"06",[s.g.NOTES]:"07",[s.g.ORDERED_LISTS]:"13",[s.g.PHOTOS]:"08",[s.g.SETTINGS]:"09",[s.g.START_LOCATION]:"10",[s.g.SWEEPS]:"11",[s.g.LAYERS]:"14"}[e]||"99"}},50063:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataIntegrityMessage:()=>o.Qq,DataPublishedMessage:()=>o.zK,DataRevertedMessage:()=>o.F1,DataSavedMessage:()=>o.xj,ForbiddenError:()=>r.lY,ForbiddenErrorMessage:()=>o.hu,GetUnpublishedDeletionsCommand:()=>i.ff,PublishCommand:()=>i.R_,PublishError:()=>r.gO,PublishErrorMessage:()=>o.aT,RevertCommand:()=>i.qz,RevertError:()=>r.P8,RevertErrorMessage:()=>o.Kx,SaveCommand:()=>i.VQ,SaveError:()=>r.pd,SaveErrorMessage:()=>o.dz,StorageAnalytics:()=>StorageAnalytics,StorageData:()=>l.Q,StorageError:()=>r.AE,TransactionPhase:()=>s.Q,TransactionState:()=>s.g,default:()=>StorageModule,getErrorCodeForDataType:()=>r.DT});var i=n(47063),s=n(52012),r=n(7164),o=n(36154),a=n(96557);class StorageAnalytics{constructor(){this.handlers=[{msgType:o.Qq,func:(e,t)=>{const{dataType:n,message:i,mockError:s}=t,r="DataIntegrityError",o={error_type:r,error_dialog:"none",data_type:n,exception:{message:`${r}: ${i}`},mock_error:s};e.track("error_displayed",o)}},{msgType:o.dz,func:(e,t)=>{const{dataTypes:n,error:i}=t,s=i.name||"SaveError",r={error_code:(0,a.UX)(i).join(", "),error_type:s,error_dialog:"banner",data_type:n?n.join(", "):"",exception:{message:`${s}: ${i.message}`,stack:i.stack},mock_error:(0,a.Ad)(i)};e.track("error_displayed",r)}},{msgType:o.Kx,func:(e,t)=>{const{dataTypes:n,error:i}=t,s=i.name||"RevertError",r={error_code:(0,a.UX)(i).join(", "),error_type:s,error_dialog:"banner",data_type:n?n.join(", "):"",exception:{message:`${i.name||s}: ${i.message}`,stack:i.stack},mock_error:(0,a.Ad)(i)};e.track("error_displayed",r)}},{msgType:o.aT,func:(e,t)=>{const{dataTypes:n,error:i}=t,s=i.name||"PublishError",r={error_code:(0,a.UX)(i).join(", "),error_type:s,error_dialog:"banner",data_type:n?n.join(", "):"",exception:{message:`${s}: ${i.message}`,stack:i.stack},mock_error:(0,a.Ad)(i)};e.track("error_displayed",r)}}]}}var l=n(48697),c=n(57227),d=n(33762),u=n(96141),h=n(21396),p=n(37614),m=n(67233),g=n(5005),f=n(90237),v=n(54232),b=n(38636),y=n(87100),S=n(52549),E=n(5477);class ModelViewDiff{constructor(e={}){Object.assign(this,e)}}var T=n(64069);const O=new E.Z("mds-mergediff-deserializer"),_={[S.g.FLOORS]:T.X$.FLOORS,[S.g.MEASUREMENTS]:T.X$.MEASUREMENTPATHS,[S.g.MATTERTAGS]:T.X$.MATTERTAGS,[S.g.LABELS]:T.X$.LABELS,[S.g.HIGHLIGHTS]:T.X$.HIGHLIGHTREEL,[S.g.SWEEPS]:T.X$.SWEEPS,[S.g.SETTINGS]:T.X$.PLAYEROPTIONS,[S.g.START_LOCATION]:T.X$.IMAGE,[S.g.ORDERED_LISTS]:T.X$.ORDEREDLISTS,[S.g.BLURS]:void 0},A={[T.X$.IMAGE]:S.g.START_LOCATION,[T.X$.FLOORS]:S.g.FLOORS,[T.X$.MEASUREMENTPATHS]:S.g.MEASUREMENTS,[T.X$.MATTERTAGS]:S.g.MATTERTAGS,[T.X$.LABELS]:S.g.LABELS,[T.X$.HIGHLIGHTREEL]:S.g.HIGHLIGHTS,[T.X$.SWEEPS]:S.g.SWEEPS,[T.X$.PLAYEROPTIONS]:S.g.SETTINGS,[T.X$.ORDEREDLISTS]:S.g.ORDERED_LISTS};class MergeDiffDeserializer{deserialize(e){if(!(e&&e.src&&e.dest&&e.typesModified))return O.debug("Deserialized invalid merge diff from MDS",e),null;const t=[];for(const n of e.typesModified)n in A&&t.push(A[n]);return new ModelViewDiff({srcId:e.src,targetId:e.dest,dataTypes:t})}}class PublishingManager{constructor(e,t){this.modelId=e,this.client=t}async getMergeDiff(e){const t=new MergeDiffDeserializer,n=await this.client.query(v.GetMergeDiff,{viewId:e}).catch((e=>{throw new g.Zb(e)})),i=(0,b.q)(n,"data.model.mergeDiff");return t.deserialize(i)}async getUnpublishedDeletions(){const e=await this.client.query(v.GetSessionDiff,{modelId:this.modelId}).catch((e=>{throw new g.Zb(e)})),t=(0,b.q)(e,"data.model.base"),n=(0,b.q)(e,"data.model.view"),i=(e,t,n)=>{const i=t.map((e=>e[n]));return e.filter((e=>!i.includes(e[n])))},s=i(t.model.mattertags,n.model.mattertags,"id"),r=i(t.model.labels,n.model.labels,"id"),o=i(t.model.measurementPaths,n.model.measurementPaths,"id");return{[S.g.LABELS]:r,[S.g.MATTERTAGS]:s,[S.g.MEASUREMENTS]:o}}async revertView(e,t=[]){const n=t.map((e=>_[e])).filter((e=>!!e));if(!n.length)return;const i=await this.client.query(v.RevertView,{viewId:e,mergeTypes:n}).catch((e=>{throw new g.w0(e)})),s="53300"===(0,y.eY)("error","");if(!d.w.isOk(i)||s){const e=new g.w0(d.w.getErrorMessage(i));throw s&&(e.isMock=!0),e}}async mergeView(e){const t=await this.client.query(v.PublishView,{viewId:e}).catch((e=>{throw new g.w0(e)})),n="53200"===(0,y.eY)("error","");if(!d.w.isOk(t)||n){const e=new g.w0(d.w.getErrorMessage(t));throw n&&(e.isMock=!0),e}}}var w=n(91183);class StorageModule extends c.Y{constructor(){super(...arguments),this.name="storage",this.saveHandlers=new Set,this.revertHandlers=new Set,this.publishHandlers=new Set,this.lock=new u.H,this.updateForView=async()=>{const e=this.data,t=this.layersData.getCurrentView();if(t&&t.viewType===h.X.SESSION){e.publishEnabled=!0,e.revertEnabled=!0;let n=!1;const i=await this.publishingManager.getMergeDiff(t.id);i&&i.dataTypes&&(e.setDirtyType(...i.dataTypes),n=i.dataTypes.length>0),n||this.engine.commandBinder.issueCommand(new p.jT)}else e.publishEnabled=!1,e.revertEnabled=!1}}async init(e,t){const{baseUrl:n,modelId:s}=e;this.config=e,this.engine=t,this.client=new d.w({baseUrl:n}),this.publishingManager=new PublishingManager(s,this.client),this.data=new l.Q,this.layersData=await t.market.waitForData(m.R),this.updateForView(),this.bindings.push(this.layersData.onPropertyChanged("currentViewId",(()=>this.updateForView())),t.commandBinder.addBinding(i.R_,(e=>this.publish(e.dataTypes))),t.commandBinder.addBinding(i.qz,(e=>this.revert(e.dataTypes))),t.commandBinder.addBinding(i.VQ,(e=>this.save(e.dataTypes,e.onCallback,e.skipDirtyUpdate))),t.commandBinder.addBinding(i.ff,(()=>this.publishingManager.getUnpublishedDeletions()))),t.market.register(this,l.Q,this.data)}dispose(e){super.dispose(e)}onSave(e,t={}){const n={callback:e,dataType:t.dataType,phase:t.phase||s.Q.ON};return(0,w.k1)((()=>this.saveHandlers.add(n)),(()=>this.saveHandlers.delete(n)),!0)}onPublish(e,t={}){const n={callback:e,dataType:t.dataType,phase:t.phase||s.Q.ON};return(0,w.k1)((()=>this.publishHandlers.add(n)),(()=>this.publishHandlers.delete(n)),!0)}onRevert(e,t={}){const n={callback:e,dataType:t.dataType,phase:t.phase||s.Q.ON};return(0,w.k1)((()=>this.revertHandlers.add(n)),(()=>this.revertHandlers.delete(n)),!0)}async publish(e=[]){const t=await this.lock.lock(),n=n=>{this.log.error(n),t.unlock(),this.data.setTransactionState(s.g.IDLE);const a=i[0]?`532${(0,r.DT)(i[0])}`:"53200";if(n instanceof f.V2||n instanceof f.GT){const t=new r.lY(n,a);throw this.engine.broadcast(new o.hu(t,e)),t}const l=new r.gO(n,a);throw this.engine.broadcast(new o.aT(l,e)),l},i=e.length?[...e]:this.data.getPublishableTypes(),{before:a,on:l,after:c}=this.getCallbacksByPhase(this.publishHandlers,i),d=this.layersData.getWorkshopSessionView();d&&l.push((()=>this.publishingManager.mergeView(d.id))),this.log.debug(`Publishing ${[...i].join(", ")}...`),this.data.setTransactionState(s.g.PUBLISHING),await Promise.all(a.map((e=>e()))).catch(n),await Promise.all(l.map((e=>e()))).catch(n),this.data.lastPublished=Date.now(),this.data.commit(),this.data.clearDirtyType(...e),this.engine.broadcast(new o.zK),await Promise.all(c.map((e=>e()))).catch(n),t.unlock(),this.data.setTransactionState(s.g.IDLE),this.log.debug("Publishing completed")}async revert(e=[]){const t=await this.lock.lock(),n=n=>{t.unlock(),this.data.setTransactionState(s.g.IDLE);const i=e[0]?`531${(0,r.DT)(e[0])}`:"53100",a=new r.P8(n,i);throw this.engine.broadcast(new o.Kx(a,e)),a},{before:i,on:a,after:l}=this.getCallbacksByPhase(this.revertHandlers,e),c=this.layersData.getWorkshopSessionView();c?(a.push((()=>this.publishingManager.revertView(c.id,e))),this.log.debug(`Reverting ${[...e].join(", ")}...`),this.data.setTransactionState(s.g.REVERTING),await Promise.all(i.map((e=>e()))).catch(n),await Promise.all(a.map((e=>e()))).catch(n),this.engine.broadcast(new o.F1(e)),await Promise.all(l.map((e=>e()))).catch(n),t.unlock(),this.data.setTransactionState(s.g.IDLE),this.data.clearDirtyType(...e),this.log.debug(`Reverting ${[...e].join(", ")} completed`)):n(new g.SN("Workshop session view not found"))}async save(e,t,n=!1){const i=await this.lock.lock(),a=t=>{this.log.error(t),i.unlock(),this.data.setTransactionState(s.g.IDLE);const n=e[0]?`531${(0,r.DT)(e[0])}`:"53100";if(t instanceof f.V2||t instanceof f.GT){const i=new r.lY(t,n);throw this.engine.broadcast(new o.hu(i,e)),i}const a=new r.pd(t,n);throw this.engine.broadcast(new o.dz(a,e)),a};this.log.debug(`Saving ${[...e].join(", ")}...`),this.data.setTransactionState(s.g.SAVING);const{before:l,on:c,after:d}=this.getCallbacksByPhase(this.saveHandlers,e);await Promise.all(l.map((e=>e()))).catch(a),await Promise.all(c.map((e=>e()))).catch(a),t&&await t().catch(a),this.engine.broadcast(new o.xj(e)),await Promise.all(d.map((e=>e()))).catch(a),n||this.data.setDirtyType(...e),i.unlock(),this.data.setTransactionState(s.g.IDLE),this.log.debug(`Saving ${[...e].join(", ")} completed`)}getCallbacksByPhase(e,t){const n=Array.isArray(t)?t:Object.values(S.g),i=[...e.values()].filter((e=>!e.dataType||n.includes(e.dataType))),r={[s.Q.BEFORE]:[],[s.Q.ON]:[],[s.Q.AFTER]:[]};return i.reduce(((e,t)=>(e[t.phase].push((()=>t.callback(n))),e)),r)}}},36154:(e,t,n)=>{"use strict";n.d(t,{xj:()=>DataSavedMessage,zK:()=>DataPublishedMessage,F1:()=>DataRevertedMessage,Qq:()=>DataIntegrityMessage,dz:()=>SaveErrorMessage,Kx:()=>RevertErrorMessage,aT:()=>PublishErrorMessage,hu:()=>ForbiddenErrorMessage});var i=n(4117);class DataSavedMessage extends i.v{constructor(e){super(),this.dataTypes=e}}class DataPublishedMessage extends i.v{}class DataRevertedMessage extends i.v{constructor(e){super(),this.dataTypes=e}}class DataIntegrityMessage extends i.v{constructor(e,t,n=!1){super(),this.message=e,this.dataType=t,this.mockError=n}}class SaveErrorMessage extends i.v{constructor(e,t=[]){super(),this.error=e,this.dataTypes=t}}class RevertErrorMessage extends i.v{constructor(e,t=[]){super(),this.error=e,this.dataTypes=t}}class PublishErrorMessage extends i.v{constructor(e,t=[]){super(),this.error=e,this.dataTypes=t}}class ForbiddenErrorMessage extends i.v{constructor(e,t=[]){super(),this.error=e,this.dataTypes=t}}},76031:(e,t,n)=>{"use strict";n.d(t,{M3:()=>i,B_:()=>s,My:()=>r,ED:()=>o,ke:()=>a,FI:()=>l,pr:()=>c,gP:()=>d,Sm:()=>u});const i="subscriber_prompt",s="subscriber-prompt-active",r="subscriber-prompt-active",o=Object.freeze({popupDelay:14500,popupEnabled:!1,bannerEnabled:!1,domainDenylist:["ea4141d5b45bcfce5ac984955a7df9f74b323182","500ef59c0e9bd523a5e102d4b229b85df4c008c2","55d9b1786668eb25ce174aa06d46535054046935","44a68fb615814e263894da681018ed5687527b75","750514616c13561e878f04cd38cedc4bd3028f60","633e98d1f7cf36879e21d642068af2196d67a229","2566065b5d698efd82a16854185501ee2ea8eae6"]}),a={enabled:"spEnabled",forceBanner:"spBanner",forcePopup:"spPopup",forceReferrer:"spReferrer"},l="spaces.visitor.subscriber.prompt",c="mp/subscriber-prompt-dismissed",d="https://matterport.page.link/v2s-download",u="https://go.matterport.com/V2S_SignUp.html?utm_campaign=WF-Global-Visitor-To-Subscriber"},14385:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});const i=new(n(5477).Z)("subscriber-prompt")},65171:(e,t,n)=>{"use strict";n.d(t,{Z:()=>BeginMoveToSweepMessage});var i=n(12757);class BeginMoveToSweepMessage extends i.Z{}},38950:(e,t,n)=>{"use strict";n.d(t,{Z:()=>EndMoveToSweepMessage});var i=n(12757);class EndMoveToSweepMessage extends i.Z{constructor(e,t,n,i){super(e,i),this.alignmentType=t,this.placementType=n}}},12757:(e,t,n)=>{"use strict";n.d(t,{Z:()=>MoveToSweepMessage});var i=n(4117);class MoveToSweepMessage extends i.v{constructor(e,t){super(),this.fromSweep=t,this.toSweep=e,this.timestamp=Date.now()}}},94772:(e,t,n)=>{"use strict";n.d(t,{z9:()=>i,hU:()=>s,ZP:()=>Sweep});var i,s,r=n(84428),o=n(98254),a=n(36407);!function(e){e.ALIGNED="aligned",e.UNALIGNED="unaligned"}(i||(i={})),function(e){e.UNPLACED="unplaced",e.AUTO="auto",e.MANUAL="manual"}(s||(s={}));const l={[a.SL.BASE]:"512",[a.SL.STANDARD]:"1k",[a.SL.HIGH]:"2k",[a.SL.ULTRAHIGH]:"4k"},c={[a.SL.BASE]:"low",[a.SL.STANDARD]:"high",[a.SL.HIGH]:"2k",[a.SL.ULTRAHIGH]:"4k"};class Sweep extends o.T{constructor(e){super(),this.skyboxes={},e&&(e.id&&(this.id=e.id),void 0!==e.index&&(this.index=e.index),this.name=e.name||"",this.position=e.position||new r.Vector3,this.floorPosition=e.floorPosition||new r.Vector3,void 0!==e.floorId&&(this.floorId=e.floorId),this.roomId=e.roomId||null,this.rotation=e.rotation||new r.Quaternion,this.enabled=e.enabled||!1,this.vrenabled=e.vrenabled||!1,this.neighbours=e.neighbours||[],this.alignmentType=e.alignmentType||i.ALIGNED,this.placementType=e.placementType||s.UNPLACED,void 0!==e.uuid&&(this.uuid=e.uuid))}isAligned(){return this.alignmentType===i.ALIGNED}isUnplaced(){return this.placementType===s.UNPLACED}get sid(){return this.id}equals(e){return this.id===e.id&&this.index===e.index&&this.name===e.name&&this.position.equals(e.position)&&this.floorId===e.floorId&&this.roomId===e.roomId&&this.rotation.equals(e.rotation)&&this.enabled===e.enabled&&this.vrenabled===e.vrenabled&&this.alignmentType===e.alignmentType&&this.placementType===e.placementType}copy(e){return this.id=e.id,this.index=e.index,this.name=e.name,this.position=(new r.Vector3).copy(e.position),this.floorPosition=(new r.Vector3).copy(e.floorPosition),this.floorId=e.floorId,this.roomId=e.roomId,this.rotation=(new r.Quaternion).copy(e.rotation),this.enabled=e.enabled,this.vrenabled=e.vrenabled,this.neighbours=e.neighbours.slice(),this.alignmentType=e.alignmentType,this.placementType=e.placementType,this.resolutions=e.resolutions,this.skyboxes=Object.assign({},e.skyboxes),this}refresh(e){this.resolutions=e.resolutions;for(const t in this.skyboxes){const n=t;this.skyboxes[n].refreshFrom(e.skyboxes[n])}}async getTileUrl(e,t,n,i){const s=await this.getSkybox(e);let r;return r=s?s.tileUrlTemplate:`tiles/${this.id}/${l[e]}_face<face>_<x>_<y>.jpg`,r.replace("<face>",`${t}`).replace("<x>",`${n}`).replace("<y>",`${i}`)}async getFaceUrl(e,t){var n;const i=await this.getSkybox(e);let s;return s=i?null!==(n=i.urlTemplate)&&void 0!==n?n:"<face>":`pan/${c[e]}/${this.id}_skybox${t}.jpg`,s.replace("<face>",`${t}`)}async getSkybox(e){const t=this.skyboxes[e];return t?t.get():t}}},28757:(e,t,n)=>{"use strict";n.d(t,{NO:()=>ClearCurrentSweepCommand,aK:()=>SetCurrentSweepCommand,iF:()=>SweepSelectCommand,kR:()=>SweepHoverCommand,e9:()=>ToggleNonPanoCurrentPuckCommand,zd:()=>EnableSweepSelectionCommand,ZD:()=>DisableSweepSelectionCommand});var i=n(93037);class ClearCurrentSweepCommand extends i.m{}class SetCurrentSweepCommand extends i.m{constructor(e){super(),this.sweepId=e,this.payload={sweepId:e}}}class SweepSelectCommand extends i.m{constructor(e,t,n=500){super(),this.id="SELECT_SWEEP",this.payload={id:e,selected:t,duration:n}}}class SweepHoverCommand extends i.m{constructor(e,t,n=500){super(),this.id="HOVER_SWEEP",this.payload={id:e,hovered:t,duration:n}}}class ToggleNonPanoCurrentPuckCommand extends i.m{constructor(e){super(),this.id="TOGGLE_NON_PANO_CURRENT_PUCK",this.payload={visible:e}}}class EnableSweepSelectionCommand extends i.m{constructor(){super(...arguments),this.id="ENABLE_SWEEP_SELECTION"}}class DisableSweepSelectionCommand extends i.m{constructor(){super(...arguments),this.id="DISABLE_SWEEP_SELECTION"}}},53549:(e,t,n)=>{"use strict";n.d(t,{Z:()=>SweepData});var i=n(94772),s=n(35424),r=n(29984),o=n(66910),a=n(41252);class SweepData extends s.V{constructor(e){if(super(),this.name="sweeps",this.transitionActive=!1,this.sweepList=new r.d,this.sweepMap={},e){const t=Object.values(e).sort(((e,t)=>e.index-t.index));for(const e of t)this.sweepMap[e.id]=e,this.sweepList.push(e)}this.transition={progress:new a.z(0),active:!1,from:void 0,to:void 0}}refresh(e){for(const t in this.sweepMap)e[t]&&this.sweepMap[t].refresh(e[t])}canTransition(){return!this.transition.active}get currentSweepIndex(){if(this.currentSweep)return this.sweepMap[this.currentSweep].index}get currentSweepObject(){if(this.currentSweep)return this.getSweep(this.currentSweep)}get currentAlignedSweepObject(){if(this.currentSweep&&!this.isSweepUnaligned(this.currentSweep))return this.getSweep(this.currentSweep)}makeSweepChangeSubscription(e){return this.onPropertyChanged("currentSweep",e)}getSweep(e){return this.sweepMap[e]}getSweepByIndex(e){return this.sweepList.find((t=>t.index===e))}getSweepByUuid(e){return this.sweepList.find((t=>t.uuid===e))}containsSweep(e){return e in this.sweepMap}getFirstSweep(){let e=-1;for(;++e<this.sweepList.length;){const t=this.sweepList.get(e);if(t.enabled)return t}}getStartSweep(e){const t=e&&e.pano&&e.pano.uuid?this.getSweep(e.pano.uuid):null;return t&&t.enabled?t:this.getFirstSweep()}getClosestSweep(e,t){let n=Number.MAX_VALUE,s=null;return this.iterate((r=>{if(r.enabled&&(!t||r.alignmentType===i.z9.ALIGNED)){const t=e.distanceTo(r.position);t<n&&(n=t,s=r)}})),s}getFirstAlignedSweep(){let e=-1;for(;++e<this.sweepList.length;){const t=this.sweepList.get(e);if(t.enabled&&t.alignmentType===i.z9.ALIGNED)return t}return null}activateTransition(e,t){this.transition.active=!0,this.transition.from=t,this.transition.to=e,this.transitionActive=!0}deactivateTransition(){this.transition.active=!1,this.transition.from=void 0,this.transition.to=void 0,this.transitionActive=!1}isSweepUnaligned(e){if(!e)return!1;const t=this.getSweep(e);return t&&!t.isAligned()}isSweepAligned(e){const t=this.getSweep(e);return t&&t.isAligned()}isSweepDisabled(e=this.currentSweep){if(!e)return!1;const t=this.getSweep(e);return t&&!t.enabled}*sweeps(){for(const e of this.sweepList)yield e}iterate(e){this.sweepList.forEach(((t,n)=>{e(t,n)}))}filter(e){return this.sweepList.filter(e)}sortByScore(e,t,n){return(n||this.sweepList).filter((t=>e.every((e=>e(t))))).map((e=>({sweep:e,score:t.reduce(((t,n)=>t+n(e)),0)}))).sort(((e,t)=>t.score-e.score))}getSweepList(){return this.sweepList.values()}getSweepNeighbours(e){const t=[];for(const n of e.neighbours)t.push(this.getSweep(n));return t}getCollection(){return(0,o.q)(this.sweepMap)}getConnectedSweeps(e,t){const n=[e],i=new Set;for(t=t||(e=>!0);n.length;){const e=n.pop(),s=this.getSweep(e);i.add(e);for(const e of s.neighbours){t(this.getSweep(e))&&!i.has(e)&&n.push(e)}}return i}equals(e){if(this.sweepMap.length!==e.sweepMap.length||this.currentSweep!==e.currentSweep||this.transition.active!==e.transition.active||this.transition.from!==e.transition.from||this.transition.to!==e.transition.to)return!1;for(const t in this.sweepMap){if(!e.containsSweep(t))return!1;if(!this.sweepMap[t].equals(e.getSweep(t)))return!1}return!0}}},78720:(e,t,n)=>{"use strict";n.d(t,{ff:()=>o,vO:()=>a,T3:()=>l,H7:()=>c,_T:()=>d,WO:()=>u,b1:()=>h,nK:()=>p,pI:()=>m,_k:()=>g,D5:()=>f,SF:()=>v,jN:()=>b});var i=n(94772),s=n(84428);const r=.25,o=e=>t=>t!==e,a=e=>t=>!!e.neighbours&&-1!==e.neighbours.indexOf(t.id),l=e=>t=>e===t||a(e)(t),c=e=>e.placementType===i.hU.MANUAL,d=()=>e=>e.alignmentType===i.z9.ALIGNED,u=()=>e=>e.alignmentType!==i.z9.ALIGNED,h=e=>t=>e.floorId===t.floorId,p=e=>t=>e===t.floorId,m=(()=>{const e=new s.Vector3,t=new s.Vector3;return(n,i,s=r)=>r=>e.copy(r.position).sub(n).normalize().dot(t.copy(i).normalize())>s})(),g=()=>e=>e.enabled,f=(e,t)=>{const n=new s.Vector3;return t=t.clone(),i=>n.copy(i.position).sub(e).normalize().dot(t)>0},v=(e,t)=>n=>e.distanceTo(n.position)<t,b=(e,t)=>n=>e.distanceToSquared(n.position)<t},47356:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>SweepDataModule});var i=n(57227),s=n(14877),r=n(53549),o=n(14832),a=n(41674),l=n(38950),c=n(65171),d=n(31013),u=n(65270),h=n(15099),p=n(12757),m=n(28757),g=n(29474),f=n(5860),v=n(66225),b=n(5477);const y=new b.Z("mds-sweep-serializer");class MdsAnchorLocationUpdateSerializer{serialize(e){const t={};return void 0===e.enabled&&void 0===e.vrenabled||(t.tags=[],e.enabled&&t.tags.push("showcase"),e.vrenabled&&t.tags.push("vr")),this.validate(t)?t:null}validate(e){if(!e)return!1;const t=["tags"],n=t.some((t=>t in e)),i=0===Object.keys(e).filter((e=>!t.includes(e))).length,s=void 0===e.tags||Array.isArray(e.tags),r=s&&n&&i;return r||y.debug("Invalid AnchorPatch:",{tagsIsArrayIfPresent:s,hasSomeChanges:n,hasNoExtraChanges:i,mutableFields:t,data:e}),r}}var S=n(94772),E=n(63387),T=n(36407),O=n(63336),_=n(28129),A=n(4951),w=n(64069);const N=new b.Z("mds-sweep-serializer"),P={[w.bW.AUTO]:S.hU.AUTO,[w.bW.MANUAL]:S.hU.MANUAL,[w.bW.UNPLACED]:S.hU.UNPLACED},I={[w.Mk.VISION]:S.z9.ALIGNED,[w.Mk.UPLOAD]:S.z9.UNALIGNED};class MdsSweepDeserializer{deserialize(e){var t,n,i,s;if(!e||!this.validate(e))return N.debug("Deserialized invalid Sweep data from MDS",e),null;const r=e,o=new S.ZP;o.id=r.id,o.index=r.index,o.enabled=!!(null===(t=r.tags)||void 0===t?void 0:t.includes("showcase")),o.vrenabled=!!(null===(n=r.tags)||void 0===n?void 0:n.includes("vr")),o.neighbours=r.neighbors||[],r.position&&(o.floorPosition=E.ep.fromVisionVector(r.position)),o.floorId=(null===(i=r.floor)||void 0===i?void 0:i.id)||null,o.roomId=(null===(s=r.room)||void 0===s?void 0:s.id)||null;const a=r.pano;let l=a.label||"";if(l===`${o.index}`&&(l=""),o.name=l,o.alignmentType=I[a.source],o.uuid=a.sweepUuid||"",o.alignmentType===S.z9.ALIGNED?o.placementType=S.hU.AUTO:o.placementType=P[a.placement],a.position){const e=E.ep.fromVisionVector(a.position);o.placementType!==S.hU.AUTO&&e.distanceTo(o.floorPosition)>1e3&&(o.placementType=S.hU.UNPLACED),o.position=e}o.resolutions=[];const c=a.skyboxes||[];if(a.resolutions)for(const e of a.resolutions){const t=this.getPanoSizeClass(e),n=this.makeSkybox(c.find((t=>t.resolution===e)));t&&n?(o.resolutions.push(t),o.skyboxes[t]=n):N.debug(`Invalid pano size class ${e}`)}return a.rotation&&(o.rotation=E.ep.fromVisionQuaternion(a.rotation)),o.floorId||(o.alignmentType===S.z9.ALIGNED?N.warn(`Aligned sweep ${o.index} has no floor association`):o.placementType===S.hU.MANUAL&&N.debug(`Manually placed sweep ${o.index} has no floor association`)),o.roomId||o.alignmentType===S.z9.ALIGNED&&N.warn(`Aligned sweep ${o.index} has no room association`),o}validate(e){if(!e)return!1;const t=[],n=["id","index","tags"];if(t.push((()=>n.every((t=>t in e)))),t.push((()=>"number"==typeof e.index)),t.push((()=>!!e.position&&(0,A.u)(e.position))),t.push((()=>"pano"in e&&!!e.pano)),e.pano){const{placement:n,source:i,position:s}=e.pano;t.push((()=>!!n&&n in P)),t.push((()=>!!i&&i in I)),t.push((()=>!!s&&(0,A.u)(s)))}return t.every((e=>e()))}getPanoSizeClass(e){const t={low:T.SL.BASE,high:T.SL.STANDARD,"2k":T.SL.HIGH,"4k":T.SL.ULTRAHIGH};return e in t?t[e]:void 0}makeSkybox(e){if(e&&e.tileUrlTemplate&&e.tileResolution&&e.tileCount)return new _.n({tileUrlTemplate:e.tileUrlTemplate,tileResolution:parseInt(e.tileResolution,10),tileCount:e.tileCount,urlTemplate:null!==e.urlTemplate?e.urlTemplate:void 0},(0,O.p)(e.validUntil,null))}}var k=n(65);const C=new b.Z("mds-sweep-serializer");class MdsSweepPanoUpdateSerializer{serialize(e){const t={};return e.rotation&&(t.rotation=(0,k.J5)(E.ep.toVisionQuaternion(e.rotation))),e.position&&(t.position=(0,k.m)(E.ep.toVisionVector(e.position))),e.placementType&&e.placementType===S.hU.UNPLACED&&(t.resetPlacement=!0),"roomId"in e&&(e.roomId?t.roomId=e.roomId:t.resetRoom=!0),"floorId"in e&&(e.floorId?t.floorId=e.floorId:t.resetFloor=!0),"name"in e&&(t.label=e.name||""),this.validate(t)?t:null}validate(e){if(!e)return!1;const t=["resetPlacement","resetFloor","resetRoom","rotation","position","floorId","roomId","label"],n=t.some((t=>t in e)),i=0===Object.keys(e).filter((e=>!t.includes(e))).length,s=n&&i;return s||C.debug("Invalid PanoramaLocation:",{hasSomeChanges:n,hasNoExtraChanges:i,mutableFields:t,data:e}),s}}const L=new b.Z("mds-sweep-store");class MdsSweepStore extends v.u{constructor(){super(...arguments),this.deserializer=new MdsSweepDeserializer,this.panoSerializer=new MdsSweepPanoUpdateSerializer,this.anchorSerializer=new MdsAnchorLocationUpdateSerializer,this.prefetchKey="data.model.locations"}async read(e={}){const{readonly:t}=this.config,n={modelId:this.getViewId()},i=t?f.GetShowcaseSweeps:f.GetSweeps;return this.query(i,n,e).then((e=>{var t,n;const i=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.model)||void 0===n?void 0:n.locations;if(!i||!Array.isArray(i))return null;const s={};for(const e of i){const t=this.deserializer.deserialize(e);t&&(s[t.id]=t)}return s}))}async refresh(){return this.refreshPromise||(this.refreshPromise=this.read({fetchPolicy:"no-cache"}).finally((()=>{this.refreshPromise=void 0}))),this.refreshPromise}async update(e){if(!e||0===e.length)return;const t=this.getViewId();let n="";const i={};i.modelId=t;let s="";for(const t of e){const r=this.panoSerializer.serialize(t),o=this.anchorSerializer.serialize(t);if(!r&&!o)throw L.error("No changes to update:",t,e),new Error("MdsSweepStore.update failed");n+=""+(r?`, $pano${t.id}: PanoramicImageLocationPatch!`:"")+` ${o?`, $anchor${t.id}: AnchorPatch!`:""} `,i[`pano${t.id}`]=r,i[`anchor${t.id}`]=o,s+=`\n        ${r?`\n          panoLocation${t.id}: patchPanoLocation(modelId: $modelId, , locationId: "${t.id}", patch: $pano${t.id}) {\n            id\n            placement\n          }`:""}\n        ${o?`\n          panoAnchor${t.id}: patchAnchor(modelId: $modelId, , anchorId: "${t.id}", patch: $anchor${t.id}) {\n            id\n            tags\n          }`:""}\n      `}const r=g.Ps`
      mutation sweepUpdate($modelId: ID! ${n}) {
        ${s}
      }
    `;return this.mutate(r,i).then((()=>{}))}}var M=n(67495),D=n(18537),R=n(60673),x=n(52549),j=n(47063),U=n(48697),H=n(40603);class SweepTransitionError extends H.y{constructor(e="Failed to transition to sweep"){super(e),this.name="SweepTransition"}}class InvalidSweepError extends H.y{constructor(e="Invalid Sweep"){super(e),this.name="InvalidSweep"}}class SweepDataModule extends i.Y{constructor(){super(...arguments),this.name="sweep-data",this.internalProgress=!1,this.defaultEasing=u.qb,this.moveToSweep=e=>{const t=new d.Q;return e.prevSweepId=e.prevSweepId||this.sweepData.currentSweep,this.activateSweep(e).then((()=>(this.beginSweepTransition(e),this.defaultSweepCameraMove(t,e)))).then((()=>{this.endSweepTransition(e),t.resolve()})).catch((n=>{this.log.debug(`Failure moving to sweep ${e.sweepId}`,n),t.reject(n)})),t.promise()},this.activateSweep=async e=>{if(!this.sweepData.canTransition()||!this.cameraData.canTransition())throw new SweepTransitionError("Tried to start transition while another transition was active");if(!this.sweepData.containsSweep(e.sweepId))throw new InvalidSweepError(`Invalid sweep ${e.sweepId}`);return this.activateSweepUnsafe(e)},this.activateSweepUnsafe=async e=>{this.sweepPanoModule||(this.sweepPanoModule=await this.engine.getModuleBySymbol(s.y.SWEEP_PANO));return this.sweepPanoModule.getRenderer().activateSweep(e.sweepId)},this.instantSweepTransition=e=>{const t=this.sweepData.currentSweep;this.beginSweepTransition({sweepId:e,transitionTime:0,internalProgress:!0,prevSweepId:t}),this.sweepData.currentSweep=e,this.sweepData.commit(),this.engine.broadcast(new p.Z(e,t)),this.endSweepTransition({sweepId:e,prevSweepId:t})},this.beginSweepTransition=e=>{this.sweepData.activateTransition(e.sweepId,e.prevSweepId||this.sweepData.currentSweep),this.internalProgress=e.internalProgress||!1,this.sweepData.transition.progress.modifyAnimation(0,1,e.transitionTime||0,e.easing||this.defaultEasing),this.sweepData.commit(),this.engine.broadcast(new c.Z(e.sweepId,e.prevSweepId))},this.endSweepTransition=e=>{const t=this.sweepData.getSweep(e.sweepId);this.sweepData.deactivateTransition(),this.sweepData.currentSweep=e.sweepId,this.sweepData.transition.progress.stop(1),this.internalProgress=!1,this.sweepData.commit(),this.engine.broadcast(new l.Z(e.sweepId,t.alignmentType,t.placementType,e.prevSweepId))},this.defaultSweepCameraMove=async(e,t)=>{const n={position:this.sweepData.getSweep(t.sweepId).position,rotation:t.rotation},i=(0,a.AN)(this.cameraData.aspect());let s=o.n.Interpolate;void 0!==t.transitionType&&o.n[t.transitionType]&&(s=t.transitionType);const r=this.cameraModule.moveTo({transitionType:s,pose:n,transitionTime:t.transitionTime,transitionSpeedMultiplier:t.transitionSpeedMultiplier,projection:i,easing:t.easing,rotationDelay:t.rotationDelay});let l=!1;return r.progress((n=>{this.sweepData.transition.progress.updateProgress(n),e.notify(n),n>=.5&&!l&&(l=!0,this.sweepData.currentSweep=t.sweepId,this.sweepData.commit(),this.engine.broadcast(new p.Z(t.sweepId,t.prevSweepId)))})),r.nativePromise()},this.tryInferFloorIds=e=>{for(const t of Object.values(e))if(t.isAligned()&&null===t.floorId){this.log.warn(`Aligned sweep ${t.index} has no floor association`);const n=t.neighbours.map((n=>({id:n,floorId:e[n].floorId,distance:e[n].floorPosition.distanceToSquared(t.floorPosition)})));n.sort(((e,t)=>e.distance-t.distance));const i=n.find((e=>e.floorId));i&&(this.log.debug(`Inferred Sweep ${t.index} floor as ${i.floorId} from neighbors`),t.floorId=i.floorId)}}}async init(e,t){const{readonly:n,baseUrl:i,baseModelId:o}=e;this.engine=t,this.market=this.engine.market,this.store=new MdsSweepStore({readonly:n,baseUrl:i,viewId:o});const a=await this.store.read()||{};[this.filterSweepData,this.tryInferFloorIds].forEach((e=>e(a))),(0,_.s)(a,(async()=>{if(this.store.refresh){const e=await this.store.refresh();this.sweepData.refresh(e||{})}else this.log.debug("Can't refresh sweep URLs - operation not supported")})),this.sweepData=new r.Z(a),this.market.register(this,r.Z,this.sweepData);const l=await t.getModuleBySymbol(s.y.STORAGE);if(!1===n){this.monitor=new M.c(this.sweepData.getCollection(),{aggregationType:D.E.NextFrame,shallow:!0},t),this.monitor.onChanged((()=>this.engine.commandBinder.issueCommand(new j.VQ({dataTypes:[x.g.SWEEPS]}))));const e=await t.market.waitForData(U.Q);e.setRevertableType(x.g.SWEEPS),e.setPublishableType(x.g.SWEEPS)}this.cameraModule=await this.engine.getModuleBySymbol(s.y.CAMERA),this.cameraData=await t.market.waitForData(h.M_),this.bindings.push(t.commandBinder.addBinding(m.NO,(async()=>{this.sweepData.currentSweep=void 0,this.sweepData.commit()})),t.commandBinder.addBinding(m.aK,(async e=>{if(e.sweepId)try{const t=e.sweepId;await this.activateSweepUnsafe({sweepId:t});const n=this.sweepData.currentSweep;this.beginSweepTransition({sweepId:t,transitionTime:0,internalProgress:!0,prevSweepId:n}),this.sweepData.currentSweep=t,this.endSweepTransition({sweepId:t,prevSweepId:n}),this.sweepData.commit()}catch(e){this.log.error(e)}else this.sweepData.currentSweep=void 0,this.sweepData.commit()})),l.onSave((()=>this.save()),{dataType:x.g.SWEEPS}))}filterSweepData(e){for(const t in e){const n=e[t];n.neighbours=n.neighbours.filter((t=>t in e))}}onUpdate(e){this.internalProgress&&this.sweepData.transition.active&&this.sweepData.transition.progress.tick(e)}async save(){if(!this.store)throw Error("No store configured for saving sweep edits!");const e=this.monitor.getDiffRecord();this.monitor.clearDiffRecord();const t=e.filter((e=>e.action===R.KI.updated)).map((e=>{const t=this.sweepData.getSweep(e.index),n=Object.assign({id:e.index},e.diff);return("position"in n||"rotation"in n)&&(n.position=t.position,n.rotation=t.rotation),("enabled"in n||"vrenabled"in n)&&(n.enabled=t.enabled,n.vrenabled=t.vrenabled),n}));return this.store.update(t)}}},41403:(e,t,n)=>{"use strict";n.d(t,{o:()=>TileDownloadedMessage});var i=n(4117);class TileDownloadedMessage extends i.v{constructor(){super()}}},40386:(e,t,n)=>{"use strict";n.d(t,{YS:()=>s,Xd:()=>r,k4:()=>TilingSettings});var i=n(87100);const s="settings/tiling/preload_quality",r=Object.freeze({overlayStyle:(0,i.eY)("tileoverlay",0),uploadIntervalDelay:(0,i.eY)("tileupdelay",50),highResUploadsPerFrame:(0,i.eY)("maxnbtpf",2),maxHighResUploadsPerFrame:100,loadIndicatorDelay:300,uploadsPerFrame:(0,i.eY)("maxbtpf",6),maxUploadsPerFrame:100,windowHeightHighQualityThreshold:800,windowHeightHighQualityThresholdOverride:(0,i.eY)("threshold2k",void 0),concurrentDownloads:(0,i.eY)("tileconc",3),maxConcurrentDownloads:12,navigation:{directionFactor:10,distanceFactor:-1}});class TilingSettings{constructor(){this.reset()}reset(){this.downloadFullPano=!1,this.concurrentDownloads=r.concurrentDownloads,this.uploadsPerFrame=r.uploadsPerFrame,this.highResUploadsPerFrame=r.highResUploadsPerFrame}}},24486:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});const i="features/360_views"},1392:(e,t,n)=>{"use strict";n.d(t,{Z:()=>PuckClickedMessage});var i=n(4117);class PuckClickedMessage extends i.v{constructor(e,t,n){super(),this.sweepId=e,this.sweepIndex=t,this.totalSweeps=n}}},80567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>PuckHoverMessage});var i=n(4117);class PuckHoverMessage extends i.v{constructor(e,t){super(),this.sweepId=e,this.hovered=t}}},26583:(e,t,n)=>{"use strict";n.d(t,{YY:()=>PuckCollider,C$:()=>PuckRenderer});var i=n(84428),s=n(28757),r=n(95847),o=n(3035),a=n(1392),l=n(33299),c=n(99295),d=n(94772),u=n(14279),h=n(80567);class PuckMesh extends i.Mesh{}class PuckCollider extends i.Mesh{}class PuckRenderer{constructor(e,t,n,s,r,o,a,c=new i.Color(16724312),d=new i.Color(16724312),u=.8,h=.8,p=300,m=.4,g=l.o.ALL){this.scene=e,this.input=t,this.settingsData=n,this.sweepViewData=s,this.puckImagery=r,this.onFloor=o,this.checkRenderModes=a,this.idleColor=c,this.selectionColor=d,this.idleOpacity=u,this.editingOpacity=h,this.selectionDuration=p,this.puckSize=m,this.layer=g,this.sweepToMesh={},this.colliderToSweep={},this.editingEnabled=!1,this.dummyMat=new i.MeshBasicMaterial,this.puckOffset=new i.Vector3(0,.05,0),this.bindings=[],this.wasDrawing=!1,this.renderPuckHighlight=(e,t)=>{if(!this.sweepViewData.isSweepAligned(e))return;const n=this.sweepToMesh[e].material.color;t?n.copy(this.selectionColor):n.copy(this.idleColor)},this.updateLookAt=e=>{this.sweepViewData.iterate((t=>{const n=this.sweepToMesh[t.id];n&&n.visible&&n.lookAt(e)}))}}init(){if(this.puckGeometry=new i.PlaneBufferGeometry(this.puckSize,this.puckSize),this.onFloor){const e=new i.Matrix4;e.makeRotationFromEuler(new i.Euler(-Math.PI/2,0,0,"XYZ")),this.puckGeometry.applyMatrix4(e)}this.sphereColliderGeometry=new i.SphereBufferGeometry(.5*this.puckSize,10,10),this.matParamsEnabled={color:this.idleColor.getHex(),opacity:this.idleOpacity,transparent:!0,depthWrite:!1,map:this.puckImagery.enabled},this.sweepViewData.iterate(this.createPuck.bind(this))}get displayDisabled(){return void 0!==this.puckImagery.disabled}onSweepStateAnimationChanged(e,t,n){const i=n.value,s=e.enabled?this.puckImagery.enabled:this.puckImagery.disabled,r=e.enabled?this.puckImagery.enabledHover:this.puckImagery.disabledHover,o=i>0&&this.editingEnabled,a=e.id===this.sweepViewData.selectedSweep,l=this.editingEnabled&&a?this.selectionColor:this.idleColor,c=this.editingEnabled?this.editingOpacity:this.idleOpacity;t.setValues({map:o?r:s}),t.color.copy(l),t.opacity=c*(1-i)+1*i}createMaterial(e){const t=new i.MeshBasicMaterial(this.matParamsEnabled);return this.puckImagery.disabled&&!e.enabled&&t.setValues({map:this.puckImagery.disabled}),this.bindings.push(e.onPropertyChanged("enabled",(()=>{t.setValues({map:e.enabled?this.puckImagery.enabled:this.puckImagery.disabled})}))),t}createMesh(e,t){const n=new PuckMesh(this.puckGeometry,t);this.onFloor?n.position.copy(e.floorPosition).add(this.puckOffset):(n.position.copy(e.position),n.rotation.setFromQuaternion(e.rotation)),n.name=e.id,n.updateMatrixWorld(!1),n.renderOrder=c.z.panoMarker;const i=this.sweepViewData.getState(e.id);return n.visible=i.visible,this.bindings.push(i.onPropertyChanged("visible",(e=>{n.visible=e}))),this.bindings.push(i.onPropertyChanged("animation",(n=>this.onSweepStateAnimationChanged(e,t,n)))),n.layers.mask=this.layer.mask,n}createCollider(e,t){let n;return n=this.onFloor?new PuckCollider(this.puckGeometry,this.dummyMat):new PuckCollider(this.sphereColliderGeometry,this.dummyMat),n.userData.sid=e.id,n.position.copy(t.position),n.rotation.copy(t.rotation),n.name=e.id,n.updateMatrixWorld(!1),n}createPuck(e){if(e.alignmentType!==d.z9.ALIGNED)return;const t=this.createMaterial(e),n=this.createMesh(e,t),i=this.createCollider(e,n);n.collider=i,this.sweepToMesh[e.id]=n,this.colliderToSweep[i.id]=e.id}toggleEditingEnabled(e){this.editingEnabled=e;for(const t in this.sweepToMesh){this.sweepToMesh[t].material.opacity=e?this.editingOpacity:this.idleOpacity}}getSweepId(e){return this.colliderToSweep[e]}updatePuckImagery(e){let t;this.displayDisabled||void 0===e.disabled?this.displayDisabled&&void 0===e.disabled&&(t=!1):t=!0,this.puckImagery=e,this.sweepViewData.iterate((e=>{if(e.alignmentType!==d.z9.ALIGNED)return;const n=this.sweepToMesh[e.id],i=this.sweepViewData.getState(e.id);n.visible=i.visible;let s=this.puckImagery.enabled;if(!e.enabled&&this.puckImagery.disabled&&(s=this.puckImagery.disabled),this.sweepToMesh[e.id].material.setValues({map:s}),void 0!==t){if(e.enabled)return;t?this.addSweepToScene(e.id):this.removeSweepFromScene(e.id)}}))}updateCheckRenderModes(e){this.checkRenderModes=e}removeSweepFromScene(e){const t=this.sweepToMesh[e];this.scene.remove(t),this.input.unregisterMesh(t.collider)}addSweepToScene(e){if(!this.sweepViewData.getSweep(e).enabled&&!this.displayDisabled)return;const t=this.sweepToMesh[e];this.scene.add(t),this.input.registerMesh(t.collider,!0)}render(){const e=this.checkRenderModes(),t=this.settingsData.tryGetProperty(u.U,!0);if(e&&t){if(!this.wasDrawing){for(const e in this.sweepToMesh)this.addSweepToScene(e);this.wasDrawing=!0}}else if(this.wasDrawing){for(const e in this.sweepToMesh)this.removeSweepFromScene(e);this.wasDrawing=!1}}dispose(){for(const e in this.sweepToMesh){const t=this.sweepToMesh[e];t.material.dispose(),t.geometry.dispose()}}activate(e){this.wasDrawing=!1;const t=new PuckComparator(this.sweepViewData);this.bindings.push(this.input.registerMeshHandler(r.z,t,((t,n)=>{e.commandBinder.issueCommand(new s.kR(this.getSweepId(n.id),!0,this.selectionDuration)),e.broadcast(new h.Z(this.getSweepId(n.id),!0))}))),this.bindings.push(this.input.registerMeshHandler(r.A,t,((t,n)=>{e.commandBinder.issueCommand(new s.kR(this.getSweepId(n.id),!1,this.selectionDuration)),e.broadcast(new h.Z(this.getSweepId(n.id),!1))}))),this.bindings.push(this.input.registerMeshHandler(o.R,t,((t,n)=>{const i=this.sweepViewData.getSweep(this.colliderToSweep[n.id]).index,s=this.sweepViewData.getAlignedSweeps(!0).length;e.broadcast(new a.Z(this.colliderToSweep[n.id],i,s))})))}deactivate(e){for(const e in this.sweepToMesh)this.removeSweepFromScene(e);for(const e of this.bindings)e.cancel();this.bindings.length=0}}class PuckComparator{constructor(e){this.sweepViewData=e}compare(e){if(e instanceof PuckCollider){return this.sweepViewData.getSweepVisibility(this.sweepViewData.getSweep(e.userData.sid))}return!1}}},14279:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});const i="features/sweep_pucks"},60649:(e,t,n)=>{"use strict";n.d(t,{D:()=>SweepViewData});var i=n(35424),s=n(67779),r=n(94772),o=n(78720),a=n(66910),l=n(98254),c=n(41252);class SweepState extends l.T{constructor(){super(...arguments),this.selected=!1,this.visible=!0,this.animation=new c.z(0)}}var d=n(37123);class SweepViewData extends i.V{constructor(e){super(),this.data=e,this.name="sweeps-view",this.states=new a.v,this.toolStateObservable=(0,s.Y)(d._.CLOSED),this.defaultSweepVisibilityRule=e=>e.enabled,this.sweepVisibilityRule=this.defaultSweepVisibilityRule,this.selectCurrentSweep=()=>{this.setSelectedSweep(this.data.currentSweep||null)},this.derivedData={},this.selectedSweepObservable=new s.f(null);const t=[d._.MOVING,d._.PLACING,d._.PRESSING,d._.ROTATING];e.makeSweepChangeSubscription((()=>{t.includes(this.toolState)||this.selectCurrentSweep()})),e.iterate((e=>{const t=new SweepState;this.states.set(e.id,t),t.commit()})),this.updateViewData()}updateViewData(){this.data.iterate(((e,t)=>{this.derivedData[e.id]=this.makeViewDataForSweep(e,t)})),this.commit()}updateSweepVisibilityRule(e){this.sweepVisibilityRule=e||this.defaultSweepVisibilityRule}getSweepVisibility(e){return this.sweepVisibilityRule(e)}get selectedSweep(){return this.selectedSweepObservable.value}setSelectedSweep(e){if(e===this.selectedSweep)return;const t=this.selectedSweep;if(this.selectedSweepObservable.value=e,null!==e){const t=this.getState(e);t.selected=!0,t.commit()}if(null!==t){const e=this.getState(t);e.selected=!1,e.commit()}}onSelectedSweepChanged(e){return this.selectedSweepObservable.onChanged(e)}setToolState(e){e===d._.PLACING&&this.selectedSweep&&this.setSelectedSweep(null),this.toolStateObservable.value=e}get toolState(){return this.toolStateObservable.value}onToolStateChanged(e){return this.toolStateObservable.onChanged(e)}getSweep(e){return this.data.getSweep(e)}makeViewDataForSweep(e,t){const n=this.derivedData[e.id];return n?(n.floorId=e.floorId,n.position=e.position,n.alignmentType=e.alignmentType,n.placed=e.placementType===r.hU.MANUAL,n.enabled=e.enabled,n.name=e.name,n):{id:e.id,floorId:e.floorId,position:e.position,index:e.index,alignmentType:e.alignmentType,dataIndex:t,placed:e.placementType===r.hU.MANUAL,enabled:e.enabled,name:e.name}}getViewData(e){const t=this.data.getSweep(e),n=this.derivedData[e];return t&&!n&&(this.derivedData[e]=this.makeViewDataForSweep(t,t.index)),this.derivedData[e]}isSweepAligned(e){return this.data.isSweepAligned(e)}iterate(e){this.data.iterate(e)}getState(e){return this.states.get(e)}isVisible(e){return this.states.get(e).visible}setVisible(e,t){const n=this.getState(e);n.visible!==t&&(n.visible=t,n.commit())}updateAnimations(e){for(const t of this.states)t.animation.tick(e)}modifySelectAnimation(e,t,n){const i=this.getState(e).animation,s=1===i.endValue;t!==s&&(s?i.modifyAnimation(i.value,0,n):i.modifyAnimation(0,1,n))}getIndexByAlignment(e,t){return this.getAlignedSweeps(e).findIndex((e=>e.id===t))}getAlignedSweeps(e){const t=Object.values(this.derivedData);return e?t.filter((0,o._T)()):t.filter((0,o.WO)())}}},37123:(e,t,n)=>{"use strict";var i;n.d(t,{_:()=>i}),function(e){e.CLOSED="closed",e.IDLE="idle",e.PRESSING="pressing",e.PLACING="placing",e.MOVING="moving",e.ROTATING="rotating",e.ROTATED="rotated"}(i||(i={}))},69826:(e,t,n)=>{"use strict";n.d(t,{n:()=>TagsViewData});var i=n(84428),s=n(35424),r=n(67779),o=n(29984),a=n(77280),l=n(59483);function c(e,t,n,i,s){if(isNaN(t)||isNaN(n)||isNaN(i))return e;var r,o,a,l,c,d,u,h,p,m,g,f,v=e._root,b={data:s},y=e._x0,S=e._y0,E=e._z0,T=e._x1,O=e._y1,_=e._z1;if(!v)return e._root=b,e;for(;v.length;)if((h=t>=(o=(y+T)/2))?y=o:T=o,(p=n>=(a=(S+O)/2))?S=a:O=a,(m=i>=(l=(E+_)/2))?E=l:_=l,r=v,!(v=v[g=m<<2|p<<1|h]))return r[g]=b,e;if(c=+e._x.call(null,v.data),d=+e._y.call(null,v.data),u=+e._z.call(null,v.data),t===c&&n===d&&i===u)return b.next=v,r?r[g]=b:e._root=b,e;do{r=r?r[g]=new Array(8):e._root=new Array(8),(h=t>=(o=(y+T)/2))?y=o:T=o,(p=n>=(a=(S+O)/2))?S=a:O=a,(m=i>=(l=(E+_)/2))?E=l:_=l}while((g=m<<2|p<<1|h)==(f=(u>=l)<<2|(d>=a)<<1|c>=o));return r[f]=v,r[g]=b,e}function d(e,t,n,i,s,r,o){this.node=e,this.x0=t,this.y0=n,this.z0=i,this.x1=s,this.y1=r,this.z1=o}function u(e){return e[0]}function h(e){return e[1]}function p(e){return e[2]}function m(e,t,n,i){var s=new g(null==t?u:t,null==n?h:n,null==i?p:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?s:s.addAll(e)}function g(e,t,n,i,s,r,o,a,l){this._x=e,this._y=t,this._z=n,this._x0=i,this._y0=s,this._z0=r,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function f(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var v=m.prototype=g.prototype;v.copy=function(){var e,t,n=new g(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return n;if(!i.length)return n._root=f(i),n;for(e=[{source:i,target:n._root=new Array(8)}];i=e.pop();)for(var s=0;s<8;++s)(t=i.source[s])&&(t.length?e.push({source:t,target:i.target[s]=new Array(8)}):i.target[s]=f(t));return n},v.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e),i=+this._z.call(null,e);return c(this.cover(t,n,i),t,n,i,e)},v.addAll=function(e){var t,n,i,s,r,o=e.length,a=new Array(o),l=new Array(o),d=new Array(o),u=1/0,h=1/0,p=1/0,m=-1/0,g=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||isNaN(r=+this._z.call(null,t))||(a[n]=i,l[n]=s,d[n]=r,i<u&&(u=i),i>m&&(m=i),s<h&&(h=s),s>g&&(g=s),r<p&&(p=r),r>f&&(f=r));if(u>m||h>g||p>f)return this;for(this.cover(u,h,p).cover(m,g,f),n=0;n<o;++n)c(this,a[n],l[n],d[n],e[n]);return this},v.cover=function(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var i=this._x0,s=this._y0,r=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(i))o=(i=Math.floor(e))+1,a=(s=Math.floor(t))+1,l=(r=Math.floor(n))+1;else{for(var c,d,u=o-i||1,h=this._root;i>e||e>=o||s>t||t>=a||r>n||n>=l;)switch(d=(n<r)<<2|(t<s)<<1|e<i,(c=new Array(8))[d]=h,h=c,u*=2,d){case 0:o=i+u,a=s+u,l=r+u;break;case 1:i=o-u,a=s+u,l=r+u;break;case 2:o=i+u,s=a-u,l=r+u;break;case 3:i=o-u,s=a-u,l=r+u;break;case 4:o=i+u,a=s+u,r=l-u;break;case 5:i=o-u,a=s+u,r=l-u;break;case 6:o=i+u,s=a-u,r=l-u;break;case 7:i=o-u,s=a-u,r=l-u}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=s,this._z0=r,this._x1=o,this._y1=a,this._z1=l,this},v.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},v.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},v.find=function(e,t,n,i){var s,r,o,a,l,c,u,h,p,m=this._x0,g=this._y0,f=this._z0,v=this._x1,b=this._y1,y=this._z1,S=[],E=this._root;for(E&&S.push(new d(E,m,g,f,v,b,y)),null==i?i=1/0:(m=e-i,g=t-i,f=n-i,v=e+i,b=t+i,y=n+i,i*=i);h=S.pop();)if(!(!(E=h.node)||(r=h.x0)>v||(o=h.y0)>b||(a=h.z0)>y||(l=h.x1)<m||(c=h.y1)<g||(u=h.z1)<f))if(E.length){var T=(r+l)/2,O=(o+c)/2,_=(a+u)/2;S.push(new d(E[7],T,O,_,l,c,u),new d(E[6],r,O,_,T,c,u),new d(E[5],T,o,_,l,O,u),new d(E[4],r,o,_,T,O,u),new d(E[3],T,O,a,l,c,_),new d(E[2],r,O,a,T,c,_),new d(E[1],T,o,a,l,O,_),new d(E[0],r,o,a,T,O,_)),(p=(n>=_)<<2|(t>=O)<<1|e>=T)&&(h=S[S.length-1],S[S.length-1]=S[S.length-1-p],S[S.length-1-p]=h)}else{var A=e-+this._x.call(null,E.data),w=t-+this._y.call(null,E.data),N=n-+this._z.call(null,E.data),P=A*A+w*w+N*N;if(P<i){var I=Math.sqrt(i=P);m=e-I,g=t-I,f=n-I,v=e+I,b=t+I,y=n+I,s=E.data}}return s},v.remove=function(e){if(isNaN(r=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e))||isNaN(a=+this._z.call(null,e)))return this;var t,n,i,s,r,o,a,l,c,d,u,h,p,m,g,f=this._root,v=this._x0,b=this._y0,y=this._z0,S=this._x1,E=this._y1,T=this._z1;if(!f)return this;if(f.length)for(;;){if((u=r>=(l=(v+S)/2))?v=l:S=l,(h=o>=(c=(b+E)/2))?b=c:E=c,(p=a>=(d=(y+T)/2))?y=d:T=d,t=f,!(f=f[m=p<<2|h<<1|u]))return this;if(!f.length)break;(t[m+1&7]||t[m+2&7]||t[m+3&7]||t[m+4&7]||t[m+5&7]||t[m+6&7]||t[m+7&7])&&(n=t,g=m)}for(;f.data!==e;)if(i=f,!(f=f.next))return this;return(s=f.next)&&delete f.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(f=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&f===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[g]=f:this._root=f),this):(this._root=s,this)},v.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},v.root=function(){return this._root},v.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},v.visit=function(e){var t,n,i,s,r,o,a,l,c=[],u=this._root;for(u&&c.push(new d(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=c.pop();)if(!e(u=t.node,i=t.x0,s=t.y0,r=t.z0,o=t.x1,a=t.y1,l=t.z1)&&u.length){var h=(i+o)/2,p=(s+a)/2,m=(r+l)/2;(n=u[7])&&c.push(new d(n,h,p,m,o,a,l)),(n=u[6])&&c.push(new d(n,i,p,m,h,a,l)),(n=u[5])&&c.push(new d(n,h,s,m,o,p,l)),(n=u[4])&&c.push(new d(n,i,s,m,h,p,l)),(n=u[3])&&c.push(new d(n,h,p,r,o,a,m)),(n=u[2])&&c.push(new d(n,i,p,r,h,a,m)),(n=u[1])&&c.push(new d(n,h,s,r,o,p,m)),(n=u[0])&&c.push(new d(n,i,s,r,h,p,m))}return this},v.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new d(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=n.pop();){var s=t.node;if(s.length){var r,o=t.x0,a=t.y0,l=t.z0,c=t.x1,u=t.y1,h=t.z1,p=(o+c)/2,m=(a+u)/2,g=(l+h)/2;(r=s[0])&&n.push(new d(r,o,a,l,p,m,g)),(r=s[1])&&n.push(new d(r,p,a,l,c,m,g)),(r=s[2])&&n.push(new d(r,o,m,l,p,u,g)),(r=s[3])&&n.push(new d(r,p,m,l,c,u,g)),(r=s[4])&&n.push(new d(r,o,a,g,p,m,h)),(r=s[5])&&n.push(new d(r,p,a,g,c,m,h)),(r=s[6])&&n.push(new d(r,o,m,g,p,u,h)),(r=s[7])&&n.push(new d(r,p,m,g,c,u,h))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this},v.x=function(e){return arguments.length?(this._x=e,this):this._x},v.y=function(e){return arguments.length?(this._y=e,this):this._y},v.z=function(e){return arguments.length?(this._z=e,this):this._z};var b=n(63387),y=n(41674);class TagsViewData extends s.V{constructor(e,t,n,i,s,a,c,d,u){super(),this.data=e,this.floorsData=t,this.cameraStartData=n,this.sortOrder=i,this.textParser=s,this.linkHandler=a,this.tagDefaultTitle=c,this.backgroundTexture=d,this.objectTagsEnabled=u,this.name="tags-view-data",this.alphabeticTagViewsObservable=(0,o.C)([]),this.enabledTagViewsObservable=(0,o.C)([]),this.sortedTagViewsObservable=(0,o.C)([]),this.openTagViewObservable=(0,r.Y)(null),this.tagsMode=l.U.DEFAULT,this.dirtyTagState=!1,this.creatingTag=!1,this.suspendVisibilityUpdates=!1,this.capabilities=new Map,this.updateViewData()}getData(){return this.data}getTextParser(){return this.textParser}getLinkHandler(){return this.linkHandler}getCapabilities(e){const t={focus:!0};this.capabilities.has(e)||this.capabilities.set(e,t);const n=this.capabilities.get(e)||t;return Object.assign({},n)}updateCapabilities(e,t){this.capabilities.set(e,Object.assign({},t))}setTagsMode(e){this.tagsMode=e,this.commit()}get tagViewList(){return this.enabledTagViewsObservable}getAlphabeticTagViews(){return this.alphabeticTagViewsObservable}getSortedTagViewList(){return this.sortedTagViewsObservable}getTagCount(){return this.data.collection.length}setTagSortOrder(e){this.sortOrder=e,this.updateSortedTagViews()}hasSortOrder(){return this.sortOrder.length>0}getTagView(e){const t=this.alphabeticTagViewsObservable.findIndex((t=>t.id===e));return-1!==t?this.alphabeticTagViewsObservable.get(t):null}getTagViewByIndex(e){return-1!==e?this.enabledTagViewsObservable.get(e):null}getOpenTagFlatListIndex(e){if(!this.openTagView)return-1;return(e?this.sortedTagViewsObservable.values():this.enabledTagViewsObservable.values()).findIndex((e=>{var t;return e.id===(null===(t=this.openTagView)||void 0===t?void 0:t.id)}))}updateViewData(e){e&&(this.sortOrder=e);const t=[];this.data.iterate((e=>{const n=this.createTagView(e);t.push(n)}));const n=this.sortByText(t);this.alphabeticTagViewsObservable.replace(n),this.updateSortedTagViews()}createTagView(e){return{id:e.sid,created:e.created,modified:e.modified,label:e.label,description:e.description,enabled:e.enabled,color:`#${e.color.getHexString()}`,anchorPosition:e.anchorPosition,floorId:e.floorId,roomId:e.roomId,stemNormal:e.stemVector,stemLength:e.stemHeight,stemEnabled:e.stemVisible,attachments:[...e.externalAttachments,...e.fileAttachments,...e.sandboxAttachments],objectAnnotationId:e.objectAnnotationId,keywords:e.keywords,icon:e.icon,backgroundTexture:this.backgroundTexture,widgetFrame:void 0,preventPreview:!1,preventSelect:!1,preventDock:!1}}setOpenTagView(e){this.openTagViewObservable.value=e}get openTagView(){return this.openTagViewObservable.value}onOpenTagViewChanged(e){return this.openTagViewObservable.onChanged(e)}updateOpenTagView(e){const t=this.openTagView;t&&(Object.assign(t,e),this.setOpenTagView(t))}getAvailableKeywords(){return Array.from(new Set(this.data.getTagKeywords()))}updateSortedTagViews(){const e=this.sortByOrder(this.alphabeticTagViewsObservable.values()),t=e.filter((e=>!e.objectAnnotationId));this.sortedTagViewsObservable.replace(t),this.updateEnabledTagViews(e)}updateEnabledTagViews(e){const t=e.filter((e=>e.enabled&&!e.objectAnnotationId));this.enabledTagViewsObservable.replace(t)}sortByOrder(e){const{floorsData:t,cameraStartData:n,sortOrder:s}=this,r=n.pose.camera.position||a.f.ZERO,o=n.pose.camera.rotation||new i.Quaternion,l=t.getClosestFloorAtHeight(r.y).index,c=(0,b.xS)(r,o,(0,y.AN)(1)),d=new Map;let u=0;for(let n=0;n<t.getFloorCount();n++){const s=(l+n)%t.getFloorCount(),o=t.getFloorAtIndex(s);if(!o)continue;const a=e.filter((e=>e.floorId===o.id));if(0===a.length)continue;let h,p=1/0;const g=new i.Vector3,f=(new m).x((e=>e.x)).y((e=>e.y)).z((e=>e.z));f.addAll(a.map((e=>{g.copy(e.stemNormal).setLength(e.stemLength).add(e.anchorPosition);const t={id:e.id,x:g.x,y:g.y,z:g.z},n=g.distanceToSquared(r);return n<p&&c.containsPoint(g)&&(p=n,h=t),t})));let v=null!=h?h:f.find(r.x,r.y,r.z);d.set(v.id,u++),f.remove(v);let b=a.length-1;for(;b>0;)v=f.find(v.x,v.y,v.z),d.set(v.id,u++),f.remove(v),b--}const h=new Map;s.forEach(((e,t)=>h.set(e,t)));return e.sort(((e,t)=>{var n,i;const s=(null!==(n=h.get(e.id))&&void 0!==n?n:Number.MAX_SAFE_INTEGER)-(null!==(i=h.get(t.id))&&void 0!==i?i:Number.MAX_SAFE_INTEGER);if(s)return s;const r=d.get(e.id),o=d.get(t.id);if(void 0===r||void 0===o)throw new Error("All ids should exist in spatialPositions");return r-o}))}sortByText(e){return e.sort(((e,t)=>this.sortableText(e)<this.sortableText(t)?-1:1))}sortableText(e){return(e.label.trim()||e.description||this.tagDefaultTitle).toLowerCase()}}},19822:(e,t,n)=>{"use strict";n.d(t,{yU:()=>TagsToolToggleCommand,$J:()=>StartNewTagCommand,QG:()=>SaveTagCommand,bg:()=>SaveTagVisibilityCommand,$g:()=>CancelNewTagCommand,zt:()=>EditTagCommand,q4:()=>ToggleDirtyTagStateCommand,lt:()=>OpenTagCommand,sf:()=>DockLeftTagCommand,T3:()=>DeleteTagCommand,xb:()=>CloseTagCommand,Bz:()=>SaveTagOrderCommand,$D:()=>SuspendTagVisibilityUpdates,yo:()=>ResumeTagVisibilityUpdates,Li:()=>SetTagsModeCommand});var i=n(93037);class TagsToolToggleCommand extends i.m{constructor(e){super(),this.payload={opened:e}}}class StartNewTagCommand extends i.m{constructor(){super()}}class SaveTagCommand extends i.m{constructor(e,t,n,i,s){super(),this.payload={id:e,properties:t,pendingAttachments:n,removedAttachments:i,embed:s}}}class SaveTagVisibilityCommand extends i.m{constructor(e,t){super(),this.payload={id:e,visible:t}}}class CancelNewTagCommand extends i.m{constructor(){super()}}class EditTagCommand extends i.m{constructor(e){super(),this.id="TAG_EDIT",this.payload={tagId:e}}}class ToggleDirtyTagStateCommand extends i.m{constructor(e){super(),this.id="TAG_DIRTY_TOGGLE",this.payload={dirty:e}}}class OpenTagCommand extends i.m{constructor(e,t,n,i){super(),this.id="TAG_OPEN",this.payload={tagId:e,transition:t,dock:n,forceTransition:i}}}class DockLeftTagCommand extends i.m{constructor(e,t,n){super(),this.id="TAG_OPEN_LEFT",this.payload={tagId:e,transition:t,dock:n}}}class DeleteTagCommand extends i.m{constructor(e,t){super(),this.id="TAG_DELETE",this.payload={id:e,removalMethod:t}}}class CloseTagCommand extends i.m{constructor(){super()}}class SaveTagOrderCommand extends i.m{constructor(e){super(),this.payload={ids:e}}}class SuspendTagVisibilityUpdates extends i.m{}class ResumeTagVisibilityUpdates extends i.m{}class SetTagsModeCommand extends i.m{constructor(e){super(),this.payload={mode:e}}}},59483:(e,t,n)=>{"use strict";var i;n.d(t,{U:()=>i}),function(e){e.DEFAULT="default",e.REORDERING="reordering"}(i||(i={}))},34118:(e,t,n)=>{"use strict";n.d(t,{RY:()=>i,Qy:()=>s,RV:()=>r,i1:()=>o});const i="features/tags2",s="tags2",r="features/tagIcons",o="spaces.tags_v2";Object.freeze({colors:["#d44441","#f44336","#e91e63","#f78da7","#9c4b92","#673ab7","#03687d","#03a9f4","#00bcd4","#417505","#51a868","#37d67a","#cddc39","#fbcd00","#ffac17","#ff6900","#abb8c3","#607d8b"]})},29410:(e,t,n)=>{"use strict";n.d(t,{U:()=>Tool});var i=n(98254);class Tool extends i.T{constructor(e){super(),this.order=1e4,e&&Object.assign(this,e)}}},77677:(e,t,n)=>{"use strict";n.d(t,{t:()=>ToolsData});var i,s=n(35424),r=n(67779),o=n(66910),a=n(29984),l=n(15183),c=n(91183);!function(e){e.LOW="low",e.NORMAL="normal"}(i||(i={}));class ObservableMapFilter extends l.y{constructor(e){super(),this.priority=i.NORMAL,this.filters=new Map,this.view=[],this._keys=new Set,this._dirty=!1,this.map=e,this.applyFilters(),this.map.onElementChanged({onAdded:(e,t)=>this.onAdded(t,e),onRemoved:(e,t)=>this.onRemoved(t,e),onUpdated:(e,t)=>this.applyFilters(t)})}has(e){return this._keys.has(e)}get(e){return this.has(e)?this.map.get(e):void 0}setFilter(e,t){return(0,c.k1)((()=>{this.filters.set(e,t),this.applyFilters()}),(()=>this.clearFilter(e)),!0)}clearFilter(e){return!!this.filters.has(e)&&(this.filters.delete(e),this.applyFilters(),!0)}clearFilters(){this.filters.clear(),this.applyFilters()}sort(e){this.compareFunc=e,this.applySort(),this.setDirty()}*[Symbol.iterator](){for(const e of this.view)yield e}get length(){return this.view.length}groupBy(e){const t={};for(const n of this.view){const i=String(n[e]);t[i]||(t[i]=[]),t[i].push(n)}return t}setDirty(e=!0){this.priority===i.LOW?this._dirty||(this._dirty=!0,requestAnimationFrame((()=>{this._dirty=!1,super.setDirty(e)}))):super.setDirty(e)}add(e){return!this.has(e)&&(this._keys.add(e),this.view.push(this.map.get(e)),!0)}delete(e){if(!this.has(e))return!1;this._keys.delete(e);const t=this.map.get(e),n=this.view.indexOf(t);return-1!==n&&this.view.splice(n,1),!0}testFilters(e){return[...this.filters.values()].every((t=>t(e)))}applyFilters(e){let t=!1;for(const e of this.map.keys){const n=this.map.get(e),i=this.testFilters(n);(i&&this.add(e)||!i&&this.delete(e))&&(t=!0)}e&&this.has(e)&&(t=!0),t&&(this.applySort(),this.setDirty())}applySort(){this.compareFunc&&this.view.sort(this.compareFunc)}onRemoved(e,t){if(!this.has(e))return;this._keys.delete(e);const n=this.view.findIndex((e=>e===t));-1!==n&&this.view.splice(n,1),this.setDirty()}onAdded(e,t){this.testFilters(t)&&this.applyFilters(e)}}var d=n(20585),u=n(23676);class ToolsData extends s.V{constructor(){super(),this.name="tools-data",this.tools=(0,o.q)(),this.toolsLoadedObservable=(0,r.Y)(!1),this.assetDockedObservable=(0,r.Y)(!1),this.activeToolNameObservable=(0,r.Y)(null),this.toolHistoryObservable=(0,a.C)([]),this.openModalObservable=(0,r.Y)(null),this.toolAccessObservable=(0,r.Y)(u.X$.SCENE),this.panelLayoutObservable=(0,r.Y)(ToolsData.defaultToolPanelLayout),this.toolCollapsedObservable=(0,r.Y)(!1),this.toolPalettes=new ObservableMapFilter(this.tools),this.toolPalettes.setFilter("enabled",(e=>e.enabled)),this.toolPalettes.setFilter("toolbar",(e=>e.toolbar)),this.toolPalettes.setFilter("palette",(e=>!!e.palette)),this.toolPalettes.sort(((e,t)=>e.order-t.order)),this.toolPalettes.priority=i.LOW}iterate(e){for(const t of this.tools)e(t)}get toolsMap(){return this.tools}getToolPalettes(){return this.toolPalettes.groupBy("palette")}hasTool(e){return this.toolsMap.has(e)}getTool(e){return this.tools.get(e)}addTool(...e){e.forEach((e=>this.tools.set(e.id,e))),this.onToolsAddedOrRemoved()}removeTool(...e){e.forEach((e=>this.tools.delete(e))),this.onToolsAddedOrRemoved()}removeAllTools(){this.tools.clear(),this.onToolsAddedOrRemoved()}get assetDocked(){return this.assetDockedObservable.value}setAssetDocked(e){this.assetDockedObservable.value=e}onAssetDockedChanged(e){return this.assetDockedObservable.onChanged(e)}getActiveTool(){return this.activeToolName?this.getTool(this.activeToolName):null}get activeToolName(){return this.activeToolNameObservable.value}get previousToolName(){const e=this.toolHistory;return e[e.length-1]||null}setActiveTool(e,t=0){const n=this.toolHistoryObservable.length,i=this.previousToolName,s=this.activeToolNameObservable.value;t>0?this.toolHistoryObservable.splice(-1*t,t):s===i&&n||this.toolHistoryObservable.push(s),this.activeToolNameObservable.value=e}getPreviousToolName(){const e=this.toolHistory;return e[e.length-1]||null}onToolChanged(e){return this.activeToolNameObservable.onChanged(e)}get openModal(){return this.openModalObservable.value}setOpenModal(e){this.openModalObservable.value=e}onOpenModalChanged(e){return this.openModalObservable.onChanged(e)}onToolsLoadedChanged(e){return this.toolsLoadedObservable.onChanged(e)}get toolsLoaded(){return this.toolsLoadedObservable.value}get toolAccess(){return this.toolAccessObservable.value}setToolAccess(e){this.toolAccessObservable.value=e}onToolAssetAccessChanged(e){return this.toolAccessObservable.onChanged(e)}isPanelOpen(){return this.toolPanelLayout===u.wS.SIDE_PANEL||this.toolPanelLayout===u.wS.BOTTOM_PANEL}isToolCollapsedToBottom(){return this.toolPanelLayout===u.wS.BOTTOM_PANEL&&this.toolCollapsed}setToolPanelLayout(e){this.panelLayoutObservable.value=e}get toolPanelLayout(){return this.panelLayoutObservable.value}onToolPanelLayoutChanged(e){return this.panelLayoutObservable.onChanged(e)}onToolCollapsedChanged(e){return this.toolCollapsedObservable.onChanged(e)}setToolCollapsed(e){this.toolCollapsedObservable.value=e}get toolCollapsed(){return this.toolCollapsedObservable.value}onToolsAddedOrRemoved(){this.toolsLoadedObservable.value=!this.toolsLoadedObservable.value}get toolHistory(){return this.toolHistoryObservable.values()}onToolHistoryChanged(e){return this.toolHistoryObservable.onChanged((()=>{e(this.toolHistoryObservable.values())}))}}ToolsData.defaultToolPanelLayout=(0,d.OR)()?u.wS.NORMAL:u.wS.NARROW},34612:(e,t,n)=>{"use strict";n.d(t,{Fg:()=>ToolToggleCollapseCommand,tT:()=>ToggleToolCommand,Ye:()=>CloseAndRemoveToolsCommand,MV:()=>RegisterToolsCommand,cR:()=>OpenPreviousToolCommand,z2:()=>OpenToolCommand,eS:()=>CloseCurrentToolCommand,CH:()=>CloseToolCommand});var i=n(93037);class ToolToggleCollapseCommand extends i.m{constructor(e){super(),this.payload={collapse:e}}}ToolToggleCollapseCommand.id="TOOL_PANEL_TOGGLE_COLLAPSE";class ToggleToolCommand extends i.m{constructor(e,t){super(),this.payload={toolName:e,active:t}}}ToggleToolCommand.id="TOGGLE_TOOL";class CloseAndRemoveToolsCommand extends i.m{constructor(e){super(),this.payload={checkForEdits:e}}}CloseAndRemoveToolsCommand.id="CLOSE_REMOVE_TOOLS";class RegisterToolsCommand extends i.m{constructor(e){super(),this.payload={tools:e}}}RegisterToolsCommand.id="REGISTER_TOOLS";class OpenPreviousToolCommand extends i.m{}OpenPreviousToolCommand.id="OPEN_PREVIOUS_TOOL";class OpenToolCommand extends i.m{constructor(e){super(),this.payload={toolName:e}}}OpenToolCommand.id="OPEN_TOOL";class CloseCurrentToolCommand extends i.m{}CloseCurrentToolCommand.id="CLOSE_CURRENT_TOOL";class CloseToolCommand extends i.m{constructor(e){super(),this.payload={toolName:e}}}CloseToolCommand.id="CLOSE_TOOL"},23676:(e,t,n)=>{"use strict";var i,s,r,o;n.d(t,{w1:()=>i,$r:()=>s,wS:()=>r,X$:()=>o}),function(e){e.START_LOCATION="START_LOCATION",e.SCANS_3D="SCANS_3D",e.VIEW_360="VIEW_360",e.PHOTOS="PHOTOS",e.LABELS="LABELS",e.LAYERS="LAYERS",e.MEASUREMENTS="MEASUREMENTS",e.MATTERTAGS="MATTERTAGS",e.HLR="HLR",e.SETTINGS_PANEL="SETTINGS_PANEL",e.NOTES="NOTES",e.TAGS="TAGS",e.BLUR="BLUR",e.SEARCH="SEARCH",e.MESH_TRIM="MESH_TRIM",e.SUMMARY="SUMMARY"}(i||(i={})),function(e){e[e.VIEW_BASED=1]="VIEW_BASED",e[e.MODEL_BASED=2]="MODEL_BASED",e[e.MISC=3]="MISC"}(s||(s={})),function(e){e.NORMAL="normal",e.NARROW="narrow",e.SIDE_PANEL="side-panel",e.BOTTOM_PANEL="bottom-panel"}(r||(r={})),function(e){e.SCENE="scene",e.TOOL="tool",e.LIST="list"}(o||(o={}))},68168:(e,t,n)=>{"use strict";n.d(t,{ro:()=>AssetDockedMessage,A:()=>AssetUndockedMessage,U7:()=>PanelCollapseMessage,Zi:()=>FullSizeEditorMessage,rh:()=>PanelTransitionEndMessage,ps:()=>ToggleViewingControlsMessage,bz:()=>SetAppBarVisibleMessage});var i=n(4117);class AssetDockedMessage extends i.v{}class AssetUndockedMessage extends i.v{}class PanelCollapseMessage extends i.v{constructor(e){super(),this.collapsed=e}}class FullSizeEditorMessage extends i.v{constructor(e){super(),this.fullSized=e}}class PanelTransitionEndMessage extends i.v{constructor(e,t){super(),this.active=e,this.collapsed=t}}class ToggleViewingControlsMessage extends i.v{constructor(e){super(),this.show=e}}class SetAppBarVisibleMessage extends i.v{constructor(e){super(),this.visible=e}}},61116:(e,t,n)=>{"use strict";n.d(t,{TH:()=>TourStartCommand,vy:()=>TourStopCommand,rU:()=>TourStepCommand,HW:()=>TourRelativeCommand,r2:()=>TourNextStepCommand,Ri:()=>TourPreviousStepCommand});var i=n(93037);class TourStartCommand extends i.m{constructor(e={}){super(),this.id="TOUR_START",this.payload=e}}class TourStopCommand extends i.m{constructor(e={}){super(),this.id="TOUR_STOP",this.payload=e}}class TourStepCommand extends i.m{constructor(e,t=!1){super(),this.id="TOUR_STEP",this.payload={index:e,instant:t}}}class TourRelativeCommand extends i.m{constructor(e,t=!1){super(),this.id="TOUR_RELATIVE",this.payload={forward:e,instant:t}}}class TourNextStepCommand extends i.m{constructor(){super(),this.id="TOUR_NEXT_STEP"}}class TourPreviousStepCommand extends i.m{constructor(){super(),this.id="TOUR_PREVIOUS_STEP"}}},4323:(e,t,n)=>{"use strict";n.d(t,{z:()=>TourTransitionError,Y:()=>TourStartError});var i=n(40603);class TourTransitionError extends i.y{constructor(e="Invalid tour transition"){super(e),this.name="TourTransition"}}class TourStartError extends i.y{constructor(e="Cannot start tour"){super(e),this.name="TourStart"}}},84347:(e,t,n)=>{"use strict";var i,s,r;n.d(t,{BZ:()=>i,kw:()=>s,Aq:()=>r,c5:()=>o}),function(e){e[e.Pan=0]="Pan",e[e.PanDollhouse=1]="PanDollhouse",e[e.Zoom=2]="Zoom",e[e.Delay=3]="Delay",e[e.None=4]="None"}(i||(i={})),function(e){e[e.Left=1]="Left",e[e.Auto=0]="Auto",e[e.Right=-1]="Right"}(s||(s={})),function(e){e[e.Move=0]="Move",e[e.Burns=1]="Burns",e[e.Zoom=2]="Zoom",e[e.Path=3]="Path",e[e.FloorChange=4]="FloorChange",e[e.Delay=5]="Delay",e[e.Nop=6]="Nop"}(r||(r={}));const o=[r.Burns,r.Zoom,r.Delay]},84586:(e,t,n)=>{"use strict";n.d(t,{oR:()=>TourStartedMessage,Vx:()=>TourSteppedMessage,dW:()=>TourStartTransitionMessage,_3:()=>TourStartBurnsTransitionMessage,NR:()=>TourStoppedMessage,Mt:()=>TourEndedMessage,sY:()=>TourStopAddedMessage});var i=n(4117);class TourStartedMessage extends i.v{}class TourSteppedMessage extends i.v{constructor(e){super(),this.index=e}}class TourStartTransitionMessage extends i.v{constructor(e){super(),this.index=e}}class TourStartBurnsTransitionMessage extends i.v{constructor(e,t,n){super(),this.index=e,this.transitionType=t,this.duration=n}}class TourStoppedMessage extends i.v{constructor(e){super(),this.willResume=e}}class TourEndedMessage extends i.v{}class TourStopAddedMessage extends i.v{}},77866:(e,t,n)=>{"use strict";n.d(t,{WQ:()=>r,EU:()=>o,OJ:()=>a,BY:()=>l,Im:()=>c,LO:()=>d,N5:()=>u,Qo:()=>h,Pv:()=>p,Mk:()=>m,mL:()=>g,eu:()=>f,NY:()=>v,gS:()=>b,O2:()=>y,rM:()=>S,z8:()=>E,f7:()=>T,Cp:()=>O,_D:()=>_,HJ:()=>A,BA:()=>w,pn:()=>N,z$:()=>P,b_:()=>I,mS:()=>k,GS:()=>C,su:()=>L,_c:()=>M,Xd:()=>D});var i=n(87100),s=n(98370);const r="TourSpeed &wts",o="ToursMetersPerSecond",a=.4,l=10,c=1.25,d=.8,u=6,h=3,p=1e3*d,m=1e3*c,g=600,f=400,v=1200,b=1200,y=35,S=15,E=120,T=1200,O=75,_=400,A=s.DEFAULT_TRANSITION_TIME-g,w=35,N=w/3500*1e3,P=2,I=52,k=0,C=2e3,L=.2*N,M=3500,D=Object.freeze({panAtSnapshot:1===(0,i.eY)("kb",1),snapshotPanZoomDuration:(0,i.eY)("st",3500),snapshotPanAngle:(0,i.eY)("sspa",w),walkingTourIncludeExtraPanosDistance:.4,walkingStageMinimumDistance:.8,maxWalkingSweepsBetweenSnapshots:40,autoStartDelay:(0,i.eY)("ts",-1)})},18196:(e,t,n)=>{"use strict";n.d(t,{HG:()=>o,JG:()=>a,mf:()=>l,DA:()=>c});var i=n(63387),s=n(994),r=n(77866);const o=e=>{let t=r.Im;if(!isNaN(e)){const n=Math.min(Math.max(r.OJ,e),r.BY);t=(0,i.et)(n,r.OJ,r.BY,r.LO,r.Qo)}return t},a=e=>(0,i.et)(e,r.LO,r.N5,r.OJ,r.BY),l=e=>Math.min(Math.max(r.LO,e),r.N5),c=e=>(0,s.Id)(e)/1e3},3819:(e,t,n)=>{"use strict";n.d(t,{T:()=>ToursViewData});var i=n(35424),s=n(67779),r=n(8259);class ToursViewData extends i.V{constructor(e,t,n){super(),this.data=e,this.currentTourMode=n,this.name="tours-view-data",this.reelOpen=!1,this.tourModeSettingObservable=(0,s.Y)(t)}getPhotosForTour(){return this.data.getPhotosForTour()}isTourEmpty(){return 0===this.data.getSnapshotCount()}onReelChanged(e){return this.data.getReel().onChanged(e)}getTourStoryMode(){return this.currentTourMode===r.zz.STORIES}get tourModeSetting(){return this.tourModeSettingObservable.value}setTourModeSetting(e){this.tourModeSettingObservable.value=e}onTourModeSettingChanged(e){return this.tourModeSettingObservable.onChanged(e)}}},77148:(e,t,n)=>{"use strict";n.d(t,{Te:()=>TourSetTourModeCommand,CI:()=>TourRenameCommand,Ty:()=>TourChangeTitleCommand,K1:()=>TourChangeDescriptionCommand,Av:()=>ToggleHighlightReelOpenCommand});var i=n(93037);class TourSetTourModeCommand extends i.m{constructor(e){super(),this.id="TOUR_SET_TOUR_MODE",this.payload={tourMode:e}}}class TourRenameCommand extends i.m{constructor(e,t){super(),this.id="TOUR_RENAME",this.payload={sid:e,name:t}}}class TourChangeTitleCommand extends i.m{constructor(e,t){super(),this.id="TOUR_CHANGE_TITLE",this.payload={sid:e,title:t}}}class TourChangeDescriptionCommand extends i.m{constructor(e,t){super(),this.id="TOUR_CHANGE_DESCRIPTION",this.payload={sid:e,description:t}}}class ToggleHighlightReelOpenCommand extends i.m{constructor(e){super(),this.payload={open:e}}}ToggleHighlightReelOpenCommand.id="HIGHLIGHT_REEL_TOGGLE_OPEN"},72699:(e,t,n)=>{"use strict";n.d(t,{b:()=>c,k:()=>TourData});var i=n(35424),s=n(84347),r=n(67779),o=n(29984),a=n(8259),l=n(64069);const c={active:!1,type:s.Aq.Move,promise:Promise.resolve(),stop:()=>Promise.resolve(),toIndex:-1,duration:0,started:-1,stopped:-1};class TourData extends i.V{constructor(e={},t,n,i,s,l){super(),this.snapshots=e,this.activeReel=t,this.allowedModes=n,this.modelSweeps=i,this.looping=s,this.log=l,this.name="tour",this.tourState=a.Vs.Inactive,this.transitionObservable=(0,r.Y)(c),this.tourCurrentSnapshot=-1,this.enabledTourStops=(0,o.C)([]),this.tourPlaying=!1,this.tourWillResume=!1,this.tourEnded=!1,this.updateEnabledStops=e=>{if(this.enabledTourStops.replace([]),this.activeReel&&this.activeReel.reel)for(const t of this.activeReel.reel)if(t&&t.sid in this.snapshots){const n=this.snapshots[t.sid],i=n.metadata.cameraMode,s=n.metadata.scanId,r=-1!==e.indexOf(i),o=this.modelSweeps.findIndex((e=>e.id===s)),a=void 0!==s&&-1!==o&&this.modelSweeps[o].enabled,l=!s;r&&(l||a)&&this.enabledTourStops.push(t.sid)}},this.updateEnabledStops(n),this.looping=s,this.commit()}setHighlightReel(e){this.atomic((()=>{this.activeReel.replace(e),this.updateEnabledStops(this.allowedModes),this.resetEmptyReel()}));const t=Object.keys(this.getReel()).length,n=this.getSnapshotCount();t!==n&&this.log.info(t-n+" items in snapshots, but not in reel")}addSnapshotToTour(e,t=a.VH.Current){this.snapshots[e.sid]=e;this.allowedModes.includes(e.metadata.cameraMode)&&this.enabledTourStops.push(e.sid);const n=this.tourCurrentSnapshotSid;switch(this.tourCurrentSnapshotSid=e.sid,t){case a.VH.Beginning:this.tourCurrentSnapshot=0,this.activeReel.reel.insert(0,{sid:e.sid});break;case a.VH.End:this.tourCurrentSnapshot=this.enabledTourStops.length-1,this.activeReel.reel.push({sid:e.sid});break;case a.VH.Current:if(void 0===n)this.tourCurrentSnapshot=this.enabledTourStops.length-1,this.activeReel.reel.push({sid:e.sid});else{let t=this.activeReel.reel.findIndex((e=>!!e&&e.sid===n))+1;(t<=0||t>this.activeReel.reel.length)&&(t=this.activeReel.reel.length-1),this.tourCurrentSnapshot=this.tourCurrentSnapshot+1,this.activeReel.reel.insert(t,{sid:e.sid})}break;default:throw new Error(`Tours.addSnapshotToTour not implemented: ${t}`)}this.useTransition(c),this.commit()}clearHighlightOverrides(e,t,n){if(!t&&!n)return;const i={};t&&(i.transitionType=void 0),n&&(i.panDirection=void 0,i.panAngle=void 0),this.applyHighlightOverrides(e,i)}clearAllHighlightOverrides(){this.getReel().reel.forEach((e=>{e&&this.clearHighlightOverrides(e.sid,!0,!0)}))}resetAllTransitionTypeOverrides(){if(this.activeReel&&this.activeReel.reel){let e=!1;this.activeReel.reel.forEach(((t,n)=>{t&&t.overrides&&t.overrides.transitionType&&(delete t.overrides.transitionType,this.activeReel.reel.update(n,t),e=!0)})),e&&this.activeReel.setDirty()}}resetAllPanSettingOverrides(){if(this.activeReel&&this.activeReel.reel){let e=!1;this.activeReel.reel.forEach(((t,n)=>{t&&t.overrides&&(void 0===t.overrides.panAngle&&void 0===t.overrides.panDirection||(delete t.overrides.panAngle,delete t.overrides.panDirection,e=!0,this.activeReel.reel.update(n,t)))})),e&&this.activeReel.setDirty()}}applyHighlightOverrides(e,t){const n=this.activeReel.reel.findIndex((t=>!!t&&t.sid===e));this.setHighlightOverrides(n,t)}setHighlightOverrides(e,t){const n=this.activeReel.reel.get(e);if(!n)throw Error(`Highlight not found for ${e}`);const i={sid:n.sid,title:n.title,description:n.description};n.overrides?(i.overrides=Object.assign({},n.overrides),t.hasOwnProperty("panDirection")&&(i.overrides.panDirection=t.panDirection),t.hasOwnProperty("transitionType")&&(i.overrides.transitionType=t.transitionType),t.hasOwnProperty("panAngle")&&(i.overrides.panAngle=t.panAngle)):i.overrides={transitionType:t.transitionType,panDirection:t.panDirection,panAngle:t.panAngle},this.activeReel.reel.update(e,i)}updateReelEntry(e){const{sid:t}=e,n=this.activeReel.reel.findIndex((e=>!!e&&e.sid===t));if(-1===n)throw Error(`Reel entry not found for ${t}`);const i=this.activeReel.reel.get(n);if(!e)throw Error(`Reel entry not found for ${n}`);const s=Object.assign({},i,e);this.activeReel.reel.update(n,s)}moveTourStop(e,t){const n=this.activeReel.reel.findIndex((t=>!!t&&t.sid===e)),i=this.activeReel.reel.findIndex((e=>!!e&&e.sid===t));this.activeReel.reel.move(n,i)}clear(){this.resetEmptyReel(),this.enabledTourStops.replace([]),this.activeReel.reel.length=0,this.commit()}removeTourStop(e){const t=this.enabledTourStops.indexOf(e),n=this.activeReel.reel.findIndex((t=>!!t&&t.sid===e)),i=this.getTourIndexBySid(e);if(-1!==t&&this.enabledTourStops.splice(t,1),this.enabledTourStops.length>0){const e=i<=this.tourCurrentSnapshot?this.tourCurrentSnapshot-1:this.tourCurrentSnapshot;this.setTourCurrentSnapshotByIndex(Math.max(e,0))}else this.resetEmptyReel();this.activeReel.reel.remove(n)}getReel(){return this.activeReel}isLooping(){return this.looping}setLooping(e){this.looping=e}getActiveReelTourMode(){return this.activeReel.mode||l.Z1.REEL}setActiveReelTourMode(e){this.activeReel.mode=e,this.activeReel.commit()}isTourActive(){return this.tourState!==a.Vs.Inactive}getCurrentTourState(){return{currentStep:this.getTourCurrentSnapshotIndex(),tourPlaying:this.tourPlaying||this.tourWillResume,totalSteps:this.getSnapshotCount(),tourEnded:this.tourEnded,activeStep:this.transition&&-1!==this.transition.toIndex?this.transition.toIndex:this.getTourCurrentSnapshotIndex(),highlights:this.getReelHighlights(),transition:this.transition}}get transition(){return this.transitionObservable.value}isTourTransitionActive(){return this.transition.active}getTourTransitionType(){return this.transition.type}useTransition(e){this.transitionObservable.value=e}async stopTourTransition(){await this.transition.stop()}iterateSnapshots(e){let t=0;this.activeReel.reel.forEach((n=>{if(n&&this.isEnabled(n.sid)){const i=this.snapshots[n.sid];e(i,t++)}}))}isSnapshotInTour(e){return-1!==this.activeReel.reel.findIndex((t=>!!t&&t.sid===e))}getEnabledSnapshots(){const e=[];return this.iterateSnapshots(((t,n)=>{e.push(t)})),e}updateSnapshots(e){this.snapshots=e}async getPhotosForTour(){const e=[];for(const t in this.snapshots){const n=this.snapshots[t];"tour"!==n.category&&"panorama"!==n.category&&e.push({name:n.name,sid:n.sid,thumbnailUrl:await n.thumbnailUrl.get(),inReel:-1!==this.activeReel.reel.findIndex((e=>!!e&&e.sid===t)),created:n.created})}return e.sort(((e,t)=>t.created.getTime()-e.created.getTime())),e}getSnapshot(e){return this.snapshots[e]}getTourStop(e){const t=this.activeReel.reel.findIndex((t=>!!t&&t.sid===e)),n=this.activeReel.reel.get(t);return{snapshot:this.getSnapshot(e),reelEntry:n}}getReelHighlights(){const e=[];return this.activeReel.reel.forEach((t=>{if(t&&this.isEnabled(t.sid)){const n=this.snapshots[t.sid],i=t.overrides&&t.overrides.panDirection,s=t.overrides&&t.overrides.panAngle;e.push({id:n.sid,snapshot:n,panDirection:i,panAngle:s,transitionType:t.overrides&&t.overrides.transitionType,title:t.title,description:t.description})}})),e}getSnapshotCount(){return this.enabledTourStops.length}getTourState(){return this.tourState}setTourState(e){this.tourState=e,this.commit()}getTourCurrentSnapshotIndex(){return this.tourCurrentSnapshot}getTourCurrentSnapshotSid(){return this.tourCurrentSnapshotSid}getTourSnapshotSid(e){let t=0;for(const n of this.activeReel.reel)if(n&&this.isEnabled(n.sid)){if(t===e)return n.sid;t++}throw new Error("getTourSnapshotSid() -> Invalid snapshot index.")}getTourSnapshotsWithSweepId(e){const t=[];for(const n of this.activeReel.reel)n&&n.sid in this.snapshots&&this.snapshots[n.sid].metadata.scanId===e&&t.push(n.sid);return t}setTourCurrentSnapshotByIndex(e){if(e<0||e>this.getSnapshotCount())throw new Error("setTourCurrentSnapshotByIndex() -> Invalid tour index.");let t=-1;for(const n of this.activeReel.reel)if(n&&this.isEnabled(n.sid)&&(t++,t===e)){this.tourCurrentSnapshot=e,this.tourCurrentSnapshotSid=n.sid;break}-1===t&&this.resetEmptyReel(),this.commit()}getTourIndexBySid(e){let t=-1;for(const n of this.activeReel.reel)if(n&&this.isEnabled(n.sid)&&(t++,n.sid===e))return t;return-1}isEnabled(e){return-1!==this.enabledTourStops.indexOf(e)}resetEmptyReel(){this.tourCurrentSnapshot=-1,this.tourCurrentSnapshotSid=void 0,this.useTransition(c),this.commit()}}},8259:(e,t,n)=>{"use strict";var i,s,r;n.d(t,{zz:()=>i,Vs:()=>s,VH:()=>r}),function(e){e.NONE="none",e.STORIES="stories",e.LEGACY="legacy"}(i||(i={})),function(e){e[e.Inactive=0]="Inactive",e[e.Active=1]="Active",e[e.StopScheduled=2]="StopScheduled"}(s||(s={})),function(e){e[e.Beginning=0]="Beginning",e[e.Current=1]="Current",e[e.End=2]="End"}(r||(r={}))},49598:(e,t,n)=>{"use strict";n.d(t,{lj:()=>i,R3:()=>s,Yi:()=>r,o9:()=>o,Wf:()=>a,qe:()=>l,rU:()=>c,Nu:()=>d,iL:()=>u,PR:()=>h,pQ:()=>p,l4:()=>m,yY:()=>g,C7:()=>f});const i="tour-stories",s="spaces.tours_v2",r="tours2",o="gt",a=0,l=1,c="hr",d=0,u=1,h="tour",p=0,m=1,g=2,f=3},36669:(e,t,n)=>{"use strict";n.d(t,{ug:()=>a,aW:()=>l,Cf:()=>c,w7:()=>d});var i=n(64069),s=n(8428),r=n(8259),o=n(49598);function a(e){const t=e.tryGetProperty(s.gx.HighlightReel,!0),n=e.tryGetProperty(o.rU,o.iL),i=e.tryGetProperty(o.PR,o.l4);return t&&n!==o.Nu&&i!==o.pQ}function l(e,t){const n=function(e){const t=e.tryGetProperty(s.gx.TourButtons,!0),n=e.tryGetProperty(o.o9,o.qe),i=e.tryGetProperty(o.PR,o.l4);return t&&n!==o.Wf&&i!==o.pQ}(e),i=a(e);return n||i?c(e,t)?r.zz.STORIES:r.zz.LEGACY:r.zz.NONE}function c(e,t){const n=e.tryGetProperty(o.PR,o.l4);return n===o.yY||n!==o.C7&&t===i.Z1.STORY}function d(e,t){const n=e.tryGetProperty(s.gx.TourButtons,!0),o=e.tryGetProperty(s.gx.HighlightReel,!0);return n||o?t===i.Z1.STORY?r.zz.STORIES:r.zz.LEGACY:r.zz.NONE}},87066:(e,t,n)=>{"use strict";n.d(t,{n:()=>PolicyData});var i=n(35424);class PolicyData extends i.V{constructor(e=[]){super(),this.policies=e,this.name="policy-data"}hasPolicy(e){return!!this.getPolicy(e)}getPolicy(e){return this.policies.find((t=>t.name===e))||null}}},59114:(e,t,n)=>{"use strict";n.d(t,{m:()=>UserData});var i=n(35424),s=n(66910),r=n(64069),o=n(92310),a=n(10969),l=n(48342);class UserData extends i.V{constructor(e,t,n){super(),this.orgAdmin=n,this.name="users-data",this.users=(0,s.q)();const i=e.modelAccess||r.x6.PUBLIC;this.currentUser=new o.a(Object.assign(Object.assign({},e),{modelAccess:i,userStatus:t?a.J.KNOWN:a.J.UNKNOWN})),this.addUser(this.currentUser)}loadSearchResults(e,t,n){this.atomic((()=>{e.forEach((e=>{this.loadUser(Object.assign(Object.assign({},e),{userStatus:a.J.KNOWN}))})),t.forEach((e=>{this.users.get(e)||this.loadUser({email:e,id:"",userStatus:n,modelAccess:r.x6.PUBLIC,firstName:null,lastName:null})}))}))}loadKnownUsers(e){this.atomic((()=>{e.forEach((e=>{this.loadKnownUser(e)}))}))}loadKnownUser(e){return this.loadUser(Object.assign(Object.assign({},e),{userStatus:a.J.KNOWN}))}loadContributor(e){const t=this.users.get(e.email);return t||this.loadUser(Object.assign(Object.assign({},e),{userStatus:a.J.CONTRIBUTOR}))}loadFailedUser(e){return this.loadUser(Object.assign(Object.assign({},e),{userStatus:a.J.FAILED}))}loadUser(e){let t=this.users.get(e.email);return e.email===this.currentUser.email||t&&t.userStatus===a.J.KNOWN&&t.modelAccess!==r.x6.PUBLIC||(t=new o.a(e),t?this.users.set(e.email,t):this.addUser(t)),t}getUserInfoByEmail(e){return this.users.has(e)?this.users.get(e):null}getUserInfoById(e){return""===e?null:this.users.values.find((t=>t.id===e))||null}getUserDisplay(e){return this.users.has(e)?this.users.get(e):(0,l.Q)(e)}iterate(e){for(const t of this.users)e(t)}getUsersWhoMayNeedAccess(){const e={};return this.users.values.forEach((t=>{t.userStatus===a.J.KNOWN&&t.modelAccess!==r.x6.PUBLIC||(e[t.email]=t)})),e}getKnownUsers(){return this.users.values.filter((e=>e.userStatus===a.J.KNOWN))}addUser(e){this.users.has(e.email)||this.users.set(e.email,e)}getCurrentUser(){return this.currentUser}isLoggedIn(){return!!this.currentUser.id}isOrgAdmin(){return this.orgAdmin}isInviter(){return this.orgAdmin}isEditor(){return this.currentUser.modelAccess===r.x6.FULL}isCommenter(){const{modelAccess:e}=this.currentUser;return e===r.x6.VIEWER||e===r.x6.FULL}getCurrentUserId(){return this.currentUser.id}onUsersChanged(e){return this.users.onChanged(e)}}},92310:(e,t,n)=>{"use strict";n.d(t,{a:()=>UserInfo});var i=n(64069),s=n(10969),r=n(48342);class UserInfo{constructor(e){this.email="",this.id="",this.firstName="",this.lastName="",this.modelAccess=i.x6.PUBLIC,this.userStatus=s.J.UNKNOWN,this.name="",this.initials="",this.color="",e&&Object.assign(this,e);const t=this.id?this.getFullName(this.firstName,this.lastName):"";this.name=t||this.email||"",this.initials=this.getInitials(this.name),this.color=(0,r._)(this.id)}getFullName(e,t){return e&&t?`${e} ${t}`:e||t}getInitials(e){const t=e?e.split(" ").map((e=>e[0])).join(""):"?";return t.length<3?t:`${t[0]}${t[t.length-1]}`}}},76223:(e,t,n)=>{"use strict";n.d(t,{V1:()=>UserMentionSearchCommand,Vu:()=>ResolveUserMentionsCommand,JB:()=>InviteUsersCommand});var i=n(93037);class UserMentionSearchCommand extends i.m{constructor(e){super(),this.payload={search:e}}}class ResolveUserMentionsCommand extends i.m{constructor(e){super(),this.payload={userMentions:e}}}class InviteUsersCommand extends i.m{constructor(e,t,n,i){super(),this.payload={emails:e,message:t,modelAccess:n,noteId:i}}}},10969:(e,t,n)=>{"use strict";var i;n.d(t,{J:()=>i}),function(e){e.UNKNOWN="unknown",e.FAILED="failed",e.MENTIONED="mentioned",e.CONTRIBUTOR="contributor",e.KNOWN="known"}(i||(i={}))},74678:(e,t,n)=>{"use strict";n.r(t),n.d(t,{InviteUsersCommand:()=>p.JB,OrgUser:()=>OrgUser,PolicyData:()=>m.n,ResolveUserMentionsCommand:()=>p.Vu,UserData:()=>h.m,UserInfo:()=>v.a,UserMentionSearchCommand:()=>p.V1,UserStatus:()=>u.J,default:()=>b,defaultUserColor:()=>f._,getUnknownUserInfo:()=>f.Q});var i=n(57227),s=n(5477),r=n(66225),o=n(38636),a=n(64069);class OrgUser{constructor(e){this.id="",this.email="",this.firstName="",this.lastName="",this.modelAccess=a.x6.PUBLIC,Object.assign(this,e)}}const l=new s.Z("mds-user-deserializer");class MdsUserDeserializer{constructor(){this.validate=e=>{if(!e)return!1;const t=["id","email"].filter((t=>!(t in e))),n=0===t.length;return n||l.debug("OrgUserMetadata invalid:",{missingFields:t}),n}}deserialize(e){return e&&this.validate(e)?new OrgUser(e):(l.debug("Deserialized invalid OrgUserMetadata from MDS",e),null)}}var c=n(26965);const d=new s.Z("users-store");class MdsUserStore extends r.u{constructor(e){super(e),this.deserializer=new MdsUserDeserializer}async fetchAccessForUser(e,t){return this.query(c.GetCurrentUserModelAccess,{modelId:t,userId:e}).then((t=>{const n=(0,o.q)(t,"data.model.users.results");let i;return n&&Array.isArray(n)&&1===n.length?i=n[0].modelAccess:(d.debug(`fetchModelAccess failed for ${e}`),i=a.x6.PUBLIC),{modelAccess:i,organization:(0,o.q)(t,"data.model.organization")}}))}async fetchModelPolicies(){const e=this.getViewId();return this.query(c.GetModelPolicies,{modelId:e}).then((e=>{var t,n;return((null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.model)||void 0===n?void 0:n.policies)||[]).filter((e=>{switch(e.__typename){case"PolicyFlag":return e.enabled;case"PolicyValue":return null!==e.value;case"PolicyOptions":return e.options&&e.options.length>0;case"PolicyFeature":return e.availability===a.km.UNLOCKED;default:return!1}})).map((e=>({name:e.name,value:e.value,options:e.options})))}))}async search(e,t,n){const i=this.getViewId();return this.query(c.GetUsers,{modelId:i,search:e,ids:n,emails:t}).then((e=>{const t=(0,o.q)(e,"data.model.users.results");if(!t||!Array.isArray(t))return[];const n=[];for(const e of t){const t=this.deserializer.deserialize(e);t&&n.push(t)}return n}))}}var u=n(10969),h=n(59114),p=n(76223),m=n(87066),g=n(67233);class Users extends i.Y{constructor(){super(...arguments),this.name="users-module",this.onUserMentionSearch=async e=>{const t=await this.store.search(e.search);this.userData.loadKnownUsers(t)},this.resolveUserMentions=async e=>{if(0===e.userMentions.length)return void this.log.debug("No user mentions to resolve");const t=[];if(e.userMentions.forEach((e=>{this.userData.getUserInfoByEmail(e.email)&&e.userStatus!==u.J.MENTIONED||t.push(e)})),t.length>0){const e=t.map((e=>e.email));return this.searchUsers(new Set(e),u.J.MENTIONED)}},this.inviteUsers=async e=>{const{emails:t,modelAccess:n,message:i,noteId:s}=e;if(0===t.length)return;const{baseUrl:r,viewId:o,queue:a}=this.config,l=`${r}/api/v2/shares/`,c={object_type:"model",object_id:o,role:n,inviter_message:i,note:s},d=new Set;return await Promise.all(e.emails.map((e=>a.post(l,{responseType:"json",body:Object.assign(Object.assign({},c),{email:e})}).then((e=>{const t=e.user;this.userData.loadKnownUser({id:t.sid,email:t.email,firstName:t.first_name,lastName:t.last_name,modelAccess:e.role})})).catch((()=>{this.log.debug(`User Invite failed: ${e}`),d.add(e)}))))),d.size>0?this.searchUsers(d,u.J.FAILED):void 0}}async init(e,t){this.config=e,this.store=new MdsUserStore({readonly:!0,baseUrl:e.baseUrl,viewId:e.viewId});const n=await this.store.fetchModelPolicies();this.policyData=new m.n(n),t.market.register(this,m.n,this.policyData),t.market.waitForData(g.R).then((async n=>{const i=e.api.user;let s=a.x6.PUBLIC,r=!1;if(i.loggedIn&&i.id){const e=await this.store.fetchAccessForUser(i.id,n.getBaseModelId());s=e.modelAccess,e.organization&&(r=i.isOrganizationAdmin(e.organization))}this.userData=new h.m({id:i.id,firstName:i.firstName,lastName:i.lastName,email:i.email,modelAccess:s},i.loggedIn,r),this.bindings.push(t.commandBinder.addBinding(p.V1,this.onUserMentionSearch),t.commandBinder.addBinding(p.Vu,this.resolveUserMentions),t.commandBinder.addBinding(p.JB,this.inviteUsers)),t.market.register(this,h.m,this.userData)}))}async searchUsers(e,t){const n=Array.from(e),i=await this.store.search(void 0,n);this.userData.loadSearchResults(i,n,t)}}var f=n(48342),v=n(92310);const b=Users},48342:(e,t,n)=>{"use strict";n.d(t,{_:()=>a,Q:()=>l});var i=n(89142),s=n(10969),r=n(64069);const o=["#d44441","#f44336","#e91e63","#f78da7","#9c4b92","#673ab7","#5c7fff","#03a9f4","#417505","#00bcd4","#51a868","#37d67a","#cddc39","#fbcd00","#ffac17","#ff6900","#abb8c3","#607d8b"];function a(e){const t=o.length;return o[(0,i.Wm)(e||"",t)]}function l(e){return{email:e,id:"",firstName:"",lastName:"",name:"Unknown",initials:"?",color:a(e),userStatus:s.J.UNKNOWN,modelAccess:r.x6.PUBLIC}}},12622:(e,t,n)=>{"use strict";n.d(t,{BD:()=>i,g:()=>a,KP:()=>l,ty:()=>c,_i:()=>ChangeViewmodeCommand});var i,s=n(93037),r=n(22878),o=n(14832);!function(e){e.INSIDE="mode.inside",e.OUTSIDE="mode.outside",e.DOLLHOUSE="mode.dollhouse",e.FLOORPLAN="mode.floorplan",e.TRANSITIONING="mode.transitioning",e.ORTHOGRAPHIC="mode.orthographic",e.MESH="mode.mesh"}(i||(i={}));const a=i.INSIDE,l=(i.INSIDE,r.Ey.Panorama,i.DOLLHOUSE,r.Ey.Dollhouse,i.FLOORPLAN,r.Ey.Floorplan,i.TRANSITIONING,r.Ey.Transition,i.OUTSIDE,r.Ey.Outdoor,i.ORTHOGRAPHIC,r.Ey.Orthographic,i.MESH,r.Ey.Mesh,{[r.Ey.Panorama]:i.INSIDE,[r.Ey.Dollhouse]:i.DOLLHOUSE,[r.Ey.Floorplan]:i.FLOORPLAN,[r.Ey.Transition]:i.TRANSITIONING,[r.Ey.Outdoor]:i.OUTSIDE,[r.Ey.Orthographic]:i.ORTHOGRAPHIC,[r.Ey.Mesh]:i.MESH}),c=e=>{const t=l[e];return void 0!==t?t:i.OUTSIDE};class ChangeViewmodeCommand extends s.m{constructor(e,t=o.n.Interpolate,n={}){super(),this.payload={mode:e,transitionType:t,pose:n}}}ChangeViewmodeCommand.id="CHANGE_VIEWMODE"},39468:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});const i="features/dollhouse-nudge"},13088:(e,t,n)=>{"use strict";n.d(t,{M:()=>LockViewmodeCommand,I:()=>UnlockViewmodeCommand});var i=n(93037);class LockViewmodeCommand extends i.m{constructor(){super()}}LockViewmodeCommand.id="LOCK_VIEWMODE";class UnlockViewmodeCommand extends i.m{constructor(){super()}}UnlockViewmodeCommand.id="UNLOCK_VIEWMODE"},92214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>BeginSwitchViewmodeMessage});var i=n(46978);class BeginSwitchViewmodeMessage extends i.a{}},50084:(e,t,n)=>{"use strict";n.d(t,{Z:()=>EndSwitchViewmodeMessage});var i=n(46978);class EndSwitchViewmodeMessage extends i.a{}},46978:(e,t,n)=>{"use strict";n.d(t,{a:()=>SwitchViewmodeMessage});var i=n(4117);class SwitchViewmodeMessage extends i.v{constructor(e,t){super(),this.fromMode=t,this.toMode=e,this.timestamp=Date.now()}}},22878:(e,t,n)=>{"use strict";var i;n.d(t,{Ey:()=>i,Ae:()=>s,Bw:()=>r,vl:()=>o}),function(e){e[e.Panorama=1]="Panorama",e[e.Dollhouse=2]="Dollhouse",e[e.Floorplan=3]="Floorplan",e[e.Outdoor=4]="Outdoor",e[e.Orthographic=5]="Orthographic",e[e.Mesh=6]="Mesh",e[e.Transition=-1]="Transition"}(i||(i={}));const s=e=>{switch(e){case i.Panorama:return"Panorama";case i.Floorplan:return"Floorplan";case i.Dollhouse:return"Dollhouse";case i.Transition:return"Transition";case i.Orthographic:return"Orthographic";case i.Mesh:return"Mesh"}return"Unknown"};function r(e){return e===i.Panorama||e===i.Mesh}function o(e){return e===i.Panorama}},37363:(e,t,n)=>{"use strict";n.d(t,{O:()=>ViewmodeData});var i=n(35424),s=n(22878),r=n(67779);class ViewmodeData extends i.V{constructor(){super(),this.name="viewmode",this.viewmodeChangeEnabled=!0,this.currentModeObservable=(0,r.Y)(null),this.transition={active:!1,progress:0,from:null,to:null,startTime:0,transitionTime:0},this.isPano=this.isPano.bind(this),this.isFloorplan=this.isFloorplan.bind(this),this.isInside=this.isInside.bind(this),this.isDollhouse=this.isDollhouse.bind(this),this.isOrthographic=this.isOrthographic.bind(this)}get currentMode(){return this.currentModeObservable.value}set currentMode(e){e!==this.currentModeObservable.value&&(this.currentModeObservable.value=e)}get closestMode(){return this.currentMode===s.Ey.Transition?this.transition.progress<.5?this.transition.from:this.transition.to:this.currentMode}makeModeChangeSubscription(e){return this.currentModeObservable.onChanged(e)}activateTransition(e,t,n){this.transition.active=!0,this.transition.progress=0,this.transition.startTime=Date.now(),this.transition.transitionTime=n,this.transition.to=t,this.transition.from=e}deactivateTransition(){this.transition.active=!1}isPano(){return this.currentMode===s.Ey.Panorama}isInside(){return(0,s.Bw)(this.currentMode)}isMesh(){return this.currentMode===s.Ey.Mesh}isFloorplan(){return this.currentMode===s.Ey.Floorplan}isDollhouse(){return this.currentMode===s.Ey.Dollhouse}isOrthographic(){return this.currentMode===s.Ey.Orthographic}canStartTransition(){const e=this.transition.active,t=this.currentMode===s.Ey.Transition;return!e&&!t}transitionActive(){return!this.canStartTransition()}isAlreadyInMode(e){const t=this.transition.from===this.transition.to,n=this.currentMode===e;return this.transition.active&&t||n}canSwitchViewMode(e){return this.canStartTransition()&&this.viewmodeChangeEnabled&&!this.isAlreadyInMode(e)}}},98370:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_TRANSITION_TIME:()=>A,default:()=>ViewmodeModule});var i=n(14877),s=n(22878),r=n(14832),o=n(84428),a=n(77280),l=n(41674),c=n(57227),d=n(37363),u=n(15099),h=n(53549),p=n(50084),m=n(92214),g=n(46978),f=n(40603);class ViewmodeActiveTransitionError extends f.y{constructor(e="Tried to start view-mode transition while another transition was active"){super(e),this.name="ViewmodeActiveTransition"}}class ViewmodeChangeLockedError extends f.y{constructor(e="Cannot change viewmode when locked"){super(e),this.name="ViewmodeChangeLockedError"}}var v=n(26517);var b=n(82722),y=n(95703),S=n(65270);const E={rotationDuration:1,rotationDelay:0,matrixDelay:0,matrixDuration:.5},T={[s.Ey.Dollhouse]:{matrixDelay:.5,matrixDuration:1},[s.Ey.Panorama]:{rotationDuration:.5}};var O=n(39808),_=n(13088);const A=1e3,w=Math.PI/2+Number.EPSILON,N=Math.PI-Number.EPSILON,P={[s.Ey.Panorama]:A,[s.Ey.Dollhouse]:A,[s.Ey.Floorplan]:A,[s.Ey.Orthographic]:A};class ViewmodeModule extends c.Y{constructor(){super(...arguments),this.viewmodeData=new d.O,this.name="viewmode",this.minDollhouseDistance=15,this.maxDollhouseDistance=50,this._orthoMatrix=new y.M,this.getFlyinStartPose=(e,t)=>{const n=t||this.cameraData.pose.position,i=e.position.y-n.y,s=(0,v.Ll)(e.position,n,this.meshData.meshCenter),r=a.f.FORWARD.clone().applyQuaternion(s);return{position:(0,v.D7)(e.position,n,Math.sign(r.y)*Math.PI/4,!0).setY(1.5*i)}},this.getFlyinEndPose=e=>{const t=e.position||this.sweepData.getSweep(e.sweepID).position,n=e.rotation||new o.Quaternion,i=Math.PI/180*l.oR.fov;return(0,v.YN)(t,n,-Math.PI/6,this.meshData.meshBounds,i,this.canvas.aspectRatio)}}async init(e,t){var n;this.engine=t,this.market=t.market,this.viewmodeData.currentMode=null!==(n=e.startingMode)&&void 0!==n?n:s.Ey.Dollhouse,this.market.register(this,d.O,this.viewmodeData),t.market.waitForData(O._).then((e=>{this.meshData=e,this.setDollhouseBounds()})),this.bindings.push(t.commandBinder.addBinding(_.M,this.lockViewmode.bind(this)),t.commandBinder.addBinding(_.I,this.unlockViewmode.bind(this)));const[r,o,a,l,c]=await Promise.all([t.getModuleBySymbol(i.y.CAMERA),t.getModuleBySymbol(i.y.SWEEP_DATA),t.market.waitForData(h.Z),t.market.waitForData(b.W),t.market.waitForData(u.M_)]);this.cameraModule=r,this.sweepModule=o,this.sweepData=a,this.canvas=l,this.cameraData=c}lockViewmode(){this.viewmodeData.viewmodeChangeEnabled=!1,this.viewmodeData.commit()}unlockViewmode(){this.viewmodeData.viewmodeChangeEnabled=!0,this.viewmodeData.commit()}get currentMode(){return this.viewmodeData.currentMode}async switchToMode(e,t=r.n.FadeToBlack,n,o){if(this.log.info(`switchToMode mode:${e} type:${t}`),this.meshData||e!==s.Ey.Floorplan&&e!==s.Ey.Dollhouse||await this.engine.getModuleBySymbol(i.y.MODEL_MESH),t===r.n.Instant&&(o=0),o=void 0!==o?o:P[e],!this.viewmodeData.canStartTransition()||!this.cameraData.canTransition())throw new ViewmodeActiveTransitionError;if(e!==this.currentMode&&!this.viewmodeData.viewmodeChangeEnabled)throw new ViewmodeChangeLockedError;const a=this.isAlreadyInMode(this.viewmodeData,e),l=n&&!ViewmodeModule.willPoseChange(this.cameraData,n);if(a&&l)return Promise.resolve();this.sweepData.currentSweep&&this.sweepData.isSweepUnaligned(this.sweepData.currentSweep)&&!(0,s.Bw)(e)&&(t=r.n.FadeToBlack);const c=null!==this.viewmodeData.currentMode?this.viewmodeData.currentMode:void 0;this.viewmodeData.activateTransition(this.viewmodeData.currentMode,e,o),this.viewmodeData.currentMode=s.Ey.Transition,this.viewmodeData.commit(),this.engine.broadcast(new m.Z(e,c));const d=this.moveCameraToViewmode(e,c,t,o,n);let u=!1;return d.progress((t=>{this.viewmodeData.transition.progress=t,this.viewmodeData.commit(),t>=.5&&!u&&(u=!0,this.engine.broadcast(new g.a(e,c)))})),d.then((()=>{this.viewmodeData.transition.progress=1,this.viewmodeData.currentMode=e,this.viewmodeData.deactivateTransition(),this.viewmodeData.commit(),this.engine.broadcast(new p.Z(e,c))})),d.nativePromise()}isAlreadyInMode(e,t){const n=e.transition.from===e.transition.to,i=e.currentMode===t;return e.transition.active&&n||i}static willPoseChange(e,t){return void 0!==t.position&&!e.pose.position.equals(t.position)||void 0!==t.rotation&&!e.pose.rotation.equals(t.rotation)||void 0!==t.zoom&&e.zoom()!==t.zoom}moveCameraToViewmode(e,t,n,i,r){switch(e){case s.Ey.Mesh:case s.Ey.Panorama:return this.moveCameraToPanorama(n,i,r);case s.Ey.Dollhouse:return this.moveCameraToDollhouse(t,n,i,r);case s.Ey.Floorplan:return this.moveCameraToFloorplan(t,n,i,r);case s.Ey.Orthographic:return this.moveCameraToOrthographic(t,n,i,r);default:throw Error(`moveCameraToViewmode(): Invalid view-mode to go to: ${e}`)}}moveCameraToPanorama(e,t,n){if(this.sweepData.canTransition()||this.cameraData.canTransition()){let i;if(n&&n.sweepID)i=n.sweepID;else{const e=this.sweepData.getFirstSweep();i=this.sweepData.currentSweep,!i&&e&&(i=e.id)}if(!i)throw new Error("moveCameraToPanorama(): Invalid target sweep!");this.sweepData.isSweepUnaligned(i)&&(e=r.n.FadeToBlack);let l=n&&n.rotation?n.rotation:void 0;if(!l){const e=(this.viewmodeData.transition.from===s.Ey.Floorplan?a.f.UP:a.f.FORWARD).clone().applyQuaternion(this.cameraData.pose.rotation).setY(0).normalize();l=(new o.Quaternion).setFromUnitVectors(a.f.FORWARD,e)}return this.sweepModule.moveToSweep({transitionType:e,sweepId:i,rotation:l,transitionTime:t,rotationDelay:.5})}throw new Error("Could not move to panorama mode because another transition was active")}moveCameraToDollhouse(e,t,n,i){const r=this.meshData.meshBounds,c={};let d;if(i&&(i.position||i.rotation)){if(i.position&&i.rotation){c.position=i.position,c.rotation=i.rotation;const e=new o.Plane(a.f.UP.clone(),this.meshData.meshCenter.y);let t=(0,v.Fe)(c.position,c.rotation,e);t||(t=new o.Vector3,t.copy(this.meshData.meshCenter)),r.containsPoint(t)&&(d=c.position.distanceTo(t))}else if(i.position)c.position=i.position,c.rotation=(0,v.n0)(i.position,this.meshData.meshCenter);else{c.rotation=i.rotation;const e=r.min.distanceTo(r.max);c.position=(0,v.fd)(c.rotation,this.meshData.meshCenter,e)}d||(d=this.meshData.meshCenter.clone().distanceTo(c.position))}else{let e,t;const n=this.sweepData.isSweepUnaligned(this.sweepData.currentSweep),i=n||this.viewmodeData.transition.from===s.Ey.Floorplan?this.meshData.meshCenter:this.cameraData.pose.position;if(n)t=new o.Vector3(0,0,0),e=new o.Vector3(15,10,15);else if(this.viewmodeData.transition.from!==s.Ey.Floorplan){const n=1.5,s=(0,v.YN)(this.cameraData.pose.position,this.cameraData.pose.rotation,-Math.PI/6,r,this.cameraData.fovY()*n,this.cameraData.pose.aspect()),l=((e,t)=>{const n=e.clone().add(new o.Vector3(0,6,0)),i=a.f.FORWARD.clone().applyQuaternion(t);return i.y>=.01&&(i.y=.01),{position:n.clone().add(i.clone().multiplyScalar(-10)),direction:i}})(i,this.cameraData.pose.rotation);[e,t]=[s.position,l.direction]}else{const n=((e,t)=>{const n=e.clone(),i=a.f.DOWN.clone().applyQuaternion(t).multiplyScalar(6),s=n.clone().add(i).setY(6),r=a.f.UP.clone().applyQuaternion(t);return r.setY(-.5).normalize(),{position:s,direction:r}})(i,this.cameraData.pose.rotation);[e,t]=[n.position,n.direction]}const l=i.clone().add(t).setY(this.meshData.meshCenter.y);c.position=(0,v.r0)(e,l,this.minDollhouseDistance,this.maxDollhouseDistance),c.position=(0,v.m$)(c.position,l,w,N),c.rotation=(0,v.n0)(c.position,l),d=l.distanceTo(c.position)}return this.cameraModule.moveTo({transitionType:t,pose:c,transitionTime:n,projection:(0,l.AN)(this.cameraData.aspect()),focalDistance:d,rotationDuration:.5})}setDollhouseBounds(){const e=this.meshData.extendedBounds,t=e.min.distanceTo(e.max);this.minDollhouseDistance=Math.min(t/2,this.minDollhouseDistance),this.maxDollhouseDistance=Math.max(t,this.maxDollhouseDistance)}moveCameraToFloorplan(e,t,n,i){const s={},r=this.meshData.meshCenter,c=this.meshData.meshSize,d=Math.max(c.x,c.z),u=this.canvas.aspectRatio,h=this.getDefaultFloorplanZoom(this.meshData.meshSize),p=i&&i.zoom?this.canvas.height/(2*i.zoom):h,m=(0,l.aH)(this.canvas.width,this.canvas.height,p),g=this.getDefaultFloorplanZoom(this.meshData.extendedSize),f=(0,l.aH)(this.canvas.width,this.canvas.height,g);if(this.cameraModule.setBaseProjection(f),i&&i.position)s.position=i.position;else{const e=a.f.UP.clone().multiplyScalar(d);s.position=r.clone().add(e)}if(i&&i.rotation)s.rotation=i.rotation;else{const e=(new y.M).setPosition(s.position);e.lookAt(s.position,r,a.f.FORWARD),s.rotation=(new o.Quaternion).setFromRotationMatrix(e.asThreeMatrix4());if(u<1!==c.x/c.z<1){const e=(new o.Quaternion).setFromUnitVectors(a.f.UP,a.f.LEFT);s.rotation.multiply(e)}}const v=s.position.y-this.meshData.meshCenter.y;let b=Object.assign(Object.assign({},E),{easing:S.hl,transitionType:t,pose:s,transitionTime:n,projection:m,focalDistance:v});return e&&e in T&&(b=Object.assign(Object.assign({},T[e]),b)),this.cameraModule.moveTo(b)}moveCameraToOrthographic(e,t,n,i){const s=i&&i.zoom?i.zoom:this.getDefaultFloorplanZoom(this.meshData.extendedSize),r=(0,l.aH)(this.canvas.width,this.canvas.height,s,this._orthoMatrix);this.cameraModule.setBaseProjection(r);const o={easing:S.hl,transitionType:t,pose:i||{},transitionTime:n,projection:r,focalDistance:2};return this.cameraModule.moveTo(o)}getDefaultFloorplanZoom(e){const t=Math.max(e.x,e.z),n=Math.min(e.x,e.z),i=this.canvas.aspectRatio,s=Math.max(t,n/i),r=Math.max(n,t/i),o=i<1?s:r;return this.canvas.height/(1.2*o)}}},66524:(e,t,n)=>{"use strict";function i(e){try{const t=e.getExtension("WEBGL_debug_renderer_info");if(t)return{vendor:e.getParameter(t.UNMASKED_VENDOR_WEBGL),renderer:e.getParameter(t.UNMASKED_RENDERER_WEBGL)}}catch(e){}return{vendor:"Unknown",renderer:"Unknown"}}function s(e){return/Apple A(9|1\d)/.test(e.renderer)||/Adreno \(TM\) (512|530|540|[6-9]\d\d)/.test(e.renderer)||/Mali-G(7[1-9]|[8-9]\d)/.test(e.renderer)}n.d(t,{t:()=>i,W:()=>s})},83804:(e,t,n)=>{"use strict";n.d(t,{a:()=>i,Z:()=>WebGLScene});var i,s=n(84428),r=n(41674),o=n(33299);class CameraRig extends s.Object3D{constructor(e){super(),this.anchor=this,this.update=e=>{this.anchor.position.copy(e.position),this.camera.quaternion.copy(e.rotation),this.camera.projectionMatrix.copy(e.projection.asThreeMatrix4()),this.camera.projectionMatrixInverse.copy(e.projection.asThreeMatrix4()),this.camera.projectionMatrixInverse.invert(),this.updateMatrixWorld(!0)},this.camera=new s.PerspectiveCamera(r.oR.fov,e,r.oR.near,r.oR.far),this.add(this.camera),this.camera.layers.mask=o.o.ALL.mask,this.name="CameraRig"}dispose(){this.remove(this.camera)}}!function(e){e[e.Root=0]="Root",e[e.CameraRig=1]="CameraRig"}(i||(i={}));class WebGLScene{constructor(e,t,n,r){this.scene=e,this.threeRenderer=t,this.cameraData=n,this.useEffectComposer=r,this.ids=i,this.rendering=!1,this.composer=null,this.cameraRigStale=!0,this.canvasSizeChanged=!0,this.updateComposer=(()=>{const e=new s.Vector2;return()=>{this.canvasSizeChanged&&this.composer&&(this.composer.setPixelRatio(this.composer.renderer.getPixelRatio()),this.composer.renderer.getSize(e),this.composer.setSize(e.x,e.y),this.canvasSizeChanged=!1)}})()}add(...e){for(const t of e)this.addChild(i.Root,t)}remove(...e){for(const t of e)this.removeChild(i.Root,t)}addChild(e,t){switch(e){case i.Root:this.scene.add(t);break;case i.CameraRig:this.cameraRig.add(t);break;default:return!1}return!0}removeChild(e,t){switch(e){case i.Root:this.scene.remove(t);break;case i.CameraRig:this.cameraRig.remove(t);break;default:return!1}return!0}get camera(){return this.updateCameraRig(),this.cameraRig.camera}get effectComposer(){return this.composer}init(){this.cameraRig=new CameraRig(this.cameraData.aspect()),this.useEffectComposer&&Promise.all([n.e(525).then(n.bind(n,32903)),n.e(525).then(n.bind(n,86426))]).then((([e,t])=>{this.composer=new e.EffectComposer(this.threeRenderer),this.composer.addPass(new t.RenderPass(this.scene,this.cameraRig.camera)),this.cameraRigStale=!0})),this.cameraRigStale=!0}dispose(){this.cameraRig.dispose()}startRender(e){this.rendering=e}activate(e){this.scene.add(this.cameraRig),this.cameraDataCallback=()=>this.cameraRigStale=!0,this.cameraData.pose.onChanged(this.cameraDataCallback)}deactivate(e){this.scene.remove(this.cameraRig),this.cameraData.pose.removeOnChanged(this.cameraDataCallback)}beforeRender(){this.updateCameraRig(),this.updateComposer()}updateCameraRig(){this.cameraRigStale&&(this.cameraRig.update(this.cameraData.pose),this.cameraRigStale=!1)}render(e){this.rendering&&(this.composer?this.composer.render(e):(this.threeRenderer.clear(),this.threeRenderer.render(this.scene,this.cameraRig.camera)))}setCameraDirty(){this.cameraRigStale=!0,this.cameraRig.camera.updateProjectionMatrix()}onCanvasSizeChanged(){this.canvasSizeChanged=!0}}},49807:(e,t,n)=>{"use strict";n.d(t,{b:()=>GetScreenPositionCommand});var i=n(93037);class GetScreenPositionCommand extends i.m{constructor(e){super(),this.payload=Object.assign({},e)}}},47725:(e,t,n)=>{"use strict";n.d(t,{v:()=>WebGLSupportException,G:()=>RendererCreationException});var i=n(40603);class WebGLSupportException extends i.y{constructor(e){super(e)}}class RendererCreationException extends i.y{constructor(e){super(e)}}},68884:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MAX_RESOLUTION:()=>A,default:()=>WebGLRendererModule});var i=n(57227),s=n(82722),r=n(83804),o=n(84428);const a={basicTextured:{uniforms:{tDiffuse:{type:"t",value:null},alpha:{type:"f",value:1}},vertexShader:n(64656),fragmentShader:n(87686)},screenSpaceColored:{uniforms:{color:{type:"v3",value:new o.Vector3(0,0,0)},opacity:{type:"f",value:1}},vertexShader:n(79933),fragmentShader:n(60348)}};var l=n(47725),c=n(66524),d=n(95891);const u=(e,t)=>{switch(e){case d.Z.GL_TEXTURE_CUBE_MAP_POSITIVE_X:t.set(0,-Math.PI/2,0);break;case d.Z.GL_TEXTURE_CUBE_MAP_NEGATIVE_X:t.set(0,Math.PI/2,0);break;case d.Z.GL_TEXTURE_CUBE_MAP_POSITIVE_Y:t.set(Math.PI/2,Math.PI,0);break;case d.Z.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:t.set(-Math.PI/2,Math.PI,0);break;case d.Z.GL_TEXTURE_CUBE_MAP_POSITIVE_Z:t.set(0,-Math.PI,0);break;case d.Z.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:t.set(0,0,0)}},h={copyCubeMap:{uniforms:{tDiffuse:{type:"t",value:null},alpha:{type:"f",value:1}},vertexShader:n(52838),fragmentShader:n(30202)}};var p=n(81674);const m={0:[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,0,3e-6,229e-6,.005977,.060598,.24173,.382925,.24173,.060598,.005977,229e-6,3e-6,0,0,0,0,0,0,0],2:[0,0,1e-6,1e-5,78e-6,489e-6,.002403,.009245,.027835,.065591,.120978,.174666,.197413,.174666,.120978,.065591,.027835,.009245,.002403,489e-6,78e-6,1e-5,1e-6,0,0],3:[48e-6,169e-6,538e-6,.001532,.003907,.008921,.018247,.033432,.054867,.080658,.106212,.125283,.132372,.125283,.106212,.080658,.054867,.033432,.018247,.008921,.003907,.001532,538e-6,169e-6,48e-6],4:[.001133,.002316,.00445,.008033,.013627,.021724,.032542,.04581,.0606,.075333,.088001,.096603,.099654,.096603,.088001,.075333,.0606,.04581,.032542,.021724,.013627,.008033,.00445,.002316,.001133],5:[.004571,.00723,.010989,.016048,.022521,.03037,.039354,.049003,.058632,.067411,.074476,.079066,.080657,.079066,.074476,.067411,.058632,.049003,.039354,.03037,.022521,.016048,.010989,.00723,.004571],6:[.009379,.012899,.017256,.022453,.028417,.034983,.041888,.048784,.055264,.060893,.065262,.068032,.068981,.068032,.065262,.060893,.055264,.048784,.041888,.034983,.028417,.022453,.017256,.012899,.009379],7:[.014185,.01793,.022207,.02695,.032045,.037335,.042622,.047676,.052254,.056116,.059048,.06088,.061504,.06088,.059048,.056116,.052254,.047676,.042622,.037335,.032045,.02695,.022207,.01793,.014185]};class CWFWebGLRenderer{constructor(e){this.threeRenderer=e,this.cachedSize=new o.Vector2,this.renderToCubeMap=(()=>{let e,t,n,i,s,r=!1;const l=.5;return(c,d,u,h,p,m,g,f,v,b,y,S,E,T,O,_)=>{if(this.contextLost)return;r||(t=new o.OrthographicCamera(-.5,l,l,-.5,-200,200),t.position.z=150,e=new o.Scene,e.name="rttCube",e.add(t),n=new o.RawShaderMaterial({uniforms:{tDiffuse:{value:null},alpha:{value:1}},vertexShader:a.basicTextured.vertexShader,fragmentShader:a.basicTextured.fragmentShader,depthWrite:!1,depthTest:!1,side:o.DoubleSide}),i=new o.PlaneBufferGeometry(1,1),s=new o.Mesh(i,n),s.position.z=0,e.add(s),r=!0);const A=i.getAttribute("uv");A.setUsage(o.DynamicDrawUsage),A.needsUpdate=!0;const w=A.array,N=p/u,P=m/h,I=g/u,k=f/h;w[0]=N,w[1]=P+k,w[2]=N+I,w[3]=P+k,w[4]=N,w[5]=P,w[6]=N+I,w[7]=P;const C=i.getAttribute("position");C.setUsage(o.DynamicDrawUsage),C.needsUpdate=!0;const L=C.array,M=v/d.width-l,D=b/d.height-l,R=y/d.width,x=S/d.height;L[0]=M,L[1]=D+x,L[3]=M+R,L[4]=D+x,L[6]=M,L[7]=D,L[9]=M+R,L[10]=D,n.uniforms.tDiffuse.value=c,n.blending=T||o.NoBlending,n.transparent=!!O,null==_&&(_=1),n.uniforms.alpha.value=_,d.viewport.set(0,0,d.width,d.height);const j=this.threeRenderer.getRenderTarget(),U=this.threeRenderer.autoClear,H=this.threeRenderer.xr.enabled;this.threeRenderer.xr.enabled=!1,this.threeRenderer.autoClear=!1,this.threeRenderer.setRenderTarget(d,E),this.threeRenderer.render(e,t),this.threeRenderer.setRenderTarget(j),this.threeRenderer.autoClear=U,this.threeRenderer.xr.enabled=H}})(),this.copyCubemap=(()=>{let e,t,n,i,s,r=!1;const a=new o.Euler,l=this;return(c,d,p,m,g)=>{if(this.contextLost)return;if(!r){const a=2,l=a/2;t=new o.OrthographicCamera(-l,l,l,-l,0,200),t.position.set(0,0,0),e=new o.Scene,e.name="copyCube",e.add(t),n=new o.RawShaderMaterial({uniforms:{tDiffuse:{value:null},alpha:{value:1}},vertexShader:h.copyCubeMap.vertexShader,fragmentShader:h.copyCubeMap.fragmentShader,depthWrite:!1,depthTest:!1,side:o.DoubleSide}),i=new o.BoxGeometry(a,a,a),s=new o.Mesh(i,n),e.add(s),r=!0}const f=l.threeRenderer.getRenderTarget(),v=l.threeRenderer.autoClear,b=l.threeRenderer.xr.enabled;l.threeRenderer.xr.enabled=!1,l.threeRenderer.autoClear=!1;for(let i=0;i<6;i++)u(i,a),s.rotation.copy(a),s.matrixWorldNeedsUpdate=!0,s.updateMatrixWorld(!0),n.uniforms.tDiffuse.value=c,n.blending=p||o.NoBlending,n.transparent=!!m,null==g&&(g=1),n.uniforms.alpha.value=g,d.viewport.set(0,0,d.width,d.height),l.threeRenderer.setRenderTarget(d,i),l.threeRenderer.render(e,t);l.threeRenderer.setRenderTarget(f),l.threeRenderer.autoClear=v,l.threeRenderer.xr.enabled=b}})(),this.blurCubemap=(()=>{const e=e=>{const t=new o.WebGLCubeRenderTarget(e);return t.texture.image={},t.texture.image.width=e,t.texture.image.height=e,{renderTarget:t,cubeCamera:new o.CubeCamera(.1,1e3,t)}};class BlurCubeMesh extends o.Mesh{}const t={512:e(512)},n=new o.Scene,i=new BlurCubeMesh(new o.BoxGeometry(1,1,1));n.add(i);const s={};return(r,a,l=3,c=.005)=>{const d=a.renderTarget;t[d.width]||(t[d.width]=e(d.width)),i.material=function(e){if(!s[e]){const t=new o.RawShaderMaterial({uniforms:o.UniformsUtils.clone(p.Z.blurCube.uniforms),vertexShader:p.Z.blurCube.vertexShader,fragmentShader:p.Z.blurCube.fragmentShader,side:o.BackSide});t.defines={};const n=m[`${e}`];for(const[e,i]of n.entries())t.defines[`KERNEL_${e+1}`]=0===i||1===i?i.toFixed(1):i;s[e]=t}return s[e]}(l);const u=t[d.width];i.material.uniforms.map.value=r,i.material.uniforms.dir.value.set(c,0),u.cubeCamera.update(this.renderer,n),i.material.uniforms.map.value=u.renderTarget.texture,i.material.uniforms.dir.value.set(0,c),a.update(this.renderer,n)}})();try{const e=this.threeRenderer.getContext();this.setupRendererProxy(),this.contextLost=e.isContextLost(),this._maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this._gpuInfo=(0,c.t)(e)}catch(e){throw new l.G("Unable to create a WebGL rendering context")}}setupRendererProxy(){const e=this.threeRenderer.getContext(),t=e.canvas,n=new Proxy(e,{get:(e,t)=>"canvas"===t?i:e[t]}),i={get clientHeight(){return t.clientHeight},get clientLeft(){return t.clientLeft},get clientTop(){return t.clientTop},get clientWidth(){return t.clientWidth},getBoundingClientRect:()=>t.getBoundingClientRect(),get height(){return t.height},get offsetHeight(){return t.offsetHeight},get offsetLeft(){return t.offsetLeft},get offsetTop(){return t.offsetTop},get offsetWidth(){return t.offsetWidth},get width(){return t.width}};this.threeRenderer.domElement=i,this.threeRenderer.getContext=function(){return n}}get renderer(){return this.threeRenderer}get maxCubemapSize(){return this._maxCubemapSize}get maxTextureSize(){return this._maxTextureSize}get gpuInfo(){return this._gpuInfo}getSize(){return this.threeRenderer.getSize(this.cachedSize)}getPixelRatio(){return this.threeRenderer.getPixelRatio()}dispose(){this.threeRenderer.dispose()}initSizedTexture2D(e,t){const n=new o.DataTexture(null,e,e);return t&&Object.assign(n,t),n.needsUpdate=!0,this.contextLost||this.threeRenderer.initTexture(n),n}initRenderTargetCube(e){const t=new o.WebGLCubeRenderTarget(e,{stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1});return t.texture.image={},t.texture.image.width=e,t.texture.image.height=e,t}uploadTexture2D(e,t,n,i){if(!this.contextLost){const s=new o.Texture;s.image=e,this.threeRenderer.copyTextureToTexture(new o.Vector2(n,i),s,t,0)}}fence(e){return new Promise(((t,n)=>{const i=this.contextLost?null:e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);if(null===i)return n();e.flush();const s=()=>{switch(e.getSyncParameter(i,e.SYNC_STATUS)){case e.TIMEOUT_EXPIRED:return void setTimeout(s,0);case e.WAIT_FAILED:return void n();case e.SIGNALED:return e.deleteSync(i),void t();default:return void setTimeout(s,0)}};setTimeout(s,0)}))}}var g=n(15099),f=n(20725),v=n(70446),b=n(62029),y=n(99295);class ScreenOverlayMesh extends o.Mesh{constructor(e){super(new o.PlaneBufferGeometry(2,2,1,1),new o.RawShaderMaterial({uniforms:o.UniformsUtils.clone(a.screenSpaceColored.uniforms),vertexShader:a.screenSpaceColored.vertexShader,fragmentShader:a.screenSpaceColored.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1})),this._opacity=1,this.material.uniforms.color.value=new o.Color(e),this.renderOrder=y.z.colorOverlay,this.name="ScreenOverlayMesh"}set opacity(e){this.visible=e>0,this._opacity=e,this.material.uniforms.opacity.value=e}get opacity(){return this._opacity}dispose(){this.material.dispose(),this.geometry.dispose()}}class ScreenOverlayComponent{constructor(e,t){this.scene=e,this.cameraData=t}init(){this.blackoutOverlayMesh=new ScreenOverlayMesh(0)}dispose(){this.blackoutOverlayMesh.dispose()}render(e){this.blackoutOverlayMesh.opacity=this.cameraData.transition.blackoutProgress.value}activate(e){this.scene.addChild(this.scene.ids.CameraRig,this.blackoutOverlayMesh)}deactivate(e){this.scene.removeChild(this.scene.ids.CameraRig,this.blackoutOverlayMesh)}}var S=n(7692),E=n(61903),T=n(49807),O=n(69524),_=n(14547);class DomSubscription{constructor(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.options=i,this.renew()}renew(){this.target.addEventListener(this.type,this.listener,this.options)}cancel(){this.target.removeEventListener(this.type,this.listener)}}const A=3686400;class WebGLRendererModule extends i.Y{constructor(){super(...arguments),this.name="webgl-renderer",this.onContextLost=e=>{this.log.info(e),this._cwfRenderer.contextLost=!0,this.engine.broadcast(new b.zq(e)),e.preventDefault()},this.onContextRestored=e=>{var t;this.log.info(e),this._cwfRenderer.contextLost=!1,this.engine.broadcast(new b.Xq(e)),null===(t=this.canvas.parentNode)||void 0===t||t.insertBefore(this.canvas,this.canvas)},this.getPixelRatioFor=(e,t)=>{const n=window.devicePixelRatio||1;return e*t*n<=A?n:1}}async init(e,t){if(!("WebGLRenderingContext"in window))throw new l.v("WebGL not supported");let n;this.canvas=e.canvas,this.engine=t;try{const t={canvas:this.canvas,antialias:e.antialias,alpha:!0,powerPreference:"high-performance"};n=e.useWebGL2?new o.WebGLRenderer(t):new o.WebGL1Renderer(t),n.autoClear=!1,n.xr.enabled=!0}catch(e){throw new l.G("Unable to create a WebGL rendering context")}n.setOpaqueSort(this.painterSortStable),this._cwfRenderer=new CWFWebGLRenderer(n),[this.cameraData,this.settingsData]=await Promise.all([t.market.waitForData(g.M_),t.market.waitForData(E.e)]);const i=new o.Scene;i.name="main",this.scene=new r.Z(i,n,this.cameraData,e.useEffectComposer),t.addComponent(this,this.scene),t.addComponent(this,new ScreenOverlayComponent(this.scene,this.cameraData));const a=await t.market.waitForData(s.W);this.setSize(a.width,a.height),this.bindings.push(t.subscribe(f.a,(e=>this.setSize(e.width,e.height))),t.commandBinder.addBinding(T.b,(async e=>(0,S.q9)(this.cameraData,e.worldPosition).screenPosition)),new DomSubscription(this.canvas,"webglcontextlost",this.onContextLost),new DomSubscription(this.canvas,"webglcontextrestored",this.onContextRestored)),this.webGlMemoryTracker=n.getContext().getExtension("GMAN_webgl_memory"),this.webGlMemoryTracker||this.log.warn("Unable to find WebGL memory tracker!"),t.broadcast(new O.em(_.Y.WebGLRenderer))}get gpuInfo(){return this._cwfRenderer.gpuInfo}get maxCubemapSize(){return this._cwfRenderer.maxCubemapSize}get maxTextureSize(){return this._cwfRenderer.maxTextureSize}get maxVaryings(){return this._cwfRenderer.renderer.capabilities.maxVaryings}getScene(){return this.scene}getCamera(){return this.scene.camera}get cwfRenderer(){return this._cwfRenderer}get textureManager(){return this._cwfRenderer}get threeRenderer(){return this.cwfRenderer.renderer}async renderOnce(){return this.scene.startRender(!0),this.engine.after(v.A.Render).then((()=>this.scene.startRender(!1)))}startRender(e=!0){this.scene.startRender(e),this.engine.broadcast(new b.Vx(this.cwfRenderer.getPixelRatio()))}setSize(e,t){const n=this.getPixelRatioFor(e,t);n!==this.cwfRenderer.getPixelRatio()&&(this.log.debug(`Setting pixel ratio to ${n}`),this.engine.broadcast(new b.Vx(n))),this.threeRenderer.xr.isPresenting&&this.log.error("setting size while in xr is a no no, it resets the viewport",e,t),this.threeRenderer.setPixelRatio(n),this.threeRenderer.setSize(e,t,!1),this.scene.setCameraDirty()}supportsInstancing(){const{threeRenderer:e,settingsData:t}=this;return!t.checkUrlParam("noInstancing",1,0)&&(e.capabilities.isWebGL2||e.extensions.has("ANGLE_instanced_arrays"))}getCapabilities(){const{capabilities:e,extensions:t}=this.threeRenderer,n=e.isWebGL2;let i=!1;try{i=!!document.createElement("canvas").getContext("webgl2")}catch(e){}return{gl_v2:i,gl_max_textures:e.maxTextures,gl_max_texture_size:e.maxTextureSize,gl_max_cubemap_size:e.maxCubemapSize,gl_instancing:this.supportsInstancing(),gl_oes_texture_float:n||t.has("OES_texture_float"),gl_oes_texture_half_float:n||t.has("OES_texture_half_float"),gl_depth_texture:n||t.has("WEBGL_depth_texture"),gl_draw_buffers:n||t.has("WEBGL_draw_buffers"),gl_oes_fbo_render_mip_map:n||t.has("OES_fbo_render_mipmap"),gl_shader_texture_lod:n||t.has("EXT_shader_texture_lod"),gl_oes_vertex_array_obj:n||t.has("OES_vertex_array_object"),gl_ovr_multi_view:n&&t.has("OVR_multiview2"),gl_color_buffer_float:n&&t.has("EXT_color_buffer_float"),gl_astc_supported:t.has("WEBGL_compressed_texture_astc"),gl_etc1_supported:t.has("WEBGL_compressed_texture_etc1"),gl_etc2_supported:t.has("WEBGL_compressed_texture_etc"),gl_dxt_supported:t.has("WEBGL_compressed_texture_s3tc"),gl_bptc_supported:t.has("EXT_texture_compression_bptc"),gl_pvrtc_supported:t.has("WEBGL_compressed_texture_pvrtc")||t.has("WEBKIT_WEBGL_compressed_texture_pvrtc")}}estimatedGPUMemoryAllocated(){if(this.webGlMemoryTracker){return this.webGlMemoryTracker.getMemoryInfo().memory.total}return-1}painterSortStable(e,t){if(e.groupOrder!==t.groupOrder)return e.groupOrder-t.groupOrder;if(e.renderOrder!==t.renderOrder)return e.renderOrder-t.renderOrder;if(e.program!==t.program)return e.program.id-t.program.id;if(e.material.id!==t.material.id)return e.material.id-t.material.id;if(e.object.getSortKey&&t.object.getSortKey){const n=e.object.getSortKey()-t.object.getSortKey();if(0!==n)return n}return e.z!==t.z?e.z-t.z:e.id-t.id}}},62029:(e,t,n)=>{"use strict";n.d(t,{Vx:()=>PixelRatioChangedMessage,zq:()=>WebGLContextLostMessage,Xq:()=>WebGLContextRestoredMessage});var i=n(4117);class PixelRatioChangedMessage extends i.v{constructor(e){super(),this.pixelRatio=e}}class WebGLContextLostMessage extends i.v{constructor(e){super(),this.event=e}}class WebGLContextRestoredMessage extends i.v{constructor(e){super(),this.event=e}}},75783:(e,t,n)=>{"use strict";n.d(t,{j:()=>XRSessionRequestCommand});var i=n(93037);class XRSessionRequestCommand extends i.m{constructor(e){super(),this.id="XR_PRESENT",this.payload=Object.assign({},e)}}},24440:(e,t,n)=>{"use strict";n.d(t,{hX:()=>a,pl:()=>l,bk:()=>i});var i,s=n(2252),r=n(69920),o=n(16534);!function(e){e.webxr="webxr",e.unsupported="unsupported"}(i||(i={}));const a=e=>{const t=e.tryGetProperty("is_vr",!1),n=e.tryGetProperty(o.sX,!1),i=e.tryGetProperty("vr",1);return t&&!(!i||2===i&&!(0,s.Dt)())&&!n},l=async()=>{const e=await r.Z.isSessionSupported("immersive-vr");return r.Z.likelySupportsControllers()&&e?i.webxr:i.unsupported}},69920:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(5477),s=n(2252);const r=new i.Z("vr-platform-select"),o=()=>{const e="xr"in navigator&&"isSessionSupported"in navigator.xr&&"requestSession"in navigator.xr;return window.isSecureContext&&e},a={isSessionSupported:async(e="immersive-vr")=>{let t=!1;if(o())try{t=await navigator.xr.isSessionSupported(e)}catch(e){r.info("WebXR disabled",e)}return r.debug(`WebXR session type: ${e} supported: ${t}`),t},likelySupportsControllers:()=>window.isSecureContext&&((0,s.Ot)()||!(0,s.tq)()),apiExists:o}},49665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ZoomMessage});var i=n(4117);class ZoomMessage extends i.v{constructor(e){super(),this.zoomLevel=e}}},19282:(e,t,n)=>{"use strict";n.d(t,{bj:()=>ZoomInCommand,KB:()=>ZoomOutCommand,ob:()=>ZoomResetCommand,_N:()=>ZoomGetMaxCommand,ts:()=>ZoomSetCommand});var i=n(93037);class ZoomInCommand extends i.m{constructor(e){super(),this.payload={step:e}}}ZoomInCommand.id="ZOOM_IN";class ZoomOutCommand extends i.m{constructor(e){super(),this.payload={step:e}}}ZoomOutCommand.id="ZOOM_OUT";class ZoomResetCommand extends i.m{}ZoomResetCommand.id="ZOOM_RESET";class ZoomGetMaxCommand extends i.m{}ZoomGetMaxCommand.id="ZOOM_MAX_VALUE";class ZoomSetCommand extends i.m{constructor(e){super(),this.payload={value:e}}}ZoomSetCommand.id="ZOOM_SET"},14547:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});const i={Navigation:Symbol("Navigation"),Octree:Symbol("Octree"),PanoTiles:Symbol("PanoTiles"),Raycaster:Symbol("Raycaster"),Snapping:Symbol("Snapping"),StreamingTexture:Symbol("StreamingTexture"),StreamingMesh:Symbol("StreamingMesh"),WebGLRenderer:Symbol("WebGLRenderer")}},69524:(e,t,n)=>{"use strict";n.d(t,{em:()=>SymbolMessage,bc:()=>SymbolBind,z4:()=>SymbolUnbind,PD:()=>l});var i=n(4117),s=n(36032),r=n(91183);const o=new(n(5477).Z)("symbols"),a=[];class SymbolMessage extends i.v{constructor(e){super(),this.symbol=e}}class SymbolBind extends i.v{constructor(e){super(),this.payload=e}}class SymbolUnbind extends i.v{constructor(e){super(),this.payload=e}}function l(e){return new s.V((0,r.k1)((()=>null),(()=>a.length=0)),e.messageBus.subscribe(SymbolBind,(e=>{a.push(e.payload)})),e.messageBus.subscribe(SymbolUnbind,(e=>{const t=a.findIndex((t=>t.symbol===e.payload.symbol&&t.callback===e.payload.callback));t>=0&&a.splice(t,1)})),e.messageBus.subscribe(SymbolMessage,(e=>{a.forEach((t=>{if(t.symbol===e.symbol)try{t.callback()}catch(t){o.warn("Error handling SymbolMessage",e,t)}}))})))}},31117:(e,t,n)=>{"use strict";n.d(t,{P:()=>CircularBuffer});class CircularBuffer{constructor(e){this.size=e,this.index=0,this.buffer=[],this.sorted=!1}push(e){this.index>=this.size&&(this.index=0),this.buffer[this.index]=e,this.index++,this.sorted=!1}peek(){return this.buffer[this.index<=this.buffer.length?this.index-1:0]||null}getList(){return this.buffer}median(){const e=Math.floor(this.buffer.length/2);return this.sorted||this.buffer.sort(),this.buffer[e]}*[Symbol.iterator](){yield*this.buffer}clear(){this.buffer=[],this.index=0}}},16493:(e,t,n)=>{"use strict";n.d(t,{s:()=>Comparator});class Comparator{constructor(e){this.matcher=e}static isValue(e){return new Comparator(new ValueMatcher(e))}static isType(e){return new Comparator(new TypeMatcher(e))}static isInstanceOf(e){return new Comparator(new InstanceMatcher(e))}static is(e){return new Comparator(new PredicateMatcher(e))}static isAny(){return new Comparator(new AnyMatcher)}compare(e){return this.matcher.matches(e)}}class ValueMatcher{constructor(e){this.value=e}matches(e){return this.value===e}}class TypeMatcher{constructor(e){this.type=e}matches(e){return Object.getPrototypeOf(e).constructor===this.type}}class InstanceMatcher{constructor(e){this.type=e}matches(e){if("object"==typeof e)return e instanceof this.type;const t=this.type;switch(typeof e){case"number":return t===Number;case"string":return t===String;case"boolean":return t===Boolean;case"function":return t===Function}return!1}}class PredicateMatcher{constructor(e){this.predicate=e}matches(e){return this.predicate(e)}}class AnyMatcher{constructor(){}matches(){return!0}}},28129:(e,t,n)=>{"use strict";n.d(t,{s:()=>l,n:()=>ExpiringResource});var i=n(5477),s=n(73957),r=n(31013);const o=new i.Z("expiring-resource"),a=new WeakMap;function l(e,t){(0,s.y)(e,(e=>{e instanceof ExpiringResource&&(e.onStale=t)}))}class ExpiringResource{constructor(e,t){this.value=e,this.validUntil=t}refreshFrom(e){this.value=e.value,this.validUntil=e.validUntil;const t=a.get(this);t&&(t.resolve(),a.delete(this))}async get(){if(this.validUntil&&this.onStale){const e=Date.now();if(e+6e4+1e4>this.validUntil.getTime()){let t=a.get(this);t||(t=new r.Q,a.set(this,t),this.onStale()),e+6e4+1e3>this.validUntil.getTime()&&(o.info("Stale resource, waiting for refresh"),await t.nativePromise(),o.info("Refreshed resource"))}}return this.value}getCurrentValue(){return this.value}}},69910:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>LineOctree,FM:()=>SnapLine3,UQ:()=>SnapVector3});var i=n(84428);class LineOctreeNode{constructor(e,t){this.raycast=(()=>{const e=new i.Vector3,t=new i.Box3;return(n,i,s,r)=>{const o=t.copy(this.bounds).expandByScalar(i);if(n.ray.intersectsBox(o))for(const t of this.children)if(t instanceof LineOctreeNode)t.raycast(n,i,s,r);else if(t instanceof SnapLine3){if(!1===(null==r?void 0:r(t)))continue;const o=e,a=n.ray.distanceSqToSegment(t.start,t.end,void 0,e),l=Math.sqrt(a);l<i&&s.push({distance:n.ray.origin.distanceTo(o),object:t,distanceToRay:l,point:o.clone(),isLineOctreeIntersection:!0})}else if(t instanceof SnapVector3){if(!1===(null==r?void 0:r(t)))continue;const e=n.ray.distanceToPoint(t);e<i&&s.push({distance:n.ray.origin.distanceTo(t),object:t,distanceToRay:e,point:t.clone(),isLineOctreeIntersection:!0})}}})(),this.level=t,this.bounds=e.clone(),this.childNodes=[],this.children=[]}add(e){let t=!1;const n=e instanceof i.Line3?[e.start,e.end]:[e];if(this.level<4){0===this.childNodes.length&&this.buildChildNodes();for(const i of this.childNodes)n.every((e=>i.bounds.containsPoint(e)))&&(t=!0,i.add(e))}t||this.children.push(e)}remove(e){const t=e instanceof i.Line3?[e.start,e.end]:[e];for(let n=0;n<this.children.length;n++){const i=this.children[n];if(i instanceof LineOctreeNode){if(t.every((e=>i.bounds.containsPoint(e)))&&i.remove(e))return!0}else if(i===e)return this.children.splice(n,1),!0}return!1}buildChildNodes(){const e=this.bounds.max.clone().sub(this.bounds.min).clone().multiplyScalar(.5);for(let t=0;t<2;t++)for(let n=0;n<2;n++)for(let s=0;s<2;s++){const r=this.bounds.min.x+e.x*s,o=r+e.x,a=this.bounds.min.y+e.y*t,l=a+e.y,c=this.bounds.min.z+e.z*n,d=c+e.z,u=new i.Box3(new i.Vector3(r,a,c),new i.Vector3(o,l,d)),h=new LineOctreeNode(u,this.level+1);this.childNodes.push(h),this.children.push(h)}}spherecast(e,t){if(e.intersectsBox(this.bounds))for(const n of this.children)if(n instanceof LineOctreeNode)n.spherecast(e,t);else if(n instanceof SnapLine3){const s=n.closestPointToPoint(e.center,!0,new i.Vector3);s.distanceTo(e.center)<e.radius&&t.push(new SnapVector3(s))}else n instanceof i.Vector3&&n.distanceTo(e.center)<e.radius&&t.push(n)}traverse(e){for(const t of this.children)t instanceof LineOctreeNode?t.traverse(e):e(t)}}class LineOctree{constructor(e){this.pointCount=0,this.lineCount=0,this.root=new LineOctreeNode(e,0)}add(e){e instanceof i.Line3?this.lineCount++:e instanceof i.Vector3&&this.pointCount++,this.root.add(e)}remove(e){e instanceof SnapLine3?this.lineCount--:e instanceof SnapVector3&&this.pointCount--,this.root.remove(e)}traverse(e){this.root.traverse(e)}raycast(e,t,n){const i=[];return this.root.raycast(e,t,i,n),i}}class SnapLine3 extends i.Line3{constructor(e,t){super(e,t),this.start=e,this.end=t,this.isSnapLine3=!0}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}clone(){return new SnapLine3(this.start,this.end)}}class SnapVector3 extends i.Vector3{constructor(e){super(),this.point=e,this.isSnapVector3=!0,super.copy(e)}copy(e){return this.point.copy(e.point),this}clone(){return new SnapVector3(this.point)}}},96141:(e,t,n)=>{"use strict";n.d(t,{H:()=>Lock});class Lock{constructor(){this.activePromise=Promise.resolve(new Key)}async lock(){const e=new Promise((async e=>{(await this.activePromise).onUnlock((()=>e(new Key)))})),t=this.activePromise;return this.activePromise=e,t}}class Key{onUnlock(e){this.unlockCB=e}unlock(){this.unlockCB()}}},26517:(e,t,n)=>{"use strict";n.d(t,{Pp:()=>l,s1:()=>c,r0:()=>d,m$:()=>u,D7:()=>h,Ll:()=>p,n0:()=>m,fd:()=>g,Fe:()=>f,YN:()=>v,k2:()=>b,mY:()=>y,_U:()=>S,S3:()=>E,J2:()=>T});var i=n(84428),s=n(95703),r=n(77280),o=n(74566),a=n(85111);const l=e=>!!e&&1===e.elements[15],c=e=>!!e&&(e.elements[15]>0&&e.elements[15]<1),d=((()=>{const e=new i.Object3D,t=new i.Vector3})(),(()=>{const e=new i.Vector3;return(t,n,i,s)=>(e.copy(t).sub(n),e.clampLength(i,s),n.clone().add(e))})()),u=(()=>{const e=new i.Vector3;return(t,n,i,s)=>{e.copy(n).sub(t);const r=Math.atan2(Math.sqrt(Math.pow(e.x,2)+Math.pow(e.z,2)),e.y),o=Math.min(Math.max(i,r),s);return Math.abs(r-o)>Number.EPSILON?h(t,n,r-o,!1):t}})(),h=(()=>{const e=new i.Vector3,t=new i.Vector3;return(n,i,s,o)=>(e.copy(i).sub(n),o?t.copy(r.f.UP):t.copy(e).applyAxisAngle(r.f.UP,-1*Math.PI/2).setY(0).normalize(),e.applyAxisAngle(t,s),i.clone().sub(e))})(),p=(()=>{const e=new i.Vector3,t=new i.Vector3;return(n,s,r)=>(e.copy(n).sub(s).normalize(),t.copy(n).sub(r).normalize(),(new i.Quaternion).setFromUnitVectors(e,t))})(),m=(()=>{const e=new s.M;return(t,n)=>(e.setPosition(t),e.lookAt(t,n,r.f.UP),(new i.Quaternion).setFromRotationMatrix(e.asThreeMatrix4()))})(),g=(()=>{const e=new i.Vector3;return(t,n,i)=>(e.copy(r.f.FORWARD).applyQuaternion(t).normalize(),e.clone().multiplyScalar(-1*i).add(n))})(),f=(()=>{const e=new i.Ray,t=new i.Vector3,n=new i.Vector3;return(i,s,o)=>(n.set(0,0,0),t.copy(r.f.FORWARD).applyQuaternion(s),e.set(i,t),e.intersectPlane(o,n))})(),v=(()=>{const e=new i.Vector3,t=new i.Vector3,n=new i.Vector3,s=new i.Vector3,o=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3],a=new i.Vector3,l=new i.Vector3,c=new i.Vector3,d=new i.Vector3,u=new i.Plane,h=new i.Vector3,p=new i.Ray,g=new i.Vector3,f=new i.Vector3;return(i,v,b,y,S,E)=>{e.copy(r.f.FORWARD).applyQuaternion(v).setY(0),t.copy(e).setY(b).normalize(),s.copy(t).applyAxisAngle(r.f.UP,-Math.PI/2).setY(0).normalize(),n.copy(s).cross(t).normalize();let T=0;const O=y.max,_=y.min,A=[O,_];for(let e=0;e<2;e++){const t=A[e].x;for(let e=0;e<2;e++){const n=A[e].y;for(let e=0;e<2;e++){const i=A[e].z;o[T].set(t,n,i),T++}}}a.copy(_),c.copy(i).setY(_.y);let w=l.copy(a).sub(c).dot(t);o.forEach((e=>{if(e.y===O.y)return;const n=l.copy(e).sub(c).dot(t);n<w&&(a.copy(e),w=n)}));const N=Math.sign(a.dot(s));d.copy(a).setX(a.x===O.x?_.x:O.x),Math.sign(d.dot(s))!==N?u.set(h.set(0,0,-1*Math.sign(a.z)),Math.abs(a.z)):(d.copy(a).setZ(a.z===O.z?_.z:O.z),u.set(h.set(-1*Math.sign(a.x),0,0),Math.abs(a.x))),p.set(i,g.copy(t).multiplyScalar(-1)),p.intersectPlane(u,f);const P=Math.min(Math.abs(f&&f.dot(t)),w);let I=0,k=0;o.forEach((function(e){l.copy(e).sub(i);const t=Math.abs(l.dot(s)),r=Math.abs(l.dot(n));t>I&&(I=t),r>k&&(k=r)}));const C=I/Math.tan(S*E/2),L=k/Math.tan(S/2),M=Math.max(C,L)+Math.abs(P),D=i.clone().add(t.clone().multiplyScalar(1.1*-M));return{position:D,rotation:m(D,i)}}})(),b=((()=>{const e=new i.Matrix4})(),(()=>{const e=new i.Matrix4,t=new i.Vector4})(),(()=>{const e=new i.Vector3;return(t,n,i=r.f.UP)=>{const s=t.angleTo(n);return Math.sign(e.crossVectors(t,n).dot(i))*s}})()),y=((()=>{const e=new s.M,t=new i.Vector3})(),(e,t,n,i,s=1.5)=>{const r=1/e.elements[5];if(l(e))return s*i/(2*r);const o=t.distanceTo(n),a=Math.atan(r);return i*(s/(2*Math.tan(a)*o))}),S=function(){const e=new i.Vector3,t=new i.Matrix4;return(n,i,s)=>{const r=e.set(0,0,-n).applyMatrix4(i).z;return t.copy(i),t.invert(),e.set(2/s,0,r).applyMatrix4(t),e.x}}(),E=e=>1/e.elements[5],T=(()=>{const e=new i.Vector3;return(t,n,i)=>{const s=i.angleTo(r.f.UP),o=Math.abs(s-Math.PI);return s<.2||o<.2?(t.quaternion.setFromUnitVectors(r.f.FORWARD,i),!0):(t.lookAt(e.copy(n).add(i)),!1)}})();(()=>{const e=new i.Vector3,t=new i.Vector3(1e4,1e4,1e4),n=[new i.Line3,new i.Line3,new i.Line3,new i.Line3],s=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3]})()},94293:(e,t,n)=>{"use strict";n.d(t,{mB:()=>i});n(84428);const i=e=>!e||!Object.values(e).filter((e=>0!==e)).length},994:(e,t,n)=>{"use strict";n.d(t,{Ue:()=>i,MN:()=>s,Id:()=>r,ZY:()=>o});const i=Math.PI/180,s=180/Math.PI;function r(e){return e*i}function o(e){return e*s}},74170:(e,t,n)=>{"use strict";n.d(t,{uZ:()=>i});const i=function(e,t,n){return Math.max(t,Math.min(e,n))}},74566:(e,t,n)=>{"use strict";n.d(t,{r6:()=>i,wo:()=>s});const i=(e,t,n=1e-5)=>Math.abs(e-t)<=n,s=(e,t,n=1e-5)=>((e,t,n=1e-5)=>i(e.x,t.x,n)&&i(e.y,t.y,n))(e,t,n)&&i(e.z,t.z,n)},34629:(e,t,n)=>{"use strict";function i(e,t,n){return(1-n)*e+n*t}n.d(t,{t:()=>i})},63387:(e,t,n)=>{"use strict";n.d(t,{ep:()=>d,tf:()=>u,r_:()=>h,zW:()=>p,xS:()=>m,cb:()=>g,rj:()=>f,jB:()=>v,et:()=>b,dS:()=>y,Z:()=>E,Rq:()=>T,Xe:()=>O,Xv:()=>_});var i=n(84428),s=n(95703),r=n(77280),o=n(74170),a=n(994);const l=new i.Frustum,c=new s.M;new i.Sphere;var d;!function(e){e.fromVisionVector=function(e){return new i.Vector3(e.x,e.z,-e.y)},e.toVisionVector=function(e){return new i.Vector3(e.x,-e.z,e.y)},e.fromVisionQuaternion=function(e){return new i.Quaternion(e.x,e.z,-e.y,e.w).multiply((new i.Quaternion).setFromAxisAngle(new i.Vector3(0,1,0),(0,a.Id)(90)))},e.fromVisionCameraQuaternion=function(e){return new i.Quaternion(-e.x,-e.z,e.y,-e.w).multiply((new i.Quaternion).setFromAxisAngle(new i.Vector3(1,0,0),(0,a.Id)(90)))},e.toVisionQuaternion=function(e){const t=new i.Quaternion(e.x,e.y,e.z,e.w).multiply((new i.Quaternion).setFromAxisAngle(new i.Vector3(0,1,0),(0,a.Id)(-90)));return t.set(t.x,-t.z,t.y,t.w),t},e.toVisionCameraQuaternion=function(e){return new i.Quaternion(e.x,-e.z,e.y,e.w).multiply(new i.Quaternion(-.70710678118,0,0,.70710678118))}}(d||(d={}));const u=function(e){return Math.cos((0,a.Id)(e/2))};function h(e,t,n){return Math.abs(t-e)<=n?t:e+Math.sign(t-e)*n}const p=function(e,t){const n=new i.Vector3(0,0,-1);return n.clone().applyQuaternion(e).angleTo(n.clone().applyQuaternion(t))};function m(e,t,n){return c.identity().makeRotationFromQuaternion(t).setPosition(e),c.getInverse(c),c.premultiply(n.asThreeMatrix4()),l.setFromProjectionMatrix(c.asThreeMatrix4()),l}const g=(e,t,n,i)=>m(e,t,n).intersectsBox(i),f=e=>{const t=e.getSize(new i.Vector3),n=Math.max(t.x,t.y,t.z);return(new i.Box3).setFromCenterAndSize(e.getCenter(new i.Vector3),new i.Vector3(n,n,n))},v=(e,t)=>{if(t.length<8)throw new Error("getPointsFromBox3: Result array to small!");t[0].copy(e.min),t[1].copy(e.min),t[1].x=e.max.x,t[2].copy(e.min),t[2].y=e.max.y,t[3].copy(e.min),t[3].z=e.max.z,t[4].copy(e.max),t[5].copy(e.max),t[5].x=e.min.x,t[6].copy(e.max),t[6].y=e.min.y,t[7].copy(e.max),t[7].z=e.min.z},b=(e,t,n,i,s)=>(s-i)*((e-t)/(n-t))+i,y=(e,t,n,i,s)=>{const r=b(e,t,n,i,s);return(0,o.uZ)(r,i,s)};function S(e){return 0===e.x&&0===e.y&&0===e.z}const E=(()=>{const e=new i.Vector3,t=new i.Matrix4;return n=>S(n)?n.clone():(e.copy(r.f.FORWARD).applyQuaternion(n),t.lookAt(r.f.ZERO,e,r.f.UP),(new i.Quaternion).setFromRotationMatrix(t))})(),T=(()=>{const e=new i.Vector3,t=new i.Matrix4;return(n,i)=>S(n)?i.copy(n):(e.copy(r.f.FORWARD).applyQuaternion(n).setY(0).normalize(),t.lookAt(r.f.ZERO,e,r.f.UP),i.setFromRotationMatrix(t))})(),O=(()=>{const e=new i.Vector3,t=new i.Ray;return(n,s,r,o)=>(o=o||new i.Vector3,t.origin.copy(n),t.lookAt(s),o.copy(t.at(r,e)))})(),_=(()=>{const e=new i.Vector3,t=new i.Ray;return(n,s,r,o)=>(o=o||new i.Vector3,t.set(n,s),o.copy(t.at(r,e)))})()},78261:(e,t,n)=>{"use strict";function i(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}n.d(t,{C:()=>i})},31013:(e,t,n)=>{"use strict";n.d(t,{Q:()=>OpenDeferred});class OpenDeferred{constructor(){this.base=new Promise(((e,t)=>{this.resolver=e,this.rejecter=t})),this._promise=new OpenPromise(this.base,this),this.progressCallbacks=[]}then(e,t){return this.base.then(e,t)}catch(e){return this.base.catch(e)}resolve(e){return this.resolver(e),this}reject(e){return this.rejecter(e),this}notify(e){for(const t of this.progressCallbacks)t(e)}progress(e){return this.progressCallbacks.push(e),this}promise(){return this._promise}nativePromise(){return this.base}static resolve(){const e=new OpenDeferred;return e.resolve(),e.promise()}static reject(e){const t=new OpenDeferred;return t.reject(e),t.promise()}static all(e){const t=[];for(const n of e)n.nativePromise?t.push(n.nativePromise()):t.push(n);const n=new OpenDeferred;return Promise.all(t).then((e=>n.resolve(e)),(e=>n.reject(e))),n.promise()}}class OpenPromise{constructor(e,t){this.basePromise=e,this.baseDeferred=t}then(e,t){return this.baseDeferred.then(e,t),this}catch(e){return this.baseDeferred.catch(e),this}progress(e){return this.baseDeferred.progress(e),this}nativePromise(){return this.basePromise}}},89741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>OrderedMap});const i=e=>""+e;class OrderedMap{constructor(e=i){this.mappingFunction=e,this.list=[],this.map={}}add(e){const t=this.mappingFunction(e);return!this.map[t]&&(this.list.push(e),this.map[t]=e,!0)}set(e){const t=this.mappingFunction(e);return this.map[t]?(this.map[t]=e,!0):(this.add(e),!0)}count(){return this.list.length}*[Symbol.iterator](){for(const e of this.list)yield e}getByIndex(e){return this.list[e]}get(e){return this.map[e]}copyToList(e){return e.push.apply(e,this.list),e}clear(){this.list=[],this.map={}}mapElements(e){return this.list.map(e)}}},65:(e,t,n)=>{"use strict";function i(e){return{x:e.x,y:e.y,z:e.z}}function s(e){return{x:e.x||e._x,y:e.y||e._y,z:e.z||e._z,w:e.w||e._w}}n.d(t,{m:()=>i,J5:()=>s})},41252:(e,t,n)=>{"use strict";n.d(t,{z:()=>AnimatedNumber});var i=n(65270),s=n(98254),r=n(5477),o=n(91183);const a=new r.Z("animation");class AnimatedNumber extends s.T{constructor(e,t,n,s=i.vG,r=0){super(),this._easing=i.vG,void 0===t&&(t=e),void 0===n&&(this._active=!1,n=0,this._elapsed=0,this._duration=0),this.modifyAnimation(e,t,n,s,0,r)}get active(){return this._active}get duration(){return this._duration}get endValue(){return this._endValue}get easing(){return this._easing}get elapsed(){return this._elapsed}get delay(){return this._delay}tick(e){if(!this._active)return this.endValue;if(this._delay>0)return this._delay-=e,this.startValue;const t=(this._elapsed+e)/Math.max(this._duration,1e-5);return this.updateProgress(t),this.value}updateProgress(e){if(isNaN(e))return void a.error(`Invalid progress value: ${e}`);const t=Math.max(0,Math.min(e,1)),n=this.active,i=this.value;if(t>=1)return this.activate(!1),this.value=this._easing(1,this.startValue,this._endValue-this.startValue,1),this._elapsed=this.duration,this.commit(),void(this._onComplete&&this._onComplete.forEach((e=>e())));this.activate(!0),this.value=this._easing(t,this.startValue,this._endValue-this.startValue,1),this._elapsed=t*this.duration,i===this.value&&n===this.active||this.commit()}updateAbsolute(e){const t=e/Math.max(this._duration,1e-5);this.updateProgress(t)}modifyAnimation(e,t,n,s=i.vG,r=0,o=0){return this._easing=s,this._endValue=t,this._duration=n,this.activate(this._duration>=0&&e!==t),this._elapsed=r,this._delay=o,this.startValue=e,this.value=e,this.commit(),this}onComplete(e){return this._onComplete||(this._onComplete=[]),(0,o.k1)((()=>this._onComplete.push(e)),(()=>this._onComplete.splice(this._onComplete.indexOf(e),1)))}activate(e){this._active=e}copy(e){this._endValue=e.endValue,this._duration=e.duration,this._active=e.active,this._easing=e.easing,this._elapsed=e.elapsed,this.startValue=e.startValue,this.value=e.value,this.commit()}clone(){const e=new AnimatedNumber(0);return e.copy(this),e}stop(e){this._active=!1,this._elapsed=this._duration,this.value=e,this._endValue=e,this.commit()}equals(e){return this._active===e._active&&this.duration===e.duration&&this.easing===e.easing&&this.elapsed===e.elapsed&&this.endValue===e.endValue&&this.startValue===e.startValue&&this.value===e.value}}},95987:(e,t,n)=>{"use strict";n.d(t,{bX:()=>i,E8:()=>s});const i=(e,t)=>{if(0!==e.length)for(let n=0;n<e.length;n++){e[n]===t&&e.splice(n,1)}};const s=(e=[],t=[])=>e.length===t.length&&(e=e.slice().sort(),t=t.slice().sort(),e.every(((e,n)=>t[n]===e)))},83773:(e,t,n)=>{"use strict";n.d(t,{g$:()=>i,LP:()=>s,lZ:()=>r});const i=16/9,s=1/i,r=function(e,t){return Math.min(Math.max(t/e,s),1)*e}},29497:(e,t,n)=>{"use strict";n.d(t,{h:()=>i,K:()=>s});class Heap{constructor(e){this.comparator=e,this.nodes=[]}push(e){return this.nodes.push(e),this.siftdown(0,this.nodes.length-1)}pop(){let e,t;return this.nodes.length&&(e=this.nodes.pop(),e)?(this.nodes.length?(t=this.nodes[0],this.nodes[0]=e,this.siftup(0)):t=e,t):null}peek(){return this.nodes[0]}contains(e){return-1!==this.nodes.indexOf(e)}replace(e){if(this.nodes.length){const t=this.nodes[0];return this.nodes[0]=e,this.siftup(0),t}return null}_pushpop(e,t,n){let i;const s=n||this.defaultCompare;return e.length&&s(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],this._siftup(e,0,s)),t}pushpop(e){return this._pushpop(this.nodes,e,this.comparator)}_heapify(e,t){let n,i,s,r,o,a;const l=Math.floor(e.length/2),c=function(){for(a=[],s=0,o=l;0<=o?s<o:s>o;0<=o?s++:s--)a.push(s);return a}.apply(this).reverse(),d=[];for(i=0,r=c.length;i<r;i++)n=c[i],d.push(this._siftup(e,n,t));return d}heapify(){let e,t,n,i,s,r;const o=Math.floor(this.nodes.length/2),a=function(){for(r=[],n=0,s=o;0<=s?n<s:n>s;0<=s?n++:n--)r.push(n);return r}.apply(this).reverse(),l=[];for(t=0,i=a.length;t<i;t++)e=a[t],l.push(this.siftup(e));return l}updateItem(e){const t=this.nodes.indexOf(e);return-1===t?null:(this.siftdown(0,t),this.siftup(t))}clear(){return this.nodes=[]}empty(){return 0===this.nodes.length}size(){return this.nodes.length}clone(){const e=new Heap(this.comparator);return e.nodes=this.nodes.slice(0),e}toArray(){return this.nodes.slice(0)}insert(e){return this.push(e)}top(){return this.peek()}front(){return this.peek()}has(e){return this.contains(e)}copy(){return this.clone()}nlargest(e){let t,n,i;const s=this.nodes.slice(0,e);if(!s.length)return s;this._heapify(s,this.comparator);const r=this.nodes.slice(e);for(n=0,i=r.length;n<i;n++)t=r[n],this._pushpop(s,t,this.comparator);return s.sort(this.comparator).reverse()}defaultCompare(e,t){return e<t?-1:e>t?1:0}_siftdown(e,t,n,i){let s,r;const o=i||this.defaultCompare,a=e[n];for(;n>t&&(r=n-1>>1,s=e[r],o(a,s)<0);)e[n]=s,n=r;return e[n]=a}siftdown(e,t){return this._siftdown(this.nodes,e,t,this.comparator)}_siftup(e,t,n){let i,s;const r=n||this.defaultCompare,o=e.length,a=t,l=e[t];for(i=2*t+1;i<o;)s=i+1,s<o&&!(r(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=l,this._siftdown(e,a,t,r)}siftup(e){return this._siftup(this.nodes,e,this.comparator)}}var i;function s(e){void 0===e.timeout&&(e.timeout=1/0);const t={data:e.start,g:0,heuristicValue:e.heuristic(e.start)};let n=t;t.f=t.heuristicValue;const s=new Set,a=new Heap(o),l=new Map;a.push(t),l.set(t.data,t);const c=Date.now();for(;a.size();){if(Date.now()-c>e.timeout)return{status:i.Timeout,cost:n.g,path:r(n)};const t=a.pop();if(l.delete(t.data),t&&e.isEnd(t.data))return{status:i.Success,cost:t.g,path:r(t)};s.add(t.data);const o=e.neighbors(t.data);for(const i of o){if(s.has(i))continue;const r=t.g+e.distance(t.data,i);let o=l.get(i),c=!1;if(void 0===o)o={data:i,g:0,heuristicValue:0,f:0},l.set(i,o);else{if(o.g<r)continue;c=!0}o.parent=t||void 0,o.g=r,o.heuristicValue=e.heuristic(i),o.f=r+o.heuristicValue,o.heuristicValue<n.heuristicValue&&(n=o),c?a.heapify():a.push(o)}}return{status:i.NoPath,cost:n.g,path:r(n)}}function r(e){if(void 0!==e.parent){const t=r(e.parent);return t.push(e.data),t}return[e.data]}function o(e,t){if(e.f&&t.f)return e.f-t.f;throw new Error('heapComparator() -> Property "f" is undefined.')}!function(e){e[e.Success=0]="Success",e[e.NoPath=1]="NoPath",e[e.Timeout=2]="Timeout"}(i||(i={}))},28861:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});const i=function(e,t){if(t.setLength(0),0===e.length)return t;let n=0;for(const i of e)t.add(i),n++;return t.divideScalar(n),t}},2252:(e,t,n)=>{"use strict";n.d(t,{dy:()=>a,tq:()=>l,jx:()=>c,_1:()=>u,Tt:()=>h,V5:()=>p,Kr:()=>m,Dt:()=>g,vU:()=>f,rI:()=>v,Ot:()=>b,Q0:()=>y,Jm:()=>S,J1:()=>E,yL:()=>T,SP:()=>O,UD:()=>_,Vf:()=>A,Hx:()=>w,rm:()=>N,O6:()=>P,Zx:()=>I,Qg:()=>k,PI:()=>C,ht:()=>L});var i=n(5477),s=n(14909),r=n(87100);const o=new i.Z("util-browser"),a=()=>{const e=window.innerWidth/window.innerHeight;return isFinite(e)?e:1},l=function(){const e=navigator.userAgent||navigator.vendor,t=new RegExp("(android|bbd+|meego).+mobile|android|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|\n    hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|\n    palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|\n    wap|windows ce|xda|xiino","i"),n=new RegExp("1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|\n    amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|\n    br(e|v)w|bumb|bw-(n|u)|c55/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|\n    devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|\n    g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|\n    a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|\n    jemu|jigs|kddi|keji|kgt( |/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|/(k|l|u)|50|54|-[a-w])|libw|lynx|\n    m1-w|m3ga|m50/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|\n    zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|\n    nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|\n    po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55/|\n    sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|\n    sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|\n    tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|\n    vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|\n    zeto|zte-","i");return(t.test(e)||n.test(e.substr(0,4))||u())&&!b()},c=/([\s\{\}\"\']|[^\x00-\x7F]|%[^0-9a-fA-F]{2})+/g,d=(e,t)=>{let n=window.navigator.userAgent.match(e);return n=n?n[1].split(t):[],{major:parseInt(n[0],10)||0,minor:parseInt(n[1],10)||0,patch:parseInt(n[2],10)||0}},u=()=>{const e=window.navigator.userAgent;return/iPad/.test(e)||p()&&navigator.maxTouchPoints>1},h=()=>{const e=window.navigator.userAgent;return/iPod|iPhone/.test(e)||p()&&navigator.maxTouchPoints>1},p=()=>{const e=window.navigator.platform;return/MAC/.test(e.toUpperCase())},m=()=>{const e=window.navigator.platform;return/WIN/.test(e.toUpperCase())},g=()=>-1!==window.navigator.userAgent.indexOf("Android"),f=()=>-1!==window.navigator.userAgent.indexOf("Firefox"),v=()=>{if(!f())throw new Error("Not a Firefox browser");return d(/Firefox\/((?:\d+\.?){1,3})/,".")},b=()=>-1!==window.navigator.userAgent.indexOf("OculusBrowser"),y=()=>{switch((0,r.eY)("bot",2)){case 0:return!1;case 1:return!0;case 2:return-1!==navigator.userAgent.indexOf("Googlebot");default:return!1}},S=()=>"ontouchstart"in window,E=()=>"share"in navigator&&(l()||u()),T=()=>window.parent!==window,O=()=>T()&&(()=>{const e=new URL(document.referrer);return s.yx.some((t=>t.test(e.hostname)))})(),_=()=>window.location.search.substr(1).split("&"),A=(e,t=!1)=>{const n=`${window.location.origin}${window.location.pathname}?${e}`;t?window.history.pushState({},"",n):window.location.replace(n)},w=function(){const e=window.URL||window.webkitURL,t=document.createElement("a");return document.body.appendChild(t),t.style.display="none",(n,i)=>{const s=e.createObjectURL(n);t.href=s,t.download=i,t.click(),e.revokeObjectURL(s)}}(),N=function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},P=function(){return!u()&&!h()&&!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled)},I=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},k=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};function C(e){try{return document.featurePolicy.allowsFeature(e)}catch(t){return o.warn(t),o.warn(`Feature Policy check failed, defaulting ${e} to false.`),!1}}const L=()=>{var e,t;return(e=>{const t={language:"en",region:void 0,script:void 0,ext:void 0},n=new RegExp([/^([a-z]{2,3})/,/(?:[_-]([ut]{1}[_-][a-z\-\_]+))?/,/(?:[_-]([a-z]{4}))?/,/(?:[_-]([a-z]{2}))?$/].map((e=>e.source)).join(""),"i").exec(e);if(n){const[,e,i,s,r]=n;Object.assign(t,{language:e,ext:i,script:s,region:r})}return t})((null===(t=null===(e=null===Intl||void 0===Intl?void 0:Intl.DateTimeFormat())||void 0===e?void 0:e.resolvedOptions())||void 0===t?void 0:t.locale)||navigator.language).language||""}},28124:(e,t,n)=>{"use strict";n.d(t,{G1:()=>a,rn:()=>l,D5:()=>c,Ex:()=>d});var i=n(84428),s=n(81402);const r=()=>Math.random(),o={},a=(e,t=r())=>(o[t]||(o[t]=new i.Vector4(r(),r(),r(),e)),o[t]),l=()=>new i.Color(r(),r(),r()),c=e=>"object"==typeof e&&"r"in e&&"g"in e&&"b"in e;function d(e){return`#${(0,s.Q_)(255*e.r,2,"0",16)}${(0,s.Q_)(255*e.g,2,"0",16)}${(0,s.Q_)(255*e.b,2,"0",16)}`}},19718:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});const i=function(e,t){const n=new RegExp(e+"=([^;]+)|$").exec(document.cookie);if(!n)return t;const i=n[1];return"boolean"==typeof t?"true"===i||"1"===i:"number"==typeof t?parseFloat(i):i}},63336:(e,t,n)=>{"use strict";n.d(t,{U:()=>s,p:()=>r});const i=new Object,s=e=>{if(e){const t=e.valueOf();if(!isNaN(t))return e.toISOString()}return(new Date).toISOString()},r=(e,t=i)=>{if(e){const t=new Date(e);if(!isNaN(t.valueOf()))return t}return t===i?new Date:t}},83233:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});const i=(e,t=250)=>{let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout((()=>e.apply(null,i)),t)}}},48558:(e,t,n)=>{"use strict";n.d(t,{_F:()=>s,zy:()=>r,XJ:()=>o});const i=.3048,s=e=>e*i,r=e=>e/i,o=e=>{const t=e/i;let n=Math.floor(t),s=12*t%12;return 12===Math.round(s)?(n+=1,s=0):s=Math.round(s),{feet:n,inches:s}}},65270:(e,t,n)=>{"use strict";n.d(t,{vG:()=>r,FG:()=>o,hl:()=>a,to:()=>l,Q9:()=>c,w2:()=>d,qb:()=>u,Fs:()=>h,ad:()=>p,hN:()=>m,e3:()=>g,tf:()=>f,aB:()=>v});var i=n(69436),s=n.n(i);const r=function(e,t,n,i){return n*e/i+t},o=function(e,t,n,i){return n*(e/=i)*e+t},a=function(e,t,n,i){return-n*(e/=i)*(e-2)+t},l=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},c=function(e,t,n,i){return n*(e/=i)*e*e+t},d=function(e,t,n,i){return e/=i,n*(--e*e*e+1)+t},u=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},h=function(e,t,n,i){return-n/2*(Math.cos(Math.PI*e/i)-1)+t},p=function(e,t,n,i){return n*(1-Math.pow(2,-10*e/i))+t},m=function(e,t,n,i){return(e/=i/2)<1?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(2-Math.pow(2,-10*e))+t)},g=(e,t,n,i,s)=>{let r=t;if(s>0){const t=(1-Math.max(s,0))*Math.abs(i);r=n<=t?0:e(n-t,0,1,t)}return r};function f(e,t,n,i){const r=new(s())(e,t,n,i);return(e,t,n,i)=>{const s=e/i;return t+n*r.solve(s)}}const v=function(e,t,n,i){return-4*n*Math.pow(e/i-(.5+t),2)+1}},5314:(e,t,n)=>{"use strict";n.d(t,{bX:()=>i,z6:()=>s});const i=e=>void 0!==e.pointerId,s=e=>void 0!==e.changedTouches},19945:(e,t,n)=>{"use strict";n.d(t,{qf:()=>r,A5:()=>l,GO:()=>c,fc:()=>u});var i=n(84428),s=n(77280);function r(e){if(0===e.length)throw Error("Can't merge empty list of geometries");if(1===e.length)return e[0];let t=0,n=0,s=0,r=0;const a=new i.Box3;for(const i of e)i.index&&(t+=i.index.count,n+=i.getAttribute("position").count,i.getAttribute("uv")&&(s+=i.getAttribute("uv").count),i.boundingBox&&(a.union(i.boundingBox),r++));const c=new i.BufferGeometry;r!==e.length||a.isEmpty()?c.computeBoundingBox():c.boundingBox=a,a.copy(l(c)),c.boundingSphere=a.getBoundingSphere(new i.Sphere);const d=o(new Float32Array(3*n),"position",e);c.setAttribute("position",new i.BufferAttribute(d,3));const u=function(e,t){let n=0,i=0;for(const s of t){const t=s.index;for(let s=0;s<t.array.length;s++)e[n+s]=t.array[s]+i;n+=t.array.length,i+=s.getAttribute("position").count}return e}(new Uint32Array(t),e);if(c.setIndex(new i.BufferAttribute(u,1)),s){const t=o(new Float32Array(2*s),"uv",e);c.setAttribute("uv",new i.BufferAttribute(t,2))}return c}function o(e,t,n){let i=0;for(const s of n){const n=s.getAttribute(t);e.set(n.array,i),i+=n.array.length}return e}const a=new i.Box3(s.f.ZERO,s.f.UNIT);function l(e){return e.boundingBox||e.computeBoundingBox(),e.boundingBox||a}function c(e,t){let n=1/0;const s=t.clone(),r=new i.Vector3,o=new i.Vector3(1/0,1/0,1/0);let a=-1;const l=new i.Triangle;return function(e,t){var n;const i=null===(n=e.index)||void 0===n?void 0:n.array,s=e.getAttribute("position");if(!s)return;const r=e.groups.length>0?e.groups:[{start:0,count:i?i.length:s.count,materialIndex:0}];let o=0;for(const e of r)for(let n=e.start;n<e.start+e.count;n+=3){let r=n,a=n+1,l=n+2;i&&(r=i[r],a=i[a],l=i[l]),t(s.getX(r),s.getY(r),s.getZ(r),s.getX(a),s.getY(a),s.getZ(a),s.getX(l),s.getY(l),s.getZ(l),o++,e.materialIndex||0)}}(e,((e,t,i,c,d,u,h,p,m,g)=>{l.a.set(e,t,i),l.b.set(c,d,u),l.c.set(h,p,m),l.closestPointToPoint(s,r);const f=s.distanceToSquared(r);f<n&&(o.copy(r),n=f,a=g)})),{point:o,distance:Math.sqrt(n),faceIndex:a}}const d=new i.PlaneBufferGeometry(1,1);function u(){return d}},81402:(e,t,n)=>{"use strict";n.d(t,{gw:()=>s,Ig:()=>r,Y8:()=>o,XN:()=>a,Yv:()=>l,TH:()=>c,Jq:()=>d,Pe:()=>u,DZ:()=>h,Q_:()=>p,O1:()=>m,$B:()=>g,ow:()=>f,aS:()=>v,lY:()=>b});var i=n(18050);const s=function(e){return new Promise(((t,n)=>{setTimeout(t,e)}))},r=e=>{let t,n=-1;return{promise:new Promise(((i,s)=>{t=i,n=window.setTimeout(i,e)})).then((()=>{n=-1})),cancel:()=>{-1!==n&&(window.clearTimeout(n),t())}}},o=function(e,t){if(0===e.length)return null;let n=0,i=0;for(let s of e)s=t?s[t]:s,n+=s,i++;return n/i},a=function(e){const t={};for(const n of e)t[n]=n;return t},l=function(e){return!e.replace(/\n/g,"").trim().length},c=function(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},d=function(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0},u=function(e,t,n=!0){if(0===e.length)return null;n&&e.sort((function(e,t){return e-t}));const i=t/100;return e[Math.floor(e.length*i)]},h=function(e){return[p(e.getMonth()+1),".",p(e.getDate()),".",e.getFullYear(),"_",p(e.getHours()),".",p(e.getMinutes()),".",p(e.getSeconds())].join("")},p=function(e,t=2,n="0",i=10){const s=e.toString(i),r=t-s.length+1;return r>0?new Array(r).join(n)+s:s},m=function(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},g=e=>{const t=[];for(let n=0;n<e.length;n+=8192)t.push(String.fromCharCode.apply(null,e.subarray(n,n+8192)));return btoa(t.join(""))},f=(e=[])=>{const t={};for(const n of e)t[n]=!0;return t};const v=(e,t,n="...")=>e.length<=t?e:`${e.substr(0,t)}${n}`,b=(e,t,n)=>{if(!(Math.abs(e)<4294967295)||!(t<32)||!(n<32))throw new i.Z("argument out of range");const s=1&(e>>>t^e>>>n);return(e^=s<<t|s<<n)>>>0};(()=>{const e={}})()},37917:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});const i=new(n(5477).Z)("passive-support"),s=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>{e=!0}});return window.addEventListener("testPassive",(()=>{}),t),window.removeEventListener("testPassive",(()=>{}),t),e}catch(e){return i.warn(`Passive Option for addEventListener is not supported, Safari zoom may not perform as expected: ${e}`),!1}})()},253:(e,t,n)=>{"use strict";n.d(t,{fp:()=>s,m8:()=>r});const i=new(n(5477).Z)("util-browser"),s=function(e,t){if(!("localStorage"in window))return t;let n;try{n=window.localStorage.getItem(e)}catch(e){return i.debug(e),t}return null===n?t:"boolean"==typeof t?"true"===n:"number"==typeof t?parseFloat(n):n},r=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){i.error(e)}}},5477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Logger});const i=window.navigationStart||Date.now();var s;!function(e){e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG"}(s||(s={}));class Logger{constructor(e){this.timers={},this.handlers={[s.DEBUG]:console.debug,[s.INFO]:console.info,[s.WARN]:console.warn,[s.ERROR]:console.error};const t=e.split(new RegExp("/|\\\\"));this.prefix="["+t[t.length-1].replace(".js","")+"]"}message(e){if(Logger.level>=e&&console){return(this.handlers[e]?this.handlers[e]:console.log).bind(console,this.getPrefix())}return()=>{}}get debug(){return this.message(s.DEBUG)}get debugWarn(){return this.message(Logger.level>=s.DEBUG?s.WARN:s.DEBUG)}get info(){return this.message(s.INFO)}get warn(){return this.message(s.WARN)}get error(){return this.message(s.ERROR)}time(e){Logger.level>=s.DEBUG&&(this.timers[e]=Date.now())}timeEnd(e){if(Logger.level>=s.DEBUG){const t=this.timers[e];if(!t)return;const n=(Date.now()-t)/1e3;this.debug(e,n+"s")}}getPrefix(){const e=(Date.now()-i)/1e3+"s";return`${this.prefix} ${e}`}}Logger.level=s.INFO},73957:(e,t,n)=>{"use strict";function i(e){const t={};for(const n in e)t[e[n]]=n;return t}function s(e,t){if(null!==e&&"object"==typeof e)for(const n in e)t(e[n],n,e),s(e[n],t)}n.d(t,{S:()=>i,y:()=>s})},89142:(e,t,n)=>{"use strict";function i(e=11){let t="";const n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function s(e,t){return function(e,t){return(e%t+t)%t}(r(e),t)}function r(e){let t,n=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i),n=(n<<5)-n+t,n|=0;return n}n.d(t,{fV:()=>i,Wm:()=>s,un:()=>r})},36507:(e,t,n)=>{"use strict";n.d(t,{m5:()=>r,an:()=>o});const i="referrer";let s="";function r(e){let t;try{t=new URL(e)}catch(t){return e}return t.searchParams.set(i,o()),t.href}function o(){return(function(){if(!window.document.referrer)return!1;let e;try{e=new URL(window.document.referrer)}catch(e){return!1}return e.origin===window.location.origin}()?function(){const e=new URL(window.location.href);if(!e.searchParams.has(i))return s;const t=e.searchParams.get(i)||"";try{new URL(t),s=t}catch(e){}return e.searchParams.delete(i),window.history.replaceState(null,"",e.href),s}():"")||window.document.referrer}},44450:(e,t,n)=>{"use strict";n.d(t,{g_:()=>s,i5:()=>r,T8:()=>h,kp:()=>g});var i=n(91183);var s,r;!function(e){e[e.RESIZE=1]="RESIZE",e[e.ORIENTATION_CHANGED=2]="ORIENTATION_CHANGED"}(s||(s={})),function(e){e[e.PORTRAIT=1]="PORTRAIT",e[e.LANDSCAPE=2]="LANDSCAPE"}(r||(r={}));let o=[],a=[];const l=window.visualViewport,c=()=>({w:l?l.width:window.innerWidth,h:l?l.height:window.innerHeight}),d=c(),u=new i.ne((()=>d),(e=>o.push(e)),(e=>{o=o.filter((t=>t!==e))})),h=()=>({orientation:window.innerWidth>window.innerHeight?r.LANDSCAPE:r.PORTRAIT});let p=h();const m=new i.ne((()=>p),(e=>a.push(e)),(e=>{a=a.filter((t=>t!==e))}));function g(e,t){switch(e){case s.RESIZE:return u.createSubscription(t);case s.ORIENTATION_CHANGED:return m.createSubscription(t)}}const f=(()=>{let e,t;return()=>{const n=c(),i=()=>{window.clearInterval(e),window.clearTimeout(t)};i();const s=()=>{d.w===n.w&&d.h===n.h||(d.w=n.w,d.h=n.h,(()=>{if(o.length>0&&o.forEach((e=>e(d))),a.length>0){const e=h();e!==p&&(p=e,a.forEach((t=>t(e))))}})())};e=window.setInterval(s,100),t=window.setTimeout(i,1e3),s()}})();l?l.addEventListener("resize",f):window.addEventListener("resize",f)},16752:(e,t,n)=>{"use strict";var i;n.d(t,{o:()=>i}),function(e){function t(e){return e.split(".").reduce(((e,t)=>{const n=parseInt(t,10);return isNaN(n)||e.push(n),e}),[])}function n(e,n){const i=t(e),s=t(n);for(let e=0;e<i.length;e++){if(e>=s.length)return 1;if(i[e]!==s[e])return i[e]>s[e]?1:-1}return s.length>i.length?-1:0}e.parse=t,e.gt=function(e,t){return 1===n(e,t)},e.gte=function(e,t){const i=n(e,t);return 0===i||1===i},e.lt=function(e,t){return-1===n(e,t)},e.eq=function(e,t){return 0===n(e,t)},e.compare=n}(i||(i={}))},89034:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var i=n(84428);const s=new(n(5477).Z)("texture"),r=(e,t,n)=>{const r=new i.TextureLoader;return r.crossOrigin="anonymous",r.load(e,t,void 0,(t=>{s.error(`Failed to load ${e}`),n&&n(t)}))}},37796:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});const i=(e,t)=>{let n,i=Date.now()-t;return(...s)=>{const r=Date.now()-i,o=()=>{e.apply(null,s),i=Date.now()};if(n&&clearTimeout(n),r>=t)o();else{const e=t-r;n=window.setTimeout(o,e)}}}},14909:(e,t,n)=>{"use strict";n.d(t,{sU:()=>s,bf:()=>r,QY:()=>o,yx:()=>a,mM:()=>l,KK:()=>c,rI:()=>d,on:()=>u});var i=n(8575);const s=function(e="",t){let n,s,r;if(e.match(/^https?/)){const t=(0,i.Qc)(e);n=t.protocol+"//"+t.host,s=e,r=e.match(/[^/]*$/)[0]}else{if(t.match(/^https?/)){const e=(0,i.Qc)(t);n=e.protocol+"//"+e.host}else n=window.location.protocol+"//"+t;s=n+"/api/player/models/"+e,r=e}return{sid:r,urlBase:n,urlModel:s,urlFiles:s+(s.match(/\/$/)?"files":"/files"),urlThumb:s+(s.match(/\/$/)?"thumb":"/thumb")}},r=function(e,t={}){for(const n in t){const i=t[n];e+=(-1===e.indexOf("?")?"?":"&")+`${n}=${i}`}return e},o=e=>e.replace(/^https?:\/\/(?:www.)?/i,"").replace(/\/(.*)/,""),a=[/^([a-z0-9\-]*\.)*matterport\.com$/,/^([a-z0-9\-]*\.)*matterportvr\.cn$/,/^localhost$/];function l(e){const t=new URL(e).hostname;for(const e of a)if(t.match(e))return!0;return!1}const c=e=>{if(l(e)){return new URL(e).origin}return null};function d(e=window.location.href){let t=e;return l(t)&&(t=t.replace(/\/work\/(\?.*)?$/,"/show/$1")),new URL(t)}function u(e){["q","qK","tag","note","comment","pin-pos"].forEach((t=>e.delete(t)))}},87100:(e,t,n)=>{"use strict";n.d(t,{FU:()=>i,kD:()=>s,eY:()=>r});n(1939);function i(){const e=new URLSearchParams(window.location.search),t={};return e.forEach(((e,n)=>{t[n]=e})),t}function s(){const e=new URLSearchParams(window.location.search);return new URLSearchParams(e.toString())}function r(e,t=null){const n=new URLSearchParams(window.location.search).get(e),i=typeof t;return null===n?t:"boolean"===i?"true"===n||"1"===n:"number"===i?+n:n}},83535:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});const i=[];for(let e=0;e<256;e++)i[e]=(e<16?"0":"")+e.toString(16);function s(){let e;const t=window.crypto||window.msCrypto;return e=t?t.getRandomValues(new Uint8Array(16)):new Uint8Array(16).map((()=>255*Math.random())),e[6]=15&e[6]|64,e[8]=63&e[8]|128,i[e[0]]+i[e[1]]+i[e[2]]+i[e[3]]+"-"+i[e[4]]+i[e[5]]+"-"+i[e[6]]+i[e[7]]+"-"+i[e[8]]+i[e[9]]+"-"+i[e[10]]+i[e[11]]+i[e[12]]+i[e[13]]+i[e[14]]+i[e[15]]}},30581:(e,t,n)=>{"use strict";n.d(t,{y:()=>rt});const i=Symbol("analytics"),s=Symbol("annotations"),r=Symbol("apiv2"),o=Symbol("app-phase"),a=Symbol("attachments"),l=Symbol("automation-support"),c=Symbol("blur-data"),d=Symbol("blur-editor"),u=Symbol("blur-suggestions"),h=Symbol("camera"),p=Symbol("camera-start"),m=Symbol("canvas"),g=Symbol("controls-common"),f=Symbol("controls-dh"),v=Symbol("controls-fp"),b=Symbol("controls-inside"),y=Symbol("controls-zoom"),S=Symbol("current-pano"),E=Symbol("cursor-controller"),T=Symbol("cursors"),O=Symbol("cursor-mesh"),_=Symbol("deep-links"),A=Symbol("raycast-fat"),w=Symbol("floors"),N=Symbol("floors-state"),P=Symbol("raycast-floor"),I=Symbol("gui"),k=Symbol("input"),C=Symbol("interaction"),L=Symbol("label-data"),M=Symbol("label-render"),D=Symbol("layers"),R=Symbol("layers-tool"),x=Symbol("lines"),j=Symbol("locale"),U=Symbol("login-redirect"),H=Symbol("mattertag-data"),F=Symbol("mattertag-view"),B=Symbol("mattertag-mesh"),V=Symbol("measurement-mode"),G=Symbol("mesh-query"),W=Symbol("mesh-api-fixup"),z=Symbol("mesh-trim-data"),K=Symbol("mesh-trim-editor-module"),Y=Symbol("model-data"),q=Symbol("model-mesh"),$=Symbol("model-rating"),Z=Symbol("mouse"),Q=Symbol("navigation"),X=Symbol("notes"),J=Symbol("object-tag-suggestions"),ee=Symbol("object-tag-suggestions-data"),te=Symbol("ordered-lists"),ne=Symbol("orthographic-controls"),ie=Symbol("pins"),se=Symbol("plugin"),re=Symbol("pre-renderer"),oe=Symbol("raycaster"),ae=Symbol("rtt"),le=Symbol("rooms"),ce=Symbol("scan-info"),de=Symbol("scene"),ue=Symbol("scheduler"),he=Symbol("screenshots"),pe=Symbol("sdk"),me=Symbol("search"),ge=Symbol("sensors"),fe=Symbol("ses"),ve=Symbol("settings"),be=Symbol("skybox"),ye=Symbol("snapshots-editor"),Se=Symbol("snapshots-data"),Ee=Symbol("storage"),Te=Symbol("sweep-data"),Oe=Symbol("pano"),_e=Symbol("pucks"),Ae=Symbol("path"),we=Symbol("sweep-pin-mesh"),Ne=Symbol("sweep-pin"),Pe=Symbol("portal"),Ie=Symbol("portal-nav"),ke=Symbol("sweep-viewdata"),Ce=Symbol("tags"),Le=Symbol("tours-controls"),Me=Symbol("tours-data"),De=Symbol("tools"),Re=Symbol("transform-gizmo"),xe=Symbol("trash"),je=Symbol("users"),Ue=Symbol("mode-change"),He=Symbol("mode"),Fe=Symbol("video"),Be=Symbol("vision-catalog"),Ve=Symbol("webgl-renderer"),Ge=(Symbol("webvr"),Symbol("webxr")),We=Symbol("dwell-analytics"),ze=Symbol("model-mesh-quality"),Ke=Symbol("quick-menus"),Ye=Symbol("show-analytics"),qe=Symbol("hotkeys-sc"),$e=Symbol("password"),Ze=Symbol("showcase-settings"),Qe=Symbol("showcase-start"),Xe=Symbol("showcase-webgl-context-loss"),Je=Symbol("analytics-ws"),et=Symbol("app-switch"),tt=Symbol("cloud-control"),nt=Symbol("error-ui"),it=Symbol("view-ui"),st=Symbol("edit-ui"),rt={ANALYTICS:i,ANALYTICS_WORKSHOP:Je,ANNOTATIONS:s,API:r,APP_SWITCH:et,APP_PHASE:o,ATTACHMENTS:a,AUTOMATION_SUPPORT:l,BLUR_DATA:c,BLUR_EDITOR:d,BLUR_SUGGESTIONS:u,CAMERA:h,CAMERA_START:p,CANVAS:m,CLOUD_CONTROL:tt,CONTROLS_INSIDE:b,CONTROLS_DOLLHOUSE:f,CONTROLS_FLOORPLAN:v,CONTROLS_COMMON:g,CONTROLS_ZOOM:y,CURRENT_PANO_MARKER:S,CURSOR_CONTROLLER:E,CURSORS:T,CURSOR_MESH:O,DEEP_LINKS:_,DWELL_ANALYTICS:We,ERROR_UI:nt,FAT_RAYCAST:A,FLOORS:w,FLOORS_VIEWDATA:N,FLOOR_RAYCAST:P,GUI:I,INPUT:k,INTERACTION_MODE:C,LOADING_GUI:Symbol("init-ui"),LOCALE:j,LOGIN_REDIRECT:U,LABEL_DATA:L,LABEL_RENDERER:M,LAYERS:D,LAYERS_TOOL:R,LINES:x,MATTERTAG_DATA:H,MATTERTAG_VIEWDATA:F,MATTERTAG_MESH:B,MEASUREMENT_MODE:V,MESH_API_FIXUP:W,MESH_QUERY:G,MESH_TRIM_DATA:z,MESH_TRIM_EDITOR:K,MODEL_DATA:Y,MODEL_MESH:q,MODEL_MESH_QUALITY:ze,MODEL_RATING:$,MOUSE_CURSOR:Z,NAVIGATION:Q,NOTES:X,OBJECT_TAG_SUGGESTIONS:J,OBJECT_TAG_SUGGESTIONS_DATA:ee,ORDERED_LISTS:te,ORTHOGRAPHIC_CONTROLS:ne,PINS:ie,PLUGIN:se,PRE_RENDER:re,QUICK_MENUS:Ke,RAYCASTER:oe,RENDER_TO_TEXTURE:ae,ROOMS:le,SCAN_INFO:ce,SCENE:de,SCHEDULER:ue,SCREENSHOTS:he,SDK:pe,SEARCH:me,SENSORS:ge,SES:fe,SETTINGS:ve,SKYBOX:be,SHOWCASE_ANALYTICS:Ye,SHOWCASE_GUI:it,SHOWCASE_HOTKEYS:qe,SHOWCASE_PASSWORD:$e,SHOWCASE_START:Qe,SHOWCASE_SETTINGS:Ze,SHOWCASE_WEBGL_CONTEXT_LOSS:Xe,SNAPSHOTS_DATA:Se,SNAPSHOTS_EDITOR:ye,STORAGE:Ee,SWEEP_DATA:Te,SWEEP_PANO:Oe,SWEEP_PATH:Ae,SWEEP_PIN:we,SWEEP_PIN_NAVIGATION:Ne,SWEEP_PORTAL:Pe,SWEEP_PORTAL_NAVIGATION:Ie,SWEEP_PUCKS:_e,SWEEP_VIEWDATA:ke,TAGS:Ce,TOOLS:De,TOUR_CONTROLS:Le,TOUR_DATA:Me,TRANSFORM_GIZMO:Re,TRASH:xe,USERS:je,VIEWMODE_CHANGE:Ue,VIEWMODE:He,VIDEO_RECORDER:Fe,VISION_CATALOG:Be,WEBGL_RENDERER:Ve,WEBXR:Ge,WORKSHOP_GUI:st}},14877:(e,t,n)=>{"use strict";n.d(t,{y:()=>o.y,m:()=>ModuleLoader});var i=n(31013);const s=new(n(5477).Z)("module-loader");var r;!function(e){e[e.Registered=0]="Registered",e[e.Loading=1]="Loading",e[e.Initialized=2]="Initialized",e[e.Unloaded=3]="Unloaded"}(r||(r={}));class ModuleLoader{constructor(){this.symbolMap=new Map}registerModule(e,t){if(this.symbolMap.has(e))throw Error(`Type ${String(e)} already registered`);this.symbolMap.set(e,{es6ModulePromise:t,ctorPromise:new i.Q,initPromise:new i.Q,state:r.Registered})}moduleRegistered(e){return this.symbolMap.has(e)}moduleLoaded(e){const t=this.symbolMap.get(e);return!!t&&![r.Registered,r.Unloaded].includes(t.state)}getModule(e){const t=this.symbolMap.get(e);if(!t)throw Error(`Trying to get ${String(e)} before it was registered!`);if(t.state===r.Unloaded)throw Error(`${String(e)} module unloaded`);return t.initPromise.nativePromise()}getModuleSync(e){const t=this.symbolMap.get(e);return t?t.state!==r.Initialized?null:t.module:null}loadModule(e,t,n={}){const i=this.symbolMap.get(t);if(!i)throw Error(`${String(t)} not found`);if(i.state===r.Initialized)return i;if(i.state!==r.Registered&&i.state!==r.Unloaded)throw Error(`${String(t)} already loading`);i.state=r.Loading;const o=String(t);return i.es6ModulePromise(o).then((o=>{if(!o.default)throw new Error(`${String(t)} has no default export during module loading`);const a=new o.default;i.ctorPromise.resolve(a).then((()=>{const t=Date.now();let o=!1;setTimeout((()=>{o||s.debug(`${a.name} init took over 2 seconds`)}),2e3),a.init(n,e).then((()=>{s.debug(`${a.name} init took ${(Date.now()-t)/1e3} secs.`),o=!0,i.state=r.Initialized,i.module=a,i.initPromise.resolve(a)})).catch((e=>{i.initPromise.reject(e)}))}))})).catch((e=>{s.error(`Failed to load es6Module for ${String(t)}: ${e}`),i.initPromise.reject(e)})),i}whenQueueEmpties(){const e=[];for(const[,t]of this.symbolMap)t.state===r.Loading&&e.push(t.initPromise);return i.Q.all(e).nativePromise()}unloadModule(e){const t=this.symbolMap.get(e);if(!t)throw Error("Attempting to unload unregistered module");if(t.state===r.Unloaded||t.state===r.Registered)throw Error("Attempting to unload not-loaded module");t.state=r.Unloaded,t.ctorPromise=new i.Q,t.initPromise=new i.Q,t.module=void 0}}var o=n(30581)},38636:(e,t,n)=>{"use strict";function i(e={},t){return t.split(".").reduce(((e,t)=>e&&e[t]),e)}n.d(t,{q:()=>i})},1154:(e,t,n)=>{"use strict";n.d(t,{M:()=>DynamicLibLoader});class DynamicLibLoader{constructor(){this.libraryCache=new Map}load(e,t){const n=this.libraryCache.get(e)||new ScriptFetcher(e,t);return this.libraryCache.set(e,n),n.library}}class ScriptFetcher{constructor(e,t){this._libraryPromise=new Promise(((e,t)=>{this.libraryResolver=e,this.libraryRejecter=t})),this.fetch(e,t)}async fetch(e,t){let n;try{const t=new Request(e),i=new URL(t.url);if(!i.hostname.endsWith(window.location.hostname)&&!i.host.endsWith("matterport.com")&&!i.host.endsWith("matterportvr.cn"))return void this.libraryRejecter(`Request made for ${i.href} does not have the same origin as the request origin ${window.location.origin}`);n=await fetch(new Request(e,{}))}catch(e){return void this.libraryRejecter(e)}if(!n.ok)return void this.libraryRejecter("Script not found.");const i={},s=await n.text();if(new Function(s).call(i),t&&t in window){const e=window[t]||{};Object.assign(i,e),delete window[t]}this.libraryResolver(i)}get library(){return this._libraryPromise}}},73996:(e,t,n)=>{"use strict";var i;n.d(t,{f:()=>s}),function(e){e.i360="360",e.AddLink="add-link",e.Arrows="arrows",e.Attach="attach",e.Back="back",e.Blocked="blocked",e.BlurOutline="blur-outline",e.BrushOutline="brush-outline",e.Checkmark="checkmark",e.ChevronLeft="chevron-left",e.ChevronRight="chevron-right",e.Close="close",e.CommentLarge="comment-large",e.CommentOutline="comment-outline",e.Comment="comment",e.Delete="delete",e.Dock="dock",e.Dollhouse="dollhouse",e.Download="download",e.DpadDown="dpad-down",e.DpadLeft="dpad-left",e.DpadRight="dpad-right",e.DpadUp="dpad-up",e.DragEdit="drag-edit",e.DrawLines="draw-lines",e.Email="email",e.Error="error",e.EscapeKey="escape-key",e.Expand="expand",e.ExtLink="ext-link",e.EyeHide="eye-hide",e.EyeShow="eye-show",e.Facebook="facebook",e.File="file",e.FingerDrag="finger-drag",e.FloorControlsAll="floor-controls-all",e.FloorControls="floor-controls",e.Floorplan="floorplan",e.FullscreenExit="fullscreen-exit",e.Fullscreen="fullscreen",e.Fullscreen2="fullscreen2",e.Help="help",e.HlrBadge="hlr-badge",e.Hlr="hlr",e.Info="info",e.Keyboard="keyboard",e.Layers="layers",e.Link="link",e.Linkedin="linkedin",e.List="list",e.Location="location",e.MagnifyingGlass="magnifying-glass",e.MediaMix="media-mix",e.MeshTrim="mesh-trim",e.Mesh="mesh",e.Minus="minus",e.MoreVert="more-vert",e.Notes="notes",e.PanoramaDisable="panorama-disable",e.Panorama="panorama",e.PaperClip="paper-clip",e.PauseOutline="pause-outline",e.Pause="pause",e.Photo_2d="photo-2d",e.Photo_360="photo-360",e.PhotoAdd="photo-add",e.Pin="pin",e.Pinterest="pinterest",e.PlayUnicode="play-unicode",e.Play="play",e.Plus="plus",e.Position_3d="position-3d",e.PressHold="press-hold",e.PublicBuildingsApartment="public_buildings_apartment",e.PublicBuildingsArchway="public_buildings_archway",e.PublicBuildingsBuildingCircleArrowRight="public_buildings_building-circle-arrow-right",e.PublicBuildingsBuildingCircleCheck="public_buildings_building-circle-check",e.PublicBuildingsBuildingCircleExclamation="public_buildings_building-circle-exclamation",e.PublicBuildingsBuildingCircleXmark="public_buildings_building-circle-xmark",e.PublicBuildingsBuildingColumns="public_buildings_building-columns",e.PublicBuildingsBuildingFlag="public_buildings_building-flag",e.PublicBuildingsBuildingLock="public_buildings_building-lock",e.PublicBuildingsBuildingShield="public_buildings_building-shield",e.PublicBuildingsBuildingUser="public_buildings_building-user",e.PublicBuildingsBuildingWheat="public_buildings_building-wheat",e.PublicBuildingsBuilding="public_buildings_building",e.PublicBuildingsBuildings="public_buildings_buildings",e.PublicBuildingsCabin="public_buildings_cabin",e.PublicBuildingsCampground="public_buildings_campground",e.PublicBuildingsCarBuilding="public_buildings_car-building",e.PublicBuildingsCastle="public_buildings_castle",e.PublicBuildingsChimney="public_buildings_chimney",e.PublicBuildingsChurch="public_buildings_church",e.PublicBuildingsCity="public_buildings_city",e.PublicBuildingsFarm="public_buildings_farm",e.PublicBuildingsFence="public_buildings_fence",e.PublicBuildingsFerrisWheel="public_buildings_ferris-wheel",e.PublicBuildingsFort="public_buildings_fort",e.PublicBuildingsGarage="public_buildings_garage",e.PublicBuildingsHospital="public_buildings_hospital",e.PublicBuildingsHotel="public_buildings_hotel",e.PublicBuildingsHouseBuilding="public_buildings_house-building",e.PublicBuildingsHouseCrack="public_buildings_house-crack",e.PublicBuildingsHouseDay="public_buildings_house-day",e.PublicBuildingsHouseFire="public_buildings_house-fire",e.PublicBuildingsHouseFlag="public_buildings_house-flag",e.PublicBuildingsHouseFloodWater="public_buildings_house-flood-water",e.PublicBuildingsHouseHeart="public_buildings_house-heart",e.PublicBuildingsHouseLock="public_buildings_house-lock",e.PublicBuildingsHouseMedical="public_buildings_house-medical",e.PublicBuildingsHouseNight="public_buildings_house-night",e.PublicBuildingsHouse="public_buildings_house",e.PublicBuildingsIndustry="public_buildings_industry",e.PublicBuildingsLandmark="public_buildings_landmark",e.PublicBuildingsMonument="public_buildings_monument",e.PublicBuildingsMosque="public_buildings_mosque",e.PublicBuildingsMountainCity="public_buildings_mountain-city",e.PublicBuildingsPlaceOfWorship="public_buildings_place-of-worship",e.PublicBuildingsRollerCoaster="public_buildings_roller-coaster",e.PublicBuildingsSchool="public_buildings_school",e.PublicBuildingsStore="public_buildings_store",e.PublicBuildingsSynagogue="public_buildings_synagogue",e.PublicBuildingsTent="public_buildings_tent",e.PublicBuildingsToilet="public_buildings_toilet",e.PublicBuildingsToriiGate="public_buildings_torii-gate",e.PublicBuildingsTowerObservation="public_buildings_tower-observation",e.PublicBuildingsTree="public_buildings_tree",e.PublicBuildingsWarehouse="public_buildings_warehouse",e.PublicCharacters_0="public_characters_0",e.PublicCharacters_1="public_characters_1",e.PublicCharacters_2="public_characters_2",e.PublicCharacters_3="public_characters_3",e.PublicCharacters_4="public_characters_4",e.PublicCharacters_5="public_characters_5",e.PublicCharacters_6="public_characters_6",e.PublicCharacters_7="public_characters_7",e.PublicCharacters_8="public_characters_8",e.PublicCharacters_9="public_characters_9",e.PublicCharactersA="public_characters_a",e.PublicCharactersB="public_characters_b",e.PublicCharactersC="public_characters_c",e.PublicCharactersCircle_0="public_characters_circle-0",e.PublicCharactersCircle_1="public_characters_circle-1",e.PublicCharactersCircle_2="public_characters_circle-2",e.PublicCharactersCircle_3="public_characters_circle-3",e.PublicCharactersCircle_4="public_characters_circle-4",e.PublicCharactersCircle_5="public_characters_circle-5",e.PublicCharactersCircle_6="public_characters_circle-6",e.PublicCharactersCircle_7="public_characters_circle-7",e.PublicCharactersCircle_8="public_characters_circle-8",e.PublicCharactersCircle_9="public_characters_circle-9",e.PublicCharactersCircleA="public_characters_circle-a",e.PublicCharactersCircleB="public_characters_circle-b",e.PublicCharactersCircleC="public_characters_circle-c",e.PublicCharactersCircleD="public_characters_circle-d",e.PublicCharactersCircleE="public_characters_circle-e",e.PublicCharactersCircleF="public_characters_circle-f",e.PublicCharactersCircleG="public_characters_circle-g",e.PublicCharactersCircleH="public_characters_circle-h",e.PublicCharactersCircleI="public_characters_circle-i",e.PublicCharactersCircleJ="public_characters_circle-j",e.PublicCharactersCircleK="public_characters_circle-k",e.PublicCharactersCircleL="public_characters_circle-l",e.PublicCharactersCircleM="public_characters_circle-m",e.PublicCharactersCircleN="public_characters_circle-n",e.PublicCharactersCircleO="public_characters_circle-o",e.PublicCharactersCircleP="public_characters_circle-p",e.PublicCharactersCircleQ="public_characters_circle-q",e.PublicCharactersCircleR="public_characters_circle-r",e.PublicCharactersCircleS="public_characters_circle-s",e.PublicCharactersCircleT="public_characters_circle-t",e.PublicCharactersCircleU="public_characters_circle-u",e.PublicCharactersCircleV="public_characters_circle-v",e.PublicCharactersCircleW="public_characters_circle-w",e.PublicCharactersCircleX="public_characters_circle-x",e.PublicCharactersCircleY="public_characters_circle-y",e.PublicCharactersCircleZ="public_characters_circle-z",e.PublicCharactersD="public_characters_d",e.PublicCharactersE="public_characters_e",e.PublicCharactersF="public_characters_f",e.PublicCharactersG="public_characters_g",e.PublicCharactersH="public_characters_h",e.PublicCharactersI="public_characters_i",e.PublicCharactersJ="public_characters_j",e.PublicCharactersK="public_characters_k",e.PublicCharactersL="public_characters_l",e.PublicCharactersM="public_characters_m",e.PublicCharactersN="public_characters_n",e.PublicCharactersO="public_characters_o",e.PublicCharactersP="public_characters_p",e.PublicCharactersQ="public_characters_q",e.PublicCharactersR="public_characters_r",e.PublicCharactersS="public_characters_s",e.PublicCharactersSquare_0="public_characters_square-0",e.PublicCharactersSquare_1="public_characters_square-1",e.PublicCharactersSquare_2="public_characters_square-2",e.PublicCharactersSquare_3="public_characters_square-3",e.PublicCharactersSquare_4="public_characters_square-4",e.PublicCharactersSquare_5="public_characters_square-5",e.PublicCharactersSquare_6="public_characters_square-6",e.PublicCharactersSquare_7="public_characters_square-7",e.PublicCharactersSquare_8="public_characters_square-8",e.PublicCharactersSquare_9="public_characters_square-9",e.PublicCharactersSquareA="public_characters_square-a",e.PublicCharactersSquareB="public_characters_square-b",e.PublicCharactersSquareC="public_characters_square-c",e.PublicCharactersSquareD="public_characters_square-d",e.PublicCharactersSquareE="public_characters_square-e",e.PublicCharactersSquareF="public_characters_square-f",e.PublicCharactersSquareG="public_characters_square-g",e.PublicCharactersSquareH="public_characters_square-h",e.PublicCharactersSquareI="public_characters_square-i",e.PublicCharactersSquareJ="public_characters_square-j",e.PublicCharactersSquareK="public_characters_square-k",e.PublicCharactersSquareL="public_characters_square-l",e.PublicCharactersSquareM="public_characters_square-m",e.PublicCharactersSquareN="public_characters_square-n",e.PublicCharactersSquareO="public_characters_square-o",e.PublicCharactersSquareP="public_characters_square-p",e.PublicCharactersSquareQ="public_characters_square-q",e.PublicCharactersSquareR="public_characters_square-r",e.PublicCharactersSquareS="public_characters_square-s",e.PublicCharactersSquareT="public_characters_square-t",e.PublicCharactersSquareU="public_characters_square-u",e.PublicCharactersSquareV="public_characters_square-v",e.PublicCharactersSquareW="public_characters_square-w",e.PublicCharactersSquareX="public_characters_square-x",e.PublicCharactersSquareXmark="public_characters_square-xmark",e.PublicCharactersSquareY="public_characters_square-y",e.PublicCharactersSquareZ="public_characters_square-z",e.PublicCharactersT="public_characters_t",e.PublicCharactersU="public_characters_u",e.PublicCharactersV="public_characters_v",e.PublicCharactersW="public_characters_w",e.PublicCharactersX="public_characters_x",e.PublicCharactersY="public_characters_y",e.PublicCharactersZ="public_characters_z",e.PublicFurnitureBath="public_furniture_bath",e.PublicFurnitureBedAlt="public_furniture_bed-alt",e.PublicFurnitureBedBunk="public_furniture_bed-bunk",e.PublicFurnitureBedEmpty="public_furniture_bed-empty",e.PublicFurnitureBed="public_furniture_bed",e.PublicFurnitureBlender="public_furniture_blender",e.PublicFurnitureBlinds="public_furniture_blinds",e.PublicFurnitureCabinetFiling="public_furniture_cabinet-filing",e.PublicFurnitureCashRegister="public_furniture_cash-register",e.PublicFurnitureChairOffice="public_furniture_chair-office",e.PublicFurnitureChair="public_furniture_chair",e.PublicFurnitureChargingStation="public_furniture_charging-station",e.PublicFurnitureComputerClassic="public_furniture_computer-classic",e.PublicFurnitureComputerSpeaker="public_furniture_computer-speaker",e.PublicFurnitureCouch="public_furniture_couch",e.PublicFurnitureDryerAlt="public_furniture_dryer-alt",e.PublicFurnitureDryer="public_furniture_dryer",e.PublicFurnitureDumbbell="public_furniture_dumbbell",e.PublicFurnitureDumpster="public_furniture_dumpster",e.PublicFurnitureFaucet="public_furniture_faucet",e.PublicFurnitureFax="public_furniture_fax",e.PublicFurnitureHotTub="public_furniture_hot-tub",e.PublicFurnitureInventory="public_furniture_inventory",e.PublicFurnitureLampDesk="public_furniture_lamp-desk",e.PublicFurnitureLampFloor="public_furniture_lamp-floor",e.PublicFurnitureLamp="public_furniture_lamp",e.PublicFurnitureLaptop="public_furniture_laptop",e.PublicFurnitureLightCeiling="public_furniture_light-ceiling",e.PublicFurnitureLoveseat="public_furniture_loveseat",e.PublicFurnitureMicrowave="public_furniture_microwave",e.PublicFurniturePiano="public_furniture_piano",e.PublicFurniturePodium="public_furniture_podium",e.PublicFurniturePresentation="public_furniture_presentation",e.PublicFurnitureProjector="public_furniture_projector",e.PublicFurnitureRadio="public_furniture_radio",e.PublicFurnitureRefrigerator="public_furniture_refrigerator",e.PublicFurnitureShower="public_furniture_shower",e.PublicFurnitureShredder="public_furniture_shredder",e.PublicFurnitureSink="public_furniture_sink",e.PublicFurnitureSolarPanel="public_furniture_solar-panel",e.PublicFurnitureSpeaker="public_furniture_speaker",e.PublicFurnitureSpeakers="public_furniture_speakers",e.PublicFurnitureToilet="public_furniture_toilet",e.PublicFurnitureTrashAlt="public_furniture_trash-alt",e.PublicFurnitureTurntable="public_furniture_turntable",e.PublicFurnitureTvRetro="public_furniture_tv-retro",e.PublicFurnitureTv="public_furniture_tv",e.PublicFurnitureTypewriter="public_furniture_typewriter",e.PublicObjectsAbacus="public_objects_abacus",e.PublicObjectsAlarmClock="public_objects_alarm-clock",e.PublicObjectsAlbumCollection="public_objects_album-collection",e.PublicObjectsAppleAlt="public_objects_apple-alt",e.PublicObjectsBackpack="public_objects_backpack",e.PublicObjectsBagsShopping="public_objects_bags-shopping",e.PublicObjectsBalanceScale="public_objects_balance-scale",e.PublicObjectsBeer="public_objects_beer",e.PublicObjectsBell="public_objects_bell",e.PublicObjectsBicycle="public_objects_bicycle",e.PublicObjectsBinoculars="public_objects_binoculars",e.PublicObjectsBlanket="public_objects_blanket",e.PublicObjectsBookAlt="public_objects_book-alt",e.PublicObjectsBook="public_objects_book",e.PublicObjectsBooks="public_objects_books",e.PublicObjectsBoot="public_objects_boot",e.PublicObjectsBox="public_objects_box",e.PublicObjectsBoxesAlt="public_objects_boxes-alt",e.PublicObjectsBreadLoaf="public_objects_bread-loaf",e.PublicObjectsBriefcaseMedical="public_objects_briefcase-medical",e.PublicObjectsBriefcase="public_objects_briefcase",e.PublicObjectsBroom="public_objects_broom",e.PublicObjectsBrush="public_objects_brush",e.PublicObjectsBullhorn="public_objects_bullhorn",e.PublicObjectsBurgerSoda="public_objects_burger-soda",e.PublicObjectsCalculator="public_objects_calculator",e.PublicObjectsCalendar="public_objects_calendar",e.PublicObjectsCamera="public_objects_camera",e.PublicObjectsCar="public_objects_car",e.PublicObjectsCarrot="public_objects_carrot",e.PublicObjectsCheeseSwiss="public_objects_cheese-swiss",e.PublicObjectsCheeseburger="public_objects_cheeseburger",e.PublicObjectsChess="public_objects_chess",e.PublicObjectsClipboardCheck="public_objects_clipboard-check",e.PublicObjectsClipboardList="public_objects_clipboard-list",e.PublicObjectsClipboard="public_objects_clipboard",e.PublicObjectsCocktail="public_objects_cocktail",e.PublicObjectsCoffeePot="public_objects_coffee-pot",e.PublicObjectsCoffeeTogo="public_objects_coffee-togo",e.PublicObjectsCoffee="public_objects_coffee",e.PublicObjectsCompass="public_objects_compass",e.PublicObjectsConciergeBell="public_objects_concierge-bell",e.PublicObjectsCookie="public_objects_cookie",e.PublicObjectsCorn="public_objects_corn",e.PublicObjectsCroissant="public_objects_croissant",e.PublicObjectsDice="public_objects_dice",e.PublicObjectsDrumstick="public_objects_drumstick",e.PublicObjectsEgg="public_objects_egg",e.PublicObjectsFish="public_objects_fish",e.PublicObjectsFlask="public_objects_flask",e.PublicObjectsFlowerTulip="public_objects_flower-tulip",e.PublicObjectsGamepad="public_objects_gamepad",e.PublicObjectsGem="public_objects_gem",e.PublicObjectsGift="public_objects_gift",e.PublicObjectsGifts="public_objects_gifts",e.PublicObjectsGlassChampagne="public_objects_glass-champagne",e.PublicObjectsGlassCitrus="public_objects_glass-citrus",e.PublicObjectsGlassMartiniAlt="public_objects_glass-martini-alt",e.PublicObjectsGlassWhiskeyRocks="public_objects_glass-whiskey-rocks",e.PublicObjectsGlass="public_objects_glass",e.PublicObjectsGlasses="public_objects_glasses",e.PublicObjectsGlobeStand="public_objects_globe-stand",e.PublicObjectsGolfBall="public_objects_golf-ball",e.PublicObjectsGraduationCap="public_objects_graduation-cap",e.PublicObjectsGuitar="public_objects_guitar",e.PublicObjectsHamburger="public_objects_hamburger",e.PublicObjectsHammer="public_objects_hammer",e.PublicObjectsHardHat="public_objects_hard-hat",e.PublicObjectsHatChef="public_objects_hat-chef",e.PublicObjectsIceCream="public_objects_ice-cream",e.PublicObjectsIceSkate="public_objects_ice-skate",e.PublicObjectsKey="public_objects_key",e.PublicObjectsKnifeKitchen="public_objects_knife-kitchen",e.PublicObjectsLightbulbOn="public_objects_lightbulb-on",e.PublicObjectsLightbulbSlash="public_objects_lightbulb-slash",e.PublicObjectsLightbulb="public_objects_lightbulb",e.PublicObjectsMagnet="public_objects_magnet",e.PublicObjectsMailbox="public_objects_mailbox",e.PublicObjectsMap="public_objects_map",e.PublicObjectsMeat="public_objects_meat",e.PublicObjectsMedal="public_objects_medal",e.PublicObjectsMedkit="public_objects_medkit",e.PublicObjectsMicrophone="public_objects_microphone",e.PublicObjectsMobile="public_objects_mobile",e.PublicObjectsMoneyBillWave="public_objects_money-bill-wave",e.PublicObjectsMugTea="public_objects_mug-tea",e.PublicObjectsMug="public_objects_mug",e.PublicObjectsNewspaper="public_objects_newspaper",e.PublicObjectsPaintBrush="public_objects_paint-brush",e.PublicObjectsPaintRoller="public_objects_paint-roller",e.PublicObjectsPalette="public_objects_palette",e.PublicObjectsPen="public_objects_pen",e.PublicObjectsPhone="public_objects_phone",e.PublicObjectsPizzaSlice="public_objects_pizza-slice",e.PublicObjectsPumpSoap="public_objects_pump-soap",e.PublicObjectsRulerTriangle="public_objects_ruler-triangle",e.PublicObjectsRuler="public_objects_ruler",e.PublicObjectsSalad="public_objects_salad",e.PublicObjectsSandwich="public_objects_sandwich",e.PublicObjectsShoppingBag="public_objects_shopping-bag",e.PublicObjectsShoppingBasket="public_objects_shopping-basket",e.PublicObjectsShoppingCart="public_objects_shopping-cart",e.PublicObjectsShovel="public_objects_shovel",e.PublicObjectsSoup="public_objects_soup",e.PublicObjectsSteak="public_objects_steak",e.PublicObjectsSunglasses="public_objects_sunglasses",e.PublicObjectsToiletPaperAlt="public_objects_toilet-paper-alt",e.PublicObjectsTrashAlt="public_objects_trash-alt",e.PublicObjectsTshirt="public_objects_tshirt",e.PublicObjectsTurkey="public_objects_turkey",e.PublicObjectsUtensilsAlt="public_objects_utensils-alt",e.PublicObjectsUtensils="public_objects_utensils",e.PublicObjectsVial="public_objects_vial",e.PublicObjectsWallet="public_objects_wallet",e.PublicObjectsWrench="public_objects_wrench",e.PublicPeopleBaby="public_people_baby",e.PublicPeopleChildDress="public_people_child-dress",e.PublicPeopleChildReaching="public_people_child-reaching",e.PublicPeopleChild="public_people_child",e.PublicPeopleChildren="public_people_children",e.PublicPeopleCircleUser="public_people_circle-user",e.PublicPeopleClipboardUser="public_people_clipboard-user",e.PublicPeopleFaceAngry="public_people_face-angry",e.PublicPeopleFaceAnguished="public_people_face-anguished",e.PublicPeopleFaceAstonished="public_people_face-astonished",e.PublicPeopleFaceBeamHandOverMouth="public_people_face-beam-hand-over-mouth",e.PublicPeopleFaceConfounded="public_people_face-confounded",e.PublicPeopleFaceConfused="public_people_face-confused",e.PublicPeopleFaceDiagonalMouth="public_people_face-diagonal-mouth",e.PublicPeopleFaceDisappointed="public_people_face-disappointed",e.PublicPeopleFaceDizzy="public_people_face-dizzy",e.PublicPeopleFaceExpressionless="public_people_face-expressionless",e.PublicPeopleFaceEyesXmarks="public_people_face-eyes-xmarks",e.PublicPeopleFaceFearful="public_people_face-fearful",e.PublicPeopleFaceFrownSlight="public_people_face-frown-slight",e.PublicPeopleFaceFrown="public_people_face-frown",e.PublicPeopleFaceGlasses="public_people_face-glasses",e.PublicPeopleFaceGrimace="public_people_face-grimace",e.PublicPeopleFaceGrinBeamSweat="public_people_face-grin-beam-sweat",e.PublicPeopleFaceGrinBeam="public_people_face-grin-beam",e.PublicPeopleFaceGrinHearts="public_people_face-grin-hearts",e.PublicPeopleFaceGrinSquintTears="public_people_face-grin-squint-tears",e.PublicPeopleFaceGrinSquint="public_people_face-grin-squint",e.PublicPeopleFaceGrinStars="public_people_face-grin-stars",e.PublicPeopleFaceGrinTears="public_people_face-grin-tears",e.PublicPeopleFaceGrinTongueSquint="public_people_face-grin-tongue-squint",e.PublicPeopleFaceGrinTongueWink="public_people_face-grin-tongue-wink",e.PublicPeopleFaceGrinTongue="public_people_face-grin-tongue",e.PublicPeopleFaceGrinWide="public_people_face-grin-wide",e.PublicPeopleFaceGrinWink="public_people_face-grin-wink",e.PublicPeopleFaceGrin="public_people_face-grin",e.PublicPeopleFaceHandOverMouth="public_people_face-hand-over-mouth",e.PublicPeopleFaceHushed="public_people_face-hushed",e.PublicPeopleFaceIcicles="public_people_face-icicles",e.PublicPeopleFaceKiss="public_people_face-kiss",e.PublicPeopleFaceLaugh="public_people_face-laugh",e.PublicPeopleFaceMask="public_people_face-mask",e.PublicPeopleFaceMehBlank="public_people_face-meh-blank",e.PublicPeopleFaceMeh="public_people_face-meh",e.PublicPeopleFaceMonocle="public_people_face-monocle",e.PublicPeopleFaceNauseated="public_people_face-nauseated",e.PublicPeopleFaceParty="public_people_face-party",e.PublicPeopleFacePensive="public_people_face-pensive",e.PublicPeopleFacePersevering="public_people_face-persevering",e.PublicPeopleFacePleading="public_people_face-pleading",e.PublicPeopleFacePouting="public_people_face-pouting",e.PublicPeopleFaceRaisedEyebrow="public_people_face-raised-eyebrow",e.PublicPeopleFaceRelieved="public_people_face-relieved",e.PublicPeopleFaceRollingEyes="public_people_face-rolling-eyes",e.PublicPeopleFaceSadCry="public_people_face-sad-cry",e.PublicPeopleFaceSadSweat="public_people_face-sad-sweat",e.PublicPeopleFaceSadTear="public_people_face-sad-tear",e.PublicPeopleFaceScream="public_people_face-scream",e.PublicPeopleFaceSleeping="public_people_face-sleeping",e.PublicPeopleFaceSleepy="public_people_face-sleepy",e.PublicPeopleFaceSmileBeam="public_people_face-smile-beam",e.PublicPeopleFaceSmileHalo="public_people_face-smile-halo",e.PublicPeopleFaceSmileHearts="public_people_face-smile-hearts",e.PublicPeopleFaceSmileRelaxed="public_people_face-smile-relaxed",e.PublicPeopleFaceSmileUpsideDown="public_people_face-smile-upside-down",e.PublicPeopleFaceSmileWink="public_people_face-smile-wink",e.PublicPeopleFaceSmile="public_people_face-smile",e.PublicPeopleFaceSmilingHands="public_people_face-smiling-hands",e.PublicPeopleFaceSmirking="public_people_face-smirking",e.PublicPeopleFaceSpiralEyes="public_people_face-spiral-eyes",e.PublicPeopleFaceSunglasses="public_people_face-sunglasses",e.PublicPeopleFaceSurprise="public_people_face-surprise",e.PublicPeopleFaceThermometer="public_people_face-thermometer",e.PublicPeopleFaceThinking="public_people_face-thinking",e.PublicPeopleFaceTired="public_people_face-tired",e.PublicPeopleFaceTissue="public_people_face-tissue",e.PublicPeopleFaceTongueSweat="public_people_face-tongue-sweat",e.PublicPeopleFaceUnamused="public_people_face-unamused",e.PublicPeopleFaceVomit="public_people_face-vomit",e.PublicPeopleFaceWeary="public_people_face-weary",e.PublicPeopleFaceWoozy="public_people_face-woozy",e.PublicPeopleFaceWorried="public_people_face-worried",e.PublicPeopleFaceZipper="public_people_face-zipper",e.PublicPeopleFamilyDress="public_people_family-dress",e.PublicPeopleFamilyPants="public_people_family-pants",e.PublicPeopleFamily="public_people_family",e.PublicPeopleFileUser="public_people_file-user",e.PublicPeopleFolderUser="public_people_folder-user",e.PublicPeopleHeadSideBrain="public_people_head-side-brain",e.PublicPeopleHeadSideCoughSlash="public_people_head-side-cough-slash",e.PublicPeopleHeadSideCough="public_people_head-side-cough",e.PublicPeopleHeadSideGoggles="public_people_head-side-goggles",e.PublicPeopleHeadSideHeadphones="public_people_head-side-headphones",e.PublicPeopleHeadSideHeart="public_people_head-side-heart",e.PublicPeopleHeadSideMask="public_people_head-side-mask",e.PublicPeopleHeadSideMedical="public_people_head-side-medical",e.PublicPeopleHeadSideVirus="public_people_head-side-virus",e.PublicPeopleHeadSide="public_people_head-side",e.PublicPeoplePeopleArrowsLeftRight="public_people_people-arrows-left-right",e.PublicPeoplePeopleCarryBox="public_people_people-carry-box",e.PublicPeoplePeopleDress="public_people_people-dress",e.PublicPeoplePeopleGroup="public_people_people-group",e.PublicPeoplePeopleLine="public_people_people-line",e.PublicPeoplePeoplePants="public_people_people-pants",e.PublicPeoplePeoplePulling="public_people_people-pulling",e.PublicPeoplePeopleRoof="public_people_people-roof",e.PublicPeoplePeople="public_people_people",e.PublicPeoplePersonBiking="public_people_person-biking",e.PublicPeoplePersonBooth="public_people_person-booth",e.PublicPeoplePersonBreastfeeding="public_people_person-breastfeeding",e.PublicPeoplePersonCane="public_people_person-cane",e.PublicPeoplePersonCarryBox="public_people_person-carry-box",e.PublicPeoplePersonChalkboard="public_people_person-chalkboard",e.PublicPeoplePersonCircleCheck="public_people_person-circle-check",e.PublicPeoplePersonCircleExclamation="public_people_person-circle-exclamation",e.PublicPeoplePersonCircleMinus="public_people_person-circle-minus",e.PublicPeoplePersonCirclePlus="public_people_person-circle-plus",e.PublicPeoplePersonCircleQuestion="public_people_person-circle-question",e.PublicPeoplePersonCircleXmark="public_people_person-circle-xmark",e.PublicPeoplePersonDigging="public_people_person-digging",e.PublicPeoplePersonDollyEmpty="public_people_person-dolly-empty",e.PublicPeoplePersonDolly="public_people_person-dolly",e.PublicPeoplePersonDress="public_people_person-dress",e.PublicPeoplePersonDrowning="public_people_person-drowning",e.PublicPeoplePersonFallingBurst="public_people_person-falling-burst",e.PublicPeoplePersonFalling="public_people_person-falling",e.PublicPeoplePersonHalfDress="public_people_person-half-dress",e.PublicPeoplePersonHiking="public_people_person-hiking",e.PublicPeoplePersonMilitaryPointing="public_people_person-military-pointing",e.PublicPeoplePersonMilitaryToPerson="public_people_person-military-to-person",e.PublicPeoplePersonPinball="public_people_person-pinball",e.PublicPeoplePersonPraying="public_people_person-praying",e.PublicPeoplePersonPregnant="public_people_person-pregnant",e.PublicPeoplePersonRunning="public_people_person-running",e.PublicPeoplePersonSeatReclined="public_people_person-seat-reclined",e.PublicPeoplePersonSeat="public_people_person-seat",e.PublicPeoplePersonShelter="public_people_person-shelter",e.PublicPeoplePersonSkating="public_people_person-skating",e.PublicPeoplePersonSkiing="public_people_person-skiing",e.PublicPeoplePersonSwimming="public_people_person-swimming",e.PublicPeoplePersonToDoor="public_people_person-to-door",e.PublicPeoplePersonWalkingLuggage="public_people_person-walking-luggage",e.PublicPeoplePersonWalkingWithCane="public_people_person-walking-with-cane",e.PublicPeoplePersonWalking="public_people_person-walking",e.PublicPeoplePerson="public_people_person",e.PublicPeopleRestroom="public_people_restroom",e.PublicPeopleSquareUser="public_people_square-user",e.PublicPeopleStreetView="public_people_street-view",e.PublicPeopleUserAstronaut="public_people_user-astronaut",e.PublicPeopleUserCheck="public_people_user-check",e.PublicPeopleUserChef="public_people_user-chef",e.PublicPeopleUserClock="public_people_user-clock",e.PublicPeopleUserCowboy="public_people_user-cowboy",e.PublicPeopleUserCrown="public_people_user-crown",e.PublicPeopleUserDoctor="public_people_user-doctor",e.PublicPeopleUserGear="public_people_user-gear",e.PublicPeopleUserGraduate="public_people_user-graduate",e.PublicPeopleUserGroup="public_people_user-group",e.PublicPeopleUserHeadset="public_people_user-headset",e.PublicPeopleUserHelmetSafety="public_people_user-helmet-safety",e.PublicPeopleUserInjured="public_people_user-injured",e.PublicPeopleUserLarge="public_people_user-large",e.PublicPeopleUserLock="public_people_user-lock",e.PublicPeopleUserMinus="public_people_user-minus",e.PublicPeopleUserMusic="public_people_user-music",e.PublicPeopleUserNurse="public_people_user-nurse",e.PublicPeopleUserPen="public_people_user-pen",e.PublicPeopleUserPilot="public_people_user-pilot",e.PublicPeopleUserPlus="public_people_user-plus",e.PublicPeopleUserPolice="public_people_user-police",e.PublicPeopleUserShield="public_people_user-shield",e.PublicPeopleUserSlash="public_people_user-slash",e.PublicPeopleUserUnlock="public_people_user-unlock",e.PublicPeopleUser="public_people_user",e.PublicPeopleUsers="public_people_users",e.PublicPeopleWheelchair="public_people_wheelchair",e.PublicSymbolsArrowAltCircleDown="public_symbols_arrow-alt-circle-down",e.PublicSymbolsArrowAltCircleLeft="public_symbols_arrow-alt-circle-left",e.PublicSymbolsArrowAltCircleRight="public_symbols_arrow-alt-circle-right",e.PublicSymbolsArrowAltCircleUp="public_symbols_arrow-alt-circle-up",e.PublicSymbolsArrowAltDown="public_symbols_arrow-alt-down",e.PublicSymbolsArrowAltLeft="public_symbols_arrow-alt-left",e.PublicSymbolsArrowAltRight="public_symbols_arrow-alt-right",e.PublicSymbolsArrowAltUp="public_symbols_arrow-alt-up",e.PublicSymbolsAward="public_symbols_award",e.PublicSymbolsBadgeCheck="public_symbols_badge-check",e.PublicSymbolsBadgeDollar="public_symbols_badge-dollar",e.PublicSymbolsBadge="public_symbols_badge",e.PublicSymbolsBan="public_symbols_ban",e.PublicSymbolsBell="public_symbols_bell",e.PublicSymbolsBoltSlash="public_symbols_bolt-slash",e.PublicSymbolsBolt="public_symbols_bolt",e.PublicSymbolsBookmark="public_symbols_bookmark",e.PublicSymbolsCheckCircle="public_symbols_check-circle",e.PublicSymbolsCheck="public_symbols_check",e.PublicSymbolsCircle="public_symbols_circle",e.PublicSymbolsClock="public_symbols_clock",e.PublicSymbolsClub="public_symbols_club",e.PublicSymbolsCube="public_symbols_cube",e.PublicSymbolsCubes="public_symbols_cubes",e.PublicSymbolsDeaf="public_symbols_deaf",e.PublicSymbolsDiamond="public_symbols_diamond",e.PublicSymbolsDollarSign="public_symbols_dollar-sign",e.PublicSymbolsExclamationCircle="public_symbols_exclamation-circle",e.PublicSymbolsExclamationSquare="public_symbols_exclamation-square",e.PublicSymbolsExclamationTriangle="public_symbols_exclamation-triangle",e.PublicSymbolsExclamation="public_symbols_exclamation",e.PublicSymbolsEyeSlash="public_symbols_eye-slash",e.PublicSymbolsEye="public_symbols_eye",e.PublicSymbolsFile="public_symbols_file",e.PublicSymbolsFingerprint="public_symbols_fingerprint",e.PublicSymbolsFireAlt="public_symbols_fire-alt",e.PublicSymbolsFlagAlt="public_symbols_flag-alt",e.PublicSymbolsFolder="public_symbols_folder",e.PublicSymbolsGenderless="public_symbols_genderless",e.PublicSymbolsHeart="public_symbols_heart",e.PublicSymbolsHexagon="public_symbols_hexagon",e.PublicSymbolsHourglass="public_symbols_hourglass",e.PublicSymbolsImage="public_symbols_image",e.PublicSymbolsInfoCircle="public_symbols_info-circle",e.PublicSymbolsInfoSquare="public_symbols_info-square",e.PublicSymbolsLayerGroup="public_symbols_layer-group",e.PublicSymbolsLink="public_symbols_link",e.PublicSymbolsLocationArrow="public_symbols_location-arrow",e.PublicSymbolsLockOpen="public_symbols_lock-open",e.PublicSymbolsLock="public_symbols_lock",e.PublicSymbolsMapMarkerAlt="public_symbols_map-marker-alt",e.PublicSymbolsMapMarkerCheck="public_symbols_map-marker-check",e.PublicSymbolsMapMarkerExclamation="public_symbols_map-marker-exclamation",e.PublicSymbolsMapMarkerMinus="public_symbols_map-marker-minus",e.PublicSymbolsMapMarkerPlus="public_symbols_map-marker-plus",e.PublicSymbolsMapMarkerQuestion="public_symbols_map-marker-question",e.PublicSymbolsMapMarkerSmile="public_symbols_map-marker-smile",e.PublicSymbolsMars="public_symbols_mars",e.PublicSymbolsMoon="public_symbols_moon",e.PublicSymbolsOctagon="public_symbols_octagon",e.PublicSymbolsPaperclip="public_symbols_paperclip",e.PublicSymbolsParkingCircle="public_symbols_parking-circle",e.PublicSymbolsParking="public_symbols_parking",e.PublicSymbolsPause="public_symbols_pause",e.PublicSymbolsPlay="public_symbols_play",e.PublicSymbolsQuestionCircle="public_symbols_question-circle",e.PublicSymbolsQuestionSquare="public_symbols_question-square",e.PublicSymbolsQuestion="public_symbols_question",e.PublicSymbolsRecycle="public_symbols_recycle",e.PublicSymbolsRedo="public_symbols_redo",e.PublicSymbolsShapes="public_symbols_shapes",e.PublicSymbolsShield="public_symbols_shield",e.PublicSymbolsSmokingBan="public_symbols_smoking-ban",e.PublicSymbolsSmoking="public_symbols_smoking",e.PublicSymbolsSpade="public_symbols_spade",e.PublicSymbolsSquare="public_symbols_square",e.PublicSymbolsStar="public_symbols_star",e.PublicSymbolsTachometer="public_symbols_tachometer",e.PublicSymbolsTag="public_symbols_tag",e.PublicSymbolsTemperatureDown="public_symbols_temperature-down",e.PublicSymbolsTemperatureFrigid="public_symbols_temperature-frigid",e.PublicSymbolsTemperatureHigh="public_symbols_temperature-high",e.PublicSymbolsTemperatureHot="public_symbols_temperature-hot",e.PublicSymbolsTemperatureLow="public_symbols_temperature-low",e.PublicSymbolsTemperatureUp="public_symbols_temperature-up",e.PublicSymbolsText="public_symbols_text",e.PublicSymbolsThermometerEmpty="public_symbols_thermometer-empty",e.PublicSymbolsThermometerFull="public_symbols_thermometer-full",e.PublicSymbolsThermometerHalf="public_symbols_thermometer-half",e.PublicSymbolsThermometerQuarter="public_symbols_thermometer-quarter",e.PublicSymbolsThermometerThreeQuarters="public_symbols_thermometer-three-quarters",e.PublicSymbolsThumbtack="public_symbols_thumbtack",e.PublicSymbolsTint="public_symbols_tint",e.PublicSymbolsTransgenderAlt="public_symbols_transgender-alt",e.PublicSymbolsTransgender="public_symbols_transgender",e.PublicSymbolsTrashAlt="public_symbols_trash-alt",e.PublicSymbolsTriangle="public_symbols_triangle",e.PublicSymbolsUsdCircle="public_symbols_usd-circle",e.PublicSymbolsUsdSquare="public_symbols_usd-square",e.PublicSymbolsVenusMars="public_symbols_venus-mars",e.PublicSymbolsVenus="public_symbols_venus",e.PublicSymbolsVideo="public_symbols_video",e.PublicSymbolsVolumeDown="public_symbols_volume-down",e.PublicSymbolsVolumeMute="public_symbols_volume-mute",e.PublicSymbolsVolumeOff="public_symbols_volume-off",e.PublicSymbolsVolumeSlash="public_symbols_volume-slash",e.PublicSymbolsVolumeUp="public_symbols_volume-up",e.PublicSymbolsVolume="public_symbols_volume",e.PublicSymbolsWater="public_symbols_water",e.PublicSymbolsWaveform="public_symbols_waveform",e.PublicSymbolsWifiSlash="public_symbols_wifi-slash",e.PublicSymbolsWifi="public_symbols_wifi",e.PublicSymbolsYenSign="public_symbols_yen-sign",e.Question="question",e.Reorder="reorder",e.Reply="reply",e.Restart="restart",e.Revert="revert",e.RotateLeft="rotate-left",e.RotateRight="rotate-right",e.Rotate="rotate",e.Rotation_3d="rotation-3d",e.Scale_3d="scale-3d",e.Settings="settings",e.Share="share",e.Share2="share2",e.SimpleTagPin="simple-tag-pin",e.SimpleTagSmall="simple-tag-small",e.SimpleTag="simple-tag",e.Snap="snap",e.StartLocation="start-location",e.StemHeight="stem-height",e.TapeMeasure="tape-measure",e.TogglePencil="toggle-pencil",e.Toolbar_360View="toolbar-360-view",e.ToolbarEditVr="toolbar-edit-vr",e.ToolbarHlr="toolbar-hlr",e.ToolbarLabels="toolbar-labels",e.ToolbarMattertags="toolbar-mattertags",e.ToolbarMeasurements="toolbar-measurements",e.ToolbarMoreHoriz="toolbar-more-horiz",e.ToolbarPhotos="toolbar-photos",e.ToolbarScanMgmt="toolbar-scan-mgmt",e.ToolbarStartLocation="toolbar-start-location",e.Transitions="transitions",e.TrimKeep="trim-keep",e.TrimRemove="trim-remove",e.Twitter="twitter",e.User="user",e.Vr="vr",e.ZoomReset="zoom-reset"}(i||(i={}));const s={[i.i360]:"61697",[i.AddLink]:"61698",[i.Arrows]:"61699",[i.Attach]:"61700",[i.Back]:"61701",[i.Blocked]:"61702",[i.BlurOutline]:"61703",[i.BrushOutline]:"61704",[i.Checkmark]:"61705",[i.ChevronLeft]:"61706",[i.ChevronRight]:"61707",[i.Close]:"61708",[i.CommentLarge]:"57344",[i.CommentOutline]:"61709",[i.Comment]:"61710",[i.Delete]:"61711",[i.Dock]:"61712",[i.Dollhouse]:"61713",[i.Download]:"61714",[i.DpadDown]:"61715",[i.DpadLeft]:"61716",[i.DpadRight]:"61717",[i.DpadUp]:"61718",[i.DragEdit]:"61719",[i.DrawLines]:"61720",[i.Email]:"61721",[i.Error]:"61722",[i.EscapeKey]:"61723",[i.Expand]:"61724",[i.ExtLink]:"61725",[i.EyeHide]:"61726",[i.EyeShow]:"61727",[i.Facebook]:"61728",[i.File]:"61729",[i.FingerDrag]:"61730",[i.FloorControlsAll]:"61731",[i.FloorControls]:"61732",[i.Floorplan]:"61733",[i.FullscreenExit]:"61734",[i.Fullscreen]:"61735",[i.Fullscreen2]:"61736",[i.Help]:"61737",[i.HlrBadge]:"61738",[i.Hlr]:"61739",[i.Info]:"61740",[i.Keyboard]:"61741",[i.Layers]:"61742",[i.Link]:"61743",[i.Linkedin]:"61744",[i.List]:"61745",[i.Location]:"61746",[i.MagnifyingGlass]:"61747",[i.MediaMix]:"61748",[i.MeshTrim]:"61749",[i.Mesh]:"61750",[i.Minus]:"61751",[i.MoreVert]:"61752",[i.Notes]:"61753",[i.PanoramaDisable]:"61754",[i.Panorama]:"61755",[i.PaperClip]:"61756",[i.PauseOutline]:"61757",[i.Pause]:"61758",[i.Photo_2d]:"61759",[i.Photo_360]:"61760",[i.PhotoAdd]:"61761",[i.Pin]:"61762",[i.Pinterest]:"61763",[i.PlayUnicode]:"61764",[i.Play]:"61765",[i.Plus]:"61766",[i.Position_3d]:"61767",[i.PressHold]:"61768",[i.PublicBuildingsApartment]:"61769",[i.PublicBuildingsArchway]:"61770",[i.PublicBuildingsBuildingCircleArrowRight]:"61771",[i.PublicBuildingsBuildingCircleCheck]:"61772",[i.PublicBuildingsBuildingCircleExclamation]:"61773",[i.PublicBuildingsBuildingCircleXmark]:"61774",[i.PublicBuildingsBuildingColumns]:"61775",[i.PublicBuildingsBuildingFlag]:"61776",[i.PublicBuildingsBuildingLock]:"61777",[i.PublicBuildingsBuildingShield]:"61778",[i.PublicBuildingsBuildingUser]:"61779",[i.PublicBuildingsBuildingWheat]:"61780",[i.PublicBuildingsBuilding]:"61781",[i.PublicBuildingsBuildings]:"61782",[i.PublicBuildingsCabin]:"61783",[i.PublicBuildingsCampground]:"61784",[i.PublicBuildingsCarBuilding]:"61785",[i.PublicBuildingsCastle]:"61786",[i.PublicBuildingsChimney]:"61787",[i.PublicBuildingsChurch]:"61788",[i.PublicBuildingsCity]:"61789",[i.PublicBuildingsFarm]:"61790",[i.PublicBuildingsFence]:"61791",[i.PublicBuildingsFerrisWheel]:"61792",[i.PublicBuildingsFort]:"61793",[i.PublicBuildingsGarage]:"61794",[i.PublicBuildingsHospital]:"61795",[i.PublicBuildingsHotel]:"61796",[i.PublicBuildingsHouseBuilding]:"61797",[i.PublicBuildingsHouseCrack]:"61798",[i.PublicBuildingsHouseDay]:"61799",[i.PublicBuildingsHouseFire]:"61800",[i.PublicBuildingsHouseFlag]:"61801",[i.PublicBuildingsHouseFloodWater]:"61802",[i.PublicBuildingsHouseHeart]:"61803",[i.PublicBuildingsHouseLock]:"61804",[i.PublicBuildingsHouseMedical]:"61805",[i.PublicBuildingsHouseNight]:"61806",[i.PublicBuildingsHouse]:"61807",[i.PublicBuildingsIndustry]:"61808",[i.PublicBuildingsLandmark]:"61809",[i.PublicBuildingsMonument]:"61810",[i.PublicBuildingsMosque]:"61811",[i.PublicBuildingsMountainCity]:"61812",[i.PublicBuildingsPlaceOfWorship]:"61813",[i.PublicBuildingsRollerCoaster]:"61814",[i.PublicBuildingsSchool]:"61815",[i.PublicBuildingsStore]:"61816",[i.PublicBuildingsSynagogue]:"61817",[i.PublicBuildingsTent]:"61818",[i.PublicBuildingsToilet]:"61819",[i.PublicBuildingsToriiGate]:"61820",[i.PublicBuildingsTowerObservation]:"61821",[i.PublicBuildingsTree]:"61822",[i.PublicBuildingsWarehouse]:"61823",[i.PublicCharacters_0]:"61824",[i.PublicCharacters_1]:"61825",[i.PublicCharacters_2]:"61826",[i.PublicCharacters_3]:"61827",[i.PublicCharacters_4]:"61828",[i.PublicCharacters_5]:"61829",[i.PublicCharacters_6]:"61830",[i.PublicCharacters_7]:"61831",[i.PublicCharacters_8]:"61832",[i.PublicCharacters_9]:"61833",[i.PublicCharactersA]:"61834",[i.PublicCharactersB]:"61835",[i.PublicCharactersC]:"61836",[i.PublicCharactersCircle_0]:"61837",[i.PublicCharactersCircle_1]:"61838",[i.PublicCharactersCircle_2]:"61839",[i.PublicCharactersCircle_3]:"61840",[i.PublicCharactersCircle_4]:"61841",[i.PublicCharactersCircle_5]:"61842",[i.PublicCharactersCircle_6]:"61843",[i.PublicCharactersCircle_7]:"61844",[i.PublicCharactersCircle_8]:"61845",[i.PublicCharactersCircle_9]:"61846",[i.PublicCharactersCircleA]:"61847",[i.PublicCharactersCircleB]:"61848",[i.PublicCharactersCircleC]:"61849",[i.PublicCharactersCircleD]:"61850",[i.PublicCharactersCircleE]:"61851",[i.PublicCharactersCircleF]:"61852",[i.PublicCharactersCircleG]:"61853",[i.PublicCharactersCircleH]:"61854",[i.PublicCharactersCircleI]:"61855",[i.PublicCharactersCircleJ]:"61856",[i.PublicCharactersCircleK]:"61857",[i.PublicCharactersCircleL]:"61858",[i.PublicCharactersCircleM]:"61859",[i.PublicCharactersCircleN]:"61860",[i.PublicCharactersCircleO]:"61861",[i.PublicCharactersCircleP]:"61862",[i.PublicCharactersCircleQ]:"61863",[i.PublicCharactersCircleR]:"61864",[i.PublicCharactersCircleS]:"61865",[i.PublicCharactersCircleT]:"61866",[i.PublicCharactersCircleU]:"61867",[i.PublicCharactersCircleV]:"61868",[i.PublicCharactersCircleW]:"61869",[i.PublicCharactersCircleX]:"61870",[i.PublicCharactersCircleY]:"61871",[i.PublicCharactersCircleZ]:"61872",[i.PublicCharactersD]:"61873",[i.PublicCharactersE]:"61874",[i.PublicCharactersF]:"61875",[i.PublicCharactersG]:"61876",[i.PublicCharactersH]:"61877",[i.PublicCharactersI]:"61878",[i.PublicCharactersJ]:"61879",[i.PublicCharactersK]:"61880",[i.PublicCharactersL]:"61881",[i.PublicCharactersM]:"61882",[i.PublicCharactersN]:"61883",[i.PublicCharactersO]:"61884",[i.PublicCharactersP]:"61885",[i.PublicCharactersQ]:"61886",[i.PublicCharactersR]:"61887",[i.PublicCharactersS]:"61888",[i.PublicCharactersSquare_0]:"61889",[i.PublicCharactersSquare_1]:"61890",[i.PublicCharactersSquare_2]:"61891",[i.PublicCharactersSquare_3]:"61892",[i.PublicCharactersSquare_4]:"61893",[i.PublicCharactersSquare_5]:"61894",[i.PublicCharactersSquare_6]:"61895",[i.PublicCharactersSquare_7]:"61896",[i.PublicCharactersSquare_8]:"61897",[i.PublicCharactersSquare_9]:"61898",[i.PublicCharactersSquareA]:"61899",[i.PublicCharactersSquareB]:"61900",[i.PublicCharactersSquareC]:"61901",[i.PublicCharactersSquareD]:"61902",[i.PublicCharactersSquareE]:"61903",[i.PublicCharactersSquareF]:"61904",[i.PublicCharactersSquareG]:"61905",[i.PublicCharactersSquareH]:"61906",[i.PublicCharactersSquareI]:"61907",[i.PublicCharactersSquareJ]:"61908",[i.PublicCharactersSquareK]:"61909",[i.PublicCharactersSquareL]:"61910",[i.PublicCharactersSquareM]:"61911",[i.PublicCharactersSquareN]:"61912",[i.PublicCharactersSquareO]:"61913",[i.PublicCharactersSquareP]:"61914",[i.PublicCharactersSquareQ]:"61915",[i.PublicCharactersSquareR]:"61916",[i.PublicCharactersSquareS]:"61917",[i.PublicCharactersSquareT]:"61918",[i.PublicCharactersSquareU]:"61919",[i.PublicCharactersSquareV]:"61920",[i.PublicCharactersSquareW]:"61921",[i.PublicCharactersSquareX]:"61922",[i.PublicCharactersSquareXmark]:"61923",[i.PublicCharactersSquareY]:"61924",[i.PublicCharactersSquareZ]:"61925",[i.PublicCharactersT]:"61926",[i.PublicCharactersU]:"61927",[i.PublicCharactersV]:"61928",[i.PublicCharactersW]:"61929",[i.PublicCharactersX]:"61930",[i.PublicCharactersY]:"61931",[i.PublicCharactersZ]:"61932",[i.PublicFurnitureBath]:"61933",[i.PublicFurnitureBedAlt]:"61934",[i.PublicFurnitureBedBunk]:"61935",[i.PublicFurnitureBedEmpty]:"61936",[i.PublicFurnitureBed]:"61937",[i.PublicFurnitureBlender]:"61938",[i.PublicFurnitureBlinds]:"61939",[i.PublicFurnitureCabinetFiling]:"61940",[i.PublicFurnitureCashRegister]:"61941",[i.PublicFurnitureChairOffice]:"61942",[i.PublicFurnitureChair]:"61943",[i.PublicFurnitureChargingStation]:"61944",[i.PublicFurnitureComputerClassic]:"61945",[i.PublicFurnitureComputerSpeaker]:"61946",[i.PublicFurnitureCouch]:"61947",[i.PublicFurnitureDryerAlt]:"61948",[i.PublicFurnitureDryer]:"61949",[i.PublicFurnitureDumbbell]:"61950",[i.PublicFurnitureDumpster]:"61951",[i.PublicFurnitureFaucet]:"61952",[i.PublicFurnitureFax]:"61953",[i.PublicFurnitureHotTub]:"61954",[i.PublicFurnitureInventory]:"61955",[i.PublicFurnitureLampDesk]:"61956",[i.PublicFurnitureLampFloor]:"61957",[i.PublicFurnitureLamp]:"61958",[i.PublicFurnitureLaptop]:"61959",[i.PublicFurnitureLightCeiling]:"61960",[i.PublicFurnitureLoveseat]:"61961",[i.PublicFurnitureMicrowave]:"61962",[i.PublicFurniturePiano]:"61963",[i.PublicFurniturePodium]:"61964",[i.PublicFurniturePresentation]:"61965",[i.PublicFurnitureProjector]:"61966",[i.PublicFurnitureRadio]:"61967",[i.PublicFurnitureRefrigerator]:"61968",[i.PublicFurnitureShower]:"61969",[i.PublicFurnitureShredder]:"61970",[i.PublicFurnitureSink]:"61971",[i.PublicFurnitureSolarPanel]:"61972",[i.PublicFurnitureSpeaker]:"61973",[i.PublicFurnitureSpeakers]:"61974",[i.PublicFurnitureToilet]:"61975",[i.PublicFurnitureTrashAlt]:"61976",[i.PublicFurnitureTurntable]:"61977",[i.PublicFurnitureTvRetro]:"61978",[i.PublicFurnitureTv]:"61979",[i.PublicFurnitureTypewriter]:"61980",[i.PublicObjectsAbacus]:"61981",[i.PublicObjectsAlarmClock]:"61982",[i.PublicObjectsAlbumCollection]:"61983",[i.PublicObjectsAppleAlt]:"61984",[i.PublicObjectsBackpack]:"61985",[i.PublicObjectsBagsShopping]:"61986",[i.PublicObjectsBalanceScale]:"61987",[i.PublicObjectsBeer]:"61988",[i.PublicObjectsBell]:"61989",[i.PublicObjectsBicycle]:"61990",[i.PublicObjectsBinoculars]:"61991",[i.PublicObjectsBlanket]:"61992",[i.PublicObjectsBookAlt]:"61993",[i.PublicObjectsBook]:"61994",[i.PublicObjectsBooks]:"61995",[i.PublicObjectsBoot]:"61996",[i.PublicObjectsBox]:"61997",[i.PublicObjectsBoxesAlt]:"61998",[i.PublicObjectsBreadLoaf]:"61999",[i.PublicObjectsBriefcaseMedical]:"62000",[i.PublicObjectsBriefcase]:"62001",[i.PublicObjectsBroom]:"62002",[i.PublicObjectsBrush]:"62003",[i.PublicObjectsBullhorn]:"62004",[i.PublicObjectsBurgerSoda]:"62005",[i.PublicObjectsCalculator]:"62006",[i.PublicObjectsCalendar]:"62007",[i.PublicObjectsCamera]:"62008",[i.PublicObjectsCar]:"62009",[i.PublicObjectsCarrot]:"62010",[i.PublicObjectsCheeseSwiss]:"62011",[i.PublicObjectsCheeseburger]:"62012",[i.PublicObjectsChess]:"62013",[i.PublicObjectsClipboardCheck]:"62014",[i.PublicObjectsClipboardList]:"62015",[i.PublicObjectsClipboard]:"62016",[i.PublicObjectsCocktail]:"62017",[i.PublicObjectsCoffeePot]:"62018",[i.PublicObjectsCoffeeTogo]:"62019",[i.PublicObjectsCoffee]:"62020",[i.PublicObjectsCompass]:"62021",[i.PublicObjectsConciergeBell]:"62022",[i.PublicObjectsCookie]:"62023",[i.PublicObjectsCorn]:"62024",[i.PublicObjectsCroissant]:"62025",[i.PublicObjectsDice]:"62026",[i.PublicObjectsDrumstick]:"62027",[i.PublicObjectsEgg]:"62028",[i.PublicObjectsFish]:"62029",[i.PublicObjectsFlask]:"62030",[i.PublicObjectsFlowerTulip]:"62031",[i.PublicObjectsGamepad]:"62032",[i.PublicObjectsGem]:"62033",[i.PublicObjectsGift]:"62034",[i.PublicObjectsGifts]:"62035",[i.PublicObjectsGlassChampagne]:"62036",[i.PublicObjectsGlassCitrus]:"62037",[i.PublicObjectsGlassMartiniAlt]:"62038",[i.PublicObjectsGlassWhiskeyRocks]:"62039",[i.PublicObjectsGlass]:"62040",[i.PublicObjectsGlasses]:"62041",[i.PublicObjectsGlobeStand]:"62042",[i.PublicObjectsGolfBall]:"62043",[i.PublicObjectsGraduationCap]:"62044",[i.PublicObjectsGuitar]:"62045",[i.PublicObjectsHamburger]:"62046",[i.PublicObjectsHammer]:"62047",[i.PublicObjectsHardHat]:"62048",[i.PublicObjectsHatChef]:"62049",[i.PublicObjectsIceCream]:"62050",[i.PublicObjectsIceSkate]:"62051",[i.PublicObjectsKey]:"62052",[i.PublicObjectsKnifeKitchen]:"62053",[i.PublicObjectsLightbulbOn]:"62054",[i.PublicObjectsLightbulbSlash]:"62055",[i.PublicObjectsLightbulb]:"62056",[i.PublicObjectsMagnet]:"62057",[i.PublicObjectsMailbox]:"62058",[i.PublicObjectsMap]:"62059",[i.PublicObjectsMeat]:"62060",[i.PublicObjectsMedal]:"62061",[i.PublicObjectsMedkit]:"62062",[i.PublicObjectsMicrophone]:"62063",[i.PublicObjectsMobile]:"62064",[i.PublicObjectsMoneyBillWave]:"62065",[i.PublicObjectsMugTea]:"62066",[i.PublicObjectsMug]:"62067",[i.PublicObjectsNewspaper]:"62068",[i.PublicObjectsPaintBrush]:"62069",[i.PublicObjectsPaintRoller]:"62070",[i.PublicObjectsPalette]:"62071",[i.PublicObjectsPen]:"62072",[i.PublicObjectsPhone]:"62073",[i.PublicObjectsPizzaSlice]:"62074",[i.PublicObjectsPumpSoap]:"62075",[i.PublicObjectsRulerTriangle]:"62076",[i.PublicObjectsRuler]:"62077",[i.PublicObjectsSalad]:"62078",[i.PublicObjectsSandwich]:"62079",[i.PublicObjectsShoppingBag]:"62080",[i.PublicObjectsShoppingBasket]:"62081",[i.PublicObjectsShoppingCart]:"62082",[i.PublicObjectsShovel]:"62083",[i.PublicObjectsSoup]:"62084",[i.PublicObjectsSteak]:"62085",[i.PublicObjectsSunglasses]:"62086",[i.PublicObjectsToiletPaperAlt]:"62087",[i.PublicObjectsTrashAlt]:"62088",[i.PublicObjectsTshirt]:"62089",[i.PublicObjectsTurkey]:"62090",[i.PublicObjectsUtensilsAlt]:"62091",[i.PublicObjectsUtensils]:"62092",[i.PublicObjectsVial]:"62093",[i.PublicObjectsWallet]:"62094",[i.PublicObjectsWrench]:"62095",[i.PublicPeopleBaby]:"62096",[i.PublicPeopleChildDress]:"62097",[i.PublicPeopleChildReaching]:"62098",[i.PublicPeopleChild]:"62099",[i.PublicPeopleChildren]:"62100",[i.PublicPeopleCircleUser]:"62101",[i.PublicPeopleClipboardUser]:"62102",[i.PublicPeopleFaceAngry]:"62103",[i.PublicPeopleFaceAnguished]:"62104",[i.PublicPeopleFaceAstonished]:"62105",[i.PublicPeopleFaceBeamHandOverMouth]:"62106",[i.PublicPeopleFaceConfounded]:"62107",[i.PublicPeopleFaceConfused]:"62108",[i.PublicPeopleFaceDiagonalMouth]:"62109",[i.PublicPeopleFaceDisappointed]:"62110",[i.PublicPeopleFaceDizzy]:"62111",[i.PublicPeopleFaceExpressionless]:"62112",[i.PublicPeopleFaceEyesXmarks]:"62113",[i.PublicPeopleFaceFearful]:"62114",[i.PublicPeopleFaceFrownSlight]:"62115",[i.PublicPeopleFaceFrown]:"62116",[i.PublicPeopleFaceGlasses]:"62117",[i.PublicPeopleFaceGrimace]:"62118",[i.PublicPeopleFaceGrinBeamSweat]:"62119",[i.PublicPeopleFaceGrinBeam]:"62120",[i.PublicPeopleFaceGrinHearts]:"62121",[i.PublicPeopleFaceGrinSquintTears]:"62122",[i.PublicPeopleFaceGrinSquint]:"62123",[i.PublicPeopleFaceGrinStars]:"62124",[i.PublicPeopleFaceGrinTears]:"62125",[i.PublicPeopleFaceGrinTongueSquint]:"62126",[i.PublicPeopleFaceGrinTongueWink]:"62127",[i.PublicPeopleFaceGrinTongue]:"62128",[i.PublicPeopleFaceGrinWide]:"62129",[i.PublicPeopleFaceGrinWink]:"62130",[i.PublicPeopleFaceGrin]:"62131",[i.PublicPeopleFaceHandOverMouth]:"62132",[i.PublicPeopleFaceHushed]:"62133",[i.PublicPeopleFaceIcicles]:"62134",[i.PublicPeopleFaceKiss]:"62135",[i.PublicPeopleFaceLaugh]:"62136",[i.PublicPeopleFaceMask]:"62137",[i.PublicPeopleFaceMehBlank]:"62138",[i.PublicPeopleFaceMeh]:"62139",[i.PublicPeopleFaceMonocle]:"62140",[i.PublicPeopleFaceNauseated]:"62141",[i.PublicPeopleFaceParty]:"62142",[i.PublicPeopleFacePensive]:"62143",[i.PublicPeopleFacePersevering]:"62144",[i.PublicPeopleFacePleading]:"62145",[i.PublicPeopleFacePouting]:"62146",[i.PublicPeopleFaceRaisedEyebrow]:"62147",[i.PublicPeopleFaceRelieved]:"62148",[i.PublicPeopleFaceRollingEyes]:"62149",[i.PublicPeopleFaceSadCry]:"62150",[i.PublicPeopleFaceSadSweat]:"62151",[i.PublicPeopleFaceSadTear]:"62152",[i.PublicPeopleFaceScream]:"62153",[i.PublicPeopleFaceSleeping]:"62154",[i.PublicPeopleFaceSleepy]:"62155",[i.PublicPeopleFaceSmileBeam]:"62156",[i.PublicPeopleFaceSmileHalo]:"62157",[i.PublicPeopleFaceSmileHearts]:"62158",[i.PublicPeopleFaceSmileRelaxed]:"62159",[i.PublicPeopleFaceSmileUpsideDown]:"62160",[i.PublicPeopleFaceSmileWink]:"62161",[i.PublicPeopleFaceSmile]:"62162",[i.PublicPeopleFaceSmilingHands]:"62163",[i.PublicPeopleFaceSmirking]:"62164",[i.PublicPeopleFaceSpiralEyes]:"62165",[i.PublicPeopleFaceSunglasses]:"62166",[i.PublicPeopleFaceSurprise]:"62167",[i.PublicPeopleFaceThermometer]:"62168",[i.PublicPeopleFaceThinking]:"62169",[i.PublicPeopleFaceTired]:"62170",[i.PublicPeopleFaceTissue]:"62171",[i.PublicPeopleFaceTongueSweat]:"62172",[i.PublicPeopleFaceUnamused]:"62173",[i.PublicPeopleFaceVomit]:"62174",[i.PublicPeopleFaceWeary]:"62175",[i.PublicPeopleFaceWoozy]:"62176",[i.PublicPeopleFaceWorried]:"62177",[i.PublicPeopleFaceZipper]:"62178",[i.PublicPeopleFamilyDress]:"62179",[i.PublicPeopleFamilyPants]:"62180",[i.PublicPeopleFamily]:"62181",[i.PublicPeopleFileUser]:"62182",[i.PublicPeopleFolderUser]:"62183",[i.PublicPeopleHeadSideBrain]:"62184",[i.PublicPeopleHeadSideCoughSlash]:"62185",[i.PublicPeopleHeadSideCough]:"62186",[i.PublicPeopleHeadSideGoggles]:"62187",[i.PublicPeopleHeadSideHeadphones]:"62188",[i.PublicPeopleHeadSideHeart]:"62189",[i.PublicPeopleHeadSideMask]:"62190",[i.PublicPeopleHeadSideMedical]:"62191",[i.PublicPeopleHeadSideVirus]:"62192",[i.PublicPeopleHeadSide]:"62193",[i.PublicPeoplePeopleArrowsLeftRight]:"62194",[i.PublicPeoplePeopleCarryBox]:"62195",[i.PublicPeoplePeopleDress]:"62196",[i.PublicPeoplePeopleGroup]:"62197",[i.PublicPeoplePeopleLine]:"62198",[i.PublicPeoplePeoplePants]:"62199",[i.PublicPeoplePeoplePulling]:"62200",[i.PublicPeoplePeopleRoof]:"62201",[i.PublicPeoplePeople]:"62202",[i.PublicPeoplePersonBiking]:"62203",[i.PublicPeoplePersonBooth]:"62204",[i.PublicPeoplePersonBreastfeeding]:"62205",[i.PublicPeoplePersonCane]:"62206",[i.PublicPeoplePersonCarryBox]:"62207",[i.PublicPeoplePersonChalkboard]:"62208",[i.PublicPeoplePersonCircleCheck]:"62209",[i.PublicPeoplePersonCircleExclamation]:"62210",[i.PublicPeoplePersonCircleMinus]:"62211",[i.PublicPeoplePersonCirclePlus]:"62212",[i.PublicPeoplePersonCircleQuestion]:"62213",[i.PublicPeoplePersonCircleXmark]:"62214",[i.PublicPeoplePersonDigging]:"62215",[i.PublicPeoplePersonDollyEmpty]:"62216",[i.PublicPeoplePersonDolly]:"62217",[i.PublicPeoplePersonDress]:"62218",[i.PublicPeoplePersonDrowning]:"62219",[i.PublicPeoplePersonFallingBurst]:"62220",[i.PublicPeoplePersonFalling]:"62221",[i.PublicPeoplePersonHalfDress]:"62222",[i.PublicPeoplePersonHiking]:"62223",[i.PublicPeoplePersonMilitaryPointing]:"62224",[i.PublicPeoplePersonMilitaryToPerson]:"62225",[i.PublicPeoplePersonPinball]:"62226",[i.PublicPeoplePersonPraying]:"62227",[i.PublicPeoplePersonPregnant]:"62228",[i.PublicPeoplePersonRunning]:"62229",[i.PublicPeoplePersonSeatReclined]:"62230",[i.PublicPeoplePersonSeat]:"62231",[i.PublicPeoplePersonShelter]:"62232",[i.PublicPeoplePersonSkating]:"62233",[i.PublicPeoplePersonSkiing]:"62234",[i.PublicPeoplePersonSwimming]:"62235",[i.PublicPeoplePersonToDoor]:"62236",[i.PublicPeoplePersonWalkingLuggage]:"62237",[i.PublicPeoplePersonWalkingWithCane]:"62238",[i.PublicPeoplePersonWalking]:"62239",[i.PublicPeoplePerson]:"62240",[i.PublicPeopleRestroom]:"62241",[i.PublicPeopleSquareUser]:"62242",[i.PublicPeopleStreetView]:"62243",[i.PublicPeopleUserAstronaut]:"62244",[i.PublicPeopleUserCheck]:"62245",[i.PublicPeopleUserChef]:"62246",[i.PublicPeopleUserClock]:"62247",[i.PublicPeopleUserCowboy]:"62248",[i.PublicPeopleUserCrown]:"62249",[i.PublicPeopleUserDoctor]:"62250",[i.PublicPeopleUserGear]:"62251",[i.PublicPeopleUserGraduate]:"62252",[i.PublicPeopleUserGroup]:"62253",[i.PublicPeopleUserHeadset]:"62254",[i.PublicPeopleUserHelmetSafety]:"62255",[i.PublicPeopleUserInjured]:"62256",[i.PublicPeopleUserLarge]:"62257",[i.PublicPeopleUserLock]:"62258",[i.PublicPeopleUserMinus]:"62259",[i.PublicPeopleUserMusic]:"62260",[i.PublicPeopleUserNurse]:"62261",[i.PublicPeopleUserPen]:"62262",[i.PublicPeopleUserPilot]:"62263",[i.PublicPeopleUserPlus]:"62264",[i.PublicPeopleUserPolice]:"62265",[i.PublicPeopleUserShield]:"62266",[i.PublicPeopleUserSlash]:"62267",[i.PublicPeopleUserUnlock]:"62268",[i.PublicPeopleUser]:"62269",[i.PublicPeopleUsers]:"62270",[i.PublicPeopleWheelchair]:"62271",[i.PublicSymbolsArrowAltCircleDown]:"62272",[i.PublicSymbolsArrowAltCircleLeft]:"62273",[i.PublicSymbolsArrowAltCircleRight]:"62274",[i.PublicSymbolsArrowAltCircleUp]:"62275",[i.PublicSymbolsArrowAltDown]:"62276",[i.PublicSymbolsArrowAltLeft]:"62277",[i.PublicSymbolsArrowAltRight]:"62278",[i.PublicSymbolsArrowAltUp]:"62279",[i.PublicSymbolsAward]:"62280",[i.PublicSymbolsBadgeCheck]:"62281",[i.PublicSymbolsBadgeDollar]:"62282",[i.PublicSymbolsBadge]:"62283",[i.PublicSymbolsBan]:"62284",[i.PublicSymbolsBell]:"62285",[i.PublicSymbolsBoltSlash]:"62286",[i.PublicSymbolsBolt]:"62287",[i.PublicSymbolsBookmark]:"62288",[i.PublicSymbolsCheckCircle]:"62289",[i.PublicSymbolsCheck]:"62290",[i.PublicSymbolsCircle]:"62291",[i.PublicSymbolsClock]:"62292",[i.PublicSymbolsClub]:"62293",[i.PublicSymbolsCube]:"62294",[i.PublicSymbolsCubes]:"62295",[i.PublicSymbolsDeaf]:"62296",[i.PublicSymbolsDiamond]:"62297",[i.PublicSymbolsDollarSign]:"62298",[i.PublicSymbolsExclamationCircle]:"62299",[i.PublicSymbolsExclamationSquare]:"62300",[i.PublicSymbolsExclamationTriangle]:"62301",[i.PublicSymbolsExclamation]:"62302",[i.PublicSymbolsEyeSlash]:"62303",[i.PublicSymbolsEye]:"62304",[i.PublicSymbolsFile]:"62305",[i.PublicSymbolsFingerprint]:"62306",[i.PublicSymbolsFireAlt]:"62307",[i.PublicSymbolsFlagAlt]:"62308",[i.PublicSymbolsFolder]:"62309",[i.PublicSymbolsGenderless]:"62310",[i.PublicSymbolsHeart]:"62311",[i.PublicSymbolsHexagon]:"62312",[i.PublicSymbolsHourglass]:"62313",[i.PublicSymbolsImage]:"62314",[i.PublicSymbolsInfoCircle]:"62315",[i.PublicSymbolsInfoSquare]:"62316",[i.PublicSymbolsLayerGroup]:"62317",[i.PublicSymbolsLink]:"62318",[i.PublicSymbolsLocationArrow]:"62319",[i.PublicSymbolsLockOpen]:"62320",[i.PublicSymbolsLock]:"62321",[i.PublicSymbolsMapMarkerAlt]:"62322",[i.PublicSymbolsMapMarkerCheck]:"62323",[i.PublicSymbolsMapMarkerExclamation]:"62324",[i.PublicSymbolsMapMarkerMinus]:"62325",[i.PublicSymbolsMapMarkerPlus]:"62326",[i.PublicSymbolsMapMarkerQuestion]:"62327",[i.PublicSymbolsMapMarkerSmile]:"62328",[i.PublicSymbolsMars]:"62329",[i.PublicSymbolsMoon]:"62330",[i.PublicSymbolsOctagon]:"62331",[i.PublicSymbolsPaperclip]:"62332",[i.PublicSymbolsParkingCircle]:"62333",[i.PublicSymbolsParking]:"62334",[i.PublicSymbolsPause]:"62335",[i.PublicSymbolsPlay]:"62336",[i.PublicSymbolsQuestionCircle]:"62337",[i.PublicSymbolsQuestionSquare]:"62338",[i.PublicSymbolsQuestion]:"62339",[i.PublicSymbolsRecycle]:"62340",[i.PublicSymbolsRedo]:"62341",[i.PublicSymbolsShapes]:"62342",[i.PublicSymbolsShield]:"62343",[i.PublicSymbolsSmokingBan]:"62344",[i.PublicSymbolsSmoking]:"62345",[i.PublicSymbolsSpade]:"62346",[i.PublicSymbolsSquare]:"62347",[i.PublicSymbolsStar]:"62348",[i.PublicSymbolsTachometer]:"62349",[i.PublicSymbolsTag]:"62350",[i.PublicSymbolsTemperatureDown]:"62351",[i.PublicSymbolsTemperatureFrigid]:"62352",[i.PublicSymbolsTemperatureHigh]:"62353",[i.PublicSymbolsTemperatureHot]:"62354",[i.PublicSymbolsTemperatureLow]:"62355",[i.PublicSymbolsTemperatureUp]:"62356",[i.PublicSymbolsText]:"62357",[i.PublicSymbolsThermometerEmpty]:"62358",[i.PublicSymbolsThermometerFull]:"62359",[i.PublicSymbolsThermometerHalf]:"62360",[i.PublicSymbolsThermometerQuarter]:"62361",[i.PublicSymbolsThermometerThreeQuarters]:"62362",[i.PublicSymbolsThumbtack]:"62363",[i.PublicSymbolsTint]:"62364",[i.PublicSymbolsTransgenderAlt]:"62365",[i.PublicSymbolsTransgender]:"62366",[i.PublicSymbolsTrashAlt]:"62367",[i.PublicSymbolsTriangle]:"62368",[i.PublicSymbolsUsdCircle]:"62369",[i.PublicSymbolsUsdSquare]:"62370",[i.PublicSymbolsVenusMars]:"62371",[i.PublicSymbolsVenus]:"62372",[i.PublicSymbolsVideo]:"62373",[i.PublicSymbolsVolumeDown]:"62374",[i.PublicSymbolsVolumeMute]:"62375",[i.PublicSymbolsVolumeOff]:"62376",[i.PublicSymbolsVolumeSlash]:"62377",[i.PublicSymbolsVolumeUp]:"62378",[i.PublicSymbolsVolume]:"62379",[i.PublicSymbolsWater]:"62380",[i.PublicSymbolsWaveform]:"62381",[i.PublicSymbolsWifiSlash]:"62382",[i.PublicSymbolsWifi]:"62383",[i.PublicSymbolsYenSign]:"62384",[i.Question]:"62385",[i.Reorder]:"62386",[i.Reply]:"62387",[i.Restart]:"62388",[i.Revert]:"62389",[i.RotateLeft]:"62390",[i.RotateRight]:"62391",[i.Rotate]:"62392",[i.Rotation_3d]:"62393",[i.Scale_3d]:"62394",[i.Settings]:"62395",[i.Share]:"62396",[i.Share2]:"62397",[i.SimpleTagPin]:"62398",[i.SimpleTagSmall]:"62399",[i.SimpleTag]:"62400",[i.Snap]:"62401",[i.StartLocation]:"62402",[i.StemHeight]:"62403",[i.TapeMeasure]:"62404",[i.TogglePencil]:"62405",[i.Toolbar_360View]:"62406",[i.ToolbarEditVr]:"62407",[i.ToolbarHlr]:"62408",[i.ToolbarLabels]:"62409",[i.ToolbarMattertags]:"62410",[i.ToolbarMeasurements]:"62411",[i.ToolbarMoreHoriz]:"62412",[i.ToolbarPhotos]:"62413",[i.ToolbarScanMgmt]:"62414",[i.ToolbarStartLocation]:"62415",[i.Transitions]:"62416",[i.TrimKeep]:"62417",[i.TrimRemove]:"62418",[i.Twitter]:"62419",[i.User]:"62420",[i.Vr]:"62421",[i.ZoomReset]:"62422"}},71981:(e,t,n)=>{"use strict";n.d(t,{a_:()=>OEmbedConsumer,t1:()=>OEmbedLinkError,HF:()=>OEmbedProviderError,ht:()=>p.h,V0:()=>g});var i=n(62074);class OEmbedConsumerError extends Error{constructor(e,t,n){super(e),this.status=t,this.type=n,Error.captureStackTrace&&Error.captureStackTrace(this,OEmbedConsumerError)}}class OEmbedUrlError extends OEmbedConsumerError{constructor(e){super(`Cannot request OEmbed data because no configuration matches the url ${e}`,200,"OEmbedUrl")}}class OEmbedProviderError extends OEmbedConsumerError{constructor(e="unknown provider"){super(`Content from OEmbed provider ${e} is not currently supported`,200,"OEmbedProvider")}}class OEmbedLinkError extends OEmbedConsumerError{constructor(e="unknown provider"){super(`Content from ${e} is type "link", which Link content is not currently supported`,200,"OEmbedLink")}}function s(e){const t={width:"360",maxwidth:"360",maxheight:"640",url:e,native:"true",autoplay:"true"};if(e.includes("flickr")||e.includes("flic.kr")){const e=Math.max(window.screen.height,window.screen.width);t.maxwidth=t.maxheight=t.width=`${e}`}return{queryParams:new URLSearchParams(t),headers:{responseType:"json"}}}const r=/^https:\/\/www.instagram.com/;const o=/^https:\/\/www.facebook.com/,a=/^https:\/\/www.facebook.com\/(.*\/)?(posts\/|activity\/|photo\.php|photos\/|permalink\.php|media\/set|questions\/|notes\/)/,l=/^https:\/\/www.facebook.com\/(video\.php|.*\/videos\/)/;const c=[{testUrl:function(e){return r.test(e)},request:async function(e,t,n,i){const{queryParams:r,headers:o}=s(e);n&&i&&r.append("access_token",`${n}|${i}`);const a=new URL(`https://graph.facebook.com/v10.0/instagram_oembed?${r.toString()}`);try{return await t.get(a.toString(),o)}catch(e){const t=e;throw new OEmbedConsumerError(t.error.message,t.status_code,t.error.type)}},apiKeys:["instagramAppId","instagramClientToken"]},{testUrl:function(e){return o.test(e)},request:async function(e,t,n,i){const{queryParams:r,headers:o}=s(e);n&&i&&r.append("access_token",`${n}|${i}`);const c=function(e){return a.test(e)?"https://graph.facebook.com/v10.0/oembed_post":l.test(e)?"https://graph.facebook.com/v10.0/oembed_video":"https://graph.facebook.com/v10.0/oembed_page"}(e),d=new URL(`${c}?${r.toString()}`);try{return await t.get(d.toString(),o)}catch(e){const t=e;throw new OEmbedConsumerError(t.error.message,t.status_code,t.error.type)}},apiKeys:["instagramAppId","instagramClientToken"]},{testUrl:()=>!0,request:async function(e,t,n){const{queryParams:i,headers:r}=s(e);n&&i.append("key",n);const o=new URL(`https://api.embed.ly/1/oembed?${i.toString()}`);try{return await t.get(o.toString(),r)}catch(e){const t=e;throw new OEmbedConsumerError(t.error_message,t.status_code,t.type)}},apiKeys:["embedlyKey"]}];const d={[i.z.GoogleMaps]:function(e,t){return e.thumbnail_url&&(e.thumbnail_url=`${e.thumbnail_url}&key=${t.googleMapsApiKey}`),e}};function u(e,t){if(void 0===e.provider_name)return e;const n=d[e.provider_name.toLowerCase()];return n?n(e,t):(e.type===i.h.PHOTO&&t.embedlyKey&&!e.url.includes("i.embed.ly")&&(e.url=((e,t)=>{const n=Math.max(window.screen.height,window.screen.width);return`https://i.embed.ly/1/display/resize?key=${t}&url=${encodeURIComponent(e)}&width=${n}&height=${n}`})(e.url,t.embedlyKey)),e)}const h={[i.z.Behance]:!1,[i.z.FaceBook]:!1,[i.z.GoogleMaps]:"googleMapsApiKey",[i.z.Instagram]:["instagramAppId","instagramClientToken"],[i.z.LinkedIn]:!1,[i.z.MixCloud]:!1,[i.z.Pinterest]:!1,[i.z.Reddit]:!0,[i.z.TikTok]:!0,[i.z.Twitter]:!0,[i.z.Twitch]:!1};class OEmbedConsumer{constructor(e,t){this.cache={},this.queue=e,this.apiKeys=t}async getOEmbedData(e){if(this.cache[e])return this.validate(this.cache[e]);const t=await function(e,t,n){for(const i of c)if(i.testUrl(e)){const s=i.apiKeys.map((e=>n[e]));return i.request(e,t,...s)}throw new OEmbedUrlError(e)}(e,this.queue,this.apiKeys);return this.cache[e]=t,this.validate(t)}clearCache(){this.cache={}}validate(e){if(!((e,t)=>{const n=void 0===e.provider_name?void 0:h[e.provider_name.toLowerCase()];return"string"==typeof n?!!t[n]:Array.isArray(n)?n.every((e=>!!t[e])):!1!==n})(e,this.apiKeys))throw new OEmbedProviderError(e.provider_name);if(e.type===i.h.LINK)throw new OEmbedLinkError(e.provider_name);return u(e,this.apiKeys)}}var p=n(31865);const m=/[^]*youtube.com\/shorts\//gi,g=e=>{if(m.test(e)){return`https://youtube.com/watch?v=${e.replace(m,"").replace(/\?(.*)/g,"")}`}return e}},31865:(e,t,n)=>{"use strict";var i;n.d(t,{h:()=>i}),function(e){e.PHOTO="photo",e.VIDEO="video",e.LINK="link",e.RICH="rich"}(i||(i={}))},62074:(e,t,n)=>{"use strict";var i;n.d(t,{h:()=>s.h,z:()=>i}),function(e){e.Behance="behance",e.DailyMotion="dailymotion",e.FaceBook="facebook",e.Flickr="flickr",e.Giphy="giphy",e.GoogleMaps="google maps",e.Instagram="instagram",e.LinkedIn="linkedin",e.Matterport="matterport",e.MixCloud="mixcloud",e.Pinterest="pinterest",e.Reddit="reddit",e.SoundCloud="soundcloud",e.SketchFab="sketchfab",e.Spotify="spotify",e.Tenor="tenor",e.TikTok="tiktok",e.Twitch="twitch",e.Twitter="twitter",e.Tumblr="tumblr",e.Vimeo="vimeo",e.YouTube="youtube"}(i||(i={}));var s=n(31865)},40470:(e,t,n)=>{"use strict";n.d(t,{U7:()=>AcceptMessage,fE:()=>AcceptObserver_AcceptObserver,HE:()=>ConnectMessage_ConnectMessage,OR:()=>ConnectMessageObserver,RS:()=>HandshakeMessage,tK:()=>i,pP:()=>s,HX:()=>RejectMessage,MJ:()=>RejectObserver_RejectObserver});n(6015);var i,s,r,o,a=n(1154);!function(e){const t=new a.M;e.connect=async function(e,n,i){let s;try{s=await e.connect()}finally{e.cancelConnecting()}return function(e,t,n,i){return new t(n,e).build(i)}(i,await async function(e){if(!e)throw new Error("Unabled to load the sdk");try{const n=await t.load(e,"sdk-client");if(n&&n.SdkBuilder&&"function"==typeof n.SdkBuilder)return n.SdkBuilder}catch(e){}throw Error(`Could not load the sdk from ${e}`)}(s.scriptUrl),n.getFactory(s),s.serializedInterface)}}(i||(i={})),function(e){e.CONNECT="postmessage.connect"}(s||(s={})),function(e){e.HANDSHAKE="postmessage.handshake",e.ACCEPT="postmessage.accept",e.REJECT="postmessage.reject"}(r||(r={}));class ConnectMessage_ConnectMessage{constructor(e,t){this.type=s.CONNECT,this.payload={bootstrapVersion:e,applicationKey:t.applicationKey,options:{auth:t.auth}}}}class AcceptObserver_AcceptObserver{constructor(e){this.receiver=e,this.messageType=r.ACCEPT}notify(e,t,n){const{sourceId:i,scriptUrl:s,targetId:r,targetOrigin:o}=e,a=e.interface;this.receiver.accept(i,s,a,r,o)}}class RejectObserver_RejectObserver{constructor(e){this.receiver=e,this.messageType=r.REJECT}notify(e,t,n){this.receiver.reject(e.reason)}}!function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.HANDSHAKE=2]="HANDSHAKE",e[e.CONNECTED=3]="CONNECTED",e[e.REJECTED=4]="REJECTED"}(o||(o={}));class HandshakeMessage{constructor(){this.type=r.HANDSHAKE,this.payload={}}}class AcceptMessage{constructor(e,t,n,i,s){this.type=r.ACCEPT,this.payload={scriptUrl:e,interface:t,sourceId:n,targetId:i,targetOrigin:s},this.interface=t}}class RejectMessage{constructor(e){this.type=r.REJECT,this.payload={reason:e},this.reason=e}}class ConnectMessageObserver{constructor(e){this.receiver=e,this.messageType=s.CONNECT}notify(e,t){this.receiver.onConnectionReceived(e,t)}}},6157:(e,t,n)=>{"use strict";n(84759);var i;n(66745);!function(e){e[e.POSTMESSAGE=1]="POSTMESSAGE"}(i||(i={}))},66745:(e,t,n)=>{"use strict";var i;!function(e){e.LOADED="inject.loaded",e.SETUP="inject.setup",e.RESOLVE="inject.resolve"}(i||(i={}))},90614:(e,t,n)=>{"use strict";var i;n.d(t,{dE:()=>i}),function(e){e.CAMERA="sensor.sensortype.camera"}(i||(i={}))},44155:(e,t,n)=>{"use strict";n.d(t,{PO:()=>i});var i;!function(e){e.SPHERE="sensor.sourcetype.sphere",e.BOX="sensor.sourcetype.box",e.CYLINDER="sensor.sourcetype.cylinder"}(i||(i={}))},6015:(e,t,n)=>{"use strict";n.d(t,{UX:()=>DirectMessageFactory,tY:()=>DirectMessageListener,Ej:()=>DirectMessageNode,l:()=>PostMessageFactory,R9:()=>PostMessageListener,TY:()=>UndirectedMessenger});class BridgeObserver{constructor(e){this.messageReceiver=e}notify(e,t){this.messageReceiver.onMessageReceived(e,t)}}var i=n(84759);class ErrorMessageBridge{listen(){}stopListening(){}send(){throw Error("The sdk has been disconnected and can't make any new calls")}}class Messenger{constructor(e,t,n){this.sourceId=e,this.targetId=t,this.messageBridge=n,this.observers=new i.X}init(){const e=new class MessengerFacade{constructor(e){this.messenger=e}onMessageReceived(e,t){this.messenger.onMessageReceived(e,t)}}(this),t=new BridgeObserver(e);this.messageBridge.listen(t)}dispose(){this.messageBridge.stopListening(),this.messageBridge=new ErrorMessageBridge}addObserver(e){this.observers.add(e.messageType,e)}removeObserver(e){this.observers.remove(e.messageType,e)}send(e){const t=this.sourceId,n=this.targetId;this.messageBridge.send(Object.assign(Object.assign({},e),{fromId:t,toId:n,timestamp:Date.now()}))}onMessageReceived(e,t){if(!this.filterMessageId(e))return;const n=e.type,i=this.observers.getValuesAtKey(n);if(i)for(const n of i){const i=e.payload||e;n.notify(i,t,e.timestamp)}}filterMessageId(e){const t=e.toId,n=e.fromId;return t instanceof Array?t.indexOf(this.sourceId)>-1:(void 0===t||t===this.sourceId)&&n===this.targetId}}class UndirectedMessenger{constructor(e,t){this.sourceId=e,this.listenerBridge=t,this.observers=new i.X}init(){const e=new class UndirectedFacade{constructor(e){this.messenger=e}onMessageReceived(e,t){this.messenger.onMessageReceived(e,t)}}(this),t=new BridgeObserver(e);this.listenerBridge.listen(t)}dispose(){this.listenerBridge.stopListening()}addObserver(e){this.observers.add(e.messageType,e)}removeObserver(e){this.observers.remove(e.messageType,e)}send(e,t,n,i){n.send(Object.assign(Object.assign({},e),{fromId:this.sourceId,toId:t,timestamp:Date.now()}),i)}onMessageReceived(e,t){const n=e.type,i=this.observers.getValuesAtKey(n);if(i)for(const n of i){const i=e.payload||e;n.notify(i,t,e.timestamp)}}}class PostMessageListener{constructor(e){this.targetWindow=e,this.messageObserver=null,this.onMessage=e=>{if(this.messageObserver){const t=e.data;this.messageObserver.notify(Object.assign({},t),{id:t.fromId,origin:e.origin,source:e.source},e.data.timestamp)}}}listen(e){this.messageObserver||(this.messageObserver=e,this.targetWindow.addEventListener("message",this.onMessage))}stopListening(){this.targetWindow.removeEventListener("message",this.onMessage),this.messageObserver=null}}class PostMessageSender{constructor(e,t="*"){this.targetWindow=e,this.targetOrigin=t}send(e,t){this.targetWindow.postMessage(e,this.targetOrigin)}}class PostMessageBridge{constructor(e,t,n="*"){this.sourceWindow=e,this.listener=new PostMessageListener(e),this.sender=new PostMessageSender(t,n)}listen(e){this.listener.listen(e)}stopListening(){this.listener.stopListening()}send(e){this.sender.send(e,this.sourceWindow)}}class PostMessageFactory{constructor(e,t,n,i,s="*"){this.sourceId=e,this.sourceWindow=t,this.targetId=n,this.targetWindow=i,this.targetOrigin=s}createMessenger(){const e=new PostMessageBridge(this.sourceWindow,this.targetWindow,this.targetOrigin);return new Messenger(this.sourceId,this.targetId,e)}}class DirectMessageBridge{constructor(e,t){this.source=e,this.target=t,this.messageObserver=null}listen(e){this.messageObserver||(this.messageObserver=e,this.source.addObserver(e))}stopListening(){this.messageObserver&&this.source.removeObserver(this.messageObserver)}send(e){const t=this.target;t&&t.post(Object.assign({},e),this.source)}}class DirectMessageFactory{constructor(e,t,n,i){this.sourceId=e,this.sourceNode=t,this.targetId=n,this.targetNode=i}createMessenger(){const e=new DirectMessageBridge(this.sourceNode,this.targetNode);return new Messenger(this.sourceId,this.targetId,e)}}class DirectMessageNode{constructor(e){this.origin=e,this.observers=new Set}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}post(e,t){for(const n of this.observers)n.notify(e,t)}}class DirectMessageListener{constructor(e){this.targetNode=e,this.messageObserver=null,this.onMessage=(e,t)=>{this.messageObserver&&this.messageObserver.notify({payload:Object.assign({},e.payload),type:e.type},{id:e.fromId,source:t},e.timestamp)}}listen(e){this.messageObserver||(this.messageObserver=e,this.targetNode.addObserver({notify:(e,t)=>{this.onMessage(e,t)}}))}stopListening(){this.messageObserver=null}}},31511:(e,t,n)=>{"use strict";var i,s,r,o,a,l,c,d,u,h,p,m,g,f,v;n.d(t,{kJ:()=>o,Uv:()=>c,AR:()=>d}),function(e){let t,n,i;!function(e){e.PHASE_CHANGE="application.phasechange"}(t=e.Event||(e.Event={})),function(e){e.UNINITIALIZED="appphase.uninitialized",e.WAITING="appphase.waiting",e.LOADING="appphase.loading",e.STARTING="appphase.starting",e.PLAYING="appphase.playing",e.ERROR="appphase.error"}(n=e.Phase||(e.Phase={})),function(e){e.SHOWCASE="application.showcase"}(i=e.Application||(e.Application={}))}(i||(i={})),function(e){let t,n;!function(e){e.MOVE="camera.move"}(t=e.Event||(e.Event={})),function(e){e.FORWARD="FORWARD",e.LEFT="LEFT",e.RIGHT="RIGHT",e.BACK="BACK",e.UP="UP",e.DOWN="DOWN"}(n=e.Direction||(e.Direction={}))}(s||(s={})),function(e){let t;!function(e){e.CHANGE_START="floors.changestart",e.CHANGE_END="floors.changeend"}(t=e.Event||(e.Event={}))}(r||(r={})),function(e){let t;!function(e){e.SUCCESS="astar.status.success",e.NO_PATH="astar.status.no_path",e.TIMEOUT="astar.status.timeout",e.NO_START_VERTEX="astar.status.no_start",e.NO_END_VERTEX="astar.status.no_end"}(t=e.AStarStatus||(e.AStarStatus={}))}(o||(o={})),function(e){let t;!function(e){e.POSITION_UPDATED="label.positionupdated"}(t=e.Event||(e.Event={}))}(a||(a={})),function(e){let t,n;!function(e){e.WINDOW="link.creationpolicy.window",e.REFERRER="link.creationpolicy.referrer",e.MATTERPORT="link.creationpolicy.matterport"}(t=e.CreationPolicy||(e.CreationPolicy={})),function(e){e.DEFAULT="link.openpolicy.deafult",e.NEW_WINDOW="link.openpolicy.newwindow",e.SAME_FRAME="link.openpolicy.sameframe",e.CURRENT_WINDOW="link.openpolicy.current"}(n=e.OpenPolicy||(e.OpenPolicy={}))}(l||(l={})),function(e){let t,n,i,s,r;!function(e){e.INSTANT="transition.instant",e.FLY="transition.fly",e.FADEOUT="transition.fade"}(t=e.Transition||(e.Transition={})),function(e){e.NAVIGATION="tag.link.nav",e.MODEL="tag.link.model",e.EXT_LINK="tag.link.ext"}(n=e.LinkType||(e.LinkType={})),function(e){e.NONE="tag.chunk.none",e.TEXT="tag.chunk.text",e.LINK="tag.chunk.link"}(i=e.DescriptionChunkType||(e.DescriptionChunkType={})),function(e){e.HOVER="tag.hover",e.CLICK="tag.click",e.LINK_OPEN="tag.linkopen"}(s=e.Event||(e.Event={})),function(e){e.NONE="mattertag.media.none",e.PHOTO="mattertag.media.photo",e.VIDEO="mattertag.media.video",e.RICH="mattertag.media.rich"}(r=e.MediaType||(e.MediaType={}))}(c||(c={})),function(e){let t,n,i;!function(e){e.INSIDE="mode.inside",e.OUTSIDE="mode.outside",e.DOLLHOUSE="mode.dollhouse",e.FLOORPLAN="mode.floorplan",e.TRANSITIONING="mode.transitioning"}(t=e.Mode||(e.Mode={})),function(e){e.CHANGE_START="viewmode.changestart",e.CHANGE_END="viewmode.changeend"}(n=e.Event||(e.Event={})),function(e){e.INSTANT="transition.instant",e.FLY="transition.fly",e.FADEOUT="transition.fade"}(i=e.TransitionType||(e.TransitionType={}))}(d||(d={})),function(e){let t;!function(e){e.MODEL_LOADED="model.loaded"}(t=e.Event||(e.Event={}))}(u||(u={})),function(e){let t;!function(e){e.NONE="intersectedobject.none",e.MODEL="intersectedobject.model",e.TAG="intersectedobject.tag",e.SWEEP="intersectedobject.sweep",e.UNKNOWN="intersectedobject.unknown"}(t=e.Colliders||(e.Colliders={}))}(h||(h={})),function(e){let t,n,i;!function(e){e.OBJ_LOADER="mp.objLoader",e.FBX_LOADER="mp.fbxLoader",e.DAE_LOADER="mp.daeLoader",e.GLTF_LOADER="mp.gltfLoader",e.SCROLLING_TUBE="mp.scrollingTube",e.TRANSFORM_CONTROLS="mp.transformControls",e.LIGHTS_COMPONENT="mp.lights",e.POINT_LIGHT="mp.pointLight",e.DIRECTIONAL_LIGHT="mp.directionalLight",e.AMBIENT_LIGHT="mp.ambientLight",e.CAMERA="mp.camera",e.INPUT="mp.input",e.XR="mp.xr"}(t=e.ComponentType||(e.ComponentType={})),function(e){e.CLICK="INTERACTION.CLICK",e.HOVER="INTERACTION.HOVER",e.DRAG="INTERACTION.DRAG",e.DRAG_BEGIN="INTERACTION.DRAG_BEGIN",e.DRAG_END="INTERACTION.DRAG_END",e.POINTER_MOVE="INTERACTION.POINTER_MOVE",e.POINTER_BUTTON="INTERACTION.POINTER_BUTTON",e.SCROLL="INTERACTION.SCROLL",e.KEY="INTERACTION.KEY",e.LONG_PRESS_START="INTERACTION.LONG_PRESS_START",e.LONG_PRESS_END="INTERACTION.LONG_PRESS_END",e.MULTI_SWIPE="INTERACTION.MULTI_SWIPE",e.MULTI_SWIPE_END="INTERACTION.MULTI_SWIPE_END",e.PINCH="INTERACTION.PINCH",e.PINCH_END="INTERACTION.PINCH_END",e.ROTATE="INTERACTION.ROTATE",e.ROTATE_END="INTERACTION.ROTATE_END"}(n=e.InteractionType||(e.InteractionType={})),function(e){e.INPUT="input",e.OUTPUT="output",e.EVENT="event",e.EMIT="emit"}(i=e.PathType||(e.PathType={}))}(p||(p={})),function(e){let t,n;!function(e){e.CAMERA="sensor.sensortype.camera"}(t=e.SensorType||(e.SensorType={})),function(e){e.SPHERE="sensor.sourcetype.sphere",e.BOX="sensor.sourcetype.box",e.CYLINDER="sensor.sourcetype.cylinder"}(n=e.SourceType||(e.SourceType={}))}(m||(m={})),function(e){let t,n,i,s;!function(e){e.ENTER="sweep.enter",e.EXIT="sweep.exit"}(t=e.Event||(e.Event={})),function(e){e.INSTANT="transition.instant",e.FLY="transition.fly",e.FADEOUT="transition.fade"}(n=e.Transition||(e.Transition={})),function(e){e.ALIGNED="aligned",e.UNALIGNED="unaligned"}(i=e.Alignment||(e.Alignment={})),function(e){e.UNPLACED="unplaced",e.AUTO="auto",e.MANUAL="manual"}(s=e.Placement||(e.Placement={}))}(g||(g={})),function(e){let t;!function(e){e.UNKNOWN="tag.attachment.unknown",e.APPLICATION="tag.attachment.application",e.AUDIO="tag.attachment.audio",e.IMAGE="tag.attachment.image",e.MODEL="tag.attachment.model",e.PDF="tag.attachment.pdf",e.RICH="tag.attachment.rich",e.TEXT="tag.attachment.text",e.VIDEO="tag.attachment.video",e.ZIP="tag.attachment.zip",e.SANDBOX="tag.attachment.sandbox"}(t=e.AttachmentType||(e.AttachmentType={}))}(f||(f={})),function(e){let t,n;!function(e){e.STARTED="tour.started",e.STOPPED="tour.stopped",e.ENDED="tour.ended",e.STEPPED="tour.stepped"}(t=e.Event||(e.Event={})),function(e){e.INACTIVE="tour.inactive",e.ACTIVE="tour.active",e.STOP_SCHEDULED="tour.stopscheduled"}(n=e.PlayState||(e.PlayState={}))}(v||(v={}))},84759:(e,t,n)=>{"use strict";n.d(t,{X:()=>DictArray});class DictArray{constructor(){this.values={}}add(e,t){this.getValuesAtKey(e).push(t)}remove(e,t){const n=this.values[e];if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}removeKey(e){delete this.values[e]}getValuesAtKey(e){const t=this.values[e]||[];return this.values[e]=t,t}valuesPerKey(e){return this.getValuesAtKey(e).length}find(e,t){return this.values[e]&&this.values[e].find(t)}get keys(){return Object.keys(this.values)}hasKey(e){return e in this.values}has(e,t){return this.hasKey(e)&&this.values[e].includes(t)}*[Symbol.iterator](){for(const e in this.values)for(const t of this.values[e])yield[e,t]}}},28732:(e,t,n)=>{"use strict";function i(e){return"number"==typeof e&&!isNaN(e)}n.d(t,{hj:()=>i})},13855:(e,t,n)=>{"use strict";function i(e,t){return Object.values(e).includes(t)}n.d(t,{p:()=>i})},4951:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var i=n(28732);function s(e){if(e&&"object"==typeof e&&"x"in e&&"y"in e&&"z"in e){const t=e;return(0,i.hj)(t.x)&&(0,i.hj)(t.y)&&(0,i.hj)(t.z)}return!1}},42238:function(e,t,n){var i;!function(s,r){"use strict";var o="function",a="undefined",l="object",c="model",d="name",u="type",h="vendor",p="version",m="architecture",g="console",f="mobile",v="tablet",b="smarttv",y="wearable",S={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},E={rgx:function(e,t){for(var n,i,s,a,c,d,u=0;u<t.length&&!c;){var h=t[u],p=t[u+1];for(n=i=0;n<h.length&&!c;)if(c=h[n++].exec(e))for(s=0;s<p.length;s++)d=c[++i],typeof(a=p[s])===l&&a.length>0?2==a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,d):this[a[0]]=a[1]:3==a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=d?d.replace(a[1],a[2]):r:this[a[0]]=d?a[1].call(this,d,a[2]):r:4==a.length&&(this[a[0]]=d?a[3].call(this,d.replace(a[1],a[2])):r):this[a]=d||r;u+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(S.has(t[n][i],e))return"?"===n?r:n}else if(S.has(t[n],e))return"?"===n?r:n;return e}},T={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},O={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[d,p],[/(opios)[\/\s]+([\w\.]+)/i],[[d,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[d,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[d,p],[/(konqueror)\/([\w\.]+)/i],[[d,"Konqueror"],p],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[d,"IE"],p],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[d,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[d,"Yandex"],p],[/(Avast)\/([\w\.]+)/i],[[d,"Avast Secure Browser"],p],[/(AVG)\/([\w\.]+)/i],[[d,"AVG Secure Browser"],p],[/(puffin)\/([\w\.]+)/i],[[d,"Puffin"],p],[/(focus)\/([\w\.]+)/i],[[d,"Firefox Focus"],p],[/(opt)\/([\w\.]+)/i],[[d,"Opera Touch"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[d,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(windowswechat qbcore)\/([\w\.]+)/i],[[d,"WeChat(Win) Desktop"],p],[/(micromessenger)\/([\w\.]+)/i],[[d,"WeChat"],p],[/(brave)\/([\w\.]+)/i],[[d,"Brave"],p],[/(whale)\/([\w\.]+)/i],[[d,"Whale"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[d,p],[/(QQ)\/([\d\.]+)/i],[d,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[d,p],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[d,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[d,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[d],[/(LBBROWSER)/i],[d],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[d,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[d,p],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[d,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[d,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[d,"Sailfish Browser"],p],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,p],[/(dolfin)\/([\w\.]+)/i],[[d,"Dolphin"],p],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[d,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[d,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[d,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[d,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,d],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[d,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[p,E.str,T.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,S.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[c,h,[u,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[h,"Apple"],[u,v]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[h,"Apple"],[u,b]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[h,c,[u,v]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[c,[h,"Amazon"],[u,v]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[c,E.str,T.device.amazon.model],[h,"Amazon"],[u,f]],[/android.+aft([bms])\sbuild/i],[c,[h,"Amazon"],[u,b]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,h,[u,f]],[/\((ip[honed|\s\w*]+);/i],[c,[h,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[h,c,[u,f]],[/\(bb10;\s(\w+)/i],[c,[h,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[c,[h,"Asus"],[u,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[h,"Sony"],[c,"Xperia Tablet"],[u,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[h,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[h,c,[u,g]],[/android.+;\s(shield)\sbuild/i],[c,[h,"Nvidia"],[u,g]],[/(playstation\s[34portablevi]+)/i],[c,[h,"Sony"],[u,g]],[/(sprint\s(\w+))/i],[[h,E.str,T.device.sprint.vendor],[c,E.str,T.device.sprint.model],[u,f]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[h,[c,/_/g," "],[u,f]],[/(nexus\s9)/i],[c,[h,"HTC"],[u,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[c,[h,"Huawei"],[u,f]],[/android.+(bah2?-a?[lw]\d{2})/i],[c,[h,"Huawei"],[u,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[h,c,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[h,"Microsoft"],[u,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[h,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[h,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[h,"Motorola"],[u,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[h,S.trim],[c,S.trim],[u,b]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[h,"Samsung"],[u,b]],[/\(dtv[\);].+(aquos)/i],[c,[h,"Sharp"],[u,b]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[h,"Samsung"],c,[u,v]],[/smart-tv.+(samsung)/i],[h,[u,b],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[h,"Samsung"],c,[u,f]],[/sie-(\w*)/i],[c,[h,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[h,"Nokia"],c,[u,f]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[c,[h,"Acer"],[u,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[h,"LG"],[u,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[h,"LG"],c,[u,v]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[h,"LG"],c,[u,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[h,"LG"],[u,f]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[h,c,[u,v]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[h,"Lenovo"],[u,v]],[/(lenovo)[_\s-]?([\w-]+)/i],[h,c,[u,f]],[/linux;.+((jolla));/i],[h,c,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[h,c,[u,y]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[h,c,[u,f]],[/crkey/i],[[c,"Chromecast"],[h,"Google"],[u,b]],[/android.+;\s(glass)\s\d/i],[c,[h,"Google"],[u,y]],[/android.+;\s(pixel c)[\s)]/i],[c,[h,"Google"],[u,v]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[c,[h,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[c,/_/g," "],[h,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[c,/_/g," "],[h,"Xiaomi"],[u,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[h,"Meizu"],[u,f]],[/(mz)-([\w-]{2,})/i],[[h,"Meizu"],c,[u,f]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[c,[h,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[h,"RCA"],[u,v]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[c,[h,"Dell"],[u,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[h,"Verizon"],[u,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[h,"Barnes & Noble"],c,[u,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[h,"NuVision"],[u,v]],[/android.+;\s(k88)\sbuild/i],[c,[h,"ZTE"],[u,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[h,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[h,"Swiss"],[u,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[h,"Zeki"],[u,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[h,"Dragon Touch"],c,[u,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[h,"Insignia"],[u,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[h,"NextBook"],[u,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[h,"Voice"],c,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[h,"LvTel"],c,[u,f]],[/android.+;\s(PH-1)\s/i],[c,[h,"Essential"],[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[h,"Envizen"],[u,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[h,c,[u,v]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[c,[h,"MachSpeed"],[u,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[h,c,[u,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[h,"Rotor"],[u,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[h,c,[u,v]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[c,[u,f]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[c,[u,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,S.lowerize],h,c],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,b]],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[h,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[p,E.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[p,E.str,T.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[d,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[d,"Symbian"],p],[/\((series40);/i],[d],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],p],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[d,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[d,p],[/(haiku)\s(\w+)/i],[d,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,p]]},_=function(e,t){if("object"==typeof e&&(t=e,e=r),!(this instanceof _))return new _(e,t).getResult();var n=e||(s&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:""),i=t?S.extend(O,t):O;return this.getBrowser=function(){var e={name:r,version:r};return E.rgx.call(e,n,i.browser),e.major=S.major(e.version),e},this.getCPU=function(){var e={architecture:r};return E.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return E.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:r,version:r};return E.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:r,version:r};return E.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};_.VERSION="0.7.23",_.BROWSER={NAME:d,MAJOR:"major",VERSION:p},_.CPU={ARCHITECTURE:m},_.DEVICE={MODEL:c,VENDOR:h,TYPE:u,CONSOLE:g,MOBILE:f,SMARTTV:b,TABLET:v,WEARABLE:y,EMBEDDED:"embedded"},_.ENGINE={NAME:d,VERSION:p},_.OS={NAME:d,VERSION:p},typeof t!==a?(e.exports&&(t=e.exports=_),t.UAParser=_):(i=function(){return _}.call(t,n,t,e))===r||(e.exports=i);var A=s&&(s.jQuery||s.Zepto);if(A&&!A.ua){var w=new _;A.ua=w.getResult(),A.ua.get=function(){return w.getUA()},A.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var n in t)A.ua[n]=t[n]}}}("object"==typeof window?window:this)},69436:e=>{function t(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=n,this.p2y=i}e.exports=t,t.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},t.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},t.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},t.prototype.solveCurveX=function(e,t){var n,i,s,r,o;for(void 0===t&&(t=1e-6),s=e,o=0;o<8;o++){if(r=this.sampleCurveX(s)-e,Math.abs(r)<t)return s;var a=this.sampleCurveDerivativeX(s);if(Math.abs(a)<1e-6)break;s-=r/a}if((s=e)<(n=0))return n;if(s>(i=1))return i;for(;n<i;){if(r=this.sampleCurveX(s),Math.abs(r-e)<t)return s;e>r?n=s:i=s,s=.5*(i-n)+n}return s},t.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},52511:function(e,t,n){var i;e=n.nmd(e),function(s){t&&t.nodeType,e&&e.nodeType;var r="object"==typeof n.g&&n.g;r.global!==r&&r.window!==r&&r.self;var o,a=2147483647,l=36,c=/^xn--/,d=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function g(e){throw RangeError(h[e])}function f(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function v(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+f((e=e.replace(u,".")).split("."),t).join(".")}function b(e){for(var t,n,i=[],s=0,r=e.length;s<r;)(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<r?56320==(64512&(n=e.charCodeAt(s++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),s--):i.push(t);return i}function y(e){return f(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var i=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;i+=l)e=p(e/35);return p(i+36*e/(e+38))}function T(e){var t,n,i,s,r,o,c,d,u,h,m,f=[],v=e.length,b=0,S=128,T=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&g("not-basic"),f.push(e.charCodeAt(i));for(s=n>0?n+1:0;s<v;){for(r=b,o=1,c=l;s>=v&&g("invalid-input"),((d=(m=e.charCodeAt(s++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:l)>=l||d>p((a-b)/o))&&g("overflow"),b+=d*o,!(d<(u=c<=T?1:c>=T+26?26:c-T));c+=l)o>p(a/(h=l-u))&&g("overflow"),o*=h;T=E(b-r,t=f.length+1,0==r),p(b/t)>a-S&&g("overflow"),S+=p(b/t),b%=t,f.splice(b++,0,S)}return y(f)}function O(e){var t,n,i,s,r,o,c,d,u,h,f,v,y,T,O,_=[];for(v=(e=b(e)).length,t=128,n=0,r=72,o=0;o<v;++o)(f=e[o])<128&&_.push(m(f));for(i=s=_.length,s&&_.push("-");i<v;){for(c=a,o=0;o<v;++o)(f=e[o])>=t&&f<c&&(c=f);for(c-t>p((a-n)/(y=i+1))&&g("overflow"),n+=(c-t)*y,t=c,o=0;o<v;++o)if((f=e[o])<t&&++n>a&&g("overflow"),f==t){for(d=n,u=l;!(d<(h=u<=r?1:u>=r+26?26:u-r));u+=l)O=d-h,T=l-h,_.push(m(S(h+O%T,0))),d=p(O/T);_.push(m(S(d,0))),r=E(n,y,i==s),n=0,++i}++n,++t}return _.join("")}o={version:"1.3.2",ucs2:{decode:b,encode:y},decode:T,encode:O,toASCII:function(e){return v(e,(function(e){return d.test(e)?"xn--"+O(e):e}))},toUnicode:function(e){return v(e,(function(e){return c.test(e)?T(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}()},27225:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,i,s){n=n||"&",i=i||"=";var r={};if("string"!=typeof e||0===e.length)return r;var o=/\+/g;e=e.split(n);var a=1e3;s&&"number"==typeof s.maxKeys&&(a=s.maxKeys);var l=e.length;a>0&&l>a&&(l=a);for(var c=0;c<l;++c){var d,u,h,p,m=e[c].replace(o,"%20"),g=m.indexOf(i);g>=0?(d=m.substr(0,g),u=m.substr(g+1)):(d=m,u=""),h=decodeURIComponent(d),p=decodeURIComponent(u),t(r,h)?Array.isArray(r[h])?r[h].push(p):r[h]=[r[h],p]:r[h]=p}return r}},44066:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,i,s){return n=n||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(s){var r=encodeURIComponent(t(s))+i;return Array.isArray(e[s])?e[s].map((function(e){return r+encodeURIComponent(t(e))})).join(n):r+encodeURIComponent(t(e[s]))})).join(n):s?encodeURIComponent(t(s))+i+encodeURIComponent(t(e)):""}},36254:(e,t,n)=>{"use strict";t.decode=t.parse=n(27225),t.encode=t.stringify=n(44066)},8575:(e,t,n)=>{"use strict";var i=n(52511),s=n(62502);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=y;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),u=["%","/","?",";","#"].concat(d),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(36254);function y(e,t,n){if(e&&s.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}r.prototype.parse=function(e,t,n){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),a=-1!==r&&r<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var y=e=c.join(a);if(y=y.trim(),!n&&1===e.split("#").length){var S=l.exec(y);if(S)return this.path=y,this.href=y,this.pathname=S[1],S[2]?(this.search=S[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=o.exec(y);if(E){var T=(E=E[0]).toLowerCase();this.protocol=T,y=y.substr(E.length)}if(n||E||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===y.substr(0,2);!O||E&&f[E]||(y=y.substr(2),this.slashes=!0)}if(!f[E]&&(O||E&&!v[E])){for(var _,A,w=-1,N=0;N<h.length;N++){-1!==(P=y.indexOf(h[N]))&&(-1===w||P<w)&&(w=P)}-1!==(A=-1===w?y.lastIndexOf("@"):y.lastIndexOf("@",w))&&(_=y.slice(0,A),y=y.slice(A+1),this.auth=decodeURIComponent(_)),w=-1;for(N=0;N<u.length;N++){var P;-1!==(P=y.indexOf(u[N]))&&(-1===w||P<w)&&(w=P)}-1===w&&(w=y.length),this.host=y.slice(0,w),y=y.slice(w),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var k=this.hostname.split(/\./),C=(N=0,k.length);N<C;N++){var L=k[N];if(L&&!L.match(p)){for(var M="",D=0,R=L.length;D<R;D++)L.charCodeAt(D)>127?M+="x":M+=L[D];if(!M.match(p)){var x=k.slice(0,N),j=k.slice(N+1),U=L.match(m);U&&(x.push(U[1]),j.unshift(U[2])),j.length&&(y="/"+j.join(".")+y),this.hostname=x.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=i.toASCII(this.hostname));var H=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+H,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[T])for(N=0,C=d.length;N<C;N++){var B=d[N];if(-1!==y.indexOf(B)){var V=encodeURIComponent(B);V===B&&(V=escape(B)),y=y.split(B).join(V)}}var G=y.indexOf("#");-1!==G&&(this.hash=y.substr(G),y=y.slice(0,G));var W=y.indexOf("?");if(-1!==W?(this.search=y.substr(W),this.query=y.substr(W+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,W)):t&&(this.search="",this.query={}),y&&(this.pathname=y),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){H=this.pathname||"";var z=this.search||"";this.path=H+z}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),t+r+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i},r.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(s.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var d=l[c];"protocol"!==d&&(n[d]=e[d])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var p=u[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||f[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",b=n.search||"";n.path=g+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),S=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=S||y||n.host&&e.pathname,T=E,O=n.pathname&&n.pathname.split("/")||[],_=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),E=E&&(""===m[0]||""===O[0])),S)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,O=m;else if(m.length)O||(O=[]),O.pop(),O=O.concat(m),n.search=e.search,n.query=e.query;else if(!s.isNullOrUndefined(e.search)){if(_)n.hostname=n.host=O.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=O.slice(-1)[0],w=(n.host||e.host||O.length>1)&&("."===A||".."===A)||""===A,N=0,P=O.length;P>=0;P--)"."===(A=O[P])?O.splice(P,1):".."===A?(O.splice(P,1),N++):N&&(O.splice(P,1),N--);if(!E&&!T)for(;N--;N)O.unshift("..");!E||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),w&&"/"!==O.join("/").substr(-1)&&O.push("");var I,k=""===O[0]||O[0]&&"/"===O[0].charAt(0);_&&(n.hostname=n.host=k?"":O.length?O.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(E=E||n.host&&O.length)&&!k&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},62502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},42473:e=>{"use strict";var t=function(){};e.exports=t},55512:(e,t,n)=>{var i,s;void 0===(s="function"==typeof(i=function(){"use strict";const e=6406,t=6407,n=6408,i=6409,s=6410,r=6402,o=34041,a=33321,l=36756,c=33325,d=33326,u=33330,h=33329,p=33338,m=33337,g=33340,f=33339,v=33323,b=36757,y=33327,S=33328,E=33336,T=33335,O=33332,_=33331,A=33334,w=33333,N=32849,P=35905,I=36194,k=36758,C=35898,L=35901,M=34843,D=34837,R=36221,x=36239,j=36215,U=36233,H=36209,F=36227,B=32856,V=35907,G=36759,W=32855,z=32854,K=32857,Y=34842,q=34836,$=36220,Z=36238,Q=36975,X=36214,J=36232,ee=36226,te=36208,ne=33189,ie=33190,se=36012,re=36013,oe=35056,ae=5121,le=5123,ce=5125,de=5126,ue=32819,he=32820,pe=33635,me=5131,ge=36193,fe=35906;let ve;function be(be){if(!ve){const be={};be[e]={bytesPerElement:[1,2,2,4],type:[ae,me,ge,de]},be[i]={bytesPerElement:[1,2,2,4],type:[ae,me,ge,de]},be[s]={bytesPerElement:[2,4,4,8],type:[ae,me,ge,de]},be[t]={bytesPerElement:[3,6,6,12,2],type:[ae,me,ge,de,pe]},be[n]={bytesPerElement:[4,8,8,16,2,2],type:[ae,me,ge,de,ue,he]},be[fe]={bytesPerElement:[4,8,8,16,2,2],type:[ae,me,ge,de,ue,he]},be[r]={bytesPerElement:[2,4],type:[ce,le]},be[o]={bytesPerElement:[4]},be[a]={bytesPerElement:[1]},be[l]={bytesPerElement:[1]},be[c]={bytesPerElement:[2]},be[d]={bytesPerElement:[4]},be[u]={bytesPerElement:[1]},be[h]={bytesPerElement:[1]},be[O]={bytesPerElement:[2]},be[_]={bytesPerElement:[2]},be[A]={bytesPerElement:[4]},be[w]={bytesPerElement:[4]},be[v]={bytesPerElement:[2]},be[b]={bytesPerElement:[2]},be[y]={bytesPerElement:[4]},be[S]={bytesPerElement:[8]},be[E]={bytesPerElement:[2]},be[T]={bytesPerElement:[2]},be[p]={bytesPerElement:[4]},be[m]={bytesPerElement:[4]},be[g]={bytesPerElement:[8]},be[f]={bytesPerElement:[8]},be[N]={bytesPerElement:[3]},be[P]={bytesPerElement:[3]},be[I]={bytesPerElement:[2]},be[k]={bytesPerElement:[3]},be[C]={bytesPerElement:[4]},be[L]={bytesPerElement:[4]},be[M]={bytesPerElement:[6]},be[D]={bytesPerElement:[12]},be[R]={bytesPerElement:[3]},be[x]={bytesPerElement:[3]},be[j]={bytesPerElement:[6]},be[U]={bytesPerElement:[6]},be[H]={bytesPerElement:[12]},be[F]={bytesPerElement:[12]},be[B]={bytesPerElement:[4]},be[V]={bytesPerElement:[4]},be[G]={bytesPerElement:[4]},be[W]={bytesPerElement:[2]},be[z]={bytesPerElement:[2]},be[K]={bytesPerElement:[4]},be[Y]={bytesPerElement:[8]},be[q]={bytesPerElement:[16]},be[$]={bytesPerElement:[4]},be[Z]={bytesPerElement:[4]},be[Q]={bytesPerElement:[4]},be[X]={bytesPerElement:[8]},be[J]={bytesPerElement:[8]},be[ee]={bytesPerElement:[16]},be[te]={bytesPerElement:[16]},be[ne]={bytesPerElement:[2]},be[ie]={bytesPerElement:[4]},be[se]={bytesPerElement:[4]},be[oe]={bytesPerElement:[4]},be[re]={bytesPerElement:[4]},ve=be}return ve[be]}function ye(e,t,n){return function(i,s,r){return((i+e-1)/e|0)*((s+t-1)/t|0)*n*r}}function Se(e,t,n){return function(i,s,r){return(Math.max(i,e)*Math.max(s,t)/n|0)*r}}const Ee=33777,Te=33778,Oe=33779,_e=36196,Ae=35840,we=35841,Ne=35842,Pe=35843,Ie=37488,ke=37489,Ce=37490,Le=37491,Me=37492,De=37493,Re=37494,xe=37495,je=37496,Ue=37497,He=37808,Fe=37809,Be=37810,Ve=37811,Ge=37812,We=37813,ze=37814,Ke=37815,Ye=37816,qe=37817,$e=37818,Ze=37819,Qe=37820,Xe=37821,Je=37840,et=37841,tt=37842,nt=37843,it=37844,st=37845,rt=37846,ot=37847,at=37848,lt=37849,ct=37850,dt=37851,ut=37852,ht=37853,pt=35916,mt=35917,gt=35918,ft=35919,vt=36492,bt=36493,yt=36494,St=36495,Et=36283,Tt=36284,Ot=36285,_t=36286,At=new Map([[33776,ye(4,4,8)],[Ee,ye(4,4,8)],[Te,ye(4,4,16)],[Oe,ye(4,4,16)],[_e,ye(4,4,8)],[Ae,Se(8,8,2)],[Ne,Se(8,8,2)],[we,Se(16,8,4)],[Pe,Se(16,8,4)],[Ie,ye(4,4,8)],[ke,ye(4,4,8)],[Me,ye(4,4,8)],[De,ye(4,4,8)],[Re,ye(4,4,8)],[xe,ye(4,4,8)],[Ce,ye(4,4,16)],[Le,ye(4,4,16)],[je,ye(4,4,16)],[Ue,ye(4,4,16)],[He,ye(4,4,16)],[Je,ye(4,4,16)],[Fe,ye(5,4,16)],[et,ye(5,4,16)],[Be,ye(5,5,16)],[tt,ye(5,5,16)],[Ve,ye(6,5,16)],[nt,ye(6,5,16)],[Ge,ye(6,6,16)],[it,ye(6,6,16)],[We,ye(8,5,16)],[st,ye(8,5,16)],[ze,ye(8,6,16)],[rt,ye(8,6,16)],[Ke,ye(8,8,16)],[ot,ye(8,8,16)],[Ye,ye(10,5,16)],[at,ye(10,5,16)],[qe,ye(10,6,16)],[lt,ye(10,6,16)],[$e,ye(10,8,16)],[ct,ye(10,8,16)],[Ze,ye(10,10,16)],[dt,ye(10,10,16)],[Qe,ye(12,10,16)],[ut,ye(12,10,16)],[Xe,ye(12,12,16)],[ht,ye(12,12,16)],[pt,ye(4,4,8)],[mt,ye(4,4,8)],[gt,ye(4,4,16)],[ft,ye(4,4,16)],[vt,ye(4,4,16)],[bt,ye(4,4,16)],[yt,ye(4,4,16)],[St,ye(4,4,16)],[Et,ye(4,4,8)],[Tt,ye(4,4,8)],[Ot,ye(4,4,16)],[_t,ye(4,4,16)]]);function wt(e,t){const n=be(e);if(!n)throw"unknown internal format";if(n.type){const i=n.type.indexOf(t);if(i<0)throw new Error(`unsupported type ${t} for internalformat ${e}`);return n.bytesPerElement[i]}return n.bytesPerElement[0]}function Nt(e,t,n,i,s){return t*n*i*wt(e,s)}function Pt(e,t,n,i,s){const r=At.get(e);return r?r(t,n,i):Nt(e,t,n,i,s)}function It(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}function kt(e){return It(e)||e instanceof ArrayBuffer}function Ct(e){return{samples:e.getParameter(e.SAMPLES),depthBits:e.getParameter(e.DEPTH_BITS),contextAttributes:e.getContextAttributes()}}function Lt(e,t){const{samples:n,depthBits:i,contextAttributes:s}=t,{width:r,height:o}=e.canvas,a=r*o*4,l=s.depth?1:0,c=s.stencil?1:0;return a+a*n+a*l*Math.min(c+i>16?4:2,4)}function Mt(e){return"number"==typeof e}const Dt=new Set;function Rt(e,t,n={}){if(Dt.has(e))return e;Dt.add(e);const i=n.origGLErrorFn||e.getError;function s(e){const t=Ct(e),i={baseContext:e,config:n,apis:{gman_webgl_memory:{ctx:{getMemoryInfo(){const n=Lt(e,t);return{memory:{...d,drawingbuffer:n,total:n+d.buffer+d.texture+d.renderbuffer},resources:{...u}}}}}},resources:{},memory:{texture:0,buffer:0,renderbuffer:0},bindings:new Map,defaultVertexArray:{},webglObjectToMemory:new Map},s=new Set(["webgl","webgl2","webgl_lose_context"]);function r(){i.bindings.clear(),i.webglObjectToMemory.clear(),i.webglObjectToMemory.set(i.defaultVertexArray,{}),i.currentVertexArray=i.defaultVertexArray,[i.resources,i.memory].forEach((function(e){for(let t in e)e[t]=0}))}function a(){r(),i.isContextLost=!0;for(const[e,{ctx:t,origFuncs:n}]of[...Object.entries(i.apis)])if(!s.has(e)&&n){Dt.delete(t);for(const[e,i]of Object.entries(n))t[e]=i;delete o[e]}}function l(){i.isContextLost=!1}return e.canvas&&(e.canvas.addEventListener("webglcontextlost",a),e.canvas.addEventListener("webglcontextrestored",l)),r(),i}const r=n.sharedState||s(e);n.sharedState=r;const{apis:o,baseContext:a,bindings:l,config:c,memory:d,resources:u,webglObjectToMemory:h}=r,p={};function m(){}function g(e,t,n){if(e[n||`create${t[0].toUpperCase()}${t.substr(1)}`])return u[t]=0,function(e,n,i,s){if(r.isContextLost)return null;++u[t],h.set(s,{size:0})}}function f(t,n=m,i){const s=i||`delete${t[0].toUpperCase()}${t.substr(1)}`;if(e[s])return function(e,i,s){if(r.isContextLost)return;const[o]=s,a=h.get(o);a&&(--u[t],n(o,a),h.delete(o))}}function v(e,t,n,i,s){if(r.isContextLost)return;const o=l.get(e);if(!o)throw new Error(`no renderbuffer bound to ${e}`);const a=h.get(o);if(!a)throw new Error(`unknown renderbuffer ${o}`);const c=Pt(n,i,s,1)*t;d.renderbuffer-=a.size,a.size=c,d.renderbuffer+=c}const b=34963,y=5121,S=34067,E=35866,T=34069,O=33084,_=33085,A=new Set([T,34070,34071,34072,34073,34074]);function w(e){return A.has(e)}function N(e){e=w(e)?S:e;const t=l.get(e);if(!t)throw new Error(`no texture bound to ${e}`);const n=h.get(t);if(!n)throw new Error(`unknown texture ${t}`);return n}function P(e,t,n,i,s,r,o,a){const l=e.size,c=Pt(i,s,r,o,a),u=w(t)?t-T:0;e.mips=e.mips||[],e.mips[n]=e.mips[n]||[];const h=e.mips[n][u]||{};e.size-=h.size||0,h.size=c,h.internalFormat=i,h.type=a,h.width=s,h.height=r,h.depth=o,e.mips[n][u]=h,e.size+=c,d.texture-=l,d.texture+=e.size}function I(e,t,n,i,s,r){const o=N(e),a=e===S?6:1,l=e===S?T:e;for(let c=0;c<t;++c){for(let e=0;e<a;++e)P(o,l+e,c,n,i,s,r);i=Math.ceil(Math.max(i/2,1)),s=Math.ceil(Math.max(s/2,1)),r=e===E?r:Math.ceil(Math.max(r/2,1))}}function k(e,t,n){if(r.isContextLost)return;const[i]=n;r.currentVertexArray=i||r.defaultVertexArray}function C(e,t){if(!r.isContextLost)switch(e){case b:h.get(r.currentVertexArray).elementArrayBuffer=t;break;default:l.set(e,t)}}const L={},M={bufferData(e,t,n){if(r.isContextLost)return;const[i,s,,o=0,a]=n;let c;switch(i){case b:c=h.get(r.currentVertexArray).elementArrayBuffer;break;default:c=l.get(i)}if(!c)throw new Error(`no buffer bound to ${i}`);let u=0;if(void 0!==a)u=a*s.BYTES_PER_ELEMENT;else if(kt(s))u=s.byteLength;else{if(!Mt(s))throw new Error(`unsupported bufferData src type ${s}`);u=s}const p=h.get(c);if(!p)throw new Error(`unknown buffer ${c}`);d.buffer-=p.size,p.size=u,d.buffer+=u},bindVertexArray:k,bindVertexArrayOES:k,bindBuffer(e,t,n){const[i,s]=n;C(i,s)},bindBufferBase(e,t,n){const[i,s,r]=n;C(i,r)},bindBufferRange(e,t,n){const[i,s,r,o,a]=n;C(i,r)},bindRenderbuffer(e,t,n){if(r.isContextLost)return;const[i,s]=n;l.set(i,s)},bindTexture(e,t,n){if(r.isContextLost)return;const[i,s]=n;l.set(i,s)},copyTexImage2D(e,t,n){if(r.isContextLost)return;const[i,s,o,a,l,c,d,u]=n;P(N(i),i,s,o,c,d,1,y)},createBuffer:g(e,"buffer"),createFramebuffer:g(e,"framebuffer"),createRenderbuffer:g(e,"renderbuffer"),createProgram:g(e,"program"),createQuery:g(e,"query"),createShader:g(e,"shader"),createSampler:g(e,"sampler"),createTexture:g(e,"texture"),createTransformFeedback:g(e,"transformFeedback"),createVertexArray:g(e,"vertexArray"),createVertexArrayOES:g(e,"vertexArray","createVertexArrayOES"),compressedTexImage2D(e,t,n){if(r.isContextLost)return;const[i,s,o,a,l]=n;P(N(i),i,s,o,a,l,1,y)},compressedTexImage3D(e,t,n){if(r.isContextLost)return;const[i,s,o,a,l,c]=n;P(N(i),i,s,o,a,l,c,y)},deleteBuffer:f("buffer",(function(e,t){d.buffer-=t.size})),deleteFramebuffer:f("framebuffer"),deleteProgram:f("program"),deleteQuery:f("query"),deleteRenderbuffer:f("renderbuffer",(function(e,t){d.renderbuffer-=t.size})),deleteSampler:f("sampler"),deleteShader:f("shader"),deleteSync:f("sync"),deleteTexture:f("texture",(function(e,t){d.texture-=t.size})),deleteTransformFeedback:f("transformFeedback"),deleteVertexArray:f("vertexArray"),deleteVertexArrayOES:f("vertexArray",m,"deleteVertexArrayOES"),fenceSync:function(e){if(!r.isContextLost&&e.fenceSync)return u.sync=0,function(e,t,n,i){++u.sync,h.set(i,{size:0})}}(e),generateMipmap(e,t,n){if(r.isContextLost)return;const[i]=n,s=N(i),o=s.parameters&&s.parameters.get(O)||0,a=s.parameters&&s.parameters.get(_)||1024;let{width:l,height:c,depth:d,internalFormat:u,type:h}=s.mips[o][0],p=o+1;const m=i===S?6:1,g=i===S?T:i;for(;p<=a&&(1!==l||1!==c||1!==d&&i!==E);){l=Math.ceil(Math.max(l/2,1)),c=Math.ceil(Math.max(c/2,1)),d=i===E?d:Math.ceil(Math.max(d/2,1));for(let e=0;e<m;++e)P(s,g+e,p,u,l,c,d,h);++p}},getSupportedExtensions(e,t,n,i){r.isContextLost||i.push("GMAN_webgl_memory")},renderbufferStorage(e,t,n){const[i,s,r,o]=n;v(i,1,s,r,o)},renderbufferStorageMultisample(e,t,n){const[i,s,r,o,a]=n;v(i,s,r,o,a)},texImage2D(e,t,n){if(r.isContextLost)return;let i,s,o,[a,l,c]=n;if(6==n.length){const e=n[5];i=e.width,s=e.height,o=n[4]}else i=n[3],s=n[4],o=n[7];P(N(a),a,l,c,i,s,1,o)},texImage3D(e,t,n){if(r.isContextLost)return;let[i,s,o,a,l,c,d,u,h]=n;P(N(i),i,s,o,a,l,c,h)},texParameteri(e,t,n){if(r.isContextLost)return;let[i,s,o]=n;const a=N(i);a.parameters=a.parameters||new Map,a.parameters.set(s,o)},texStorage2D(e,t,n){let[i,s,r,o,a]=n;I(i,s,r,o,a,1)},texStorage3D(e,t,n){let[i,s,r,o,a,l]=n;I(i,s,r,o,a,l)}},D={getExtension(e,t){if(r.isContextLost)return null;const s=e[t];e[t]=function(...t){const r=t[0].toLowerCase(),a=o[r];if(a)return a.ctx;const l=s.call(e,...t);return l&&Rt(l,r,{...n,origGLErrorFn:i}),l}}};function R(e,t){const n=e[t],s=L[t]||m,r=M[t]||m;if(s===m&&M===m)return;e[t]=function(...i){s(e,t,i);const o=n.call(e,...i);return r(e,t,i,o),o};const o=D[t];o&&o(e,t,i)}for(const t in e)"function"==typeof e[t]&&(p[t]=e[t],R(e,t));o[t.toLowerCase()]={ctx:e,origFuncs:p}}function xt(e){const t=e.prototype.getContext;e.prototype.getContext=function(e,...n){const i=t.call(this,e,...n);return i&&i.bindTexture&&(Rt(i,e,{}),i.getExtension("GMAN_webgl_memory")),i}}"undefined"!=typeof HTMLCanvasElement&&xt(HTMLCanvasElement),"undefined"!=typeof OffscreenCanvas&&xt(OffscreenCanvas)})?i.call(t,n,t,e):i)||(e.exports=s)},81254:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform samplerCube map;uniform vec2 dir;varying vec3 vWorldPosition;vec3 sphereToUnit(float x,float y){return vec3(sin(x)*cos(y),cos(x),sin(x)*sin(y));}vec2 unitToSphere(vec3 unit){return vec2(atan(sqrt(pow(unit.x,2.)+pow(unit.z,2.)),unit.y),atan(unit.z,unit.x));}void main(){vec2 coord=unitToSphere(vWorldPosition);vec4 sum=textureCube(map,sphereToUnit(coord.x-12.*dir.x,coord.y-12.*dir.y))*KERNEL_1;sum+=textureCube(map,sphereToUnit(coord.x-11.*dir.x,coord.y-11.*dir.y))*KERNEL_2;sum+=textureCube(map,sphereToUnit(coord.x-10.*dir.x,coord.y-10.*dir.y))*KERNEL_3;sum+=textureCube(map,sphereToUnit(coord.x-9.*dir.x,coord.y-9.*dir.y))*KERNEL_4;sum+=textureCube(map,sphereToUnit(coord.x-8.*dir.x,coord.y-8.*dir.y))*KERNEL_5;sum+=textureCube(map,sphereToUnit(coord.x-7.*dir.x,coord.y-7.*dir.y))*KERNEL_6;sum+=textureCube(map,sphereToUnit(coord.x-6.*dir.x,coord.y-6.*dir.y))*KERNEL_7;sum+=textureCube(map,sphereToUnit(coord.x-5.*dir.x,coord.y-5.*dir.y))*KERNEL_8;sum+=textureCube(map,sphereToUnit(coord.x-4.*dir.x,coord.y-4.*dir.y))*KERNEL_9;sum+=textureCube(map,sphereToUnit(coord.x-3.*dir.x,coord.y-3.*dir.y))*KERNEL_10;sum+=textureCube(map,sphereToUnit(coord.x-2.*dir.x,coord.y-2.*dir.y))*KERNEL_11;sum+=textureCube(map,sphereToUnit(coord.x-1.*dir.x,coord.y-1.*dir.y))*KERNEL_12;sum+=textureCube(map,sphereToUnit(coord.x,coord.y))*KERNEL_13;sum+=textureCube(map,sphereToUnit(coord.x+1.*dir.x,coord.y+1.*dir.y))*KERNEL_14;sum+=textureCube(map,sphereToUnit(coord.x+2.*dir.x,coord.y+2.*dir.y))*KERNEL_15;sum+=textureCube(map,sphereToUnit(coord.x+3.*dir.x,coord.y+3.*dir.y))*KERNEL_16;sum+=textureCube(map,sphereToUnit(coord.x+4.*dir.x,coord.y+4.*dir.y))*KERNEL_17;sum+=textureCube(map,sphereToUnit(coord.x+5.*dir.x,coord.y+5.*dir.y))*KERNEL_18;sum+=textureCube(map,sphereToUnit(coord.x+6.*dir.x,coord.y+6.*dir.y))*KERNEL_19;sum+=textureCube(map,sphereToUnit(coord.x+7.*dir.x,coord.y+7.*dir.y))*KERNEL_20;sum+=textureCube(map,sphereToUnit(coord.x+8.*dir.x,coord.y+8.*dir.y))*KERNEL_21;sum+=textureCube(map,sphereToUnit(coord.x+9.*dir.x,coord.y+9.*dir.y))*KERNEL_22;sum+=textureCube(map,sphereToUnit(coord.x+10.*dir.x,coord.y+10.*dir.y))*KERNEL_23;sum+=textureCube(map,sphereToUnit(coord.x+11.*dir.x,coord.y+11.*dir.y))*KERNEL_24;sum+=textureCube(map,sphereToUnit(coord.x+12.*dir.x,coord.y+12.*dir.y))*KERNEL_25;gl_FragColor=sum;}"},64937:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;varying vec3 vWorldPosition;void main(){vWorldPosition=position;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}"},56128:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform samplerCube map;uniform float opacity;varying vec3 vWorldPosition;void main(){vec4 color=textureCube(map,vec3(-vWorldPosition.x,vWorldPosition.yz));gl_FragColor=vec4(color.rgb,opacity);}"},65723:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;varying vec3 vWorldPosition;void main(){vWorldPosition=position;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}"},51095:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform vec3 color;uniform float opacity;uniform float maxDistance;varying vec3 vWorldPosition;void main(){float distanceToCamera=distance(cameraPosition,vWorldPosition);float distanceBucketed=1.-clamp(distanceToCamera/maxDistance,0.,1.);if(opacity<1.){discard;}gl_FragColor=vec4(distanceBucketed,distanceBucketed,distanceBucketed,1.);}"},2835:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;varying vec3 vWorldPosition;void main(){vWorldPosition=(modelMatrix*vec4(position,1.)).xyz;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}"},1033:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;void main(){gl_FragColor=vec4(0.,0.,0.,0.);}"},14522:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform sampler2D map;uniform float opacity;uniform vec4 colorOverlay;varying vec2 vUv;vec4 white=vec4(0.8,0.8,0.8,1.);vec4 black=vec4(0.,0.,0.,1.);void main(){vec4 colorFromTexture=texture2D(map,vUv);float whiteness=1.-smoothstep(0.1,0.2,opacity);colorFromTexture=mix(colorFromTexture,vec4(colorOverlay.rgb,1.),colorOverlay.a);colorFromTexture=mix(colorFromTexture,white,whiteness);gl_FragColor=vec4(colorFromTexture.rgb,opacity);}"},68842:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}"},36328:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;\n#define MAX_TRIMS_PER_FLOOR  10\n#ifdef PANO_TEXTURE\nuniform vec3 pano0Position;uniform samplerCube pano0Map;varying vec3 pano0SweepDirection;uniform float panoOpacity;\n#endif\n#ifdef PANO_TEXTURE_TRANSITION\nuniform float progress;uniform vec3 pano1Position;uniform samplerCube pano1Map;varying vec3 pano1SweepDirection;\n#endif\n#ifdef PANO_OVERLAY\nuniform samplerCube overlay0Map;varying vec3 overlay0WorldPos;\n#endif\n#ifdef PANO_OVERLAY_TRANSITION\nuniform samplerCube overlay1Map;varying vec3 overlay1WorldPos;\n#endif\n#ifdef MESH_PREVIEW_SPHERE\nuniform vec3 meshPreviewCenter;uniform float meshPreviewSize;\n#endif\n#ifdef MESH_TEXTURE\nvarying vec2 vUv;uniform sampler2D map;uniform float meshOpacity;uniform float opacity;varying vec3 worldPos;\n#ifdef MESH_TRIM_VERTEX\nvarying vec3 trimPos[MAX_TRIMS_PER_FLOOR];uniform bool meshTrimsDiscardContents[MAX_TRIMS_PER_FLOOR];uniform bool hasKeepVolume;\n#endif\n#ifdef MESH_TRIM_PIXEL\nuniform mat4 meshTrimMatrices[MAX_TRIMS_PER_FLOOR];uniform bool meshTrimsDiscardContents[MAX_TRIMS_PER_FLOOR];uniform bool hasKeepVolume;\n#endif\n#endif\n#ifdef COLOR_OVERLAY\nuniform vec4 colorOverlay;\n#endif\n#ifdef WIREFRAME\nvarying vec3 vBarycentric;uniform float time;uniform float thickness;uniform float secondThickness;uniform float dashRepeats;uniform float dashLength;uniform bool dashOverlap;uniform bool dashEnabled;uniform bool dashAnimate;uniform bool fillEnabled;uniform bool insideAltColor;uniform bool dualStroke;uniform bool squeeze;uniform float squeezeMin;uniform float squeezeMax;uniform float wireframeOpacity;uniform vec3 stroke;uniform vec3 fill;float aastep(float threshold,float dist){float afwidth=fwidth(dist)*0.5;return smoothstep(threshold-afwidth,threshold+afwidth,dist);}float computeScreenSpaceWireframe(vec3 barycentric,float lineWidth){vec3 dist=fwidth(barycentric);vec3 smoothed=smoothstep(dist*((lineWidth*0.5)-0.5),dist*((lineWidth*0.5)+0.5),barycentric);return 1.-min(min(smoothed.x,smoothed.y),smoothed.z);}vec4 getStyledWireframe(vec3 barycentric){float PI=3.14159265359;float d=min(min(barycentric.x,barycentric.y),barycentric.z);float positionAlong=max(barycentric.x,barycentric.y);if(barycentric.y<barycentric.x&&barycentric.y<barycentric.z){positionAlong=1.-positionAlong;}float computedThickness=thickness;if(squeeze){computedThickness*=mix(squeezeMin,squeezeMax,(1.-sin(positionAlong*PI)));}if(dashEnabled){float offset=1./dashRepeats*dashLength/2.;if(!dashOverlap){offset+=1./dashRepeats/2.;}if(dashAnimate){offset+=time*0.22;}float pattern=fract((positionAlong+offset)*dashRepeats);computedThickness*=1.-aastep(dashLength,pattern);}float edge=computeScreenSpaceWireframe(barycentric,computedThickness);vec4 outColor=vec4(0.,0.,0.,0.);if(!fillEnabled){outColor=vec4(stroke,edge);if(insideAltColor&&!gl_FrontFacing){outColor.rgb=fill;}}else{outColor.a=1.;if(dualStroke){float inner=1.-aastep(secondThickness,d);vec3 wireColor=mix(fill,stroke,abs(inner-edge));outColor.rgb=wireColor;}else{outColor.rgb=mix(fill,stroke,edge);}}outColor.a*=wireframeOpacity;return outColor;}\n#endif\n#ifdef FLAT_SHADING\nvarying vec3 vNormal;\n#endif\nvoid main(){\n#ifdef PANO_TEXTURE_TRANSITION\nvec4 colorFromPano0=textureCube(pano0Map,pano0SweepDirection.xyz);vec4 colorFromPano1=textureCube(pano1Map,pano1SweepDirection.xyz);\n#ifdef PANO_OVERLAY_TRANSITION\nvec4 colorFromOverlay0=textureCube(overlay0Map,overlay0WorldPos.xyz);vec4 colorFromOverlay1=textureCube(overlay1Map,overlay1WorldPos.xyz);colorFromPano0.rgb=mix(colorFromPano0.rgb,colorFromOverlay0.rgb,colorFromOverlay0.a);colorFromPano1.rgb=mix(colorFromPano1.rgb,colorFromOverlay1.rgb,colorFromOverlay1.a);\n#endif\nvec4 color=mix(colorFromPano0,colorFromPano1,progress);color.a=panoOpacity;\n#elif defined(PANO_TEXTURE)\nvec4 color=textureCube(pano0Map,pano0SweepDirection.xyz);\n#ifdef PANO_OVERLAY\nvec4 colorFromOverlay0=textureCube(overlay0Map,overlay0WorldPos.xyz);color.rgb=mix(color.rgb,colorFromOverlay0.rgb,colorFromOverlay0.a);\n#endif\ncolor.a=panoOpacity;\n#else\nvec4 color=vec4(0.,0.,0.,0.);\n#endif\n#ifdef MESH_TEXTURE\nvec4 colorFromTexture=texture2D(map,vUv);\n#endif\n#ifdef MESH_PREVIEW_SPHERE\nfloat previewDistance=distance(worldPos.xyz,meshPreviewCenter.xyz);float inSphere=step(previewDistance,meshPreviewSize);colorFromTexture+=colorFromTexture*(0.2*inSphere);color=mix(color,colorFromTexture,max(meshOpacity,inSphere));\n#elif defined(MESH_TEXTURE)\ncolor=mix(color,colorFromTexture,meshOpacity);\n#endif\n#ifdef FLAT_SHADING\nfloat ao=0.9-abs(vNormal.y)*0.1-abs(vNormal.x)*0.05+abs(vNormal.z)*0.05;color.rgb=vec3(ao,ao*1.025,ao*1.05);\n#endif\n#ifdef COLOR_OVERLAY\ncolor=mix(color,vec4(colorOverlay.rgb,1.),colorOverlay.a);\n#endif\n#ifdef WIREFRAME\nvec4 colorFromWireframe=getStyledWireframe(vBarycentric);color=mix(color,vec4(colorFromWireframe.rgb,1.),colorFromWireframe.a);\n#endif\n#ifdef MESH_TEXTURE\ncolor.a=opacity;\n#if defined(MESH_TRIM_VERTEX) || defined(MESH_TRIM_PIXEL)\nbool isWithinVolume=false;bool doKeepFragment=true;bool enabled=true;vec4 worldPos4=vec4(worldPos.xyz,1);vec3 compare=vec3(0.5);\n#pragma unroll_loop_start\nfor(int i=0;i<10;i++){\n#ifdef MESH_TRIM_VERTEX\nenabled=!all(equal(trimPos[UNROLLED_LOOP_INDEX],vec3(0.)));if(enabled){if(all(lessThan(abs(trimPos[UNROLLED_LOOP_INDEX]),compare))){isWithinVolume=true;if(meshTrimsDiscardContents[UNROLLED_LOOP_INDEX]){doKeepFragment=false;}}}\n#endif\n#ifdef MESH_TRIM_PIXEL\nenabled=meshTrimMatrices[UNROLLED_LOOP_INDEX][3][3]>0.;if(enabled){if(all(lessThan(abs((meshTrimMatrices[UNROLLED_LOOP_INDEX]*worldPos4).xyz),compare))){isWithinVolume=true;if(meshTrimsDiscardContents[UNROLLED_LOOP_INDEX]){doKeepFragment=false;}}}\n#endif\n}\n#pragma unroll_loop_end\nif(!isWithinVolume&&hasKeepVolume){discard;}else if(isWithinVolume&&!doKeepFragment){discard;}\n#endif\n#endif\ngl_FragColor=color;}"},17513:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;\n#define MAX_TRIMS_PER_FLOOR  10\n#ifdef PANO_TEXTURE\nuniform vec3 pano0Position;uniform mat4 pano0Matrix1;uniform mat4 pano0Matrix2;varying vec3 pano0SweepDirection;\n#endif\n#ifdef PANO_TEXTURE_TRANSITION\nuniform vec3 pano1Position;uniform mat4 pano1Matrix1;uniform mat4 pano1Matrix2;varying vec3 pano1SweepDirection;\n#endif\n#ifdef PANO_OVERLAY\nvarying vec3 overlay0WorldPos;uniform mat4 overlay0Matrix;\n#endif\n#ifdef PANO_OVERLAY_TRANSITION\nvarying vec3 overlay1WorldPos;uniform mat4 overlay1Matrix;\n#endif\n#ifdef MESH_PREVIEW_SPHERE\n#endif\n#ifdef MESH_TEXTURE\nvarying vec2 vUv;varying vec3 worldPos;\n#ifdef MESH_TRIM_VERTEX\nuniform mat4 meshTrimMatrices[MAX_TRIMS_PER_FLOOR];varying vec3 trimPos[MAX_TRIMS_PER_FLOOR];\n#endif\n#endif\n#ifdef WIREFRAME\nattribute vec3 barycentric;varying vec3 vBarycentric;\n#endif\n#ifdef FLAT_SHADING\nvarying vec3 vNormal;\n#endif\nvoid main(){vec4 worldPosition=modelMatrix*vec4(position,1.);\n#ifdef MESH_TEXTURE\nvUv=uv;worldPos=worldPosition.xyz;\n#ifdef MESH_TRIM_VERTEX\n#pragma unroll_loop_start\nfor(int i=0;i<10;i++){trimPos[UNROLLED_LOOP_INDEX]=(meshTrimMatrices[UNROLLED_LOOP_INDEX]*vec4(worldPos,1.)).xyz;}\n#pragma unroll_loop_end    \n#endif\n#endif\n#ifdef WIREFRAME\nvBarycentric=barycentric;\n#endif\n#ifdef FLAT_SHADING\nvNormal=normal;\n#endif\n#ifdef PANO_TEXTURE\nvec3 positionLocalToPanoCenter0=worldPosition.xyz-pano0Position;pano0SweepDirection=(pano0Matrix2*pano0Matrix1*vec4(positionLocalToPanoCenter0,1.)).xyz;\n#ifdef PANO_OVERLAY\noverlay0WorldPos=(overlay0Matrix*vec4(positionLocalToPanoCenter0,1.)).xyz;\n#endif\n#endif\n#ifdef PANO_TEXTURE_TRANSITION\nvec3 positionLocalToPanoCenter1=worldPosition.xyz-pano1Position;pano1SweepDirection=(pano1Matrix2*pano1Matrix1*vec4(positionLocalToPanoCenter1,1.)).xyz;\n#ifdef PANO_OVERLAY_TRANSITION\noverlay1WorldPos=(overlay1Matrix*vec4(positionLocalToPanoCenter1,1.)).xyz;\n#endif\n#endif\nvec4 projectedPosition=projectionMatrix*modelViewMatrix*vec4(position,1.);gl_Position=projectedPosition;}"},12944:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;\n#ifdef INSTANCED\nvarying float alpha;varying vec3 color;\n#else\nuniform float alpha;uniform vec3 color;\n#endif\nuniform sampler2D bg;uniform sampler2D mask;varying vec2 vUv;varying vec2 vUvOffset;varying float vUvScale;varying float vStrokeWidth;float ring(vec2 pos,float radius,float thick){return mix(1.,0.,smoothstep(thick,thick+(thick*0.5),abs(length(vUv-pos)-radius)));}vec4 crop(vec4 texColor,vec2 xy,float size){texColor*=step(size,1.-xy.x);texColor*=step(size,xy.x);texColor*=step(size,1.-xy.y);texColor*=step(size,xy.y);return texColor;}vec2 center=vec2(0.5,0.5);void main(){vec4 bgColor=texture2D(bg,vUv);if(bgColor.a*alpha<0.1){discard;}float iconScale=1.75;vec2 maskUV=(vUv-0.5)*iconScale+0.5;vec4 maskColor=texture2D(mask,(maskUV*vUvScale)+vUvOffset);maskColor.rgb=vec3(1.);float padding=0.22;maskColor=crop(maskColor,vUv,padding);vec3 mappedColor=mix(color,maskColor.rgb,maskColor.a);const vec3 frameColor=vec3(1.,1.,1.);float frame=ring(center,0.5,vStrokeWidth);mappedColor=mix(mappedColor,frameColor,frame);gl_FragColor=vec4(mappedColor,bgColor.a*alpha);}"},27662:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec2 instanceUvOffset;attribute float instanceUvScale;attribute float instanceStrokeWidth;varying vec2 vUv;varying vec2 vUvOffset;varying float vUvScale;varying float vStrokeWidth;\n#ifdef INSTANCED\nattribute mat4 instanceMatrix;attribute float instanceAlpha;attribute vec3 instanceColor;varying float alpha;varying vec3 color;\n#endif\nvoid main(){vUv=uv;vUvOffset=instanceUvOffset;vUvScale=instanceUvScale;vStrokeWidth=instanceStrokeWidth;\n#ifdef INSTANCED\nalpha=instanceAlpha;color=instanceColor;gl_Position=projectionMatrix*modelViewMatrix*instanceMatrix*vec4(position,1.);\n#else\ngl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n#endif\n}"},6182:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;varying vec2 vUv;void main(){float dist=length(vUv);float alpha=(1.-smoothstep(0.95,1.,dist))*0.3;gl_FragColor=vec4(1.,1.,1.,alpha);}"},36257:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;varying vec2 vUv;void main(){vUv=(uv*2.)-1.;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);gl_Position.z*=1.00001;}"},6324:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;\n#ifdef INSTANCED\nvarying float alpha;\n#else\nuniform float alpha;\n#endif\nvoid main(){gl_FragColor=vec4(1.,1.,1.,alpha);}"},43934:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;uniform vec2 resolution;\n#ifdef INSTANCED\nattribute mat4 instanceMatrix;attribute vec3 stemVector;attribute vec4 pinHeadMatrixCol0;attribute vec4 pinHeadMatrixCol1;attribute vec4 pinHeadMatrixCol2;attribute vec4 pinHeadMatrixCol3;attribute float instanceAlpha;varying float alpha;\n#else\nuniform mat4 pinHeadMatrix;\n#endif\n#define PI  3.1415926538\nvoid main(){\n#ifdef INSTANCED\nvec3 pos=position*stemVector;mat4 modelViewProjMatrix=projectionMatrix*modelViewMatrix*instanceMatrix;mat4 pinHeadMatrix=mat4(pinHeadMatrixCol0,pinHeadMatrixCol1,pinHeadMatrixCol2,pinHeadMatrixCol3);alpha=instanceAlpha;\n#else\nvec3 pos=position;mat4 modelViewProjMatrix=projectionMatrix*modelViewMatrix;\n#endif\nvec3 fromOrigin=(vec3(0.,0.,0.)-pos);if(length(fromOrigin)<1e-6){gl_Position=modelViewProjMatrix*vec4(pos,1.);}else{mat4 noteViewProj=projectionMatrix*viewMatrix*pinHeadMatrix;vec4 noteNDC=noteViewProj*vec4(0.,0.,0.,1.);noteNDC.xyz/=abs(noteNDC.w);vec4 discEdgeNDC=noteViewProj*vec4(0.5,0.,0.,1.);discEdgeNDC.xyz/=abs(discEdgeNDC.w);float noteSizeNDC=length(discEdgeNDC.xy-noteNDC.xy);vec4 anchorNDC=modelViewProjMatrix*vec4(0.,0.,0.,1.);anchorNDC.xyz/=abs(anchorNDC.w);vec4 vectorNDC=modelViewProjMatrix*vec4(pos,1.);vectorNDC.xyz/=abs(vectorNDC.w);vectorNDC-=anchorNDC;float lineLengthNDC=length(vectorNDC.xy);float vertDot=abs(dot(normalize(vectorNDC.xy),vec2(0,1)));float angle=acos(vertDot)/(PI/2.);float aspect=mix(resolution.x/resolution.y,1.,angle);vec2 vector2d=normalize(vectorNDC.xy)*max(lineLengthNDC-noteSizeNDC*aspect,0.);vectorNDC.xy=vector2d.xy;vectorNDC+=anchorNDC;gl_Position=vec4(vectorNDC.xyz,1.);}}"},30202:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;varying vec3 vWorldPos;uniform float alpha;uniform samplerCube tDiffuse;void main(){vec4 texColor=textureCube(tDiffuse,vWorldPos);gl_FragColor=vec4(texColor.rgb,texColor.a*alpha);}"},52838:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;varying vec3 vWorldPos;void main(){vWorldPos=vec3(-position.x,-position.y,position.z);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}"},87686:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;varying vec2 vUv;uniform sampler2D tDiffuse;\n#ifdef INSTANCED\nvarying float alpha;\n#else\nuniform float alpha;\n#endif\nvoid main(){vec4 texColor=texture2D(tDiffuse,vUv);gl_FragColor=vec4(texColor.rgb,texColor.a*alpha);}"},64656:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;\n#ifdef INSTANCED\nattribute mat4 instanceMatrix;attribute float instanceAlpha;varying float alpha;\n#endif\nvarying vec2 vUv;void main(){vUv=uv;\n#ifdef INSTANCED\nmat4 mvp=projectionMatrix*modelViewMatrix*instanceMatrix;alpha=instanceAlpha;\n#else\nmat4 mvp=projectionMatrix*modelViewMatrix;\n#endif\ngl_Position=mvp*vec4(position,1.);}"},60348:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform vec3 color;uniform float opacity;void main(){gl_FragColor=vec4(color,opacity);}"},79933:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;void main(){gl_Position=vec4(position,1.);}"},49329:(e,t,n)=>{e.exports=n(60516).Observable},60516:(e,t)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}t.Observable=void 0;var r=function(){return"function"==typeof Symbol},o=function(e){return r()&&Boolean(Symbol[e])},a=function(e){return o(e)?Symbol[e]:"@@"+e};r()&&!o("observable")&&(Symbol.observable=Symbol("observable"));var l=a("iterator"),c=a("observable"),d=a("species");function u(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function h(e){var t=e.constructor;return void 0!==t&&null===(t=t[d])&&(t=void 0),void 0!==t?t:T}function p(e){return e instanceof T}function m(e){m.log?m.log(e):setTimeout((function(){throw e}))}function g(e){Promise.resolve().then((function(){try{e()}catch(e){m(e)}}))}function f(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=u(t,"unsubscribe");n&&n.call(t)}}catch(e){m(e)}}function v(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function b(e,t,n){e._state="running";var i=e._observer;try{var s=u(i,t);switch(t){case"next":s&&s.call(i,n);break;case"error":if(v(e),!s)throw n;s.call(i,n);break;case"complete":v(e),s&&s.call(i)}}catch(e){m(e)}"closed"===e._state?f(e):"running"===e._state&&(e._state="ready")}function y(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void g((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(b(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void b(e,t,n);e._queue.push({type:t,value:n})}}var S=function(){function e(t,i){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var s=new E(this);try{this._cleanup=i.call(void 0,s)}catch(e){s.error(e)}"initializing"===this._state&&(this._state="ready")}return s(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(v(this),f(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),E=function(){function e(t){n(this,e),this._subscription=t}return s(e,[{key:"next",value:function(e){y(this._subscription,"next",e)}},{key:"error",value:function(e){y(this._subscription,"error",e)}},{key:"complete",value:function(){y(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),T=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return s(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new S(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,i){if("function"==typeof e)var s=t.subscribe({next:function(t){try{e(t,r)}catch(e){i(e),s.unsubscribe()}},error:i,complete:n});else i(new TypeError(e+" is not a function"));function r(){s.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=h(this),i=arguments.length>1,s=!1,r=arguments[1],o=r;return new n((function(n){return t.subscribe({next:function(t){var r=!s;if(s=!0,!r||i)try{o=e(o,t)}catch(e){return n.error(e)}else o=t},error:function(e){n.error(e)},complete:function(){if(!s&&!i)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=h(this);return new s((function(t){var i,r=0;return function e(o){i=o.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){r===n.length?(i=void 0,t.complete()):e(s.from(n[r++]))}})}(e),function(){i&&(i.unsubscribe(),i=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=h(this);return new n((function(i){var s=[],r=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return i.error(e)}var r=n.from(t).subscribe({next:function(e){i.next(e)},error:function(e){i.error(e)},complete:function(){var e=s.indexOf(r);e>=0&&s.splice(e,1),o()}});s.push(r)},error:function(e){i.error(e)},complete:function(){o()}});function o(){r.closed&&0===s.length&&i.complete()}return function(){s.forEach((function(e){return e.unsubscribe()})),r.unsubscribe()}}))}},{key:c,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var i=u(t,c);if(i){var s=i.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return p(s)&&s.constructor===n?s:new n((function(e){return s.subscribe(e)}))}if(o("iterator")&&(i=u(t,l)))return new n((function(e){g((function(){if(!e.closed){var n=!0,s=!1,r=void 0;try{for(var o,a=i.call(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(e.next(l),e.closed)return}}catch(e){s=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw r}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){g((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s="function"==typeof this?this:e;return new s((function(e){g((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:d,get:function(){return this}}]),e}();t.Observable=T,r()&&Object.defineProperty(T,Symbol("extensions"),{value:{symbol:c,hostReportError:m},configurable:!0})},63437:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteExternalAttachment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"attachmentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ParentType"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteExternalAttachment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"attachmentId"},value:{kind:"Variable",name:{kind:"Name",value:"attachmentId"}}},{kind:"Argument",name:{kind:"Name",value:"parentType"},value:{kind:"Variable",name:{kind:"Name",value:"parentType"}}},{kind:"Argument",name:{kind:"Name",value:"parentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentId"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemoveFileAttachment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"attachmentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ParentType"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeFileAttachment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"attachmentId"},value:{kind:"Variable",name:{kind:"Name",value:"attachmentId"}}},{kind:"Argument",name:{kind:"Name",value:"parentType"},value:{kind:"Variable",name:{kind:"Name",value:"parentType"}}},{kind:"Argument",name:{kind:"Name",value:"parentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentId"}}}],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FileAttachmentDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"FileAttachment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validUntil"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bytes"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mimeType"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageFileAttachment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imageWidth"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageHeight"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ExternalAttachmentDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ExternalAttachment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mediaType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentDetails"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:1101}};t.loc.source={body:"\n# Deletes a single external attachment\nmutation DeleteExternalAttachment($modelId: ID!, $attachmentId: ID!, $parentType: ParentType!, $parentId: ID!) {\n  deleteExternalAttachment(modelId: $modelId, , attachmentId: $attachmentId, parentType: $parentType, parentId: $parentId)\n}\n\n# Removes a file attachment association from the annotation it is attached to.\n# Can delete the file attachment completely if the 'cascadeDelete' flag is set to true (not currently used)\nmutation RemoveFileAttachment($modelId: ID!, $attachmentId: ID!, $parentType: ParentType!, $parentId: ID!) {\n  removeFileAttachment(modelId: $modelId, , attachmentId: $attachmentId, parentType: $parentType, parentId: $parentId)\n}\n\nfragment FileAttachmentDetails on FileAttachment {\n  id\n  created\n  filename\n  url\n  validUntil\n  bytes\n  mimeType\n  ...on ImageFileAttachment {\n      imageWidth\n      imageHeight\n  }\n}\n\n# common External Attachment properties\nfragment ExternalAttachmentDetails on ExternalAttachment {\n  id\n  created\n  modified\n  thumbnailUrl\n  url\n  mediaType\n  width\n  height\n  parentDetails { type, parent { id } }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.DeleteExternalAttachment=r(t,"DeleteExternalAttachment"),e.exports.RemoveFileAttachment=r(t,"RemoveFileAttachment"),e.exports.FileAttachmentDetails=r(t,"FileAttachmentDetails"),e.exports.ExternalAttachmentDetails=r(t,"ExternalAttachmentDetails")},36159:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddCommentAttachments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"externalAttachments"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExternalAttachmentDetails"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fileAttachments"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addCommentAttachments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"commentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentId"}}},{kind:"Argument",name:{kind:"Name",value:"externalAttachments"},value:{kind:"Variable",name:{kind:"Name",value:"externalAttachments"}}},{kind:"Argument",name:{kind:"Name",value:"fileAttachments"},value:{kind:"Variable",name:{kind:"Name",value:"fileAttachments"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CommentAttachments"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"commentId"},value:{kind:"Variable",name:{kind:"Name",value:"commentId"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CommentPatch"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"commentId"},value:{kind:"Variable",name:{kind:"Name",value:"commentId"}}},{kind:"Argument",name:{kind:"Name",value:"patch"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CommentDetails"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CommentDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Comment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"externalAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ExternalAttachmentDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"fileAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FileAttachmentDetails"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CommentAttachments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Comment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"externalAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ExternalAttachmentDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"fileAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FileAttachmentDetails"},directives:[]}]}}]}}],loc:{start:0,end:1211}};i.loc.source={body:'#import "./attachments.gql"\n\n# Add comment attachments\nmutation AddCommentAttachments($modelId: ID!, $parentId: ID!, $externalAttachments: [ExternalAttachmentDetails!], $fileAttachments: [ID!]) {\n  addCommentAttachments(modelId: $modelId, , commentId: $parentId,\n                        externalAttachments: $externalAttachments,\n                        fileAttachments: $fileAttachments) {\n    ...CommentAttachments\n  }\n}\n\n# Deletes a single comment\nmutation DeleteComment ($modelId: ID!, $commentId: ID!) {\n  deleteComment(modelId: $modelId, , commentId: $commentId)\n}\n\n# Update a single comment\nmutation PatchComment($modelId: ID!, $commentId: ID!, $data: CommentPatch!) {\n  patchComment(modelId: $modelId, , commentId: $commentId, patch: $data) {\n    ...CommentDetails\n  }\n}\n\n# common Comment properties\nfragment CommentDetails on Comment {\n  id\n  created\n  modified\n  edited\n  text\n  createdBy { id, firstName, lastName, email }\n  externalAttachments { ...ExternalAttachmentDetails }\n  fileAttachments { ...FileAttachmentDetails }\n}\n\n# Attachments on a Comment\nfragment CommentAttachments on Comment {\n  externalAttachments { ...ExternalAttachmentDetails }\n  fileAttachments { ...FileAttachmentDetails }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}i.definitions=i.definitions.concat(n(63437).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)})));var o={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function l(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}i.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.AddCommentAttachments=l(i,"AddCommentAttachments"),e.exports.DeleteComment=l(i,"DeleteComment"),e.exports.PatchComment=l(i,"PatchComment"),e.exports.CommentDetails=l(i,"CommentDetails"),e.exports.CommentAttachments=l(i,"CommentAttachments")},8699:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetFloors"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FloorDetails"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FloorDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModelFloor"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"classification"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sequence"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dimensions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"areaFloor"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchFloor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"floorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FloorPatch"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchFloor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"floorId"},value:{kind:"Variable",name:{kind:"Name",value:"floorId"}}},{kind:"Argument",name:{kind:"Name",value:"patch"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:380}};t.loc.source={body:"query GetFloors($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    floors { ...FloorDetails }\n  }\n}\n\nfragment FloorDetails on ModelFloor {\n  id\n  meshId\n  classification\n  label\n  sequence\n  dimensions {\n    areaFloor\n  }\n}\n\nmutation PatchFloor($modelId: ID!, $floorId: ID!, $data: FloorPatch!) {\n  patchFloor(modelId: $modelId, , floorId: $floorId, patch: $data) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetFloors=r(t,"GetFloors"),e.exports.FloorDetails=r(t,"FloorDetails"),e.exports.PatchFloor=r(t,"PatchFloor")},32082:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetHighlightReel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activeHighlightReel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HighlightReelDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetHighlightReelSweeps"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"views"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeHighlightReel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"asset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Photo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"snapshotLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"anchor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PutActiveReel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elements"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReelElementInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mode"}},type:{kind:"NamedType",name:{kind:"Name",value:"HighlightReelMode"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"putActiveReel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"elements"},value:{kind:"Variable",name:{kind:"Name",value:"elements"}}},{kind:"Argument",name:{kind:"Name",value:"mode"},value:{kind:"Variable",name:{kind:"Name",value:"mode"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HighlightReelDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HighlightReel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"overrides"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transitionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"panDirection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"panAngle"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"asset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Photo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:981}};t.loc.source={body:"query GetHighlightReel($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    activeHighlightReel {\n      ...HighlightReelDetails\n    }\n  }\n}\n\nquery GetHighlightReelSweeps($modelId: ID!) {\n  model(id: $modelId) {\n    views {\n      model {\n      \tactiveHighlightReel { \n          reel {\n            asset {\n              ... on Photo {\n              \tsnapshotLocation {\n                  anchor {\n                    id\n                  }\n                }\n              }                          \n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nmutation PutActiveReel($modelId: ID!, $elements: [ReelElementInput!], $mode: HighlightReelMode) {\n  putActiveReel(modelId: $modelId, elements: $elements, mode: $mode) {\n    id\n  }\n}\n\nfragment HighlightReelDetails on HighlightReel {\n  id\n  label\n  mode\n  reel {\n    overrides {\n      transitionType\n      panDirection\n      panAngle\n    }\n    asset {\n      ... on Photo {\n        id\n      }\n    }\n    title\n    description\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetHighlightReel=r(t,"GetHighlightReel"),e.exports.GetHighlightReelSweeps=r(t,"GetHighlightReelSweeps"),e.exports.PutActiveReel=r(t,"PutActiveReel"),e.exports.HighlightReelDetails=r(t,"HighlightReelDetails")},61341:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetLabels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LabelDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddLabel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"labelId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LabelDetails"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addLabel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"labelId"},value:{kind:"Variable",name:{kind:"Name",value:"labelId"}}},{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LabelDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchLabel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"labelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LabelPatch"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchLabel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"labelId"},value:{kind:"Variable",name:{kind:"Name",value:"labelId"}}},{kind:"Argument",name:{kind:"Name",value:"patch"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LabelDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteLabel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"labelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteLabel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"labelId"},value:{kind:"Variable",name:{kind:"Name",value:"labelId"}}}],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"LabelDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Label"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"floor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}}],loc:{start:0,end:929}};t.loc.source={body:"# Read all labels for the given model\nquery GetLabels($modelId: ID!, $includeDisabled: Boolean!) {\n  model(id: $modelId) {\n    id,\n    labels (includeDisabled: $includeDisabled) {\n      ...LabelDetails\n    }\n  }\n}\n\n# Create a new label\nmutation AddLabel ($modelId: ID!, $labelId: ID, $data: LabelDetails!) {\n  addLabel(modelId: $modelId, labelId: $labelId, label: $data) {\n    ...LabelDetails\n  }\n}\n\n# Update a single label\nmutation PatchLabel ($modelId: ID!, $labelId: ID!, $data: LabelPatch!) {\n  patchLabel(modelId: $modelId, , labelId: $labelId, patch: $data) {\n    ...LabelDetails\n  }\n}\n\n# Deletes a single label\nmutation DeleteLabel ($modelId: ID!, ,$labelId: ID!) {\n  deleteLabel(modelId: $modelId, ,labelId: $labelId)\n}\n\n# Default Label properties used by Showcase and Workshop\nfragment LabelDetails on Label {\n  id\n  position { x y z }\n  floor { id meshId }\n  room { id meshId }\n  label\n  enabled\n  created\n  modified\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetLabels=r(t,"GetLabels"),e.exports.AddLabel=r(t,"AddLabel"),e.exports.PatchLabel=r(t,"PatchLabel"),e.exports.DeleteLabel=r(t,"DeleteLabel"),e.exports.LabelDetails=r(t,"LabelDetails")},22001:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetOrderedLists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"orderedLists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EntryDetails"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetOrderedListByName"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"label"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"orderedLists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"label"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EntryDetails"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddOrderedList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"label"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"entries"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"EntryInput"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addOrderedList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"label"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"entries"},value:{kind:"Variable",name:{kind:"Name",value:"entries"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EntryDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchOrderedList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderedListId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"label"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"entries"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"EntryInput"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchOrderedList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"orderedListId"},value:{kind:"Variable",name:{kind:"Name",value:"orderedListId"}}},{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"label"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"entries"},value:{kind:"Variable",name:{kind:"Name",value:"entries"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OrderedListDetails"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OrderedListDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OrderedList"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EntryDetails"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EntryDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:1337}};t.loc.source={body:"\n# get the ordered lists for the specified model\nquery GetOrderedLists($modelId: ID!) {\n  model(id: $modelId) {\n    orderedLists(ids: []) {\n      label\n      id\n      entries {\n        ...EntryDetails\n      }\n    }\n  }\n}\n\n# get an ordered list by name for the specified view\nquery GetOrderedListByName($modelId: ID!, $label: String!) {\n  model(id: $modelId) {\n    orderedLists(label: $label) {\n      label\n      id\n      entries {\n        ...EntryDetails\n      }\n    }\n  }\n}\n\n# add a new ordered list\nmutation AddOrderedList($modelId: ID!, $label: String!, $description: String!, $entries: [EntryInput!]) {\n  addOrderedList(modelId: $modelId, , label: $label, description: $description, entries: $entries) {\n    id\n    label\n    entries {\n      ...EntryDetails\n    }\n  }\n}\n\n# patch an existing ordered list\nmutation PatchOrderedList($modelId: ID!, $orderedListId: ID!, $label: String!, $description: String!, $entries: [EntryInput!]) {\n  patchOrderedList(modelId: $modelId, , orderedListId: $orderedListId, label: $label, description: $description, entries: $entries) {\n    ...OrderedListDetails\n  }\n}\n\n# Default OrderedList properties used by Showcase and Workshop\nfragment OrderedListDetails on OrderedList {\n  id\n  label\n  entries {\n    ...EntryDetails\n  }\n}\n\n# Default Entry properties\nfragment EntryDetails on Entry {\n  id\n  type\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetOrderedLists=r(t,"GetOrderedLists"),e.exports.GetOrderedListByName=r(t,"GetOrderedListByName"),e.exports.AddOrderedList=r(t,"AddOrderedList"),e.exports.PatchOrderedList=r(t,"PatchOrderedList"),e.exports.OrderedListDetails=r(t,"OrderedListDetails"),e.exports.EntryDetails=r(t,"EntryDetails")},82686:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMattertags"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mattertags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MattertagDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RefreshTagFileAttachments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mattertags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fileAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FileAttachmentDetails"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddMattertag"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mattertagId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MattertagDetails"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addMattertag"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"mattertagId"},value:{kind:"Variable",name:{kind:"Name",value:"mattertagId"}}},{kind:"Argument",name:{kind:"Name",value:"mattertag"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteMattertag"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mattertagId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteMattertag"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"mattertagId"},value:{kind:"Variable",name:{kind:"Name",value:"mattertagId"}}}],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MattertagDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Mattertag"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"anchorPosition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stemEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stemNormal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stemLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"media"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mediaType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ExternalAttachmentDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"fileAttachments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FileAttachmentDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"objectAnnotation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"classification"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultKeywords"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"keywords"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]}]}}],loc:{start:0,end:1458}};i.loc.source={body:'#import "./attachments.gql"\n\n# read all mattertags for the specified model\nquery GetMattertags($modelId: ID!, $includeDisabled: Boolean!) {\n  model(id: $modelId) {\n    id,\n    mattertags(includeDisabled: $includeDisabled) {\n      ...MattertagDetails\n    }\n  }\n}\n\n# refresh file attachment expiring resources for all mattertags\nquery RefreshTagFileAttachments($modelId: ID!, $includeDisabled: Boolean!) {\n  model(id: $modelId) {\n    id,\n    mattertags(includeDisabled: $includeDisabled) {\n      id\n      fileAttachments { ...FileAttachmentDetails }\n    }\n  }\n}\n\n# add a new mattertag\nmutation AddMattertag($modelId:ID!, $mattertagId: ID, $data: MattertagDetails!) {\n  addMattertag(modelId: $modelId, mattertagId: $mattertagId, mattertag: $data) {\n    id\n    created\n    modified\n  }\n}\n\n# delete an existing tag by id\nmutation DeleteMattertag($modelId: ID!, $mattertagId: ID!) {\n  deleteMattertag(modelId: $modelId, mattertagId: $mattertagId)\n}\n\n# common Mattertag properties used by Showcase and Workshop\nfragment MattertagDetails on Mattertag {\n  id\n  label\n  description\n  color\n  enabled\n  floor { id, meshId }\n  room { id, meshId }\n  anchorPosition { x y z }\n  stemEnabled\n  stemNormal { x, y, z }\n  stemLength\n  media\n  mediaType\n  created\n  modified\n  externalAttachments { ...ExternalAttachmentDetails }\n  fileAttachments { ...FileAttachmentDetails }\n  objectAnnotation {\n    id\n    classification {\n      defaultKeywords\n    }\n  }\n  keywords\n  icon\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}i.definitions=i.definitions.concat(n(63437).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)})));var o={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function l(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}i.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.GetMattertags=l(i,"GetMattertags"),e.exports.RefreshTagFileAttachments=l(i,"RefreshTagFileAttachments"),e.exports.AddMattertag=l(i,"AddMattertag"),e.exports.DeleteMattertag=l(i,"DeleteMattertag"),e.exports.MattertagDetails=l(i,"MattertagDetails")},77285:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMeasurements"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"measurementPaths"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MeasurementDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddMeasurement"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MeasurementPathDetails"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addMeasurementPath"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchMeasurement"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pathId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MeasurementPathPatch"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchMeasurementPath"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"pathId"},value:{kind:"Variable",name:{kind:"Name",value:"pathId"}}},{kind:"Argument",name:{kind:"Name",value:"patch"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteMeasurement"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pathId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteMeasurementPath"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"pathId"},value:{kind:"Variable",name:{kind:"Name",value:"pathId"}}}],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MeasurementDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeasurementPath"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lineType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"points"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"floor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}}],loc:{start:0,end:835}};t.loc.source={body:"\nquery GetMeasurements($modelId: ID!, $includeDisabled: Boolean!) {\n  model(id: $modelId) {\n    id,\n    measurementPaths(includeDisabled: $includeDisabled) {\n      ...MeasurementDetails\n    }\n  }\n}\n\nmutation AddMeasurement($modelId: ID!, $data: MeasurementPathDetails!) {\n  addMeasurementPath(modelId: $modelId, , path: $data) {\n    id\n  }\n}\n\nmutation PatchMeasurement($modelId: ID!, $pathId: ID!, $data: MeasurementPathPatch!) {\n  patchMeasurementPath(modelId: $modelId, , pathId: $pathId, patch: $data) {\n    id\n  }\n}\n\nmutation DeleteMeasurement($modelId: ID!, $pathId: ID!) {\n  deleteMeasurementPath(modelId: $modelId, , pathId: $pathId)\n}\n\nfragment MeasurementDetails on MeasurementPath {\n  id\n  lineType\n  label\n  enabled\n  points {\n    position { x y z }\n    floor { id meshId }\n    room { id meshId }\n  }\n  created\n  modified\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetMeasurements=r(t,"GetMeasurements"),e.exports.AddMeasurement=r(t,"AddMeasurement"),e.exports.PatchMeasurement=r(t,"PatchMeasurement"),e.exports.DeleteMeasurement=r(t,"DeleteMeasurement"),e.exports.MeasurementDetails=r(t,"MeasurementDetails")},15899:e=>{var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ModelAvailableAssets"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Model"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"meshes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"formats"},value:{kind:"StringValue",value:"dam",block:!1}},{kind:"Argument",name:{kind:"Name",value:"resolutions"},value:{kind:"ListValue",values:[{kind:"StringValue",value:"50k",block:!1},{kind:"StringValue",value:"500k",block:!1}]}},{kind:"Argument",name:{kind:"Name",value:"compressions"},value:{kind:"EnumValue",value:"none"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MeshDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"textures"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextureDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tilesets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TilesetDetails"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"lod"},name:{kind:"Name",value:"policy"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"StringValue",value:"spaces.chunked.mesh.lod",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PolicyOptions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ModelStatus"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Model"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MeshDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Mesh"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolution"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validUntil"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TextureDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Texture"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolution"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quality"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"urlTemplate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validUntil"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TilesetDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tileset"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tilesetVersion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"urlTemplate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validUntil"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tilesetDepth"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tilesetPreset"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PublicationDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModelPublicationDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"address"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"published"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastPublished"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"presentedBy"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contact"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"phoneNumber"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ModelOptions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModelOptions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"backgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dollhouseEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dollhouseLabelsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floorSelectEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floorplanEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"highlightReelEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labelsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"measurements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"socialSharingEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"spaceSearchEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourButtonsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourDollhousePanSpeed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourFastTransitionsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourPanAngle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourPanDirection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourPanSpeed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourTransitionSpeed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourTransitionTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourZoomDuration"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unitType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"vrEnabled"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PublicationOptions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModelPublicationOptions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contactEmail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contactName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contactPhone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelSummary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"presentedBy"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"address"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalUrl"},arguments:[],directives:[]}]}}],loc:{start:0,end:1582}};t.loc.source={body:'fragment ModelAvailableAssets on Model {\n  assets {\n    meshes(formats: "dam", resolutions: ["50k", "500k"], compressions: none) { ...MeshDetails }\n    textures { ...TextureDetails }\n    tilesets { ...TilesetDetails }\n  }\n  lod: policy(name: "spaces.chunked.mesh.lod") {\n    ... on PolicyOptions {\n      options\n    }\n  }\n}\n\nfragment ModelStatus on Model {\n  state\n}\n\nfragment MeshDetails on Mesh {\n  id\n  status\n  filename\n  format\n  resolution\n  url\n  validUntil\n}\n\nfragment TextureDetails on Texture {\n  id\n  status\n  format\n  resolution\n  quality\n  urlTemplate\n  validUntil\n}\n\nfragment TilesetDetails on Tileset {\n  status\n  tilesetVersion\n  url\n  urlTemplate\n  validUntil\n  tilesetDepth\n  tilesetPreset\n}\n\nfragment PublicationDetails on ModelPublicationDetails {\n  address\n  published\n  lastPublished\n  presentedBy\n  summary\n  externalUrl\n  contact {\n    name\n    email\n    phoneNumber\n  }\n}\n\nfragment ModelOptions on ModelOptions {\n  backgroundColor\n  dollhouseEnabled\n  dollhouseLabelsEnabled\n  floorSelectEnabled\n  floorplanEnabled\n  highlightReelEnabled\n  labelsEnabled\n  measurements\n  socialSharingEnabled\n  spaceSearchEnabled\n  tourButtonsEnabled\n  tourDollhousePanSpeed\n  tourFastTransitionsEnabled\n  tourPanAngle\n  tourPanDirection\n  tourPanSpeed\n  tourTransitionSpeed\n  tourTransitionTime\n  tourZoomDuration\n  unitType\n  vrEnabled\n  # disable until platform 21.9.2 release\n  # urlBrandingEnabled\n}\n\nfragment PublicationOptions on ModelPublicationOptions {\n  contactEmail\n  contactName\n  contactPhone\n  modelName\n  modelSummary\n  presentedBy\n  address\n  externalUrl\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.ModelAvailableAssets=r(t,"ModelAvailableAssets"),e.exports.ModelStatus=r(t,"ModelStatus"),e.exports.MeshDetails=r(t,"MeshDetails"),e.exports.TextureDetails=r(t,"TextureDetails"),e.exports.TilesetDetails=r(t,"TilesetDetails"),e.exports.PublicationDetails=r(t,"PublicationDetails"),e.exports.ModelOptions=r(t,"ModelOptions"),e.exports.PublicationOptions=r(t,"PublicationOptions")},64927:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelOptions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PublicationOptions"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ModelOptions"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discoverable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"demo"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ModelStatus"},directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"publication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PublicationDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ModelOptions"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ModelAvailableAssets"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetStartLocations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"views"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"snapshotLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"anchor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"patch"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ModelPatch"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchModel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"patch"},value:{kind:"Variable",name:{kind:"Name",value:"patch"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1001}};i.loc.source={body:'#import "./model-fragments.gql"\n#import "./photo-fragments.gql"\n\nquery GetModelOptions($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    publication {\n      options { ...PublicationOptions }\n    }\n    options { ...ModelOptions }\n  }\n}\n\nquery GetModelDetails($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    name\n    organization\n    visibility\n    discoverable\n    created\n    demo\n    ...ModelStatus\n    image { ...PhotoDetails }\n    publication { ...PublicationDetails }\n    options { ...ModelOptions }\n    ...ModelAvailableAssets\n  }\n}\n\nquery GetModelImage($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    image { ...PhotoDetails }\n  }\n}\n\nquery GetStartLocations($modelId: ID!) {\n  model(id: $modelId) {\n    views {\n      model {\n        image { \n          snapshotLocation {\n            anchor {\n              id\n            }\n          }\n        } \n      }\n    }\n  }\n}\n\n\nmutation PatchModel($modelId: ID!, $patch: ModelPatch!) {\n  patchModel(id: $modelId, , patch: $patch) {\n    id\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}i.definitions=i.definitions.concat(r(n(15899).definitions)),i.definitions=i.definitions.concat(r(n(23888).definitions));var a={};function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function c(e,t){var n={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var o=r;r=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=l(e,t);i&&n.definitions.push(i)})),n}i.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.GetModelOptions=c(i,"GetModelOptions"),e.exports.GetModelDetails=c(i,"GetModelDetails"),e.exports.GetModelImage=c(i,"GetModelImage"),e.exports.GetStartLocations=c(i,"GetStartLocations"),e.exports.PatchModel=c(i,"PatchModel")},44571:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetNotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NoteDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NoteDetails"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"note"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NoteDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddNoteComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"noteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CommentDetails"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addNoteComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"noteId"},value:{kind:"Variable",name:{kind:"Name",value:"noteId"}}},{kind:"Argument",name:{kind:"Name",value:"comment"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CommentDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"noteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"noteId"},value:{kind:"Variable",name:{kind:"Name",value:"noteId"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"noteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotePatch"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"noteId"},value:{kind:"Variable",name:{kind:"Name",value:"noteId"}}},{kind:"Argument",name:{kind:"Name",value:"patch"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NoteDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReopenNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"noteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reopenNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"noteId"},value:{kind:"Variable",name:{kind:"Name",value:"noteId"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"noteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"noteId"},value:{kind:"Variable",name:{kind:"Name",value:"noteId"}}}],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NoteDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"anchorPosition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stemEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stemNormal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stemLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolution"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastCommentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CommentDetails"},directives:[]}]}}]}}]}}],loc:{start:0,end:1499}};i.loc.source={body:'#import "./attachments.gql"\n#import "./comments.gql"\n\n# read all notes for the specified model\nquery GetNotes($modelId: ID!, $ids: [ID!]) {\n  model(id: $modelId) {\n    id\n    notes(ids: $ids) {\n      ...NoteDetails\n    }\n  }\n}\n\n# Create a new note\nmutation AddNote($modelId: ID!, $data: NoteDetails!) {\n  addNote(modelId: $modelId, , note: $data) {\n    ...NoteDetails\n  }\n}\n\n# Add a comment to the note\nmutation AddNoteComment($modelId: ID!, $noteId: ID!, $data: CommentDetails!) {\n  addNoteComment(modelId: $modelId, , noteId: $noteId, comment: $data) {\n    ...CommentDetails\n  }\n}\n\n# Deletes a single note\nmutation DeleteNote ($modelId: ID!, $noteId: ID!) {\n  deleteNote(modelId: $modelId, , noteId: $noteId)\n}\n\n# Update a single note\nmutation PatchNote($modelId: ID!, $noteId: ID!, $data: NotePatch!) {\n  patchNote(modelId: $modelId, , noteId: $noteId, patch: $data) {\n    ...NoteDetails\n  }\n}\n\n# Reopen a note\nmutation ReopenNote ($modelId: ID!, $noteId: ID!) {\n  reopenNote(modelId: $modelId, , noteId: $noteId)\n}\n\n# Resolve a note\nmutation ResolveNote($modelId: ID!, $noteId: ID!) {\n  resolveNote(modelId: $modelId, , noteId: $noteId)\n}\n\n# common Note properties\nfragment NoteDetails on Note {\n  id\n  createdBy { id, firstName, lastName, email }\n  color\n  enabled\n  floor { id, meshId }\n  room { id, meshId }\n  anchorPosition { x, y, z }\n  stemEnabled\n  stemNormal { x, y, z }\n  stemLength\n  resolution\n  created\n  modified\n  lastCommentAt\n  comments {\n    results { ...CommentDetails }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}i.definitions=i.definitions.concat(r(n(63437).definitions)),i.definitions=i.definitions.concat(r(n(36159).definitions));var a={};function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function c(e,t){var n={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var o=r;r=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=l(e,t);i&&n.definitions.push(i)})),n}i.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.GetNotes=c(i,"GetNotes"),e.exports.AddNote=c(i,"AddNote"),e.exports.AddNoteComment=c(i,"AddNoteComment"),e.exports.DeleteNote=c(i,"DeleteNote"),e.exports.PatchNote=c(i,"PatchNote"),e.exports.ReopenNote=c(i,"ReopenNote"),e.exports.ResolveNote=c(i,"ResolveNote"),e.exports.NoteDetails=c(i,"NoteDetails")},23888:e=>{var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PhotoDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Photo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"classification"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolutions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"origin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validUntil"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"thumbnailUrl"},name:{kind:"Name",value:"resizeUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resolution"},value:{kind:"EnumValue",value:"thumbnail"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"presentationUrl"},name:{kind:"Name",value:"resizeUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resolution"},value:{kind:"EnumValue",value:"presentation"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"snapshotLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewMode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"rotation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"w"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"zoom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floorVisibility"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sequence"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"anchor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pano"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placement"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:535}};t.loc.source={body:"\nfragment PhotoDetails on Photo {\n  id\n  label\n  classification\n  category\n  height\n  width\n  created\n  modified\n  status\n  filename\n  format\n  url\n  resolutions\n  type\n  origin\n  validUntil\n  thumbnailUrl: resizeUrl(resolution: thumbnail)\n  presentationUrl: resizeUrl(resolution: presentation)\n  snapshotLocation {\n    viewMode\n    position { x y z }\n    rotation { x y z w }\n    zoom\n    floorVisibility {\n      id\n      meshId\n      sequence\n    }\n    anchor {\n      id\n      pano {\n        id\n        placement\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.PhotoDetails=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(t,"PhotoDetails")},19642:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetSnapshots"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PatchPhoto"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"photoId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"label"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchPhoto"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"photoId"},value:{kind:"Variable",name:{kind:"Name",value:"photoId"}}},{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"label"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeletePhoto"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"photoId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePhoto"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"photoId"},value:{kind:"Variable",name:{kind:"Name",value:"photoId"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadHighlightReelSnapshot"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contents"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FileUpload"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"label"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"snapshotLocation"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SnapshotLocationInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"snapshot"},name:{kind:"Name",value:"uploadHighlightReelSnapshot"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"contents"},value:{kind:"Variable",name:{kind:"Name",value:"contents"}}},{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"label"}}},{kind:"Argument",name:{kind:"Name",value:"snapshotLocation"},value:{kind:"Variable",name:{kind:"Name",value:"snapshotLocation"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadModelSnapshot"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contents"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FileUpload"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"label"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"snapshotLocation"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SnapshotLocationInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"photoType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PhotoType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"snapshot"},name:{kind:"Name",value:"uploadModelSnapshot"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"contents"},value:{kind:"Variable",name:{kind:"Name",value:"contents"}}},{kind:"Argument",name:{kind:"Name",value:"label"},value:{kind:"Variable",name:{kind:"Name",value:"label"}}},{kind:"Argument",name:{kind:"Name",value:"snapshotLocation"},value:{kind:"Variable",name:{kind:"Name",value:"snapshotLocation"}}},{kind:"Argument",name:{kind:"Name",value:"photoType"},value:{kind:"Variable",name:{kind:"Name",value:"photoType"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}}]}}],loc:{start:0,end:1048}};i.loc.source={body:'#import "./photo-fragments.gql"\nquery GetSnapshots($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    assets {\n      photos { ...PhotoDetails }\n    }\n  }\n}\n\nmutation PatchPhoto($modelId: ID!, $photoId: ID!, $label: String!) {\n  patchPhoto(modelId: $modelId, photoId: $photoId, label: $label) {\n    ...PhotoDetails\n  }\n}\n\nmutation DeletePhoto($modelId: ID!, $photoId: ID!) {\n  deletePhoto(modelId: $modelId, photoId: $photoId)\n}\n\nmutation UploadHighlightReelSnapshot($modelId: ID!, $contents: FileUpload!, $label: String!, $snapshotLocation: SnapshotLocationInput!) {\n  snapshot: uploadHighlightReelSnapshot(id: $modelId, contents: $contents, label: $label, snapshotLocation: $snapshotLocation) {\n    ...PhotoDetails\n  }\n}\n\nmutation UploadModelSnapshot($modelId: ID!, $contents: FileUpload!, $label: String!, $snapshotLocation: SnapshotLocationInput!, $photoType: PhotoType!) {\n  snapshot: uploadModelSnapshot(id: $modelId, contents: $contents, label: $label, snapshotLocation: $snapshotLocation, photoType: $photoType) {\n    ...PhotoDetails\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}i.definitions=i.definitions.concat(n(23888).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)})));var o={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function l(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}i.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.GetSnapshots=l(i,"GetSnapshots"),e.exports.PatchPhoto=l(i,"PatchPhoto"),e.exports.DeletePhoto=l(i,"DeletePhoto"),e.exports.UploadHighlightReelSnapshot=l(i,"UploadHighlightReelSnapshot"),e.exports.UploadModelSnapshot=l(i,"UploadModelSnapshot")},82591:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelViewPrefetch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mattertags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MattertagDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"orderedLists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OrderedListDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LabelDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"measurementPaths"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"Variable",name:{kind:"Name",value:"includeDisabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MeasurementDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activeHighlightReel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HighlightReelDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NoteDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}}]}}]}}],loc:{start:0,end:891}};i.loc.source={body:'# Prefetch all data that changes for a view in one go.  Allows us to do an atomic view change and know that the data\n# is good.\n\n#import "./mattertags.gql"\n#import "./lists.gql"\n#import "./labels.gql"\n#import "./measurements.gql"\n#import "./notes.gql"\n#import "./highlights.gql"\n#import "./photo-fragments.gql"\n\nquery GetModelViewPrefetch($modelId: ID!, $includeDisabled: Boolean!) {\n  model(id: $modelId) {\n    id\n    mattertags(includeDisabled: $includeDisabled) {\n      ...MattertagDetails\n    }\n    orderedLists(ids: []) {\n      ...OrderedListDetails\n    }\n    labels(includeDisabled: $includeDisabled) {\n      ...LabelDetails\n    }\n    measurementPaths(includeDisabled: $includeDisabled) {\n      ...MeasurementDetails\n    }\n    activeHighlightReel {\n      ...HighlightReelDetails\n    }\n    notes(ids: []) {\n      ...NoteDetails\n    }\n    image { \n      ...PhotoDetails \n    }    \n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}i.definitions=i.definitions.concat(r(n(82686).definitions)),i.definitions=i.definitions.concat(r(n(22001).definitions)),i.definitions=i.definitions.concat(r(n(61341).definitions)),i.definitions=i.definitions.concat(r(n(77285).definitions)),i.definitions=i.definitions.concat(r(n(44571).definitions)),i.definitions=i.definitions.concat(r(n(32082).definitions)),i.definitions=i.definitions.concat(r(n(23888).definitions));var a={};function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.GetModelViewPrefetch=function(e,t){var n={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var o=r;r=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=l(e,t);i&&n.definitions.push(i)})),n}(i,"GetModelViewPrefetch")},54161:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelPrefetch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ModelStatus"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ModelAvailableAssets"},directives:[]},{kind:"Field",name:{kind:"Name",value:"floors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FloorDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tags"},value:{kind:"StringValue",value:"showcase",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AnchorLocationDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ModelOptions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PublicationDetails"},directives:[]},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PublicationOptions"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rooms"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoomDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"views"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ViewDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"visibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discoverable"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1068}};i.loc.source={body:'# Make sure the following imports do not import files themselves, it seems\n# to mess up the platform side parsing. That is why you see these \n# -fragment.gql files below.\n\n#import "./model-fragments.gql"\n#import "./photo-fragments.gql"\n#import "./floors.gql"\n#import "./rooms.gql"\n#import "./sweeps.gql"\n#import "./view-fragments.gql"\n\n# Preloaded model data to be embedded into Showcase HTML page,\n# only load data that is required for Showcase to start,\n# not varied by user, and safe for long-term-cache type behavior.\n# Includes the default view.\n# (ie. NO Mattertags)\nquery GetModelPrefetch($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    ...ModelStatus\n    ...ModelAvailableAssets\n    floors { ...FloorDetails }\n    image { ...PhotoDetails }\n    locations(tags:"showcase") { ...AnchorLocationDetails }\n    name\n    options { ...ModelOptions }\n    organization\n    publication {\n      ...PublicationDetails\n      options { ...PublicationOptions }\n    }\n    rooms { ...RoomDetails }\n    views {\n      ...ViewDetails\n    }\n    visibility\n    discoverable\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}i.definitions=i.definitions.concat(r(n(15899).definitions)),i.definitions=i.definitions.concat(r(n(23888).definitions)),i.definitions=i.definitions.concat(r(n(8699).definitions)),i.definitions=i.definitions.concat(r(n(86400).definitions)),i.definitions=i.definitions.concat(r(n(5860).definitions)),i.definitions=i.definitions.concat(r(n(54800).definitions));var a={};function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.GetModelPrefetch=function(e,t){var n={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var o=r;r=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=l(e,t);i&&n.definitions.push(i)})),n}(i,"GetModelPrefetch")},86400:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRooms"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rooms"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoomDetails"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"RoomDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModelRoom"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"dimensions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"depth"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"areaFloor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tags"},arguments:[],directives:[]}]}}],loc:{start:0,end:266}};t.loc.source={body:"\nquery GetRooms ($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    rooms {\n      ...RoomDetails\n    }\n  }\n}\n\nfragment RoomDetails on ModelRoom {\n  id\n  meshId\n  floor {\n    id\n    meshId\n  }\n  dimensions {\n    height\n    width\n    depth\n    areaFloor\n  }\n  tags\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetRooms=r(t,"GetRooms"),e.exports.RoomDetails=r(t,"RoomDetails")},5860:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetSweeps"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AnchorLocationDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetShowcaseSweeps"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tags"},value:{kind:"StringValue",value:"showcase",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AnchorLocationDetails"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SkyboxDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SkyboxPanorama"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolution"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"urlTemplate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tileResolution"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tileCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tileUrlTemplate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validUntil"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SkyboxUrlDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PanoramicImageLocation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolutions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"skyboxes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SkyboxDetails"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AnchorLocationDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AnchorLocation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"index"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"floor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meshId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"neighbors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tags"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pano"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sweepUuid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placement"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"rotation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"z"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"w"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"SkyboxUrlDetails"},directives:[]}]}}]}}],loc:{start:0,end:954}};t.loc.source={body:'\nquery GetSweeps($modelId: ID!) {\n  model(id: $modelId) {\n    id,\n    locations {\n      ...AnchorLocationDetails\n    }\n  }\n}\n\nquery GetShowcaseSweeps($modelId: ID!) {\n  model(id: $modelId) {\n    id,\n    locations(tags: "showcase") {\n      ...AnchorLocationDetails\n    }\n  }\n}\n\nfragment SkyboxDetails on SkyboxPanorama {\n  # TODO(PL-5928) all SkyboxDetail results have the same non-unique id,\n  # using it as a map key will yield unexpected results\n  # id\n  resolution\n  status\n  urlTemplate\n  tileResolution\n  tileCount\n  tileUrlTemplate\n  validUntil\n}\n\nfragment SkyboxUrlDetails on PanoramicImageLocation {\n  id\n  resolutions\n  skyboxes { ...SkyboxDetails }\n}\n\nfragment AnchorLocationDetails on AnchorLocation {\n  id\n  index\n  floor { id, meshId }\n  room { id, meshId }\n  neighbors\n  tags\n  position { x y z }\n  pano {\n    id\n    sweepUuid\n    label\n    placement\n    source\n    position { x y z }\n    rotation { x y z w }\n    ...SkyboxUrlDetails\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetSweeps=r(t,"GetSweeps"),e.exports.GetShowcaseSweeps=r(t,"GetShowcaseSweeps"),e.exports.SkyboxDetails=r(t,"SkyboxDetails"),e.exports.SkyboxUrlDetails=r(t,"SkyboxUrlDetails"),e.exports.AnchorLocationDetails=r(t,"AnchorLocationDetails")},26965:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCurrentUserModelAccess"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"userId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modelAccess"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"emails"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}},{kind:"Argument",name:{kind:"Name",value:"emails"},value:{kind:"Variable",name:{kind:"Name",value:"emails"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelAccess"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelPolicies"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"policies"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PolicyFlag"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PolicyOptions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PolicyValue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PolicyFeature"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:915}};t.loc.source={body:"# get access for the current user\nquery GetCurrentUserModelAccess($modelId: ID!, $userId: ID!) {\n  model(id: $modelId) {\n    id\n    organization\n    users(ids: [$userId]) {\n      results {\n        modelAccess\n      }\n    }\n  }\n}\n\n# get users with access to the specified model\nquery GetUsers($modelId: ID!, $search: String, $ids: [ID!], $emails: [String!]) {\n  model(id: $modelId) {\n    users(search: $search, ids: $ids, emails: $emails) {\n      results {\n        id\n        email\n        firstName\n        lastName\n        modelAccess\n      }\n    }\n  }\n}\n\n# get model policies available to all users\nquery GetModelPolicies($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    policies {\n      name\n      ...on PolicyFlag {\n        enabled\n      }\n      ...on PolicyOptions {\n        options\n      }\n      ...on PolicyValue {\n        value\n      }\n      ...on PolicyFeature {\n        availability\n      }\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetCurrentUserModelAccess=r(t,"GetCurrentUserModelAccess"),e.exports.GetUsers=r(t,"GetUsers"),e.exports.GetModelPolicies=r(t,"GetModelPolicies")},54800:e=>{var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ViewDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModelView"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}}],loc:{start:0,end:88}};t.loc.source={body:"fragment ViewDetails on ModelView {\n  id\n  type\n  name\n  enabled\n  created\n  modified\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.ViewDetails=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(t,"ViewDetails")},54232:(e,t,n)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMergeDiff"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeDiff"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"src"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"typesModified"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViews"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"views"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ViewDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddUserView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addView"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"userDataLayer"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"masks"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"HighlightReel"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Label"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Mattertag"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"MeasurementPath"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Note"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"OrderedList"}}]}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ViewDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteUserView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteView"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RenameUserView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchView"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ViewDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetUserViewEnabled"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"patchView"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"Argument",name:{kind:"Name",value:"enabled"},value:{kind:"Variable",name:{kind:"Name",value:"enabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ViewDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DuplicateUserView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addView"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"enabled"},value:{kind:"Variable",name:{kind:"Name",value:"enabled"}}},{kind:"Argument",name:{kind:"Name",value:"userDataLayer"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"masks"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"HighlightReel"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Label"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Mattertag"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"MeasurementPath"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Note"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"OrderedList"}}]}]}}]}},{kind:"Argument",name:{kind:"Name",value:"copyDataFrom"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"HighlightReel"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Label"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Mattertag"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"MeasurementPath"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"Note"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"viewId"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"OrderedList"}}]}]}},{kind:"Argument",name:{kind:"Name",value:"generateIds"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ViewDetails"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeMutator"},arguments:[{kind:"Argument",name:{kind:"Name",value:"src"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"merge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RevertView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mergeTypes"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MergeableType"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeMutator"},arguments:[{kind:"Argument",name:{kind:"Name",value:"src"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"revert"},arguments:[{kind:"Argument",name:{kind:"Name",value:"types"},value:{kind:"Variable",name:{kind:"Name",value:"mergeTypes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetSessionDiff"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"base"},name:{kind:"Name",value:"view"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"matterport.model.default",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"model"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LabelDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mattertags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MattertagDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"measurementPaths"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MeasurementDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"orderedLists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OrderedListDetails"},directives:[]}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"view"},name:{kind:"Name",value:"view"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"matterport.workshop.session",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"model"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mattertags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"measurementPaths"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDisabled"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modified"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"orderedLists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OrderedListDetails"},directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:3287}};i.loc.source={body:'#import "./labels.gql"\n#import "./lists.gql"\n#import "./mattertags.gql"\n#import "./measurements.gql"\n#import "./view-fragments.gql"\n\n# Gets the data types that have changed between a view and the base model\nquery GetMergeDiff($viewId: ID!) {\n  model(id: $viewId) {\n    id\n    mergeDiff {\n      src\n      dest\n      typesModified\n    }\n  }\n}\n\n# Get available views for a model\nquery GetViews($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    views {\n      ...ViewDetails\n    }\n  }\n}\n\n# Adds a new User View using the base Model ID.\n# By default, it masks view-based data layer items\nmutation AddUserView($modelId: ID!, $name: String!) {\n  addView(\n    id: $modelId,\n    name: $name,\n    userDataLayer: {\n      masks: [\n        { type: HighlightReel },\n        { type: Label },\n        { type: Mattertag },\n        { type: MeasurementPath },\n        { type: Note },\n        { type: OrderedList },\n      ]\n    }\n  ) {\n    ...ViewDetails\n  }\n}\n\n# Deletes a User View using the base Model ID and the viewId to delete\nmutation DeleteUserView($modelId: ID!, $viewId: ID!) {\n  deleteView(id: $modelId, viewId: $viewId)\n}\n\nmutation RenameUserView($viewId: ID!, $name: String!) {\n  patchView(id: $viewId, name: $name) {\n    ...ViewDetails\n  }\n}\n\nmutation SetUserViewEnabled($viewId: ID!, $enabled: Boolean) {\n  patchView(id: $viewId, enabled: $enabled) {\n    ...ViewDetails\n  }\n}\n\nmutation DuplicateUserView($modelId: ID!, $viewId: ID!, $name: String!, $enabled: Boolean) {\n addView(\n    id: $modelId\n    name: $name\n    enabled: $enabled\n    userDataLayer: {\n      masks: [\n        { type: HighlightReel },\n        { type: Label },\n        { type: Mattertag },\n        { type: MeasurementPath },\n        { type: Note },\n        { type: OrderedList },\n      ]\n    },\n    copyDataFrom: [\n      { viewId: $viewId, type: HighlightReel },\n      { viewId: $viewId, type: Label },\n      { viewId: $viewId, type: Mattertag },\n      { viewId: $viewId, type: MeasurementPath },\n      { viewId: $viewId, type: Note },\n      { viewId: $viewId, type: OrderedList },\n    ]\n    generateIds: true,\n  ) {\n    ...ViewDetails\n  }\n}\n\n# Merges the given view into the base model view\nmutation PublishView($viewId: ID!) {\n  mergeMutator(src: $viewId) {\n    merge {\n      id\n    }\n  }\n}\n\n# Resets the provided view to be the same as the base model view\nmutation RevertView($viewId: ID!, $mergeTypes: [MergeableType!]) {\n  mergeMutator(src: $viewId) {\n    revert(types: $mergeTypes ) {\n      id\n    }\n  }\n}\n\n# Gets the data that has changed between the Workshop session and base model\nquery GetSessionDiff($modelId: ID!) {\n  model(id: $modelId) {\n    base: view(type: "matterport.model.default") {\n      id\n      model {\n        labels(includeDisabled: true) { ...LabelDetails }\n        mattertags(includeDisabled: true) { ...MattertagDetails }\n        measurementPaths(includeDisabled: true) { ...MeasurementDetails }\n        orderedLists(ids: []) { ...OrderedListDetails }\n      }\n    }\n    view: view(type: "matterport.workshop.session") {\n      id\n      model {\n        labels(includeDisabled: true) { id modified }\n        mattertags(includeDisabled: true) { id modified }\n        measurementPaths(includeDisabled: true) { id modified }\n        orderedLists(ids: []) { ...OrderedListDetails }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!s[t]&&(s[t]=!0,!0)}))}function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}i.definitions=i.definitions.concat(r(n(61341).definitions)),i.definitions=i.definitions.concat(r(n(22001).definitions)),i.definitions=i.definitions.concat(r(n(82686).definitions)),i.definitions=i.definitions.concat(r(n(77285).definitions)),i.definitions=i.definitions.concat(r(n(54800).definitions));var a={};function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function c(e,t){var n={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,s=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var o=r;r=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){r.add(e)})))}))}return s.forEach((function(t){var i=l(e,t);i&&n.definitions.push(i)})),n}i.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.GetMergeDiff=c(i,"GetMergeDiff"),e.exports.GetViews=c(i,"GetViews"),e.exports.AddUserView=c(i,"AddUserView"),e.exports.DeleteUserView=c(i,"DeleteUserView"),e.exports.RenameUserView=c(i,"RenameUserView"),e.exports.SetUserViewEnabled=c(i,"SetUserViewEnabled"),e.exports.DuplicateUserView=c(i,"DuplicateUserView"),e.exports.PublishView=c(i,"PublishView"),e.exports.RevertView=c(i,"RevertView"),e.exports.GetSessionDiff=c(i,"GetSessionDiff")},84428:e=>{"use strict";e.exports=THREE}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=o,l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var s=Object.create(null);l.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>r[e]=()=>n[e]));return r.default=()=>n,l.d(s,r),s},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>"js/"+e+".js",l.miniCssF=e=>"css/"+({66:"control-kit",136:"late",143:"font",316:"menus",321:"core",376:"vr",458:"showcase",519:"ses",521:"late-stream",525:"sdk-bundle",718:"encoders",833:"split",932:"lib-lottie"}[e]||e)+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="mp_webgl:",l.l=(e,t,s,r)=>{if(n[e])n[e].push(t);else{var o,a;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==i+s){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",i+s),o.src=e),n[e]=[t];var h=(t,i)=>{o.onerror=o.onload=null,clearTimeout(p);var s=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(i))),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),a&&document.head.appendChild(o)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.p="",s=e=>new Promise(((t,n)=>{var i=l.miniCssF(e),s=l.p+i;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var s=(o=n[i]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){var o;if((s=(o=r[i]).getAttribute("data-href"))===e||s===t)return o}})(i,s))return t();((e,t,n,i)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.onerror=s.onload=r=>{if(s.onerror=s.onload=null,"load"===r.type)n();else{var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,s.parentNode.removeChild(s),i(l)}},s.href=t,document.head.appendChild(s)})(e,s,t,n)})),r={458:0},l.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{321:1}[e]&&t.push(r[e]=s(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={458:0};l.f.j=(t,n)=>{var i=l.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise(((n,s)=>i=e[t]=[n,s]));n.push(i[2]=s);var r=l.p+l.u(t),o=new Error;l.l(r,(n=>{if(l.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,i[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,s,[r,o,a]=n,c=0;for(i in o)l.o(o,i)&&(l.m[i]=o[i]);if(a)a(l);for(t&&t(n);c<r.length;c++)s=r[c],l.o(e,s)&&e[s]&&e[s][0](),e[r[c]]=0},n=self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=l(15697);class EngineContext{constructor(e,t){this.fetchedModules=[],this.engine=e,this.moduleLookup=t,this.messageBus=e.msgBus,this.market=new MarketContext(e.market),this.commandBinder=e.commandBinder,this.getModuleSync=e.getModuleSync.bind(e),this.getModuleBySymbolSync=e.getModuleBySymbolSync.bind(e),this.addComponent=e.addComponent.bind(e),this.getComponentByType=e.getComponentByType.bind(e),this.getComponents=e.getComponents.bind(e),this.removeComponent=e.removeComponent.bind(e),this.subscribe=e.subscribe.bind(e),this.unsubscribe=e.unsubscribe.bind(e),this.broadcast=e.broadcast.bind(e),this.claimRenderLayer=e.claimRenderLayer.bind(e),this.getRenderLayer=e.getRenderLayer.bind(e),this.disposeRenderLayer=e.disposeRenderLayer.bind(e),this.startGenerator=e.startGenerator.bind(e),this.stopGenerator=e.stopGenerator.bind(e),this.after=e.after.bind(e),this.toggleRendering=e.toggleRendering.bind(e),this.getXrFrame=e.getXrFrame.bind(e)}getModule(e){const t=Date.now();return this.engine.getModule(e).then((e=>{const n=Date.now();return this.fetchedModules.push({moduleName:e.name,isModule:!0,startAwait:t,finishAwait:n}),e}))}getModuleBySymbol(e){const t=Date.now();return this.engine.getModuleBySymbol(e).then((e=>{const n=Date.now();return this.fetchedModules.push({moduleName:this.getModuleName(e),isModule:!0,startAwait:t,finishAwait:n}),e}))}getLoadedDependencies(){return[...this.fetchedModules,...this.market.getLoadedDependencies()]}get msgBus(){return this.messageBus}getModuleName(e){for(const t in this.moduleLookup)if(e===this.moduleLookup[t].module)return t;return"[Unknown module]"}}class MarketContext{constructor(e){this.fetchedData=[],this.market=e,this.register=e.register.bind(e),this.unregister=e.unregister.bind(e),this.tryGetData=e.tryGetData.bind(e),this.getModuleNameFromData=e.getModuleNameFromData.bind(e)}waitForData(t){const n=Date.now();return this.market.waitForData(t).then((t=>{const i=Date.now();return this.fetchedData.push({moduleName:this.getModuleNameFromData((0,e.oL)(t)),isModule:!1,startAwait:n,finishAwait:i}),t}))}getLoadedDependencies(){return this.fetchedData}}var t=l(31013),n=l(5477);const i=new n.Z("module-loader");var s;!function(e){e[e.Registered=0]="Registered",e[e.Loading=1]="Loading",e[e.Initialized=2]="Initialized",e[e.Unloaded=3]="Unloaded"}(s||(s={}));class ModuleLoader{constructor(){this.registeredModules={},this.typeLookup=new e.cj}registerModule(e,n){const i=this.typeLookup.addType(e),r={es6ModulePromise:n,ctorPromise:new t.Q,initPromise:new t.Q,state:s.Registered};this.registeredModules[i]=r}getTypeID(e){const t=this.typeLookup.getKeyByType(e);if(!t)throw Error("Trying to access unregistered Module");return t}getTypeFromTypeID(e){return this.typeLookup.getTypeByKey(e)}moduleRegistered(e){return!!this.typeLookup.getKeyByType(e)}moduleLoaded(e){if(!this.moduleRegistered(e))return!1;const t=this.typeLookup.getKeyByType(e),n=this.registeredModules[t].state;return![s.Registered,s.Unloaded].includes(n)}getModule(t){const n=this.typeLookup.getKeyByType(t);if(!n)throw Error(`Trying to get ${(0,e.HS)(t)} before it was registered!`);if(this.registeredModules[n].state===s.Unloaded)throw Error(`${(0,e.HS)(t)} module unloaded`);return this.registeredModules[n].initPromise.nativePromise()}getModuleSync(t){const n=this.typeLookup.getKeyByType(t);if(!n)throw new Error(`Trying to get ${(0,e.HS)(t)} before it was registered!`);const i=this.registeredModules[n];if(i.state!==s.Initialized||void 0===i.module)throw Error(`${(0,e.HS)(t)} module not loaded!`);return i.module}loadModule(t,n,r={}){const o=this.typeLookup.getKeyByType(n);if(!o)throw Error(`Attempting to load an unregistered module ${(0,e.HS)(n)}`);const a=this.registeredModules[o];if(a.state===s.Initialized)return a;if(a.state!==s.Registered&&a.state!==s.Unloaded)throw Error(`${(0,e.HS)(n)} already loading`);a.state=s.Loading;const l=(0,e.HS)(n);return a.es6ModulePromise(l).then((o=>{if(!o.default)throw new Error(`${(0,e.HS)(n)} has no default export during module loading`);const l=new o.default;a.ctorPromise.resolve(l).then((()=>{const e=Date.now();let n=!1;setTimeout((()=>{n||i.debug(`${l.name} init took over 2 seconds`)}),2e3),l.init(r,t).then((()=>{i.debug(`${l.name} init took ${(Date.now()-e)/1e3} secs.`),n=!0,a.state=s.Initialized,a.module=l,a.initPromise.resolve(l)})).catch((e=>{a.initPromise.reject(e)}))}))})).catch((t=>{i.error(`Failed to load es6Module for ${(0,e.HS)(n)}: ${t}`),a.initPromise.reject(t)})),a}whenQueueEmpties(){const e=[];for(const t in this.registeredModules){const n=this.registeredModules[t];n.state===s.Loading&&e.push(n.initPromise)}return t.Q.all(e).nativePromise()}unloadModule(e){const n=this.typeLookup.getKeyByType(e);if(!n)throw Error("Attempting to unload unregistered module");const i=this.registeredModules[n];if(i.state===s.Unloaded||i.state===s.Registered)throw Error("Attempting to unload not-loaded module");i.state=s.Unloaded,i.ctorPromise=new t.Q,i.initPromise=new t.Q,i.module=void 0}}const r="Data not present.",o=new n.Z("market");class Market{constructor(){this.typeLookup=new e.cj,this.store={},this.moduleRegistry={},this.firstUpdatePromises={}}register(e,t,n){const i=this.typeLookup.getKeyByType(t,!0);if(this.moduleRegistry[i])throw Error("Data can only be registered to one Module");this.moduleRegistry[i]=e,this.store[i]=n,n.commit(),i in this.firstUpdatePromises&&(this.firstUpdatePromises[i].resolve(this.store[i]),delete this.firstUpdatePromises[i])}unregister(e,t){const n=this.typeLookup.getKeyByType(t,!0);if(!this.moduleRegistry[n])throw Error("No Data was registered to the Module");delete this.moduleRegistry[n],delete this.store[n]}getData(e){const t=this.typeLookup.getKeyByType(e);if(t in this.store)return this.store[t];throw Error(r)}waitForData(e){const i=this.typeLookup.getKeyByType(e,!0);return i in this.store?Promise.resolve(this.store[i]):(this.firstUpdatePromises[i]||(this.firstUpdatePromises[i]=new t.Q,setTimeout((()=>{n.Z.level>=3&&!(i in this.store)&&o.debug(`still waiting for ${e.name}-data after 5 seconds`)}),5e3)),this.firstUpdatePromises[i].nativePromise())}tryGetData(e){try{return this.getData(e)}catch(e){if(e.message!==r)throw o.error("tryGetData",e.message),e}return null}debugData(){const e={};for(const t in this.moduleRegistry){const n=this.moduleRegistry[t];n&&(e[n.name]||(e[n.name]=[]),e[n.name].push(this.store[t]))}return Object.freeze(e)}getModuleNameFromData(e){const t=this.typeLookup.getKeyByType(e);if(t){const e=this.moduleRegistry[t];if(e)return e.name}throw Error(r)}}var a=l(79013),c=l(64177),d=l(70446),u=l(37008),h=l(33299),p=l(9986);class Profiler{constructor(){this.phaseTimes=[],this.modules={},this.addAppPhase(p.nh.UNINITIALIZED),window.profilingData={phaseTimes:this.phaseTimes,modules:this.modules}}addAppPhase(e){this.phaseTimes[e]=Date.now()}addModuleLoadTime(e,t,n,i){const s=i.map((e=>e.moduleName)).join(","),r=i.reduce(((e,t)=>e+t.finishAwait-t.startAwait),0)/(n-t)*100;this.modules[e]=[e,e,null,t,n,null,r,s]}}var m=l(41907),g=l(14877);const f=new n.Z("engine");let v=d.A.End;class Engine{constructor(){this.moduleLookup={},this.componentLookup={},this.deactivatedHack=!1,this.currentApplication=null,this.moduleProfiler=new Profiler,this.commandBinder=new c.B,this.market=new Market,this.messageBus=new a.Y,this.engineGenerators=new u.ZP,this.layers=new h.o,this.moduleLoader=new ModuleLoader,this.symbolLoader=new g.m,this.afterPhasePromises=[],this.afterPhaseListenerCount=[],this.resetPromises(),this.subscribe(m.LZ,(e=>this.moduleProfiler.addAppPhase(e.phase)))}async loadApplication(e,t,n){if(e===this.currentApplication)throw Error("Application already loaded");const i=(this.currentApplication?this.currentApplication.getManifest():[]).map((e=>e.type)),s=e.getManifest(),r=s.map((e=>e.type)),o=this.currentApplication;this.currentApplication=null;const a=i.filter((e=>-1===r.indexOf(e))),l=a.filter((e=>"symbol"!=typeof e)),c=a.filter((e=>"symbol"==typeof e)),d=[...l.map((e=>this.unloadModule(e))),...c.map((e=>this.unloadModuleBySymbol(e)))];o&&d.push(o.unload(this));const u=s.filter((e=>-1===i.indexOf(e.type)));for(const e of u)"symbol"==typeof e.type?this.symbolLoader.moduleRegistered(e.type)||this.registerModule(e):this.moduleLoader.moduleRegistered(e.type)||this.registerModule(e);if(d.length)try{await Promise.all(d)}catch(e){f.error(e),t&&t(e)}try{this.currentApplication=e,await e.load(this,{coldStart:null===o,autoPlay:n})}catch(e){f.error(e),t&&t(e)}}registerModule(e){if(this.currentApplication)throw Error("Cannot register modules while application is running");"symbol"==typeof e.type?this.symbolLoader.registerModule(e.type,e.promise):this.moduleLoader.registerModule(e.type,e.promise)}loadModule(e){const t=e;this.moduleLoadInjectionHook&&(t.config=this.moduleLoadInjectionHook(t.type,t.config||{}));const n=new EngineContext(this,this.moduleLookup),i=Date.now(),s=this.moduleLoader.loadModule(n,t.type,t.config);return s.ctorPromise.then((e=>this.moduleLookup[this.moduleLoader.getTypeID(t.type)]={module:e,initialized:!1})),s.initPromise.then((e=>{this.moduleProfiler.addModuleLoadTime(e.name,i,Date.now(),n.getLoadedDependencies()),this.moduleLookup[this.moduleLoader.getTypeID(t.type)].initialized=!0})),s.initPromise.nativePromise()}loadModuleBySymbol(e){const t=e,n=String(t.type);this.moduleLoadInjectionHook&&(t.config=this.moduleLoadInjectionHook(n,t.config||{}));const i=new EngineContext(this,this.moduleLookup),s=Date.now(),r=this.symbolLoader.loadModule(i,t.type,t.config);return r.ctorPromise.then((e=>this.moduleLookup[n]={symbol:t.type,module:e,initialized:!1,initPromise:r.initPromise.nativePromise()})),r.initPromise.then((e=>{this.moduleProfiler.addModuleLoadTime(e.name,s,Date.now(),i.getLoadedDependencies()),this.moduleLookup[n].initialized=!0})),r.initPromise.nativePromise()}setLoadInjection(e){if(void 0!==this.moduleLoadInjectionHook)throw Error("Hook already registered");this.moduleLoadInjectionHook=e}async unloadModule(t){if(!this.moduleLoader.moduleLoaded(t))return void f.debug(`${(0,e.HS)(t)} module already unloaded`);f.debug(`Unloading ${(0,e.HS)(t)} module`);const n=await this.getModule(t),i=this.getModuleIndex(n);this.componentLookup[i]&&(await Promise.all(this.componentLookup[i].map((async e=>{await this.removeComponent(n,e.component),e.component.dispose()}))),this.componentLookup[i]=[]),this.moduleLoader.unloadModule(t),n.dispose(this)}async unloadModuleBySymbol(e){if(!this.symbolLoader.moduleLoaded(e))return void f.debug(`${String(e)} module already unloaded`);f.debug(`Unloading ${String(e)} module`);const{module:t,initPromise:n}=this.moduleLookup[String(e)];await n;const i=this.getModuleIndex(t);this.componentLookup[i]&&(await Promise.all(this.componentLookup[i].map((async e=>{await this.removeComponent(t,e.component),e.component.dispose()}))),this.componentLookup[i]=[]),this.symbolLoader.unloadModule(e),t.dispose(this)}async waitForLoadingModules(){await Promise.all([this.moduleLoader.whenQueueEmpties(),this.symbolLoader.whenQueueEmpties()])}async getModule(e){return this.moduleLoader.getModule(e)}getModuleBySymbol(e){return this.symbolLoader.getModule(e)}getModuleSync(e){return this.moduleLoader.getModuleSync(e)}tryGetModuleSync(e){try{return this.getModuleSync(e)}catch(e){return null}}getModuleBySymbolSync(e){return this.symbolLoader.getModuleSync(e)}tryGetModuleBySymbolSync(e){try{return this.getModuleBySymbolSync(e)}catch(e){return null}}getComponentByType(e){for(const t in this.moduleLookup){const n=this.moduleLookup[t].module,i=this.getModuleIndex(n),s=this.componentLookup[i]||[];for(const t of s)if(t.component instanceof e)return t.component}return null}async addComponent(e,t){const n=this.getModuleIndex(e);let i=this.componentLookup[n];i||(this.componentLookup[n]=i=[]);let s=-1;for(let e=0;e<i.length;e++)if(i[e].component===t){s=e;break}if(-1===s&&(s=i.push({component:t,active:!1})-1,t.init()),i[s].active)throw Error("Tried to add already active component: "+typeof t);await t.activate(this),i[s].active=!0}async removeComponent(e,t){const n=this.getModuleIndex(e),i=this.componentLookup[n];if(i){let e=null;for(const n of i)if(n.component===t){e=n;break}e&&e.active&&(await t.deactivate(this),e.active=!1)}}tick(){if(this.deactivatedHack)return;if(v!==d.A.End)throw Error("Engine.tick called outside of waiting. Did the engine get called recursively?!");v=d.A.Begin,this.resolveAfterPhase(d.A.Begin);const e=performance.now(),t=this.lastTick?e-this.lastTick:16;this.lastTick=e,v=d.A.Logic;try{for(const e in this.moduleLookup){const n=this.moduleLookup[e];n&&n.initialized&&n.module.onUpdate(t)}}catch(e){throw f.error(e),e}this.resolveAfterPhase(d.A.Logic),this.engineGenerators.processGenerators(u.p3.Phase,d.A.Logic);try{this.renderComponents(t)}catch(e){throw f.error(e),e}try{v=d.A.Render,this.resolveAfterPhase(d.A.Render),this.engineGenerators.processGenerators(u.p3.Phase,d.A.Render),v=d.A.End,this.resolveAfterPhase(d.A.End),this.engineGenerators.processGenerators(u.p3.None),this.engineGenerators.processGenerators(u.p3.Promise),this.engineGenerators.processGenerators(u.p3.Duration)}catch(e){throw f.error(e),e}}subscribe(e,t,n=a.Q.PERMANENT){return this.messageBus.subscribe(e,t,n)}unsubscribe(e,t){this.messageBus.unsubscribe(e,t)}broadcast(e){this.messageBus.broadcast(e)}claimRenderLayer(e){return this.layers.claimLayer(e)}getRenderLayer(e){return this.layers.getLayer(e)}disposeRenderLayer(e){this.layers.disposeLayer(e)}startGenerator(e){this.engineGenerators.startGenerator(e)}stopGenerator(e){this.engineGenerators.stopGenerator(e)}after(e){return this.afterPhaseListenerCount[e]++,this.afterPhasePromises[e].nativePromise()}getModuleIndex(e){for(const t in this.moduleLookup)if(this.moduleLookup[t]&&this.moduleLookup[t].module===e)return t;return""}*getComponents(){for(const e in this.moduleLookup){const t=this.componentLookup[e];if(t)for(const e of t)yield e}}toggleRendering(e,t){const n=this.getModuleIndex(e),i=this.componentLookup[n];if(i)for(const e of i)e.active=t}renderComponents(e){for(const t in this.moduleLookup){const n=this.componentLookup[t];if(n)for(const t of n)t.active&&t.component.beforeRender&&t.component.beforeRender(e)}for(const t in this.moduleLookup){if(!t)continue;const n=this.componentLookup[t];if(n)for(const t of n)t.active&&t.component.render(e)}}resetPromises(){this.resetAfterPhasePromises()}resetAfterPhasePromises(){this.resetAfterPhasePromise(d.A.Logic),this.resetAfterPhasePromise(d.A.Render),this.resetAfterPhasePromise(d.A.Begin),this.resetAfterPhasePromise(d.A.End)}resetAfterPhasePromise(e){this.afterPhasePromises[e]=new t.Q,this.afterPhaseListenerCount[e]=0}resolveAfterPhase(e){this.afterPhaseListenerCount[e]>0&&(this.afterPhasePromises[e].resolve(),this.resetAfterPhasePromise(e))}setXrFrame(e){this.xrFrame=e}getXrFrame(){return this.xrFrame}get msgBus(){return this.messageBus}}l(55512);var b=l(2252),y=l(87100),S=l(97966),E=l(17403),T=l(67233),O=l(81637),_=l(17423),A=l(81242),w=l(72699),N=l(49598),P=l(14909),I=l(94805),k=l(22878),C=l(40529),L=l(37363),M=l(23676),D=l(47725);const R=new n.Z("AB");class AB{constructor(e){this.values={};for(const t in e){const n=e[t];if(n&&n.ab)try{this.values[t]=x(n.ab)}catch(e){R.warn(`Skipping key ${t}, could not pick: ${e}`)}}}get(e){return this.values[e]}serialize(){return Object.keys(this.values).map((e=>`${e}:${this.values[e]}`))}}function x(e){if(0===e.length)throw Error("A/B cannot choose from an empty choice array");let t=0;for(const n of e){if(void 0===n.value||void 0===n.weight||n.weight<0)throw Error(`Malformed AB choice: ${n}`);t+=n.weight}const n=Math.random()*t;let i=0;for(const t of e)if(i+=t.weight,n<=i)return t.value}var j=l(20585),U=l(56483),H=l(18253),F=l(65453),B=l(34118),V=l(73156),G=l(54068),W=l(24486),z=l(14279),K=l(77866),Y=l(32683),q=l(59867),$=l(18196),Z=l(73694),Q=l(83229),X=l(90697),J=l(66524),ee=l(36407);const te=new n.Z("showcase-settings/quality");var ne=l(40386),ie=l(61116),se=l(48730),re=l(81402),oe=l(90237),ae=l(81052);class EngineTick{constructor(e,t,n){this.engine=e,this.onErrorCallback=n,this.ticking=!1,this.start=()=>{this.ticking=!0},this.stop=()=>{this.ticking=!1},this.tick=(e,t)=>{if(this.ticking)try{this.engine.setXrFrame(t),this.engine.tick()}catch(e){this.stop(),this.onErrorCallback(e)}},t.setAnimationLoop(this.tick)}}var le=l(66225),ce=l(55900),de=l(54161);class PrefetchedData{static get hasPassword(){const{model:e}=window.MP_PREFETCHED_MODELDATA||{};return e&&e.has_public_access_password}static getQuery(e){var t,n;const i=(null===(t=window.MP_PREFETCHED_MODELDATA)||void 0===t?void 0:t.queries)||{};switch(e){case"GetModelPrefetch":{const t=i[e];if(!t)return;const s=null===(n=t.data)||void 0===n?void 0:n.model;if(!s)return;if(!s.locations.length)return;return t}default:return i[e]}}static get config(){var e;return null===(e=window.MP_PREFETCHED_MODELDATA)||void 0===e?void 0:e.config}}var ue=l(18884),he=l(91183);class ControllerProxy{constructor(e,t){this.proxy=e,this.target=t}beginExternalTransition(){this.proxy.activeSession(this)&&this.target.beginExternalTransition()}endExternalTransition(){this.proxy.activeSession(this)&&this.target.endExternalTransition()}updateCameraPosition(e){this.proxy.activeSession(this)&&this.target.updateCameraPosition(e)}updateCameraRotation(e){this.proxy.activeSession(this)&&this.target.updateCameraRotation(e)}updateCameraFocus(e){this.proxy.activeSession(this)&&this.target.updateCameraFocus(e)}moveTo(e){return this.proxy.activeSession(this)?this.target.moveTo(e):t.Q.resolve()}}class CameraPoseProxy{constructor(e,t){this.controller=e,this.data=t,this.proxies=[]}get pose(){return this.data}activeSession(e){if(0===this.proxies.length)return!1;return this.proxies[this.proxies.length-1].controller===e}newSession(e){let t=null;if(-1!==this.proxies.findIndex((t=>t.requester===e)))throw new Error("Cannot create two sessions with the same requester");return(0,he.k1)((()=>{if(!t){if(this.proxies.length>0){const e=this.proxies[this.proxies.length-1];e.requester.onAccessRevoked(e.controller)}t=new ControllerProxy(this,this.controller),this.proxies.push({controller:t,requester:e}),e.onAccessGranted(t)}}),(()=>{if(t){const e=this.proxies.findIndex((e=>e.controller===t));if(-1!==e){const t=this.proxies[e],n=e===this.proxies.length-1;if(n&&t.requester.onAccessRevoked(t.controller),this.proxies.splice(e,1),this.proxies.length>0&&n){const e=this.proxies[this.proxies.length-1];e.requester.onAccessGranted(e.controller)}}}}))}}var pe=l(15099),me=l(12621),ge=l(76576),fe=l(64969),ve=l(93510);var be=l(7765),ye=l(76031);async function Se(e,t){if(!e)return!0;if(!window.crypto||!window.crypto.subtle)return!1;const n=new URL(e),i=(0,P.QY)(n.hostname),s=await(async e=>Array.prototype.map.call(new Uint8Array(await crypto.subtle.digest("SHA-1",(new TextEncoder).encode(e))),(e=>("0"+e.toString(16)).slice(-2))).join(""))(i);return!t.includes(s)}var Ee=l(14385);var Te=l(16534);async function Oe({urlValues:e,settingsData:t,flags:n,loggedIn:i,inWorkshop:s,hasPolicy:r,domainDenylist:o}){const a=null!=(0,ge.gM)(),l=e[ye.ke.enabled],c=n.has(ye.M3)?"0"!==l:"1"===l,d=r(ye.FI),u=!i,h=t.tryGetProperty(Te.sX,!1),p=e[ye.ke.forceReferrer]||document.referrer,m=await Se(p,o);Ee.L.debug("referrer eligible: ",m.toString());const g=!a&&!s,f=(0,y.eY)("lang",(0,b.ht)()).startsWith("en"),v=c&&!h&&g&&f&&u;return{popupAllowed:v&&d&&m,bannerAllowed:v}}var _e=l(69524),Ae=l(14547);var we=l(96542),Ne=l(74170),Pe=l(91988),Ie=l(39468),ke=l(71981),Ce=l(87066),Le=l(59114),Me=l(61903),De=l(33669);const Re=new n.Z("showcase"),xe=window.MP_PREFETCHED_MODELDATA;class Showcase{constructor(e,n={},i=!1){this.inWorkshop=e,this.settingOverrides=n,this.editModePreferred=i,this.bindings=[],this.externalCanvas=!1,this.urlValues=(0,y.FU)(),this.storeQueue=new E.RequestQueue,this.apiQueue=new E.RequestQueue,this.analyticsQueue=new E.RequestQueue({concurrency:1}),this.errorPromise=new t.Q,this.quickstart="1"===this.urlValues.qs||void 0!==this.urlValues.note||void 0!==this.urlValues.tag,this.autoplay=!1,this.forceLogin=!1,this.openingTool=null,this.needsFramebustToPlayXR=!0,this.uiLoading=Promise.resolve(),this.newTagPolicyPromise=new t.Q,this.sceneLoader=new we.LazyLoader,this.sesLoader=new we.LazyLoader,this.modulesLoadedPromise=new t.Q,this.stopTourHook=async e=>{const t=e.market.tryGetData(w.k);t&&t.tourPlaying&&(await e.commandBinder.issueCommand(new ie.vy),await(0,re.gw)(10))};const{container:s}=this.settingOverrides;(0,ge.P8)(this.urlValues.applicationKey||n.applicationKey||null),this.apiHost=((e,t)=>{const n=e.apiHost||t.apiHost;if(n){const e=(0,P.KK)(n);if(e)return e}return window.location.origin})(this.urlValues,this.settingOverrides),this.oEmbedDeferred=new t.Q,this.oEmbedConsumer=this.oEmbedDeferred.nativePromise(),n.canvas&&(this.externalCanvas=!0,this.canvas=n.canvas),this.apiHost!==window.location.origin&&(this.settingOverrides.apiHost=this.apiHost),this.container=s||document.body,this.modelUrls=(0,P.sU)(this.urlValues.m||this.urlValues.model,this.apiHost),this.initialViewId=this.modelUrls.sid}getManifest(){const e=[{type:g.y.GUI,promise:()=>Promise.resolve().then(l.bind(l,27436))},{type:g.y.LOADING_GUI,promise:()=>Promise.resolve().then(l.bind(l,19590))},{type:g.y.SHOWCASE_GUI,promise:()=>Promise.resolve().then(l.bind(l,88705))},{type:g.y.APP_PHASE,promise:()=>Promise.resolve().then(l.bind(l,87278))},{type:g.y.SETTINGS,promise:()=>Promise.resolve().then(l.bind(l,81242))},{type:g.y.ANALYTICS,promise:()=>Promise.resolve().then(l.bind(l,29782))},{type:g.y.SDK,promise:()=>Promise.resolve().then(l.bind(l,29819))},{type:g.y.SHOWCASE_PASSWORD,promise:()=>Promise.resolve().then(l.bind(l,22299))},{type:g.y.LOGIN_REDIRECT,promise:()=>Promise.resolve().then(l.bind(l,95998))},{type:g.y.API,promise:()=>Promise.resolve().then(l.bind(l,13350))},{type:g.y.MODEL_DATA,promise:()=>Promise.resolve().then(l.bind(l,81685))},{type:g.y.RAYCASTER,promise:()=>Promise.resolve().then(l.bind(l,97744))},{type:g.y.CAMERA_START,promise:()=>Promise.resolve().then(l.bind(l,1892))},{type:g.y.SNAPSHOTS_DATA,promise:()=>Promise.resolve().then(l.bind(l,89002))},{type:g.y.LOCALE,promise:()=>Promise.resolve().then(l.bind(l,39142))},{type:g.y.SWEEP_DATA,promise:()=>Promise.resolve().then(l.bind(l,47356))},{type:g.y.SHOWCASE_ANALYTICS,promise:()=>Promise.resolve().then(l.bind(l,1390))},{type:g.y.WEBGL_RENDERER,promise:()=>Promise.resolve().then(l.bind(l,68884))},this.externalCanvas?{type:g.y.CANVAS,promise:()=>Promise.resolve().then(l.bind(l,99145))}:{type:g.y.CANVAS,promise:()=>Promise.resolve().then(l.bind(l,3555))},{type:g.y.INPUT,promise:()=>Promise.resolve().then(l.bind(l,51573))},{type:g.y.ERROR_UI,promise:()=>Promise.resolve().then(l.bind(l,40529))},{type:g.y.SHOWCASE_WEBGL_CONTEXT_LOSS,promise:()=>Promise.resolve().then(l.bind(l,21284))},{type:g.y.CAMERA,promise:()=>Promise.resolve().then(l.bind(l,62344))},{type:g.y.SCHEDULER,promise:()=>Promise.resolve().then(l.bind(l,32227))},{type:g.y.LAYERS,promise:()=>Promise.resolve().then(l.bind(l,76061))},{type:g.y.USERS,promise:()=>Promise.resolve().then(l.bind(l,74678))},{type:g.y.STORAGE,promise:()=>Promise.resolve().then(l.bind(l,50063))},{type:g.y.SWEEP_VIEWDATA,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,3637))},{type:g.y.SKYBOX,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,71271))},{type:g.y.VIEWMODE,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,98370))},{type:g.y.VIEWMODE_CHANGE,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,63316))},{type:g.y.FLOORS,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,97358))},{type:g.y.RENDER_TO_TEXTURE,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,56709))},{type:g.y.TOOLS,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,51662))},{type:g.y.CONTROLS_COMMON,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,24673))},{type:g.y.CONTROLS_INSIDE,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,82702))},{type:g.y.MOUSE_CURSOR,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,88770))},{type:g.y.FLOORS_VIEWDATA,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,27086))},{type:g.y.ROOMS,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,86701))},{type:g.y.INTERACTION_MODE,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,18961))},{type:g.y.CONTROLS_DOLLHOUSE,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,85564))},{type:g.y.CONTROLS_FLOORPLAN,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,11542))},{type:g.y.CONTROLS_ZOOM,promise:()=>l.e(297).then(l.bind(l,3297))},{type:g.y.SHOWCASE_HOTKEYS,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,68860))},{type:g.y.SHOWCASE_START,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,94139))},{type:g.y.SHOWCASE_SETTINGS,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,25657))},{type:g.y.NAVIGATION,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,98226))},{type:g.y.MODEL_MESH,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,35058))},{type:g.y.MODEL_MESH_QUALITY,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,39173))},{type:g.y.MESH_QUERY,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,60137))},{type:g.y.MESH_API_FIXUP,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,83012))},{type:g.y.MESH_TRIM_DATA,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,5501))},{type:g.y.ORTHOGRAPHIC_CONTROLS,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,79846))},{type:g.y.SES,promise:()=>Promise.all([l.e(47),l.e(670),l.e(58),l.e(764),l.e(321)]).then(l.bind(l,79878))},{type:g.y.ANNOTATIONS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,38117))},{type:g.y.ATTACHMENTS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,24849))},{type:g.y.CURRENT_PANO_MARKER,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,25952))},{type:g.y.CURSORS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,35784))},{type:g.y.CURSOR_MESH,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,58193))},{type:g.y.CURSOR_CONTROLLER,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,63820))},{type:g.y.DEEP_LINKS,promise:()=>l.e(300).then(l.bind(l,78300))},{type:g.y.FAT_RAYCAST,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,92165))},{type:g.y.FLOOR_RAYCAST,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,28452))},{type:g.y.LINES,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,89823))},{type:g.y.MATTERTAG_DATA,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,62630))},{type:g.y.MATTERTAG_VIEWDATA,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,63452))},{type:g.y.MATTERTAG_MESH,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,46446))},{type:g.y.PINS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,27204))},{type:g.y.NOTES,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,75795))},{type:g.y.OBJECT_TAG_SUGGESTIONS_DATA,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,31413))},{type:g.y.ORDERED_LISTS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,59227))},{type:g.y.PRE_RENDER,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,20253))},{type:g.y.QUICK_MENUS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,46977))},{type:g.y.SCREENSHOTS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,55210))},{type:g.y.SENSORS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,28528))},{type:g.y.SNAPSHOTS_EDITOR,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,71742))},{type:g.y.SWEEP_PATH,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,72953))},{type:g.y.SWEEP_PIN,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,97009))},{type:g.y.SWEEP_PIN_NAVIGATION,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,89236))},{type:g.y.SWEEP_PORTAL,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,63134))},{type:g.y.SWEEP_PORTAL_NAVIGATION,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,72004))},{type:g.y.TAGS,promise:()=>Promise.all([l.e(995),l.e(365),l.e(764),l.e(136)]).then(l.bind(l,93572))},{type:g.y.AUTOMATION_SUPPORT,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,94639))},{type:g.y.DWELL_ANALYTICS,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,7441))},{type:g.y.LABEL_DATA,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,55133))},{type:g.y.LABEL_RENDERER,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,70310))},{type:g.y.MEASUREMENT_MODE,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,5951))},{type:g.y.MODEL_RATING,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,28307))},{type:g.y.SEARCH,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,69667))},{type:g.y.SCAN_INFO,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,58517))},{type:g.y.SWEEP_PUCKS,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,59021))},{type:g.y.TOUR_CONTROLS,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,30473))},{type:g.y.TOUR_DATA,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,81776))},{type:g.y.TRASH,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,59807))},{type:g.y.VIDEO_RECORDER,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,98154))},{type:g.y.WEBXR,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,8588))},{type:g.y.TRASH,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,59807))},{type:g.y.AUTOMATION_SUPPORT,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,94639))},{type:g.y.PLUGIN,promise:()=>l.e(207).then(l.bind(l,89207))},{type:g.y.SCENE,promise:()=>Promise.all([l.e(47),l.e(976),l.e(670),l.e(376),l.e(110),l.e(564),l.e(769)]).then(l.bind(l,76769))}];return"0"!==this.urlValues.tiles?e.push({type:g.y.SWEEP_PANO,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,84885))}):e.push({type:g.y.SWEEP_PANO,promise:()=>Promise.all([l.e(995),l.e(385),l.e(934),l.e(365),l.e(393),l.e(833)]).then(l.bind(l,49873))}),e}getAppPhases(e){return{[p.nh.UNINITIALIZED]:[],[p.nh.WAITING]:[(async()=>{await e.getModuleBySymbol(g.y.LOADING_GUI)})()],[p.nh.LOADING]:[(async()=>(await e.getModuleBySymbol(g.y.LOADING_GUI)).waitForPlaying)()],[p.nh.STARTING]:[(async()=>(await e.getModuleBySymbol(g.y.SHOWCASE_START)).waitForFirstRender)()],[p.nh.PLAYING]:[(async()=>(await e.getModuleBySymbol(g.y.SHOWCASE_START)).waitForFlyin)()],[p.nh.ERROR]:[this.errorPromise.nativePromise()]}}setError(e){this.errorPromise.reject(e),this.engineTick&&this.engineTick.stop()}async load(e,t){var i,s,r;if(this.engine=e,this.engine.loadModuleBySymbol({type:g.y.APP_PHASE,config:{tasks:this.getAppPhases(e)}}),this.engine.loadModuleBySymbol({type:g.y.SETTINGS,config:{useGUI:!0}}),this.loadAnalytics(),e.getModuleBySymbol(g.y.APP_PHASE).then((n=>{n.updateActiveApp(p.Mx.SHOWCASE),t.coldStart||e.broadcast(new m.pB(p.Mx.SHOWCASE))})),e.market.waitForData(p.pu).then((t=>{t.onChanged((async()=>{const n=this.urlValues.oops;if(t.phase===p.nh.ERROR||n){const i=t.error,s=await e.getModuleBySymbol(g.y.ERROR_UI);throw i instanceof D.v||"unsupported"===n?s.showError(C.ErrorType.UNSUPPORTED):i instanceof D.G||"webgl"===n?s.showError(C.ErrorType.WEBGL):s.showError(C.ErrorType.GENERIC),i}}))})),this.bindings.push((0,_e.PD)({messageBus:this.engine.msgBus}),function(e){const t=[];return e.urlValues.debug&&t.push(new _e.bc({symbol:Ae.Y.Navigation,callback:()=>Promise.all([l.e(995),l.e(385),l.e(365),l.e(393),l.e(316)]).then(l.bind(l,25416)).then((t=>t.default(e.engine)))}),new _e.bc({symbol:Ae.Y.Octree,callback:()=>Promise.all([l.e(995),l.e(385),l.e(365),l.e(393),l.e(316)]).then(l.bind(l,59333)).then((t=>t.default(e.engine)))}),new _e.bc({symbol:Ae.Y.PanoTiles,callback:()=>Promise.all([l.e(995),l.e(385),l.e(365),l.e(393),l.e(316)]).then(l.bind(l,48082)).then((t=>t.default(e.engine)))}),new _e.bc({symbol:Ae.Y.Raycaster,callback:()=>Promise.all([l.e(995),l.e(385),l.e(365),l.e(393),l.e(316)]).then(l.bind(l,55744)).then((t=>t.default(e.engine)))}),new _e.bc({symbol:Ae.Y.Snapping,callback:()=>Promise.all([l.e(995),l.e(385),l.e(365),l.e(393),l.e(316)]).then(l.bind(l,21413)).then((t=>t.default(e.engine)))}),new _e.bc({symbol:Ae.Y.WebGLRenderer,callback:()=>Promise.all([l.e(995),l.e(385),l.e(365),l.e(393),l.e(316)]).then(l.bind(l,83387)).then((t=>t.default(e.engine)))})),e.urlValues.tiledmesh&&t.push(new _e.bc({symbol:Ae.Y.StreamingMesh,callback:()=>l.e(521).then(l.bind(l,96286)).then((t=>t.default(e.engine)))}),new _e.bc({symbol:Ae.Y.StreamingTexture,callback:()=>l.e(521).then(l.bind(l,40212)).then((t=>t.default(e.engine)))})),t.forEach((t=>e.messageBus.broadcast(t))),(0,he.k1)((()=>null),(()=>t.forEach((t=>e.messageBus.broadcast(new _e.z4(t.payload))))))}({engine:this.engine,messageBus:this.engine.msgBus,urlValues:this.urlValues})),!t.coldStart)return void(this.uiLoading=this.loadUI(!0));let o;Re.info("Showcase app version: 3.1.75.3-0-gba9de22f6d"),this.externalCanvas||(this.canvas=document.createElement("canvas"),this.canvas.className="webgl-canvas",o=document.querySelector("#canvas-container"));const a=document.querySelector("#app-container"),c=document.querySelector("main")||document.body,d=document.querySelector("#react-render-root")||document.body,u=parseInt(this.urlValues.log,10);this.urlValues.hasOwnProperty("log")&&!isNaN(u)&&(n.Z.level=u),this.quickstart&&Re.info("Quickstart engaged. Hold on to your knickers. "+performance.now());const h=await this.engine.loadModuleBySymbol({type:g.y.API,config:{baseUrl:this.modelUrls.urlBase,apiQueue:this.apiQueue,storeQueue:this.storeQueue,prefetchedData:xe,preloadConfig:"showcase"}}),f=h.getApi(),v=this.urlValues.applicationKey||this.settingOverrides.applicationKey,y={scene:this.sceneLoader,ses:this.sesLoader},E=this.loadSdkModule(f,y,this.newTagPolicyPromise.nativePromise(),v),T=!!v&&await E;if(T)try{await f.modelExists(this.initialViewId,{ignorePrefetch:!0})}catch(e){Re.error(e),this.engine.loadModuleBySymbol({type:g.y.LOCALE,config:{isLoggedIn:!1,queue:this.apiQueue}}),this.engine.loadModuleBySymbol({type:g.y.ERROR_UI});throw(await this.engine.getModuleBySymbol(g.y.ERROR_UI)).showError(C.ErrorType.GENERIC),e}this.engine.loadModuleBySymbol({type:g.y.WEBGL_RENDERER,config:{canvas:this.canvas,useWebGL2:"1"===this.urlValues.gl2,antialias:"1"===this.urlValues.aa,useEffectComposer:!(!this.settingOverrides||!this.settingOverrides.hasOwnProperty("useEffectComposer"))&&!!this.settingOverrides.useEffectComposer}}),this.engine.loadModuleBySymbol({type:g.y.CAMERA}),this.engine.loadModuleBySymbol({type:g.y.CANVAS,config:{canvas:this.canvas,container:o}}),this.engine.loadModuleBySymbol({type:g.y.SCHEDULER}),this.engine.loadModuleBySymbol({type:g.y.SENSORS});const[O,N,P]=await Promise.all([e.getModuleBySymbol(g.y.WEBGL_RENDERER),e.getModuleBySymbol(g.y.SETTINGS),e.getModuleBySymbol(g.y.CAMERA)]);this.engineTick=new EngineTick(this.engine,O.threeRenderer,(e=>{this.engine.getModuleBySymbol(g.y.ERROR_UI).then((t=>{this.setError(e),t.showError(C.ErrorType.GENERIC)}))})),this.apiConfig=await f.getConfigs("showcase"),this.setupOEmbedConsumer(this.settingOverrides.embedlyKey);const R=new AB(this.apiConfig),x=!this.urlValues.applicationKey&&("roomnav_ab"in this.urlValues?"1"===this.urlValues.roomnav_ab:R.get("roomnav_ab_1"));Re.debug("Roomnav AB "+(x?"enabled":"disabled"));const V=f.user.getFlags("showcase/"),re=V.has(me.AR);this.loadPrefetchedData(this.initialViewId,re);const oe=(0,$.HG)(parseFloat(this.urlValues.wts)),{labels:ae,mt:le,roomnav:ce,play:de,search:ue,q:ge,qK:Se,allowRating:Ee,tiledmesh:Oe,newtags:we,advancedSearch:Pe,tagIcons:ke,newUi:Ce}=this.urlValues,Le=f.user.loggedIn;this.engine.loadModuleBySymbol({type:g.y.LOCALE,config:{isLoggedIn:Le,queue:this.apiQueue}}),this.engine.loadModuleBySymbol({type:g.y.ERROR_UI}),this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_WEBGL_CONTEXT_LOSS,config:{notificationDelayFrames:60}}),this.openingTool=(0,I.u)(N.settingsData,"0"!==we,!0),this.forceLogin=this.openingTool===M.w1.NOTES&&!Le&&!b.yL();let Me=this.editModePreferred;Me&&this.forceLogin&&(Re.warn("Cannot start in edit mode. Need to login to view note."),Me=!1);const De=V.has(G.b),je=(0,ve.z)(navigator.language),Ue=V.has(q.B)&&"0"!==ue,He=V.has(q.l)?"0"!==Pe:"1"===Pe,Fe=V.has(be.i)?"0"!==Ee:"1"===Ee,Be=this.inWorkshop&&Le&&Fe,Ve=Be&&V.has(be.j)?"0"!==Ee:"1"===Ee,Ge="1"===this.urlValues.modelRatingDebug,We=V.has(B.RV)?"0"!==ke:"1"===ke,ze=V.has(U.iT)?"0"!==Oe:"1"===Oe,Ke=this.urlValues.minConfidence?(0,Ne.uZ)(parseFloat(this.urlValues.minConfidence),.01,1):void 0,Ye=!("1"!==de&&!t.autoPlay&&!this.openingTool);this.needsFramebustToPlayXR=b.Ot()&&!b.PI("xr-spatial-tracking"),this.autoplay=!this.forceLogin&&(!b.yL()||Ye&&!this.needsFramebustToPlayXR);const qe=V.has(j.Bg)?"0"!==Ce:"1"===Ce,$e={Features:{[z.U]:!0,[W.s]:!0,[U.iT]:ze,[F.Nj]:"0"!==ae,[H.re]:"0"!==le,[Y.ws]:"0"!==this.urlValues.f,[Y.Q5]:void 0===ce&&V.has(Y.Q5)||void 0!==ce&&"0"!==ce,[K.EU]:oe,[G.b]:De,[Ie.I]:V.has(Ie.I),[be.i]:Be,[be.j]:Ve,[q.B]:Ue,[q.l]:He,[ye.B_]:!1,[me.AR]:re,[j.Bg]:qe,[B.RV]:We,[Y.u_]:!x,[fe.o]:!x,[Y.gu]:!x},"User Preferences":{[_.F.UnitType]:je,[_.F.MeasurementSnapping]:!0,[_.F.MeasurementContinuousLines]:!0,[_.F.MeasurementUserNudgeSeen]:!1,[_.F.DollhouseUserNudgeSeen]:!1,[_.F.NotesModeNudgeSeen]:!1,[_.F.NotesIntroModalSeen]:!1,[_.F.LastRatingPromptTime]:null,[_.F.SubscriberPromptDismissed]:!1,[_.F.TourTextNudgeDismissed]:!1,[_.F.TourMobileNavigationPromptSeen]:!1}};for(const e in $e)for(const t in $e[e]){if(void 0===$e[e][t])continue;const n="User Preferences"===e?A.SettingPersistence.LOCAL_STORAGE:A.SettingPersistence.NONE;N.registerSetting(e,t,$e[e][t],!0,n)}const Ze={[ne.YS]:null,quickstart:this.quickstart,lang:this.urlValues.lang,perf:this.urlValues.perf,perfInterval:this.urlValues.perfInterval,[Te.r4]:(null===(i=this.apiConfig)||void 0===i?void 0:i.discover_space_url)||""};for(const e in Ze)N.updateSetting(e,Ze[e]);if(this.settingOverrides)for(const e in this.settingOverrides)N.updateSetting(e,this.settingOverrides[e]);const Qe=null!==(s=null==R?void 0:R.serialize())&&void 0!==s?s:[];if(this.loadInitialAppModules(Qe,O.gpuInfo,$e),!T)try{await this.loginToModel(this.initialViewId,h)}catch(e){return void this.setError(e)}await this.engine.loadModuleBySymbol({type:g.y.USERS,config:{baseUrl:this.modelUrls.urlBase,api:f,viewId:this.initialViewId,queue:this.apiQueue}}),this.baseModelId=await this.loadViewsAndStorage(this.initialViewId,N);const Xe=this.setUserPolicySettings(Le,N,V);this.forceLogin&&this.openingTool===M.w1.NOTES&&await this.loginToNote(this.baseModelId),N.hasProperty(H.lc)||N.updateSetting(H.lc,this.apiConfig.embedly_key),this.loadInitialDataModules($e);const Je=((e,t)=>new CameraPoseProxy(e,t))(P,(await e.market.waitForData(pe.M_)).pose);e.commandBinder.hookCommand(se.ju,!0,(()=>this.stopTourHook(e))),e.commandBinder.hookCommand(ie.rU,!0,(()=>this.stopTourHook(e)));try{await e.waitForLoadingModules()}catch(t){this.setError(t),e.tick()}const[et,tt]=await Promise.all([e.market.waitForData(S.T),e.getModuleBySymbol(g.y.CAMERA_START)]),{details:nt,organizationId:it}=et.model;document.title=nt.name;const st=tt.getStartingPose();!this.quickstart||st&&(0,k.vl)(st.mode)||(Re.warn("Disabling quickstart. No panorama start position."),this.quickstart=!1,N.updateSetting("quickstart",!1));const{maxMeshQuality:rt,navPanoSize:ot,zoomPanoSize:at,textureLODThreshold:lt}=((e,t)=>{let n,i,s,r;(0,b.tq)()?(0,b.tq)()&&(0,J.W)(t)?(n=X.S.ULTRA,i=ee.eE[ee.SL.STANDARD],s=ee.eE[ee.SL.HIGH],r=10):(n=X.S.MEDIUM,i=ee.eE[ee.SL.STANDARD],s=ee.eE[ee.SL.HIGH],r=6):(n=X.S.ULTRA,i=ee.eE[ee.SL.HIGH],s=ee.eE[ee.SL.ULTRAHIGH],r=20);try{n=e.maxmeshq?(0,Q.Pm)(parseInt(e.maxmeshq,10)):n}catch(t){te.warn(`Not a valid texture size: ${e.maxmeshq}`)}return i=e.maxtileq?parseInt(e.maxtileq,10):i,s=e.maxztileq?parseInt(e.maxztileq,10):s,r=e.texlodthreshold?parseInt(e.texlodthreshold,10):r,{maxMeshQuality:n,navPanoSize:i,zoomPanoSize:s,textureLODThreshold:r}})(this.urlValues,O.gpuInfo);Re.info({maxMeshQuality:rt,navPanoSize:ot,zoomPanoSize:at,textureLODThreshold:lt,gpuInfo:O.gpuInfo}),e.loadModuleBySymbol({type:g.y.PLUGIN}),this.sceneLoader.setLoader((async()=>{const t=await e.loadModuleBySymbol({type:g.y.SCENE,config:{cameraPoseProxy:Je}});return t.startLoading(),t})),await this.engine.loadModuleBySymbol({type:g.y.SWEEP_PANO,config:{navPanoSize:ot,zoomPanoSize:at}}),await this.engine.loadModuleBySymbol({type:g.y.SKYBOX}),this.quickstart&&(this.loadPanoControls(Me),this.engineTick.start()),await(await e.getModuleBySymbol(g.y.LOADING_GUI)).waitForPlaying,this.engine.loadModuleBySymbol({type:g.y.MOUSE_CURSOR,config:{container:this.container}});const ct=V.has("features/meshtrim")&&"0"!==this.urlValues.allowMeshTrim;ct&&this.engine.loadModuleBySymbol({type:g.y.MESH_TRIM_DATA,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,queue:this.storeQueue}});const dt="2"===this.urlValues.texlod?Z.l.RAYCAST:"0"===this.urlValues.texlod?Z.l.NONE:Z.l.RAYCAST;this.engine.loadModuleBySymbol({type:g.y.MODEL_MESH,config:{startingMode:this.quickstart?st.mode:null,textureLOD:dt,textureLODThreshold:lt,colorizeRooms:"1"===this.urlValues.colorizeRooms,colorizeChunks:"1"===this.urlValues.colorizeChunks,wireframe:"1"===this.urlValues.wireframe,meshTrimEnabled:ct}}),this.engine.loadModuleBySymbol({type:g.y.MODEL_MESH_QUALITY,config:{maxQuality:rt,textureLOD:dt,textureLODThreshold:lt,meshTrimEnabled:ct}}),this.engine.loadModuleBySymbol({type:g.y.VIEWMODE_CHANGE}),this.engine.loadModuleBySymbol({type:g.y.VIEWMODE,config:{startingMode:this.quickstart?st.mode:null}}),this.engine.loadModuleBySymbol({type:g.y.ROOMS,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase}}),this.engine.loadModuleBySymbol({type:g.y.SWEEP_VIEWDATA}),this.engine.loadModuleBySymbol({type:g.y.FLOORS,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue}}),this.engine.loadModuleBySymbol({type:g.y.FLOORS_VIEWDATA,config:{startingFloorsVisibility:this.quickstart?st.floorVisibility:void 0,allowFloorChanges:$e.Features[Y.ws],focusBasedNav:$e.Features[Y.Q5]}}),this.engine.loadModuleBySymbol({type:g.y.RENDER_TO_TEXTURE}),this.engine.loadModuleBySymbol({type:g.y.GUI,config:{workshopApp:this.inWorkshop,container:a,mainDiv:c,reactContainer:d,queue:this.apiQueue}}),this.engine.loadModuleBySymbol({type:g.y.TOOLS}),this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_GUI}),this.engine.loadModuleBySymbol({type:g.y.INTERACTION_MODE}),this.engine.loadModuleBySymbol({type:g.y.CONTROLS_DOLLHOUSE,config:{cameraPoseProxy:Je}}),this.engine.loadModuleBySymbol({type:g.y.CONTROLS_FLOORPLAN}),this.engine.loadModuleBySymbol({type:g.y.ORTHOGRAPHIC_CONTROLS}),this.sesLoader.setLoader((async()=>await this.engine.loadModuleBySymbol({type:g.y.SES}))),this.engine.loadModuleBySymbol({type:g.y.CONTROLS_ZOOM,config:{enabled:"1"!==this.urlValues.nozoom,tiles:"0"!==this.urlValues.tiles}}),this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_START}),this.engine.loadModuleBySymbol({type:g.y.NAVIGATION,config:{enableWheel:"1"===this.urlValues.nozoom,focusBasedNav:$e.Features[Y.Q5]}}),this.engine.loadModuleBySymbol({type:g.y.MESH_QUERY}),this.engine.loadModuleBySymbol({type:g.y.FLOOR_RAYCAST}),this.engine.loadModuleBySymbol({type:g.y.MESH_API_FIXUP}),this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_HOTKEYS}),this.quickstart||(this.engineTick.start(),this.loadPanoControls(Me)),await this.engine.waitForLoadingModules(),"0"!==this.urlValues.portal&&(this.engine.loadModuleBySymbol({type:g.y.SWEEP_PORTAL}),this.engine.loadModuleBySymbol({type:g.y.SWEEP_PORTAL_NAVIGATION})),this.engine.loadModuleBySymbol({type:g.y.SWEEP_PIN,config:{showPinsInFloorplanDollhouse:"0"!==this.urlValues.pin}}),this.engine.loadModuleBySymbol({type:g.y.SWEEP_PIN_NAVIGATION});const ut=await Xe,{newTagsEnabled:ht,objectTagsEnabled:pt,storyToursFeature:mt}=ut;this.engine.loadModuleBySymbol({type:g.y.SWEEP_PUCKS,config:{checkRenderModes:()=>{const t=e.market.tryGetData(w.k);if(t&&t.isTourActive())return!1;const n=e.market.tryGetData(L.O);return!!n&&n.isInside()}}}),this.engine.loadModuleBySymbol({type:g.y.LABEL_DATA,config:{baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue}}),this.engine.loadModuleBySymbol({type:g.y.LABEL_RENDERER}),this.engine.loadModuleBySymbol({type:g.y.PINS,config:{newTagsEnabled:ht,tagIconsEnabled:We}}),this.engine.loadModuleBySymbol({type:g.y.ANNOTATIONS}),this.loadUserPolicyModules(this.initialViewId,Le,N,V,R,ut,We,it||void 0),this.engine.loadModuleBySymbol({type:g.y.FAT_RAYCAST,config:{debug:"1"===this.urlValues.fcdbg}}),this.engine.loadModuleBySymbol({type:g.y.LINES}),this.engine.loadModuleBySymbol({type:g.y.MATTERTAG_DATA,config:{baseUrl:this.modelUrls.urlBase,readonly:!0,parserOptions:{model:this.initialViewId,supportLinks:!this.urlValues.mls||"0"===this.urlValues.mls,keepLinkLabels:!0},queue:this.storeQueue,newTagsEnabled:ht}}),this.engine.loadModuleBySymbol({type:g.y.MATTERTAG_VIEWDATA}),this.engine.loadModuleBySymbol({type:g.y.MATTERTAG_MESH}),this.engine.loadModuleBySymbol({type:g.y.SWEEP_PATH}),this.engine.loadModuleBySymbol({type:g.y.TOUR_DATA,config:{baseUrl:this.modelUrls.urlBase,readonly:!0,storyToursFeature:mt,looping:"1"===this.urlValues.lp,queue:this.storeQueue,baseModelId:this.baseModelId}}),this.engine.loadModuleBySymbol({type:g.y.TOUR_CONTROLS}),this.engine.loadModuleBySymbol({type:g.y.PRE_RENDER}),this.engine.loadModuleBySymbol({type:g.y.CURSORS}),this.engine.loadModuleBySymbol({type:g.y.CURSOR_MESH}),this.engine.loadModuleBySymbol({type:g.y.CURSOR_CONTROLLER}),this.engine.loadModuleBySymbol({type:g.y.SCAN_INFO,config:{baseUrl:this.modelUrls.urlBase}}),this.engine.loadModuleBySymbol({type:g.y.DEEP_LINKS}),this.engine.loadModuleBySymbol({type:g.y.QUICK_MENUS}),this.engine.loadModuleBySymbol({type:g.y.CURRENT_PANO_MARKER}),this.engine.loadModuleBySymbol({type:g.y.SCREENSHOTS}),this.engine.loadModuleBySymbol({type:g.y.VIDEO_RECORDER}),this.engine.loadModuleBySymbol({type:g.y.MEASUREMENT_MODE,config:{baseUrl:this.modelUrls.urlBase,readonly:!0}}),this.engine.loadModuleBySymbol({type:g.y.SNAPSHOTS_EDITOR}),this.engine.loadModuleBySymbol({type:g.y.DWELL_ANALYTICS}),Ue&&this.engine.loadModuleBySymbol({type:g.y.SEARCH,config:{urlQuery:ge||((0,b.Q0)()?"":ge),urlQueryKeywords:Se,keywordSummaryEnabled:pt||ht,workshop:this.inWorkshop,advancedSearchEnabled:He}}),pt&&ht&&this.engine.loadModuleBySymbol({type:g.y.OBJECT_TAG_SUGGESTIONS_DATA,config:{debug:!!this.urlValues.debug,baseUrl:this.modelUrls.urlBase,baseModelId:this.baseModelId,minConfidence:Ke}}),this.inWorkshop&&e.loadModuleBySymbol({type:g.y.TRASH,config:{baseModelId:this.baseModelId,queue:this.storeQueue,baseUrl:this.modelUrls.urlBase}}),this.engine.loadModuleBySymbol({type:g.y.WEBXR,config:{enableEventPositions:!1,framebufferScaling:Math.min(this.urlValues.xrframebuffer?parseFloat(this.urlValues.xrframebuffer):0,1),tracking:+(null!==(r=this.urlValues.xrtracking)&&void 0!==r?r:0),navPanoSize:ot}}),Be&&this.engine.loadModuleBySymbol({type:g.y.MODEL_RATING,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,queue:this.storeQueue,promptEnabled:Ve,debug:Ge}}),this.engine.loadModuleBySymbol({type:g.y.AUTOMATION_SUPPORT}),this.engine.waitForLoadingModules().then((()=>this.modulesLoadedPromise.resolve()))}async setUserPolicySettings(e,t,n){let i=!1;const s=await this.engine.market.waitForData(Ce.n);if(e){const e=s.hasPolicy(V.uE),r=(await this.engine.market.waitForData(Le.m)).isCommenter();i=e&&r,i&&(t.updateSetting(V.IA,i),t.updateSetting(V.Mp,i),t.updateSetting(V.pE,i&&n.has(V.pE)))}const r=(0,y.eY)("newtags"),o="1"===r||!(0,y.eY)("applicationKey")&&"0"!==r&&s.hasPolicy(B.i1),a=this.urlValues.objectTagSuggestions,l=s.hasPolicy(Pe.M)?"0"!==a:"1"===a,c=(0,y.eY)("stories"),d="1"===c||"0"!==c&&s.hasPolicy(N.R3);return t.updateSetting(N.lj,d),t.updateSetting(B.RY,o),this.engine.getModuleBySymbol(g.y.ANALYTICS).then((e=>{e.trackFeatures(`${B.Qy}:${o}`),e.trackFeatures(`${N.Yi}:${d}`)})),this.newTagPolicyPromise.resolve(),{newTagsEnabled:o,notesEnabled:i,objectTagsEnabled:l,storyToursFeature:d}}loadUserPolicyModules(e,t,n,i,s,r,o,a){const{notesEnabled:l,newTagsEnabled:c,objectTagsEnabled:d}=r;this.engine.market.waitForData(Ce.n).then((e=>{!async function(e,t,n,i,s,r,o,a){const l=t.subscriber_prompt_denylist||ye.ED.domainDenylist,{popupAllowed:c,bannerAllowed:d}=await Oe({urlValues:n,settingsData:e.settingsData,flags:i,loggedIn:s,inWorkshop:o,hasPolicy:r.hasPolicy.bind(r),domainDenylist:l});if(Ee.L.debug(`popupAllowed: ${c}, bannerAllowed: ${d}`),c||d){e.updateSetting(ye.B_,!0);const i=c&&("1"===n[ye.ke.forcePopup]||!!a.get("subscriber_prompt_a_popup")),s=d&&"1"===n[ye.ke.forceBanner],r=t.subscriber_prompt_a_delay_ms||ye.ED.popupDelay;Ee.L.debug(`popupEnabled: ${i}, bannerEnabled: ${s}`),e.registerSetting("Subscriber Prompt",ye.My,{popupDelay:r,popupEnabled:i,bannerEnabled:s},!1,A.SettingPersistence.NONE)}}(n,this.apiConfig,this.urlValues,i,t,e,this.inWorkshop,s)})),(l||c)&&(this.engine.loadModuleBySymbol({type:g.y.ATTACHMENTS,config:{oEmbedConsumer:this.oEmbedConsumer,baseUrl:this.modelUrls.urlBase,organizationId:a}}),l&&this.engine.loadModuleBySymbol({type:g.y.NOTES,config:{workshop:this.inWorkshop,baseUrl:this.modelUrls.urlBase,readonly:!1}}),c&&(this.engine.loadModuleBySymbol({type:g.y.TAGS,config:{objectTagsEnabled:d,viewId:e,tagIconsEnabled:o}}),this.engine.loadModuleBySymbol({type:g.y.ORDERED_LISTS,config:{workshop:this.inWorkshop,baseUrl:this.modelUrls.urlBase}})))}async unload(e){var t;le.u.removeSharedCache(this.prefetchCache);try{await e.commandBinder.issueCommand(new ie.vy)}catch(e){Re.debug("showcase unload called before tour controls registered, ignoring stopTour",e)}await this.uiLoading,await(null===(t=this.showcaseGui)||void 0===t?void 0:t.unloadUi().catch((e=>{Re.error(e)}))),e.commandBinder.resetHooks(),this.bindings.forEach((e=>e.cancel())),this.bindings.length=0}async loginToModel(e,t){Re.info(`Loading model view: ${e}`);const n=this.forceLogin;await t.getApi().modelExists(e,{ignorePrefetch:n}).catch((async t=>{if(n&&(t instanceof oe.GT||t instanceof oe.V2))await this.showLoginScreen(e);else{if(!(t instanceof oe.GT))throw t;await this.login()}}))}async loginToNote(e){this.forceLogin&&await this.showLoginScreen(e)}loadInitialAppModules(e,t,n){this.engine.loadModuleBySymbol({type:g.y.RAYCASTER}),this.engine.loadModuleBySymbol({type:g.y.INPUT,config:{disableWheel:"0"===this.urlValues.wh,pointerPreventDefault:!this.settingOverrides||!this.settingOverrides.hasOwnProperty("pointerPreventDefault")||!!this.settingOverrides.pointerPreventDefault}}),this.engine.getModuleBySymbol(g.y.ANALYTICS).then((n=>{n.setOptions({gpu:t}),n.trackFeatures(...e)}))}loadPrefetchedData(e,t){let n=t?ce.h.CACHE:ce.h.NONE;const i=this.urlValues.prefetch;i&&Object.values(ce.h).includes(i)&&(n=i),this.prefetchCache=new ue.R({baseUrl:this.apiHost,prefetchPolicy:n,initialData:PrefetchedData.getQuery("GetModelPrefetch"),query:de.GetModelPrefetch,variables:{modelId:e}}),le.u.addSharedCache(this.prefetchCache)}async loadViewsAndStorage(e,t){await this.engine.loadModuleBySymbol({type:g.y.LAYERS,config:{viewId:e,baseUrl:this.apiHost,readonly:!0,inWorkshop:this.inWorkshop,modulesLoadedPromise:this.modulesLoadedPromise}});const n=(await this.engine.market.waitForData(T.R)).getBaseModelId();return this.engine.loadModuleBySymbol({type:g.y.STORAGE,config:{modelId:n,baseUrl:this.apiHost}}),n}async loadAnalytics(){this.engine.loadModuleBySymbol({type:g.y.ANALYTICS}),this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_ANALYTICS,config:{appName:this.settingOverrides&&this.settingOverrides.appName||"showcase",provider:this.urlValues.analytics,apiQueue:this.apiQueue,analyticsQueue:this.analyticsQueue}})}loadInitialDataModules(e){this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_SETTINGS,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue}}),this.engine.loadModuleBySymbol({type:g.y.MODEL_DATA,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue,tiledMeshEnabled:e.Features[U.iT]}});const t=this.settingOverrides.disableMobileRedirect||!(b.tq()||this.needsFramebustToPlayXR),n=!!this.openingTool||void 0,i=!!this.openingTool||void 0,s=!!this.openingTool||void 0;this.engine.loadModuleBySymbol({type:g.y.LOADING_GUI,config:{noUi:this.forceLogin,inWorkshop:this.inWorkshop,viewId:this.initialViewId,baseUrl:this.modelUrls.urlBase,quickstart:this.quickstart,autoplay:this.autoplay,allowPlayInIframe:t,startNewTab:"1"===this.urlValues.nt,hideTitle:i,hideBranding:s,hidePoweredBy:n}}),this.engine.loadModuleBySymbol({type:g.y.SNAPSHOTS_DATA,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue}}),this.engine.loadModuleBySymbol({type:g.y.CAMERA_START,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue}}),this.engine.loadModuleBySymbol({type:g.y.SWEEP_DATA,config:{baseModelId:this.baseModelId,baseUrl:this.modelUrls.urlBase,readonly:!0,queue:this.storeQueue}})}loadPanoControls(e){this.uiLoading=this.loadUI(!(e||this.forceLogin)),this.engine.loadModuleBySymbol({type:g.y.CONTROLS_COMMON}),this.engine.loadModuleBySymbol({type:g.y.CONTROLS_INSIDE})}async loadSdkModule(e,t,n,i){const s=this.engine,r=async function(){const e=window.location.origin+window.location.pathname.slice(0,window.location.pathname.lastIndexOf("/"));return{client:e+"/sdk/sdk-client.js",interface:e+"/sdk/sdk-interface.js",sandbox:e+"/sdk/mattertag/mattertag.postMessage.html"}}(),o=async e=>{const i=await Promise.resolve().then(l.bind(l,96542));await n,await i.loadInterface(e,s,await r,t,await this.oEmbedConsumer)};return new Promise((async e=>{await s.loadModuleBySymbol({type:g.y.SDK,config:{applicationKey:i||null,validationUrl:this.apiHost+"/api/v1/user/",getSdkConfig:r,setupExternalSdk:o,onClientConnect(t){t&&ae.w.setToken(t),e(!!t),Promise.all([s.market.waitForData(T.R),s.market.waitForData(Me.e)]).then((([e,t])=>{t.setProperty(De.Pe,!1)}))},queue:this.apiQueue}})}))}loadUI(e){return Promise.all([this.engine.getModuleBySymbol(g.y.GUI),this.engine.getModuleBySymbol(g.y.SHOWCASE_GUI)]).then((([t,n])=>{this.guiModule=t,this.showcaseGui=n,e&&t.loadUi(n.loadUi)}))}async showLoginScreen(e){var t,n;return(await this.engine.loadModuleBySymbol({type:g.y.LOGIN_REDIRECT,config:{loginUrl:(null===(t=this.apiConfig)||void 0===t?void 0:t.authn_login_url)||"",registerUrl:(null===(n=this.apiConfig)||void 0===n?void 0:n.account_register_url)||"",modelId:e,baseUrl:this.modelUrls.urlBase,container:this.container}})).loadUi()}login(){return new Promise((async e=>{const t=await this.engine.loadModuleBySymbol({type:g.y.SHOWCASE_PASSWORD,config:{modelId:this.initialViewId,baseUrl:this.modelUrls.urlBase,container:this.container}});this.engine.subscribe(O.L,(()=>{t.hidePasswordScreen(),e()})),t.showPasswordScreen()}))}setupOEmbedConsumer(e){const t={embedlyKey:e||this.apiConfig.embedly_key,instagramAppId:this.apiConfig.instagram_app_id,instagramClientToken:this.apiConfig.instagram_client_token,googleMapsApiKey:this.apiConfig.google_maps_key};this.oEmbedDeferred.resolve(new ke.a_(this.apiQueue,t))}}var je=l(40470);window.addEventListener("app-start",(e=>{!function(e){const t=new Engine,n=new Showcase(!1,e);t.loadApplication(n,n.setError.bind(n)),b.Jm()||document.body.classList.add("no-touch");!function(e){class BundleSdkBootstrap{constructor(e){this.windowContext=e}async connect(t,n={applicationKey:""}){const i=await e.getModuleBySymbol(g.y.SDK);return je.tK.connect(new BundleConnector(i,n),new BundleMessengerFactoryFetcher,this.windowContext)}}Object.defineProperty(window,"MP_SDK",{get(){let e=window;return window!==window.top&&(e=window.parent),window.opener&&(e=window.opener),new BundleSdkBootstrap(e)}})}(t)}(e.detail.config||{})}),!0);class BundleConnector{constructor(e,t){this.sdk=e,this.options=t}connect(){return this.sdk.connect(`${window.location.protocol}//${window.location.host}`,this.options)}cancelConnecting(){}}class BundleMessengerFactoryFetcher{getFactory(e){return e.messengerFactory}}})()})();